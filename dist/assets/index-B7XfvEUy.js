const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Profile-io59fk1S.js","assets/Profile-aFOkYtVs.css","assets/LogoutConfirm-BLY6jgB4.js","assets/LogoutConfirm-BnB5lI_g.css","assets/Wallet-BhqTzd3z.js","assets/Wallet-BFXQozc4.css","assets/History-beWEVuSy.js","assets/History-DZMQk71l.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Zp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const nt={},Bo=[],$r=()=>{},vb=()=>!1,hf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Xp=t=>t.startsWith("onUpdate:"),Ut=Object.assign,eg=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},WS=Object.prototype.hasOwnProperty,Ze=(t,e)=>WS.call(t,e),ke=Array.isArray,Do=t=>$c(t)==="[object Map]",pf=t=>$c(t)==="[object Set]",I0=t=>$c(t)==="[object Date]",Ne=t=>typeof t=="function",xt=t=>typeof t=="string",Vr=t=>typeof t=="symbol",tt=t=>t!==null&&typeof t=="object",wb=t=>(tt(t)||Ne(t))&&Ne(t.then)&&Ne(t.catch),bb=Object.prototype.toString,$c=t=>bb.call(t),QS=t=>$c(t).slice(8,-1),Eb=t=>$c(t)==="[object Object]",tg=t=>xt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ka=Zp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gf=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},JS=/-\w/g,nr=gf(t=>t.replace(JS,e=>e.slice(1).toUpperCase())),YS=/\B([A-Z])/g,to=gf(t=>t.replace(YS,"-$1").toLowerCase()),mf=gf(t=>t.charAt(0).toUpperCase()+t.slice(1)),rd=gf(t=>t?`on${mf(t)}`:""),is=(t,e)=>!Object.is(t,e),Vl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Ab=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Ih=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ZS=t=>{const e=xt(t)?Number(t):NaN;return isNaN(e)?t:e};let R0;const yf=()=>R0||(R0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ss(t){if(ke(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=xt(r)?nC(r):ss(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(xt(t)||tt(t))return t}const XS=/;(?![^(]*\))/g,eC=/:([^]+)/,tC=/\/\*[^]*?\*\//g;function nC(t){const e={};return t.replace(tC,"").split(XS).forEach(n=>{if(n){const r=n.split(eC);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Hc(t){let e="";if(xt(t))e=t;else if(ke(t))for(let n=0;n<t.length;n++){const r=Hc(t[n]);r&&(e+=r+" ")}else if(tt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const rC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iC=Zp(rC);function _b(t){return!!t||t===""}function sC(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=vf(t[r],e[r]);return n}function vf(t,e){if(t===e)return!0;let n=I0(t),r=I0(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Vr(t),r=Vr(e),n||r)return t===e;if(n=ke(t),r=ke(e),n||r)return n&&r?sC(t,e):!1;if(n=tt(t),r=tt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!vf(t[o],e[o]))return!1}}return String(t)===String(e)}function Sb(t,e){return t.findIndex(n=>vf(n,e))}const Cb=t=>!!(t&&t.__v_isRef===!0),Oe=t=>xt(t)?t:t==null?"":ke(t)||tt(t)&&(t.toString===bb||!Ne(t.toString))?Cb(t)?Oe(t.value):JSON.stringify(t,xb,2):String(t),xb=(t,e)=>Cb(e)?xb(t,e.value):Do(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[id(r,s)+" =>"]=i,n),{})}:pf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>id(n))}:Vr(e)?id(e):tt(e)&&!ke(e)&&!Eb(e)?String(e):e,id=(t,e="")=>{var n;return Vr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let An;class kb{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=An,!e&&An&&(this.index=(An.scopes||(An.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=An;try{return An=this,e()}finally{An=n}}}on(){++this._on===1&&(this.prevScope=An,An=this)}off(){this._on>0&&--this._on===0&&(An=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function oC(t){return new kb(t)}function aC(){return An}let it;const sd=new WeakSet;class Pb{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,An&&An.active&&An.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sd.has(this)&&(sd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ib(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,O0(this),Rb(this);const e=it,n=mr;it=this,mr=!0;try{return this.fn()}finally{Ob(this),it=e,mr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ig(e);this.deps=this.depsTail=void 0,O0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Rh(this)&&this.run()}get dirty(){return Rh(this)}}let Tb=0,ja,Va;function Ib(t,e=!1){if(t.flags|=8,e){t.next=Va,Va=t;return}t.next=ja,ja=t}function ng(){Tb++}function rg(){if(--Tb>0)return;if(Va){let e=Va;for(Va=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ja;){let e=ja;for(ja=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Rb(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ob(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),ig(r),cC(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Rh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Nb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Nb(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ac)||(t.globalVersion=ac,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Rh(t))))return;t.flags|=2;const e=t.dep,n=it,r=mr;it=t,mr=!0;try{Rb(t);const i=t.fn(t._value);(e.version===0||is(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{it=n,mr=r,Ob(t),t.flags&=-3}}function ig(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)ig(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function cC(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let mr=!0;const Mb=[];function wi(){Mb.push(mr),mr=!1}function bi(){const t=Mb.pop();mr=t===void 0?!0:t}function O0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=it;it=void 0;try{e()}finally{it=n}}}let ac=0;class lC{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!it||!mr||it===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==it)n=this.activeLink=new lC(it,this),it.deps?(n.prevDep=it.depsTail,it.depsTail.nextDep=n,it.depsTail=n):it.deps=it.depsTail=n,Lb(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=it.depsTail,n.nextDep=void 0,it.depsTail.nextDep=n,it.depsTail=n,it.deps===n&&(it.deps=r)}return n}trigger(e){this.version++,ac++,this.notify(e)}notify(e){ng();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rg()}}}function Lb(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Lb(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Oh=new WeakMap,zs=Symbol(""),Nh=Symbol(""),cc=Symbol("");function Jt(t,e,n){if(mr&&it){let r=Oh.get(t);r||Oh.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new sg),i.map=r,i.key=n),i.track()}}function oi(t,e,n,r,i,s){const o=Oh.get(t);if(!o){ac++;return}const a=c=>{c&&c.trigger()};if(ng(),e==="clear")o.forEach(a);else{const c=ke(t),l=c&&tg(n);if(c&&n==="length"){const u=Number(r);o.forEach((f,d)=>{(d==="length"||d===cc||!Vr(d)&&d>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(cc)),e){case"add":c?l&&a(o.get("length")):(a(o.get(zs)),Do(t)&&a(o.get(Nh)));break;case"delete":c||(a(o.get(zs)),Do(t)&&a(o.get(Nh)));break;case"set":Do(t)&&a(o.get(zs));break}}rg()}function lo(t){const e=Ge(t);return e===t?e:(Jt(e,"iterate",cc),tr(t)?e:e.map(Kt))}function wf(t){return Jt(t=Ge(t),"iterate",cc),t}const uC={__proto__:null,[Symbol.iterator](){return od(this,Symbol.iterator,Kt)},concat(...t){return lo(this).concat(...t.map(e=>ke(e)?lo(e):e))},entries(){return od(this,"entries",t=>(t[1]=Kt(t[1]),t))},every(t,e){return qr(this,"every",t,e,void 0,arguments)},filter(t,e){return qr(this,"filter",t,e,n=>n.map(Kt),arguments)},find(t,e){return qr(this,"find",t,e,Kt,arguments)},findIndex(t,e){return qr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qr(this,"findLast",t,e,Kt,arguments)},findLastIndex(t,e){return qr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qr(this,"forEach",t,e,void 0,arguments)},includes(...t){return ad(this,"includes",t)},indexOf(...t){return ad(this,"indexOf",t)},join(t){return lo(this).join(t)},lastIndexOf(...t){return ad(this,"lastIndexOf",t)},map(t,e){return qr(this,"map",t,e,void 0,arguments)},pop(){return ba(this,"pop")},push(...t){return ba(this,"push",t)},reduce(t,...e){return N0(this,"reduce",t,e)},reduceRight(t,...e){return N0(this,"reduceRight",t,e)},shift(){return ba(this,"shift")},some(t,e){return qr(this,"some",t,e,void 0,arguments)},splice(...t){return ba(this,"splice",t)},toReversed(){return lo(this).toReversed()},toSorted(t){return lo(this).toSorted(t)},toSpliced(...t){return lo(this).toSpliced(...t)},unshift(...t){return ba(this,"unshift",t)},values(){return od(this,"values",Kt)}};function od(t,e,n){const r=wf(t),i=r[e]();return r!==t&&!tr(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=n(s.value)),s}),i}const fC=Array.prototype;function qr(t,e,n,r,i,s){const o=wf(t),a=o!==t&&!tr(t),c=o[e];if(c!==fC[e]){const f=c.apply(t,s);return a?Kt(f):f}let l=n;o!==t&&(a?l=function(f,d){return n.call(this,Kt(f),d,t)}:n.length>2&&(l=function(f,d){return n.call(this,f,d,t)}));const u=c.call(o,l,r);return a&&i?i(u):u}function N0(t,e,n,r){const i=wf(t);let s=n;return i!==t&&(tr(t)?n.length>3&&(s=function(o,a,c){return n.call(this,o,a,c,t)}):s=function(o,a,c){return n.call(this,o,Kt(a),c,t)}),i[e](s,...r)}function ad(t,e,n){const r=Ge(t);Jt(r,"iterate",cc);const i=r[e](...n);return(i===-1||i===!1)&&cg(n[0])?(n[0]=Ge(n[0]),r[e](...n)):i}function ba(t,e,n=[]){wi(),ng();const r=Ge(t)[e].apply(t,n);return rg(),bi(),r}const dC=Zp("__proto__,__v_isRef,__isVue"),Bb=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Vr));function hC(t){Vr(t)||(t=String(t));const e=Ge(this);return Jt(e,"has",t),e.hasOwnProperty(t)}class Db{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?_C:Hb:s?$b:Fb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ke(e);if(!i){let c;if(o&&(c=uC[n]))return c;if(n==="hasOwnProperty")return hC}const a=Reflect.get(e,n,en(e)?e:r);if((Vr(n)?Bb.has(n):dC(n))||(i||Jt(e,"get",n),s))return a;if(en(a)){const c=o&&tg(n)?a:a.value;return i&&tt(c)?Lh(c):c}return tt(a)?i?Lh(a):Zo(a):a}}class Ub extends Db{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const c=us(s);if(!tr(r)&&!us(r)&&(s=Ge(s),r=Ge(r)),!ke(e)&&en(s)&&!en(r))return c||(s.value=r),!0}const o=ke(e)&&tg(n)?Number(n)<e.length:Ze(e,n),a=Reflect.set(e,n,r,en(e)?e:i);return e===Ge(i)&&(o?is(r,s)&&oi(e,"set",n,r):oi(e,"add",n,r)),a}deleteProperty(e,n){const r=Ze(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&oi(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Vr(n)||!Bb.has(n))&&Jt(e,"has",n),r}ownKeys(e){return Jt(e,"iterate",ke(e)?"length":zs),Reflect.ownKeys(e)}}class pC extends Db{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const gC=new Ub,mC=new pC,yC=new Ub(!0);const Mh=t=>t,rl=t=>Reflect.getPrototypeOf(t);function vC(t,e,n){return function(...r){const i=this.__v_raw,s=Ge(i),o=Do(s),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=i[t](...r),u=n?Mh:e?wu:Kt;return!e&&Jt(s,"iterate",c?Nh:zs),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:a?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function il(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function wC(t,e){const n={get(i){const s=this.__v_raw,o=Ge(s),a=Ge(i);t||(is(i,a)&&Jt(o,"get",i),Jt(o,"get",a));const{has:c}=rl(o),l=e?Mh:t?wu:Kt;if(c.call(o,i))return l(s.get(i));if(c.call(o,a))return l(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Jt(Ge(i),"iterate",zs),i.size},has(i){const s=this.__v_raw,o=Ge(s),a=Ge(i);return t||(is(i,a)&&Jt(o,"has",i),Jt(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,c=Ge(a),l=e?Mh:t?wu:Kt;return!t&&Jt(c,"iterate",zs),a.forEach((u,f)=>i.call(s,l(u),l(f),o))}};return Ut(n,t?{add:il("add"),set:il("set"),delete:il("delete"),clear:il("clear")}:{add(i){!e&&!tr(i)&&!us(i)&&(i=Ge(i));const s=Ge(this);return rl(s).has.call(s,i)||(s.add(i),oi(s,"add",i,i)),this},set(i,s){!e&&!tr(s)&&!us(s)&&(s=Ge(s));const o=Ge(this),{has:a,get:c}=rl(o);let l=a.call(o,i);l||(i=Ge(i),l=a.call(o,i));const u=c.call(o,i);return o.set(i,s),l?is(s,u)&&oi(o,"set",i,s):oi(o,"add",i,s),this},delete(i){const s=Ge(this),{has:o,get:a}=rl(s);let c=o.call(s,i);c||(i=Ge(i),c=o.call(s,i)),a&&a.call(s,i);const l=s.delete(i);return c&&oi(s,"delete",i,void 0),l},clear(){const i=Ge(this),s=i.size!==0,o=i.clear();return s&&oi(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=vC(i,t,e)}),n}function og(t,e){const n=wC(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ze(n,i)&&i in r?n:r,i,s)}const bC={get:og(!1,!1)},EC={get:og(!1,!0)},AC={get:og(!0,!1)};const Fb=new WeakMap,$b=new WeakMap,Hb=new WeakMap,_C=new WeakMap;function SC(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function CC(t){return t.__v_skip||!Object.isExtensible(t)?0:SC(QS(t))}function Zo(t){return us(t)?t:ag(t,!1,gC,bC,Fb)}function Kb(t){return ag(t,!1,yC,EC,$b)}function Lh(t){return ag(t,!0,mC,AC,Hb)}function ag(t,e,n,r,i){if(!tt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=CC(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function Uo(t){return us(t)?Uo(t.__v_raw):!!(t&&t.__v_isReactive)}function us(t){return!!(t&&t.__v_isReadonly)}function tr(t){return!!(t&&t.__v_isShallow)}function cg(t){return t?!!t.__v_raw:!1}function Ge(t){const e=t&&t.__v_raw;return e?Ge(e):t}function jb(t){return!Ze(t,"__v_skip")&&Object.isExtensible(t)&&Ab(t,"__v_skip",!0),t}const Kt=t=>tt(t)?Zo(t):t,wu=t=>tt(t)?Lh(t):t;function en(t){return t?t.__v_isRef===!0:!1}function Ie(t){return Vb(t,!1)}function xC(t){return Vb(t,!0)}function Vb(t,e){return en(t)?t:new kC(t,e)}class kC{constructor(e,n){this.dep=new sg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ge(e),this._value=n?e:Kt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||tr(e)||us(e);e=r?e:Ge(e),is(e,n)&&(this._rawValue=e,this._value=r?e:Kt(e),this.dep.trigger())}}function fn(t){return en(t)?t.value:t}const PC={get:(t,e,n)=>e==="__v_raw"?t:fn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return en(i)&&!en(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function zb(t){return Uo(t)?t:new Proxy(t,PC)}class TC{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new sg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ac-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return Ib(this,!0),!0}get value(){const e=this.dep.track();return Nb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function IC(t,e,n=!1){let r,i;return Ne(t)?r=t:(r=t.get,i=t.set),new TC(r,i,n)}const sl={},bu=new WeakMap;let xs;function RC(t,e=!1,n=xs){if(n){let r=bu.get(n);r||bu.set(n,r=[]),r.push(t)}}function OC(t,e,n=nt){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:c}=n,l=x=>i?x:tr(x)||i===!1||i===0?ai(x,1):ai(x);let u,f,d,h,g=!1,p=!1;if(en(t)?(f=()=>t.value,g=tr(t)):Uo(t)?(f=()=>l(t),g=!0):ke(t)?(p=!0,g=t.some(x=>Uo(x)||tr(x)),f=()=>t.map(x=>{if(en(x))return x.value;if(Uo(x))return l(x);if(Ne(x))return c?c(x,2):x()})):Ne(t)?e?f=c?()=>c(t,2):t:f=()=>{if(d){wi();try{d()}finally{bi()}}const x=xs;xs=u;try{return c?c(t,3,[h]):t(h)}finally{xs=x}}:f=$r,e&&i){const x=f,N=i===!0?1/0:i;f=()=>ai(x(),N)}const y=aC(),m=()=>{u.stop(),y&&y.active&&eg(y.effects,u)};if(s&&e){const x=e;e=(...N)=>{x(...N),m()}}let b=p?new Array(t.length).fill(sl):sl;const w=x=>{if(!(!(u.flags&1)||!u.dirty&&!x))if(e){const N=u.run();if(i||g||(p?N.some((H,z)=>is(H,b[z])):is(N,b))){d&&d();const H=xs;xs=u;try{const z=[N,b===sl?void 0:p&&b[0]===sl?[]:b,h];b=N,c?c(e,3,z):e(...z)}finally{xs=H}}}else u.run()};return a&&a(w),u=new Pb(f),u.scheduler=o?()=>o(w,!1):w,h=x=>RC(x,!1,u),d=u.onStop=()=>{const x=bu.get(u);if(x){if(c)c(x,4);else for(const N of x)N();bu.delete(u)}},e?r?w(!0):b=u.run():o?o(w.bind(null,!0),!0):u.run(),m.pause=u.pause.bind(u),m.resume=u.resume.bind(u),m.stop=m,m}function ai(t,e=1/0,n){if(e<=0||!tt(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,en(t))ai(t.value,e,n);else if(ke(t))for(let r=0;r<t.length;r++)ai(t[r],e,n);else if(pf(t)||Do(t))t.forEach(r=>{ai(r,e,n)});else if(Eb(t)){for(const r in t)ai(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ai(t[r],e,n)}return t}function Kc(t,e,n,r){try{return r?t(...r):t()}catch(i){bf(i,e,n)}}function wr(t,e,n,r){if(Ne(t)){const i=Kc(t,e,n,r);return i&&wb(i)&&i.catch(s=>{bf(s,e,n)}),i}if(ke(t)){const i=[];for(let s=0;s<t.length;s++)i.push(wr(t[s],e,n,r));return i}}function bf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||nt;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,c,l)===!1)return}a=a.parent}if(s){wi(),Kc(s,null,10,[t,c,l]),bi();return}}NC(t,n,i,r,o)}function NC(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const cn=[];let Tr=-1;const Fo=[];let Vi=null,wo=0;const Gb=Promise.resolve();let Eu=null;function qb(t){const e=Eu||Gb;return t?e.then(this?t.bind(this):t):e}function MC(t){let e=Tr+1,n=cn.length;for(;e<n;){const r=e+n>>>1,i=cn[r],s=lc(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function lg(t){if(!(t.flags&1)){const e=lc(t),n=cn[cn.length-1];!n||!(t.flags&2)&&e>=lc(n)?cn.push(t):cn.splice(MC(e),0,t),t.flags|=1,Wb()}}function Wb(){Eu||(Eu=Gb.then(Jb))}function LC(t){ke(t)?Fo.push(...t):Vi&&t.id===-1?Vi.splice(wo+1,0,t):t.flags&1||(Fo.push(t),t.flags|=1),Wb()}function M0(t,e,n=Tr+1){for(;n<cn.length;n++){const r=cn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;cn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Qb(t){if(Fo.length){const e=[...new Set(Fo)].sort((n,r)=>lc(n)-lc(r));if(Fo.length=0,Vi){Vi.push(...e);return}for(Vi=e,wo=0;wo<Vi.length;wo++){const n=Vi[wo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Vi=null,wo=0}}const lc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Jb(t){try{for(Tr=0;Tr<cn.length;Tr++){const e=cn[Tr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Kc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Tr<cn.length;Tr++){const e=cn[Tr];e&&(e.flags&=-2)}Tr=-1,cn.length=0,Qb(),Eu=null,(cn.length||Fo.length)&&Jb()}}let Fn=null,Yb=null;function Au(t){const e=Fn;return Fn=t,Yb=t&&t.type.__scopeId||null,e}function ks(t,e=Fn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Cu(-1);const s=Au(e);let o;try{o=t(...i)}finally{Au(s),r._d&&Cu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function nn(t,e){if(Fn===null)return t;const n=xf(Fn),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,c=nt]=e[i];s&&(Ne(s)&&(s={mounted:s,updated:s}),s.deep&&ai(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function vs(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(wi(),wr(c,n,8,[t.el,a,t,e]),bi())}}const BC=Symbol("_vte"),Zb=t=>t.__isTeleport,ei=Symbol("_leaveCb"),ol=Symbol("_enterCb");function DC(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xo(()=>{t.isMounted=!0}),_f(()=>{t.isUnmounting=!0}),t}const jn=[Function,Array],Xb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jn,onEnter:jn,onAfterEnter:jn,onEnterCancelled:jn,onBeforeLeave:jn,onLeave:jn,onAfterLeave:jn,onLeaveCancelled:jn,onBeforeAppear:jn,onAppear:jn,onAfterAppear:jn,onAppearCancelled:jn},e1=t=>{const e=t.subTree;return e.component?e1(e.component):e},UC={name:"BaseTransition",props:Xb,setup(t,{slots:e}){const n=P1(),r=DC();return()=>{const i=e.default&&r1(e.default(),!0);if(!i||!i.length)return;const s=t1(i),o=Ge(t),{mode:a}=o;if(r.isLeaving)return cd(s);const c=L0(s);if(!c)return cd(s);let l=Bh(c,o,r,n,f=>l=f);c.type!==dn&&uc(c,l);let u=n.subTree&&L0(n.subTree);if(u&&u.type!==dn&&!Os(u,c)&&e1(n).type!==dn){let f=Bh(u,o,r,n);if(uc(u,f),a==="out-in"&&c.type!==dn)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},cd(s);a==="in-out"&&c.type!==dn?f.delayLeave=(d,h,g)=>{const p=n1(r,u);p[String(u.key)]=u,d[ei]=()=>{h(),d[ei]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{g(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function t1(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==dn){e=n;break}}return e}const FC=UC;function n1(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Bh(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:d,onLeave:h,onAfterLeave:g,onLeaveCancelled:p,onBeforeAppear:y,onAppear:m,onAfterAppear:b,onAppearCancelled:w}=e,x=String(t.key),N=n1(n,t),H=(F,U)=>{F&&wr(F,r,9,U)},z=(F,U)=>{const V=U[1];H(F,U),ke(F)?F.every(L=>L.length<=1)&&V():F.length<=1&&V()},G={mode:o,persisted:a,beforeEnter(F){let U=c;if(!n.isMounted)if(s)U=y||c;else return;F[ei]&&F[ei](!0);const V=N[x];V&&Os(t,V)&&V.el[ei]&&V.el[ei](),H(U,[F])},enter(F){let U=l,V=u,L=f;if(!n.isMounted)if(s)U=m||l,V=b||u,L=w||f;else return;let B=!1;const M=F[ol]=_=>{B||(B=!0,_?H(L,[F]):H(V,[F]),G.delayedLeave&&G.delayedLeave(),F[ol]=void 0)};U?z(U,[F,M]):M()},leave(F,U){const V=String(t.key);if(F[ol]&&F[ol](!0),n.isUnmounting)return U();H(d,[F]);let L=!1;const B=F[ei]=M=>{L||(L=!0,U(),M?H(p,[F]):H(g,[F]),F[ei]=void 0,N[V]===t&&delete N[V])};N[V]=t,h?z(h,[F,B]):B()},clone(F){const U=Bh(F,e,n,r,i);return i&&i(U),U}};return G}function cd(t){if(Ef(t))return t=fs(t),t.children=null,t}function L0(t){if(!Ef(t))return Zb(t.type)&&t.children?t1(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ne(n.default))return n.default()}}function uc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,uc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function r1(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ln?(o.patchFlag&128&&i++,r=r.concat(r1(o.children,e,a))):(e||o.type!==dn)&&r.push(a!=null?fs(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function i1(t,e){return Ne(t)?Ut({name:t.name},e,{setup:t}):t}function s1(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const _u=new WeakMap;function za(t,e,n,r,i=!1){if(ke(t)){t.forEach((g,p)=>za(g,e&&(ke(e)?e[p]:e),n,r,i));return}if(Ga(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&za(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?xf(r.component):r.el,o=i?null:s,{i:a,r:c}=t,l=e&&e.r,u=a.refs===nt?a.refs={}:a.refs,f=a.setupState,d=Ge(f),h=f===nt?vb:g=>Ze(d,g);if(l!=null&&l!==c){if(B0(e),xt(l))u[l]=null,h(l)&&(f[l]=null);else if(en(l)){l.value=null;const g=e;g.k&&(u[g.k]=null)}}if(Ne(c))Kc(c,a,12,[o,u]);else{const g=xt(c),p=en(c);if(g||p){const y=()=>{if(t.f){const m=g?h(c)?f[c]:u[c]:c.value;if(i)ke(m)&&eg(m,s);else if(ke(m))m.includes(s)||m.push(s);else if(g)u[c]=[s],h(c)&&(f[c]=u[c]);else{const b=[s];c.value=b,t.k&&(u[t.k]=b)}}else g?(u[c]=o,h(c)&&(f[c]=o)):p&&(c.value=o,t.k&&(u[t.k]=o))};if(o){const m=()=>{y(),_u.delete(t)};m.id=-1,_u.set(t,m),Rn(m,n)}else B0(t),y()}}}function B0(t){const e=_u.get(t);e&&(e.flags|=8,_u.delete(t))}yf().requestIdleCallback;yf().cancelIdleCallback;const Ga=t=>!!t.type.__asyncLoader,Ef=t=>t.type.__isKeepAlive;function $C(t,e){o1(t,"a",e)}function HC(t,e){o1(t,"da",e)}function o1(t,e,n=Zt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Af(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Ef(i.parent.vnode)&&KC(r,e,n,i),i=i.parent}}function KC(t,e,n,r){const i=Af(e,t,r,!0);a1(()=>{eg(r[e],i)},n)}function Af(t,e,n=Zt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{wi();const a=jc(n),c=wr(e,n,t,o);return a(),bi(),c});return r?i.unshift(s):i.push(s),s}}const Ci=t=>(e,n=Zt)=>{(!dc||t==="sp")&&Af(t,(...r)=>e(...r),n)},jC=Ci("bm"),Xo=Ci("m"),VC=Ci("bu"),zC=Ci("u"),_f=Ci("bum"),a1=Ci("um"),GC=Ci("sp"),qC=Ci("rtg"),WC=Ci("rtc");function QC(t,e=Zt){Af("ec",t,e)}const JC="components";function iB(t,e){return ZC(JC,t,!0,e)||t}const YC=Symbol.for("v-ndc");function ZC(t,e,n=!0,r=!1){const i=Fn||Zt;if(i){const s=i.type;{const a=$x(s,!1);if(a&&(a===e||a===nr(e)||a===mf(nr(e))))return s}const o=D0(i[t]||s[t],e)||D0(i.appContext[t],e);return!o&&r?s:o}}function D0(t,e){return t&&(t[e]||t[nr(e)]||t[mf(nr(e))])}function c1(t,e,n,r){let i;const s=n,o=ke(t);if(o||xt(t)){const a=o&&Uo(t);let c=!1,l=!1;a&&(c=!tr(t),l=us(t),t=wf(t)),i=new Array(t.length);for(let u=0,f=t.length;u<f;u++)i[u]=e(c?l?wu(Kt(t[u])):Kt(t[u]):t[u],u,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(tt(t))if(t[Symbol.iterator])i=Array.from(t,(a,c)=>e(a,c,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=e(t[u],u,c,s)}}else i=[];return i}const Dh=t=>t?T1(t)?xf(t):Dh(t.parent):null,qa=Ut(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Dh(t.parent),$root:t=>Dh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>u1(t),$forceUpdate:t=>t.f||(t.f=()=>{lg(t.update)}),$nextTick:t=>t.n||(t.n=qb.bind(t.proxy)),$watch:t=>wx.bind(t)}),ld=(t,e)=>t!==nt&&!t.__isScriptSetup&&Ze(t,e),XC={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(ld(r,e))return o[e]=1,r[e];if(i!==nt&&Ze(i,e))return o[e]=2,i[e];if((l=t.propsOptions[0])&&Ze(l,e))return o[e]=3,s[e];if(n!==nt&&Ze(n,e))return o[e]=4,n[e];Uh&&(o[e]=0)}}const u=qa[e];let f,d;if(u)return e==="$attrs"&&Jt(t.attrs,"get",""),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==nt&&Ze(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Ze(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return ld(i,e)?(i[e]=n,!0):r!==nt&&Ze(r,e)?(r[e]=n,!0):Ze(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s,type:o}},a){let c,l;return!!(n[a]||t!==nt&&a[0]!=="$"&&Ze(t,a)||ld(e,a)||(c=s[0])&&Ze(c,a)||Ze(r,a)||Ze(qa,a)||Ze(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ze(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function U0(t){return ke(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Uh=!0;function ex(t){const e=u1(t),n=t.proxy,r=t.ctx;Uh=!1,e.beforeCreate&&F0(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:g,activated:p,deactivated:y,beforeDestroy:m,beforeUnmount:b,destroyed:w,unmounted:x,render:N,renderTracked:H,renderTriggered:z,errorCaptured:G,serverPrefetch:F,expose:U,inheritAttrs:V,components:L,directives:B,filters:M}=e;if(l&&tx(l,r,null),o)for(const j in o){const v=o[j];Ne(v)&&(r[j]=v.bind(n))}if(i){const j=i.call(n,n);tt(j)&&(t.data=Zo(j))}if(Uh=!0,s)for(const j in s){const v=s[j],S=Ne(v)?v.bind(n,n):Ne(v.get)?v.get.bind(n,n):$r,C=!Ne(v)&&Ne(v.set)?v.set.bind(n):$r,P=Ue({get:S,set:C});Object.defineProperty(r,j,{enumerable:!0,configurable:!0,get:()=>P.value,set:A=>P.value=A})}if(a)for(const j in a)l1(a[j],r,n,j);if(c){const j=Ne(c)?c.call(n):c;Reflect.ownKeys(j).forEach(v=>{zl(v,j[v])})}u&&F0(u,t,"c");function R(j,v){ke(v)?v.forEach(S=>j(S.bind(n))):v&&j(v.bind(n))}if(R(jC,f),R(Xo,d),R(VC,h),R(zC,g),R($C,p),R(HC,y),R(QC,G),R(WC,H),R(qC,z),R(_f,b),R(a1,x),R(GC,F),ke(U))if(U.length){const j=t.exposed||(t.exposed={});U.forEach(v=>{Object.defineProperty(j,v,{get:()=>n[v],set:S=>n[v]=S,enumerable:!0})})}else t.exposed||(t.exposed={});N&&t.render===$r&&(t.render=N),V!=null&&(t.inheritAttrs=V),L&&(t.components=L),B&&(t.directives=B),F&&s1(t)}function tx(t,e,n=$r){ke(t)&&(t=Fh(t));for(const r in t){const i=t[r];let s;tt(i)?"default"in i?s=yr(i.from||r,i.default,!0):s=yr(i.from||r):s=yr(i),en(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function F0(t,e,n){wr(ke(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function l1(t,e,n,r){let i=r.includes(".")?_1(n,r):()=>n[r];if(xt(t)){const s=e[t];Ne(s)&&gr(i,s)}else if(Ne(t))gr(i,t.bind(n));else if(tt(t))if(ke(t))t.forEach(s=>l1(s,e,n,r));else{const s=Ne(t.handler)?t.handler.bind(n):e[t.handler];Ne(s)&&gr(i,s,t)}}function u1(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(l=>Su(c,l,o,!0)),Su(c,e,o)),tt(e)&&s.set(e,c),c}function Su(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Su(t,s,n,!0),i&&i.forEach(o=>Su(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=nx[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const nx={data:$0,props:H0,emits:H0,methods:Na,computed:Na,beforeCreate:rn,created:rn,beforeMount:rn,mounted:rn,beforeUpdate:rn,updated:rn,beforeDestroy:rn,beforeUnmount:rn,destroyed:rn,unmounted:rn,activated:rn,deactivated:rn,errorCaptured:rn,serverPrefetch:rn,components:Na,directives:Na,watch:ix,provide:$0,inject:rx};function $0(t,e){return e?t?function(){return Ut(Ne(t)?t.call(this,this):t,Ne(e)?e.call(this,this):e)}:e:t}function rx(t,e){return Na(Fh(t),Fh(e))}function Fh(t){if(ke(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function rn(t,e){return t?[...new Set([].concat(t,e))]:e}function Na(t,e){return t?Ut(Object.create(null),t,e):e}function H0(t,e){return t?ke(t)&&ke(e)?[...new Set([...t,...e])]:Ut(Object.create(null),U0(t),U0(e??{})):e}function ix(t,e){if(!t)return e;if(!e)return t;const n=Ut(Object.create(null),t);for(const r in e)n[r]=rn(t[r],e[r]);return n}function f1(){return{app:null,config:{isNativeTag:vb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sx=0;function ox(t,e){return function(r,i=null){Ne(r)||(r=Ut({},r)),i!=null&&!tt(i)&&(i=null);const s=f1(),o=new WeakSet,a=[];let c=!1;const l=s.app={_uid:sx++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Kx,get config(){return s.config},set config(u){},use(u,...f){return o.has(u)||(u&&Ne(u.install)?(o.add(u),u.install(l,...f)):Ne(u)&&(o.add(u),u(l,...f))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,f){return f?(s.components[u]=f,l):s.components[u]},directive(u,f){return f?(s.directives[u]=f,l):s.directives[u]},mount(u,f,d){if(!c){const h=l._ceVNode||ft(r,i);return h.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),t(h,u,d),c=!0,l._container=u,u.__vue_app__=l,xf(h.component)}},onUnmount(u){a.push(u)},unmount(){c&&(wr(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,f){return s.provides[u]=f,l},runWithContext(u){const f=$o;$o=l;try{return u()}finally{$o=f}}};return l}}let $o=null;function zl(t,e){if(Zt){let n=Zt.provides;const r=Zt.parent&&Zt.parent.provides;r===n&&(n=Zt.provides=Object.create(r)),n[t]=e}}function yr(t,e,n=!1){const r=P1();if(r||$o){let i=$o?$o._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ne(e)?e.call(r&&r.proxy):e}}const d1={},h1=()=>Object.create(d1),p1=t=>Object.getPrototypeOf(t)===d1;function ax(t,e,n,r=!1){const i={},s=h1();t.propsDefaults=Object.create(null),g1(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Kb(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function cx(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Ge(i),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(Sf(t.emitsOptions,d))continue;const h=e[d];if(c)if(Ze(s,d))h!==s[d]&&(s[d]=h,l=!0);else{const g=nr(d);i[g]=$h(c,a,g,h,t,!1)}else h!==s[d]&&(s[d]=h,l=!0)}}}else{g1(t,e,i,s)&&(l=!0);let u;for(const f in a)(!e||!Ze(e,f)&&((u=to(f))===f||!Ze(e,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=$h(c,a,f,void 0,t,!0)):delete i[f]);if(s!==a)for(const f in s)(!e||!Ze(e,f))&&(delete s[f],l=!0)}l&&oi(t.attrs,"set","")}function g1(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Ka(c))continue;const l=e[c];let u;i&&Ze(i,u=nr(c))?!s||!s.includes(u)?n[u]=l:(a||(a={}))[u]=l:Sf(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(s){const c=Ge(n),l=a||nt;for(let u=0;u<s.length;u++){const f=s[u];n[f]=$h(i,c,f,l[f],t,!Ze(l,f))}}return o}function $h(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ze(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ne(c)){const{propsDefaults:l}=i;if(n in l)r=l[n];else{const u=jc(i);r=l[n]=c.call(null,e),u()}}else r=c;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===to(n))&&(r=!0))}return r}const lx=new WeakMap;function m1(t,e,n=!1){const r=n?lx:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let c=!1;if(!Ne(t)){const u=f=>{c=!0;const[d,h]=m1(f,e,!0);Ut(o,d),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!c)return tt(t)&&r.set(t,Bo),Bo;if(ke(s))for(let u=0;u<s.length;u++){const f=nr(s[u]);K0(f)&&(o[f]=nt)}else if(s)for(const u in s){const f=nr(u);if(K0(f)){const d=s[u],h=o[f]=ke(d)||Ne(d)?{type:d}:Ut({},d),g=h.type;let p=!1,y=!0;if(ke(g))for(let m=0;m<g.length;++m){const b=g[m],w=Ne(b)&&b.name;if(w==="Boolean"){p=!0;break}else w==="String"&&(y=!1)}else p=Ne(g)&&g.name==="Boolean";h[0]=p,h[1]=y,(p||Ze(h,"default"))&&a.push(f)}}const l=[o,a];return tt(t)&&r.set(t,l),l}function K0(t){return t[0]!=="$"&&!Ka(t)}const ug=t=>t==="_"||t==="_ctx"||t==="$stable",fg=t=>ke(t)?t.map(Ir):[Ir(t)],ux=(t,e,n)=>{if(e._n)return e;const r=ks((...i)=>fg(e(...i)),n);return r._c=!1,r},y1=(t,e,n)=>{const r=t._ctx;for(const i in t){if(ug(i))continue;const s=t[i];if(Ne(s))e[i]=ux(i,s,r);else if(s!=null){const o=fg(s);e[i]=()=>o}}},v1=(t,e)=>{const n=fg(e);t.slots.default=()=>n},w1=(t,e,n)=>{for(const r in e)(n||!ug(r))&&(t[r]=e[r])},fx=(t,e,n)=>{const r=t.slots=h1();if(t.vnode.shapeFlag&32){const i=e._;i?(w1(r,e,n),n&&Ab(r,"_",i,!0)):y1(e,r)}else e&&v1(t,e)},dx=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=nt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:w1(i,e,n):(s=!e.$stable,y1(e,i)),o=e}else e&&(v1(t,e),o={default:1});if(s)for(const a in i)!ug(a)&&o[a]==null&&delete i[a]},Rn=kx;function hx(t){return px(t)}function px(t,e){const n=yf();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=$r,insertStaticContent:g}=t,p=(O,$,Q,ne=null,J=null,W=null,X=void 0,re=null,ie=!!$.dynamicChildren)=>{if(O===$)return;O&&!Os(O,$)&&(ne=T(O),A(O,J,W,!0),O=null),$.patchFlag===-2&&(ie=!1,$.dynamicChildren=null);const{type:ae,ref:he,shapeFlag:ue}=$;switch(ae){case Cf:y(O,$,Q,ne);break;case dn:m(O,$,Q,ne);break;case Gl:O==null&&b($,Q,ne,X);break;case ln:L(O,$,Q,ne,J,W,X,re,ie);break;default:ue&1?N(O,$,Q,ne,J,W,X,re,ie):ue&6?B(O,$,Q,ne,J,W,X,re,ie):(ue&64||ue&128)&&ae.process(O,$,Q,ne,J,W,X,re,ie,Z)}he!=null&&J?za(he,O&&O.ref,W,$||O,!$):he==null&&O&&O.ref!=null&&za(O.ref,null,W,O,!0)},y=(O,$,Q,ne)=>{if(O==null)r($.el=a($.children),Q,ne);else{const J=$.el=O.el;$.children!==O.children&&l(J,$.children)}},m=(O,$,Q,ne)=>{O==null?r($.el=c($.children||""),Q,ne):$.el=O.el},b=(O,$,Q,ne)=>{[O.el,O.anchor]=g(O.children,$,Q,ne,O.el,O.anchor)},w=({el:O,anchor:$},Q,ne)=>{let J;for(;O&&O!==$;)J=d(O),r(O,Q,ne),O=J;r($,Q,ne)},x=({el:O,anchor:$})=>{let Q;for(;O&&O!==$;)Q=d(O),i(O),O=Q;i($)},N=(O,$,Q,ne,J,W,X,re,ie)=>{$.type==="svg"?X="svg":$.type==="math"&&(X="mathml"),O==null?H($,Q,ne,J,W,X,re,ie):F(O,$,J,W,X,re,ie)},H=(O,$,Q,ne,J,W,X,re)=>{let ie,ae;const{props:he,shapeFlag:ue,transition:ge,dirs:se}=O;if(ie=O.el=o(O.type,W,he&&he.is,he),ue&8?u(ie,O.children):ue&16&&G(O.children,ie,null,ne,J,ud(O,W),X,re),se&&vs(O,null,ne,"created"),z(ie,O,O.scopeId,X,ne),he){for(const ve in he)ve!=="value"&&!Ka(ve)&&s(ie,ve,null,he[ve],W,ne);"value"in he&&s(ie,"value",null,he.value,W),(ae=he.onVnodeBeforeMount)&&Sr(ae,ne,O)}se&&vs(O,null,ne,"beforeMount");const Y=gx(J,ge);Y&&ge.beforeEnter(ie),r(ie,$,Q),((ae=he&&he.onVnodeMounted)||Y||se)&&Rn(()=>{ae&&Sr(ae,ne,O),Y&&ge.enter(ie),se&&vs(O,null,ne,"mounted")},J)},z=(O,$,Q,ne,J)=>{if(Q&&h(O,Q),ne)for(let W=0;W<ne.length;W++)h(O,ne[W]);if(J){let W=J.subTree;if($===W||C1(W.type)&&(W.ssContent===$||W.ssFallback===$)){const X=J.vnode;z(O,X,X.scopeId,X.slotScopeIds,J.parent)}}},G=(O,$,Q,ne,J,W,X,re,ie=0)=>{for(let ae=ie;ae<O.length;ae++){const he=O[ae]=re?zi(O[ae]):Ir(O[ae]);p(null,he,$,Q,ne,J,W,X,re)}},F=(O,$,Q,ne,J,W,X)=>{const re=$.el=O.el;let{patchFlag:ie,dynamicChildren:ae,dirs:he}=$;ie|=O.patchFlag&16;const ue=O.props||nt,ge=$.props||nt;let se;if(Q&&ws(Q,!1),(se=ge.onVnodeBeforeUpdate)&&Sr(se,Q,$,O),he&&vs($,O,Q,"beforeUpdate"),Q&&ws(Q,!0),(ue.innerHTML&&ge.innerHTML==null||ue.textContent&&ge.textContent==null)&&u(re,""),ae?U(O.dynamicChildren,ae,re,Q,ne,ud($,J),W):X||v(O,$,re,null,Q,ne,ud($,J),W,!1),ie>0){if(ie&16)V(re,ue,ge,Q,J);else if(ie&2&&ue.class!==ge.class&&s(re,"class",null,ge.class,J),ie&4&&s(re,"style",ue.style,ge.style,J),ie&8){const Y=$.dynamicProps;for(let ve=0;ve<Y.length;ve++){const Te=Y[ve],ct=ue[Te],dt=ge[Te];(dt!==ct||Te==="value")&&s(re,Te,ct,dt,J,Q)}}ie&1&&O.children!==$.children&&u(re,$.children)}else!X&&ae==null&&V(re,ue,ge,Q,J);((se=ge.onVnodeUpdated)||he)&&Rn(()=>{se&&Sr(se,Q,$,O),he&&vs($,O,Q,"updated")},ne)},U=(O,$,Q,ne,J,W,X)=>{for(let re=0;re<$.length;re++){const ie=O[re],ae=$[re],he=ie.el&&(ie.type===ln||!Os(ie,ae)||ie.shapeFlag&198)?f(ie.el):Q;p(ie,ae,he,null,ne,J,W,X,!0)}},V=(O,$,Q,ne,J)=>{if($!==Q){if($!==nt)for(const W in $)!Ka(W)&&!(W in Q)&&s(O,W,$[W],null,J,ne);for(const W in Q){if(Ka(W))continue;const X=Q[W],re=$[W];X!==re&&W!=="value"&&s(O,W,re,X,J,ne)}"value"in Q&&s(O,"value",$.value,Q.value,J)}},L=(O,$,Q,ne,J,W,X,re,ie)=>{const ae=$.el=O?O.el:a(""),he=$.anchor=O?O.anchor:a("");let{patchFlag:ue,dynamicChildren:ge,slotScopeIds:se}=$;se&&(re=re?re.concat(se):se),O==null?(r(ae,Q,ne),r(he,Q,ne),G($.children||[],Q,he,J,W,X,re,ie)):ue>0&&ue&64&&ge&&O.dynamicChildren?(U(O.dynamicChildren,ge,Q,J,W,X,re),($.key!=null||J&&$===J.subTree)&&b1(O,$,!0)):v(O,$,Q,he,J,W,X,re,ie)},B=(O,$,Q,ne,J,W,X,re,ie)=>{$.slotScopeIds=re,O==null?$.shapeFlag&512?J.ctx.activate($,Q,ne,X,ie):M($,Q,ne,J,W,X,ie):_(O,$,ie)},M=(O,$,Q,ne,J,W,X)=>{const re=O.component=Lx(O,ne,J);if(Ef(O)&&(re.ctx.renderer=Z),Bx(re,!1,X),re.asyncDep){if(J&&J.registerDep(re,R,X),!O.el){const ie=re.subTree=ft(dn);m(null,ie,$,Q),O.placeholder=ie.el}}else R(re,O,$,Q,J,W,X)},_=(O,$,Q)=>{const ne=$.component=O.component;if(Cx(O,$,Q))if(ne.asyncDep&&!ne.asyncResolved){j(ne,$,Q);return}else ne.next=$,ne.update();else $.el=O.el,ne.vnode=$},R=(O,$,Q,ne,J,W,X)=>{const re=()=>{if(O.isMounted){let{next:ue,bu:ge,u:se,parent:Y,vnode:ve}=O;{const tn=E1(O);if(tn){ue&&(ue.el=ve.el,j(O,ue,X)),tn.asyncDep.then(()=>{O.isUnmounted||re()});return}}let Te=ue,ct;ws(O,!1),ue?(ue.el=ve.el,j(O,ue,X)):ue=ve,ge&&Vl(ge),(ct=ue.props&&ue.props.onVnodeBeforeUpdate)&&Sr(ct,Y,ue,ve),ws(O,!0);const dt=V0(O),lt=O.subTree;O.subTree=dt,p(lt,dt,f(lt.el),T(lt),O,J,W),ue.el=dt.el,Te===null&&xx(O,dt.el),se&&Rn(se,J),(ct=ue.props&&ue.props.onVnodeUpdated)&&Rn(()=>Sr(ct,Y,ue,ve),J)}else{let ue;const{el:ge,props:se}=$,{bm:Y,m:ve,parent:Te,root:ct,type:dt}=O,lt=Ga($);ws(O,!1),Y&&Vl(Y),!lt&&(ue=se&&se.onVnodeBeforeMount)&&Sr(ue,Te,$),ws(O,!0);{ct.ce&&ct.ce._def.shadowRoot!==!1&&ct.ce._injectChildStyle(dt);const tn=O.subTree=V0(O);p(null,tn,Q,ne,O,J,W),$.el=tn.el}if(ve&&Rn(ve,J),!lt&&(ue=se&&se.onVnodeMounted)){const tn=$;Rn(()=>Sr(ue,Te,tn),J)}($.shapeFlag&256||Te&&Ga(Te.vnode)&&Te.vnode.shapeFlag&256)&&O.a&&Rn(O.a,J),O.isMounted=!0,$=Q=ne=null}};O.scope.on();const ie=O.effect=new Pb(re);O.scope.off();const ae=O.update=ie.run.bind(ie),he=O.job=ie.runIfDirty.bind(ie);he.i=O,he.id=O.uid,ie.scheduler=()=>lg(he),ws(O,!0),ae()},j=(O,$,Q)=>{$.component=O;const ne=O.vnode.props;O.vnode=$,O.next=null,cx(O,$.props,ne,Q),dx(O,$.children,Q),wi(),M0(O),bi()},v=(O,$,Q,ne,J,W,X,re,ie=!1)=>{const ae=O&&O.children,he=O?O.shapeFlag:0,ue=$.children,{patchFlag:ge,shapeFlag:se}=$;if(ge>0){if(ge&128){C(ae,ue,Q,ne,J,W,X,re,ie);return}else if(ge&256){S(ae,ue,Q,ne,J,W,X,re,ie);return}}se&8?(he&16&&D(ae,J,W),ue!==ae&&u(Q,ue)):he&16?se&16?C(ae,ue,Q,ne,J,W,X,re,ie):D(ae,J,W,!0):(he&8&&u(Q,""),se&16&&G(ue,Q,ne,J,W,X,re,ie))},S=(O,$,Q,ne,J,W,X,re,ie)=>{O=O||Bo,$=$||Bo;const ae=O.length,he=$.length,ue=Math.min(ae,he);let ge;for(ge=0;ge<ue;ge++){const se=$[ge]=ie?zi($[ge]):Ir($[ge]);p(O[ge],se,Q,null,J,W,X,re,ie)}ae>he?D(O,J,W,!0,!1,ue):G($,Q,ne,J,W,X,re,ie,ue)},C=(O,$,Q,ne,J,W,X,re,ie)=>{let ae=0;const he=$.length;let ue=O.length-1,ge=he-1;for(;ae<=ue&&ae<=ge;){const se=O[ae],Y=$[ae]=ie?zi($[ae]):Ir($[ae]);if(Os(se,Y))p(se,Y,Q,null,J,W,X,re,ie);else break;ae++}for(;ae<=ue&&ae<=ge;){const se=O[ue],Y=$[ge]=ie?zi($[ge]):Ir($[ge]);if(Os(se,Y))p(se,Y,Q,null,J,W,X,re,ie);else break;ue--,ge--}if(ae>ue){if(ae<=ge){const se=ge+1,Y=se<he?$[se].el:ne;for(;ae<=ge;)p(null,$[ae]=ie?zi($[ae]):Ir($[ae]),Q,Y,J,W,X,re,ie),ae++}}else if(ae>ge)for(;ae<=ue;)A(O[ae],J,W,!0),ae++;else{const se=ae,Y=ae,ve=new Map;for(ae=Y;ae<=ge;ae++){const Rt=$[ae]=ie?zi($[ae]):Ir($[ae]);Rt.key!=null&&ve.set(Rt.key,ae)}let Te,ct=0;const dt=ge-Y+1;let lt=!1,tn=0;const _r=new Array(dt);for(ae=0;ae<dt;ae++)_r[ae]=0;for(ae=se;ae<=ue;ae++){const Rt=O[ae];if(ct>=dt){A(Rt,J,W,!0);continue}let Tt;if(Rt.key!=null)Tt=ve.get(Rt.key);else for(Te=Y;Te<=ge;Te++)if(_r[Te-Y]===0&&Os(Rt,$[Te])){Tt=Te;break}Tt===void 0?A(Rt,J,W,!0):(_r[Tt-Y]=ae+1,Tt>=tn?tn=Tt:lt=!0,p(Rt,$[Tt],Q,null,J,W,X,re,ie),ct++)}const wa=lt?mx(_r):Bo;for(Te=wa.length-1,ae=dt-1;ae>=0;ae--){const Rt=Y+ae,Tt=$[Rt],co=$[Rt+1],ht=Rt+1<he?co.el||co.placeholder:ne;_r[ae]===0?p(null,Tt,Q,ht,J,W,X,re,ie):lt&&(Te<0||ae!==wa[Te]?P(Tt,Q,ht,2):Te--)}}},P=(O,$,Q,ne,J=null)=>{const{el:W,type:X,transition:re,children:ie,shapeFlag:ae}=O;if(ae&6){P(O.component.subTree,$,Q,ne);return}if(ae&128){O.suspense.move($,Q,ne);return}if(ae&64){X.move(O,$,Q,Z);return}if(X===ln){r(W,$,Q);for(let ue=0;ue<ie.length;ue++)P(ie[ue],$,Q,ne);r(O.anchor,$,Q);return}if(X===Gl){w(O,$,Q);return}if(ne!==2&&ae&1&&re)if(ne===0)re.beforeEnter(W),r(W,$,Q),Rn(()=>re.enter(W),J);else{const{leave:ue,delayLeave:ge,afterLeave:se}=re,Y=()=>{O.ctx.isUnmounted?i(W):r(W,$,Q)},ve=()=>{W._isLeaving&&W[ei](!0),ue(W,()=>{Y(),se&&se()})};ge?ge(W,Y,ve):ve()}else r(W,$,Q)},A=(O,$,Q,ne=!1,J=!1)=>{const{type:W,props:X,ref:re,children:ie,dynamicChildren:ae,shapeFlag:he,patchFlag:ue,dirs:ge,cacheIndex:se}=O;if(ue===-2&&(J=!1),re!=null&&(wi(),za(re,null,Q,O,!0),bi()),se!=null&&($.renderCache[se]=void 0),he&256){$.ctx.deactivate(O);return}const Y=he&1&&ge,ve=!Ga(O);let Te;if(ve&&(Te=X&&X.onVnodeBeforeUnmount)&&Sr(Te,$,O),he&6)I(O.component,Q,ne);else{if(he&128){O.suspense.unmount(Q,ne);return}Y&&vs(O,null,$,"beforeUnmount"),he&64?O.type.remove(O,$,Q,Z,ne):ae&&!ae.hasOnce&&(W!==ln||ue>0&&ue&64)?D(ae,$,Q,!1,!0):(W===ln&&ue&384||!J&&he&16)&&D(ie,$,Q),ne&&E(O)}(ve&&(Te=X&&X.onVnodeUnmounted)||Y)&&Rn(()=>{Te&&Sr(Te,$,O),Y&&vs(O,null,$,"unmounted")},Q)},E=O=>{const{type:$,el:Q,anchor:ne,transition:J}=O;if($===ln){k(Q,ne);return}if($===Gl){x(O);return}const W=()=>{i(Q),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(O.shapeFlag&1&&J&&!J.persisted){const{leave:X,delayLeave:re}=J,ie=()=>X(Q,W);re?re(O.el,W,ie):ie()}else W()},k=(O,$)=>{let Q;for(;O!==$;)Q=d(O),i(O),O=Q;i($)},I=(O,$,Q)=>{const{bum:ne,scope:J,job:W,subTree:X,um:re,m:ie,a:ae}=O;j0(ie),j0(ae),ne&&Vl(ne),J.stop(),W&&(W.flags|=8,A(X,O,$,Q)),re&&Rn(re,$),Rn(()=>{O.isUnmounted=!0},$)},D=(O,$,Q,ne=!1,J=!1,W=0)=>{for(let X=W;X<O.length;X++)A(O[X],$,Q,ne,J)},T=O=>{if(O.shapeFlag&6)return T(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const $=d(O.anchor||O.el),Q=$&&$[BC];return Q?d(Q):$};let K=!1;const q=(O,$,Q)=>{O==null?$._vnode&&A($._vnode,null,null,!0):p($._vnode||null,O,$,null,null,null,Q),$._vnode=O,K||(K=!0,M0(),Qb(),K=!1)},Z={p,um:A,m:P,r:E,mt:M,mc:G,pc:v,pbc:U,n:T,o:t};return{render:q,hydrate:void 0,createApp:ox(q)}}function ud({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ws({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function gx(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function b1(t,e,n=!1){const r=t.children,i=e.children;if(ke(r)&&ke(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=zi(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&b1(o,a)),a.type===Cf&&a.patchFlag!==-1&&(a.el=o.el),a.type===dn&&!a.el&&(a.el=o.el)}}function mx(t){const e=t.slice(),n=[0];let r,i,s,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<l?s=a+1:o=a;l<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function E1(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:E1(e)}function j0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const yx=Symbol.for("v-scx"),vx=()=>yr(yx);function gr(t,e,n){return A1(t,e,n)}function A1(t,e,n=nt){const{immediate:r,deep:i,flush:s,once:o}=n,a=Ut({},n),c=e&&r||!e&&s!=="post";let l;if(dc){if(s==="sync"){const h=vx();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=$r,h.resume=$r,h.pause=$r,h}}const u=Zt;a.call=(h,g,p)=>wr(h,u,g,p);let f=!1;s==="post"?a.scheduler=h=>{Rn(h,u&&u.suspense)}:s!=="sync"&&(f=!0,a.scheduler=(h,g)=>{g?h():lg(h)}),a.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const d=OC(t,e,a);return dc&&(l?l.push(d):c&&d()),d}function wx(t,e,n){const r=this.proxy,i=xt(t)?t.includes(".")?_1(r,t):()=>r[t]:t.bind(r,r);let s;Ne(e)?s=e:(s=e.handler,n=e);const o=jc(this),a=A1(i,s.bind(r),n);return o(),a}function _1(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const bx=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${nr(e)}Modifiers`]||t[`${to(e)}Modifiers`];function Ex(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||nt;let i=n;const s=e.startsWith("update:"),o=s&&bx(r,e.slice(7));o&&(o.trim&&(i=n.map(u=>xt(u)?u.trim():u)),o.number&&(i=n.map(Ih)));let a,c=r[a=rd(e)]||r[a=rd(nr(e))];!c&&s&&(c=r[a=rd(to(e))]),c&&wr(c,t,6,i);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,wr(l,t,6,i)}}const Ax=new WeakMap;function S1(t,e,n=!1){const r=n?Ax:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ne(t)){const c=l=>{const u=S1(l,e,!0);u&&(a=!0,Ut(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!a?(tt(t)&&r.set(t,null),null):(ke(s)?s.forEach(c=>o[c]=null):Ut(o,s),tt(t)&&r.set(t,o),o)}function Sf(t,e){return!t||!hf(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ze(t,e[0].toLowerCase()+e.slice(1))||Ze(t,to(e))||Ze(t,e))}function V0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:f,data:d,setupState:h,ctx:g,inheritAttrs:p}=t,y=Au(t);let m,b;try{if(n.shapeFlag&4){const x=i||r,N=x;m=Ir(l.call(N,x,u,f,h,d,g)),b=a}else{const x=e;m=Ir(x.length>1?x(f,{attrs:a,slots:o,emit:c}):x(f,null)),b=e.props?a:_x(a)}}catch(x){Wa.length=0,bf(x,t,1),m=ft(dn)}let w=m;if(b&&p!==!1){const x=Object.keys(b),{shapeFlag:N}=w;x.length&&N&7&&(s&&x.some(Xp)&&(b=Sx(b,s)),w=fs(w,b,!1,!0))}return n.dirs&&(w=fs(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&uc(w,n.transition),m=w,Au(y),m}const _x=t=>{let e;for(const n in t)(n==="class"||n==="style"||hf(n))&&((e||(e={}))[n]=t[n]);return e},Sx=(t,e)=>{const n={};for(const r in t)(!Xp(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Cx(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?z0(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(o[d]!==r[d]&&!Sf(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?z0(r,o,l):!0:!!o;return!1}function z0(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Sf(n,s))return!0}return!1}function xx({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const C1=t=>t.__isSuspense;function kx(t,e){e&&e.pendingBranch?ke(t)?e.effects.push(...t):e.effects.push(t):LC(t)}const ln=Symbol.for("v-fgt"),Cf=Symbol.for("v-txt"),dn=Symbol.for("v-cmt"),Gl=Symbol.for("v-stc"),Wa=[];let $n=null;function Se(t=!1){Wa.push($n=t?null:[])}function Px(){Wa.pop(),$n=Wa[Wa.length-1]||null}let fc=1;function Cu(t,e=!1){fc+=t,t<0&&$n&&e&&($n.hasOnce=!0)}function x1(t){return t.dynamicChildren=fc>0?$n||Bo:null,Px(),fc>0&&$n&&$n.push(t),t}function Ce(t,e,n,r,i,s){return x1(ee(t,e,n,r,i,s,!0))}function Hh(t,e,n,r,i){return x1(ft(t,e,n,r,i,!0))}function xu(t){return t?t.__v_isVNode===!0:!1}function Os(t,e){return t.type===e.type&&t.key===e.key}const k1=({key:t})=>t??null,ql=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?xt(t)||en(t)||Ne(t)?{i:Fn,r:t,k:e,f:!!n}:t:null);function ee(t,e=null,n=null,r=0,i=null,s=t===ln?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&k1(e),ref:e&&ql(e),scopeId:Yb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Fn};return a?(dg(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=xt(n)?8:16),fc>0&&!o&&$n&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&$n.push(c),c}const ft=Tx;function Tx(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===YC)&&(t=dn),xu(t)){const a=fs(t,e,!0);return n&&dg(a,n),fc>0&&!s&&$n&&(a.shapeFlag&6?$n[$n.indexOf(t)]=a:$n.push(a)),a.patchFlag=-2,a}if(Hx(t)&&(t=t.__vccOpts),e){e=Ix(e);let{class:a,style:c}=e;a&&!xt(a)&&(e.class=Hc(a)),tt(c)&&(cg(c)&&!ke(c)&&(c=Ut({},c)),e.style=ss(c))}const o=xt(t)?1:C1(t)?128:Zb(t)?64:tt(t)?4:Ne(t)?2:0;return ee(t,e,n,r,i,o,s,!0)}function Ix(t){return t?cg(t)||p1(t)?Ut({},t):t:null}function fs(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:c}=t,l=e?Ox(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&k1(l),ref:e&&e.ref?n&&s?ke(s)?s.concat(ql(e)):[s,ql(e)]:ql(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ln?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fs(t.ssContent),ssFallback:t.ssFallback&&fs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&uc(u,c.clone(u)),u}function rt(t=" ",e=0){return ft(Cf,null,t,e)}function Rx(t,e){const n=ft(Gl,null,t);return n.staticCount=e,n}function Xe(t="",e=!1){return e?(Se(),Hh(dn,null,t)):ft(dn,null,t)}function Ir(t){return t==null||typeof t=="boolean"?ft(dn):ke(t)?ft(ln,null,t.slice()):xu(t)?zi(t):ft(Cf,null,String(t))}function zi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fs(t)}function dg(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ke(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),dg(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!p1(e)?e._ctx=Fn:i===3&&Fn&&(Fn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ne(e)?(e={default:e,_ctx:Fn},n=32):(e=String(e),r&64?(n=16,e=[rt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ox(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Hc([e.class,r.class]));else if(i==="style")e.style=ss([e.style,r.style]);else if(hf(i)){const s=e[i],o=r[i];o&&s!==o&&!(ke(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Sr(t,e,n,r=null){wr(t,e,7,[n,r])}const Nx=f1();let Mx=0;function Lx(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Nx,s={uid:Mx++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new kb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:m1(r,i),emitsOptions:S1(r,i),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:r.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Ex.bind(null,s),t.ce&&t.ce(s),s}let Zt=null;const P1=()=>Zt||Fn;let ku,Kh;{const t=yf(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};ku=e("__VUE_INSTANCE_SETTERS__",n=>Zt=n),Kh=e("__VUE_SSR_SETTERS__",n=>dc=n)}const jc=t=>{const e=Zt;return ku(t),t.scope.on(),()=>{t.scope.off(),ku(e)}},G0=()=>{Zt&&Zt.scope.off(),ku(null)};function T1(t){return t.vnode.shapeFlag&4}let dc=!1;function Bx(t,e=!1,n=!1){e&&Kh(e);const{props:r,children:i}=t.vnode,s=T1(t);ax(t,r,s,e),fx(t,i,n||e);const o=s?Dx(t,e):void 0;return e&&Kh(!1),o}function Dx(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,XC);const{setup:r}=n;if(r){wi();const i=t.setupContext=r.length>1?Fx(t):null,s=jc(t),o=Kc(r,t,0,[t.props,i]),a=wb(o);if(bi(),s(),(a||t.sp)&&!Ga(t)&&s1(t),a){if(o.then(G0,G0),e)return o.then(c=>{q0(t,c)}).catch(c=>{bf(c,t,0)});t.asyncDep=o}else q0(t,o)}else I1(t)}function q0(t,e,n){Ne(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:tt(e)&&(t.setupState=zb(e)),I1(t)}function I1(t,e,n){const r=t.type;t.render||(t.render=r.render||$r);{const i=jc(t);wi();try{ex(t)}finally{bi(),i()}}}const Ux={get(t,e){return Jt(t,"get",""),t[e]}};function Fx(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Ux),slots:t.slots,emit:t.emit,expose:e}}function xf(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(zb(jb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in qa)return qa[n](t)},has(e,n){return n in e||n in qa}})):t.proxy}function $x(t,e=!0){return Ne(t)?t.displayName||t.name:t.name||e&&t.__name}function Hx(t){return Ne(t)&&"__vccOpts"in t}const Ue=(t,e)=>IC(t,e,dc);function hg(t,e,n){try{Cu(-1);const r=arguments.length;return r===2?tt(e)&&!ke(e)?xu(e)?ft(t,null,[e]):ft(t,e):ft(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&xu(n)&&(n=[n]),ft(t,e,n))}finally{Cu(1)}}const Kx="3.5.22";let jh;const W0=typeof window<"u"&&window.trustedTypes;if(W0)try{jh=W0.createPolicy("vue",{createHTML:t=>t})}catch{}const R1=jh?t=>jh.createHTML(t):t=>t,jx="http://www.w3.org/2000/svg",Vx="http://www.w3.org/1998/Math/MathML",Zr=typeof document<"u"?document:null,Q0=Zr&&Zr.createElement("template"),zx={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Zr.createElementNS(jx,t):e==="mathml"?Zr.createElementNS(Vx,t):n?Zr.createElement(t,{is:n}):Zr.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Zr.createTextNode(t),createComment:t=>Zr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Q0.innerHTML=R1(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Q0.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Pi="transition",Ea="animation",hc=Symbol("_vtc"),O1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Gx=Ut({},Xb,O1),qx=t=>(t.displayName="Transition",t.props=Gx,t),Wx=qx((t,{slots:e})=>hg(FC,Qx(t),e)),bs=(t,e=[])=>{ke(t)?t.forEach(n=>n(...e)):t&&t(...e)},J0=t=>t?ke(t)?t.some(e=>e.length>1):t.length>1:!1;function Qx(t){const e={};for(const L in t)L in O1||(e[L]=t[L]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,g=Jx(i),p=g&&g[0],y=g&&g[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:w,onLeave:x,onLeaveCancelled:N,onBeforeAppear:H=m,onAppear:z=b,onAppearCancelled:G=w}=e,F=(L,B,M,_)=>{L._enterCancelled=_,Es(L,B?u:a),Es(L,B?l:o),M&&M()},U=(L,B)=>{L._isLeaving=!1,Es(L,f),Es(L,h),Es(L,d),B&&B()},V=L=>(B,M)=>{const _=L?z:b,R=()=>F(B,L,M);bs(_,[B,R]),Y0(()=>{Es(B,L?c:s),Wr(B,L?u:a),J0(_)||Z0(B,r,p,R)})};return Ut(e,{onBeforeEnter(L){bs(m,[L]),Wr(L,s),Wr(L,o)},onBeforeAppear(L){bs(H,[L]),Wr(L,c),Wr(L,l)},onEnter:V(!1),onAppear:V(!0),onLeave(L,B){L._isLeaving=!0;const M=()=>U(L,B);Wr(L,f),L._enterCancelled?(Wr(L,d),tm(L)):(tm(L),Wr(L,d)),Y0(()=>{L._isLeaving&&(Es(L,f),Wr(L,h),J0(x)||Z0(L,r,y,M))}),bs(x,[L,M])},onEnterCancelled(L){F(L,!1,void 0,!0),bs(w,[L])},onAppearCancelled(L){F(L,!0,void 0,!0),bs(G,[L])},onLeaveCancelled(L){U(L),bs(N,[L])}})}function Jx(t){if(t==null)return null;if(tt(t))return[fd(t.enter),fd(t.leave)];{const e=fd(t);return[e,e]}}function fd(t){return ZS(t)}function Wr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[hc]||(t[hc]=new Set)).add(e)}function Es(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[hc];n&&(n.delete(e),n.size||(t[hc]=void 0))}function Y0(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Yx=0;function Z0(t,e,n,r){const i=t._endId=++Yx,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=Zx(t,e);if(!o)return r();const l=o+"end";let u=0;const f=()=>{t.removeEventListener(l,d),s()},d=h=>{h.target===t&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},a+1),t.addEventListener(l,d)}function Zx(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),i=r(`${Pi}Delay`),s=r(`${Pi}Duration`),o=X0(i,s),a=r(`${Ea}Delay`),c=r(`${Ea}Duration`),l=X0(a,c);let u=null,f=0,d=0;e===Pi?o>0&&(u=Pi,f=o,d=s.length):e===Ea?l>0&&(u=Ea,f=l,d=c.length):(f=Math.max(o,l),u=f>0?o>l?Pi:Ea:null,d=u?u===Pi?s.length:c.length:0);const h=u===Pi&&/\b(?:transform|all)(?:,|$)/.test(r(`${Pi}Property`).toString());return{type:u,timeout:f,propCount:d,hasTransform:h}}function X0(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>em(n)+em(t[r])))}function em(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function tm(t){return(t?t.ownerDocument:document).body.offsetHeight}function Xx(t,e,n){const r=t[hc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const nm=Symbol("_vod"),ek=Symbol("_vsh"),tk=Symbol(""),nk=/(?:^|;)\s*display\s*:/;function rk(t,e,n){const r=t.style,i=xt(n);let s=!1;if(n&&!i){if(e)if(xt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Wl(r,a,"")}else for(const o in e)n[o]==null&&Wl(r,o,"");for(const o in n)o==="display"&&(s=!0),Wl(r,o,n[o])}else if(i){if(e!==n){const o=r[tk];o&&(n+=";"+o),r.cssText=n,s=nk.test(n)}}else e&&t.removeAttribute("style");nm in t&&(t[nm]=s?r.display:"",t[ek]&&(r.display="none"))}const rm=/\s*!important$/;function Wl(t,e,n){if(ke(n))n.forEach(r=>Wl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ik(t,e);rm.test(n)?t.setProperty(to(r),n.replace(rm,""),"important"):t[r]=n}}const im=["Webkit","Moz","ms"],dd={};function ik(t,e){const n=dd[e];if(n)return n;let r=nr(e);if(r!=="filter"&&r in t)return dd[e]=r;r=mf(r);for(let i=0;i<im.length;i++){const s=im[i]+r;if(s in t)return dd[e]=s}return e}const sm="http://www.w3.org/1999/xlink";function om(t,e,n,r,i,s=iC(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(sm,e.slice(6,e.length)):t.setAttributeNS(sm,e,n):n==null||s&&!_b(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Vr(n)?String(n):n)}function am(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?R1(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=_b(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Ns(t,e,n,r){t.addEventListener(e,n,r)}function sk(t,e,n,r){t.removeEventListener(e,n,r)}const cm=Symbol("_vei");function ok(t,e,n,r,i=null){const s=t[cm]||(t[cm]={}),o=s[e];if(r&&o)o.value=r;else{const[a,c]=ak(e);if(r){const l=s[e]=uk(r,i);Ns(t,a,l,c)}else o&&(sk(t,a,o,c),s[e]=void 0)}}const lm=/(?:Once|Passive|Capture)$/;function ak(t){let e;if(lm.test(t)){e={};let r;for(;r=t.match(lm);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):to(t.slice(2)),e]}let hd=0;const ck=Promise.resolve(),lk=()=>hd||(ck.then(()=>hd=0),hd=Date.now());function uk(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;wr(fk(r,n.value),e,5,[r])};return n.value=t,n.attached=lk(),n}function fk(t,e){if(ke(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const um=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,dk=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?Xx(t,r,o):e==="style"?rk(t,n,r):hf(e)?Xp(e)||ok(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hk(t,e,r,o))?(am(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&om(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!xt(r))?am(t,nr(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),om(t,e,r,o))};function hk(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&um(e)&&Ne(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return um(e)&&xt(n)?!1:e in t}const Pu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ke(e)?n=>Vl(e,n):e};function pk(t){t.target.composing=!0}function fm(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ho=Symbol("_assign"),Pn={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Ho]=Pu(i);const s=r||i.props&&i.props.type==="number";Ns(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Ih(a)),t[Ho](a)}),n&&Ns(t,"change",()=>{t.value=t.value.trim()}),e||(Ns(t,"compositionstart",pk),Ns(t,"compositionend",fm),Ns(t,"change",fm))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Ho]=Pu(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Ih(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===c)||(t.value=c))}},dm={deep:!0,created(t,e,n){t[Ho]=Pu(n),Ns(t,"change",()=>{const r=t._modelValue,i=gk(t),s=t.checked,o=t[Ho];if(ke(r)){const a=Sb(r,i),c=a!==-1;if(s&&!c)o(r.concat(i));else if(!s&&c){const l=[...r];l.splice(a,1),o(l)}}else if(pf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(N1(t,s))})},mounted:hm,beforeUpdate(t,e,n){t[Ho]=Pu(n),hm(t,e,n)}};function hm(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(ke(e))i=Sb(e,r.props.value)>-1;else if(pf(e))i=e.has(r.props.value);else{if(e===n)return;i=vf(e,N1(t,!0))}t.checked!==i&&(t.checked=i)}function gk(t){return"_value"in t?t._value:t.value}function N1(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const mk=["ctrl","shift","alt","meta"],yk={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>mk.some(n=>t[`${n}Key`]&&!e.includes(n))},Ps=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...s)=>{for(let o=0;o<e.length;o++){const a=yk[e[o]];if(a&&a(i,e))return}return t(i,...s)}))},vk=Ut({patchProp:dk},zx);let pm;function wk(){return pm||(pm=hx(vk))}const bk=((...t)=>{const e=wk().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=Ak(r);if(!i)return;const s=e._component;!Ne(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Ek(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function Ek(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ak(t){return xt(t)?document.querySelector(t):t}const _k=Symbol();var gm;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(gm||(gm={}));function Sk(){const t=oC(!0),e=t.run(()=>Ie({}));let n=[],r=[];const i=jb({install(s){i._a=s,s.provide(_k,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const bo=typeof document<"u";function M1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ck(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&M1(t.default)}const Ye=Object.assign;function pd(t,e){const n={};for(const r in e){const i=e[r];n[r]=br(i)?i.map(t):t(i)}return n}const Qa=()=>{},br=Array.isArray,L1=/#/g,xk=/&/g,kk=/\//g,Pk=/=/g,Tk=/\?/g,B1=/\+/g,Ik=/%5B/g,Rk=/%5D/g,D1=/%5E/g,Ok=/%60/g,U1=/%7B/g,Nk=/%7C/g,F1=/%7D/g,Mk=/%20/g;function pg(t){return encodeURI(""+t).replace(Nk,"|").replace(Ik,"[").replace(Rk,"]")}function Lk(t){return pg(t).replace(U1,"{").replace(F1,"}").replace(D1,"^")}function Vh(t){return pg(t).replace(B1,"%2B").replace(Mk,"+").replace(L1,"%23").replace(xk,"%26").replace(Ok,"`").replace(U1,"{").replace(F1,"}").replace(D1,"^")}function Bk(t){return Vh(t).replace(Pk,"%3D")}function Dk(t){return pg(t).replace(L1,"%23").replace(Tk,"%3F")}function Uk(t){return t==null?"":Dk(t).replace(kk,"%2F")}function pc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Fk=/\/$/,$k=t=>t.replace(Fk,"");function gd(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),s=e.slice(c+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Vk(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:pc(o)}}function Hk(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function mm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Kk(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&ea(e.matched[r],n.matched[i])&&$1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ea(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function $1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!jk(t[n],e[n]))return!1;return!0}function jk(t,e){return br(t)?ym(t,e):br(e)?ym(e,t):t===e}function ym(t,e){return br(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Vk(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Ti={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gc;(function(t){t.pop="pop",t.push="push"})(gc||(gc={}));var Ja;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ja||(Ja={}));function zk(t){if(!t)if(bo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),$k(t)}const Gk=/^[^#]+#/;function qk(t,e){return t.replace(Gk,"#")+e}function Wk(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const kf=()=>({left:window.scrollX,top:window.scrollY});function Qk(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=Wk(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function vm(t,e){return(history.state?history.state.position-e:-1)+t}const zh=new Map;function Jk(t,e){zh.set(t,e)}function Yk(t){const e=zh.get(t);return zh.delete(t),e}let Zk=()=>location.protocol+"//"+location.host;function H1(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),mm(c,"")}return mm(n,t)+r+i}function Xk(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const h=H1(t,location),g=n.value,p=e.value;let y=0;if(d){if(n.value=h,e.value=d,o&&o===g){o=null;return}y=p?d.position-p.position:0}else r(h);i.forEach(m=>{m(n.value,g,{delta:y,type:gc.pop,direction:y?y>0?Ja.forward:Ja.back:Ja.unknown})})};function c(){o=n.value}function l(d){i.push(d);const h=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return s.push(h),h}function u(){const{history:d}=window;d.state&&d.replaceState(Ye({},d.state,{scroll:kf()}),"")}function f(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function wm(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?kf():null}}function e3(t){const{history:e,location:n}=window,r={value:H1(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,l,u){const f=t.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:Zk()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),i.value=l}catch(h){console.error(h),n[u?"replace":"assign"](d)}}function o(c,l){const u=Ye({},e.state,wm(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});s(c,u,!0),r.value=c}function a(c,l){const u=Ye({},i.value,e.state,{forward:c,scroll:kf()});s(u.current,u,!0);const f=Ye({},wm(r.value,c,null),{position:u.position+1},l);s(c,f,!1),r.value=c}return{location:r,state:i,push:a,replace:o}}function t3(t){t=zk(t);const e=e3(t),n=Xk(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Ye({location:"",base:t,go:r,createHref:qk.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function n3(t){return typeof t=="string"||t&&typeof t=="object"}function K1(t){return typeof t=="string"||typeof t=="symbol"}const j1=Symbol("");var bm;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(bm||(bm={}));function ta(t,e){return Ye(new Error,{type:t,[j1]:!0},e)}function Qr(t,e){return t instanceof Error&&j1 in t&&(e==null||!!(t.type&e))}const Em="[^/]+?",r3={sensitive:!1,strict:!1,start:!0,end:!0},i3=/[.+*?^${}()[\]/\\]/g;function s3(t,e){const n=Ye({},r3,e),r=[];let i=n.start?"^":"";const s=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const d=l[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(i3,"\\$&"),h+=40;else if(d.type===1){const{value:g,repeatable:p,optional:y,regexp:m}=d;s.push({name:g,repeatable:p,optional:y});const b=m||Em;if(b!==Em){h+=10;try{new RegExp(`(${b})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${g}" (${b}): `+x.message)}}let w=p?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(w=y&&l.length<2?`(?:/${w})`:"/"+w),y&&(w+="?"),i+=w,h+=20,y&&(h+=-8),p&&(h+=-20),b===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(o),f={};if(!u)return null;for(let d=1;d<u.length;d++){const h=u[d]||"",g=s[d-1];f[g.name]=h&&g.repeatable?h.split("/"):h}return f}function c(l){let u="",f=!1;for(const d of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of d)if(h.type===0)u+=h.value;else if(h.type===1){const{value:g,repeatable:p,optional:y}=h,m=g in l?l[g]:"";if(br(m)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const b=br(m)?m.join("/"):m;if(!b)if(y)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=b}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:c}}function o3(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function V1(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=o3(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(Am(r))return 1;if(Am(i))return-1}return i.length-r.length}function Am(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const a3={type:0,value:""},c3=/[a-zA-Z0-9_]/;function l3(t){if(!t)return[[]];if(t==="/")return[[a3]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,c,l="",u="";function f(){l&&(n===0?s.push({type:0,value:l}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&f(),o()):c===":"?(f(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:c3.test(c)?d():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),i}function u3(t,e,n){const r=s3(l3(t.path),n),i=Ye(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function f3(t,e){const n=[],r=new Map;e=xm({strict:!1,end:!0,sensitive:!1},e);function i(f){return r.get(f)}function s(f,d,h){const g=!h,p=Sm(f);p.aliasOf=h&&h.record;const y=xm(e,f),m=[p];if("alias"in f){const x=typeof f.alias=="string"?[f.alias]:f.alias;for(const N of x)m.push(Sm(Ye({},p,{components:h?h.record.components:p.components,path:N,aliasOf:h?h.record:p})))}let b,w;for(const x of m){const{path:N}=x;if(d&&N[0]!=="/"){const H=d.record.path,z=H[H.length-1]==="/"?"":"/";x.path=d.record.path+(N&&z+N)}if(b=u3(x,d,y),h?h.alias.push(b):(w=w||b,w!==b&&w.alias.push(b),g&&f.name&&!Cm(b)&&o(f.name)),z1(b)&&c(b),p.children){const H=p.children;for(let z=0;z<H.length;z++)s(H[z],b,h&&h.children[z])}h=h||b}return w?()=>{o(w)}:Qa}function o(f){if(K1(f)){const d=r.get(f);d&&(r.delete(f),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(f);d>-1&&(n.splice(d,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const d=p3(f,n);n.splice(d,0,f),f.record.name&&!Cm(f)&&r.set(f.record.name,f)}function l(f,d){let h,g={},p,y;if("name"in f&&f.name){if(h=r.get(f.name),!h)throw ta(1,{location:f});y=h.record.name,g=Ye(_m(d.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),f.params&&_m(f.params,h.keys.map(w=>w.name))),p=h.stringify(g)}else if(f.path!=null)p=f.path,h=n.find(w=>w.re.test(p)),h&&(g=h.parse(p),y=h.record.name);else{if(h=d.name?r.get(d.name):n.find(w=>w.re.test(d.path)),!h)throw ta(1,{location:f,currentLocation:d});y=h.record.name,g=Ye({},d.params,f.params),p=h.stringify(g)}const m=[];let b=h;for(;b;)m.unshift(b.record),b=b.parent;return{name:y,path:p,params:g,matched:m,meta:h3(m)}}t.forEach(f=>s(f));function u(){n.length=0,r.clear()}return{addRoute:s,resolve:l,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function _m(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Sm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:d3(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function d3(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Cm(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function h3(t){return t.reduce((e,n)=>Ye(e,n.meta),{})}function xm(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function p3(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;V1(t,e[s])<0?r=s:n=s+1}const i=g3(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function g3(t){let e=t;for(;e=e.parent;)if(z1(e)&&V1(t,e)===0)return e}function z1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function m3(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(B1," "),o=s.indexOf("="),a=pc(o<0?s:s.slice(0,o)),c=o<0?null:pc(s.slice(o+1));if(a in e){let l=e[a];br(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function km(t){let e="";for(let n in t){const r=t[n];if(n=Bk(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(br(r)?r.map(s=>s&&Vh(s)):[r&&Vh(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function y3(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=br(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const v3=Symbol(""),Pm=Symbol(""),Pf=Symbol(""),gg=Symbol(""),Gh=Symbol("");function Aa(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Gi(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=d=>{d===!1?c(ta(4,{from:n,to:e})):d instanceof Error?c(d):n3(d)?c(ta(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>t.call(r&&r.instances[i],e,n,l));let f=Promise.resolve(u);t.length<3&&(f=f.then(l)),f.catch(d=>c(d))})}function md(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(M1(c)){const u=(c.__vccOpts||c)[e];u&&s.push(Gi(u,n,r,o,a,i))}else{let l=c();s.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=Ck(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const h=(f.__vccOpts||f)[e];return h&&Gi(h,n,r,o,a,i)()}))}}return s}function Tm(t){const e=yr(Pf),n=yr(gg),r=Ue(()=>{const c=fn(t.to);return e.resolve(c)}),i=Ue(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex(ea.bind(null,u));if(d>-1)return d;const h=Im(c[l-2]);return l>1&&Im(u)===h&&f[f.length-1].path!==h?f.findIndex(ea.bind(null,c[l-2])):d}),s=Ue(()=>i.value>-1&&A3(n.params,r.value.params)),o=Ue(()=>i.value>-1&&i.value===n.matched.length-1&&$1(n.params,r.value.params));function a(c={}){if(E3(c)){const l=e[fn(t.replace)?"replace":"push"](fn(t.to)).catch(Qa);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:Ue(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function w3(t){return t.length===1?t[0]:t}const b3=i1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Tm,setup(t,{slots:e}){const n=Zo(Tm(t)),{options:r}=yr(Pf),i=Ue(()=>({[Rm(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Rm(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&w3(e.default(n));return t.custom?s:hg("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Eo=b3;function E3(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function A3(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!br(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Im(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Rm=(t,e,n)=>t??e??n,_3=i1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=yr(Gh),i=Ue(()=>t.route||r.value),s=yr(Pm,0),o=Ue(()=>{let l=fn(s);const{matched:u}=i.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=Ue(()=>i.value.matched[o.value]);zl(Pm,Ue(()=>o.value+1)),zl(v3,a),zl(Gh,i);const c=Ie();return gr(()=>[c.value,a.value,t.name],([l,u,f],[d,h,g])=>{u&&(u.instances[f]=l,h&&h!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),l&&u&&(!h||!ea(u,h)||!d)&&(u.enterCallbacks[f]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,f=a.value,d=f&&f.components[u];if(!d)return Om(n.default,{Component:d,route:l});const h=f.props[u],g=h?h===!0?l.params:typeof h=="function"?h(l):h:null,y=hg(d,Ye({},g,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return Om(n.default,{Component:y,route:l})||y}}});function Om(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const G1=_3;function S3(t){const e=f3(t.routes,t),n=t.parseQuery||m3,r=t.stringifyQuery||km,i=t.history,s=Aa(),o=Aa(),a=Aa(),c=xC(Ti);let l=Ti;bo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=pd.bind(null,T=>""+T),f=pd.bind(null,Uk),d=pd.bind(null,pc);function h(T,K){let q,Z;return K1(T)?(q=e.getRecordMatcher(T),Z=K):Z=T,e.addRoute(Z,q)}function g(T){const K=e.getRecordMatcher(T);K&&e.removeRoute(K)}function p(){return e.getRoutes().map(T=>T.record)}function y(T){return!!e.getRecordMatcher(T)}function m(T,K){if(K=Ye({},K||c.value),typeof T=="string"){const Q=gd(n,T,K.path),ne=e.resolve({path:Q.path},K),J=i.createHref(Q.fullPath);return Ye(Q,ne,{params:d(ne.params),hash:pc(Q.hash),redirectedFrom:void 0,href:J})}let q;if(T.path!=null)q=Ye({},T,{path:gd(n,T.path,K.path).path});else{const Q=Ye({},T.params);for(const ne in Q)Q[ne]==null&&delete Q[ne];q=Ye({},T,{params:f(Q)}),K.params=f(K.params)}const Z=e.resolve(q,K),oe=T.hash||"";Z.params=u(d(Z.params));const O=Hk(r,Ye({},T,{hash:Lk(oe),path:Z.path})),$=i.createHref(O);return Ye({fullPath:O,hash:oe,query:r===km?y3(T.query):T.query||{}},Z,{redirectedFrom:void 0,href:$})}function b(T){return typeof T=="string"?gd(n,T,c.value.path):Ye({},T)}function w(T,K){if(l!==T)return ta(8,{from:K,to:T})}function x(T){return z(T)}function N(T){return x(Ye(b(T),{replace:!0}))}function H(T){const K=T.matched[T.matched.length-1];if(K&&K.redirect){const{redirect:q}=K;let Z=typeof q=="function"?q(T):q;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=b(Z):{path:Z},Z.params={}),Ye({query:T.query,hash:T.hash,params:Z.path!=null?{}:T.params},Z)}}function z(T,K){const q=l=m(T),Z=c.value,oe=T.state,O=T.force,$=T.replace===!0,Q=H(q);if(Q)return z(Ye(b(Q),{state:typeof Q=="object"?Ye({},oe,Q.state):oe,force:O,replace:$}),K||q);const ne=q;ne.redirectedFrom=K;let J;return!O&&Kk(r,Z,q)&&(J=ta(16,{to:ne,from:Z}),P(Z,Z,!0,!1)),(J?Promise.resolve(J):U(ne,Z)).catch(W=>Qr(W)?Qr(W,2)?W:C(W):v(W,ne,Z)).then(W=>{if(W){if(Qr(W,2))return z(Ye({replace:$},b(W.to),{state:typeof W.to=="object"?Ye({},oe,W.to.state):oe,force:O}),K||ne)}else W=L(ne,Z,!0,$,oe);return V(ne,Z,W),W})}function G(T,K){const q=w(T,K);return q?Promise.reject(q):Promise.resolve()}function F(T){const K=k.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(T):T()}function U(T,K){let q;const[Z,oe,O]=C3(T,K);q=md(Z.reverse(),"beforeRouteLeave",T,K);for(const Q of Z)Q.leaveGuards.forEach(ne=>{q.push(Gi(ne,T,K))});const $=G.bind(null,T,K);return q.push($),D(q).then(()=>{q=[];for(const Q of s.list())q.push(Gi(Q,T,K));return q.push($),D(q)}).then(()=>{q=md(oe,"beforeRouteUpdate",T,K);for(const Q of oe)Q.updateGuards.forEach(ne=>{q.push(Gi(ne,T,K))});return q.push($),D(q)}).then(()=>{q=[];for(const Q of O)if(Q.beforeEnter)if(br(Q.beforeEnter))for(const ne of Q.beforeEnter)q.push(Gi(ne,T,K));else q.push(Gi(Q.beforeEnter,T,K));return q.push($),D(q)}).then(()=>(T.matched.forEach(Q=>Q.enterCallbacks={}),q=md(O,"beforeRouteEnter",T,K,F),q.push($),D(q))).then(()=>{q=[];for(const Q of o.list())q.push(Gi(Q,T,K));return q.push($),D(q)}).catch(Q=>Qr(Q,8)?Q:Promise.reject(Q))}function V(T,K,q){a.list().forEach(Z=>F(()=>Z(T,K,q)))}function L(T,K,q,Z,oe){const O=w(T,K);if(O)return O;const $=K===Ti,Q=bo?history.state:{};q&&(Z||$?i.replace(T.fullPath,Ye({scroll:$&&Q&&Q.scroll},oe)):i.push(T.fullPath,oe)),c.value=T,P(T,K,q,$),C()}let B;function M(){B||(B=i.listen((T,K,q)=>{if(!I.listening)return;const Z=m(T),oe=H(Z);if(oe){z(Ye(oe,{replace:!0,force:!0}),Z).catch(Qa);return}l=Z;const O=c.value;bo&&Jk(vm(O.fullPath,q.delta),kf()),U(Z,O).catch($=>Qr($,12)?$:Qr($,2)?(z(Ye(b($.to),{force:!0}),Z).then(Q=>{Qr(Q,20)&&!q.delta&&q.type===gc.pop&&i.go(-1,!1)}).catch(Qa),Promise.reject()):(q.delta&&i.go(-q.delta,!1),v($,Z,O))).then($=>{$=$||L(Z,O,!1),$&&(q.delta&&!Qr($,8)?i.go(-q.delta,!1):q.type===gc.pop&&Qr($,20)&&i.go(-1,!1)),V(Z,O,$)}).catch(Qa)}))}let _=Aa(),R=Aa(),j;function v(T,K,q){C(T);const Z=R.list();return Z.length?Z.forEach(oe=>oe(T,K,q)):console.error(T),Promise.reject(T)}function S(){return j&&c.value!==Ti?Promise.resolve():new Promise((T,K)=>{_.add([T,K])})}function C(T){return j||(j=!T,M(),_.list().forEach(([K,q])=>T?q(T):K()),_.reset()),T}function P(T,K,q,Z){const{scrollBehavior:oe}=t;if(!bo||!oe)return Promise.resolve();const O=!q&&Yk(vm(T.fullPath,0))||(Z||!q)&&history.state&&history.state.scroll||null;return qb().then(()=>oe(T,K,O)).then($=>$&&Qk($)).catch($=>v($,T,K))}const A=T=>i.go(T);let E;const k=new Set,I={currentRoute:c,listening:!0,addRoute:h,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:p,resolve:m,options:t,push:x,replace:N,go:A,back:()=>A(-1),forward:()=>A(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:R.add,isReady:S,install(T){const K=this;T.component("RouterLink",Eo),T.component("RouterView",G1),T.config.globalProperties.$router=K,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>fn(c)}),bo&&!E&&c.value===Ti&&(E=!0,x(i.location).catch(oe=>{}));const q={};for(const oe in Ti)Object.defineProperty(q,oe,{get:()=>c.value[oe],enumerable:!0});T.provide(Pf,K),T.provide(gg,Kb(q)),T.provide(Gh,c);const Z=T.unmount;k.add(T),T.unmount=function(){k.delete(T),k.size<1&&(l=Ti,B&&B(),B=null,c.value=Ti,E=!1,j=!1),Z()}}};function D(T){return T.reduce((K,q)=>K.then(()=>F(q)),Promise.resolve())}return I}function C3(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(l=>ea(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>ea(l,c))||i.push(c))}return[n,r,i]}function mg(){return yr(Pf)}function Tf(t){return yr(gg)}const x3={key:0,class:"site-footer",role:"contentinfo"},k3={class:"footer-inner"},P3={class:"brand-cell"},T3={class:"copy"},I3={class:"city"},R3=["href"],O3=["href"],N3={class:"addr"},M3={key:0},L3="AsiqIt",B3={__name:"AppFooter",setup(t){const e=Tf(),n=Ue(()=>e.name==="login"||e.path==="/login"),r=new Date().getFullYear(),i=[{city:"BALIKPAPAN",email:"asiqtix.bpn@gmail.com",tel:"087879127524",telHref:"+6287879127524",addr1:"Jl. Jendral Sudirman No. 88,",addr2:"Klandasan Ilir, Balikpapan",addr3:"Kota 76113"}];return(s,o)=>n.value?Xe("",!0):(Se(),Ce("footer",x3,[ee("div",k3,[ee("section",P3,[o[0]||(o[0]=Rx('<h2 class="footer-title">Contact us</h2><nav class="socials" aria-label="social links"><a href="https://www.instagram.com/bagas.y0/" aria-label="Instagram" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2.2c3.2 0 3.6 0 4.9.1 1.2.1 1.9.2 2.4.4.6.2 1 .4 1.5.8.4.3.7.8.8 1.5.2.5.3 1.2.4 2.4.1 1.3.1 1.7.1 4.9s0 3.6-.1 4.9c-.1 1.2-.2 1.9-.4 2.4-.2.6-.4 1-.8 1.5-.3.4-.8.7-1.5.8-.5.2-1.2.3-2.4.4-1.3.1-1.7.1-4.9.1s-3.6 0-4.9-.1c-1.2-.1-1.9-.2-2.4-.4-.6-.2-1-.4-1.5-.8-.4-.3-.7-.8-.8-1.5-.2-.5-.3-1.2-.4-2.4C2.2 15.6 2.2 15.2 2.2 12s0-3.6.1-4.9c.1-1.2.2-1.9.4-2.4.2-.6.4-1 .8-1.5.3-.4.8-.7 1.5-.8.5-.2 1.2-.3 2.4-.4C8.4 2.2 8.8 2.2 12 2.2Zm0 1.8c-3.1 0-3.5 0-4.7.1-1.1.1-1.7.2-2.1.4-.5.2-.8.4-1.1.7-.3.3-.5.6-.7 1.1-.2.4-.3 1-.4 2.1-.1 1.2-.1 1.6-.1 4.7s0 3.5.1 4.7c.1 1.1.2 1.7.4 2.1.2.5.4.8.7 1.1.3.3.6.5 1.1.7.4.2 1 .3 2.1.4 1.2.1 1.6.1 4.7.1s3.5 0 4.7-.1c1.1-.1 1.7-.2 2.1-.4.5-.2.8-.4 1.1-.7.3-.3.5-.6.7-1.1.2-.4.3-1 .4-2.1.1-1.2.1-1.6.1-4.7s0-3.5-.1-4.7c-.1-1.1-.2-1.7-.4-2.1-.2-.5-.4-.8-.7-1.1-.3-.3-.6-.5-1.1-.7-.4-.2-1-.3-2.1-.4-1.2-.1-1.6-.1-4.7-.1Zm0 3.4a6.6 6.6 0 1 1 0 13.2 6.6 6.6 0 0 1 0-13.2Zm0 2a4.6 4.6 0 1 0 0 9.2 4.6 4.6 0 0 0 0-9.2Zm5-2.2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"></path></svg></a><a href="https://web.facebook.com/profile.php?id=100010487190698" aria-label="Facebook" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13.5 22v-8h2.7l.4-3h-3.1V8.6c0-.9.2-1.6 1.6-1.6h1.7V4.3c-.3 0-1.3-.1-2.5-.1-2.5 0-4.1 1.5-4.1 4.2V11H8.3v3h2.9v8h2.3Z"></path></svg></a><a href="https://www.tiktok.com/@bagaspp253" aria-label="Tiktok" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12.67 2h2.53c.12 1.1.44 2.02 1.09 2.89.63.84 1.47 1.35 2.53 1.55v2.56c-.96-.02-1.86-.23-2.71-.65-.42-.2-.82-.45-1.22-.72l-.01 6.7c0 1.15-.23 2.22-.83 3.2a6.08 6.08 0 0 1-4.18 2.94c-.77.14-1.52.14-2.27-.05-1.65-.42-2.9-1.36-3.72-2.85-1.26-2.31-.98-5.2.69-7.22 1.28-1.52 2.93-2.24 4.93-2.21v2.66c-.52.02-1 .1-1.45.32-1.03.48-1.62 1.3-1.75 2.42-.18 1.5.67 2.86 2.03 3.3 1.72.56 3.59-.48 3.93-2.26.05-.26.07-.54.07-.81l.02-11.52Z"></path></svg></a></nav>',2)),ee("small",T3," "+Oe(fn(r))+" "+Oe(L3)+". All rights reserved.",1)]),(Se(),Ce(ln,null,c1(i,(a,c)=>ee("section",{key:c,class:"office-cell"},[ee("h3",I3,Oe(a.city),1),ee("a",{class:"email",href:`mailto:${a.email}`},Oe(a.email),9,R3),ee("a",{class:"tel",href:`tel:${a.telHref}`},Oe(a.tel),9,O3),ee("address",N3,[ee("span",null,Oe(a.addr1),1),ee("span",null,Oe(a.addr2),1),a.addr3?(Se(),Ce("span",M3,Oe(a.addr3),1)):Xe("",!0)])])),64))])]))}},D3={id:"app",class:"app-shell"},U3={class:"app-main"},F3={__name:"App",setup(t){return(e,n)=>(Se(),Ce("div",D3,[ee("main",U3,[ft(fn(G1))]),ft(B3)]))}},$3="modulepreload",H3=function(t){return"/"+t},Nm={},Ma=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=c(n.map(l=>{if(l=H3(l),l in Nm)return;Nm[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":$3,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,g)=>{d.addEventListener("load",h),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},yg="/assets/logo_with_text-CUi1xsHR.png",pa=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},K3={class:"sb-menu","aria-label":"Main"},j3={__name:"SideNavSB",props:{modelValue:{type:Boolean,required:!0},extraClass:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=Ie("customer"),s=Ue(()=>i.value==="admin"),o=Ue(()=>i.value==="promoter"||i.value==="promotor"),a="http://localhost:3001";function c(){return localStorage.getItem("walletAddress")||""}async function l(){const g=c();if(g)try{const p=await fetch(`${a}/api/me`,{headers:{"x-wallet-address":g}}),y=await p.json().catch(()=>({}));p.ok&&y.role&&(i.value=y.role)}catch{i.value="customer"}}Xo(l);const u=Tf(),f=Ue({get:()=>n.modelValue,set:g=>r("update:modelValue",g)});function d(){f.value=!1}function h(g){g.key==="Escape"&&d()}return Xo(()=>window.addEventListener("keydown",h)),_f(()=>window.removeEventListener("keydown",h)),gr(()=>u.fullPath,d),(g,p)=>(Se(),Ce(ln,null,[ft(Wx,{name:"sb"},{default:ks(()=>[f.value?(Se(),Ce("aside",{key:0,class:Hc(["sb-card",t.extraClass]),role:"dialog","aria-modal":"true",onClick:p[0]||(p[0]=Ps(()=>{},["stop"]))},[ee("nav",K3,[ft(fn(Eo),{class:"sb-item","active-class":"active",to:"/home",onClick:d},{default:ks(()=>[rt(Oe(s.value?"Admin Dashboard":o.value?"Promoter Dashboard":"Home"),1)]),_:1}),ft(fn(Eo),{class:"sb-item","active-class":"active",to:"/profile",onClick:d},{default:ks(()=>[...p[1]||(p[1]=[rt("Profile",-1)])]),_:1}),ft(fn(Eo),{class:"sb-item","active-class":"active",to:"/wallet",onClick:d},{default:ks(()=>[...p[2]||(p[2]=[rt("Wallet",-1)])]),_:1}),ft(fn(Eo),{class:"sb-item","active-class":"active",to:"/history",onClick:d},{default:ks(()=>[...p[3]||(p[3]=[rt("History",-1)])]),_:1}),ft(fn(Eo),{class:"sb-item sb-danger",to:"/logout",onClick:d},{default:ks(()=>[...p[4]||(p[4]=[rt("Log out",-1)])]),_:1})])],2)):Xe("",!0)]),_:1}),f.value?(Se(),Ce("div",{key:0,class:"sb-backdrop",onClick:d})):Xe("",!0)],64))}},q1=pa(j3,[["__scopeId","data-v-61fec9ff"]]),V3="6.15.0";function z3(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function on(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Pe(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&z3(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function xo(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>xo(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return xo(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${xo(r,e)}: ${xo(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Vt(t,e){return t&&t.code===e}function vg(t){return Vt(t,"CALL_EXCEPTION")}function ut(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${xo(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+xo(a))}}s.push(`code=${e}`),s.push(`version=${V3}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Pe(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Pe(i,{shortMessage:r}),i}function me(t,e,n,r){if(!t)throw ut(e,n,r)}function te(t,e,n,r){me(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function W1(t,e,n){n==null&&(n=""),n&&(n=": "+n),me(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),me(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Vc(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Q1(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}te(!1,"invalid BytesLike value",e||"value",t)}function Fe(t,e){return Q1(t,e,!1)}function hn(t,e){return Q1(t,e,!0)}function at(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function wg(t){return at(t,!0)||t instanceof Uint8Array}const Mm="0123456789abcdef";function be(t){const e=Fe(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=Mm[(i&240)>>4]+Mm[i&15]}return n}function Et(t){return"0x"+t.map(e=>be(e).substring(2)).join("")}function Ko(t){return at(t,!0)?(t.length-2)/2:Fe(t).length}function yt(t,e,n){const r=Fe(t);return n!=null&&n>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),be(r.slice(e??0,n??r.length))}function J1(t,e,n){const r=Fe(t);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),be(i)}function Ei(t,e){return J1(t,e,!0)}function G3(t,e){return J1(t,e,!1)}const If=BigInt(0),dr=BigInt(1),ko=9007199254740991;function Tu(t,e){const n=Rf(t,"value"),r=BigInt(Be(e,"width"));if(me(n>>r===If,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-dr){const i=(dr<<r)-dr;return-((~n&i)+dr)}return n}function Y1(t,e){let n=_e(t,"value");const r=BigInt(Be(e,"width")),i=dr<<r-dr;if(n<If){n=-n,me(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(dr<<r)-dr;return(~n&s)+dr}else me(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Ds(t,e){const n=Rf(t,"value"),r=BigInt(Be(e,"bits"));return n&(dr<<r)-dr}function _e(t,e){switch(typeof t){case"bigint":return t;case"number":return te(Number.isInteger(t),"underflow",e||"value",t),te(t>=-ko&&t<=ko,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){te(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}te(!1,"invalid BigNumberish value",e||"value",t)}function Rf(t,e){const n=_e(t,e);return me(n>=If,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Lm="0123456789abcdef";function Of(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Lm[n>>4],e+=Lm[n&15];return BigInt(e)}return _e(t)}function Be(t,e){switch(typeof t){case"bigint":return te(t>=-ko&&t<=ko,"overflow",e||"value",t),Number(t);case"number":return te(Number.isInteger(t),"underflow",e||"value",t),te(t>=-ko&&t<=ko,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Be(BigInt(t),e)}catch(n){te(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}te(!1,"invalid numeric value",e||"value",t)}function q3(t){return Be(Of(t))}function ds(t,e){let r=Rf(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Be(e,"width");for(me(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function It(t){const e=Rf(t,"value");if(e===If)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(n.substring(s,s+2),16)}return r}function ur(t){let e=be(wg(t)?t:It(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Bm="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Dm=BigInt(58);function W3(t){const e=Fe(t);let n=Of(e),r="";for(;n;)r=Bm[Number(n%Dm)]+r,n/=Dm;for(let i=0;i<e.length&&!e[i];i++)r=Bm[0]+r;return r}function Q3(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Fe(e)}function J3(t){const e=Fe(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}class Z1{filter;emitter;#e;constructor(e,n,r){this.#e=n,Pe(this,{emitter:e,filter:r})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function Y3(t,e,n,r,i){te(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function X1(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function Z3(t,e,n,r,i){return t==="OVERLONG"?(te(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),X1(t,e,n))}const X3=Object.freeze({error:Y3,ignore:X1,replace:Z3});function eP(t,e){e==null&&(e=X3.error);const n=Fe(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(s>>7===0){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let c=s&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),c=null;break}c=c<<6|u&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,c);continue}if(c<=a){i+=e("OVERLONG",i-1-o,n,r,c);continue}r.push(c)}}return r}function mi(t,e){te(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);te(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function tP(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Iu(t,e){return tP(eP(t,e))}function eE(t){async function e(n,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();me(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),me(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=ut("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=ut("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(h){throw clearTimeout(a),s||h}clearTimeout(a);const u={};l.headers.forEach((h,g)=>{u[g.toLowerCase()]=h});const f=await l.arrayBuffer(),d=f==null?null:new Uint8Array(f);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:d}}return e}const nP=12,rP=250;let Um=eE();const iP=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),sP=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let yd=!1;async function tE(t,e){try{const n=t.match(iP);if(!n)throw new Error("invalid data");return new os(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Q3(n[3]):aP(n[3]))}catch{return new os(599,"BAD REQUEST (invalid data: URI)",{},null,new Ai(t))}}function nE(t){async function e(n,r){try{const i=n.match(sP);if(!i)throw new Error("invalid link");return new Ai(`${t}${i[2]}`)}catch{return new os(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ai(n))}}return e}const al={data:tE,ipfs:nE("https://gateway.ipfs.io/ipfs/")},rE=new WeakMap;class oP{#e;#t;constructor(e){this.#e=[],this.#t=!1,rE.set(e,()=>{if(!this.#t){this.#t=!0;for(const n of this.#e)setTimeout(()=>{n()},0);this.#e=[]}})}addListener(e){me(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}function cl(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class Ai{#e;#t;#n;#r;#i;#o;#s;#a;#f;#l;#p;#g;#c;#u;#d;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#s==null?null:new Uint8Array(this.#s)}set body(e){if(e==null)this.#s=void 0,this.#a=void 0;else if(typeof e=="string")this.#s=mi(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#s=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#s=mi(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#s!=null}get method(){return this.#r?this.#r:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#r=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#f&&(e.authorization=`Basic ${J3(mi(this.#f))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){this.#n[String(e).toLowerCase()]=String(n)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#f||null}setCredentials(e,n){te(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#f=`${e}:${n}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#i}set timeout(e){te(e>=0,"timeout must be non-zero","timeout",e),this.#i=e}get preflightFunc(){return this.#l||null}set preflightFunc(e){this.#l=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#d||Um}set getUrlFunc(e){this.#d=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#r="",this.#i=3e5,this.#u={slotInterval:rP,maxAttempts:nP},this.#d=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#s?be(this.#s):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#h(e,n,r,i,s){if(e>=this.#u.maxAttempts)return s.makeServerError("exceeded maximum retry limit");me(Fm()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await cP(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in al){const u=await al[a](o.url,cl(i.#c));if(u instanceof os){let f=u;if(this.processFunc){cl(i.#c);try{f=await this.processFunc(o,f)}catch(d){(d.throttle==null||typeof d.stall!="number")&&f.makeServerError("error in post-processing function",d).assertOk()}}return f}o=u}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,cl(i.#c));let l=new os(c.statusCode,c.statusMessage,c.headers,c.body,i);if(l.statusCode===301||l.statusCode===302){try{const u=l.headers.location||"";return o.redirect(u).#h(e+1,n,0,i,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const u=l.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof u=="string"&&u.match(/^[1-9][0-9]*$/)&&(f=parseInt(u)),o.clone().#h(e+1,n,f,i,l)}if(this.processFunc){cl(i.#c);try{l=await this.processFunc(o,l)}catch(u){(u.throttle==null||typeof u.stall!="number")&&l.makeServerError("error in post-processing function",u).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return u.stall>=0&&(f=u.stall),o.clone().#h(e+1,n,f,i,l)}}return l}send(){return me(this.#c==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#c=new oP(this),this.#h(0,Fm()+this.timeout,0,this,new os(0,"",{},null,this))}cancel(){me(this.#c!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=rE.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Ai(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,i.#n=Object.assign({},this.#n),this.#s&&(i.#s=new Uint8Array(this.#s)),i.#a=this.#a,i}clone(){const e=new Ai(this.url);return e.#r=this.#r,this.#s&&(e.#s=this.#s),e.#a=this.#a,e.#n=Object.assign({},this.#n),e.#f=this.#f,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#l=this.#l,e.#p=this.#p,e.#g=this.#g,e.#u=Object.assign({},this.#u),e.#d=this.#d,e}static lockConfig(){yd=!0}static getGateway(e){return al[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(yd)throw new Error("gateways locked");al[e]=n}static registerGetUrl(e){if(yd)throw new Error("gateways locked");Um=e}static createGetUrlFunc(e){return eE(e)}static createDataGateway(){return tE}static createIpfsGatewayFunc(e){return nE(e)}}class os{#e;#t;#n;#r;#i;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#r?be(this.#r):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#r==null?null:new Uint8Array(this.#r)}get bodyText(){try{return this.#r==null?"":Iu(this.#r)}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,n,r,i,s){this.#e=e,this.#t=n,this.#n=Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{}),this.#r=i==null?null:new Uint8Array(i),this.#i=s||null,this.#o={message:""}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new os(599,r,this.headers,this.body,this.#i||void 0);return i.#o={message:e,error:n},i}throwThrottleError(e,n){n==null?n=-1:te(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Pe(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#r!=null}get request(){return this.#i}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{this.#r&&(i=Iu(this.#r))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function Fm(){return new Date().getTime()}function aP(t){return mi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function cP(t){return new Promise(e=>setTimeout(e,t))}const lP=BigInt(-1),or=BigInt(0),Po=BigInt(1),uP=BigInt(5),uo={};let jo="0000";for(;jo.length<80;)jo+=jo;function As(t){let e=jo;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function _a(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Po<<r-Po;me(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>or?t=Tu(Ds(t,r),r):t=-Tu(Ds(-t,r),r)}else{const i=Po<<r;me(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Po}return t}function vd(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);te(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,c,l)=>s[a]==null?l:(te(typeof s[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}te(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),te(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function fP(t,e){let n="";t<or&&(n="-",t*=lP);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=jo+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}class qi{format;#e;#t;#n;_value;constructor(e,n,r){Vc(e,uo,"FixedNumber"),this.#t=n,this.#e=r;const i=fP(n,r.decimals);Pe(this,{format:r.name,_value:i}),this.#n=As(r.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#r(e){te(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#i(e,n){return e=_a(e,this.#e,n),new qi(uo,e,this.#e)}#o(e,n){return this.#r(e),this.#i(this.#t+e.#t,n)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#s(e,n){return this.#r(e),this.#i(this.#t-e.#t,n)}subUnsafe(e){return this.#s(e)}sub(e){return this.#s(e,"sub")}#a(e,n){return this.#r(e),this.#i(this.#t*e.#t/this.#n,n)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#r(e);const n=this.#t*e.#t;return me(n%this.#n===or,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#i(n/this.#n,"mulSignal")}#f(e,n){return me(e.#t!==or,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e),this.#i(this.#t*this.#n/e.#t,n)}divUnsafe(e){return this.#f(e)}div(e){return this.#f(e,"div")}divSignal(e){me(e.#t!==or,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e);const n=this.#t*this.#n;return me(n%e.#t===or,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#i(n/e.#t,"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=As(i):i<0&&(n*=As(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<or&&(e-=this.#n-Po),e=this.#t/this.#n*this.#n,this.#i(e,"floor")}ceiling(){let e=this.#t;return this.#t>or&&(e+=this.#n-Po),e=this.#t/this.#n*this.#n,this.#i(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=uP*As(n-1);let i=this.value+r;const s=As(n);return i=i/s*s,_a(i,this.#e,"round"),new qi(uo,i,this.#e)}isZero(){return this.#t===or}isNegative(){return this.#t<or}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return qi.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:Be(n),s=vd(r);let o=_e(e,"value");const a=i-s.decimals;if(a>0){const c=As(a);me(o%c===or,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=As(-a));return _a(o,s,"fromValue"),new qi(uo,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);te(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=vd(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=jo;me(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return _a(a,i,"fromString"),new qi(uo,a,i)}static fromBytes(e,n){let r=Of(Fe(e,"value"));const i=vd(n);return i.signed&&(r=Tu(r,i.width)),_a(r,i,"fromBytes"),new qi(uo,r,i)}}function dP(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function $m(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function Hm(t,e,n,r){const i=[];for(;n<e+1+r;){const s=iE(t,n);i.push(s.result),n+=s.consumed,me(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function iE(t,e){me(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{me(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=$m(t,e+1,r);return n(e+1+r+i),Hm(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),Hm(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=$m(t,e+1,r);n(e+1+r+i);const s=be(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=be(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:dP(t[e])}}function zc(t){const e=Fe(t,"data"),n=iE(e,0);return te(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Km(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function sE(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(sE(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=Km(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Fe(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Km(e.length);return n.unshift(183+n.length),n.concat(e)}const jm="0123456789abcdef";function hs(t){let e="0x";for(const n of sE(t))e+=jm[n>>4],e+=jm[n&15];return e}function hP(t,e){let n=18;return n=Be(e,"unit"),qi.fromValue(t,n,{decimals:n,width:512}).toString()}function fo(t){return hP(t,18)}const pn=32,qh=new Uint8Array(pn),pP=["then"],ll={},oE=new WeakMap;function Ms(t){return oE.get(t)}function Vm(t,e){oE.set(t,e)}function Sa(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function Wh(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof ui?Wh(Ms(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof ui&&(o=Wh(Ms(o),o,n)),r[i]=o),r},{})}class ui extends Array{#e;constructor(...e){const n=e[0];let r=e[1],i=(e[2]||[]).slice(),s=!0;n!==ll&&(r=e,i=[],s=!1),super(r.length),r.forEach((c,l)=>{this[l]=c});const o=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(Vm(this,Object.freeze(r.map((c,l)=>{const u=i[l];return u!=null&&o.get(u)===1?u:null}))),this.#e=[],this.#e==null&&this.#e,!s)return;Object.freeze(this);const a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const d=Be(l,"%index");if(d<0||d>=this.length)throw new RangeError("out of result range");const h=c[d];return h instanceof Error&&Sa(`index ${d}`,h),h}if(pP.indexOf(l)>=0)return Reflect.get(c,l,u);const f=c[l];if(f instanceof Function)return function(...d){return f.apply(this===u?c:this,d)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return Vm(a,Ms(this)),a}toArray(e){const n=[];return this.forEach((r,i)=>{r instanceof Error&&Sa(`index ${i}`,r),e&&r instanceof ui&&(r=r.toArray(e)),n.push(r)}),n}toObject(e){const n=Ms(this);return n.reduce((r,i,s)=>(me(i!=null,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Wh(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const r=Ms(this),i=[],s=[];for(let o=e;o<n;o++)i.push(this[o]),s.push(r[o]);return new ui(ll,i,s)}filter(e,n){const r=Ms(this),i=[],s=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&Sa(`index ${o}`,a),e.call(n,a,o,this)&&(i.push(a),s.push(r[o]))}return new ui(ll,i,s)}map(e,n){const r=[];for(let i=0;i<this.length;i++){const s=this[i];s instanceof Error&&Sa(`index ${i}`,s),r.push(e.call(n,s,i,this))}return r}getValue(e){const n=Ms(this).indexOf(e);if(n===-1)return;const r=this[n];return r instanceof Error&&Sa(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,n){return new ui(ll,e,n)}}function zm(t){let e=It(t);return me(e.length<=pn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:pn,offset:e.length}),e.length!==pn&&(e=hn(Et([qh.slice(e.length%pn),e]))),e}class xi{name;type;localName;dynamic;constructor(e,n,r,i){Pe(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){te(!1,e,this.localName,n)}}class Qh{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return Et(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(hn(e.data))}writeBytes(e){let n=hn(e);const r=n.length%pn;return r&&(n=hn(Et([n,qh.slice(r)]))),this.#n(n)}writeValue(e){return this.#n(zm(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(qh),this.#t+=pn,n=>{this.#e[e]=zm(n)}}}class bg{allowLoose;#e;#t;#n;#r;#i;constructor(e,n,r){Pe(this,{allowLoose:!!n}),this.#e=hn(e),this.#n=0,this.#r=null,this.#i=r??1024,this.#t=0}get data(){return be(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#r)return this.#r.#o(e);this.#n+=e,me(this.#i<1||this.#n<=this.#i*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#i} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:hn(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#s(e,n,r){let i=Math.ceil(n/pn)*pn;return this.#t+i>this.#e.length&&(this.allowLoose&&r&&this.#t+n<=this.#e.length?i=n:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:hn(this.#e),length:this.#e.length,offset:this.#t+i})),this.#e.slice(this.#t,this.#t+i)}subReader(e){const n=new bg(this.#e.slice(this.#t+e),this.allowLoose,this.#i);return n.#r=this,n}readBytes(e,n){let r=this.#s(0,e,!!n);return this.#o(e),this.#t+=r.length,r.slice(0,e)}readValue(){return Of(this.readBytes(pn))}readIndex(){return q3(this.readBytes(pn))}}function Ru(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Eg(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function gP(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ru(t.outputLen),Ru(t.blockLen)}function na(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aE(t,e){Eg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const wd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const cE=t=>t instanceof Uint8Array,mP=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),bd=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Cr=(t,e)=>t<<32-e|t>>>e,yP=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!yP)throw new Error("Non little-endian hardware is not supported");function vP(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Nf(t){if(typeof t=="string"&&(t=vP(t)),!cE(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function wP(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!cE(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class Ag{clone(){return this._cloneInto()}}function _g(t){const e=r=>t().update(Nf(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function bP(t=32){if(wd&&typeof wd.getRandomValues=="function")return wd.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class lE extends Ag{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,gP(e);const r=Nf(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return na(this),this.iHash.update(e),this}digestInto(e){na(this),Eg(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const uE=(t,e,n)=>new lE(t,e).update(n).digest();uE.create=(t,e)=>new lE(t,e);function EP(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class fE extends Ag{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=bd(this.buffer)}update(e){na(this);const{view:n,buffer:r,blockLen:i}=this;e=Nf(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=bd(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){na(this),aE(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;EP(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=bd(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const AP=(t,e,n)=>t&e^~t&n,_P=(t,e,n)=>t&e^t&n^e&n,SP=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ii=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ri=new Uint32Array(64);class CP extends fE{constructor(){super(64,32,8,!1),this.A=Ii[0]|0,this.B=Ii[1]|0,this.C=Ii[2]|0,this.D=Ii[3]|0,this.E=Ii[4]|0,this.F=Ii[5]|0,this.G=Ii[6]|0,this.H=Ii[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let f=0;f<16;f++,n+=4)Ri[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Ri[f-15],h=Ri[f-2],g=Cr(d,7)^Cr(d,18)^d>>>3,p=Cr(h,17)^Cr(h,19)^h>>>10;Ri[f]=p+Ri[f-7]+g+Ri[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=Cr(a,6)^Cr(a,11)^Cr(a,25),h=u+d+AP(a,c,l)+SP[f]+Ri[f]|0,p=(Cr(r,2)^Cr(r,13)^Cr(r,22))+_P(r,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Ri.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const dE=_g(()=>new CP),ul=BigInt(2**32-1),Jh=BigInt(32);function hE(t,e=!1){return e?{h:Number(t&ul),l:Number(t>>Jh&ul)}:{h:Number(t>>Jh&ul)|0,l:Number(t&ul)|0}}function pE(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=hE(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const xP=(t,e)=>BigInt(t>>>0)<<Jh|BigInt(e>>>0),kP=(t,e,n)=>t>>>n,PP=(t,e,n)=>t<<32-n|e>>>n,TP=(t,e,n)=>t>>>n|e<<32-n,IP=(t,e,n)=>t<<32-n|e>>>n,RP=(t,e,n)=>t<<64-n|e>>>n-32,OP=(t,e,n)=>t>>>n-32|e<<64-n,NP=(t,e)=>e,MP=(t,e)=>t,gE=(t,e,n)=>t<<n|e>>>32-n,mE=(t,e,n)=>e<<n|t>>>32-n,yE=(t,e,n)=>e<<n-32|t>>>64-n,vE=(t,e,n)=>t<<n-32|e>>>64-n;function LP(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const BP=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),DP=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,UP=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),FP=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,$P=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),HP=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Me={fromBig:hE,split:pE,toBig:xP,shrSH:kP,shrSL:PP,rotrSH:TP,rotrSL:IP,rotrBH:RP,rotrBL:OP,rotr32H:NP,rotr32L:MP,rotlSH:gE,rotlSL:mE,rotlBH:yE,rotlBL:vE,add:LP,add3L:BP,add3H:DP,add4L:UP,add4H:FP,add5H:HP,add5L:$P},[KP,jP]=Me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Oi=new Uint32Array(80),Ni=new Uint32Array(80);class VP extends fE{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:h,Gl:g,Hh:p,Hl:y}=this;return[e,n,r,i,s,o,a,c,l,u,f,d,h,g,p,y]}set(e,n,r,i,s,o,a,c,l,u,f,d,h,g,p,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=y|0}process(e,n){for(let w=0;w<16;w++,n+=4)Oi[w]=e.getUint32(n),Ni[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const x=Oi[w-15]|0,N=Ni[w-15]|0,H=Me.rotrSH(x,N,1)^Me.rotrSH(x,N,8)^Me.shrSH(x,N,7),z=Me.rotrSL(x,N,1)^Me.rotrSL(x,N,8)^Me.shrSL(x,N,7),G=Oi[w-2]|0,F=Ni[w-2]|0,U=Me.rotrSH(G,F,19)^Me.rotrBH(G,F,61)^Me.shrSH(G,F,6),V=Me.rotrSL(G,F,19)^Me.rotrBL(G,F,61)^Me.shrSL(G,F,6),L=Me.add4L(z,V,Ni[w-7],Ni[w-16]),B=Me.add4H(L,H,U,Oi[w-7],Oi[w-16]);Oi[w]=B|0,Ni[w]=L|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:h,Fl:g,Gh:p,Gl:y,Hh:m,Hl:b}=this;for(let w=0;w<80;w++){const x=Me.rotrSH(f,d,14)^Me.rotrSH(f,d,18)^Me.rotrBH(f,d,41),N=Me.rotrSL(f,d,14)^Me.rotrSL(f,d,18)^Me.rotrBL(f,d,41),H=f&h^~f&p,z=d&g^~d&y,G=Me.add5L(b,N,z,jP[w],Ni[w]),F=Me.add5H(G,m,x,H,KP[w],Oi[w]),U=G|0,V=Me.rotrSH(r,i,28)^Me.rotrBH(r,i,34)^Me.rotrBH(r,i,39),L=Me.rotrSL(r,i,28)^Me.rotrBL(r,i,34)^Me.rotrBL(r,i,39),B=r&s^r&a^s&a,M=i&o^i&c^o&c;m=p|0,b=y|0,p=h|0,y=g|0,h=f|0,g=d|0,{h:f,l:d}=Me.add(l|0,u|0,F|0,U|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const _=Me.add3L(U,L,M);r=Me.add3H(_,F,V,B),i=_|0}({h:r,l:i}=Me.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Me.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Me.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Me.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=Me.add(this.Eh|0,this.El|0,f|0,d|0),{h,l:g}=Me.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:y}=Me.add(this.Gh|0,this.Gl|0,p|0,y|0),{h:m,l:b}=Me.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,i,s,o,a,c,l,u,f,d,h,g,p,y,m,b)}roundClean(){Oi.fill(0),Ni.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const zP=_g(()=>new VP);function GP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Gm=GP();Gm.crypto||Gm.msCrypto;function qP(t){switch(t){case"sha256":return dE.create();case"sha512":return zP.create()}te(!1,"invalid hashing algorithm name","algorithm",t)}const[wE,bE,EE]=[[],[],[]],WP=BigInt(0),Ca=BigInt(1),QP=BigInt(2),JP=BigInt(7),YP=BigInt(256),ZP=BigInt(113);for(let t=0,e=Ca,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],wE.push(2*(5*r+n)),bE.push((t+1)*(t+2)/2%64);let i=WP;for(let s=0;s<7;s++)e=(e<<Ca^(e>>JP)*ZP)%YP,e&QP&&(i^=Ca<<(Ca<<BigInt(s))-Ca);EE.push(i)}const[XP,eT]=pE(EE,!0),qm=(t,e,n)=>n>32?yE(t,e,n):gE(t,e,n),Wm=(t,e,n)=>n>32?vE(t,e,n):mE(t,e,n);function tT(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],f=qm(l,u,1)^n[a],d=Wm(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=f,t[o+h+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=bE[o],c=qm(i,s,a),l=Wm(i,s,a),u=wE[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=XP[r],t[1]^=eT[r]}n.fill(0)}class Sg extends Ag{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ru(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=mP(this.state)}keccak(){tT(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){na(this);const{blockLen:n,state:r}=this;e=Nf(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){na(this,!1),Eg(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ru(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Sg(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const nT=(t,e,n)=>_g(()=>new Sg(e,t,n)),rT=nT(1,136,256/8);let AE=!1;const _E=function(t){return rT(t)};let SE=_E;function kt(t){const e=Fe(t,"data");return be(SE(e))}kt._=_E;kt.lock=function(){AE=!0};kt.register=function(t){if(AE)throw new TypeError("keccak256 is locked");SE=t};Object.freeze(kt);const CE=function(t){return qP("sha256").update(t).digest()};let xE=CE,kE=!1;function ga(t){const e=Fe(t,"data");return be(xE(e))}ga._=CE;ga.lock=function(){kE=!0};ga.register=function(t){if(kE)throw new Error("sha256 is locked");xE=t};Object.freeze(ga);Object.freeze(ga);const PE=BigInt(0),Mf=BigInt(1),iT=BigInt(2),Lf=t=>t instanceof Uint8Array,sT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ra(t){if(!Lf(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=sT[t[n]];return e}function TE(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Cg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function ia(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Gs(t){return Cg(ra(t))}function xg(t){if(!Lf(t))throw new Error("Uint8Array expected");return Cg(ra(Uint8Array.from(t).reverse()))}function sa(t,e){return ia(t.toString(16).padStart(e*2,"0"))}function kg(t,e){return sa(t,e).reverse()}function oT(t){return ia(TE(t))}function ar(t,e,n){let r;if(typeof e=="string")try{r=ia(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Lf(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function mc(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Lf(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function aT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function cT(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function lT(t){let e;for(e=0;t>PE;t>>=Mf,e+=1);return e}function uT(t,e){return t>>BigInt(e)&Mf}const fT=(t,e,n)=>t|(n?Mf:PE)<<BigInt(e),Pg=t=>(iT<<BigInt(t-1))-Mf,Ed=t=>new Uint8Array(t),Qm=t=>Uint8Array.from(t);function IE(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Ed(t),i=Ed(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...f)=>n(i,r,...f),c=(f=Ed())=>{i=a(Qm([0]),f),r=a(),f.length!==0&&(i=a(Qm([1]),f),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=a();const h=r.slice();d.push(h),f+=r.length}return mc(...d)};return(f,d)=>{o(),c(f);let h;for(;!(h=d(l()));)c();return o(),h}}const dT={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Gc(t,e,n={}){const r=(i,s,o)=>{const a=dT[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const hT=Object.freeze(Object.defineProperty({__proto__:null,bitGet:uT,bitLen:lT,bitMask:Pg,bitSet:fT,bytesToHex:ra,bytesToNumberBE:Gs,bytesToNumberLE:xg,concatBytes:mc,createHmacDrbg:IE,ensureBytes:ar,equalBytes:aT,hexToBytes:ia,hexToNumber:Cg,numberToBytesBE:sa,numberToBytesLE:kg,numberToHexUnpadded:TE,numberToVarBytesBE:oT,utf8ToBytes:cT,validateObject:Gc},Symbol.toStringTag,{value:"Module"}));const Dt=BigInt(0),St=BigInt(1),Ls=BigInt(2),pT=BigInt(3),Yh=BigInt(4),Jm=BigInt(5),Ym=BigInt(8);BigInt(9);BigInt(16);function _n(t,e){const n=t%e;return n>=Dt?n:e+n}function gT(t,e,n){if(n<=Dt||e<Dt)throw new Error("Expected power/modulo > 0");if(n===St)return Dt;let r=St;for(;e>Dt;)e&St&&(r=r*t%n),t=t*t%n,e>>=St;return r}function Vn(t,e,n){let r=t;for(;e-- >Dt;)r*=r,r%=n;return r}function Zh(t,e){if(t===Dt||e<=Dt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=_n(t,e),r=e,i=Dt,s=St;for(;n!==Dt;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==St)throw new Error("invert: does not exist");return _n(i,e)}function mT(t){const e=(t-St)/Ls;let n,r,i;for(n=t-St,r=0;n%Ls===Dt;n/=Ls,r++);for(i=Ls;i<t&&gT(i,e,t)!==t-St;i++);if(r===1){const o=(t+St)/Yh;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+St)/Ls;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),f=a.pow(c,s),d=a.pow(c,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let p=a.sqr(d);h<l&&!a.eql(p,a.ONE);h++)p=a.sqr(p);const g=a.pow(u,St<<BigInt(l-h-1));u=a.sqr(g),f=a.mul(f,g),d=a.mul(d,u),l=h}return f}}function yT(t){if(t%Yh===pT){const e=(t+St)/Yh;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Ym===Jm){const e=(t-Jm)/Ym;return function(r,i){const s=r.mul(i,Ls),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,Ls),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return mT(t)}const vT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wT(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=vT.reduce((r,i)=>(r[i]="function",r),e);return Gc(t,n)}function bT(t,e,n){if(n<Dt)throw new Error("Expected power > 0");if(n===Dt)return t.ONE;if(n===St)return e;let r=t.ONE,i=e;for(;n>Dt;)n&St&&(r=t.mul(r,i)),i=t.sqr(i),n>>=St;return r}function ET(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function RE(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function AT(t,e,n=!1,r={}){if(t<=Dt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=RE(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=yT(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:Pg(i),ZERO:Dt,ONE:St,create:c=>_n(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Dt<=c&&c<t},is0:c=>c===Dt,isOdd:c=>(c&St)===St,neg:c=>_n(-c,t),eql:(c,l)=>c===l,sqr:c=>_n(c*c,t),add:(c,l)=>_n(c+l,t),sub:(c,l)=>_n(c-l,t),mul:(c,l)=>_n(c*l,t),pow:(c,l)=>bT(a,c,l),div:(c,l)=>_n(c*Zh(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Zh(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>ET(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?kg(c,s):sa(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?xg(c):Gs(c)}});return Object.freeze(a)}function OE(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function NE(t){const e=OE(t);return e+Math.ceil(e/2)}function _T(t,e,n=!1){const r=t.length,i=OE(e),s=NE(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Gs(t):xg(t),a=_n(o,e-St)+St;return n?kg(a,i):sa(a,i)}const ST=BigInt(0),Ad=BigInt(1);function CT(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>ST;)s&Ad&&(o=o.add(a)),a=a.double(),s>>=Ad;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),c=[];let l=i,u=l;for(let f=0;f<o;f++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=r(i);let l=t.ZERO,u=t.BASE;const f=BigInt(2**i-1),d=2**i,h=BigInt(i);for(let g=0;g<a;g++){const p=g*c;let y=Number(o&f);o>>=h,y>c&&(y-=d,o+=Ad);const m=p,b=p+Math.abs(y)-1,w=g%2!==0,x=y<0;y===0?u=u.add(n(w,s[m])):l=l.add(n(x,s[b]))}return{p:l,f:u}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let l=s.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&s.set(i,a(l))),this.wNAF(c,l,o)}}}function ME(t){return wT(t.Fp),Gc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...RE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function xT(t){const e=ME(t);Gc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:kT,hexToBytes:PT}=hT,Us={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Us;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:kT(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Us,n=typeof t=="string"?PT(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Us._parseInt(n.subarray(2)),{d:o,l:a}=Us._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},ci=BigInt(0),Jn=BigInt(1);BigInt(2);const Zm=BigInt(3);BigInt(4);function TT(t){const e=xT(t),{Fp:n}=e,r=e.toBytes||((g,p,y)=>{const m=p.toAffine();return mc(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),i=e.fromBytes||(g=>{const p=g.subarray(1),y=n.fromBytes(p.subarray(0,n.BYTES)),m=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function s(g){const{a:p,b:y}=e,m=n.sqr(g),b=n.mul(m,g);return n.add(n.add(b,n.mul(g,p)),y)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&ci<g&&g<e.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){const{allowedPrivateKeyLengths:p,nByteLength:y,wrapPrivateKey:m,n:b}=e;if(p&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=ra(g)),typeof g!="string"||!p.includes(g.length))throw new Error("Invalid key");g=g.padStart(y*2,"0")}let w;try{w=typeof g=="bigint"?g:Gs(ar("private key",g,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof g}`)}return m&&(w=_n(w,b)),a(w),w}const l=new Map;function u(g){if(!(g instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(p,y,m){if(this.px=p,this.py=y,this.pz=m,p==null||!n.isValid(p))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(p){const{x:y,y:m}=p||{};if(!p||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(p instanceof f)throw new Error("projective point not allowed");const b=w=>n.eql(w,n.ZERO);return b(y)&&b(m)?f.ZERO:new f(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const y=n.invertBatch(p.map(m=>m.pz));return p.map((m,b)=>m.toAffine(y[b])).map(f.fromAffine)}static fromHex(p){const y=f.fromAffine(i(ar("pointHex",p)));return y.assertValidity(),y}static fromPrivateKey(p){return f.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:p,y}=this.toAffine();if(!n.isValid(p)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),b=s(p);if(!n.eql(m,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:y,py:m,pz:b}=this,{px:w,py:x,pz:N}=p,H=n.eql(n.mul(y,N),n.mul(w,b)),z=n.eql(n.mul(m,N),n.mul(x,b));return H&&z}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:y}=e,m=n.mul(y,Zm),{px:b,py:w,pz:x}=this;let N=n.ZERO,H=n.ZERO,z=n.ZERO,G=n.mul(b,b),F=n.mul(w,w),U=n.mul(x,x),V=n.mul(b,w);return V=n.add(V,V),z=n.mul(b,x),z=n.add(z,z),N=n.mul(p,z),H=n.mul(m,U),H=n.add(N,H),N=n.sub(F,H),H=n.add(F,H),H=n.mul(N,H),N=n.mul(V,N),z=n.mul(m,z),U=n.mul(p,U),V=n.sub(G,U),V=n.mul(p,V),V=n.add(V,z),z=n.add(G,G),G=n.add(z,G),G=n.add(G,U),G=n.mul(G,V),H=n.add(H,G),U=n.mul(w,x),U=n.add(U,U),G=n.mul(U,V),N=n.sub(N,G),z=n.mul(U,F),z=n.add(z,z),z=n.add(z,z),new f(N,H,z)}add(p){u(p);const{px:y,py:m,pz:b}=this,{px:w,py:x,pz:N}=p;let H=n.ZERO,z=n.ZERO,G=n.ZERO;const F=e.a,U=n.mul(e.b,Zm);let V=n.mul(y,w),L=n.mul(m,x),B=n.mul(b,N),M=n.add(y,m),_=n.add(w,x);M=n.mul(M,_),_=n.add(V,L),M=n.sub(M,_),_=n.add(y,b);let R=n.add(w,N);return _=n.mul(_,R),R=n.add(V,B),_=n.sub(_,R),R=n.add(m,b),H=n.add(x,N),R=n.mul(R,H),H=n.add(L,B),R=n.sub(R,H),G=n.mul(F,_),H=n.mul(U,B),G=n.add(H,G),H=n.sub(L,G),G=n.add(L,G),z=n.mul(H,G),L=n.add(V,V),L=n.add(L,V),B=n.mul(F,B),_=n.mul(U,_),L=n.add(L,B),B=n.sub(V,B),B=n.mul(F,B),_=n.add(_,B),V=n.mul(L,_),z=n.add(z,V),V=n.mul(R,_),H=n.mul(M,H),H=n.sub(H,V),V=n.mul(M,L),G=n.mul(R,G),G=n.add(G,V),new f(H,z,G)}subtract(p){return this.add(p.negate())}is0(){return this.equals(f.ZERO)}wNAF(p){return h.wNAFCached(this,l,p,y=>{const m=n.invertBatch(y.map(b=>b.pz));return y.map((b,w)=>b.toAffine(m[w])).map(f.fromAffine)})}multiplyUnsafe(p){const y=f.ZERO;if(p===ci)return y;if(a(p),p===Jn)return this;const{endo:m}=e;if(!m)return h.unsafeLadder(this,p);let{k1neg:b,k1:w,k2neg:x,k2:N}=m.splitScalar(p),H=y,z=y,G=this;for(;w>ci||N>ci;)w&Jn&&(H=H.add(G)),N&Jn&&(z=z.add(G)),G=G.double(),w>>=Jn,N>>=Jn;return b&&(H=H.negate()),x&&(z=z.negate()),z=new f(n.mul(z.px,m.beta),z.py,z.pz),H.add(z)}multiply(p){a(p);let y=p,m,b;const{endo:w}=e;if(w){const{k1neg:x,k1:N,k2neg:H,k2:z}=w.splitScalar(y);let{p:G,f:F}=this.wNAF(N),{p:U,f:V}=this.wNAF(z);G=h.constTimeNegate(x,G),U=h.constTimeNegate(H,U),U=new f(n.mul(U.px,w.beta),U.py,U.pz),m=G.add(U),b=F.add(V)}else{const{p:x,f:N}=this.wNAF(y);m=x,b=N}return f.normalizeZ([m,b])[0]}multiplyAndAddUnsafe(p,y,m){const b=f.BASE,w=(N,H)=>H===ci||H===Jn||!N.equals(b)?N.multiplyUnsafe(H):N.multiply(H),x=w(this,y).add(w(p,m));return x.is0()?void 0:x}toAffine(p){const{px:y,py:m,pz:b}=this,w=this.is0();p==null&&(p=w?n.ONE:n.inv(b));const x=n.mul(y,p),N=n.mul(m,p),H=n.mul(b,p);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(H,n.ONE))throw new Error("invZ was invalid");return{x,y:N}}isTorsionFree(){const{h:p,isTorsionFree:y}=e;if(p===Jn)return!0;if(y)return y(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:y}=e;return p===Jn?this:y?y(f,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),r(f,this,p)}toHex(p=!0){return ra(this.toRawBytes(p))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,h=CT(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function IT(t){const e=ME(t);return Gc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function RT(t){const e=IT(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(_){return ci<_&&_<n.ORDER}function a(_){return _n(_,r)}function c(_){return Zh(_,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=TT({...e,toBytes(_,R,j){const v=R.toAffine(),S=n.toBytes(v.x),C=mc;return j?C(Uint8Array.from([R.hasEvenY()?2:3]),S):C(Uint8Array.from([4]),S,n.toBytes(v.y))},fromBytes(_){const R=_.length,j=_[0],v=_.subarray(1);if(R===i&&(j===2||j===3)){const S=Gs(v);if(!o(S))throw new Error("Point is not on curve");const C=f(S);let P=n.sqrt(C);const A=(P&Jn)===Jn;return(j&1)===1!==A&&(P=n.neg(P)),{x:S,y:P}}else if(R===s&&j===4){const S=n.fromBytes(v.subarray(0,n.BYTES)),C=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:S,y:C}}else throw new Error(`Point of length ${R} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=_=>ra(sa(_,e.nByteLength));function g(_){const R=r>>Jn;return _>R}function p(_){return g(_)?a(-_):_}const y=(_,R,j)=>Gs(_.slice(R,j));class m{constructor(R,j,v){this.r=R,this.s=j,this.recovery=v,this.assertValidity()}static fromCompact(R){const j=e.nByteLength;return R=ar("compactSignature",R,j*2),new m(y(R,0,j),y(R,j,2*j))}static fromDER(R){const{r:j,s:v}=Us.toSig(ar("DER",R));return new m(j,v)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new m(this.r,this.s,R)}recoverPublicKey(R){const{r:j,s:v,recovery:S}=this,C=z(ar("msgHash",R));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const P=S===2||S===3?j+e.n:j;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const A=(S&1)===0?"02":"03",E=l.fromHex(A+h(P)),k=c(P),I=a(-C*k),D=a(v*k),T=l.BASE.multiplyAndAddUnsafe(E,I,D);if(!T)throw new Error("point at infinify");return T.assertValidity(),T}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ia(this.toDERHex())}toDERHex(){return Us.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ia(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const b={isValidPrivateKey(_){try{return u(_),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const _=NE(e.n);return _T(e.randomBytes(_),e.n)},precompute(_=8,R=l.BASE){return R._setWindowSize(_),R.multiply(BigInt(3)),R}};function w(_,R=!0){return l.fromPrivateKey(_).toRawBytes(R)}function x(_){const R=_ instanceof Uint8Array,j=typeof _=="string",v=(R||j)&&_.length;return R?v===i||v===s:j?v===2*i||v===2*s:_ instanceof l}function N(_,R,j=!0){if(x(_))throw new Error("first arg must be private key");if(!x(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(_)).toRawBytes(j)}const H=e.bits2int||function(_){const R=Gs(_),j=_.length*8-e.nBitLength;return j>0?R>>BigInt(j):R},z=e.bits2int_modN||function(_){return a(H(_))},G=Pg(e.nBitLength);function F(_){if(typeof _!="bigint")throw new Error("bigint expected");if(!(ci<=_&&_<G))throw new Error(`bigint expected < 2^${e.nBitLength}`);return sa(_,e.nByteLength)}function U(_,R,j=V){if(["recovered","canonical"].some(q=>q in j))throw new Error("sign() legacy options not supported");const{hash:v,randomBytes:S}=e;let{lowS:C,prehash:P,extraEntropy:A}=j;C==null&&(C=!0),_=ar("msgHash",_),P&&(_=ar("prehashed msgHash",v(_)));const E=z(_),k=u(R),I=[F(k),F(E)];if(A!=null){const q=A===!0?S(n.BYTES):A;I.push(ar("extraEntropy",q))}const D=mc(...I),T=E;function K(q){const Z=H(q);if(!d(Z))return;const oe=c(Z),O=l.BASE.multiply(Z).toAffine(),$=a(O.x);if($===ci)return;const Q=a(oe*a(T+$*k));if(Q===ci)return;let ne=(O.x===$?0:2)|Number(O.y&Jn),J=Q;return C&&g(Q)&&(J=p(Q),ne^=1),new m($,J,ne)}return{seed:D,k2sig:K}}const V={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function B(_,R,j=V){const{seed:v,k2sig:S}=U(_,R,j),C=e;return IE(C.hash.outputLen,C.nByteLength,C.hmac)(v,S)}l.BASE._setWindowSize(8);function M(_,R,j,v=L){const S=_;if(R=ar("msgHash",R),j=ar("publicKey",j),"strict"in v)throw new Error("options.strict was renamed to lowS");const{lowS:C,prehash:P}=v;let A,E;try{if(typeof S=="string"||S instanceof Uint8Array)try{A=m.fromDER(S)}catch(O){if(!(O instanceof Us.Err))throw O;A=m.fromCompact(S)}else if(typeof S=="object"&&typeof S.r=="bigint"&&typeof S.s=="bigint"){const{r:O,s:$}=S;A=new m(O,$)}else throw new Error("PARSE");E=l.fromHex(j)}catch(O){if(O.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(C&&A.hasHighS())return!1;P&&(R=e.hash(R));const{r:k,s:I}=A,D=z(R),T=c(I),K=a(D*T),q=a(k*T),Z=l.BASE.multiplyAndAddUnsafe(E,K,q)?.toAffine();return Z?a(Z.x)===k:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:N,sign:B,verify:M,ProjectivePoint:l,Signature:m,utils:b}}function OT(t){return{hash:t,hmac:(e,...n)=>uE(t,e,wP(...n)),randomBytes:bP}}function NT(t,e){const n=r=>RT({...t,...OT(r)});return Object.freeze({...n(e),create:n})}const LE=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Xm=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MT=BigInt(1),Xh=BigInt(2),ey=(t,e)=>(t+e/Xh)/e;function LT(t){const e=LE,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,f=Vn(u,n,e)*u%e,d=Vn(f,n,e)*u%e,h=Vn(d,Xh,e)*l%e,g=Vn(h,i,e)*h%e,p=Vn(g,s,e)*g%e,y=Vn(p,a,e)*p%e,m=Vn(y,c,e)*y%e,b=Vn(m,a,e)*p%e,w=Vn(b,n,e)*u%e,x=Vn(w,o,e)*g%e,N=Vn(x,r,e)*l%e,H=Vn(N,Xh,e);if(!ep.eql(ep.sqr(H),t))throw new Error("Cannot find square root");return H}const ep=AT(LE,void 0,void 0,{sqrt:LT}),Fi=NT({a:BigInt(0),b:BigInt(7),Fp:ep,n:Xm,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Xm,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-MT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=ey(s*t,e),c=ey(-r*t,e);let l=_n(t-a*n-c*i,e),u=_n(-a*r-c*s,e);const f=l>o,d=u>o;if(f&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},dE);BigInt(0);Fi.ProjectivePoint;const yc="0x0000000000000000000000000000000000000000",ty="0x0000000000000000000000000000000000000000000000000000000000000000",ny=BigInt(0),ry=BigInt(1),iy=BigInt(2),sy=BigInt(27),oy=BigInt(28),fl=BigInt(35),ho={};function ay(t){return Ei(It(t),32)}class vt{#e;#t;#n;#r;get r(){return this.#e}set r(e){te(Ko(e)===32,"invalid r","value",e),this.#e=be(e)}get s(){return te(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){te(Ko(e)===32,"invalid s","value",e),this.#t=be(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#n}set v(e){const n=Be(e,"value");te(n===27||n===28,"invalid v","v",e),this.#n=n}get networkV(){return this.#r}get legacyChainId(){const e=this.networkV;return e==null?null:vt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Fe(this.s);return this.yParity&&(e[0]|=128),be(e)}get compactSerialized(){return Et([this.r,this.yParityAndS])}get serialized(){return Et([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,n,r,i){Vc(e,ho,"Signature"),this.#e=n,this.#t=r,this.#n=i,this.#r=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new vt(ho,this.r,this._s,this.v);return this.networkV&&(e.#r=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=_e(e,"v");return n==sy||n==oy?ny:(te(n>=fl,"invalid EIP-155 v","v",e),(n-fl)/iy)}static getChainIdV(e,n){return _e(e)*iy+BigInt(35+n-27)}static getNormalizedV(e){const n=_e(e);return n===ny||n===sy?27:n===ry||n===oy?28:(te(n>=fl,"invalid v","v",e),n&ry?27:28)}static from(e){function n(l,u){te(l,u,"signature",e)}if(e==null)return new vt(ho,ty,ty,27);if(typeof e=="string"){const l=Fe(e,"signature");if(l.length===64){const u=be(l.slice(0,32)),f=l.slice(32,64),d=f[0]&128?28:27;return f[0]&=127,new vt(ho,u,be(f),d)}if(l.length===65){const u=be(l.slice(0,32)),f=be(l.slice(32,64)),d=vt.getNormalizedV(l[64]);return new vt(ho,u,f,d)}n(!1,"invalid raw signature length")}if(e instanceof vt)return e.clone();const r=e.r;n(r!=null,"missing r");const i=ay(r),s=(function(l,u){if(l!=null)return ay(l);if(u!=null){n(at(u,32),"invalid yParityAndS");const f=Fe(u);return f[0]&=127,be(f)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(l,u,f){if(l!=null){const d=_e(l);return{networkV:d>=fl?d:void 0,v:vt.getNormalizedV(d)}}if(u!=null)return n(at(u,32),"invalid yParityAndS"),{v:Fe(u)[0]&128?28:27};if(f!=null){switch(Be(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),c=new vt(ho,i,s,a);return o&&(c.#r=o),n(e.yParity==null||Be(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}class li{#e;constructor(e){te(Ko(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=be(e)}get privateKey(){return this.#e}get publicKey(){return li.computePublicKey(this.#e)}get compressedPublicKey(){return li.computePublicKey(this.#e,!0)}sign(e){te(Ko(e)===32,"invalid digest length","digest",e);const n=Fi.sign(hn(e),hn(this.#e),{lowS:!0});return vt.from({r:ds(n.r,32),s:ds(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=li.computePublicKey(e);return be(Fi.getSharedSecret(hn(this.#e),Fe(n),!1))}static computePublicKey(e,n){let r=Fe(e,"key");if(r.length===32){const s=Fi.getPublicKey(r,!!n);return be(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Fi.ProjectivePoint.fromHex(r);return be(i.toRawBytes(n))}static recoverPublicKey(e,n){te(Ko(e)===32,"invalid digest length","digest",e);const r=vt.from(n);let i=Fi.Signature.fromCompact(hn(Et([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(hn(e));return te(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=Fi.ProjectivePoint.fromHex(li.computePublicKey(e).substring(2)),s=Fi.ProjectivePoint.fromHex(li.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}}const BT=BigInt(0),DT=BigInt(36);function cy(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=Fe(kt(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Tg={};for(let t=0;t<10;t++)Tg[String(t)]=String(t);for(let t=0;t<26;t++)Tg[String.fromCharCode(65+t)]=String(10+t);const ly=15;function UT(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>Tg[r]).join("");for(;e.length>=ly;){let r=e.substring(0,ly);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const FT=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function $T(t){t=t.toLowerCase();let e=BT;for(let n=0;n<t.length;n++)e=e*DT+FT[t[n]];return e}function qe(t){if(te(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=cy(t);return te(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){te(t.substring(2,4)===UT(t),"bad icap checksum","address",t);let e=$T(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return cy("0x"+e)}te(!1,"invalid address","address",t)}function HT(t){const e=qe(t.from);let r=_e(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,qe(yt(kt(hs([e,r])),12))}function BE(t){return t&&typeof t.getAddress=="function"}async function _d(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(me(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),te(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),qe(n)}function gn(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?qe(t):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),_d(t,e.resolveName(t)));if(BE(t))return _d(t,t.getAddress());if(t&&typeof t.then=="function")return _d(t,t);te(!1,"unsupported addressable value","target",t)}const Xr={};function Ae(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new bt(Xr,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function ze(t,e){return new bt(Xr,`bytes${e||""}`,t,{size:e})}const uy=Symbol.for("_ethers_typed");class bt{type;value;#e;_typedSymbol;constructor(e,n,r,i){i==null&&(i=null),Vc(Xr,e,"Typed"),Pe(this,{_typedSymbol:uy,type:n,value:r}),this.#e=i,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,n){return new bt(Xr,e,n)}static uint8(e){return Ae(e,8)}static uint16(e){return Ae(e,16)}static uint24(e){return Ae(e,24)}static uint32(e){return Ae(e,32)}static uint40(e){return Ae(e,40)}static uint48(e){return Ae(e,48)}static uint56(e){return Ae(e,56)}static uint64(e){return Ae(e,64)}static uint72(e){return Ae(e,72)}static uint80(e){return Ae(e,80)}static uint88(e){return Ae(e,88)}static uint96(e){return Ae(e,96)}static uint104(e){return Ae(e,104)}static uint112(e){return Ae(e,112)}static uint120(e){return Ae(e,120)}static uint128(e){return Ae(e,128)}static uint136(e){return Ae(e,136)}static uint144(e){return Ae(e,144)}static uint152(e){return Ae(e,152)}static uint160(e){return Ae(e,160)}static uint168(e){return Ae(e,168)}static uint176(e){return Ae(e,176)}static uint184(e){return Ae(e,184)}static uint192(e){return Ae(e,192)}static uint200(e){return Ae(e,200)}static uint208(e){return Ae(e,208)}static uint216(e){return Ae(e,216)}static uint224(e){return Ae(e,224)}static uint232(e){return Ae(e,232)}static uint240(e){return Ae(e,240)}static uint248(e){return Ae(e,248)}static uint256(e){return Ae(e,256)}static uint(e){return Ae(e,256)}static int8(e){return Ae(e,-8)}static int16(e){return Ae(e,-16)}static int24(e){return Ae(e,-24)}static int32(e){return Ae(e,-32)}static int40(e){return Ae(e,-40)}static int48(e){return Ae(e,-48)}static int56(e){return Ae(e,-56)}static int64(e){return Ae(e,-64)}static int72(e){return Ae(e,-72)}static int80(e){return Ae(e,-80)}static int88(e){return Ae(e,-88)}static int96(e){return Ae(e,-96)}static int104(e){return Ae(e,-104)}static int112(e){return Ae(e,-112)}static int120(e){return Ae(e,-120)}static int128(e){return Ae(e,-128)}static int136(e){return Ae(e,-136)}static int144(e){return Ae(e,-144)}static int152(e){return Ae(e,-152)}static int160(e){return Ae(e,-160)}static int168(e){return Ae(e,-168)}static int176(e){return Ae(e,-176)}static int184(e){return Ae(e,-184)}static int192(e){return Ae(e,-192)}static int200(e){return Ae(e,-200)}static int208(e){return Ae(e,-208)}static int216(e){return Ae(e,-216)}static int224(e){return Ae(e,-224)}static int232(e){return Ae(e,-232)}static int240(e){return Ae(e,-240)}static int248(e){return Ae(e,-248)}static int256(e){return Ae(e,-256)}static int(e){return Ae(e,-256)}static bytes1(e){return ze(e,1)}static bytes2(e){return ze(e,2)}static bytes3(e){return ze(e,3)}static bytes4(e){return ze(e,4)}static bytes5(e){return ze(e,5)}static bytes6(e){return ze(e,6)}static bytes7(e){return ze(e,7)}static bytes8(e){return ze(e,8)}static bytes9(e){return ze(e,9)}static bytes10(e){return ze(e,10)}static bytes11(e){return ze(e,11)}static bytes12(e){return ze(e,12)}static bytes13(e){return ze(e,13)}static bytes14(e){return ze(e,14)}static bytes15(e){return ze(e,15)}static bytes16(e){return ze(e,16)}static bytes17(e){return ze(e,17)}static bytes18(e){return ze(e,18)}static bytes19(e){return ze(e,19)}static bytes20(e){return ze(e,20)}static bytes21(e){return ze(e,21)}static bytes22(e){return ze(e,22)}static bytes23(e){return ze(e,23)}static bytes24(e){return ze(e,24)}static bytes25(e){return ze(e,25)}static bytes26(e){return ze(e,26)}static bytes27(e){return ze(e,27)}static bytes28(e){return ze(e,28)}static bytes29(e){return ze(e,29)}static bytes30(e){return ze(e,30)}static bytes31(e){return ze(e,31)}static bytes32(e){return ze(e,32)}static address(e){return new bt(Xr,"address",e)}static bool(e){return new bt(Xr,"bool",!!e)}static bytes(e){return new bt(Xr,"bytes",e)}static string(e){return new bt(Xr,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new bt(Xr,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===uy}static dereference(e,n){if(bt.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}}class KT extends xi{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=bt.dereference(n,"string");try{r=qe(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return qe(ds(e.readValue(),20))}}class jT extends xi{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function DE(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return me(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),me(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else te(!1,"invalid tuple value","tuple",n);te(e.length===r.length,"types/value length mismatch","tuple",n);let i=new Qh,s=new Qh,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let f=s.length;c.encode(s,u);let d=i.writeUpdatableValue();o.push(h=>{d(h+f)})}else c.encode(i,u)}),o.forEach(c=>{c(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function UE(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),c=i.subReader(a);try{o=s.decode(c)}catch(l){if(Vt(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(Vt(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),ui.fromItems(n,r)}class VT extends xi{coder;length;constructor(e,n,r){const i=e.type+"["+(n>=0?n:"")+"]",s=n===-1||e.dynamic;super("array",i,r,s),Pe(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let r=0;r<this.length;r++)n.push(e);return n}encode(e,n){const r=bt.dereference(n,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),W1(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let o=0;o<r.length;o++)s.push(this.coder);return DE(e,s,r)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),me(n*pn<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*pn,length:e.dataLength}));let r=[];for(let i=0;i<n;i++)r.push(new jT(this.coder));return UE(e,r)}}class zT extends xi{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=bt.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class FE extends xi{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=hn(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class GT extends FE{constructor(e){super("bytes",e)}decode(e){return be(super.decode(e))}}class qT extends xi{size;constructor(e,n){let r="bytes"+String(e);super(r,r,n,!1),Pe(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let r=hn(bt.dereference(n,this.type));return r.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(r)}decode(e){return be(e.readBytes(this.size))}}const WT=new Uint8Array([]);class QT extends xi{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(WT)}decode(e){return e.readBytes(0),null}}const JT=BigInt(0),YT=BigInt(1),ZT=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class XT extends xi{size;signed;constructor(e,n,r){const i=(n?"int":"uint")+e*8;super(i,i,r,!1),Pe(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let r=_e(bt.dereference(n,this.type)),i=Ds(ZT,pn*8);if(this.signed){let s=Ds(i,this.size*8-1);(r>s||r<-(s+YT))&&this._throwError("value out-of-bounds",n),r=Y1(r,8*pn)}else(r<JT||r>Ds(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(r)}decode(e){let n=Ds(e.readValue(),this.size*8);return this.signed&&(n=Tu(n,this.size*8)),n}}class eI extends FE{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,mi(bt.dereference(n,"string")))}decode(e){return Iu(super.decode(e))}}class dl extends xi{coders;constructor(e,n){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,n,r),Pe(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const n=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||n[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,n){const r=bt.dereference(n,"tuple");return DE(e,this.coders,r)}decode(e){return UE(e,this.coders)}}function Sd(t,e){return{address:qe(t),storageKeys:e.map((n,r)=>(te(at(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function no(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(te(n.length===2,"invalid slot set",`value[${r}]`,n),Sd(n[0],n[1])):(te(n!=null&&typeof n=="object","invalid address-slot set","value",t),Sd(n.address,n.storageKeys)));te(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return Sd(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function $E(t){return{address:qe(t.address),nonce:_e(t.nonce!=null?t.nonce:0),chainId:_e(t.chainId!=null?t.chainId:0),signature:vt.from(t.signature)}}function tI(t){let e;return typeof t=="string"?e=li.computePublicKey(t,!1):e=t.publicKey,qe(kt("0x"+e.substring(4)).substring(26))}function nI(t,e){return tI(li.recoverPublicKey(t,e))}const Lt=BigInt(0),rI=BigInt(2),iI=BigInt(27),sI=BigInt(28),oI=BigInt(35),aI=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Cd=4096*32;function cI(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Fe(t.blobToKzgCommitment(be(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Fe(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Fe(t.blobToKZGCommitment(be(r)));te(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Fe(t.computeBlobProof(be(r),be(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Fe(t.computeBlobKZGProof(be(r),be(i)));te(!1,"unsupported KZG library","kzg",t)}}}function fy(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=ga(e).substring(4),"0x"+n}function ma(t){return t==="0x"?null:qe(t)}function Bf(t,e){try{return no(t)}catch(n){te(!1,n.message,e,t)}}function lI(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:ma(i[1]),nonce:et(i[2],"nonce"),chainId:et(i[0],"chainId"),signature:vt.from({yParity:ro(i[3],"yParity"),r:Ei(i[4],32),s:Ei(i[5],32)})})}return n}catch(n){te(!1,n.message,e,t)}}function ro(t,e){return t==="0x"?0:Be(t,e)}function et(t,e){if(t==="0x")return Lt;const n=_e(t,e);return te(n<=aI,"value exceeds uint size",e,n),n}function Ke(t,e){const n=_e(t,"value"),r=It(n);return te(r.length<=32,"value too large",`tx.${e}`,n),r}function Df(t){return no(t).map(e=>[e.address,e.storageKeys])}function uI(t){return t.map(e=>[Ke(e.chainId,"chainId"),e.address,Ke(e.nonce,"nonce"),Ke(e.signature.yParity,"yParity"),It(e.signature.r),It(e.signature.s)])}function fI(t,e){te(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)te(at(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function dI(t){const e=zc(t);te(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:ro(e[0],"nonce"),gasPrice:et(e[1],"gasPrice"),gasLimit:et(e[2],"gasLimit"),to:ma(e[3]),value:et(e[4],"value"),data:be(e[5]),chainId:Lt};if(e.length===6)return n;const r=et(e[6],"v"),i=et(e[7],"r"),s=et(e[8],"s");if(i===Lt&&s===Lt)n.chainId=r;else{let o=(r-oI)/rI;o<Lt&&(o=Lt),n.chainId=o,te(o!==Lt||r===iI||r===sI,"non-canonical legacy v","v",e[6]),n.signature=vt.from({r:Ei(e[7],32),s:Ei(e[8],32),v:r})}return n}function hI(t,e){const n=[Ke(t.nonce,"nonce"),Ke(t.gasPrice||0,"gasPrice"),Ke(t.gasLimit,"gasLimit"),t.to||"0x",Ke(t.value,"value"),t.data];let r=Lt;if(t.chainId!=Lt)r=_e(t.chainId,"tx.chainId"),te(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Lt&&(n.push(It(r)),n.push("0x"),n.push("0x")),hs(n);let i=BigInt(27+e.yParity);return r!==Lt?i=vt.getChainIdV(r,e.v):BigInt(e.v)!==i&&te(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(It(i)),n.push(It(e.r)),n.push(It(e.s)),hs(n)}function Uf(t,e){let n;try{if(n=ro(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{te(!1,"invalid yParity","yParity",e[0])}const r=Ei(e[1],32),i=Ei(e[2],32),s=vt.from({r,s:i,yParity:n});t.signature=s}function pI(t){const e=zc(Fe(t).slice(1));te(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",be(t));const n={type:2,chainId:et(e[0],"chainId"),nonce:ro(e[1],"nonce"),maxPriorityFeePerGas:et(e[2],"maxPriorityFeePerGas"),maxFeePerGas:et(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(e[4],"gasLimit"),to:ma(e[5]),value:et(e[6],"value"),data:be(e[7]),accessList:Bf(e[8],"accessList")};return e.length===9||Uf(n,e.slice(9)),n}function gI(t,e){const n=[Ke(t.chainId,"chainId"),Ke(t.nonce,"nonce"),Ke(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ke(t.maxFeePerGas||0,"maxFeePerGas"),Ke(t.gasLimit,"gasLimit"),t.to||"0x",Ke(t.value,"value"),t.data,Df(t.accessList||[])];return e&&(n.push(Ke(e.yParity,"yParity")),n.push(It(e.r)),n.push(It(e.s))),Et(["0x02",hs(n)])}function mI(t){const e=zc(Fe(t).slice(1));te(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",be(t));const n={type:1,chainId:et(e[0],"chainId"),nonce:ro(e[1],"nonce"),gasPrice:et(e[2],"gasPrice"),gasLimit:et(e[3],"gasLimit"),to:ma(e[4]),value:et(e[5],"value"),data:be(e[6]),accessList:Bf(e[7],"accessList")};return e.length===8||Uf(n,e.slice(8)),n}function yI(t,e){const n=[Ke(t.chainId,"chainId"),Ke(t.nonce,"nonce"),Ke(t.gasPrice||0,"gasPrice"),Ke(t.gasLimit,"gasLimit"),t.to||"0x",Ke(t.value,"value"),t.data,Df(t.accessList||[])];return e&&(n.push(Ke(e.yParity,"recoveryParam")),n.push(It(e.r)),n.push(It(e.s))),Et(["0x01",hs(n)])}function vI(t){let e=zc(Fe(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const s=e[1],o=e[2],a=e[3];te(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),te(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),te(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),te(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),te(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:s[c],commitment:o[c],proof:a[c]});e=e[0]}te(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",be(t));const i={type:3,chainId:et(e[0],"chainId"),nonce:ro(e[1],"nonce"),maxPriorityFeePerGas:et(e[2],"maxPriorityFeePerGas"),maxFeePerGas:et(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(e[4],"gasLimit"),to:ma(e[5]),value:et(e[6],"value"),data:be(e[7]),accessList:Bf(e[8],"accessList"),maxFeePerBlobGas:et(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),te(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),te(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let s=0;s<i.blobVersionedHashes.length;s++)te(at(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",t);return e.length===11||Uf(i,e.slice(11)),i}function wI(t,e,n){const r=[Ke(t.chainId,"chainId"),Ke(t.nonce,"nonce"),Ke(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ke(t.maxFeePerGas||0,"maxFeePerGas"),Ke(t.gasLimit,"gasLimit"),t.to||yc,Ke(t.value,"value"),t.data,Df(t.accessList||[]),Ke(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),fI(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Ke(e.yParity,"yParity")),r.push(It(e.r)),r.push(It(e.s)),n)?Et(["0x03",hs([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):Et(["0x03",hs(r)])}function bI(t){const e=zc(Fe(t).slice(1));te(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",be(t));const n={type:4,chainId:et(e[0],"chainId"),nonce:ro(e[1],"nonce"),maxPriorityFeePerGas:et(e[2],"maxPriorityFeePerGas"),maxFeePerGas:et(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(e[4],"gasLimit"),to:ma(e[5]),value:et(e[6],"value"),data:be(e[7]),accessList:Bf(e[8],"accessList"),authorizationList:lI(e[9],"authorizationList")};return e.length===10||Uf(n,e.slice(10)),n}function EI(t,e){const n=[Ke(t.chainId,"chainId"),Ke(t.nonce,"nonce"),Ke(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ke(t.maxFeePerGas||0,"maxFeePerGas"),Ke(t.gasLimit,"gasLimit"),t.to||"0x",Ke(t.value,"value"),t.data,Df(t.accessList||[]),uI(t.authorizationList||[])];return e&&(n.push(Ke(e.yParity,"yParity")),n.push(It(e.r)),n.push(It(e.s))),Et(["0x04",hs(n)])}class cr{#e;#t;#n;#r;#i;#o;#s;#a;#f;#l;#p;#g;#c;#u;#d;#h;#y;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:te(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?yc:e}set to(e){this.#t=e==null?null:qe(e)}get nonce(){return this.#r}set nonce(e){this.#r=Be(e,"value")}get gasLimit(){return this.#i}set gasLimit(e){this.#i=_e(e)}get gasPrice(){const e=this.#o;return e==null&&(this.type===0||this.type===1)?Lt:e}set gasPrice(e){this.#o=e==null?null:_e(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#s;return e??(this.type===2||this.type===3?Lt:null)}set maxPriorityFeePerGas(e){this.#s=e==null?null:_e(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?Lt:null)}set maxFeePerGas(e){this.#a=e==null?null:_e(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=be(e)}get value(){return this.#f}set value(e){this.#f=_e(e,"value")}get chainId(){return this.#l}set chainId(e){this.#l=_e(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:vt.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:no(e)}get authorizationList(){const e=this.#y||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#y=e==null?null:e.map(n=>$E(n))}get maxFeePerBlobGas(){const e=this.#c;return e==null&&this.type===3?Lt:e}set maxFeePerBlobGas(e){this.#c=e==null?null:_e(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){te(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)te(at(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}this.#u=e}get blobs(){return this.#h==null?null:this.#h.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#h=null;return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(wg(s)){me(this.#d,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Fe(s);if(te(o.length<=Cd,"blob is too large",`blobs[${i}]`,s),o.length!==Cd){const l=new Uint8Array(Cd);l.set(o),o=l}const a=this.#d.blobToKzgCommitment(o),c=be(this.#d.computeBlobKzgProof(o,a));n.push({data:be(o),commitment:be(a),proof:c}),r.push(fy(1,a))}else{const o=be(s.commitment);n.push({data:be(s.data),commitment:o,proof:be(s.proof)}),r.push(fy(1,o))}}this.#h=n,this.#u=r}get kzg(){return this.#d}set kzg(e){e==null?this.#d=null:this.#d=cI(e)}constructor(){this.#e=null,this.#t=null,this.#r=0,this.#i=Lt,this.#o=null,this.#s=null,this.#a=null,this.#n="0x",this.#f=Lt,this.#l=Lt,this.#p=null,this.#g=null,this.#c=null,this.#u=null,this.#d=null,this.#h=null,this.#y=null}get hash(){return this.signature==null?null:kt(this.#m(!0,!1))}get unsignedHash(){return kt(this.unsignedSerialized)}get from(){return this.signature==null?null:nI(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:li.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#m(e,n){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return hI(this,r);case 1:return yI(this,r);case 2:return gI(this,r);case 3:return wI(this,r,n?this.blobs:null);case 4:return EI(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#m(!0,!0)}get unsignedSerialized(){return this.#m(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=this.#c!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return cr.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new cr;if(typeof e=="string"){const r=Fe(e);if(r[0]>=127)return cr.from(dI(r));switch(r[0]){case 1:return cr.from(mI(r));case 2:return cr.from(pI(r));case 3:return cr.from(vI(r));case 4:return cr.from(bI(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new cr;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=vt.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(te(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),te(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(te(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),te(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}}function Qs(t){return kt(mi(t))}var AI="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const dy=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),hy=4;function _I(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let N=1;N<r;N++)s.push(i+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const f=31,d=2**f,h=d>>>1,g=h>>1,p=d-1;let y=0;for(let N=0;N<f;N++)y=y<<1|u();let m=[],b=0,w=d;for(;;){let N=Math.floor(((y-b+1)*i-1)/w),H=0,z=r;for(;z-H>1;){let U=H+z>>>1;N<s[U]?z=U:H=U}if(H==0)break;m.push(H);let G=b+Math.floor(w*s[H]/i),F=b+Math.floor(w*s[H+1]/i)-1;for(;((G^F)&h)==0;)y=y<<1&p|u(),G=G<<1&p,F=F<<1&p|1;for(;G&~F&g;)y=y&h|y<<1&p>>>1|u(),G=G<<1^h,F=(F^h)<<1|h|1;b=G,w=1+F-G}let x=r-4;return m.map(N=>{switch(N-x){case 3:return x+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return x+256+(t[a++]<<8|t[a++]);case 1:return x+t[a++];default:return N-1}})}function SI(t){let e=0;return()=>t[e++]}function HE(t){return SI(_I(CI(t)))}function CI(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function xI(t){return t&1?~t>>1:t>>1}function kI(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=xI(e());return n}function vc(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function KE(t){return wc(()=>{let e=vc(t);if(e.length)return e})}function jE(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(PI(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(TI(n,t))}return e.flat()}function wc(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function VE(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)kI(t,n).forEach((s,o)=>r[o].push(s));return r}function PI(t,e){let n=1+e(),r=e(),i=wc(e);return VE(i.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(i[a]).fill().map((u,f)=>{let d=f*r;return[c+f*n,l.map(h=>h+d)]})})}function TI(t,e){let n=1+e();return VE(n,1+t,e).map(i=>[i[0],i.slice(1)])}function II(t){let e=[],n=vc(t);return i(r([]),[]),e;function r(s){let o=t(),a=wc(()=>{let c=vc(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,c){if(!(s&4&&c===a[a.length-1])){s&2&&(c=a[a.length-1]),s&1&&e.push(a);for(let l of o)for(let u of l.Q)i(l,[...a,u],c)}}}function RI(t){return t.toString(16).toUpperCase().padStart(2,"0")}function zE(t){return`{${RI(t)}}`}function OI(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function oa(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function NI(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var MI="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const bc=44032,Ou=4352,Nu=4449,Mu=4519,GE=19,qE=21,aa=28,Lu=qE*aa,LI=GE*Lu,BI=bc+LI,DI=Ou+GE,UI=Nu+qE,FI=Mu+aa;function La(t){return t>>24&255}function WE(t){return t&16777215}let tp,py,np,Ql;function $I(){let t=HE(MI);tp=new Map(KE(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),py=new Set(vc(t)),np=new Map,Ql=new Map;for(let[e,n]of jE(t)){if(!py.has(e)&&n.length==2){let[r,i]=n,s=Ql.get(r);s||(s=new Map,Ql.set(r,s)),s.set(i,e)}np.set(e,n.reverse())}}function QE(t){return t>=bc&&t<BI}function HI(t,e){if(t>=Ou&&t<DI&&e>=Nu&&e<UI)return bc+(t-Ou)*Lu+(e-Nu)*aa;if(QE(t)&&e>Mu&&e<FI&&(t-bc)%aa==0)return t+(e-Mu);{let n=Ql.get(t);return n&&(n=n.get(e),n)?n:-1}}function JE(t){tp||$I();let e=[],n=[],r=!1;function i(s){let o=tp.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(QE(s)){let o=s-bc,a=o/Lu|0,c=o%Lu/aa|0,l=o%aa;i(Ou+a),i(Nu+c),l>0&&i(Mu+l)}else{let o=np.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=La(e[0]);for(let o=1;o<e.length;o++){let a=La(e[o]);if(a==0||s<=a){s=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(s=La(e[--c]),s<=a))break}s=La(e[o])}}return e}function KI(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=La(s),a=WE(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let c=HI(r,a);c>=0?r=c:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function YE(t){return JE(t).map(WE)}function jI(t){return KI(JE(t))}const gy=45,ZE=".",XE=65039,eA=1,Bu=t=>Array.from(t);function Ec(t,e){return t.P.has(e)||t.Q.has(e)}class VI extends Array{get is_emoji(){return!0}}let rp,tA,Fs,ip,nA,Vo,xd,Ao,Ts,my,sp;function Ig(){if(rp)return;let t=HE(AI);const e=()=>vc(t),n=()=>new Set(e()),r=(u,f)=>f.forEach(d=>u.add(d));rp=new Map(jE(t)),tA=n(),Fs=e(),ip=new Set(e().map(u=>Fs[u])),Fs=new Set(Fs),nA=n(),n();let i=KE(t),s=t();const o=()=>{let u=new Set;return e().forEach(f=>r(u,i[f])),r(u,e()),u};Vo=wc(u=>{let f=wc(t).map(d=>d+96);if(f.length){let d=u>=s;f[0]-=32,f=oa(f),d&&(f=`Restricted[${f}]`);let h=o(),g=o(),p=!t();return{N:f,P:h,Q:g,M:p,R:d}}}),xd=n(),Ao=new Map;let a=e().concat(Bu(xd)).sort((u,f)=>u-f);a.forEach((u,f)=>{let d=t(),h=a[f]=d?a[f-d]:{V:[],M:new Map};h.V.push(u),xd.has(u)||Ao.set(u,h)});for(let{V:u,M:f}of new Set(Ao.values())){let d=[];for(let g of u){let p=Vo.filter(m=>Ec(m,g)),y=d.find(({G:m})=>p.some(b=>m.has(b)));y||(y={G:new Set,V:[]},d.push(y)),y.V.push(g),r(y.G,p)}let h=d.flatMap(g=>Bu(g.G));for(let{G:g,V:p}of d){let y=new Set(h.filter(m=>!g.has(m)));for(let m of p)f.set(m,y)}}Ts=new Set;let c=new Set;const l=u=>Ts.has(u)?c.add(u):Ts.add(u);for(let u of Vo){for(let f of u.P)l(f);for(let f of u.Q)l(f)}for(let u of Ts)!Ao.has(u)&&!c.has(u)&&Ao.set(u,eA);r(Ts,YE(Ts)),my=II(t).map(u=>VI.from(u)).sort(NI),sp=new Map;for(let u of my){let f=[sp];for(let d of u){let h=f.map(g=>{let p=g.get(d);return p||(p=new Map,g.set(d,p)),p});d===XE?f.push(...h):f=h}for(let d of f)d.V=u}}function Rg(t){return(rA(t)?"":`${Og(Ff([t]))} `)+zE(t)}function Og(t){return`"${t}"`}function zI(t){if(t.length>=4&&t[2]==gy&&t[3]==gy)throw new Error(`invalid label extension: "${oa(t.slice(0,4))}"`)}function GI(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function qI(t){let e=t[0],n=dy.get(e);if(n)throw Ya(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=dy.get(e);if(o){if(i==s)throw Ya(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw Ya(`trailing ${n}`)}function Ff(t,e=1/0,n=zE){let r=[];WI(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];rA(a)&&(r.push(oa(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(oa(t.slice(i,s))),r.join("")}function WI(t){return Ig(),Fs.has(t)}function rA(t){return Ig(),nA.has(t)}function QI(t){return XI(JI(t,jI,nR))}function JI(t,e,n){if(!t)return[];Ig();let r=0;return t.split(ZE).map(i=>{let s=OI(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=tR(s,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(GI(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(d=>d<128))zI(u),l="ASCII";else{let d=a.flatMap(h=>h.is_emoji?[]:h);if(!d.length)l="Emoji";else{if(Fs.has(u[0]))throw Ya("leading combining mark");for(let p=1;p<c;p++){let y=a[p];if(!y.is_emoji&&Fs.has(y[0]))throw Ya(`emoji + combining mark: "${oa(a[p-1])} + ${Ff([y[0]])}"`)}qI(u);let h=Bu(new Set(d)),[g]=ZI(h);eR(g,d),YI(g,h),l=g.N}}o.type=l}catch(a){o.error=a}return o})}function YI(t,e){let n,r=[];for(let i of e){let s=Ao.get(i);if(s===eA)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):Bu(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>Ec(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function ZI(t){let e=Vo;for(let n of t){let r=e.filter(i=>Ec(i,n));if(!r.length)throw Vo.some(i=>Ec(i,n))?sA(e[0],n):iA(n);if(e=r,r.length==1)break}return e}function XI(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${Og(Ff(e,63))}: ${i}`)}return oa(r)}).join(ZE)}function iA(t){return new Error(`disallowed character: ${Rg(t)}`)}function sA(t,e){let n=Rg(e),r=Vo.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Ya(t){return new Error(`illegal placement: ${t}`)}function eR(t,e){for(let n of e)if(!Ec(t,n))throw sA(t,n);if(t.M){let n=YE(e);for(let r=1,i=n.length;r<i;r++)if(ip.has(n[r])){let s=r+1;for(let o;s<i&&ip.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${Rg(o)}`);if(s-r>hy)throw new Error(`excessive non-spacing marks: ${Og(Ff(n.slice(r-1,s)))} (${s-r}/${hy})`);r=s}}}function tR(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=rR(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(Ts.has(o))i.push(o);else{let a=rp.get(o);if(a)i.push(...a);else if(!tA.has(o))throw iA(o)}}}return i.length&&r.push(e(i)),r}function nR(t){return t.filter(e=>e!=XE)}function rR(t,e){let n=sp,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const oA=new Uint8Array(32);oA.fill(0);function yy(t){return te(t.length!==0,"invalid ENS name; empty component","comp",t),t}function aA(t){const e=mi(iR(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(yy(e.slice(r,i))),r=i+1);return te(r<e.length,"invalid ENS name; empty component","name",t),n.push(yy(e.slice(r))),n}function iR(t){try{if(t.length===0)throw new Error("empty label");return QI(t)}catch(e){te(!1,`invalid ENS name (${e.message})`,"name",t)}}function op(t){te(typeof t=="string","invalid ENS name; not a string","name",t),te(t.length,"invalid ENS name (empty label)","name",t);let e=oA;const n=aA(t);for(;n.length;)e=kt(Et([e,kt(n.pop())]));return be(e)}function sR(t,e){const n=e;return te(n<=255,"DNS encoded label cannot exceed 255","length",n),be(Et(aA(t).map(r=>{te(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const cA=new Uint8Array(32);cA.fill(0);const oR=BigInt(-1),lA=BigInt(0),uA=BigInt(1),aR=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function cR(t){const e=Fe(t),n=e.length%32;return n?Et([e,cA.slice(n)]):be(e)}const lR=ds(uA,32),uR=ds(lA,32),vy={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},kd=["name","version","chainId","verifyingContract","salt"];function wy(t){return function(e){return te(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const fR={name:wy("name"),version:wy("version"),chainId:function(t){const e=_e(t,"domain.chainId");return te(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):ur(e)},verifyingContract:function(t){try{return qe(t).toLowerCase()}catch{}te(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Fe(t,"domain.salt");return te(e.length===32,'invalid domain value "salt"',"domain.salt",t),be(e)}};function Pd(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);te(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=Ds(aR,n?r-1:r),s=n?(i+uA)*oR:lA;return function(o){const a=_e(o,"value");return te(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),ds(n?Y1(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return te(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=Fe(r);return te(i.length===n,`invalid length for ${t}`,"value",r),cR(r)}}}switch(t){case"address":return function(e){return Ei(qe(e),32)};case"bool":return function(e){return e?lR:uR};case"bytes":return function(e){return kt(e)};case"string":return function(e){return Qs(e)}}return null}function by(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function hl(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}class On{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(c=>{s[c]=e[c].map(({name:l,type:u})=>{let{base:f,index:d}=hl(u);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:l,type:f+(d||"")}}),n.set(c,new Set),r.set(c,[]),i.set(c,new Set)}),this.#e=JSON.stringify(s);for(const c in s){const l=new Set;for(const u of s[c]){te(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const f=hl(u.type).base;te(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",e),!Pd(f)&&(te(r.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),r.get(f).push(c),n.get(c).add(f))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);te(o.length!==0,"missing primary type","types",e),te(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Pe(this,{primaryType:o[0]});function a(c,l){te(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const f of l)i.get(f).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of i){const u=Array.from(l);u.sort(),this.#t.set(c,by(c,s[c])+u.map(f=>by(f,s[f])).join(""))}}getEncoder(e){let n=this.#n.get(e);return n||(n=this.#r(e),this.#n.set(e,n)),n}#r(e){{const i=Pd(e);if(i)return i}const n=hl(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{te(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return this.#t.has(i)&&(a=a.map(kt)),kt(Et(a))}}const r=this.types[e];if(r){const i=Qs(this.#t.get(e));return s=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(s[a]);return this.#t.has(c)?kt(l):l});return o.unshift(i),Et(o)}}te(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const n=this.#t.get(e);return te(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return kt(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(Pd(e))return r(e,n);const i=hl(e).array;if(i)return te(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});te(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new On(e)}static getPrimaryType(e){return On.from(e).primaryType}static hashStruct(e,n,r){return On.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=vy[r];te(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>kd.indexOf(r.name)-kd.indexOf(i.name)),On.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Et(["0x1901",On.hashDomain(e),On.from(n).hash(r)])}static hash(e,n,r){return kt(On.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!at(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=On.from(n);o.visit(r,(a,c)=>(a==="address"&&!at(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:r}}static getPayload(e,n,r){On.hashDomain(e);const i={},s=[];kd.forEach(c=>{const l=e[c];l!=null&&(i[c]=fR[c](l),s.push({name:c,type:vy[c]}))});const o=On.from(n);n=o.types;const a=Object.assign({},n);return te(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return be(Fe(l));if(c.match(/^u?int/))return _e(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return te(typeof l=="string","invalid string","value",l),l}te(!1,"unsupported type","type",c)})}}}function mn(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const dR="external public payable override",hR=mn(dR.split(" ")),fA="constant external internal payable private public pure view override",pR=mn(fA.split(" ")),dA="constructor error event fallback function receive struct",hA=mn(dA.split(" ")),pA="calldata memory storage payable indexed",gR=mn(pA.split(" ")),mR="tuple returns",yR=[dA,pA,mR,fA].join(" "),vR=mn(yR.split(" ")),wR={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},bR=new RegExp("^(\\s*)"),ER=new RegExp("^([0-9]+)"),AR=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),gA=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),mA=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class rr{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new rr(this.#t)}reset(){this.#e=0}#n(e=0,n=0){return new rr(this.#t.slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;this.#e<e.match-1;){const r=this.peek().linkNext;n.push(this.#n(this.#e+1,r)),this.#e=r}return this.#e=e.match+1,n}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let n=this.#e;n<this.#t.length;n++){const r=this.#t[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function ys(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(bR);a&&(s+=a[1].length,o=t.substring(s));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let l=wR[o[0]]||"";if(l){if(c.type=l,c.text=o[0],s++,l==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=Be(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(AR),a){if(c.text=a[1],s+=c.text.length,vR.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(mA)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(ER),a){c.text=a[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new rr(e.map(o=>Object.freeze(o)))}function Ey(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function $f(t,e){if(e.peekKeyword(hA)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function _i(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function yA(t){let e=_i(t,pR);return Ey(e,mn("constant payable nonpayable".split(" "))),Ey(e,mn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function yi(t,e){return t.popParams().map(n=>st.from(n,e))}function vA(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return _e(t.pop().text);throw new Error("invalid gas")}return null}function Js(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const _R=new RegExp(/^(.*)\[([0-9]*)\]$/);function Ay(t){const e=t.match(mA);if(te(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);te(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);te(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const gt={},kn=Symbol.for("_ethers_internal"),_y="_ParamTypeInternal",Sy="_ErrorInternal",Cy="_EventInternal",xy="_ConstructorInternal",ky="_FallbackInternal",Py="_FunctionInternal",Ty="_StructInternal";class st{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,n,r,i,s,o,a,c){if(Vc(e,gt,"ParamType"),Object.defineProperty(this,kn,{value:_y}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Pe(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}#e(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{o.#e(e,c,r,u=>{a[l]=u})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{o[l].#e(e,c,r,u=>{a[l]=u})}),i(a);return}const s=r(this.type,n);s.then?e.push((async function(){i(await s)})()):i(s)}async walkAsync(e,n){const r=[],i=[e];return this.#e(r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(st.isParamType(e))return e;if(typeof e=="string")try{return st.from(ys(e),n)}catch{te(!1,"invalid param type","obj",e)}else if(e instanceof rr){let a="",c="",l=null;_i(e,mn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(p=>st.from(p)),a=`tuple(${l.map(p=>p.format()).join(",")})`):(a=Ay(e.popType("TYPE")),c=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const p=e.pop();u=new st(gt,"",a,c,null,l,f,u),f=p.value,a+=p.text,c="array",l=null}let d=null;if(_i(e,gR).has("indexed")){if(!n)throw new Error("");d=!0}const g=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new st(gt,g,a,c,d,l,f,u)}const r=e.name;te(!r||typeof r=="string"&&r.match(gA),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(te(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(_R);if(o){const a=parseInt(o[2]||"-1"),c=st.from({type:o[1],components:e.components});return new st(gt,r||"",s,"array",i,null,a,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(l=>st.from(l)):null;return new st(gt,r||"",s,"tuple",i,a,null,null)}return s=Ay(e.type),new st(gt,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[kn]===_y}}class Ys{type;inputs;constructor(e,n,r){Vc(e,gt,"Fragment"),r=Object.freeze(r.slice()),Pe(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Ys.from(JSON.parse(e))}catch{}return Ys.from(ys(e))}if(e instanceof rr)switch(e.peekKeyword(hA)){case"constructor":return fi.from(e);case"error":return Sn.from(e);case"event":return Rr.from(e);case"fallback":case"receive":return ti.from(e);case"function":return Or.from(e);case"struct":return qs.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return fi.from(e);case"error":return Sn.from(e);case"event":return Rr.from(e);case"fallback":case"receive":return ti.from(e);case"function":return Or.from(e);case"struct":return qs.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}te(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return fi.isFragment(e)}static isError(e){return Sn.isFragment(e)}static isEvent(e){return Rr.isFragment(e)}static isFunction(e){return Or.isFragment(e)}static isStruct(e){return qs.isFragment(e)}}class Hf extends Ys{name;constructor(e,n,r,i){super(e,n,i),te(typeof r=="string"&&r.match(gA),"invalid identifier","name",r),i=Object.freeze(i.slice()),Pe(this,{name:r})}}function Ac(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Sn extends Hf{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,kn,{value:Sy})}get selector(){return Qs(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Ac(e,this.inputs)),n.join(" ")}static from(e){if(Sn.isFragment(e))return e;if(typeof e=="string")return Sn.from(ys(e));if(e instanceof rr){const n=$f("error",e),r=yi(e);return Js(e),new Sn(gt,n,r)}return new Sn(gt,e.name,e.inputs?e.inputs.map(st.from):[])}static isFragment(e){return e&&e[kn]===Sy}}class Rr extends Hf{anonymous;constructor(e,n,r,i){super(e,"event",n,r),Object.defineProperty(this,kn,{value:Cy}),Pe(this,{anonymous:i})}get topicHash(){return Qs(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+Ac(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>st.from(i)),new Rr(gt,e,n,!1).topicHash}static from(e){if(Rr.isFragment(e))return e;if(typeof e=="string")try{return Rr.from(ys(e))}catch{te(!1,"invalid event fragment","obj",e)}else if(e instanceof rr){const n=$f("event",e),r=yi(e,!0),i=!!_i(e,mn(["anonymous"])).has("anonymous");return Js(e),new Rr(gt,n,r,i)}return new Rr(gt,e.name,e.inputs?e.inputs.map(n=>st.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[kn]===Cy}}class fi extends Ys{payable;gas;constructor(e,n,r,i,s){super(e,n,r),Object.defineProperty(this,kn,{value:xy}),Pe(this,{payable:i,gas:s})}format(e){if(me(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[`constructor${Ac(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(fi.isFragment(e))return e;if(typeof e=="string")try{return fi.from(ys(e))}catch{te(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof rr){_i(e,mn(["constructor"]));const n=yi(e),r=!!_i(e,hR).has("payable"),i=vA(e);return Js(e),new fi(gt,"constructor",n,r,i)}return new fi(gt,"constructor",e.inputs?e.inputs.map(st.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[kn]===xy}}class ti extends Ys{payable;constructor(e,n,r){super(e,"fallback",n),Object.defineProperty(this,kn,{value:ky}),Pe(this,{payable:r})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:r})}return`${n}()${this.payable?" payable":""}`}static from(e){if(ti.isFragment(e))return e;if(typeof e=="string")try{return ti.from(ys(e))}catch{te(!1,"invalid fallback fragment","obj",e)}else if(e instanceof rr){const n=e.toString(),r=e.peekKeyword(mn(["fallback","receive"]));if(te(r,"type must be fallback or receive","obj",n),e.popKeyword(mn(["fallback","receive"]))==="receive"){const a=yi(e);return te(a.length===0,"receive cannot have arguments","obj.inputs",a),_i(e,mn(["payable"])),Js(e),new ti(gt,[],!0)}let s=yi(e);s.length?te(s.length===1&&s[0].type==="bytes","invalid fallback inputs","obj.inputs",s.map(a=>a.format("minimal")).join(", ")):s=[st.from("bytes")];const o=yA(e);if(te(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),_i(e,mn(["returns"])).has("returns")){const a=yi(e);te(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return Js(e),new ti(gt,s,o==="payable")}if(e.type==="receive")return new ti(gt,[],!0);if(e.type==="fallback"){const n=[st.from("bytes")],r=e.stateMutability==="payable";return new ti(gt,n,r)}te(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[kn]===ky}}class Or extends Hf{constant;outputs;stateMutability;payable;gas;constructor(e,n,r,i,s,o){super(e,"function",n,i),Object.defineProperty(this,kn,{value:Py}),s=Object.freeze(s.slice()),Pe(this,{constant:r==="view"||r==="pure",gas:o,outputs:s,payable:r==="payable",stateMutability:r})}get selector(){return Qs(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+Ac(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Ac(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>st.from(i)),new Or(gt,e,"view",n,[],null).selector}static from(e){if(Or.isFragment(e))return e;if(typeof e=="string")try{return Or.from(ys(e))}catch{te(!1,"invalid function fragment","obj",e)}else if(e instanceof rr){const r=$f("function",e),i=yi(e),s=yA(e);let o=[];_i(e,mn(["returns"])).has("returns")&&(o=yi(e));const a=vA(e);return Js(e),new Or(gt,r,s,i,o,a)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new Or(gt,e.name,n,e.inputs?e.inputs.map(st.from):[],e.outputs?e.outputs.map(st.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[kn]===Py}}class qs extends Hf{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,kn,{value:Ty})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return qs.from(ys(e))}catch{te(!1,"invalid struct fragment","obj",e)}else if(e instanceof rr){const n=$f("struct",e),r=yi(e);return Js(e),new qs(gt,n,r)}return new qs(gt,e.name,e.inputs?e.inputs.map(st.from):[])}static isFragment(e){return e&&e[kn]===Ty}}const Er=new Map;Er.set(0,"GENERIC_PANIC");Er.set(1,"ASSERT_FALSE");Er.set(17,"OVERFLOW");Er.set(18,"DIVIDE_BY_ZERO");Er.set(33,"ENUM_RANGE_ERROR");Er.set(34,"BAD_STORAGE_DATA");Er.set(49,"STACK_UNDERFLOW");Er.set(50,"ARRAY_RANGE_ERROR");Er.set(65,"OUT_OF_MEMORY");Er.set(81,"UNINITIALIZED_FUNCTION_CALL");const SR=new RegExp(/^bytes([0-9]*)$/),CR=new RegExp(/^(u?int)([0-9]*)$/);let Td=null,Iy=1024;function xR(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const l=Fe(n);if(n=be(n),l.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(l.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(be(l.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(be(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${Er.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?qe(e.to):null,data:e.data||"0x"};return e.from&&(c.from=qe(e.from)),ut(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:c,invocation:o,revert:a})}class ca{#e(e){if(e.isArray())return new VT(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new dl(e.components.map(r=>this.#e(r)),e.name);switch(e.baseType){case"address":return new KT(e.name);case"bool":return new zT(e.name);case"string":return new eI(e.name);case"bytes":return new GT(e.name);case"":return new QT(e.name)}let n=e.type.match(CR);if(n){let r=parseInt(n[2]||"256");return te(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new XT(r/8,n[1]==="int",e.name)}if(n=e.type.match(SR),n){let r=parseInt(n[1]);return te(r!==0&&r<=32,"invalid bytes length","param",e),new qT(r,e.name)}te(!1,"invalid type","type",e.type)}getDefaultValue(e){const n=e.map(i=>this.#e(st.from(i)));return new dl(n,"_").defaultValue()}encode(e,n){W1(n.length,e.length,"types/values length mismatch");const r=e.map(o=>this.#e(st.from(o))),i=new dl(r,"_"),s=new Qh;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>this.#e(st.from(o)));return new dl(i,"_").decode(new bg(n,r,Iy))}static _setDefaultMaxInflation(e){te(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Iy=e}static defaultAbiCoder(){return Td==null&&(Td=new ca),Td}static getBuiltinCallException(e,n,r){return xR(e,n,r,ca.defaultAbiCoder())}}class kR{fragment;name;signature;topic;args;constructor(e,n,r){const i=e.name,s=e.format();Pe(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class PR{fragment;name;args;signature;selector;value;constructor(e,n,r,i){const s=e.name,o=e.format();Pe(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class TR{fragment;name;args;signature;selector;constructor(e,n,r){const i=e.name,s=e.format();Pe(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class Ry{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Pe(this,{hash:e,_isIndexed:!0})}}const Oy={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Ny={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&Oy[t.toString()]&&(e=Oy[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class Bs{fragments;deploy;fallback;receive;#e;#t;#n;#r;constructor(e){let n=[];typeof e=="string"?n=JSON.parse(e):n=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const r=[];for(const o of n)try{r.push(Ys.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Pe(this,{fragments:Object.freeze(r)});let i=null,s=!1;this.#r=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Pe(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(te(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":c=this.#n;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Pe(this,{deploy:fi.from("constructor()")}),Pe(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return ca.defaultAbiCoder()}#i(e,n,r){if(at(e)){const s=e.toLowerCase();for(const o of this.#n.values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of this.#n)o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;bt.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=s.length-1;l>=0;l--){const u=s[l].inputs.length;u!==a&&(!c||u!==a-1)&&s.splice(l,1)}for(let l=s.length-1;l>=0;l--){const u=s[l].inputs;for(let f=0;f<n.length;f++)if(bt.isTyped(n[f])){if(f>=u.length){if(n[f].type==="overrides")continue;s.splice(l,1);break}if(n[f].type!==u[f].baseType){s.splice(l,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");te(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=this.#n.get(Or.from(e).format());return i||null}getFunctionName(e){const n=this.#i(e,null,!1);return te(n,"no matching function","key",e),n.name}hasFunction(e){return!!this.#i(e,null,!1)}getFunction(e,n){return this.#i(e,n||null,!0)}forEachFunction(e){const n=Array.from(this.#n.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#n.get(i),r)}}#o(e,n,r){if(at(e)){const s=e.toLowerCase();for(const o of this.#t.values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let c=0;c<n.length;c++)if(bt.isTyped(n[c])&&n[c].type!==a[c].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");te(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=this.#t.get(Rr.from(e).format());return i||null}getEventName(e){const n=this.#o(e,null,!1);return te(n,"no matching event","key",e),n.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,n){return this.#o(e,n||null,!0)}forEachEvent(e){const n=Array.from(this.#t.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#t.get(i),r)}}getError(e,n){if(at(e)){const i=e.toLowerCase();if(Ny[i])return Sn.from(Ny[i].signature);for(const s of this.#e.values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of this.#e)s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?Sn.from("error Error(string)"):e==="Panic"?Sn.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");te(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Sn.from(e).format(),e==="Error(string)")return Sn.from("error Error(string)");if(e==="Panic(uint256)")return Sn.from("error Panic(uint256)");const r=this.#e.get(e);return r||null}forEachError(e){const n=Array.from(this.#e.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#e.get(i),r)}}_decodeParams(e,n){return this.#r.decode(e,n)}_encodeParams(e,n){return this.#r.encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);te(r,"unknown error","fragment",e),e=r}return te(yt(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,yt(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);te(r,"unknown error","fragment",e),e=r}return Et([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);te(r,"unknown function","fragment",e),e=r}return te(yt(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,yt(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);te(r,"unknown function","fragment",e),e=r}return Et([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);te(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=hn(n);if(i.length%32===0)try{return this.#r.decode(e.outputs,i)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:be(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Fe(e,"data"),i=ca.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=be(r.slice(0,4)),c=this.getError(a);if(c)try{const l=this.#r.decode(c.inputs,r.slice(4));i.revert={name:c.name,signature:c.format(),args:l},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);te(r,"unknown function","fragment",e),e=r}return be(this.#r.encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);te(s,"unknown event","eventFragment",e),e=s}me(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?Qs(o):s.type==="bytes"?kt(be(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=ds(o):s.type.match(/^bytes/)?o=G3(o,32):s.type==="address"&&this.#r.encode(["address"],[o]),Ei(be(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){te(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?te(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(c=>i(a,c))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);te(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),te(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Qs(c));else if(o.type==="bytes")r.push(kt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this.#r.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this.#r.encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const h=this.getEvent(e);te(h,"unknown event","eventFragment",e),e=h}if(r!=null&&!e.anonymous){const h=e.topicHash;te(at(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(st.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=r!=null?this.#r.decode(i,Et(r)):null,c=this.#r.decode(s,n,!0),l=[],u=[];let f=0,d=0;return e.inputs.forEach((h,g)=>{let p=null;if(h.indexed)if(a==null)p=new Ry(null);else if(o[g])p=new Ry(a[d++]);else try{p=a[d++]}catch(y){p=y}else try{p=c[f++]}catch(y){p=y}l.push(p),u.push(h.name||null)}),ui.fromItems(l,u)}parseTransaction(e){const n=Fe(e.data,"tx.data"),r=_e(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(be(n.slice(0,4)));if(!i)return null;const s=this.#r.decode(i.inputs,n.slice(4));return new PR(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new kR(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=be(e),r=this.getError(yt(n,0,4));if(!r)return null;const i=this.#r.decode(r.inputs,yt(n,4));return new TR(r,r.selector,i)}static from(e){return e instanceof Bs?e:typeof e=="string"?new Bs(JSON.parse(e)):typeof e.formatJson=="function"?new Bs(e.formatJson()):typeof e.format=="function"?new Bs(e.format("json")):new Bs(e)}}const wA=BigInt(0);function zo(t){return t??null}function At(t){return t==null?null:t.toString()}class My{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,n,r){Pe(this,{gasPrice:zo(e),maxFeePerGas:zo(n),maxPriorityFeePerGas:zo(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:At(e),maxFeePerGas:At(n),maxPriorityFeePerGas:At(r)}}}function Du(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=be(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=_e(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=Be(t[i],`request.${i}`));return t.accessList&&(e.accessList=no(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>wg(i)?be(i):Object.assign({},i))),e}class IR{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,n){this.#e=e.transactions.map(r=>typeof r!="string"?new Wc(r,n):r),Pe(this,{provider:n,hash:zo(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:zo(e.prevRandao),extraData:e.extraData,baseFeePerGas:zo(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,parentBeaconBlockRoot:d,stateRoot:h,receiptsRoot:g,timestamp:p,transactions:y}=this;return{_type:"Block",baseFeePerGas:At(e),difficulty:At(n),extraData:r,gasLimit:At(i),gasUsed:At(s),blobGasUsed:At(this.blobGasUsed),excessBlobGas:At(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,timestamp:p,parentBeaconBlockRoot:d,stateRoot:h,receiptsRoot:g,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=this.#e[e];else{const r=e.toLowerCase();for(const i of this.#e)if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;te(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return RR(this)}}class qc{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,n){this.provider=n;const r=Object.freeze(e.topics.slice());Pe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return OR(this)}}class bA{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,n){this.#e=Object.freeze(e.logs.map(i=>new qc(i,n)));let r=wA;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Pe(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:At(this.cumulativeGasUsed),from:n,gasPrice:At(this.gasPrice),blobGasUsed:At(this.blobGasUsed),blobGasPrice:At(this.blobGasPrice),gasUsed:At(this.gasUsed),hash:i,index:s,logs:l,logsBloom:c,root:f,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return AA(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),EA(this,e)}}class Wc{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,n){this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:c,data:l,signature:u,accessList:f,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:n,blobVersionedHashes:d,chainId:At(this.chainId),data:l,from:a,gasLimit:At(this.gasLimit),gasPrice:At(this.gasPrice),hash:i,maxFeePerGas:At(this.maxFeePerGas),maxPriorityFeePerGas:At(this.maxPriorityFeePerGas),maxFeePerBlobGas:At(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:s,value:At(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await on({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=this.#e,o=-1,a=s===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:h}=await on({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=d;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=s-3,o<this.#e&&(o=this.#e));o<=d;){if(a)return null;const p=await this.provider.getBlock(o,!0);if(p==null)return;for(const y of p)if(y===this.hash)return;for(let y=0;y<p.length;y++){const m=await p.getTransaction(y);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(m.hash);if(b==null||d-b.blockNumber+1<r)return;let w="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?w="repriced":m.data==="0x"&&m.from===m.to&&m.value===wA&&(w="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:w==="replaced"||w==="cancelled",reason:w,replacement:m.replaceableTransaction(s),hash:m.hash,receipt:b})}}o++}},l=d=>{if(d==null||d.status!==0)return d;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((d,h)=>{const g=[],p=()=>{g.forEach(m=>m())};if(g.push(()=>{a=!0}),i>0){const m=setTimeout(()=>{p(),h(ut("wait for transaction timeout","TIMEOUT"))},i);g.push(()=>{clearTimeout(m)})}const y=async m=>{if(await m.confirmations()>=r){p();try{d(l(m))}catch(b){h(b)}}};if(g.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),s>=0){const m=async()=>{try{await c()}catch(b){if(Vt(b,"TRANSACTION_REPLACED")){p(),h(b);return}}a||this.provider.once("block",m)};g.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),AA(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),EA(this,e)}replaceableTransaction(e){te(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new Wc(this,this.provider);return n.#e=e,n}}function RR(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function EA(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function AA(t){return{orphan:"drop-transaction",tx:t}}function OR(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class Ng extends qc{interface;fragment;args;constructor(e,n,r){super(e,e.provider);const i=n.decodeEventLog(r,e.data,e.topics);Pe(this,{args:i,fragment:r,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class _A extends qc{error;constructor(e,n){super(e,e.provider),Pe(this,{error:n})}}class NR extends bA{#e;constructor(e,n,r){super(r,n),this.#e=e}get logs(){return super.logs.map(e=>{const n=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(n)try{return new Ng(e,this.#e,n)}catch(r){return new _A(e,r)}return e})}}class Mg extends Wc{#e;constructor(e,n,r){super(r,n),this.#e=e}async wait(e,n){const r=await super.wait(e,n);return r==null?null:new NR(this.#e,this.provider,r)}}class SA extends Z1{log;constructor(e,n,r,i){super(e,n,r),Pe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class MR extends SA{constructor(e,n,r,i,s){super(e,n,r,new Ng(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Pe(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Ly=BigInt(0);function CA(t){return t&&typeof t.call=="function"}function xA(t){return t&&typeof t.estimateGas=="function"}function Kf(t){return t&&typeof t.resolveName=="function"}function kA(t){return t&&typeof t.sendTransaction=="function"}function PA(t){if(t!=null){if(Kf(t))return t;if(t.provider)return t.provider}}class LR{#e;fragment;constructor(e,n,r){if(Pe(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=Zs(e.runner,"resolveName"),s=Kf(i)?i:null;this.#e=(async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(d=>gn(d,s))):gn(f,s):f)));return e.interface.encodeFilterTopics(n,o)})()}getTopicFilter(){return this.#e}}function Zs(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function $s(t){return t==null?null:t.provider||null}async function TA(t,e){const n=bt.dereference(t,"overrides");te(typeof n=="object","invalid overrides parameter","overrides",t);const r=Du(n);return te(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),te(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function BR(t,e,n){const r=Zs(t,"resolveName"),i=Kf(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,c)=>(c=bt.dereference(c,a),a==="address"?gn(c,i):c))))}function DR(t){const e=async function(o){const a=await TA(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await gn(a.from,PA(t.runner)));const c=t.interface,l=_e(a.value||Ly,"overrides.value")===Ly,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&te(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),te(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const f=c.receive||c.fallback&&c.fallback.payable;return te(f||l,"cannot send value to non-payable fallback","overrides.value",a.value),te(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Zs(t.runner,"call");me(CA(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw vg(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;me(kA(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=$s(t.runner);return new Mg(t.interface,l,c)},i=async function(o){const a=Zs(t.runner,"estimateGas");return me(xA(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return Pe(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function UR(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return me(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let f={};if(u.inputs.length+1===l.length&&(f=await TA(l.pop()),f.from&&(f.from=await gn(f.from,PA(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await BR(t.runner,u.inputs,l);return Object.assign({},f,await on({to:t.getAddress(),data:t.interface.encodeFunctionData(u,d)}))},i=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},s=async function(...l){const u=t.runner;me(kA(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await u.sendTransaction(await r(...l)),d=$s(t.runner);return new Mg(t.interface,d,f)},o=async function(...l){const u=Zs(t.runner,"estimateGas");return me(xA(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Zs(t.runner,"call");me(CA(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await r(...l);let d="0x";try{d=await u.call(f)}catch(g){throw vg(g)&&g.data?t.interface.makeError(g.data,f):g}const h=n(...l);return t.interface.decodeFunctionResult(h,d)},c=async(...l)=>n(...l).constant?await i(...l):await s(...l);return Pe(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return me(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function FR(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return me(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new LR(t,n(...i),i)};return Pe(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const Uu=Symbol.for("_ethersInternal_contract"),IA=new WeakMap;function $R(t,e){IA.set(t[Uu],e)}function Nn(t){return IA.get(t[Uu])}function HR(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function Lg(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(at(o,32))return o;const a=t.interface.getEvent(o);return te(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?at(e,32)?n=[e]:(r=t.interface.getEvent(e),te(r,"unknown fragment","event",e),n=[r.topicHash]):HR(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):te(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Ba(t,e){const{subs:n}=Nn(t);return n.get((await Lg(t,e)).tag)||null}async function By(t,e,n){const r=$s(t.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await Lg(t,n),{addr:a,subs:c}=Nn(t);let l=c.get(s);if(!l){const f={address:a||t,topics:o},d=y=>{let m=i;if(m==null)try{m=t.interface.getEvent(y.topics[0])}catch{}if(m){const b=m,w=i?t.interface.decodeEventLog(i,y.data,y.topics):[];cp(t,n,w,x=>new MR(t,x,n,b,y))}else cp(t,n,[],b=>new SA(t,b,n,y))};let h=[];l={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(f,d))},stop:async()=>{if(h.length==0)return;let y=h;h=[],await Promise.all(y),r.off(f,d)}},c.set(s,l)}return l}let ap=Promise.resolve();async function KR(t,e,n,r){await ap;const i=await Ba(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Nn(t).subs.delete(i.tag)),s>0}async function cp(t,e,n,r){try{await ap}catch{}const i=KR(t,e,n,r);return ap=i,await i}const pl=["then"];class Za{target;interface;runner;filters;[Uu];fallback;constructor(e,n,r,i){te(typeof e=="string"||BE(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=Bs.from(n);Pe(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,Uu,{value:{}});let o,a=null,c=null;if(i){const f=$s(r);c=new Mg(this.interface,f,i)}let l=new Map;if(typeof e=="string")if(at(e))a=e,o=Promise.resolve(e);else{const f=Zs(r,"resolveName");if(!Kf(f))throw ut("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(d=>{if(d==null)throw ut("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Nn(this).addr=d,d})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Nn(this).addr=f,f});$R(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(f,d,h)=>{if(typeof d=="symbol"||pl.indexOf(d)>=0)return Reflect.get(f,d,h);try{return this.getEvent(d)}catch(g){if(!Vt(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(f,d)=>pl.indexOf(d)>=0?Reflect.has(f,d):Reflect.has(f,d)||this.interface.hasEvent(String(d))});return Pe(this,{filters:u}),Pe(this,{fallback:s.receive||s.fallback?DR(this):null}),new Proxy(this,{get:(f,d,h)=>{if(typeof d=="symbol"||d in f||pl.indexOf(d)>=0)return Reflect.get(f,d,h);try{return f.getFunction(d)}catch(g){if(!Vt(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(f,d)=>typeof d=="symbol"||d in f||pl.indexOf(d)>=0?Reflect.has(f,d):f.interface.hasFunction(d)})}connect(e){return new Za(this.target,this.interface,e)}attach(e){return new Za(e,this.interface,this.runner)}async getAddress(){return await Nn(this).addrPromise}async getDeployedCode(){const e=$s(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=$s(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Nn(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),UR(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),FR(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Nn(this),o=i||await s,{fragment:a,topics:c}=await Lg(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=$s(this.runner);return me(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(f=>{let d=a;if(d==null)try{d=this.interface.getEvent(f.topics[0])}catch{}if(d)try{return new Ng(f,this.interface,d)}catch(h){return new _A(f,h)}return new qc(f,u)})}async on(e,n){const r=await By(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await By(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await cp(this,e,n,null)}async listenerCount(e){if(e){const i=await Ba(this,e);return i?i.listeners.length:0}const{subs:n}=Nn(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Ba(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Nn(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Ba(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Nn(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Ba(this,e);if(!n)return this;n.stop(),Nn(this).subs.delete(n.tag)}else{const{subs:n}=Nn(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends Za{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}}function jR(){return Za}class hr extends jR(){}function Id(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):te(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class VR{name;constructor(e){Pe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const RA=new RegExp("^(ipfs)://(.*)$","i"),Dy=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),RA,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Go{provider;address;name;#e;#t;constructor(e,n,r){Pe(this,{provider:e,address:n,name:r}),this.#e=null,this.#t=new hr(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(Vt(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,n){n=(n||[]).slice();const r=this.#t.interface;n.unshift(op(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),me(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[sR(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await this.#t[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!Vt(s,"CALL_EXCEPTION"))throw s}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await this.#n("addr(bytes32)");return s==null||s===yc?null:s}catch(s){if(Vt(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await this.#n("addr(bytes32,uint)",[s]);if(at(o,20))return qe(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof VR&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await this.#n("addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await this.#n("text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${W3("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<Dy.length;r++){const i=n.match(Dy[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=Id(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const l=c[1],u=new hr(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const p=await u.ownerOf(l);if(a!==p)return e.push({type:"!owner",value:p}),{url:null,linkage:e};e.push({type:"owner",value:p})}else if(s==="erc1155"){const p=await u.balanceOf(a,l);if(!p)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:p.toString()})}let f=await u[o](l);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),s==="erc1155"&&(f=f.replace("{id}",ds(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=Id(f)),e.push({type:"metadata-url",value:f});let d={};const h=await new Ai(f).send();h.assertOk();try{d=h.bodyJson}catch{try{e.push({type:"!metadata",value:h.bodyText})}catch{const m=h.body;return m&&e.push({type:"!metadata",value:be(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let g=d.image;if(typeof g!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(RA)==null)return e.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:g}),g=Id(g)}return e.push({type:"url",value:g}),{linkage:e,url:g}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async#r(e,n){const r=await Go.getEnsAddress(e);try{const s=await new hr(r,["function resolver(bytes32) view returns (address)"],e).resolver(op(n),{enableCcipRead:!0});return s===yc?null:s}catch(i){throw i}return null}static async fromName(e,n){let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await Go.#r(e,r);if(i!=null){const s=new Go(e,i,n);return r!==n&&!await s.supportsWildcard()?null:s}r=r.split(".").slice(1).join(".")}}}const Uy=BigInt(0);function $e(t,e){return(function(n){return n==null?e:t(n)})}function _c(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function Qc(t,e){return(n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";me(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function zR(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}te(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function la(t){return te(at(t,!0),"invalid data","value",t),t}function jt(t){return te(at(t,32),"invalid hash","value",t),t}const GR=Qc({address:qe,blockHash:jt,blockNumber:Be,data:la,index:Be,removed:$e(zR,!1),topics:_c(jt),transactionHash:jt,transactionIndex:Be},{index:["logIndex"]});function qR(t){return GR(t)}const WR=Qc({hash:$e(jt),parentHash:jt,parentBeaconBlockRoot:$e(jt,null),number:Be,timestamp:Be,nonce:$e(la),difficulty:_e,gasLimit:_e,gasUsed:_e,stateRoot:$e(jt,null),receiptsRoot:$e(jt,null),blobGasUsed:$e(_e,null),excessBlobGas:$e(_e,null),miner:$e(qe),prevRandao:$e(jt,null),extraData:la,baseFeePerGas:$e(_e)},{prevRandao:["mixHash"]});function QR(t){const e=WR(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:OA(n)),e}const JR=Qc({transactionIndex:Be,blockNumber:Be,transactionHash:jt,address:qe,topics:_c(jt),data:la,index:Be,blockHash:jt},{index:["logIndex"]});function YR(t){return JR(t)}const ZR=Qc({to:$e(qe,null),from:$e(qe,null),contractAddress:$e(qe,null),index:Be,root:$e(be),gasUsed:_e,blobGasUsed:$e(_e,null),logsBloom:$e(la),blockHash:jt,hash:jt,logs:_c(YR),blockNumber:Be,cumulativeGasUsed:_e,effectiveGasPrice:$e(_e),blobGasPrice:$e(_e,null),status:$e(Be),type:$e(Be,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function XR(t){return ZR(t)}function OA(t){t.to&&_e(t.to)===Uy&&(t.to="0x0000000000000000000000000000000000000000");const e=Qc({hash:jt,index:$e(Be,void 0),type:n=>n==="0x"||n==null?0:Be(n),accessList:$e(no,null),blobVersionedHashes:$e(_c(jt,!0),null),authorizationList:$e(_c(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:qe(n.address),chainId:_e(n.chainId),nonce:_e(n.nonce),signature:vt.from(r)}},!1),null),blockHash:$e(jt,null),blockNumber:$e(Be,null),transactionIndex:$e(Be,null),from:qe,gasPrice:$e(_e),maxPriorityFeePerGas:$e(_e),maxFeePerGas:$e(_e),maxFeePerBlobGas:$e(_e,null),gasLimit:_e,to:$e(qe,null),value:_e,nonce:Be,data:la,creates:$e(qe,null),chainId:$e(_e,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=HT(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=vt.from(t.signature):e.signature=vt.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&_e(e.blockHash)===Uy&&(e.blockHash=null),e}const eO="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Jc{name;constructor(e){Pe(this,{name:e})}clone(){return new Jc(this.name)}}class jf extends Jc{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,n){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const r={effectiveBlock:e};function i(s,o){let a=(n||{})[s];a==null&&(a=o),te(typeof a=="number",`invalud value for ${s}`,"costs",n),r[s]=a}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Pe(this,r)}clone(){return new jf(this.effectiveBlock,this)}}class Vf extends Jc{address;targetNetwork;constructor(e,n){super("org.ethers.plugins.network.Ens"),Pe(this,{address:e||eO,targetNetwork:n??1})}clone(){return new Vf(this.address,this.targetNetwork)}}class tO extends Jc{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=n}clone(){return this}}const Rd=new Map;class Hn{#e;#t;#n;constructor(e,n){this.#e=e,this.#t=_e(n),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=_e(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===_e(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===_e(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===_e(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Hn(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new jf;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=no(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(nO(),e==null)return Hn.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=Rd.get(e);if(n)return n();if(typeof e=="bigint")return new Hn("unknown",e);te(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){te(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Hn(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new Vf(e.ensAddress,e.ensNetwork)),n}te(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=Rd.get(e);r&&te(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Rd.set(e,n)}}function Fy(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function $y(t){return new tO(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Fy(a.maxFee,9),maxPriorityFeePerGas:Fy(a.maxPriorityFee,9)}}catch(s){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let Hy=!1;function nO(){if(Hy)return;Hy=!0;function t(e,n,r){const i=function(){const s=new Hn(e,n);return r.ensNetwork!=null&&s.attachPlugin(new Vf(null,r.ensNetwork)),s.attachPlugin(new jf),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Hn.register(e,i),Hn.register(n,i),r.altNames&&r.altNames.forEach(s=>{Hn.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[$y("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[$y("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function lp(t){return JSON.parse(JSON.stringify(t))}class rO{#e;#t;#n;#r;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#r=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#i(){try{const e=await this.#e.getBlockNumber();if(this.#r===-2){this.#r=e;return}if(e!==this.#r){for(let n=this.#r+1;n<=e;n++){if(this.#t==null)return;await this.#e.emit("block",n)}this.#r=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#n),this.#i())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}class Bg{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=n=>{this._poll(n,this.#e)}}async _poll(e,n){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class iO extends Bg{#e;#t;constructor(e,n){super(e),this.#e=n,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,n){const r=await n.getBlock(this.#e);r!=null&&(this.#t===-2?this.#t=r.number:r.number>this.#t&&(n.emit(this.#e,r.number),this.#t=r.number))}}class sO extends Bg{#e;constructor(e,n){super(e),this.#e=lp(n)}async _poll(e,n){throw new Error("@TODO")}}class oO extends Bg{#e;constructor(e,n){super(e),this.#e=n}async _poll(e,n){const r=await n.getTransactionReceipt(this.#e);r&&n.emit(this.#e,r)}}class Dg{#e;#t;#n;#r;#i;constructor(e,n){this.#e=e,this.#t=lp(n),this.#n=this.#o.bind(this),this.#r=!1,this.#i=-2}async#o(e){if(this.#i===-2)return;const n=lp(this.#t);n.fromBlock=this.#i+1,n.toBlock=e;const r=await this.#e.getLogs(n);if(r.length===0){this.#i<e-60&&(this.#i=e-60);return}for(const i of r)this.#e.emit(this.#t,i),this.#i=i.blockNumber}start(){this.#r||(this.#r=!0,this.#i===-2&&this.#e.getBlockNumber().then(e=>{this.#i=e}),this.#e.on("block",this.#n))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#i=-2)}resume(){this.start()}}const aO=BigInt(2),cO=10;function gl(t){return t&&typeof t.then=="function"}function Jl(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class NA{name;constructor(e){Pe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function lO(t){return JSON.parse(JSON.stringify(t))}function up(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function Od(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(at(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:Jl("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:Jl("orphan",n),filter:lO(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?up(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{at(a)?i.push(a):s.push((async()=>{i.push(await gn(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=up(i.map(a=>a.toLowerCase()))}return{filter:r,tag:Jl("event",r),type:"event"}}te(!1,"unknown ProviderEvent","event",t)}function Nd(){return new Date().getTime()}const uO={cacheTimeout:250,pollingInterval:4e3};class fO{#e;#t;#n;#r;#i;#o;#s;#a;#f;#l;#p;#g;constructor(e,n){if(this.#g=Object.assign({},uO,n||{}),e==="any")this.#o=!0,this.#i=null;else if(e){const r=Hn.from(e);this.#o=!1,this.#i=Promise.resolve(r),setTimeout(()=>{this.emit("network",r,null)},0)}else this.#o=!1,this.#i=null;this.#a=-1,this.#s=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#r=!1,this.#f=1,this.#l=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#c(e){const n=this.#g.cacheTimeout;if(n<0)return await this._perform(e);const r=Jl(e.method,e);let i=this.#s.get(r);return i||(i=this._perform(e),this.#s.set(r,i),setTimeout(()=>{this.#s.get(r)===i&&this.#s.delete(r)},n)),await i}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",i).replace("{data}",s),u=new Ai(l);c.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let f="unknown error",d;try{d=await u.send()}catch(h){o.push(h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:h}});continue}try{const h=d.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:h}),h.data;h.message&&(f=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:h})}catch{}me(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:f}}),o.push(f)}me(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new IR(QR(e),this)}_wrapLog(e,n){return new qc(qR(e),this)}_wrapTransactionReceipt(e,n){return new bA(XR(e),this)}_wrapTransactionResponse(e,n){return new Wc(OA(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Be(await this.#c({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return gn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(at(e))return at(e,32)?e:ur(e);if(typeof e=="bigint"&&(e=Be(e,"blockTag")),typeof e=="number")return e>=0?ur(e):this.#a>=0?ur(this.#a+e):this.getBlockNumber().then(n=>ur(n+e));te(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?up(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(c,l,u)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const d={};return f&&(d.address=f),n.length&&(d.topics=n),l&&(d.fromBlock=l),u&&(d.toBlock=u),r&&(d.blockHash=r),d};let s=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)s.push(this._getAddress(c));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(c=>i(c[0],c[1],c[2])):i(s,o,a)}_getTransactionRequest(e){const n=Du(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=gn(n[i],this);gl(s)?r.push((async function(){n[i]=await s})()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);gl(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(this.#i==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw this.#i===i&&(this.#i=null),s}})();return this.#i=i,(await i).clone()}const e=this.#i,[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(this.#o?(this.emit("network",r,n),this.#i===e&&(this.#i=Promise.resolve(r))):me(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await on({_block:this.#y("latest",!1),gasPrice:(async()=>{try{const u=await this.#c({method:"getGasPrice"});return _e(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await this.#c({method:"getPriorityFee"});return _e(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(i,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*aO+c),new My(s,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ai(r.url),s=await r.processFunc(n,this,i);return new My(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return gl(n)&&(n=await n),_e(await this.#c({method:"estimateGas",transaction:n}),"%response")}async#u(e,n,r){me(r<cO,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=Du(e);try{return be(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&vg(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&yt(s.data,0,4)==="0x556f1830"){const o=s.data,a=await gn(i.to,this);let c;try{c=mO(yt(s.data,4))}catch(f){me(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}me(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(i,c.calldata,c.urls);me(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:c.errorArgs}});const u={to:a,data:Et([c.selector,gO([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const f=await this.#u(u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw s}}async#d(e){const{value:n}=await on({network:this.getNetwork(),value:e});return n}async call(e){const{tx:n,blockTag:r}=await on({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#d(this.#u(n,r,e.enableCcipRead?0:-1))}async#h(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await this.#d(this.#c(Object.assign(e,{address:i,blockTag:s})))}async getBalance(e,n){return _e(await this.#h({method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Be(await this.#h({method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return be(await this.#h({method:"getCode"},e,n))}async getStorage(e,n,r){const i=_e(n,"position");return be(await this.#h({method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await on({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=cr.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async#y(e,n){if(at(e,32))return await this.#c({method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await this.#c({method:"getBlock",blockTag:r,includeTransactions:n})}async getBlock(e,n){const{network:r,params:i}=await on({network:this.getNetwork(),params:this.#y(e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await on({network:this.getNetwork(),params:this.#c({method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await on({network:this.getNetwork(),params:this.#c({method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await this.#c({method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await on({network:this.getNetwork(),result:this.#c({method:"getTransactionResult",hash:e})});return n==null?null:be(n)}async getLogs(e){let n=this._getFilter(e);gl(n)&&(n=await n);const{network:r,params:i}=await on({network:this.getNetwork(),params:this.#c({method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Go.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=qe(e);const n=op(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await Go.getEnsAddress(this),s=await new hr(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===yc)return null;const a=await new hr(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Vt(r,"BAD_DATA")&&r.value==="0x"||Vt(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const c=(async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(ut("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=this.#l.get(e);n&&(n.timer&&clearTimeout(n.timer),this.#l.delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=this.#f++,i=()=>{this.#l.delete(r),e()};if(this.paused)this.#l.set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);this.#l.set(r,{timer:s,func:i,time:Nd()})}return r}_forEachSubscriber(e){for(const n of this.#e.values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new NA(e.type);case"block":{const n=new rO(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new iO(this,e.type);case"event":return new Dg(this,e.filter);case"transaction":return new oO(this,e.hash);case"orphan":return new sO(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of this.#e.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),this.#n!=null&&n.pause(this.#n);break}}async#m(e,n){let r=await Od(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await Od({orphan:"drop-log",log:n[0]},this)),this.#e.get(r.tag)||null}async#v(e){const n=await Od(e,this),r=n.tag;let i=this.#e.get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(r,i)),i}async on(e,n){const r=await this.#v(e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async once(e,n){const r=await this.#v(e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async emit(e,...n){const r=await this.#m(e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new Z1(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await this.#m(e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of this.#e.values())n+=r.length;return n}async listeners(e){if(e){const r=await this.#m(e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of this.#e.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await this.#m(e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await this.#v(e);r&&i.stop(),this.#e.delete(n)}else for(const[n,{started:r,subscriber:i}]of this.#e)r&&i.stop(),this.#e.delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return this.#r}destroy(){this.removeAllListeners();for(const e of this.#l.keys())this._clearTimeout(e);this.#r=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#n!=null){if(this.#n==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),this.#n=!!e;for(const n of this.#l.values())n.timer&&clearTimeout(n.timer),n.time=Nd()-n.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#l.values()){let n=e.time;n<0&&(n=0),e.time=Nd(),setTimeout(e.func,n)}}}}function dO(t,e){try{const n=fp(t,e);if(n)return Iu(n)}catch{}return null}function fp(t,e){if(t==="0x")return null;try{const n=Be(yt(t,e,e+32)),r=Be(yt(t,n,n+32));return yt(t,n+32,n+32+r)}catch{}return null}function Ky(t){const e=It(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function hO(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const pO=new Uint8Array([]);function gO(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(pO),n+=32;for(let r=0;r<t.length;r++){const i=Fe(t[r]);e[r]=Ky(n),e.push(Ky(i.length)),e.push(hO(i)),n+=32+Math.ceil(i.length/32)*32}return Et(e)}const jy="0x0000000000000000000000000000000000000000000000000000000000000000";function mO(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me(Ko(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=yt(t,0,32);me(yt(n,0,12)===yt(jy,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=yt(n,12);try{const r=[],i=Be(yt(t,32,64)),s=Be(yt(t,i,i+32)),o=yt(t,i+32);for(let a=0;a<s;a++){const c=dO(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=fp(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(yt(t,100,128)===yt(jy,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=yt(t,96,100);try{const r=fp(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function _s(t,e){if(t.provider)return t.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Vy(t,e){let n=Du(e);if(n.to!=null&&(n.to=gn(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),gn(r,t)]).then(([i,s])=>(te(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await on(n)}class yO{provider;constructor(e){Pe(this,{provider:e||null})}async getNonce(e){return _s(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Vy(this,e)}async populateTransaction(e){const n=_s(this,"populateTransaction"),r=await Vy(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=_e(r.chainId);te(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?te(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&te(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();me(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(me(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await on(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await _s(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return _s(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return _s(this,"call").call(await this.populateCall(e))}async resolveName(e){return await _s(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=_s(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=cr.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function vO(t){return JSON.parse(JSON.stringify(t))}class MA{#e;#t;#n;#r;#i;#o;constructor(e){this.#e=e,this.#t=null,this.#n=this.#s.bind(this),this.#r=!1,this.#i=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#s(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let n=null;try{n=await this.#t}catch(s){if(!Vt(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const r=await this.#e.getNetwork();if(this.#i||(this.#i=r),this.#i.chainId!==r.chainId)throw new Error("chaid changed");if(this.#o)return;const i=await this.#e.send("eth_getFilterChanges",[n]);await this._emitResults(this.#e,i)}catch(n){console.log("@TODO",n)}this.#e.once("block",this.#n)}#a(){const e=this.#t;e&&(this.#t=null,e.then(n=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[n])}))}start(){this.#r||(this.#r=!0,this.#s(-2))}stop(){this.#r&&(this.#r=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#n))}pause(e){e&&this.#a(),this.#e.off("block",this.#n)}resume(){this.start()}}class wO extends MA{#e;constructor(e,n){super(e),this.#e=vO(n)}_recover(e){return new Dg(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,n){for(const r of n)e.emit(this.#e,e._wrapLog(r,e._network))}}class bO extends MA{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const EO="bigint,boolean,function,number,string,symbol".split(/,/g);function Yl(t){if(t==null||EO.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(Yl);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function AO(t){return new Promise(e=>{setTimeout(e,t)})}function po(t){return t&&t.toLowerCase()}function zy(t){return t&&typeof t.pollingInterval=="number"}const LA={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Md extends yO{address;constructor(e,n){super(e),n=qe(n),Pe(this,{address:n})}connect(e){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=Yl(e),r=[];if(n.from){const s=n.from;r.push((async()=>{const o=await gn(s,this.provider);te(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=o})())}else n.from=this.address;if(n.gasLimit==null&&r.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const s=n.to;r.push((async()=>{n.to=await gn(s,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((i,s)=>{const o=[1e3,100];let a=0;const c=async()=>{try{const l=await this.provider.getTransaction(r);if(l!=null){i(l.replaceableTransaction(n));return}}catch(l){if(Vt(l,"CANCELLED")||Vt(l,"BAD_DATA")||Vt(l,"NETWORK_ERROR")||Vt(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=r,s(l);return}if(Vt(l,"INVALID_ARGUMENT")&&(a++,l.info==null&&(l.info={}),l.info.sendTransactionHash=r,a>10)){s(l);return}this.provider.emit("error",ut("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{c()},o.pop()||4e3)};c()})}async signTransaction(e){const n=Yl(e);if(n.from){const i=await gn(n.from,this.provider);te(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const r=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const n=typeof e=="string"?mi(e):e;return await this.provider.send("personal_sign",[be(n),this.address.toLowerCase()])}async signTypedData(e,n,r){const i=Yl(r),s=await On.resolveNames(e,n,i,async o=>{const a=await gn(o);return te(a!=null,"TypedData does not support null address","value",o),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(On.getPayload(s.domain,n,s.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?mi(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),be(n)])}}class _O extends fO{#e;#t;#n;#r;#i;#o;#s;#a(){if(this.#r)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#r=setTimeout(()=>{this.#r=null;const n=this.#n;for(this.#n=[];n.length;){const r=[n.shift()];for(;n.length&&r.length!==this.#e.batchMaxCount;)if(r.push(n.shift()),JSON.stringify(r.map(s=>s.payload)).length>this.#e.batchMaxSize){n.unshift(r.pop());break}(async()=>{const i=r.length===1?r[0].payload:r.map(s=>s.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const s=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:s});for(const{resolve:o,reject:a,payload:c}of r){if(this.destroyed){a(ut("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const l=s.filter(u=>u.id===c.id)[0];if(l==null){const u=ut("missing response for request","BAD_DATA",{value:s,info:{payload:c}});this.emit("error",u),a(u);continue}if("error"in l){a(this.getRpcError(c,l));continue}o(l.result)}}catch(s){this.emit("debug",{action:"receiveRpcError",error:s});for(const{reject:o}of r)o(s)}})()}},e)}constructor(e,n){super(e,n),this.#t=1,this.#e=Object.assign({},LA,n||{}),this.#n=[],this.#r=null,this.#o=null,this.#s=null;{let i=null;const s=new Promise(o=>{i=o});this.#i={promise:s,resolve:i}}const r=this._getOption("staticNetwork");typeof r=="boolean"?(te(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),r&&e!=null&&(this.#o=Hn.from(e))):r&&(te(e==null||r.matches(e),"staticNetwork MUST match network object","options",n),this.#o=r)}_getOption(e){return this.#e[e]}get _network(){return me(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&_e(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#s?await this.#s:this.ready?(this.#s=(async()=>{try{const n=Hn.from(_e(await this.send("eth_chainId",[])));return this.#s=null,n}catch(n){throw this.#s=null,n}})(),await this.#s):(this.#s=(async()=>{const n={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let r;try{r=(await this._send(n))[0],this.#s=null}catch(i){throw this.#s=null,this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return Hn.from(_e(r.result));throw this.getRpcError(n,r)})(),await this.#s)}_start(){this.#i==null||this.#i.resolve==null||(this.#i.resolve(),this.#i=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ut("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await AO(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#i!=null)return await this.#i.promise}_getSubscriber(e){return e.type==="pending"?new bO(this):e.type==="event"?this._getOption("polling")?new Dg(this,e.filter):new wO(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new NA("orphan"):super._getSubscriber(e)}get ready(){return this.#i==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let i=r;r==="gasLimit"&&(i="gas"),n[i]=ur(_e(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(n[r]=be(e[r]))}),e.accessList&&(n.accessList=no(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(r=>r.toLowerCase())),e.authorizationList&&(n.authorizationList=e.authorizationList.map(r=>{const i=$E(r);return{address:i.address,nonce:ur(i.nonce),chainId:ur(i.chainId),yParity:ur(i.signature.yParity),r:ur(i.signature.r),s:ur(i.signature.s)}})),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[po(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[po(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[po(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[po(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(po):e.filter.address=po(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:r}=e,{error:i}=n;if(r==="eth_estimateGas"&&i.message){const a=i.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return ut("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return ut("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(r==="eth_call"||r==="eth_estimateGas"){const a=dp(i),c=ca.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return c.info={error:i,payload:e},c}const s=JSON.stringify(CO(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return ut("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const a=e.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return ut("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:i}});if(s.match(/nonce/i)&&s.match(/too low/i))return ut("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:i}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return ut("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:i}});if(s.match(/only replay-protected/i))return ut("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:a,info:{error:i}}})}let o=!!s.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?ut("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):ut("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(ut("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=this.#t++,i=new Promise((s,o)=>{this.#n.push({resolve:s,reject:o,payload:{method:e,params:n,id:r,jsonrpc:"2.0"}})});return this.#a(),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new Md(this,i[e])}const{accounts:r}=await on({network:this.getNetwork(),accounts:n});e=qe(e);for(const i of r)if(qe(i)===e)return new Md(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Md(this,n))}destroy(){this.#r&&(clearTimeout(this.#r),this.#r=null);for(const{payload:e,reject:n}of this.#n)n(ut("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class SO extends _O{#e;constructor(e,n){super(e,n);let r=this._getOption("pollingInterval");r==null&&(r=LA.pollingInterval),this.#e=r}_getSubscriber(e){const n=super._getSubscriber(e);return zy(n)&&(n.pollingInterval=this.#e),n}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(n=>{zy(n)&&(n.pollingInterval=this.#e)})}}function dp(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&at(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=dp(t[e]);if(n)return n}return null}if(typeof t=="string")try{return dp(JSON.parse(t))}catch{}return null}function hp(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)hp(t[n],e);if(typeof t=="string")try{return hp(JSON.parse(t),e)}catch{}}}function CO(t){const e=[];return hp(t,e),e}class Un extends SO{#e;#t;constructor(e,n,r){const i=Object.assign({},r??{},{batchMaxCount:1});te(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(n,i),this.#t=null,r&&r.providerInfo&&(this.#t=r.providerInfo),this.#e=async(s,o)=>{const a={method:s,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const c=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const l=new Error(c.message);throw l.code=c.code,l.data=c.data,l.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}}}get providerInfo(){return this.#t}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){te(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await this.#e(e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(n){const r=n.payload;throw this.getRpcError(r,{id:r.id,error:n})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Un(e.provider);const n=e.window?e.window:typeof window<"u"?window:null;if(n==null)return null;const r=e.anyProvider;if(r&&n.ethereum)return new Un(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((s,o)=>{let a=[];const c=f=>{a.push(f.detail),r&&l()},l=()=>{if(clearTimeout(u),a.length)if(e&&e.filter){const f=e.filter(a.map(d=>Object.assign({},d.info)));if(f==null)s(null);else if(f instanceof Un)s(f);else{let d=null;if(f.uuid&&(d=a.filter(g=>f.uuid===g.info.uuid)[0]),d){const{provider:h,info:g}=d;s(new Un(h,void 0,{providerInfo:g}))}else o(ut("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:d}=a[0];s(new Un(f,void 0,{providerInfo:d}))}else s(null);n.removeEventListener("eip6963:announceProvider",c)},u=setTimeout(()=>{l()},i);n.addEventListener("eip6963:announceProvider",c),n.dispatchEvent(new Event("eip6963:requestProvider"))})}}var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ug(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yl={exports:{}},Gy;function xO(){return Gy||(Gy=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ml<"u"&&ml,r=(function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s})();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof ml<"u"&&ml||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(_){return _&&DataView.prototype.isPrototypeOf(_)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(_){return _&&u.indexOf(Object.prototype.toString.call(_))>-1};function d(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(_)||_==="")throw new TypeError('Invalid character in header field name: "'+_+'"');return _.toLowerCase()}function h(_){return typeof _!="string"&&(_=String(_)),_}function g(_){var R={next:function(){var j=_.shift();return{done:j===void 0,value:j}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function p(_){this.map={},_ instanceof p?_.forEach(function(R,j){this.append(j,R)},this):Array.isArray(_)?_.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(R){this.append(R,_[R])},this)}p.prototype.append=function(_,R){_=d(_),R=h(R);var j=this.map[_];this.map[_]=j?j+", "+R:R},p.prototype.delete=function(_){delete this.map[d(_)]},p.prototype.get=function(_){return _=d(_),this.has(_)?this.map[_]:null},p.prototype.has=function(_){return this.map.hasOwnProperty(d(_))},p.prototype.set=function(_,R){this.map[d(_)]=h(R)},p.prototype.forEach=function(_,R){for(var j in this.map)this.map.hasOwnProperty(j)&&_.call(R,this.map[j],j,this)},p.prototype.keys=function(){var _=[];return this.forEach(function(R,j){_.push(j)}),g(_)},p.prototype.values=function(){var _=[];return this.forEach(function(R){_.push(R)}),g(_)},p.prototype.entries=function(){var _=[];return this.forEach(function(R,j){_.push([j,R])}),g(_)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function y(_){if(!_._noBody){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}}function m(_){return new Promise(function(R,j){_.onload=function(){R(_.result)},_.onerror=function(){j(_.error)}})}function b(_){var R=new FileReader,j=m(R);return R.readAsArrayBuffer(_),j}function w(_){var R=new FileReader,j=m(R),v=/charset=([A-Za-z0-9_-]+)/.exec(_.type),S=v?v[1]:"utf-8";return R.readAsText(_,S),j}function x(_){for(var R=new Uint8Array(_),j=new Array(R.length),v=0;v<R.length;v++)j[v]=String.fromCharCode(R[v]);return j.join("")}function N(_){if(_.slice)return _.slice(0);var R=new Uint8Array(_.byteLength);return R.set(new Uint8Array(_)),R.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(_){this.bodyUsed=this.bodyUsed,this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:c.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:c.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():c.arrayBuffer&&c.blob&&l(_)?(this._bodyArrayBuffer=N(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||f(_))?this._bodyArrayBuffer=N(_):this._bodyText=_=Object.prototype.toString.call(_):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var _=y(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var _=y(this);return _||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var _=y(this);if(_)return _;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(U)}),this.json=function(){return this.text().then(JSON.parse)},this}var z=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function G(_){var R=_.toUpperCase();return z.indexOf(R)>-1?R:_}function F(_,R){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var j=R.body;if(_ instanceof F){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,R.headers||(this.headers=new p(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!j&&_._bodyInit!=null&&(j=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new p(R.headers)),this.method=G(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||(function(){if("AbortController"in a){var C=new AbortController;return C.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(j),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var v=/([?&])_=[^&]*/;if(v.test(this.url))this.url=this.url.replace(v,"$1_="+new Date().getTime());else{var S=/\?/;this.url+=(S.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}F.prototype.clone=function(){return new F(this,{body:this._bodyInit})};function U(_){var R=new FormData;return _.trim().split("&").forEach(function(j){if(j){var v=j.split("="),S=v.shift().replace(/\+/g," "),C=v.join("=").replace(/\+/g," ");R.append(decodeURIComponent(S),decodeURIComponent(C))}}),R}function V(_){var R=new p,j=_.replace(/\r?\n[\t ]+/g," ");return j.split("\r").map(function(v){return v.indexOf(`
`)===0?v.substr(1,v.length):v}).forEach(function(v){var S=v.split(":"),C=S.shift().trim();if(C){var P=S.join(":").trim();try{R.append(C,P)}catch(A){console.warn("Response "+A.message)}}}),R}H.call(F.prototype);function L(_,R){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new p(R.headers),this.url=R.url||"",this._initBody(_)}H.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},L.error=function(){var _=new L(null,{status:200,statusText:""});return _.ok=!1,_.status=0,_.type="error",_};var B=[301,302,303,307,308];L.redirect=function(_,R){if(B.indexOf(R)===-1)throw new RangeError("Invalid status code");return new L(null,{status:R,headers:{location:_}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,j){this.message=R,this.name=j;var v=Error(R);this.stack=v.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function M(_,R){return new Promise(function(j,v){var S=new F(_,R);if(S.signal&&S.signal.aborted)return v(new o.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function P(){C.abort()}C.onload=function(){var k={statusText:C.statusText,headers:V(C.getAllResponseHeaders()||"")};S.url.indexOf("file://")===0&&(C.status<200||C.status>599)?k.status=200:k.status=C.status,k.url="responseURL"in C?C.responseURL:k.headers.get("X-Request-URL");var I="response"in C?C.response:C.responseText;setTimeout(function(){j(new L(I,k))},0)},C.onerror=function(){setTimeout(function(){v(new TypeError("Network request failed"))},0)},C.ontimeout=function(){setTimeout(function(){v(new TypeError("Network request timed out"))},0)},C.onabort=function(){setTimeout(function(){v(new o.DOMException("Aborted","AbortError"))},0)};function A(k){try{return k===""&&a.location.href?a.location.href:k}catch{return k}}if(C.open(S.method,A(S.url),!0),S.credentials==="include"?C.withCredentials=!0:S.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&(c.blob?C.responseType="blob":c.arrayBuffer&&(C.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof p||a.Headers&&R.headers instanceof a.Headers)){var E=[];Object.getOwnPropertyNames(R.headers).forEach(function(k){E.push(d(k)),C.setRequestHeader(k,h(R.headers[k]))}),S.headers.forEach(function(k,I){E.indexOf(I)===-1&&C.setRequestHeader(I,k)})}else S.headers.forEach(function(k,I){C.setRequestHeader(I,k)});S.signal&&(S.signal.addEventListener("abort",P),C.onreadystatechange=function(){C.readyState===4&&S.signal.removeEventListener("abort",P)}),C.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return M.polyfill=!0,a.fetch||(a.fetch=M,a.Headers=p,a.Request=F,a.Response=L),o.Headers=p,o.Request=F,o.Response=L,o.fetch=M,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(yl,yl.exports)),yl.exports}var kO=xO();const BA=Ug(kO);var vl={exports:{}},Ld,qy;function PO(){if(qy)return Ld;qy=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;Ld=function(u,f){f=f||{};var d=typeof u;if(d==="string"&&u.length>0)return o(u);if(d==="number"&&isFinite(u))return f.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var d=parseFloat(f[1]),h=(f[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return d*s;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*r;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*e;case"seconds":case"second":case"secs":case"sec":case"s":return d*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=n?Math.round(u/n)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var f=Math.abs(u);return f>=r?l(u,f,r,"day"):f>=n?l(u,f,n,"hour"):f>=e?l(u,f,e,"minute"):f>=t?l(u,f,t,"second"):u+" ms"}function l(u,f,d,h){var g=f>=d*1.5;return Math.round(u/d)+" "+h+(g?"s":"")}return Ld}var Bd,Wy;function TO(){if(Wy)return Bd;Wy=1;function t(e){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=s,r.enabled=a,r.humanize=PO(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let d=0;for(let h=0;h<f.length;h++)d=(d<<5)-d+f.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=n;function r(f){let d,h=null,g,p;function y(...m){if(!y.enabled)return;const b=y,w=Number(new Date),x=w-(d||w);b.diff=x,b.prev=d,b.curr=w,d=w,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let N=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(z,G)=>{if(z==="%%")return"%";N++;const F=r.formatters[G];if(typeof F=="function"){const U=m[N];z=F.call(b,U),m.splice(N,1),N--}return z}),r.formatArgs.call(b,m),(b.log||r.log).apply(b,m)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==r.namespaces&&(g=r.namespaces,p=r.enabled(f)),p),set:m=>{h=m}}),typeof r.init=="function"&&r.init(y),y}function i(f,d){const h=r(this.namespace+(typeof d>"u"?":":d)+f);return h.log=this.log,h}function s(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d;const h=(typeof f=="string"?f:"").split(/[\s,]+/),g=h.length;for(d=0;d<g;d++)h[d]&&(f=h[d].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function o(){const f=[...r.names.map(c),...r.skips.map(c).map(d=>"-"+d)].join(",");return r.enable(""),f}function a(f){if(f[f.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(f))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Bd=t,Bd}var Qy;function IO(){return Qy||(Qy=1,(function(t,e){var n={};e.formatArgs=i,e.save=s,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let f=0,d=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(f++,h==="%c"&&(d=f))}),l.splice(d,0,u)}e.log=console.debug||console.log||(()=>{});function s(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function o(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=n.DEBUG),l}function a(){try{return localStorage}catch{}}t.exports=TO()(e);const{formatters:c}=t.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(vl,vl.exports)),vl.exports}var RO=IO();const yn=Ug(RO);var Dd,Jy;function OO(){if(Jy)return Dd;Jy=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i=(F,U)=>{for(var V in U)t(F,V,{get:U[V],enumerable:!0})},s=(F,U,V,L)=>{if(U&&typeof U=="object"||typeof U=="function")for(let B of n(U))!r.call(F,B)&&B!==V&&t(F,B,{get:()=>U[B],enumerable:!(L=e(U,B))||L.enumerable});return F},o=F=>s(t({},"__esModule",{value:!0}),F),a={};i(a,{createFinalURL:()=>H,createPathBasedClient:()=>p,createQuerySerializer:()=>w,default:()=>f,defaultBodySerializer:()=>N,defaultPathSerializer:()=>x,mergeHeaders:()=>z,randomID:()=>u,removeTrailingSlash:()=>G,serializeArrayParam:()=>b,serializeObjectParam:()=>m,serializePrimitiveParam:()=>y,wrapAsPathBasedClient:()=>g}),Dd=o(a);var c=/\{[^{}]+\}/g,l=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function u(){return Math.random().toString(36).slice(2,11)}function f(F){let{baseUrl:U="",Request:V=globalThis.Request,fetch:L=globalThis.fetch,querySerializer:B,bodySerializer:M,headers:_,requestInitExt:R=void 0,...j}={...F};R=l()?R:void 0,U=G(U);const v=[];async function S(C,P){const{baseUrl:A,fetch:E=L,Request:k=V,headers:I,params:D={},parseAs:T="json",querySerializer:K,bodySerializer:q=M??N,body:Z,...oe}=P||{};let O=U;A&&(O=G(A)??U);let $=typeof B=="function"?B:w(B);K&&($=typeof K=="function"?K:w({...typeof B=="object"?B:{},...K}));const Q=Z===void 0?void 0:q(Z,z(_,I,D.header)),ne=z(Q===void 0||Q instanceof FormData?{}:{"Content-Type":"application/json"},_,I,D.header),J={redirect:"follow",...j,...oe,body:Q,headers:ne};let W,X,re=new V(H(C,{baseUrl:O,params:D,querySerializer:$}),J),ie;for(const he in oe)he in re||(re[he]=oe[he]);if(v.length){W=u(),X=Object.freeze({baseUrl:O,fetch:E,parseAs:T,querySerializer:$,bodySerializer:q});for(const he of v)if(he&&typeof he=="object"&&typeof he.onRequest=="function"){const ue=await he.onRequest({request:re,schemaPath:C,params:D,options:X,id:W});if(ue)if(ue instanceof V)re=ue;else if(ue instanceof Response){ie=ue;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!ie){try{ie=await E(re,R)}catch(he){let ue=he;if(v.length)for(let ge=v.length-1;ge>=0;ge--){const se=v[ge];if(se&&typeof se=="object"&&typeof se.onError=="function"){const Y=await se.onError({request:re,error:ue,schemaPath:C,params:D,options:X,id:W});if(Y){if(Y instanceof Response){ue=void 0,ie=Y;break}if(Y instanceof Error){ue=Y;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(ue)throw ue}if(v.length)for(let he=v.length-1;he>=0;he--){const ue=v[he];if(ue&&typeof ue=="object"&&typeof ue.onResponse=="function"){const ge=await ue.onResponse({request:re,response:ie,schemaPath:C,params:D,options:X,id:W});if(ge){if(!(ge instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");ie=ge}}}}if(ie.status===204||re.method==="HEAD"||ie.headers.get("Content-Length")==="0")return ie.ok?{data:void 0,response:ie}:{error:void 0,response:ie};if(ie.ok)return T==="stream"?{data:ie.body,response:ie}:{data:await ie[T](),response:ie};let ae=await ie.text();try{ae=JSON.parse(ae)}catch{}return{error:ae,response:ie}}return{request(C,P,A){return S(P,{...A,method:C.toUpperCase()})},GET(C,P){return S(C,{...P,method:"GET"})},PUT(C,P){return S(C,{...P,method:"PUT"})},POST(C,P){return S(C,{...P,method:"POST"})},DELETE(C,P){return S(C,{...P,method:"DELETE"})},OPTIONS(C,P){return S(C,{...P,method:"OPTIONS"})},HEAD(C,P){return S(C,{...P,method:"HEAD"})},PATCH(C,P){return S(C,{...P,method:"PATCH"})},TRACE(C,P){return S(C,{...P,method:"TRACE"})},use(...C){for(const P of C)if(P){if(typeof P!="object"||!("onRequest"in P||"onResponse"in P||"onError"in P))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");v.push(P)}},eject(...C){for(const P of C){const A=v.indexOf(P);A!==-1&&v.splice(A,1)}}}}var d=class{constructor(F,U){this.client=F,this.url=U}GET=F=>this.client.GET(this.url,F);PUT=F=>this.client.PUT(this.url,F);POST=F=>this.client.POST(this.url,F);DELETE=F=>this.client.DELETE(this.url,F);OPTIONS=F=>this.client.OPTIONS(this.url,F);HEAD=F=>this.client.HEAD(this.url,F);PATCH=F=>this.client.PATCH(this.url,F);TRACE=F=>this.client.TRACE(this.url,F)},h=class{constructor(){this.client=null}get(F,U){const V=new d(F,U);return this.client[U]=V,V}};function g(F){const U=new h,V=new Proxy(F,U);function L(){}L.prototype=V;const B=new L;return U.client=B,B}function p(F){return g(f(F))}function y(F,U,V){if(U==null)return"";if(typeof U=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${F}=${V?.allowReserved===!0?U:encodeURIComponent(U)}`}function m(F,U,V){if(!U||typeof U!="object")return"";const L=[],B={simple:",",label:".",matrix:";"}[V.style]||"&";if(V.style!=="deepObject"&&V.explode===!1){for(const R in U)L.push(R,V.allowReserved===!0?U[R]:encodeURIComponent(U[R]));const _=L.join(",");switch(V.style){case"form":return`${F}=${_}`;case"label":return`.${_}`;case"matrix":return`;${F}=${_}`;default:return _}}for(const _ in U){const R=V.style==="deepObject"?`${F}[${_}]`:_;L.push(y(R,U[_],V))}const M=L.join(B);return V.style==="label"||V.style==="matrix"?`${B}${M}`:M}function b(F,U,V){if(!Array.isArray(U))return"";if(V.explode===!1){const M={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[V.style]||",",_=(V.allowReserved===!0?U:U.map(R=>encodeURIComponent(R))).join(M);switch(V.style){case"simple":return _;case"label":return`.${_}`;case"matrix":return`;${F}=${_}`;default:return`${F}=${_}`}}const L={simple:",",label:".",matrix:";"}[V.style]||"&",B=[];for(const M of U)V.style==="simple"||V.style==="label"?B.push(V.allowReserved===!0?M:encodeURIComponent(M)):B.push(y(F,M,V));return V.style==="label"||V.style==="matrix"?`${L}${B.join(L)}`:B.join(L)}function w(F){return function(V){const L=[];if(V&&typeof V=="object")for(const B in V){const M=V[B];if(M!=null){if(Array.isArray(M)){if(M.length===0)continue;L.push(b(B,M,{style:"form",explode:!0,...F?.array,allowReserved:F?.allowReserved||!1}));continue}if(typeof M=="object"){L.push(m(B,M,{style:"deepObject",explode:!0,...F?.object,allowReserved:F?.allowReserved||!1}));continue}L.push(y(B,M,F))}}return L.join("&")}}function x(F,U){let V=F;for(const L of F.match(c)??[]){let B=L.substring(1,L.length-1),M=!1,_="simple";if(B.endsWith("*")&&(M=!0,B=B.substring(0,B.length-1)),B.startsWith(".")?(_="label",B=B.substring(1)):B.startsWith(";")&&(_="matrix",B=B.substring(1)),!U||U[B]===void 0||U[B]===null)continue;const R=U[B];if(Array.isArray(R)){V=V.replace(L,b(B,R,{style:_,explode:M}));continue}if(typeof R=="object"){V=V.replace(L,m(B,R,{style:_,explode:M}));continue}if(_==="matrix"){V=V.replace(L,`;${y(B,R)}`);continue}V=V.replace(L,_==="label"?`.${encodeURIComponent(R)}`:encodeURIComponent(R))}return V}function N(F,U){return F instanceof FormData?F:U&&(U.get instanceof Function?U.get("Content-Type")??U.get("content-type"):U["Content-Type"]??U["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(F).toString():JSON.stringify(F)}function H(F,U){let V=`${U.baseUrl}${F}`;U.params?.path&&(V=x(V,U.params.path));let L=U.querySerializer(U.params.query??{});return L.startsWith("?")&&(L=L.substring(1)),L&&(V+=`?${L}`),V}function z(...F){const U=new Headers;for(const V of F){if(!V||typeof V!="object")continue;const L=V instanceof Headers?V.entries():Object.entries(V);for(const[B,M]of L)if(M===null)U.delete(B);else if(Array.isArray(M))for(const _ of M)U.append(B,_);else M!==void 0&&U.set(B,M)}return U}function G(F){return F.endsWith("/")?F.substring(0,F.length-1):F}return Dd}var Ud,Yy;function NO(){if(Yy)return Ud;Yy=1;var t={},e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,a=(H,z)=>{for(var G in z)n(H,G,{get:z[G],enumerable:!0})},c=(H,z,G,F)=>{if(z&&typeof z=="object"||typeof z=="function")for(let U of i(z))!o.call(H,U)&&U!==G&&n(H,U,{get:()=>z[U],enumerable:!(F=r(z,U))||F.enumerable});return H},l=(H,z,G)=>(G=H!=null?e(s(H)):{},c(!H||!H.__esModule?n(G,"default",{value:H,enumerable:!0}):G,H)),u=H=>c(n({},"__esModule",{value:!0}),H),f={};a(f,{analytics:()=>N}),Ud=u(f);var d=l(OO()),h=class{constructor(H){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=H.batchSize,this.baseTimeoutMs=H.baseTimeoutMs,this.currentTimeoutMs=H.baseTimeoutMs,this.sendFn=H.sendFn}enqueue(H){this.batch.push(H),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const H=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(H),this.currentTimeoutMs=this.baseTimeoutMs}catch(z){console.error("Sender: Failed to send batch",z),this.batch=[...H,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},g=h,p=class{constructor(H){this.enabled=!1,this.properties={};const z=(0,d.default)({baseUrl:H}),G=async F=>{const U=await z.POST("/v1/events",{body:F});if(U.response.status!==200)throw new Error(U.error)};this.sender=new g({batchSize:100,baseTimeoutMs:200,sendFn:G})}enable(){this.enabled=!0}setGlobalProperty(H,z){this.properties[H]=z}track(H,z){if(!this.enabled)return;const G={name:H,...this.properties,...z};this.sender.enqueue(G)}},y=p,m,b;typeof process<"u"&&t&&(m=(b=t.METAMASK_ANALYTICS_ENDPOINT)!=null?b:t.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var w=m??"https://mm-sdk-analytics.api.cx.metamask.io/",x=new y(w),N=x;return Ud}var _t=NO(),Fd={exports:{}};var Zy;function MO(){return Zy||(Zy=1,(function(t,e){(function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(S){return Object.prototype.toString.call(S)==="[object Array]"},s=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",c=typeof Reflect=="object",l=typeof setImmediate=="function",u=l?setImmediate:setTimeout,f=a?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(v){var S=Object.getOwnPropertyNames(v);return S.push.apply(S,Object.getOwnPropertySymbols(v)),S}:Object.keys;function d(){this._events={},this._conf&&h.call(this,this._conf)}function h(v){v&&(this._conf=v,v.delimiter&&(this.delimiter=v.delimiter),v.maxListeners!==n&&(this._maxListeners=v.maxListeners),v.wildcard&&(this.wildcard=v.wildcard),v.newListener&&(this._newListener=v.newListener),v.removeListener&&(this._removeListener=v.removeListener),v.verboseMemoryLeak&&(this.verboseMemoryLeak=v.verboseMemoryLeak),v.ignoreErrors&&(this.ignoreErrors=v.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(v,S){var C="(node) warning: possible EventEmitter memory leak detected. "+v+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(C+=" Event name: "+S+"."),typeof process<"u"&&process.emitWarning){var P=new Error(C);P.name="MaxListenersExceededWarning",P.emitter=this,P.count=v,process.emitWarning(P)}else console.error(C),console.trace&&console.trace()}var p=function(v,S,C){var P=arguments.length;switch(P){case 0:return[];case 1:return[v];case 2:return[v,S];case 3:return[v,S,C];default:for(var A=new Array(P);P--;)A[P]=arguments[P];return A}};function y(v,S){for(var C={},P,A=v.length,E=0,k=0;k<A;k++)P=v[k],C[P]=k<E?S[k]:n;return C}function m(v,S,C){this._emitter=v,this._target=S,this._listeners={},this._listenersCount=0;var P,A;if((C.on||C.off)&&(P=C.on,A=C.off),S.addEventListener?(P=S.addEventListener,A=S.removeEventListener):S.addListener?(P=S.addListener,A=S.removeListener):S.on&&(P=S.on,A=S.off),!P&&!A)throw Error("target does not implement any known event API");if(typeof P!="function")throw TypeError("on method must be a function");if(typeof A!="function")throw TypeError("off method must be a function");this._on=P,this._off=A;var E=v._observers;E?E.push(this):v._observers=[this]}Object.assign(m.prototype,{subscribe:function(v,S,C){var P=this,A=this._target,E=this._emitter,k=this._listeners,I=function(){var D=p.apply(null,arguments),T={data:D,name:S,original:v};if(C){var K=C.call(A,T);K!==!1&&E.emit.apply(E,[T.name].concat(D));return}E.emit.apply(E,[S].concat(D))};if(k[v])throw Error("Event '"+v+"' is already listening");this._listenersCount++,E._newListener&&E._removeListener&&!P._onNewListener?(this._onNewListener=function(D){D===S&&k[v]===null&&(k[v]=I,P._on.call(A,v,I))},E.on("newListener",this._onNewListener),this._onRemoveListener=function(D){D===S&&!E.hasListeners(D)&&k[v]&&(k[v]=null,P._off.call(A,v,I))},k[v]=null,E.on("removeListener",this._onRemoveListener)):(k[v]=I,P._on.call(A,v,I))},unsubscribe:function(v){var S=this,C=this._listeners,P=this._emitter,A,E,k=this._off,I=this._target,D;if(v&&typeof v!="string")throw TypeError("event must be a string");function T(){S._onNewListener&&(P.off("newListener",S._onNewListener),P.off("removeListener",S._onRemoveListener),S._onNewListener=null,S._onRemoveListener=null);var K=G.call(P,S);P._observers.splice(K,1)}if(v){if(A=C[v],!A)return;k.call(I,v,A),delete C[v],--this._listenersCount||T()}else{for(E=f(C),D=E.length;D-- >0;)v=E[D],k.call(I,v,C[v]);this._listeners={},this._listenersCount=0,T()}}});function b(v,S,C,P){var A=Object.assign({},S);if(!v)return A;if(typeof v!="object")throw TypeError("options must be an object");var E=Object.keys(v),k=E.length,I,D,T;function K(Z){throw Error('Invalid "'+I+'" option value'+(Z?". Reason: "+Z:""))}for(var q=0;q<k;q++){if(I=E[q],!r.call(S,I))throw Error('Unknown "'+I+'" option');D=v[I],D!==n&&(T=C[I],A[I]=T?T(D,K):D)}return A}function w(v,S){return(typeof v!="function"||!v.hasOwnProperty("prototype"))&&S("value must be a constructor"),v}function x(v){var S="value must be type of "+v.join("|"),C=v.length,P=v[0],A=v[1];return C===1?function(E,k){if(typeof E===P)return E;k(S)}:C===2?function(E,k){var I=typeof E;if(I===P||I===A)return E;k(S)}:function(E,k){for(var I=typeof E,D=C;D-- >0;)if(I===v[D])return E;k(S)}}var N=x(["function"]),H=x(["object","function"]);function z(v,S,C){var P,A,E=0,k,I=new v(function(D,T,K){C=b(C,{timeout:0,overload:!1},{timeout:function(O,$){return O*=1,(typeof O!="number"||O<0||!Number.isFinite(O))&&$("timeout must be a positive number"),O}}),P=!C.overload&&typeof v.prototype.cancel=="function"&&typeof K=="function";function q(){A&&(A=null),E&&(clearTimeout(E),E=0)}var Z=function(O){q(),D(O)},oe=function(O){q(),T(O)};P?S(Z,oe,K):(A=[function(O){oe(O||Error("canceled"))}],S(Z,oe,function(O){if(k)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof O!="function")throw TypeError("onCancel callback must be a function");A.push(O)}),k=!0),C.timeout>0&&(E=setTimeout(function(){var O=Error("timeout");O.code="ETIMEDOUT",E=0,I.cancel(O),T(O)},C.timeout))});return P||(I.cancel=function(D){if(A){for(var T=A.length,K=1;K<T;K++)A[K](D);A[0](D),A=null}}),I}function G(v){var S=this._observers;if(!S)return-1;for(var C=S.length,P=0;P<C;P++)if(S[P]._target===v)return P;return-1}function F(v,S,C,P,A){if(!C)return null;if(P===0){var E=typeof S;if(E==="string"){var k,I,D=0,T=0,K=this.delimiter,q=K.length;if((I=S.indexOf(K))!==-1){k=new Array(5);do k[D++]=S.slice(T,I),T=I+q;while((I=S.indexOf(K,T))!==-1);k[D++]=S.slice(T),S=k,A=D}else S=[S],A=1}else E==="object"?A=S.length:(S=[S],A=1)}var Z=null,oe,O,$,Q,ne,J=S[P],W=S[P+1],X,re;if(P===A)C._listeners&&(typeof C._listeners=="function"?(v&&v.push(C._listeners),Z=[C]):(v&&v.push.apply(v,C._listeners),Z=[C]));else if(J==="*"){for(X=f(C),I=X.length;I-- >0;)oe=X[I],oe!=="_listeners"&&(re=F(v,S,C[oe],P+1,A),re&&(Z?Z.push.apply(Z,re):Z=re));return Z}else if(J==="**"){for(ne=P+1===A||P+2===A&&W==="*",ne&&C._listeners&&(Z=F(v,S,C,A,A)),X=f(C),I=X.length;I-- >0;)oe=X[I],oe!=="_listeners"&&(oe==="*"||oe==="**"?(C[oe]._listeners&&!ne&&(re=F(v,S,C[oe],A,A),re&&(Z?Z.push.apply(Z,re):Z=re)),re=F(v,S,C[oe],P,A)):oe===W?re=F(v,S,C[oe],P+2,A):re=F(v,S,C[oe],P,A),re&&(Z?Z.push.apply(Z,re):Z=re));return Z}else C[J]&&(Z=F(v,S,C[J],P+1,A));if(O=C["*"],O&&F(v,S,O,P+1,A),$=C["**"],$)if(P<A)for($._listeners&&F(v,S,$,A,A),X=f($),I=X.length;I-- >0;)oe=X[I],oe!=="_listeners"&&(oe===W?F(v,S,$[oe],P+2,A):oe===J?F(v,S,$[oe],P+1,A):(Q={},Q[oe]=$[oe],F(v,S,{"**":Q},P+1,A)));else $._listeners?F(v,S,$,A,A):$["*"]&&$["*"]._listeners&&F(v,S,$["*"],A,A);return Z}function U(v,S,C){var P=0,A=0,E,k=this.delimiter,I=k.length,D;if(typeof v=="string")if((E=v.indexOf(k))!==-1){D=new Array(5);do D[P++]=v.slice(A,E),A=E+I;while((E=v.indexOf(k,A))!==-1);D[P++]=v.slice(A)}else D=[v],P=1;else D=v,P=v.length;if(P>1){for(E=0;E+1<P;E++)if(D[E]==="**"&&D[E+1]==="**")return}var T=this.listenerTree,K;for(E=0;E<P;E++)if(K=D[E],T=T[K]||(T[K]={}),E===P-1)return T._listeners?(typeof T._listeners=="function"&&(T._listeners=[T._listeners]),C?T._listeners.unshift(S):T._listeners.push(S),!T._listeners.warned&&this._maxListeners>0&&T._listeners.length>this._maxListeners&&(T._listeners.warned=!0,g.call(this,T._listeners.length,K))):T._listeners=S,!0;return!0}function V(v,S,C,P){for(var A=f(v),E=A.length,k,I,D,T=v._listeners,K;E-- >0;)I=A[E],k=v[I],I==="_listeners"?D=C:D=C?C.concat(I):[I],K=P||typeof I=="symbol",T&&S.push(K?D:D.join(this.delimiter)),typeof k=="object"&&V.call(this,k,S,D,K);return S}function L(v){for(var S=f(v),C=S.length,P,A,E;C-- >0;)A=S[C],P=v[A],P&&(E=!0,A!=="_listeners"&&!L(P)&&delete v[A]);return E}function B(v,S,C){this.emitter=v,this.event=S,this.listener=C}B.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function M(v,S,C){if(C===!0)A=!0;else if(C===!1)P=!0;else{if(!C||typeof C!="object")throw TypeError("options should be an object or true");var P=C.async,A=C.promisify,E=C.nextTick,k=C.objectify}if(P||E||A){var I=S,D=S._origin||S;if(E&&!o)throw Error("process.nextTick is not supported");A===n&&(A=S.constructor.name==="AsyncFunction"),S=function(){var T=arguments,K=this,q=this.event;return A?E?Promise.resolve():new Promise(function(Z){u(Z)}).then(function(){return K.event=q,I.apply(K,T)}):(E?process.nextTick:u)(function(){K.event=q,I.apply(K,T)})},S._async=!0,S._origin=D}return[S,k?new B(this,v,S):this]}function _(v){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,v)}_.EventEmitter2=_,_.prototype.listenTo=function(v,S,C){if(typeof v!="object")throw TypeError("target musts be an object");var P=this;C=b(C,{on:n,off:n,reducers:n},{on:N,off:N,reducers:H});function A(E){if(typeof E!="object")throw TypeError("events must be an object");var k=C.reducers,I=G.call(P,v),D;I===-1?D=new m(P,v,C):D=P._observers[I];for(var T=f(E),K=T.length,q,Z=typeof k=="function",oe=0;oe<K;oe++)q=T[oe],D.subscribe(q,E[q]||q,Z?k:k&&k[q])}return i(S)?A(y(S)):A(typeof S=="string"?y(S.split(/\s+/)):S),this},_.prototype.stopListeningTo=function(v,S){var C=this._observers;if(!C)return!1;var P=C.length,A,E=!1;if(v&&typeof v!="object")throw TypeError("target should be an object");for(;P-- >0;)A=C[P],(!v||A._target===v)&&(A.unsubscribe(S),E=!0);return E},_.prototype.delimiter=".",_.prototype.setMaxListeners=function(v){v!==n&&(this._maxListeners=v,this._conf||(this._conf={}),this._conf.maxListeners=v)},_.prototype.getMaxListeners=function(){return this._maxListeners},_.prototype.event="",_.prototype.once=function(v,S,C){return this._once(v,S,!1,C)},_.prototype.prependOnceListener=function(v,S,C){return this._once(v,S,!0,C)},_.prototype._once=function(v,S,C,P){return this._many(v,1,S,C,P)},_.prototype.many=function(v,S,C,P){return this._many(v,S,C,!1,P)},_.prototype.prependMany=function(v,S,C,P){return this._many(v,S,C,!0,P)},_.prototype._many=function(v,S,C,P,A){var E=this;if(typeof C!="function")throw new Error("many only accepts instances of Function");function k(){return--S===0&&E.off(v,k),C.apply(this,arguments)}return k._origin=C,this._on(v,k,P,A)},_.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var v=arguments[0],S,C=this.wildcard,P,A,E,k,I;if(v==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(C&&(S=v,v!=="newListener"&&v!=="removeListener"&&typeof v=="object")){if(A=v.length,a){for(E=0;E<A;E++)if(typeof v[E]=="symbol"){I=!0;break}}I||(v=v.join(this.delimiter))}var D=arguments.length,T;if(this._all&&this._all.length)for(T=this._all.slice(),E=0,A=T.length;E<A;E++)switch(this.event=v,D){case 1:T[E].call(this,v);break;case 2:T[E].call(this,v,arguments[1]);break;case 3:T[E].call(this,v,arguments[1],arguments[2]);break;default:T[E].apply(this,arguments)}if(C)T=[],F.call(this,T,S,this.listenerTree,0,A);else if(T=this._events[v],typeof T=="function"){switch(this.event=v,D){case 1:T.call(this);break;case 2:T.call(this,arguments[1]);break;case 3:T.call(this,arguments[1],arguments[2]);break;default:for(P=new Array(D-1),k=1;k<D;k++)P[k-1]=arguments[k];T.apply(this,P)}return!0}else T&&(T=T.slice());if(T&&T.length){if(D>3)for(P=new Array(D-1),k=1;k<D;k++)P[k-1]=arguments[k];for(E=0,A=T.length;E<A;E++)switch(this.event=v,D){case 1:T[E].call(this);break;case 2:T[E].call(this,arguments[1]);break;case 3:T[E].call(this,arguments[1],arguments[2]);break;default:T[E].apply(this,P)}return!0}else if(!this.ignoreErrors&&!this._all&&v==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},_.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var v=arguments[0],S=this.wildcard,C,P,A,E,k,I;if(v==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(S&&(C=v,v!=="newListener"&&v!=="removeListener"&&typeof v=="object")){if(E=v.length,a){for(k=0;k<E;k++)if(typeof v[k]=="symbol"){P=!0;break}}P||(v=v.join(this.delimiter))}var D=[],T=arguments.length,K;if(this._all)for(k=0,E=this._all.length;k<E;k++)switch(this.event=v,T){case 1:D.push(this._all[k].call(this,v));break;case 2:D.push(this._all[k].call(this,v,arguments[1]));break;case 3:D.push(this._all[k].call(this,v,arguments[1],arguments[2]));break;default:D.push(this._all[k].apply(this,arguments))}if(S?(K=[],F.call(this,K,C,this.listenerTree,0)):K=this._events[v],typeof K=="function")switch(this.event=v,T){case 1:D.push(K.call(this));break;case 2:D.push(K.call(this,arguments[1]));break;case 3:D.push(K.call(this,arguments[1],arguments[2]));break;default:for(A=new Array(T-1),I=1;I<T;I++)A[I-1]=arguments[I];D.push(K.apply(this,A))}else if(K&&K.length){if(K=K.slice(),T>3)for(A=new Array(T-1),I=1;I<T;I++)A[I-1]=arguments[I];for(k=0,E=K.length;k<E;k++)switch(this.event=v,T){case 1:D.push(K[k].call(this));break;case 2:D.push(K[k].call(this,arguments[1]));break;case 3:D.push(K[k].call(this,arguments[1],arguments[2]));break;default:D.push(K[k].apply(this,A))}}else if(!this.ignoreErrors&&!this._all&&v==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(D)},_.prototype.on=function(v,S,C){return this._on(v,S,!1,C)},_.prototype.prependListener=function(v,S,C){return this._on(v,S,!0,C)},_.prototype.onAny=function(v){return this._onAny(v,!1)},_.prototype.prependAny=function(v){return this._onAny(v,!0)},_.prototype.addListener=_.prototype.on,_.prototype._onAny=function(v,S){if(typeof v!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),S?this._all.unshift(v):this._all.push(v),this},_.prototype._on=function(v,S,C,P){if(typeof v=="function")return this._onAny(v,S),this;if(typeof S!="function")throw new Error("on only accepts instances of Function");this._events||d.call(this);var A=this,E;return P!==n&&(E=M.call(this,v,S,P),S=E[0],A=E[1]),this._newListener&&this.emit("newListener",v,S),this.wildcard?(U.call(this,v,S,C),A):(this._events[v]?(typeof this._events[v]=="function"&&(this._events[v]=[this._events[v]]),C?this._events[v].unshift(S):this._events[v].push(S),!this._events[v].warned&&this._maxListeners>0&&this._events[v].length>this._maxListeners&&(this._events[v].warned=!0,g.call(this,this._events[v].length,v))):this._events[v]=S,A)},_.prototype.off=function(v,S){if(typeof S!="function")throw new Error("removeListener only takes instances of Function");var C,P=[];if(this.wildcard){var A=typeof v=="string"?v.split(this.delimiter):v.slice();if(P=F.call(this,null,A,this.listenerTree,0),!P)return this}else{if(!this._events[v])return this;C=this._events[v],P.push({_listeners:C})}for(var E=0;E<P.length;E++){var k=P[E];if(C=k._listeners,i(C)){for(var I=-1,D=0,T=C.length;D<T;D++)if(C[D]===S||C[D].listener&&C[D].listener===S||C[D]._origin&&C[D]._origin===S){I=D;break}if(I<0)continue;return this.wildcard?k._listeners.splice(I,1):this._events[v].splice(I,1),C.length===0&&(this.wildcard?delete k._listeners:delete this._events[v]),this._removeListener&&this.emit("removeListener",v,S),this}else(C===S||C.listener&&C.listener===S||C._origin&&C._origin===S)&&(this.wildcard?delete k._listeners:delete this._events[v],this._removeListener&&this.emit("removeListener",v,S))}return this.listenerTree&&L(this.listenerTree),this},_.prototype.offAny=function(v){var S=0,C=0,P;if(v&&this._all&&this._all.length>0){for(P=this._all,S=0,C=P.length;S<C;S++)if(v===P[S])return P.splice(S,1),this._removeListener&&this.emit("removeListenerAny",v),this}else{if(P=this._all,this._removeListener)for(S=0,C=P.length;S<C;S++)this.emit("removeListenerAny",P[S]);this._all=[]}return this},_.prototype.removeListener=_.prototype.off,_.prototype.removeAllListeners=function(v){if(v===n)return!this._events||d.call(this),this;if(this.wildcard){var S=F.call(this,null,v,this.listenerTree,0),C,P;if(!S)return this;for(P=0;P<S.length;P++)C=S[P],C._listeners=null;this.listenerTree&&L(this.listenerTree)}else this._events&&(this._events[v]=null);return this},_.prototype.listeners=function(v){var S=this._events,C,P,A,E,k;if(v===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!S)return[];for(C=f(S),E=C.length,A=[];E-- >0;)P=S[C[E]],typeof P=="function"?A.push(P):A.push.apply(A,P);return A}else{if(this.wildcard){if(k=this.listenerTree,!k)return[];var I=[],D=typeof v=="string"?v.split(this.delimiter):v.slice();return F.call(this,I,D,k,0),I}return S?(P=S[v],P?typeof P=="function"?[P]:P:[]):[]}},_.prototype.eventNames=function(v){var S=this._events;return this.wildcard?V.call(this,this.listenerTree,[],null,v):S?f(S):[]},_.prototype.listenerCount=function(v){return this.listeners(v).length},_.prototype.hasListeners=function(v){if(this.wildcard){var S=[],C=typeof v=="string"?v.split(this.delimiter):v.slice();return F.call(this,S,C,this.listenerTree,0),S.length>0}var P=this._events,A=this._all;return!!(A&&A.length||P&&(v===n?f(P).length:P[v]))},_.prototype.listenersAny=function(){return this._all?this._all:[]},_.prototype.waitFor=function(v,S){var C=this,P=typeof S;return P==="number"?S={timeout:S}:P==="function"&&(S={filter:S}),S=b(S,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:N,Promise:w}),z(S.Promise,function(A,E,k){function I(){var D=S.filter;if(!(D&&!D.apply(C,arguments)))if(C.off(v,I),S.handleError){var T=arguments[0];T?E(T):A(p.apply(null,arguments).slice(1))}else A(p.apply(null,arguments))}k(function(){C.off(v,I)}),C._on(v,I,!1)},{timeout:S.timeout,overload:S.overload})};function R(v,S,C){C=b(C,{Promise,timeout:0,overload:!1},{Promise:w});var P=C.Promise;return z(P,function(A,E,k){var I;if(typeof v.addEventListener=="function"){I=function(){A(p.apply(null,arguments))},k(function(){v.removeEventListener(S,I)}),v.addEventListener(S,I,{once:!0});return}var D=function(){T&&v.removeListener("error",T),A(p.apply(null,arguments))},T;S!=="error"&&(T=function(K){v.removeListener(S,D),E(K)},v.once("error",T)),k(function(){T&&v.removeListener("error",T),v.removeListener(S,D)}),v.once(S,D)},{timeout:C.timeout,overload:C.overload})}var j=_.prototype;Object.defineProperties(_,{defaultMaxListeners:{get:function(){return j._maxListeners},set:function(v){if(typeof v!="number"||v<0||Number.isNaN(v))throw TypeError("n must be a non-negative number");j._maxListeners=v},enumerable:!0},once:{value:R,writable:!0,configurable:!0}}),Object.defineProperties(j,{_maxListeners:{value:s,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=_})()})(Fd)),Fd.exports}var zf=MO();const LO=Ug(zf);var wl,BO=new Uint8Array(16);function DO(){if(!wl&&(wl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!wl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wl(BO)}const UO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pp(t){return typeof t=="string"&&UO.test(t)}var $t=[];for(var $d=0;$d<256;++$d)$t.push(($d+256).toString(16).substr(1));function FO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=($t[t[e+0]]+$t[t[e+1]]+$t[t[e+2]]+$t[t[e+3]]+"-"+$t[t[e+4]]+$t[t[e+5]]+"-"+$t[t[e+6]]+$t[t[e+7]]+"-"+$t[t[e+8]]+$t[t[e+9]]+"-"+$t[t[e+10]]+$t[t[e+11]]+$t[t[e+12]]+$t[t[e+13]]+$t[t[e+14]]+$t[t[e+15]]).toLowerCase();if(!pp(n))throw TypeError("Stringified UUID is invalid");return n}function Xi(t,e,n){t=t||{};var r=t.random||(t.rng||DO)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,FO(r)}const zr=Object.create(null);zr.open="0";zr.close="1";zr.ping="2";zr.pong="3";zr.message="4";zr.upgrade="5";zr.noop="6";const Zl=Object.create(null);Object.keys(zr).forEach(t=>{Zl[zr[t]]=t});const gp={type:"error",data:"parser error"},DA=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",UA=typeof ArrayBuffer=="function",FA=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Fg=({type:t,data:e},n,r)=>DA&&e instanceof Blob?n?r(e):Xy(e,r):UA&&(e instanceof ArrayBuffer||FA(e))?n?r(e):Xy(new Blob([e]),r):r(zr[t]+(e||"")),Xy=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function ev(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Hd;function $O(t,e){if(DA&&t.data instanceof Blob)return t.data.arrayBuffer().then(ev).then(e);if(UA&&(t.data instanceof ArrayBuffer||FA(t.data)))return e(ev(t.data));Fg(t,!1,n=>{Hd||(Hd=new TextEncoder),e(Hd.encode(n))})}const tv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Da=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<tv.length;t++)Da[tv.charCodeAt(t)]=t;const HO=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)s=Da[t.charCodeAt(r)],o=Da[t.charCodeAt(r+1)],a=Da[t.charCodeAt(r+2)],c=Da[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},KO=typeof ArrayBuffer=="function",$g=(t,e)=>{if(typeof t!="string")return{type:"message",data:$A(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:jO(t.substring(1),e)}:Zl[n]?t.length>1?{type:Zl[n],data:t.substring(1)}:{type:Zl[n]}:gp},jO=(t,e)=>{if(KO){const n=HO(t);return $A(n,e)}else return{base64:!0,data:t}},$A=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},HA="",VO=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{Fg(s,!1,a=>{r[o]=a,++i===n&&e(r.join(HA))})})},zO=(t,e)=>{const n=t.split(HA),r=[];for(let i=0;i<n.length;i++){const s=$g(n[i],e);if(r.push(s),s.type==="error")break}return r};function GO(){return new TransformStream({transform(t,e){$O(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Kd;function bl(t){return t.reduce((e,n)=>e+n.length,0)}function El(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function qO(t,e){Kd||(Kd=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(bl(n)<1)break;const c=El(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(bl(n)<2)break;const c=El(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(bl(n)<8)break;const c=El(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(gp);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(bl(n)<i)break;const c=El(n,i);a.enqueue($g(s?c:Kd.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(gp);break}}}})}const KA=4;function Pt(t){if(t)return WO(t)}function WO(t){for(var e in Pt.prototype)t[e]=Pt.prototype[e];return t}Pt.prototype.on=Pt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Pt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Pt.prototype.off=Pt.prototype.removeListener=Pt.prototype.removeAllListeners=Pt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Pt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Pt.prototype.emitReserved=Pt.prototype.emit;Pt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Pt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Gf=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Xn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),QO="arraybuffer";function jA(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const JO=Xn.setTimeout,YO=Xn.clearTimeout;function qf(t,e){e.useNativeTimers?(t.setTimeoutFn=JO.bind(Xn),t.clearTimeoutFn=YO.bind(Xn)):(t.setTimeoutFn=Xn.setTimeout.bind(Xn),t.clearTimeoutFn=Xn.clearTimeout.bind(Xn))}const ZO=1.33;function XO(t){return typeof t=="string"?eN(t):Math.ceil((t.byteLength||t.size)*ZO)}function eN(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function VA(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function tN(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function nN(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class rN extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Hg extends Pt{constructor(e){super(),this.writable=!1,qf(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new rN(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=$g(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=tN(e);return n.length?"?"+n:""}}class iN extends Hg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};zO(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,VO(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=VA()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let zA=!1;try{zA=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const sN=zA;function oN(){}class aN extends iN{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Hr extends Pt{constructor(e,n,r){super(),this.createRequest=e,qf(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=jA(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Hr.requestsCount++,Hr.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=oN,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Hr.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Hr.requestsCount=0;Hr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",nv);else if(typeof addEventListener=="function"){const t="onpagehide"in Xn?"pagehide":"unload";addEventListener(t,nv,!1)}}function nv(){for(let t in Hr.requests)Hr.requests.hasOwnProperty(t)&&Hr.requests[t].abort()}const cN=(function(){const t=GA({xdomain:!1});return t&&t.responseType!==null})();class lN extends aN{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=cN&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Hr(GA,this.uri(),e)}}function GA(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||sN))return new XMLHttpRequest}catch{}if(!e)try{return new Xn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const qA=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class uN extends Hg{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=qA?{}:jA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Fg(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Gf(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=VA()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const jd=Xn.WebSocket||Xn.MozWebSocket;class fN extends uN{createSocket(e,n,r){return qA?new jd(e,n,r):n?new jd(e,n):new jd(e)}doWrite(e,n){this.ws.send(n)}}class dN extends Hg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=qO(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=GO();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Gf(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const hN={websocket:fN,webtransport:dN,polling:lN},pN=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,gN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mp(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=pN.exec(t||""),s={},o=14;for(;o--;)s[gN[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=mN(s,s.path),s.queryKey=yN(s,s.query),s}function mN(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function yN(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const yp=typeof addEventListener=="function"&&typeof removeEventListener=="function",Xl=[];yp&&addEventListener("offline",()=>{Xl.forEach(t=>t())},!1);class as extends Pt{constructor(e,n){if(super(),this.binaryType=QO,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=mp(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=mp(n.host).host);qf(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=nN(this.opts.query)),yp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Xl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=KA,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&as.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",as.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=XO(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Gf(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(as.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),yp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Xl.indexOf(this._offlineEventListener);r!==-1&&Xl.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}as.protocol=KA;class vN extends as{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;as.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;as.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=f=>{const d=new Error("probe error: "+f);d.transport=n.name,s(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function c(){o("socket closed")}function l(f){n&&f.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let wN=class extends vN{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>hN[i]).filter(i=>!!i)),super(e,r)}};function bN(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=mp(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const EN=typeof ArrayBuffer=="function",AN=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,WA=Object.prototype.toString,_N=typeof Blob=="function"||typeof Blob<"u"&&WA.call(Blob)==="[object BlobConstructor]",SN=typeof File=="function"||typeof File<"u"&&WA.call(File)==="[object FileConstructor]";function Kg(t){return EN&&(t instanceof ArrayBuffer||AN(t))||_N&&t instanceof Blob||SN&&t instanceof File}function eu(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(eu(t[n]))return!0;return!1}if(Kg(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return eu(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&eu(t[n]))return!0;return!1}function CN(t){const e=[],n=t.data,r=t;return r.data=vp(n,e),r.attachments=e.length,{packet:r,buffers:e}}function vp(t,e){if(!t)return t;if(Kg(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=vp(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=vp(t[r],e));return n}return t}function xN(t,e){return t.data=wp(t.data,e),delete t.attachments,t}function wp(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=wp(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=wp(t[n],e));return t}const kN=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],PN=5;var He;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(He||(He={}));class TN{constructor(e){this.replacer=e}encode(e){return(e.type===He.EVENT||e.type===He.ACK)&&eu(e)?this.encodeAsBinary({type:e.type===He.EVENT?He.BINARY_EVENT:He.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===He.BINARY_EVENT||e.type===He.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=CN(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function rv(t){return Object.prototype.toString.call(t)==="[object Object]"}class jg extends Pt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===He.BINARY_EVENT;r||n.type===He.BINARY_ACK?(n.type=r?He.EVENT:He.ACK,this.reconstructor=new IN(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Kg(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(He[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===He.BINARY_EVENT||r.type===He.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(jg.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case He.CONNECT:return rv(n);case He.DISCONNECT:return n===void 0;case He.CONNECT_ERROR:return typeof n=="string"||rv(n);case He.EVENT:case He.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&kN.indexOf(n[0])===-1);case He.ACK:case He.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class IN{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=xN(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const RN=Object.freeze(Object.defineProperty({__proto__:null,Decoder:jg,Encoder:TN,get PacketType(){return He},protocol:PN},Symbol.toStringTag,{value:"Module"}));function lr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const ON=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class QA extends Pt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[lr(e,"open",this.onopen.bind(this)),lr(e,"packet",this.onpacket.bind(this)),lr(e,"error",this.onerror.bind(this)),lr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(ON.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:He.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,f=n.pop();this._registerAckCallback(u,f),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:He.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case He.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case He.EVENT:case He.BINARY_EVENT:this.onevent(e);break;case He.ACK:case He.BINARY_ACK:this.onack(e);break;case He.DISCONNECT:this.ondisconnect();break;case He.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:He.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:He.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function ya(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ya.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};ya.prototype.reset=function(){this.attempts=0};ya.prototype.setMin=function(t){this.ms=t};ya.prototype.setMax=function(t){this.max=t};ya.prototype.setJitter=function(t){this.jitter=t};class bp extends Pt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,qf(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ya({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||RN;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new wN(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=lr(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=lr(n,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(lr(e,"ping",this.onping.bind(this)),lr(e,"data",this.ondata.bind(this)),lr(e,"error",this.onerror.bind(this)),lr(e,"close",this.onclose.bind(this)),lr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Gf(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new QA(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const xa={};function tu(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=bN(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=xa[i]&&s in xa[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new bp(r,e):(xa[i]||(xa[i]=new bp(r,e)),c=xa[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(tu,{Manager:bp,Socket:QA,io:tu,connect:tu});function de(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n((function(f){f(u)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}var vn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Nr=[],Qn=[],NN=typeof Uint8Array<"u"?Uint8Array:Array,Vg=!1;function JA(){Vg=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)Nr[e]=t[e],Qn[t.charCodeAt(e)]=e;Qn[45]=62,Qn[95]=63}function MN(t,e,n){for(var r,i,s=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(Nr[(i=r)>>18&63]+Nr[i>>12&63]+Nr[i>>6&63]+Nr[63&i]);return s.join("")}function iv(t){var e;Vg||JA();for(var n=t.length,r=n%3,i="",s=[],o=16383,a=0,c=n-r;a<c;a+=o)s.push(MN(t,a,a+o>c?c:a+o));return r===1?(e=t[n-1],i+=Nr[e>>2],i+=Nr[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Nr[e>>10],i+=Nr[e>>4&63],i+=Nr[e<<2&63],i+="="),s.push(i),s.join("")}function Al(t,e,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+t[e+f],f+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+f],f+=d,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),s-=l}return(h?-1:1)*o*Math.pow(2,s-r)}function YA(t,e,n,r,i,s){var o,a,c,l=8*s-i-1,u=(1<<l)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,g=r?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(o++,c/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*c-1)*Math.pow(2,i),o+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=255&a,h+=g,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[n+h]=255&o,h+=g,o/=256,l-=8);t[n+h-g]|=128*p}var LN={}.toString,ZA=Array.isArray||function(t){return LN.call(t)=="[object Array]"};pe.TYPED_ARRAY_SUPPORT=vn.TYPED_ARRAY_SUPPORT===void 0||vn.TYPED_ARRAY_SUPPORT;var BN=Fu();function Fu(){return pe.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function di(t,e){if(Fu()<e)throw new RangeError("Invalid typed array length");return pe.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=pe.prototype:(t===null&&(t=new pe(e)),t.length=e),t}function pe(t,e,n){if(!(pe.TYPED_ARRAY_SUPPORT||this instanceof pe))return new pe(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ep(this,t)}return XA(this,t,e,n)}function XA(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?(function(i,s,o,a){if(s.byteLength,o<0||s.byteLength<o)throw new RangeError("'offset' is out of bounds");if(s.byteLength<o+(a||0))throw new RangeError("'length' is out of bounds");return s=o===void 0&&a===void 0?new Uint8Array(s):a===void 0?new Uint8Array(s,o):new Uint8Array(s,o,a),pe.TYPED_ARRAY_SUPPORT?(i=s).__proto__=pe.prototype:i=Vd(i,s),i})(t,e,n,r):typeof e=="string"?(function(i,s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!pe.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var a=0|t2(s,o);i=di(i,a);var c=i.write(s,o);return c!==a&&(i=i.slice(0,c)),i})(t,e,n):(function(i,s){if(Mr(s)){var o=0|zg(s.length);return(i=di(i,o)).length===0||s.copy(i,0,0,o),i}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||(a=s.length)!=a?di(i,0):Vd(i,s);if(s.type==="Buffer"&&ZA(s.data))return Vd(i,s.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")})(t,e)}function e2(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Ep(t,e){if(e2(e),t=di(t,e<0?0:0|zg(e)),!pe.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function Vd(t,e){var n=e.length<0?0:0|zg(e.length);t=di(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function zg(t){if(t>=Fu())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Fu().toString(16)+" bytes");return 0|t}function Mr(t){return!(t==null||!t._isBuffer)}function t2(t,e){if(Mr(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $u(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return s2(t).length;default:if(r)return $u(t).length;e=(""+e).toLowerCase(),r=!0}}function DN(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return GN(this,e,n);case"utf8":case"utf-8":return r2(this,e,n);case"ascii":return VN(this,e,n);case"latin1":case"binary":return zN(this,e,n);case"base64":return jN(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qN(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Ss(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function sv(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(typeof e=="string"&&(e=pe.from(e,r)),Mr(e))return e.length===0?-1:ov(t,e,n,r,i);if(typeof e=="number")return e&=255,pe.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):ov(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function ov(t,e,n,r,i){var s,o=1,a=t.length,c=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function l(h,g){return o===1?h[g]:h.readUInt16BE(g*o)}if(i){var u=-1;for(s=n;s<a;s++)if(l(t,s)===l(e,u===-1?0:s-u)){if(u===-1&&(u=s),s-u+1===c)return u*o}else u!==-1&&(s-=s-u),u=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var f=!0,d=0;d<c;d++)if(l(t,s+d)!==l(e,d)){f=!1;break}if(f)return s}return-1}function UN(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function FN(t,e,n,r){return Wf($u(e,t.length-n),t,n,r)}function n2(t,e,n,r){return Wf((function(i){for(var s=[],o=0;o<i.length;++o)s.push(255&i.charCodeAt(o));return s})(e),t,n,r)}function $N(t,e,n,r){return n2(t,e,n,r)}function HN(t,e,n,r){return Wf(s2(e),t,n,r)}function KN(t,e,n,r){return Wf((function(i,s){for(var o,a,c,l=[],u=0;u<i.length&&!((s-=2)<0);++u)a=(o=i.charCodeAt(u))>>8,c=o%256,l.push(c),l.push(a);return l})(e,t.length-n),t,n,r)}function jN(t,e,n){return e===0&&n===t.length?iv(t):iv(t.slice(e,n))}function r2(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,c,l=t[i],u=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(u=l);break;case 2:(192&(s=t[i+1]))==128&&(c=(31&l)<<6|63&s)>127&&(u=c);break;case 3:s=t[i+1],o=t[i+2],(192&s)==128&&(192&o)==128&&(c=(15&l)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(c=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(u=c)}u===null?(u=65533,f=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=f}return(function(d){var h=d.length;if(h<=av)return String.fromCharCode.apply(String,d);for(var g="",p=0;p<h;)g+=String.fromCharCode.apply(String,d.slice(p,p+=av));return g})(r)}pe.poolSize=8192,pe._augment=function(t){return t.__proto__=pe.prototype,t},pe.from=function(t,e,n){return XA(null,t,e,n)},pe.TYPED_ARRAY_SUPPORT&&(pe.prototype.__proto__=Uint8Array.prototype,pe.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&pe[Symbol.species]),pe.alloc=function(t,e,n){return(function(r,i,s,o){return e2(i),i<=0?di(r,i):s!==void 0?typeof o=="string"?di(r,i).fill(s,o):di(r,i).fill(s):di(r,i)})(null,t,e,n)},pe.allocUnsafe=function(t){return Ep(null,t)},pe.allocUnsafeSlow=function(t){return Ep(null,t)},pe.isBuffer=o2,pe.compare=function(t,e){if(!Mr(t)||!Mr(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},pe.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},pe.concat=function(t,e){if(!ZA(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return pe.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=pe.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!Mr(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},pe.byteLength=t2,pe.prototype._isBuffer=!0,pe.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ss(this,e,e+1);return this},pe.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ss(this,e,e+3),Ss(this,e+1,e+2);return this},pe.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ss(this,e,e+7),Ss(this,e+1,e+6),Ss(this,e+2,e+5),Ss(this,e+3,e+4);return this},pe.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?r2(this,0,t):DN.apply(this,arguments)},pe.prototype.equals=function(t){if(!Mr(t))throw new TypeError("Argument must be a Buffer");return this===t||pe.compare(this,t)===0},pe.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},pe.prototype.compare=function(t,e,n,r,i){if(!Mr(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),c=this.slice(r,i),l=t.slice(e,n),u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},pe.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},pe.prototype.indexOf=function(t,e,n){return sv(this,t,e,n,!0)},pe.prototype.lastIndexOf=function(t,e,n){return sv(this,t,e,n,!1)},pe.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return UN(this,t,e,n);case"utf8":case"utf-8":return FN(this,t,e,n);case"ascii":return n2(this,t,e,n);case"latin1":case"binary":return $N(this,t,e,n);case"base64":return HN(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return KN(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},pe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var av=4096;function VN(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function zN(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function GN(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=QN(t[s]);return i}function qN(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function Ot(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function wn(t,e,n,r,i,s){if(!Mr(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function _l(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Sl(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function i2(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function cv(t,e,n,r,i){return i||i2(t,0,n,4),YA(t,e,n,r,23,4),n+4}function lv(t,e,n,r,i){return i||i2(t,0,n,8),YA(t,e,n,r,52,8),n+8}pe.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),pe.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=pe.prototype;else{var i=e-t;n=new pe(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},pe.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Ot(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},pe.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Ot(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},pe.prototype.readUInt8=function(t,e){return e||Ot(t,1,this.length),this[t]},pe.prototype.readUInt16LE=function(t,e){return e||Ot(t,2,this.length),this[t]|this[t+1]<<8},pe.prototype.readUInt16BE=function(t,e){return e||Ot(t,2,this.length),this[t]<<8|this[t+1]},pe.prototype.readUInt32LE=function(t,e){return e||Ot(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},pe.prototype.readUInt32BE=function(t,e){return e||Ot(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},pe.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Ot(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},pe.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Ot(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},pe.prototype.readInt8=function(t,e){return e||Ot(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},pe.prototype.readInt16LE=function(t,e){e||Ot(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},pe.prototype.readInt16BE=function(t,e){e||Ot(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},pe.prototype.readInt32LE=function(t,e){return e||Ot(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},pe.prototype.readInt32BE=function(t,e){return e||Ot(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},pe.prototype.readFloatLE=function(t,e){return e||Ot(t,4,this.length),Al(this,t,!0,23,4)},pe.prototype.readFloatBE=function(t,e){return e||Ot(t,4,this.length),Al(this,t,!1,23,4)},pe.prototype.readDoubleLE=function(t,e){return e||Ot(t,8,this.length),Al(this,t,!0,52,8)},pe.prototype.readDoubleBE=function(t,e){return e||Ot(t,8,this.length),Al(this,t,!1,52,8)},pe.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||wn(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},pe.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||wn(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},pe.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,1,255,0),pe.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},pe.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,2,65535,0),pe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_l(this,t,e,!0),e+2},pe.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,2,65535,0),pe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_l(this,t,e,!1),e+2},pe.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,4,4294967295,0),pe.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Sl(this,t,e,!0),e+4},pe.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,4,4294967295,0),pe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Sl(this,t,e,!1),e+4},pe.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);wn(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&a===0&&this[e+s-1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},pe.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);wn(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&a===0&&this[e+s+1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},pe.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,1,127,-128),pe.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},pe.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,2,32767,-32768),pe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_l(this,t,e,!0),e+2},pe.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,2,32767,-32768),pe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_l(this,t,e,!1),e+2},pe.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,4,2147483647,-2147483648),pe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Sl(this,t,e,!0),e+4},pe.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||wn(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),pe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Sl(this,t,e,!1),e+4},pe.prototype.writeFloatLE=function(t,e,n){return cv(this,t,e,!0,n)},pe.prototype.writeFloatBE=function(t,e,n){return cv(this,t,e,!1,n)},pe.prototype.writeDoubleLE=function(t,e,n){return lv(this,t,e,!0,n)},pe.prototype.writeDoubleBE=function(t,e,n){return lv(this,t,e,!1,n)},pe.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!pe.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},pe.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!pe.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(s=e;s<n;++s)this[s]=t;else{var o=Mr(t)?t:$u(new pe(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var WN=/[^+\/0-9A-Za-z-_]/g;function QN(t){return t<16?"0"+t.toString(16):t.toString(16)}function $u(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function s2(t){return(function(e){var n,r,i,s,o,a;Vg||JA();var c=e.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[c-2]==="="?2:e[c-1]==="="?1:0,a=new NN(3*c/4-o),i=o>0?c-4:c;var l=0;for(n=0,r=0;n<i;n+=4,r+=3)s=Qn[e.charCodeAt(n)]<<18|Qn[e.charCodeAt(n+1)]<<12|Qn[e.charCodeAt(n+2)]<<6|Qn[e.charCodeAt(n+3)],a[l++]=s>>16&255,a[l++]=s>>8&255,a[l++]=255&s;return o===2?(s=Qn[e.charCodeAt(n)]<<2|Qn[e.charCodeAt(n+1)]>>4,a[l++]=255&s):o===1&&(s=Qn[e.charCodeAt(n)]<<10|Qn[e.charCodeAt(n+1)]<<4|Qn[e.charCodeAt(n+2)]>>2,a[l++]=s>>8&255,a[l++]=255&s),a})((function(e){if((e=(function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")})(e).replace(WN,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e})(t))}function Wf(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function o2(t){return t!=null&&(!!t._isBuffer||uv(t)||(function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&uv(e.slice(0,0))})(t))}function uv(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var JN=Object.freeze({__proto__:null,Buffer:pe,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),pe.alloc(+t)},isBuffer:o2,kMaxLength:BN}),er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})})),n}var _o={},Kn={},Qt={};function Hu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function a2(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function c2(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Gg(t,...e){if(!c2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function l2(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");Hu(t.outputLen),Hu(t.blockLen)}function u2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function f2(t,e){Gg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.isBytes=c2,Qt.number=Hu,Qt.bool=a2,Qt.bytes=Gg,Qt.hash=l2,Qt.exists=u2,Qt.output=f2;const YN={number:Hu,bool:a2,bytes:Gg,hash:l2,exists:u2,output:f2};Qt.default=YN,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=o,t.hexToNumber=a,t.bytesToNumberBE=function(f){return a(r(f))},t.numberToBytesBE=function(f,d){return o(f.toString(16).padStart(2*d,"0"))},t.asyncLoop=async function(f,d,h){let g=Date.now();for(let p=0;p<f;p++){h(p);const y=Date.now()-g;y>=0&&y<d||(await(0,t.nextTick)(),g+=y)}},t.utf8ToBytes=c,t.bytesToUtf8=function(f){return new TextDecoder().decode(f)},t.toBytes=function(f){if(typeof f=="string")f=c(f);else{if(!(0,e.isBytes)(f))throw new Error("Uint8Array expected, got "+typeof f);f=u(f)}return f},t.concatBytes=function(...f){let d=0;for(let g=0;g<f.length;g++){const p=f[g];(0,e.bytes)(p),d+=p.length}const h=new Uint8Array(d);for(let g=0,p=0;g<f.length;g++){const y=f[g];h.set(y,p),p+=y.length}return h},t.checkOpts=function(f,d){if(d==null||typeof d!="object")throw new Error("options must be defined");return Object.assign(f,d)},t.equalBytes=function(f,d){if(f.length!==d.length)return!1;let h=0;for(let g=0;g<f.length;g++)h|=f[g]^d[g];return h===0},t.setBigUint64=l,t.u64Lengths=function(f,d){const h=new Uint8Array(16),g=(0,t.createView)(h);return l(g,0,BigInt(d?d.length:0),!0),l(g,8,BigInt(f.length),!0),h},t.isAligned32=function(f){return f.byteOffset%4==0},t.copyBytes=u,t.clean=function(...f){for(let d=0;d<f.length;d++)f[d].fill(0)};const e=Qt;if(t.u8=f=>new Uint8Array(f.buffer,f.byteOffset,f.byteLength),t.u16=f=>new Uint16Array(f.buffer,f.byteOffset,Math.floor(f.byteLength/2)),t.u32=f=>new Uint32Array(f.buffer,f.byteOffset,Math.floor(f.byteLength/4)),t.createView=f=>new DataView(f.buffer,f.byteOffset,f.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},((f,d)=>d.toString(16).padStart(2,"0")));function r(f){(0,e.bytes)(f);let d="";for(let h=0;h<f.length;h++)d+=n[f[h]];return d}const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(f){return f>=i._0&&f<=i._9?f-i._0:f>=i._A&&f<=i._F?f-(i._A-10):f>=i._a&&f<=i._f?f-(i._a-10):void 0}function o(f){if(typeof f!="string")throw new Error("hex string expected, got "+typeof f);const d=f.length,h=d/2;if(d%2)throw new Error("padded hex string expected, got unpadded hex of length "+d);const g=new Uint8Array(h);for(let p=0,y=0;p<h;p++,y+=2){const m=s(f.charCodeAt(y)),b=s(f.charCodeAt(y+1));if(m===void 0||b===void 0){const w=f[y]+f[y+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+y)}g[p]=16*m+b}return g}function a(f){if(typeof f!="string")throw new Error("hex string expected, got "+typeof f);return BigInt(f===""?"0":`0x${f}`)}function c(f){if(typeof f!="string")throw new Error("string expected, got "+typeof f);return new Uint8Array(new TextEncoder().encode(f))}t.nextTick=async()=>{},t.Hash=class{};function l(f,d,h,g){if(typeof f.setBigUint64=="function")return f.setBigUint64(d,h,g);const p=BigInt(32),y=BigInt(4294967295),m=Number(h>>p&y),b=Number(h&y),w=g?4:0,x=g?0:4;f.setUint32(d+w,m,g),f.setUint32(d+x,b,g)}function u(f){return Uint8Array.from(f)}t.wrapCipher=(f,d)=>(Object.assign(d,f),d)})(Kn);var Sc={},Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.AEAD_TAG_LENGTH=Nt.XCHACHA20_NONCE_LENGTH=Nt.CURVE25519_PUBLIC_KEY_SIZE=Nt.ETH_PUBLIC_KEY_SIZE=Nt.UNCOMPRESSED_PUBLIC_KEY_SIZE=Nt.COMPRESSED_PUBLIC_KEY_SIZE=Nt.SECRET_KEY_LENGTH=void 0,Nt.SECRET_KEY_LENGTH=32,Nt.COMPRESSED_PUBLIC_KEY_SIZE=33,Nt.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,Nt.ETH_PUBLIC_KEY_SIZE=64,Nt.CURVE25519_PUBLIC_KEY_SIZE=32,Nt.XCHACHA20_NONCE_LENGTH=24,Nt.AEAD_TAG_LENGTH=16,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=Nt,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}})(Sc);var zd={},Ku={},Jf={},d2={},qg={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.crypto=void 0,Cl.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=i,t.getWebcryptoSubtle=s,t.managedNonce=function(c){return(0,n.number)(c.nonceLength),(l,...u)=>({encrypt(f,...d){const{nonceLength:h}=c,g=i(h),p=c(l,g,...u).encrypt(f,...d),y=(0,r.concatBytes)(g,p);return p.fill(0),y},decrypt(f,...d){const{nonceLength:h}=c,g=f.subarray(0,h),p=f.subarray(h);return c(l,g,...u).decrypt(p,...d)}})};const e=Cl,n=Qt,r=Kn;function i(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")}function s(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(c,l,u,f){const d=s(),h=await d.importKey("raw",c,l,!0,["encrypt"]),g=await d.encrypt(u,h,f);return new Uint8Array(g)},async decrypt(c,l,u,f){const d=s(),h=await d.importKey("raw",c,l,!0,["decrypt"]),g=await d.decrypt(u,h,f);return new Uint8Array(g)}};const o={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(c){return(l,u,f)=>{(0,n.bytes)(l),(0,n.bytes)(u);const d={name:c,length:8*l.length},h=(function(g,p,y){if(g===o.CBC)return{name:o.CBC,iv:p};if(g===o.CTR)return{name:o.CTR,counter:p,length:64};if(g===o.GCM)return y?{name:o.GCM,iv:p,additionalData:y}:{name:o.GCM,iv:p};throw new Error("unknown aes block mode")})(c,u,f);return{encrypt:g=>((0,n.bytes)(g),t.utils.encrypt(l,d,h,g)),decrypt:g=>((0,n.bytes)(g),t.utils.decrypt(l,d,h,g))}}}t.cbc=a(o.CBC),t.ctr=a(o.CTR),t.gcm=a(o.GCM)})(qg);var h2={},Mt={},hi={},Bn={};function ju(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function p2(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function g2(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Wg(t,...e){if(!g2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function m2(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ju(t.outputLen),ju(t.blockLen)}function y2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function v2(t,e){Wg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.isBytes=g2,Bn.number=ju,Bn.bool=p2,Bn.bytes=Wg,Bn.hash=m2,Bn.exists=y2,Bn.output=v2;const ZN={number:ju,bool:p2,bytes:Wg,hash:m2,exists:y2,output:v2};Bn.default=ZN;var ki={},xl={};Object.defineProperty(xl,"__esModule",{value:!0}),xl.crypto=void 0,xl.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"},t.byteSwap32=function(l){for(let u=0;u<l.length;u++)l[u]=(0,t.byteSwap)(l[u])},t.bytesToHex=function(l){(0,n.bytes)(l);let u="";for(let f=0;f<l.length;f++)u+=r[l[f]];return u},t.hexToBytes=function(l){if(typeof l!="string")throw new Error("hex string expected, got "+typeof l);const u=l.length,f=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);const d=new Uint8Array(f);for(let h=0,g=0;h<f;h++,g+=2){const p=s(l.charCodeAt(g)),y=s(l.charCodeAt(g+1));if(p===void 0||y===void 0){const m=l[g]+l[g+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+g)}d[h]=16*p+y}return d},t.asyncLoop=async function(l,u,f){let d=Date.now();for(let h=0;h<l;h++){f(h);const g=Date.now()-d;g>=0&&g<u||(await(0,t.nextTick)(),d+=g)}},t.utf8ToBytes=o,t.toBytes=a,t.concatBytes=function(...l){let u=0;for(let d=0;d<l.length;d++){const h=l[d];(0,n.bytes)(h),u+=h.length}const f=new Uint8Array(u);for(let d=0,h=0;d<l.length;d++){const g=l[d];f.set(g,h),h+=g.length}return f},t.checkOpts=function(l,u){if(u!==void 0&&c.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(l,u)},t.wrapConstructor=function(l){const u=d=>l().update(a(d)).digest(),f=l();return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=()=>l(),u},t.wrapConstructorWithOpts=function(l){const u=(d,h)=>l(h).update(a(d)).digest(),f=l({});return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=d=>l(d),u},t.wrapXOFConstructorWithOpts=function(l){const u=(d,h)=>l(h).update(a(d)).digest(),f=l({});return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=d=>l(d),u},t.randomBytes=function(l=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(l));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")};const e=xl,n=Bn;t.u8=l=>new Uint8Array(l.buffer,l.byteOffset,l.byteLength),t.u32=l=>new Uint32Array(l.buffer,l.byteOffset,Math.floor(l.byteLength/4)),t.createView=l=>new DataView(l.buffer,l.byteOffset,l.byteLength),t.rotr=(l,u)=>l<<32-u|l>>>u,t.rotl=(l,u)=>l<<u|l>>>32-u>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=l=>l<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255,t.byteSwapIfBE=t.isLE?l=>l:l=>(0,t.byteSwap)(l);const r=Array.from({length:256},((l,u)=>u.toString(16).padStart(2,"0"))),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(l){return l>=i._0&&l<=i._9?l-i._0:l>=i._A&&l<=i._F?l-(i._A-10):l>=i._a&&l<=i._f?l-(i._a-10):void 0}function o(l){if(typeof l!="string")throw new Error("utf8ToBytes expected string, got "+typeof l);return new Uint8Array(new TextEncoder().encode(l))}function a(l){return typeof l=="string"&&(l=o(l)),(0,n.bytes)(l),l}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString})(ki),Object.defineProperty(hi,"__esModule",{value:!0}),hi.HashMD=hi.Maj=hi.Chi=void 0;const Gd=Bn,ka=ki;hi.Chi=(t,e,n)=>t&e^~t&n;hi.Maj=(t,e,n)=>t&e^t&n^e&n;hi.HashMD=class extends ka.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,ka.createView)(this.buffer)}update(t){(0,Gd.exists)(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=(0,ka.toBytes)(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const a=(0,ka.createView)(t);for(;r<=i-s;s+=r)this.process(a,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,Gd.exists)(this),(0,Gd.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let u=s;u<r;u++)e[u]=0;(function(u,f,d,h){if(typeof u.setBigUint64=="function")return u.setBigUint64(f,d,h);const g=BigInt(32),p=BigInt(4294967295),y=Number(d>>g&p),m=Number(d&p),b=h?4:0,w=h?0:4;u.setUint32(f+b,y,h),u.setUint32(f+w,m,h)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=(0,ka.createView)(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}};var Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.add5L=Re.add5H=Re.add4H=Re.add4L=Re.add3H=Re.add3L=Re.rotlBL=Re.rotlBH=Re.rotlSL=Re.rotlSH=Re.rotr32L=Re.rotr32H=Re.rotrBL=Re.rotrBH=Re.rotrSL=Re.rotrSH=Re.shrSL=Re.shrSH=Re.toBig=void 0,Re.fromBig=Qg,Re.split=w2,Re.add=N2;const kl=BigInt(2**32-1),Ap=BigInt(32);function Qg(t,e=!1){return e?{h:Number(t&kl),l:Number(t>>Ap&kl)}:{h:0|Number(t>>Ap&kl),l:0|Number(t&kl)}}function w2(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Qg(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const b2=(t,e)=>BigInt(t>>>0)<<Ap|BigInt(e>>>0);Re.toBig=b2;const E2=(t,e,n)=>t>>>n;Re.shrSH=E2;const A2=(t,e,n)=>t<<32-n|e>>>n;Re.shrSL=A2;const _2=(t,e,n)=>t>>>n|e<<32-n;Re.rotrSH=_2;const S2=(t,e,n)=>t<<32-n|e>>>n;Re.rotrSL=S2;const C2=(t,e,n)=>t<<64-n|e>>>n-32;Re.rotrBH=C2;const x2=(t,e,n)=>t>>>n-32|e<<64-n;Re.rotrBL=x2;const k2=(t,e)=>e;Re.rotr32H=k2;const P2=(t,e)=>t;Re.rotr32L=P2;const T2=(t,e,n)=>t<<n|e>>>32-n;Re.rotlSH=T2;const I2=(t,e,n)=>e<<n|t>>>32-n;Re.rotlSL=I2;const R2=(t,e,n)=>e<<n-32|t>>>64-n;Re.rotlBH=R2;const O2=(t,e,n)=>t<<n-32|e>>>64-n;function N2(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}Re.rotlBL=O2;const M2=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Re.add3L=M2;const L2=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Re.add3H=L2;const B2=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Re.add4L=B2;const D2=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;Re.add4H=D2;const U2=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);Re.add5L=U2;const F2=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;Re.add5H=F2;const XN={fromBig:Qg,split:w2,toBig:b2,shrSH:E2,shrSL:A2,rotrSH:_2,rotrSL:S2,rotrBH:C2,rotrBL:x2,rotr32H:k2,rotr32L:P2,rotlSH:T2,rotlSL:I2,rotlBH:R2,rotlBL:O2,add:N2,add3L:M2,add3H:L2,add4L:B2,add4H:D2,add5H:F2,add5L:U2};Re.default=XN,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.sha384=Mt.sha512_256=Mt.sha512_224=Mt.sha512=Mt.SHA384=Mt.SHA512_256=Mt.SHA512_224=Mt.SHA512=void 0;const eM=hi,Le=Re,Pl=ki,[tM,nM]=Le.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),Mi=new Uint32Array(80),Li=new Uint32Array(80);class Zc extends eM.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:h,Gl:g,Hh:p,Hl:y}=this;return[e,n,r,i,s,o,a,c,l,u,f,d,h,g,p,y]}set(e,n,r,i,s,o,a,c,l,u,f,d,h,g,p,y){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|i,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|c,this.Eh=0|l,this.El=0|u,this.Fh=0|f,this.Fl=0|d,this.Gh=0|h,this.Gl=0|g,this.Hh=0|p,this.Hl=0|y}process(e,n){for(let w=0;w<16;w++,n+=4)Mi[w]=e.getUint32(n),Li[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const x=0|Mi[w-15],N=0|Li[w-15],H=Le.default.rotrSH(x,N,1)^Le.default.rotrSH(x,N,8)^Le.default.shrSH(x,N,7),z=Le.default.rotrSL(x,N,1)^Le.default.rotrSL(x,N,8)^Le.default.shrSL(x,N,7),G=0|Mi[w-2],F=0|Li[w-2],U=Le.default.rotrSH(G,F,19)^Le.default.rotrBH(G,F,61)^Le.default.shrSH(G,F,6),V=Le.default.rotrSL(G,F,19)^Le.default.rotrBL(G,F,61)^Le.default.shrSL(G,F,6),L=Le.default.add4L(z,V,Li[w-7],Li[w-16]),B=Le.default.add4H(L,H,U,Mi[w-7],Mi[w-16]);Mi[w]=0|B,Li[w]=0|L}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:h,Fl:g,Gh:p,Gl:y,Hh:m,Hl:b}=this;for(let w=0;w<80;w++){const x=Le.default.rotrSH(f,d,14)^Le.default.rotrSH(f,d,18)^Le.default.rotrBH(f,d,41),N=Le.default.rotrSL(f,d,14)^Le.default.rotrSL(f,d,18)^Le.default.rotrBL(f,d,41),H=f&h^~f&p,z=d&g^~d&y,G=Le.default.add5L(b,N,z,nM[w],Li[w]),F=Le.default.add5H(G,m,x,H,tM[w],Mi[w]),U=0|G,V=Le.default.rotrSH(r,i,28)^Le.default.rotrBH(r,i,34)^Le.default.rotrBH(r,i,39),L=Le.default.rotrSL(r,i,28)^Le.default.rotrBL(r,i,34)^Le.default.rotrBL(r,i,39),B=r&s^r&a^s&a,M=i&o^i&c^o&c;m=0|p,b=0|y,p=0|h,y=0|g,h=0|f,g=0|d,{h:f,l:d}=Le.default.add(0|l,0|u,0|F,0|U),l=0|a,u=0|c,a=0|s,c=0|o,s=0|r,o=0|i;const _=Le.default.add3L(U,L,M);r=Le.default.add3H(_,F,V,B),i=0|_}({h:r,l:i}=Le.default.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:s,l:o}=Le.default.add(0|this.Bh,0|this.Bl,0|s,0|o),{h:a,l:c}=Le.default.add(0|this.Ch,0|this.Cl,0|a,0|c),{h:l,l:u}=Le.default.add(0|this.Dh,0|this.Dl,0|l,0|u),{h:f,l:d}=Le.default.add(0|this.Eh,0|this.El,0|f,0|d),{h,l:g}=Le.default.add(0|this.Fh,0|this.Fl,0|h,0|g),{h:p,l:y}=Le.default.add(0|this.Gh,0|this.Gl,0|p,0|y),{h:m,l:b}=Le.default.add(0|this.Hh,0|this.Hl,0|m,0|b),this.set(r,i,s,o,a,c,l,u,f,d,h,g,p,y,m,b)}roundClean(){Mi.fill(0),Li.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Mt.SHA512=Zc;class $2 extends Zc{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}Mt.SHA512_224=$2;class H2 extends Zc{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}Mt.SHA512_256=H2;class fv extends Zc{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}Mt.SHA384=fv,Mt.sha512=(0,Pl.wrapConstructor)((()=>new Zc)),Mt.sha512_224=(0,Pl.wrapConstructor)((()=>new $2)),Mt.sha512_256=(0,Pl.wrapConstructor)((()=>new H2)),Mt.sha384=(0,Pl.wrapConstructor)((()=>new fv));var _p={},To={},Je={},De={};Object.defineProperty(De,"__esModule",{value:!0}),De.notImplemented=De.bitMask=void 0,De.isBytes=Vu,De.abytes=zu,De.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},De.bytesToHex=qd,De.numberToHexUnpadded=dv,De.hexToNumber=Wd,De.hexToBytes=ru,De.bytesToNumberBE=function(t){return Wd(qd(t))},De.bytesToNumberLE=function(t){return zu(t),Wd(qd(Uint8Array.from(t).reverse()))},De.numberToBytesBE=pv,De.numberToBytesLE=function(t,e){return pv(t,e).reverse()},De.numberToVarBytesBE=function(t){return ru(dv(t))},De.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=ru(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!Vu(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r},De.concatBytes=gv,De.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},De.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},De.inRange=mv,De.aInRange=function(t,e,n,r){if(!mv(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},De.bitLen=function(t){let e;for(e=0;t>Sp;t>>=nu,e+=1);return e},De.bitGet=function(t,e){return t>>BigInt(e)&nu},De.bitSet=function(t,e,n){return t|(n?nu:Sp)<<BigInt(e)},De.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Jd(t),i=Jd(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=Jd())=>{i=a(yv([0]),u),r=a(),u.length!==0&&(i=a(yv([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const f=[];for(;u<e;){r=a();const d=r.slice();f.push(d),u+=r.length}return gv(...f)};return(u,f)=>{let d;for(o(),c(u);!(d=f(l()));)c();return o(),d}},De.validateObject=function(t,e,n={}){const r=(i,s,o)=>{const a=sM[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[i];if(!(o&&c===void 0||a(c,t)))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t},De.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}};const Sp=BigInt(0),nu=BigInt(1),rM=BigInt(2);function Vu(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function zu(t){if(!Vu(t))throw new Error("Uint8Array expected")}const iM=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function qd(t){zu(t);let e="";for(let n=0;n<t.length;n++)e+=iM[t[n]];return e}function dv(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function Wd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Jr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function hv(t){return t>=Jr._0&&t<=Jr._9?t-Jr._0:t>=Jr._A&&t<=Jr._F?t-(Jr._A-10):t>=Jr._a&&t<=Jr._f?t-(Jr._a-10):void 0}function ru(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=hv(t.charCodeAt(s)),a=hv(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=16*o+a}return r}function pv(t,e){return ru(t.toString(16).padStart(2*e,"0"))}function gv(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];zu(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const Qd=t=>typeof t=="bigint"&&Sp<=t;function mv(t,e,n){return Qd(t)&&Qd(e)&&Qd(n)&&e<=t&&t<n}De.bitMask=t=>(rM<<BigInt(t-1))-nu;const Jd=t=>new Uint8Array(t),yv=t=>Uint8Array.from(t),sM={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Vu(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};De.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(Je,"__esModule",{value:!0}),Je.isNegativeLE=void 0,Je.mod=Mn,Je.pow=K2,Je.pow2=function(t,e,n){let r=t;for(;e-- >Bt;)r*=r,r%=n;return r},Je.invert=Tl,Je.tonelliShanks=j2,Je.FpSqrt=bv,Je.validateField=function(t){const e=aM.reduce(((n,r)=>(n[r]="function",n)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,Tn.validateObject)(t,e)},Je.FpPow=Ev,Je.FpInvertBatch=Av,Je.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?Tl(n,t.ORDER):t.inv(n))},Je.FpLegendre=_v,Je.FpIsSquare=function(t){const e=_v(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},Je.nLength=Yd,Je.Field=function(t,e,n=!1,r={}){if(t<=Bt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Yd(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=bv(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,Tn.bitMask)(i),ZERO:Bt,ONE:ot,create:c=>Mn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return Bt<=c&&c<t},is0:c=>c===Bt,isOdd:c=>(c&ot)===ot,neg:c=>Mn(-c,t),eql:(c,l)=>c===l,sqr:c=>Mn(c*c,t),add:(c,l)=>Mn(c+l,t),sub:(c,l)=>Mn(c-l,t),mul:(c,l)=>Mn(c*l,t),pow:(c,l)=>Ev(a,c,l),div:(c,l)=>Mn(c*Tl(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Tl(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>Av(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?(0,Tn.numberToBytesLE)(c,s):(0,Tn.numberToBytesBE)(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?(0,Tn.bytesToNumberLE)(c):(0,Tn.bytesToNumberBE)(c)}});return Object.freeze(a)},Je.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},Je.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},Je.hashToPrivateScalar=function(t,e,n=!1){t=(0,Tn.ensureBytes)("privateHash",t);const r=t.length,i=Yd(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?(0,Tn.bytesToNumberLE)(t):(0,Tn.bytesToNumberBE)(t);return Mn(s,e-ot)+ot},Je.getFieldBytesLength=xp,Je.getMinHashLength=Sv,Je.mapHashToField=function(t,e,n=!1){const r=t.length,i=xp(e),s=Sv(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=Mn(n?(0,Tn.bytesToNumberBE)(t):(0,Tn.bytesToNumberLE)(t),e-ot)+ot;return n?(0,Tn.numberToBytesLE)(o,i):(0,Tn.numberToBytesBE)(o,i)};const Tn=De,Bt=BigInt(0),ot=BigInt(1),es=BigInt(2),oM=BigInt(3),Cp=BigInt(4),vv=BigInt(5),wv=BigInt(8);function Mn(t,e){const n=t%e;return n>=Bt?n:e+n}function K2(t,e,n){if(n<=Bt||e<Bt)throw new Error("Expected power/modulo > 0");if(n===ot)return Bt;let r=ot;for(;e>Bt;)e&ot&&(r=r*t%n),t=t*t%n,e>>=ot;return r}function Tl(t,e){if(t===Bt||e<=Bt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Mn(t,e),r=e,i=Bt,s=ot;for(;n!==Bt;){const o=r%n,a=i-s*(r/n);r=n,n=o,i=s,s=a}if(r!==ot)throw new Error("invert: does not exist");return Mn(i,e)}function j2(t){const e=(t-ot)/es;let n,r,i;for(n=t-ot,r=0;n%es===Bt;n/=es,r++);for(i=es;i<t&&K2(i,e,t)!==t-ot;i++);if(r===1){const o=(t+ot)/Cp;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+ot)/es;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),f=o.pow(a,n);for(;!o.eql(f,o.ONE);){if(o.eql(f,o.ZERO))return o.ZERO;let d=1;for(let g=o.sqr(f);d<c&&!o.eql(g,o.ONE);d++)g=o.sqr(g);const h=o.pow(l,ot<<BigInt(c-d-1));l=o.sqr(h),u=o.mul(u,h),f=o.mul(f,l),c=d}return u}}function bv(t){if(t%Cp===oM){const e=(t+ot)/Cp;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%wv===vv){const e=(t-vv)/wv;return function(n,r){const i=n.mul(r,es),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,es),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return j2(t)}BigInt(9),BigInt(16);Je.isNegativeLE=(t,e)=>(Mn(t,e)&ot)===ot;const aM=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ev(t,e,n){if(n<Bt)throw new Error("Expected power > 0");if(n===Bt)return t.ONE;if(n===ot)return e;let r=t.ONE,i=e;for(;n>Bt;)n&ot&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ot;return r}function Av(t,e){const n=new Array(e.length),r=e.reduce(((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o))),t.ONE),i=t.inv(r);return e.reduceRight(((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o))),i),n}function _v(t){const e=(t-ot)/es;return(n,r)=>n.pow(r,e)}function Yd(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function xp(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Sv(t){const e=xp(t);return e+Math.ceil(e/2)}Object.defineProperty(To,"__esModule",{value:!0}),To.wNAF=function(t,e){const n=(s,o)=>{const a=o.negate();return s?a:o},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>(r(s),{windows:Math.ceil(e/s)+1,windowSize:2**(s-1)});return{constTimeNegate:n,unsafeLadder(s,o){let a=t.ZERO,c=s;for(;o>cM;)o&Zd&&(a=a.add(c)),c=c.double(),o>>=Zd;return a},precomputeWindow(s,o){const{windows:a,windowSize:c}=i(o),l=[];let u=s,f=u;for(let d=0;d<a;d++){f=u,l.push(f);for(let h=1;h<c;h++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(s,o,a){const{windows:c,windowSize:l}=i(s);let u=t.ZERO,f=t.BASE;const d=BigInt(2**s-1),h=2**s,g=BigInt(s);for(let p=0;p<c;p++){const y=p*l;let m=Number(a&d);a>>=g,m>l&&(m-=h,a+=Zd);const b=y,w=y+Math.abs(m)-1,x=p%2!=0,N=m<0;m===0?f=f.add(n(x,o[b])):u=u.add(n(N,o[w]))}return{p:u,f}},wNAFCached(s,o,a){const c=kv.get(s)||1;let l=Xd.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&Xd.set(s,a(l))),this.wNAF(c,l,o)},setWindowSize(s,o){r(o),kv.set(s,o),Xd.delete(s)}}},To.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((u,f)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${f}`)})),n.forEach(((u,f)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${f}`)}));const i=(0,xv.bitLen)(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,a=new Array(o+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/s)*s;let l=t.ZERO;for(let u=c;u>=0;u-=s){a.fill(t.ZERO);for(let d=0;d<r.length;d++){const h=r[d],g=Number(h>>BigInt(u)&BigInt(o));a[g]=a[g].add(n[d])}let f=t.ZERO;for(let d=a.length-1,h=t.ZERO;d>0;d--)h=h.add(a[d]),f=f.add(h);if(l=l.add(f),u!==0)for(let d=0;d<s;d++)l=l.double()}return l},To.validateBasic=function(t){return(0,Cv.validateField)(t.Fp),(0,xv.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Cv.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const Cv=Je,xv=De,cM=BigInt(0),Zd=BigInt(1),Xd=new WeakMap,kv=new WeakMap;Object.defineProperty(_p,"__esModule",{value:!0}),_p.twistedEdwards=function(t){const e=(function(B){const M=(0,eh.validateBasic)(B);return bn.validateObject(B,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...M})})(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=Il<<BigInt(8*a)-En,u=n.create,f=(0,Pv.Field)(e.n,e.nBitLength),d=e.uvRatio||((B,M)=>{try{return{isValid:!0,value:n.sqrt(B*n.inv(M))}}catch{return{isValid:!1,value:ir}}}),h=e.adjustScalarBytes||(B=>B),g=e.domain||((B,M,_)=>{if((0,In.abool)("phflag",_),M.length||_)throw new Error("Contexts/pre-hash are not supported");return B});function p(B,M){bn.aInRange("coordinate "+B,M,ir,l)}function y(B){if(!(B instanceof w))throw new Error("ExtendedPoint expected")}const m=(0,In.memoized)(((B,M)=>{const{ex:_,ey:R,ez:j}=B,v=B.is0();M==null&&(M=v?lM:n.inv(j));const S=u(_*M),C=u(R*M),P=u(j*M);if(v)return{x:ir,y:En};if(P!==En)throw new Error("invZ was invalid");return{x:S,y:C}})),b=(0,In.memoized)((B=>{const{a:M,d:_}=e;if(B.is0())throw new Error("bad point: ZERO");const{ex:R,ey:j,ez:v,et:S}=B,C=u(R*R),P=u(j*j),A=u(v*v),E=u(A*A),k=u(C*M);if(u(A*u(k+P))!==u(E+u(_*u(C*P))))throw new Error("bad point: equation left != right (1)");if(u(R*j)!==u(v*S))throw new Error("bad point: equation left != right (2)");return!0}));class w{constructor(M,_,R,j){this.ex=M,this.ey=_,this.ez=R,this.et=j,p("x",M),p("y",_),p("z",R),p("t",j),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(M){if(M instanceof w)throw new Error("extended point not allowed");const{x:_,y:R}=M||{};return p("x",_),p("y",R),new w(_,R,En,u(_*R))}static normalizeZ(M){const _=n.invertBatch(M.map((R=>R.ez)));return M.map(((R,j)=>R.toAffine(_[j]))).map(w.fromAffine)}static msm(M,_){return(0,eh.pippenger)(w,f,M,_)}_setWindowSize(M){H.setWindowSize(this,M)}assertValidity(){b(this)}equals(M){y(M);const{ex:_,ey:R,ez:j}=this,{ex:v,ey:S,ez:C}=M,P=u(_*C),A=u(v*j),E=u(R*C),k=u(S*j);return P===A&&E===k}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:M}=e,{ex:_,ey:R,ez:j}=this,v=u(_*_),S=u(R*R),C=u(Il*u(j*j)),P=u(M*v),A=_+R,E=u(u(A*A)-v-S),k=P+S,I=k-C,D=P-S,T=u(E*I),K=u(k*D),q=u(E*D),Z=u(I*k);return new w(T,K,Z,q)}add(M){y(M);const{a:_,d:R}=e,{ex:j,ey:v,ez:S,et:C}=this,{ex:P,ey:A,ez:E,et:k}=M;if(_===BigInt(-1)){const W=u((v-j)*(A+P)),X=u((v+j)*(A-P)),re=u(X-W);if(re===ir)return this.double();const ie=u(S*Il*k),ae=u(C*Il*E),he=ae+ie,ue=X+W,ge=ae-ie,se=u(he*re),Y=u(ue*ge),ve=u(he*ge),Te=u(re*ue);return new w(se,Y,Te,ve)}const I=u(j*P),D=u(v*A),T=u(C*R*k),K=u(S*E),q=u((j+v)*(P+A)-I-D),Z=K-T,oe=K+T,O=u(D-_*I),$=u(q*Z),Q=u(oe*O),ne=u(q*O),J=u(Z*oe);return new w($,Q,J,ne)}subtract(M){return this.add(M.negate())}wNAF(M){return H.wNAFCached(this,M,w.normalizeZ)}multiply(M){const _=M;bn.aInRange("scalar",_,En,r);const{p:R,f:j}=this.wNAF(_);return w.normalizeZ([R,j])[0]}multiplyUnsafe(M){const _=M;return bn.aInRange("scalar",_,ir,r),_===ir?N:this.equals(N)||_===En?this:this.equals(x)?this.wNAF(_).p:H.unsafeLadder(this,_)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return H.unsafeLadder(this,r).is0()}toAffine(M){return m(this,M)}clearCofactor(){const{h:M}=e;return M===En?this:this.multiplyUnsafe(M)}static fromHex(M,_=!1){const{d:R,a:j}=e,v=n.BYTES;M=(0,In.ensureBytes)("pointHex",M,v),(0,In.abool)("zip215",_);const S=M.slice(),C=M[v-1];S[v-1]=-129&C;const P=bn.bytesToNumberLE(S),A=_?l:n.ORDER;bn.aInRange("pointHex.y",P,ir,A);const E=u(P*P),k=u(E-En),I=u(R*E-j);let{isValid:D,value:T}=d(k,I);if(!D)throw new Error("Point.fromHex: invalid y coordinate");const K=(T&En)===En,q=(128&C)!=0;if(!_&&T===ir&&q)throw new Error("Point.fromHex: x=0 and x_0=1");return q!==K&&(T=u(-T)),w.fromAffine({x:T,y:P})}static fromPrivateKey(M){return F(M).point}toRawBytes(){const{x:M,y:_}=this.toAffine(),R=bn.numberToBytesLE(_,n.BYTES);return R[R.length-1]|=M&En?128:0,R}toHex(){return bn.bytesToHex(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,En,u(e.Gx*e.Gy)),w.ZERO=new w(ir,En,En,ir);const{BASE:x,ZERO:N}=w,H=(0,eh.wNAF)(w,8*a);function z(B){return(0,Pv.mod)(B,r)}function G(B){return z(bn.bytesToNumberLE(B))}function F(B){const M=a;B=(0,In.ensureBytes)("private key",B,M);const _=(0,In.ensureBytes)("hashed private key",s(B),2*M),R=h(_.slice(0,M)),j=_.slice(M,2*M),v=G(R),S=x.multiply(v),C=S.toRawBytes();return{head:R,prefix:j,scalar:v,point:S,pointBytes:C}}function U(B=new Uint8Array,...M){const _=bn.concatBytes(...M);return G(s(g(_,(0,In.ensureBytes)("context",B),!!i)))}const V=uM;return x._setWindowSize(8),{CURVE:e,getPublicKey:function(B){return F(B).pointBytes},sign:function(B,M,_={}){B=(0,In.ensureBytes)("message",B),i&&(B=i(B));const{prefix:R,scalar:j,pointBytes:v}=F(M),S=U(_.context,R,B),C=x.multiply(S).toRawBytes(),P=z(S+U(_.context,C,v,B)*j);bn.aInRange("signature.s",P,ir,r);const A=bn.concatBytes(C,bn.numberToBytesLE(P,n.BYTES));return(0,In.ensureBytes)("result",A,2*a)},verify:function(B,M,_,R=V){const{context:j,zip215:v}=R,S=n.BYTES;B=(0,In.ensureBytes)("signature",B,2*S),M=(0,In.ensureBytes)("message",M),v!==void 0&&(0,In.abool)("zip215",v),i&&(M=i(M));const C=bn.bytesToNumberLE(B.slice(S,2*S));let P,A,E;try{P=w.fromHex(_,v),A=w.fromHex(B.slice(0,S),v),E=x.multiplyUnsafe(C)}catch{return!1}if(!v&&P.isSmallOrder())return!1;const k=U(j,A.toRawBytes(),P.toRawBytes(),M);return A.add(P.multiplyUnsafe(k)).subtract(E).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:F,randomPrivateKey:()=>o(n.BYTES),precompute:(B=8,M=w.BASE)=>(M._setWindowSize(B),M.multiply(BigInt(3)),M)}}};const eh=To,Pv=Je,bn=De,In=De,ir=BigInt(0),En=BigInt(1),Il=BigInt(2),lM=BigInt(8),uM={zip215:!0};var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.expand_message_xmd=V2,Wi.expand_message_xof=z2,Wi.hash_to_field=th,Wi.isogenyMap=function(t,e){const n=e.map((r=>Array.from(r).reverse()));return(r,i)=>{const[s,o,a,c]=n.map((l=>l.reduce(((u,f)=>t.add(t.mul(u,r),f)))));return r=t.div(s,o),i=t.mul(i,t.div(a,c)),{x:r,y:i}}},Wi.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=th(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const s=th(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const s of r)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);const i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};const fM=Je,Wt=De,dM=Wt.bytesToNumberBE;function Qi(t,e){if(Cc(t),Cc(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function hM(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Cc(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function V2(t,e,n,r){(0,Wt.abytes)(t),(0,Wt.abytes)(e),Cc(n),e.length>255&&(e=r((0,Wt.concatBytes)((0,Wt.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,Wt.concatBytes)(e,Qi(e.length,1)),c=Qi(0,s),l=Qi(n,2),u=new Array(o),f=r((0,Wt.concatBytes)(c,t,l,Qi(0,1),a));u[0]=r((0,Wt.concatBytes)(f,Qi(1,1),a));for(let d=1;d<=o;d++){const h=[hM(f,u[d-1]),Qi(d+1,1),a];u[d]=r((0,Wt.concatBytes)(...h))}return(0,Wt.concatBytes)(...u).slice(0,n)}function z2(t,e,n,r,i){if((0,Wt.abytes)(t),(0,Wt.abytes)(e),Cc(n),e.length>255){const s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,Wt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(Qi(n,2)).update(e).update(Qi(e.length,1)).digest()}function th(t,e,n){(0,Wt.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;(0,Wt.abytes)(t),Cc(e);const l=typeof c=="string"?(0,Wt.utf8ToBytes)(c):c,u=r.toString(2).length,f=Math.ceil((u+i)/8),d=e*s*f;let h;if(a==="xmd")h=V2(t,l,d,o);else if(a==="xof")h=z2(t,l,d,i,o);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');h=t}const g=new Array(e);for(let p=0;p<e;p++){const y=new Array(s);for(let m=0;m<s;m++){const b=f*(m+p*s),w=h.subarray(b,b+f);y[m]=(0,fM.mod)(dM(w),r)}g[p]=y}return g}var kp={};Object.defineProperty(kp,"__esModule",{value:!0}),kp.montgomery=function(t){const e=(function(p){return(0,Bi.validateObject)(p,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...p})})(t),{P:n}=e,r=p=>(0,Tv.mod)(p,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(p=>p),c=e.powPminus2||(p=>(0,Tv.pow)(p,n-BigInt(2),n));function l(p,y,m){const b=r(p*(y-m));return[y=r(y-b),m=r(m+b)]}const u=(e.a-BigInt(2))/BigInt(4);function f(p){return(0,Bi.numberToBytesLE)(r(p),s)}function d(p,y){const m=(function(x){const N=(0,Bi.ensureBytes)("u coordinate",x,s);return o===32&&(N[31]&=127),(0,Bi.bytesToNumberLE)(N)})(y),b=(function(x){const N=(0,Bi.ensureBytes)("scalar",x),H=N.length;if(H!==s&&H!==o)throw new Error(`Expected ${s} or ${o} bytes, got ${H}`);return(0,Bi.bytesToNumberLE)(a(N))})(p),w=(function(x,N){(0,Bi.aInRange)("u",x,go,n),(0,Bi.aInRange)("scalar",N,go,n);const H=N,z=x;let G,F=nh,U=go,V=x,L=nh,B=go;for(let _=BigInt(i-1);_>=go;_--){const R=H>>_&nh;B^=R,G=l(B,F,V),F=G[0],V=G[1],G=l(B,U,L),U=G[0],L=G[1],B=R;const j=F+U,v=r(j*j),S=F-U,C=r(S*S),P=v-C,A=V+L,E=r((V-L)*j),k=r(A*S),I=E+k,D=E-k;V=r(I*I),L=r(z*r(D*D)),F=r(v*C),U=r(P*(v+r(u*P)))}G=l(B,F,V),F=G[0],V=G[1],G=l(B,U,L),U=G[0],L=G[1];const M=c(U);return r(F*M)})(m,b);if(w===go)throw new Error("Invalid private or public key received");return f(w)}const h=f(e.Gu);function g(p){return d(p,h)}return{scalarMult:d,scalarMultBase:g,getSharedSecret:(p,y)=>d(p,y),getPublicKey:p=>g(p),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:h}};const Tv=Je,Bi=De,go=BigInt(0),nh=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=H,t.edwardsToMontgomeryPriv=function(k){const I=x.hash(k.subarray(0,32));return x.adjustScalarBytes(I).subarray(0,32)};const e=Mt,n=ki,r=_p,i=Wi,s=Je,o=kp,a=De,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),f=BigInt(1),d=BigInt(2),h=BigInt(3),g=BigInt(5),p=BigInt(8);function y(k){const I=BigInt(10),D=BigInt(20),T=BigInt(40),K=BigInt(80),q=c,Z=k*k%q*k%q,oe=(0,s.pow2)(Z,d,q)*Z%q,O=(0,s.pow2)(oe,f,q)*k%q,$=(0,s.pow2)(O,g,q)*O%q,Q=(0,s.pow2)($,I,q)*$%q,ne=(0,s.pow2)(Q,D,q)*Q%q,J=(0,s.pow2)(ne,T,q)*ne%q,W=(0,s.pow2)(J,K,q)*J%q,X=(0,s.pow2)(W,K,q)*J%q,re=(0,s.pow2)(X,I,q)*$%q;return{pow_p_5_8:(0,s.pow2)(re,d,q)*k%q,b2:Z}}function m(k){return k[0]&=248,k[31]&=127,k[31]|=64,k}function b(k,I){const D=c,T=(0,s.mod)(I*I*I,D),K=y(k*(0,s.mod)(T*T*I,D)).pow_p_5_8;let q=(0,s.mod)(k*T*K,D);const Z=(0,s.mod)(I*q*q,D),oe=q,O=(0,s.mod)(q*l,D),$=Z===k,Q=Z===(0,s.mod)(-k,D),ne=Z===(0,s.mod)(-k*l,D);return $&&(q=oe),(Q||ne)&&(q=O),(0,s.isNegativeLE)(q,D)&&(q=(0,s.mod)(-q,D)),{isValid:$||Q,value:q}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const w=(0,s.Field)(c,void 0,!0),x={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:w,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:p,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:m,uvRatio:b};function N(k,I,D){if(I.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([D?1:0,I.length]),I,k)}function H(k){const{y:I}=t.ed25519.ExtendedPoint.fromHex(k),D=BigInt(1);return w.toBytes(w.create((D+I)*w.inv(D-I)))}t.ed25519=(0,r.twistedEdwards)(x),t.ed25519ctx=(0,r.twistedEdwards)({...x,domain:N}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},x,{domain:N,prehash:e.sha512})),t.x25519=(0,o.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:k=>{const I=c,{pow_p_5_8:D,b2:T}=y(k);return(0,s.mod)((0,s.pow2)(D,h,I)*T,I)},adjustScalarBytes:m,randomBytes:n.randomBytes}),t.edwardsToMontgomery=H;const z=(w.ORDER+h)/p,G=w.pow(d,z),F=w.sqrt(w.neg(w.ONE)),U=(0,s.FpSqrtEven)(w,w.neg(BigInt(486664)));function V(k){const{xMn:I,xMd:D,yMn:T,yMd:K}=(function(J){const W=(w.ORDER-g)/p,X=BigInt(486662);let re=w.sqr(J);re=w.mul(re,d);let ie=w.add(re,w.ONE),ae=w.neg(X),he=w.sqr(ie),ue=w.mul(he,ie),ge=w.mul(re,X);ge=w.mul(ge,ae),ge=w.add(ge,he),ge=w.mul(ge,ae);let se=w.sqr(ue);he=w.sqr(se),se=w.mul(se,ue),se=w.mul(se,ge),he=w.mul(he,se);let Y=w.pow(he,W);Y=w.mul(Y,se);let ve=w.mul(Y,F);he=w.sqr(Y),he=w.mul(he,ue);let Te=w.eql(he,ge),ct=w.cmov(ve,Y,Te),dt=w.mul(ae,re),lt=w.mul(Y,J);lt=w.mul(lt,G);let tn=w.mul(lt,F),_r=w.mul(ge,re);he=w.sqr(lt),he=w.mul(he,ue);let wa=w.eql(he,_r),Rt=w.cmov(tn,lt,wa);he=w.sqr(ct),he=w.mul(he,ue);let Tt=w.eql(he,ge),co=w.cmov(dt,ae,Tt),ht=w.cmov(Rt,ct,Tt),nl=w.isOdd(ht);return ht=w.cmov(ht,w.neg(ht),Tt!==nl),{xMn:co,xMd:ie,yMn:ht,yMd:f}})(k);let q=w.mul(I,K);q=w.mul(q,U);let Z=w.mul(D,T),oe=w.sub(I,D),O=w.add(I,D),$=w.mul(Z,O),Q=w.eql($,w.ZERO);q=w.cmov(q,w.ZERO,Q),Z=w.cmov(Z,w.ONE,Q),oe=w.cmov(oe,w.ONE,Q),O=w.cmov(O,w.ONE,Q);const ne=w.invertBatch([Z,O]);return{x:w.mul(q,ne[0]),y:w.mul(oe,ne[1])}}const L=(0,i.createHasher)(t.ed25519.ExtendedPoint,(k=>V(k[0])),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:w.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});function B(k){if(!(k instanceof E))throw new Error("RistrettoPoint expected")}t.hashToCurve=L.hashToCurve,t.encodeToCurve=L.encodeToCurve;const M=l,_=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),R=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),j=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),v=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),S=k=>b(f,k),C=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),P=k=>t.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(k)&C);function A(k){const{d:I}=t.ed25519.CURVE,D=t.ed25519.CURVE.Fp.ORDER,T=t.ed25519.CURVE.Fp.create,K=T(M*k*k),q=T((K+f)*j);let Z=BigInt(-1);const oe=T((Z-I*K)*T(K+I));let{isValid:O,value:$}=b(q,oe),Q=T($*k);(0,s.isNegativeLE)(Q,D)||(Q=T(-Q)),O||($=Q),O||(Z=K);const ne=T(Z*(K-f)*v-oe),J=$*$,W=T(($+$)*oe),X=T(ne*_),re=T(f-J),ie=T(f+J);return new t.ed25519.ExtendedPoint(T(W*ie),T(re*X),T(X*ie),T(W*re))}class E{constructor(I){this.ep=I}static fromAffine(I){return new E(t.ed25519.ExtendedPoint.fromAffine(I))}static hashToCurve(I){I=(0,a.ensureBytes)("ristrettoHash",I,64);const D=A(P(I.slice(0,32))),T=A(P(I.slice(32,64)));return new E(D.add(T))}static fromHex(I){I=(0,a.ensureBytes)("ristrettoHex",I,32);const{a:D,d:T}=t.ed25519.CURVE,K=t.ed25519.CURVE.Fp.ORDER,q=t.ed25519.CURVE.Fp.create,Z="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",oe=P(I);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(oe,32),I)||(0,s.isNegativeLE)(oe,K))throw new Error(Z);const O=q(oe*oe),$=q(f+D*O),Q=q(f-D*O),ne=q($*$),J=q(Q*Q),W=q(D*T*ne-J),{isValid:X,value:re}=S(q(W*J)),ie=q(re*Q),ae=q(re*ie*W);let he=q((oe+oe)*ie);(0,s.isNegativeLE)(he,K)&&(he=q(-he));const ue=q($*ae),ge=q(he*ue);if(!X||(0,s.isNegativeLE)(ge,K)||ue===u)throw new Error(Z);return new E(new t.ed25519.ExtendedPoint(he,ue,f,ge))}toRawBytes(){let{ex:I,ey:D,ez:T,et:K}=this.ep;const q=t.ed25519.CURVE.Fp.ORDER,Z=t.ed25519.CURVE.Fp.create,oe=Z(Z(T+D)*Z(T-D)),O=Z(I*D),$=Z(O*O),{value:Q}=S(Z(oe*$)),ne=Z(Q*oe),J=Z(Q*O),W=Z(ne*J*K);let X;if((0,s.isNegativeLE)(K*W,q)){let ie=Z(D*M),ae=Z(I*M);I=ie,D=ae,X=Z(ne*R)}else X=J;(0,s.isNegativeLE)(I*W,q)&&(D=Z(-D));let re=Z((T-D)*X);return(0,s.isNegativeLE)(re,q)&&(re=Z(-re)),(0,a.numberToBytesLE)(re,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(I){B(I);const{ex:D,ey:T}=this.ep,{ex:K,ey:q}=I.ep,Z=t.ed25519.CURVE.Fp.create,oe=Z(D*q)===Z(T*K),O=Z(T*q)===Z(D*K);return oe||O}add(I){return B(I),new E(this.ep.add(I.ep))}subtract(I){return B(I),new E(this.ep.subtract(I.ep))}multiply(I){return new E(this.ep.multiply(I))}multiplyUnsafe(I){return new E(this.ep.multiplyUnsafe(I))}double(){return new E(this.ep.double())}negate(){return new E(this.ep.negate())}}t.RistrettoPoint=(E.BASE||(E.BASE=new E(t.ed25519.ExtendedPoint.BASE)),E.ZERO||(E.ZERO=new E(t.ed25519.ExtendedPoint.ZERO)),E),t.hashToRistretto255=(k,I)=>{const D=I.DST,T=typeof D=="string"?(0,n.utf8ToBytes)(D):D,K=(0,i.expand_message_xmd)(k,T,64,e.sha512);return E.hashToCurve(K)},t.hash_to_ristretto255=t.hashToRistretto255})(h2);var G2={},pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.sha224=pi.sha256=pi.SHA256=void 0;const rh=hi,qn=ki,pM=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Di=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ui=new Uint32Array(64);class Jg extends rh.HashMD{constructor(){super(64,32,8,!1),this.A=0|Di[0],this.B=0|Di[1],this.C=0|Di[2],this.D=0|Di[3],this.E=0|Di[4],this.F=0|Di[5],this.G=0|Di[6],this.H=0|Di[7]}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|i,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|c}process(e,n){for(let f=0;f<16;f++,n+=4)Ui[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Ui[f-15],h=Ui[f-2],g=(0,qn.rotr)(d,7)^(0,qn.rotr)(d,18)^d>>>3,p=(0,qn.rotr)(h,17)^(0,qn.rotr)(h,19)^h>>>10;Ui[f]=p+Ui[f-7]+g+Ui[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=u+((0,qn.rotr)(a,6)^(0,qn.rotr)(a,11)^(0,qn.rotr)(a,25))+(0,rh.Chi)(a,c,l)+pM[f]+Ui[f]|0,h=((0,qn.rotr)(r,2)^(0,qn.rotr)(r,13)^(0,qn.rotr)(r,22))+(0,rh.Maj)(r,i,s)|0;u=l,l=c,c=a,a=o+d|0,o=s,s=i,i=r,r=d+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Ui.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}pi.SHA256=Jg;class gM extends Jg{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}pi.sha256=(0,qn.wrapConstructor)((()=>new Jg)),pi.sha224=(0,qn.wrapConstructor)((()=>new gM));var iu={},Yg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Bn,n=ki;class r extends n.Hash{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(s);const a=(0,n.toBytes)(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,l=new Uint8Array(c);l.set(a.length>c?s.create().update(a).digest():a);for(let u=0;u<l.length;u++)l[u]^=54;this.iHash.update(l),this.oHash=s.create();for(let u=0;u<l.length;u++)l[u]^=106;this.oHash.update(l),l.fill(0)}update(s){return(0,e.exists)(this),this.iHash.update(s),this}digestInto(s){(0,e.exists)(this),(0,e.bytes)(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:l,blockLen:u,outputLen:f}=this;return s.finished=c,s.destroyed=l,s.blockLen=u,s.outputLen=f,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(i,s,o)=>new r(i,s).update(o).digest(),t.hmac.create=(i,s)=>new r(i,s)})(Yg);var Zg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=h,t.weierstrass=function(p){const y=(function(k){const I=(0,e.validateBasic)(k);return r.validateObject(I,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...I})})(p),{Fp:m,n:b}=y,w=m.BYTES+1,x=2*m.BYTES+1;function N(k){return n.mod(k,b)}function H(k){return n.invert(k,b)}const{ProjectivePoint:z,normPrivateKeyToScalar:G,weierstrassEquation:F,isWithinCurveOrder:U}=h({...y,toBytes(k,I,D){const T=I.toAffine(),K=m.toBytes(T.x),q=r.concatBytes;return(0,i.abool)("isCompressed",D),D?q(Uint8Array.from([I.hasEvenY()?2:3]),K):q(Uint8Array.from([4]),K,m.toBytes(T.y))},fromBytes(k){const I=k.length,D=k[0],T=k.subarray(1);if(I!==w||D!==2&&D!==3){if(I===x&&D===4)return{x:m.fromBytes(T.subarray(0,m.BYTES)),y:m.fromBytes(T.subarray(m.BYTES,2*m.BYTES))};throw new Error(`Point of length ${I} was invalid. Expected ${w} compressed bytes or ${x} uncompressed bytes`)}{const K=r.bytesToNumberBE(T);if(!r.inRange(K,l,m.ORDER))throw new Error("Point is not on curve");const q=F(K);let Z;try{Z=m.sqrt(q)}catch(oe){const O=oe instanceof Error?": "+oe.message:"";throw new Error("Point is not on curve"+O)}return(1&D)==1!=((Z&l)===l)&&(Z=m.neg(Z)),{x:K,y:Z}}}}),V=k=>r.bytesToHex(r.numberToBytesBE(k,y.nByteLength));function L(k){return k>b>>l}const B=(k,I,D)=>r.bytesToNumberBE(k.slice(I,D));class M{constructor(I,D,T){this.r=I,this.s=D,this.recovery=T,this.assertValidity()}static fromCompact(I){const D=y.nByteLength;return I=(0,i.ensureBytes)("compactSignature",I,2*D),new M(B(I,0,D),B(I,D,2*D))}static fromDER(I){const{r:D,s:T}=t.DER.toSig((0,i.ensureBytes)("DER",I));return new M(D,T)}assertValidity(){r.aInRange("r",this.r,l,b),r.aInRange("s",this.s,l,b)}addRecoveryBit(I){return new M(this.r,this.s,I)}recoverPublicKey(I){const{r:D,s:T,recovery:K}=this,q=v((0,i.ensureBytes)("msgHash",I));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const Z=K===2||K===3?D+y.n:D;if(Z>=m.ORDER)throw new Error("recovery id 2 or 3 invalid");const oe=(1&K)==0?"02":"03",O=z.fromHex(oe+V(Z)),$=H(Z),Q=N(-q*$),ne=N(T*$),J=z.BASE.multiplyAndAddUnsafe(O,Q,ne);if(!J)throw new Error("point at infinify");return J.assertValidity(),J}hasHighS(){return L(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,N(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return V(this.r)+V(this.s)}}const _={isValidPrivateKey(k){try{return G(k),!0}catch{return!1}},normPrivateKeyToScalar:G,randomPrivateKey:()=>{const k=n.getMinHashLength(y.n);return n.mapHashToField(y.randomBytes(k),y.n)},precompute:(k=8,I=z.BASE)=>(I._setWindowSize(k),I.multiply(BigInt(3)),I)};function R(k){const I=r.isBytes(k),D=typeof k=="string",T=(I||D)&&k.length;return I?T===w||T===x:D?T===2*w||T===2*x:k instanceof z}const j=y.bits2int||function(k){const I=r.bytesToNumberBE(k),D=8*k.length-y.nBitLength;return D>0?I>>BigInt(D):I},v=y.bits2int_modN||function(k){return N(j(k))},S=r.bitMask(y.nBitLength);function C(k){return r.aInRange(`num < 2^${y.nBitLength}`,k,c,S),r.numberToBytesBE(k,y.nByteLength)}function P(k,I,D=A){if(["recovered","canonical"].some((W=>W in D)))throw new Error("sign() legacy options not supported");const{hash:T,randomBytes:K}=y;let{lowS:q,prehash:Z,extraEntropy:oe}=D;q==null&&(q=!0),k=(0,i.ensureBytes)("msgHash",k),s(D),Z&&(k=(0,i.ensureBytes)("prehashed msgHash",T(k)));const O=v(k),$=G(I),Q=[C($),C(O)];if(oe!=null&&oe!==!1){const W=oe===!0?K(m.BYTES):oe;Q.push((0,i.ensureBytes)("extraEntropy",W))}const ne=r.concatBytes(...Q),J=O;return{seed:ne,k2sig:function(W){const X=j(W);if(!U(X))return;const re=H(X),ie=z.BASE.multiply(X).toAffine(),ae=N(ie.x);if(ae===c)return;const he=N(re*N(J+ae*$));if(he===c)return;let ue=(ie.x===ae?0:2)|Number(ie.y&l),ge=he;return q&&L(he)&&(ge=(function(se){return L(se)?N(-se):se})(he),ue^=1),new M(ae,ge,ue)}}}const A={lowS:y.lowS,prehash:!1},E={lowS:y.lowS,prehash:!1};return z.BASE._setWindowSize(8),{CURVE:y,getPublicKey:function(k,I=!0){return z.fromPrivateKey(k).toRawBytes(I)},getSharedSecret:function(k,I,D=!0){if(R(k))throw new Error("first arg must be private key");if(!R(I))throw new Error("second arg must be public key");return z.fromHex(I).multiply(G(k)).toRawBytes(D)},sign:function(k,I,D=A){const{seed:T,k2sig:K}=P(k,I,D),q=y;return r.createHmacDrbg(q.hash.outputLen,q.nByteLength,q.hmac)(T,K)},verify:function(k,I,D,T=E){const K=k;if(I=(0,i.ensureBytes)("msgHash",I),D=(0,i.ensureBytes)("publicKey",D),"strict"in T)throw new Error("options.strict was renamed to lowS");s(T);const{lowS:q,prehash:Z}=T;let oe,O;try{if(typeof K=="string"||r.isBytes(K))try{oe=M.fromDER(K)}catch(ae){if(!(ae instanceof t.DER.Err))throw ae;oe=M.fromCompact(K)}else{if(typeof K!="object"||typeof K.r!="bigint"||typeof K.s!="bigint")throw new Error("PARSE");{const{r:ae,s:he}=K;oe=new M(ae,he)}}O=z.fromHex(D)}catch(ae){if(ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&oe.hasHighS())return!1;Z&&(I=y.hash(I));const{r:$,s:Q}=oe,ne=v(I),J=H(Q),W=N(ne*J),X=N($*J),re=z.BASE.multiplyAndAddUnsafe(O,W,X)?.toAffine();return re?N(re.x)===$:!1},ProjectivePoint:z,Signature:M,utils:_}},t.SWUFpSqrtRatio=g,t.mapToCurveSimpleSWU=function(p,y){if(n.validateField(p),!p.isValid(y.A)||!p.isValid(y.B)||!p.isValid(y.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const m=g(p,y.Z);if(!p.isOdd)throw new Error("Fp.isOdd is not implemented!");return b=>{let w,x,N,H,z,G,F,U;w=p.sqr(b),w=p.mul(w,y.Z),x=p.sqr(w),x=p.add(x,w),N=p.add(x,p.ONE),N=p.mul(N,y.B),H=p.cmov(y.Z,p.neg(x),!p.eql(x,p.ZERO)),H=p.mul(H,y.A),x=p.sqr(N),G=p.sqr(H),z=p.mul(G,y.A),x=p.add(x,z),x=p.mul(x,N),G=p.mul(G,H),z=p.mul(G,y.B),x=p.add(x,z),F=p.mul(w,N);const{isValid:V,value:L}=m(x,G);U=p.mul(w,b),U=p.mul(U,L),F=p.cmov(F,N,V),U=p.cmov(U,L,V);const B=p.isOdd(b)===p.isOdd(U);return U=p.cmov(p.neg(U),U,B),F=p.div(F,H),{x:F,y:U}}};const e=To,n=Je,r=De,i=De;function s(p){p.lowS!==void 0&&(0,i.abool)("lowS",p.lowS),p.prehash!==void 0&&(0,i.abool)("prehash",p.prehash)}const{bytesToNumberBE:o,hexToBytes:a}=r;t.DER={Err:class extends Error{constructor(p=""){super(p)}},_tlv:{encode:(p,y)=>{const{Err:m}=t.DER;if(p<0||p>256)throw new m("tlv.encode: wrong tag");if(1&y.length)throw new m("tlv.encode: unpadded data");const b=y.length/2,w=r.numberToHexUnpadded(b);if(w.length/2&128)throw new m("tlv.encode: long form length too big");const x=b>127?r.numberToHexUnpadded(w.length/2|128):"";return`${r.numberToHexUnpadded(p)}${x}${w}${y}`},decode(p,y){const{Err:m}=t.DER;let b=0;if(p<0||p>256)throw new m("tlv.encode: wrong tag");if(y.length<2||y[b++]!==p)throw new m("tlv.decode: wrong tlv");const w=y[b++];let x=0;if(128&w){const H=127&w;if(!H)throw new m("tlv.decode(long): indefinite length not supported");if(H>4)throw new m("tlv.decode(long): byte length is too big");const z=y.subarray(b,b+H);if(z.length!==H)throw new m("tlv.decode: length bytes not complete");if(z[0]===0)throw new m("tlv.decode(long): zero leftmost byte");for(const G of z)x=x<<8|G;if(b+=H,x<128)throw new m("tlv.decode(long): not minimal encoding")}else x=w;const N=y.subarray(b,b+x);if(N.length!==x)throw new m("tlv.decode: wrong value length");return{v:N,l:y.subarray(b+x)}}},_int:{encode(p){const{Err:y}=t.DER;if(p<c)throw new y("integer: negative integers are not allowed");let m=r.numberToHexUnpadded(p);if(8&Number.parseInt(m[0],16)&&(m="00"+m),1&m.length)throw new y("unexpected assertion");return m},decode(p){const{Err:y}=t.DER;if(128&p[0])throw new y("Invalid signature integer: negative");if(p[0]===0&&!(128&p[1]))throw new y("Invalid signature integer: unnecessary leading zero");return o(p)}},toSig(p){const{Err:y,_int:m,_tlv:b}=t.DER,w=typeof p=="string"?a(p):p;r.abytes(w);const{v:x,l:N}=b.decode(48,w);if(N.length)throw new y("Invalid signature: left bytes after parsing");const{v:H,l:z}=b.decode(2,x),{v:G,l:F}=b.decode(2,z);if(F.length)throw new y("Invalid signature: left bytes after parsing");return{r:m.decode(H),s:m.decode(G)}},hexFromSig(p){const{_tlv:y,_int:m}=t.DER,b=`${y.encode(2,m.encode(p.r))}${y.encode(2,m.encode(p.s))}`;return y.encode(48,b)}};const c=BigInt(0),l=BigInt(1),u=BigInt(2),f=BigInt(3),d=BigInt(4);function h(p){const y=(function(B){const M=(0,e.validateBasic)(B);r.validateObject(M,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:_,Fp:R,a:j}=M;if(_){if(!R.eql(j,R.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof _!="object"||typeof _.beta!="bigint"||typeof _.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...M})})(p),{Fp:m}=y,b=n.Field(y.n,y.nBitLength),w=y.toBytes||((B,M,_)=>{const R=M.toAffine();return r.concatBytes(Uint8Array.from([4]),m.toBytes(R.x),m.toBytes(R.y))}),x=y.fromBytes||(B=>{const M=B.subarray(1);return{x:m.fromBytes(M.subarray(0,m.BYTES)),y:m.fromBytes(M.subarray(m.BYTES,2*m.BYTES))}});function N(B){const{a:M,b:_}=y,R=m.sqr(B),j=m.mul(R,B);return m.add(m.add(j,m.mul(B,M)),_)}if(!m.eql(m.sqr(y.Gy),N(y.Gx)))throw new Error("bad generator point: equation left != right");function H(B){const{allowedPrivateKeyLengths:M,nByteLength:_,wrapPrivateKey:R,n:j}=y;if(M&&typeof B!="bigint"){if(r.isBytes(B)&&(B=r.bytesToHex(B)),typeof B!="string"||!M.includes(B.length))throw new Error("Invalid key");B=B.padStart(2*_,"0")}let v;try{v=typeof B=="bigint"?B:r.bytesToNumberBE((0,i.ensureBytes)("private key",B,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof B}`)}return R&&(v=n.mod(v,j)),r.aInRange("private key",v,l,j),v}function z(B){if(!(B instanceof U))throw new Error("ProjectivePoint expected")}const G=(0,i.memoized)(((B,M)=>{const{px:_,py:R,pz:j}=B;if(m.eql(j,m.ONE))return{x:_,y:R};const v=B.is0();M==null&&(M=v?m.ONE:m.inv(j));const S=m.mul(_,M),C=m.mul(R,M),P=m.mul(j,M);if(v)return{x:m.ZERO,y:m.ZERO};if(!m.eql(P,m.ONE))throw new Error("invZ was invalid");return{x:S,y:C}})),F=(0,i.memoized)((B=>{if(B.is0()){if(y.allowInfinityPoint&&!m.is0(B.py))return;throw new Error("bad point: ZERO")}const{x:M,y:_}=B.toAffine();if(!m.isValid(M)||!m.isValid(_))throw new Error("bad point: x or y not FE");const R=m.sqr(_),j=N(M);if(!m.eql(R,j))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class U{constructor(M,_,R){if(this.px=M,this.py=_,this.pz=R,M==null||!m.isValid(M))throw new Error("x required");if(_==null||!m.isValid(_))throw new Error("y required");if(R==null||!m.isValid(R))throw new Error("z required");Object.freeze(this)}static fromAffine(M){const{x:_,y:R}=M||{};if(!M||!m.isValid(_)||!m.isValid(R))throw new Error("invalid affine point");if(M instanceof U)throw new Error("projective point not allowed");const j=v=>m.eql(v,m.ZERO);return j(_)&&j(R)?U.ZERO:new U(_,R,m.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){const _=m.invertBatch(M.map((R=>R.pz)));return M.map(((R,j)=>R.toAffine(_[j]))).map(U.fromAffine)}static fromHex(M){const _=U.fromAffine(x((0,i.ensureBytes)("pointHex",M)));return _.assertValidity(),_}static fromPrivateKey(M){return U.BASE.multiply(H(M))}static msm(M,_){return(0,e.pippenger)(U,b,M,_)}_setWindowSize(M){L.setWindowSize(this,M)}assertValidity(){F(this)}hasEvenY(){const{y:M}=this.toAffine();if(m.isOdd)return!m.isOdd(M);throw new Error("Field doesn't support isOdd")}equals(M){z(M);const{px:_,py:R,pz:j}=this,{px:v,py:S,pz:C}=M,P=m.eql(m.mul(_,C),m.mul(v,j)),A=m.eql(m.mul(R,C),m.mul(S,j));return P&&A}negate(){return new U(this.px,m.neg(this.py),this.pz)}double(){const{a:M,b:_}=y,R=m.mul(_,f),{px:j,py:v,pz:S}=this;let C=m.ZERO,P=m.ZERO,A=m.ZERO,E=m.mul(j,j),k=m.mul(v,v),I=m.mul(S,S),D=m.mul(j,v);return D=m.add(D,D),A=m.mul(j,S),A=m.add(A,A),C=m.mul(M,A),P=m.mul(R,I),P=m.add(C,P),C=m.sub(k,P),P=m.add(k,P),P=m.mul(C,P),C=m.mul(D,C),A=m.mul(R,A),I=m.mul(M,I),D=m.sub(E,I),D=m.mul(M,D),D=m.add(D,A),A=m.add(E,E),E=m.add(A,E),E=m.add(E,I),E=m.mul(E,D),P=m.add(P,E),I=m.mul(v,S),I=m.add(I,I),E=m.mul(I,D),C=m.sub(C,E),A=m.mul(I,k),A=m.add(A,A),A=m.add(A,A),new U(C,P,A)}add(M){z(M);const{px:_,py:R,pz:j}=this,{px:v,py:S,pz:C}=M;let P=m.ZERO,A=m.ZERO,E=m.ZERO;const k=y.a,I=m.mul(y.b,f);let D=m.mul(_,v),T=m.mul(R,S),K=m.mul(j,C),q=m.add(_,R),Z=m.add(v,S);q=m.mul(q,Z),Z=m.add(D,T),q=m.sub(q,Z),Z=m.add(_,j);let oe=m.add(v,C);return Z=m.mul(Z,oe),oe=m.add(D,K),Z=m.sub(Z,oe),oe=m.add(R,j),P=m.add(S,C),oe=m.mul(oe,P),P=m.add(T,K),oe=m.sub(oe,P),E=m.mul(k,Z),P=m.mul(I,K),E=m.add(P,E),P=m.sub(T,E),E=m.add(T,E),A=m.mul(P,E),T=m.add(D,D),T=m.add(T,D),K=m.mul(k,K),Z=m.mul(I,Z),T=m.add(T,K),K=m.sub(D,K),K=m.mul(k,K),Z=m.add(Z,K),D=m.mul(T,Z),A=m.add(A,D),D=m.mul(oe,Z),P=m.mul(q,P),P=m.sub(P,D),D=m.mul(q,T),E=m.mul(oe,E),E=m.add(E,D),new U(P,A,E)}subtract(M){return this.add(M.negate())}is0(){return this.equals(U.ZERO)}wNAF(M){return L.wNAFCached(this,M,U.normalizeZ)}multiplyUnsafe(M){r.aInRange("scalar",M,c,y.n);const _=U.ZERO;if(M===c)return _;if(M===l)return this;const{endo:R}=y;if(!R)return L.unsafeLadder(this,M);let{k1neg:j,k1:v,k2neg:S,k2:C}=R.splitScalar(M),P=_,A=_,E=this;for(;v>c||C>c;)v&l&&(P=P.add(E)),C&l&&(A=A.add(E)),E=E.double(),v>>=l,C>>=l;return j&&(P=P.negate()),S&&(A=A.negate()),A=new U(m.mul(A.px,R.beta),A.py,A.pz),P.add(A)}multiply(M){const{endo:_,n:R}=y;let j,v;if(r.aInRange("scalar",M,l,R),_){const{k1neg:S,k1:C,k2neg:P,k2:A}=_.splitScalar(M);let{p:E,f:k}=this.wNAF(C),{p:I,f:D}=this.wNAF(A);E=L.constTimeNegate(S,E),I=L.constTimeNegate(P,I),I=new U(m.mul(I.px,_.beta),I.py,I.pz),j=E.add(I),v=k.add(D)}else{const{p:S,f:C}=this.wNAF(M);j=S,v=C}return U.normalizeZ([j,v])[0]}multiplyAndAddUnsafe(M,_,R){const j=U.BASE,v=(C,P)=>P!==c&&P!==l&&C.equals(j)?C.multiply(P):C.multiplyUnsafe(P),S=v(this,_).add(v(M,R));return S.is0()?void 0:S}toAffine(M){return G(this,M)}isTorsionFree(){const{h:M,isTorsionFree:_}=y;if(M===l)return!0;if(_)return _(U,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:M,clearCofactor:_}=y;return M===l?this:_?_(U,this):this.multiplyUnsafe(y.h)}toRawBytes(M=!0){return(0,i.abool)("isCompressed",M),this.assertValidity(),w(U,this,M)}toHex(M=!0){return(0,i.abool)("isCompressed",M),r.bytesToHex(this.toRawBytes(M))}}U.BASE=new U(y.Gx,y.Gy,m.ONE),U.ZERO=new U(m.ZERO,m.ONE,m.ZERO);const V=y.nBitLength,L=(0,e.wNAF)(U,y.endo?Math.ceil(V/2):V);return{CURVE:y,ProjectivePoint:U,normPrivateKeyToScalar:H,weierstrassEquation:N,isWithinCurveOrder:function(B){return r.inRange(B,l,y.n)}}}function g(p,y){const m=p.ORDER;let b=c;for(let B=m-l;B%u===c;B/=u)b+=l;const w=b,x=u<<w-l-l,N=x*u,H=(m-l)/N,z=(H-l)/u,G=N-l,F=x,U=p.pow(y,H),V=p.pow(y,(H+l)/u);let L=(B,M)=>{let _=U,R=p.pow(M,G),j=p.sqr(R);j=p.mul(j,M);let v=p.mul(B,j);v=p.pow(v,z),v=p.mul(v,R),R=p.mul(v,M),j=p.mul(v,B);let S=p.mul(j,R);v=p.pow(S,F);let C=p.eql(v,p.ONE);R=p.mul(j,V),v=p.mul(S,_),j=p.cmov(R,j,C),S=p.cmov(v,S,C);for(let P=w;P>l;P--){let A=P-u;A=u<<A-l;let E=p.pow(S,A);const k=p.eql(E,p.ONE);R=p.mul(j,_),_=p.mul(_,_),E=p.mul(S,_),j=p.cmov(R,j,k),S=p.cmov(E,S,k)}return{isValid:C,value:j}};if(p.ORDER%d===f){const B=(p.ORDER-f)/d,M=p.sqrt(p.neg(y));L=(_,R)=>{let j=p.sqr(R);const v=p.mul(_,R);j=p.mul(j,v);let S=p.pow(j,B);S=p.mul(S,v);const C=p.mul(S,M),P=p.mul(p.sqr(S),R),A=p.eql(P,_);return{isValid:A,value:p.cmov(C,S,A)}}}return L}})(Zg),Object.defineProperty(iu,"__esModule",{value:!0}),iu.getHash=Rv,iu.createCurve=function(t,e){const n=r=>(0,yM.weierstrass)({...t,...Rv(r)});return Object.freeze({...n(e),create:n})};const mM=Yg,Iv=ki,yM=Zg;function Rv(t){return{hash:t,hmac:(e,...n)=>(0,mM.hmac)(t,e,(0,Iv.concatBytes)(...n)),randomBytes:Iv.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=pi,n=ki,r=iu,i=Wi,s=Je,o=De,a=Zg,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),f=BigInt(2),d=(v,S)=>(v+S/f)/S;function h(v){const S=c,C=BigInt(3),P=BigInt(6),A=BigInt(11),E=BigInt(22),k=BigInt(23),I=BigInt(44),D=BigInt(88),T=v*v*v%S,K=T*T*v%S,q=(0,s.pow2)(K,C,S)*K%S,Z=(0,s.pow2)(q,C,S)*K%S,oe=(0,s.pow2)(Z,f,S)*T%S,O=(0,s.pow2)(oe,A,S)*oe%S,$=(0,s.pow2)(O,E,S)*O%S,Q=(0,s.pow2)($,I,S)*$%S,ne=(0,s.pow2)(Q,D,S)*Q%S,J=(0,s.pow2)(ne,I,S)*$%S,W=(0,s.pow2)(J,C,S)*K%S,X=(0,s.pow2)(W,k,S)*O%S,re=(0,s.pow2)(X,P,S)*T%S,ie=(0,s.pow2)(re,f,S);if(!g.eql(g.sqr(ie),v))throw new Error("Cannot find square root");return ie}const g=(0,s.Field)(c,void 0,void 0,{sqrt:h});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:v=>{const S=l,C=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),P=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),A=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),E=C,k=BigInt("0x100000000000000000000000000000000"),I=d(E*v,S),D=d(-P*v,S);let T=(0,s.mod)(v-I*C-D*A,S),K=(0,s.mod)(-I*P-D*E,S);const q=T>k,Z=K>k;if(q&&(T=S-T),Z&&(K=S-K),T>k||K>k)throw new Error("splitScalar: Endomorphism failed, k="+v);return{k1neg:q,k1:T,k2neg:Z,k2:K}}}},e.sha256);const p=BigInt(0),y={};function m(v,...S){let C=y[v];if(C===void 0){const P=(0,e.sha256)(Uint8Array.from(v,(A=>A.charCodeAt(0))));C=(0,o.concatBytes)(P,P),y[v]=C}return(0,e.sha256)((0,o.concatBytes)(C,...S))}const b=v=>v.toRawBytes(!0).slice(1),w=v=>(0,o.numberToBytesBE)(v,32),x=v=>(0,s.mod)(v,c),N=v=>(0,s.mod)(v,l),H=t.secp256k1.ProjectivePoint,z=(v,S,C)=>H.BASE.multiplyAndAddUnsafe(v,S,C);function G(v){let S=t.secp256k1.utils.normPrivateKeyToScalar(v),C=H.fromPrivateKey(S);return{scalar:C.hasEvenY()?S:N(-S),bytes:b(C)}}function F(v){(0,o.aInRange)("x",v,u,c);const S=x(v*v);let C=h(x(S*v+BigInt(7)));C%f!==p&&(C=x(-C));const P=new H(v,C,u);return P.assertValidity(),P}const U=o.bytesToNumberBE;function V(...v){return N(U(m("BIP0340/challenge",...v)))}function L(v){return G(v).bytes}function B(v,S,C=(0,n.randomBytes)(32)){const P=(0,o.ensureBytes)("message",v),{bytes:A,scalar:E}=G(S),k=(0,o.ensureBytes)("auxRand",C,32),I=w(E^U(m("BIP0340/aux",k))),D=m("BIP0340/nonce",I,A,P),T=N(U(D));if(T===p)throw new Error("sign failed: k is zero");const{bytes:K,scalar:q}=G(T),Z=V(K,A,P),oe=new Uint8Array(64);if(oe.set(K,0),oe.set(w(N(q+Z*E)),32),!M(oe,P,A))throw new Error("sign: Invalid signature produced");return oe}function M(v,S,C){const P=(0,o.ensureBytes)("signature",v,64),A=(0,o.ensureBytes)("message",S),E=(0,o.ensureBytes)("publicKey",C,32);try{const k=F(U(E)),I=U(P.subarray(0,32));if(!(0,o.inRange)(I,u,c))return!1;const D=U(P.subarray(32,64));if(!(0,o.inRange)(D,u,l))return!1;const T=V(w(I),b(k),A),K=z(k,D,N(-T));return!(!K||!K.hasEvenY()||K.toAffine().x!==I)}catch{return!1}}t.schnorr={getPublicKey:L,sign:B,verify:M,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:F,pointToBytes:b,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:m,mod:s.mod}};const _=(0,i.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((v=>v.map((S=>BigInt(S)))))),R=(0,a.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}),j=(0,i.createHasher)(t.secp256k1.ProjectivePoint,(v=>{const{x:S,y:C}=R(g.create(v[0]));return _(S,C)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=j.hashToCurve,t.encodeToCurve=j.encodeToCurve})(G2);var Pp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=Kn;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(Pp),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=qg,n=h2,r=G2,i=Sc,s=Nt,o=Pp;t.getValidSecret=function(){var u;do u=(0,e.randomBytes)(s.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(u));return u},t.isValidPrivateKey=function(u){return a((0,i.ellipticCurve)(),(function(f){return f.utils.isValidPrivateKey(u)}),(function(){return!0}),(function(){return!0}))},t.getPublicKey=function(u){return a((0,i.ellipticCurve)(),(function(f){return f.getPublicKey(u)}),(function(f){return f.getPublicKey(u)}),(function(f){return f.getPublicKey(u)}))},t.getSharedPoint=function(u,f,d){return a((0,i.ellipticCurve)(),(function(h){return h.getSharedSecret(u,f,d)}),(function(h){return h.getSharedSecret(u,f)}),(function(h){return l(h,u,f)}))},t.convertPublicKeyFormat=function(u,f){return a((0,i.ellipticCurve)(),(function(d){return d.getSharedSecret(BigInt(1),u,f)}),(function(){return u}),(function(){return u}))};function a(u,f,d,h){if(u==="secp256k1")return f(r.secp256k1);if(u==="x25519")return d(n.x25519);if(u==="ed25519")return h(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(u){var f=(0,o.decodeHex)(u);return a((0,i.ellipticCurve)(),(function(){return c(f)}),(function(){return f}),(function(){return f}))};var c=function(u){if(u.length===s.ETH_PUBLIC_KEY_SIZE){var f=new Uint8Array(1+u.length);return f.set([4]),f.set(u,1),f}return u},l=function(u,f,d){var h=u.utils.getExtendedPublicKey(f).scalar;return u.ExtendedPoint.fromHex(d).multiply(h).toRawBytes()}})(d2);var q2={},Io={};Object.defineProperty(Io,"__esModule",{value:!0}),Io.hkdf=void 0,Io.extract=Q2,Io.expand=J2;const Tp=Bn,Ov=ki,W2=Yg;function Q2(t,e,n){return(0,Tp.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,W2.hmac)(t,(0,Ov.toBytes)(n),(0,Ov.toBytes)(e))}const ih=new Uint8Array([0]),Nv=new Uint8Array;function J2(t,e,n,r=32){if((0,Tp.hash)(t),(0,Tp.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=Nv);const s=new Uint8Array(i*t.outputLen),o=W2.hmac.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)ih[0]=l+1,a.update(l===0?Nv:c).update(n).update(ih).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),ih.fill(0),s.slice(0,r)}Io.hkdf=(t,e,n,r,i)=>J2(t,Q2(t,e,n),r,i),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=Kn,n=Io,r=pi;t.deriveKey=function(i,s,o){return(0,n.hkdf)(r.sha256,i,s,o,32)},t.getSharedKey=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(0,t.deriveKey)(e.concatBytes.apply(void 0,i))}})(q2);var Mv={},qo={},mt={},Hs={};Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.polyval=Hs.ghash=void 0,Hs._toGHASHKey=Y2;const Ks=Qt,an=Kn,ni=16,Xg=new Uint8Array(16),Lr=(0,an.u32)(Xg),Yn=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function Y2(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const i=t[r];t[r]=i>>>1|n,n=(1&i)<<7}return t[0]^=225&-e,t}class Z2{constructor(e,n){this.blockLen=ni,this.outputLen=ni,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,an.toBytes)(e),(0,Ks.bytes)(e,16);const r=(0,an.createView)(e);let i=r.getUint32(0,!1),s=r.getUint32(4,!1),o=r.getUint32(8,!1),a=r.getUint32(12,!1);const c=[];for(let m=0;m<128;m++)c.push({s0:Yn(i),s1:Yn(s),s2:Yn(o),s3:Yn(a)}),{s0:i,s1:s,s2:o,s3:a}={s3:(f=o)<<31|(d=a)>>>1,s2:(u=s)<<31|f>>>1,s1:(l=i)<<31|u>>>1,s0:l>>>1^225<<24&-(1&d)};var l,u,f,d;const h=(m=>m>65536?8:m>1024?4:2)(n||1024);if(![1,2,4,8].includes(h))throw new Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;const g=128/h,p=this.windowSize=2**h,y=[];for(let m=0;m<g;m++)for(let b=0;b<p;b++){let w=0,x=0,N=0,H=0;for(let z=0;z<h;z++){if(!(b>>>h-z-1&1))continue;const{s0:G,s1:F,s2:U,s3:V}=c[h*m+z];w^=G,x^=F,N^=U,H^=V}y.push({s0:w,s1:x,s2:N,s3:H})}this.t=y}_updateBlock(e,n,r,i){e^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:s,t:o,windowSize:a}=this;let c=0,l=0,u=0,f=0;const d=(1<<s)-1;let h=0;for(const g of[e,n,r,i])for(let p=0;p<4;p++){const y=g>>>8*p&255;for(let m=8/s-1;m>=0;m--){const b=y>>>s*m&d,{s0:w,s1:x,s2:N,s3:H}=o[h*a+b];c^=w,l^=x,u^=N,f^=H,h+=1}}this.s0=c,this.s1=l,this.s2=u,this.s3=f}update(e){e=(0,an.toBytes)(e),(0,Ks.exists)(this);const n=(0,an.u32)(e),r=Math.floor(e.length/ni),i=e.length%ni;for(let s=0;s<r;s++)this._updateBlock(n[4*s+0],n[4*s+1],n[4*s+2],n[4*s+3]);return i&&(Xg.set(e.subarray(r*ni)),this._updateBlock(Lr[0],Lr[1],Lr[2],Lr[3]),(0,an.clean)(Lr)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,Ks.exists)(this),(0,Ks.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,an.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e}digest(){const e=new Uint8Array(ni);return this.digestInto(e),this.destroy(),e}}class vM extends Z2{constructor(e,n){e=(0,an.toBytes)(e);const r=Y2((0,an.copyBytes)(e));super(r,n),(0,an.clean)(r)}update(e){e=(0,an.toBytes)(e),(0,Ks.exists)(this);const n=(0,an.u32)(e),r=e.length%ni,i=Math.floor(e.length/ni);for(let s=0;s<i;s++)this._updateBlock(Yn(n[4*s+3]),Yn(n[4*s+2]),Yn(n[4*s+1]),Yn(n[4*s+0]));return r&&(Xg.set(e.subarray(i*ni)),this._updateBlock(Yn(Lr[3]),Yn(Lr[2]),Yn(Lr[1]),Yn(Lr[0])),(0,an.clean)(Lr)),this}digestInto(e){(0,Ks.exists)(this),(0,Ks.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,an.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e.reverse()}}function Lv(t){const e=(r,i)=>t(i,r.length).update((0,an.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,i)=>t(r,i),e}Hs.ghash=Lv(((t,e)=>new Z2(t,e))),Hs.polyval=Lv(((t,e)=>new vM(t,e))),Object.defineProperty(mt,"__esModule",{value:!0}),mt.unsafe=mt.aeskwp=mt.aeskw=mt.siv=mt.gcm=mt.cfb=mt.cbc=mt.ecb=mt.ctr=void 0,mt.expandKeyLE=pr,mt.expandKeyDecLE=xc;const je=Qt,Ip=Hs,ye=Kn,xn=16,Rl=new Uint8Array(xn),wM=283;function e0(t){return t<<1^wM&-(t>>7)}function Ro(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=e0(t);return n}const Rp=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=e0(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,ye.clean)(t),e})(),bM=Rp.map(((t,e)=>Rp.indexOf(e))),EM=t=>t<<24|t>>>8,sh=t=>t<<8|t>>>24,Gu=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function X2(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((l,u)=>e(t[u]))),r=n.map(sh),i=r.map(sh),s=i.map(sh),o=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let l=0;l<256;l++)for(let u=0;u<256;u++){const f=256*l+u;o[f]=n[l]^r[u],a[f]=i[l]^s[u],c[f]=t[l]<<8|t[u]}return{sbox:t,sbox2:c,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const t0=X2(Rp,(t=>Ro(t,3)<<24|t<<16|t<<8|Ro(t,2))),e_=X2(bM,(t=>Ro(t,11)<<24|Ro(t,13)<<16|Ro(t,9)<<8|Ro(t,14))),AM=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=e0(n))t[e]=n;return t})();function pr(t){(0,je.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=t0,r=[];(0,ye.isAligned32)(t)||r.push(t=(0,ye.copyBytes)(t));const i=(0,ye.u32)(t),s=i.length,o=c=>Dr(n,c,c,c,c),a=new Uint32Array(e+28);a.set(i);for(let c=s;c<a.length;c++){let l=a[c-1];c%s==0?l=o(EM(l))^AM[c/s-1]:s>6&&c%s==4&&(l=o(l)),a[c]=a[c-s]^l}return(0,ye.clean)(...r),a}function xc(t){const e=pr(t),n=e.slice(),r=e.length,{sbox2:i}=t0,{T0:s,T1:o,T2:a,T3:c}=e_;for(let l=0;l<r;l+=4)for(let u=0;u<4;u++)n[l+u]=e[r-l-4+u];(0,ye.clean)(e);for(let l=4;l<r-4;l++){const u=n[l],f=Dr(i,u,u,u,u);n[l]=s[255&f]^o[f>>>8&255]^a[f>>>16&255]^c[f>>>24]}return n}function ns(t,e,n,r,i,s){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|s>>>24&255]}function Dr(t,e,n,r,i){return t[255&e|65280&n]|t[r>>>16&255|i>>>16&65280]<<16}function un(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=t0;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const f=t[c++]^ns(o,a,e,n,r,i),d=t[c++]^ns(o,a,n,r,i,e),h=t[c++]^ns(o,a,r,i,e,n),g=t[c++]^ns(o,a,i,e,n,r);e=f,n=d,r=h,i=g}return{s0:t[c++]^Dr(s,e,n,r,i),s1:t[c++]^Dr(s,n,r,i,e),s2:t[c++]^Dr(s,r,i,e,n),s3:t[c++]^Dr(s,i,e,n,r)}}function kc(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=e_;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const f=t[c++]^ns(o,a,e,i,r,n),d=t[c++]^ns(o,a,n,e,i,r),h=t[c++]^ns(o,a,r,n,e,i),g=t[c++]^ns(o,a,i,r,n,e);e=f,n=d,r=h,i=g}return{s0:t[c++]^Dr(s,e,i,r,n),s1:t[c++]^Dr(s,n,e,i,r),s2:t[c++]^Dr(s,r,n,e,i),s3:t[c++]^Dr(s,i,r,n,e)}}function Wo(t,e){if(e===void 0)return new Uint8Array(t);if((0,je.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,ye.isAligned32)(e))throw new Error("unaligned dst");return e}function t_(t,e,n,r){(0,je.bytes)(e,xn),(0,je.bytes)(n);const i=n.length;r=Wo(i,r);const s=e,o=(0,ye.u32)(s);let{s0:a,s1:c,s2:l,s3:u}=un(t,o[0],o[1],o[2],o[3]);const f=(0,ye.u32)(n),d=(0,ye.u32)(r);for(let g=0;g+4<=f.length;g+=4){d[g+0]=f[g+0]^a,d[g+1]=f[g+1]^c,d[g+2]=f[g+2]^l,d[g+3]=f[g+3]^u;let p=1;for(let y=s.length-1;y>=0;y--)p=p+(255&s[y])|0,s[y]=255&p,p>>>=8;({s0:a,s1:c,s2:l,s3:u}=un(t,o[0],o[1],o[2],o[3]))}const h=xn*Math.floor(f.length/4);if(h<i){const g=new Uint32Array([a,c,l,u]),p=(0,ye.u8)(g);for(let y=h,m=0;y<i;y++,m++)r[y]=n[y]^p[m];(0,ye.clean)(g)}return r}function Oo(t,e,n,r,i){(0,je.bytes)(n,xn),(0,je.bytes)(r),i=Wo(r.length,i);const s=n,o=(0,ye.u32)(s),a=(0,ye.createView)(s),c=(0,ye.u32)(r),l=(0,ye.u32)(i),u=e?0:12,f=r.length;let d=a.getUint32(u,e),{s0:h,s1:g,s2:p,s3:y}=un(t,o[0],o[1],o[2],o[3]);for(let b=0;b+4<=c.length;b+=4)l[b+0]=c[b+0]^h,l[b+1]=c[b+1]^g,l[b+2]=c[b+2]^p,l[b+3]=c[b+3]^y,d=d+1>>>0,a.setUint32(u,d,e),{s0:h,s1:g,s2:p,s3:y}=un(t,o[0],o[1],o[2],o[3]);const m=xn*Math.floor(c.length/4);if(m<f){const b=new Uint32Array([h,g,p,y]),w=(0,ye.u8)(b);for(let x=m,N=0;x<f;x++,N++)i[x]=r[x]^w[N];(0,ye.clean)(b)}return i}function Bv(t){if((0,je.bytes)(t),t.length%xn!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function Dv(t,e,n){(0,je.bytes)(t);let r=t.length;const i=r%xn;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,ye.isAligned32)(t)||(t=(0,ye.copyBytes)(t));const s=(0,ye.u32)(t);if(e){let a=xn-i;a||(a=xn),r+=a}const o=Wo(r,n);return{b:s,o:(0,ye.u32)(o),out:o}}function Uv(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const i=t.subarray(0,-r);for(let s=0;s<r;s++)if(t[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function Fv(t){const e=new Uint8Array(16),n=(0,ye.u32)(e);e.set(t);const r=xn-t.length;for(let i=xn-r;i<xn;i++)e[i]=r;return n}function n_(t,e,n,r,i){const s=i==null?0:i.length,o=t.create(n,r.length+s);i&&o.update(i),o.update(r);const a=new Uint8Array(16),c=(0,ye.createView)(a);i&&(0,ye.setBigUint64)(c,0,BigInt(8*s),e),(0,ye.setBigUint64)(c,8,BigInt(8*r.length),e),o.update(a);const l=o.digest();return(0,ye.clean)(a),l}mt.ctr=(0,ye.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e){function n(r,i){if((0,je.bytes)(r),i!==void 0&&((0,je.bytes)(i),!(0,ye.isAligned32)(i)))throw new Error("unaligned destination");const s=pr(t),o=(0,ye.copyBytes)(e),a=[s,o];(0,ye.isAligned32)(r)||a.push(r=(0,ye.copyBytes)(r));const c=t_(s,o,r,i);return(0,ye.clean)(...a),c}return(0,je.bytes)(t),(0,je.bytes)(e,xn),{encrypt:(r,i)=>n(r,i),decrypt:(r,i)=>n(r,i)}})),mt.ecb=(0,ye.wrapCipher)({blockSize:16},(function(t,e={}){(0,je.bytes)(t);const n=!e.disablePadding;return{encrypt(r,i){const{b:s,o,out:a}=Dv(r,n,i),c=pr(t);let l=0;for(;l+4<=s.length;){const{s0:u,s1:f,s2:d,s3:h}=un(c,s[l+0],s[l+1],s[l+2],s[l+3]);o[l++]=u,o[l++]=f,o[l++]=d,o[l++]=h}if(n){const u=Fv(r.subarray(4*l)),{s0:f,s1:d,s2:h,s3:g}=un(c,u[0],u[1],u[2],u[3]);o[l++]=f,o[l++]=d,o[l++]=h,o[l++]=g}return(0,ye.clean)(c),a},decrypt(r,i){Bv(r);const s=xc(t),o=Wo(r.length,i),a=[s];(0,ye.isAligned32)(r)||a.push(r=(0,ye.copyBytes)(r));const c=(0,ye.u32)(r),l=(0,ye.u32)(o);for(let u=0;u+4<=c.length;){const{s0:f,s1:d,s2:h,s3:g}=kc(s,c[u+0],c[u+1],c[u+2],c[u+3]);l[u++]=f,l[u++]=d,l[u++]=h,l[u++]=g}return(0,ye.clean)(...a),Uv(o,n)}}})),mt.cbc=(0,ye.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e,n={}){(0,je.bytes)(t),(0,je.bytes)(e,16);const r=!n.disablePadding;return{encrypt(i,s){const o=pr(t),{b:a,o:c,out:l}=Dv(i,r,s);let u=e;const f=[o];(0,ye.isAligned32)(u)||f.push(u=(0,ye.copyBytes)(u));const d=(0,ye.u32)(u);let h=d[0],g=d[1],p=d[2],y=d[3],m=0;for(;m+4<=a.length;)h^=a[m+0],g^=a[m+1],p^=a[m+2],y^=a[m+3],{s0:h,s1:g,s2:p,s3:y}=un(o,h,g,p,y),c[m++]=h,c[m++]=g,c[m++]=p,c[m++]=y;if(r){const b=Fv(i.subarray(4*m));h^=b[0],g^=b[1],p^=b[2],y^=b[3],{s0:h,s1:g,s2:p,s3:y}=un(o,h,g,p,y),c[m++]=h,c[m++]=g,c[m++]=p,c[m++]=y}return(0,ye.clean)(...f),l},decrypt(i,s){Bv(i);const o=xc(t);let a=e;const c=[o];(0,ye.isAligned32)(a)||c.push(a=(0,ye.copyBytes)(a));const l=(0,ye.u32)(a),u=Wo(i.length,s);(0,ye.isAligned32)(i)||c.push(i=(0,ye.copyBytes)(i));const f=(0,ye.u32)(i),d=(0,ye.u32)(u);let h=l[0],g=l[1],p=l[2],y=l[3];for(let m=0;m+4<=f.length;){const b=h,w=g,x=p,N=y;h=f[m+0],g=f[m+1],p=f[m+2],y=f[m+3];const{s0:H,s1:z,s2:G,s3:F}=kc(o,h,g,p,y);d[m++]=H^b,d[m++]=z^w,d[m++]=G^x,d[m++]=F^N}return(0,ye.clean)(...c),Uv(u,r)}}})),mt.cfb=(0,ye.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e){function n(r,i,s){(0,je.bytes)(r);const o=r.length;s=Wo(o,s);const a=pr(t);let c=e;const l=[a];(0,ye.isAligned32)(c)||l.push(c=(0,ye.copyBytes)(c)),(0,ye.isAligned32)(r)||l.push(r=(0,ye.copyBytes)(r));const u=(0,ye.u32)(r),f=(0,ye.u32)(s),d=i?f:u,h=(0,ye.u32)(c);let g=h[0],p=h[1],y=h[2],m=h[3];for(let w=0;w+4<=u.length;){const{s0:x,s1:N,s2:H,s3:z}=un(a,g,p,y,m);f[w+0]=u[w+0]^x,f[w+1]=u[w+1]^N,f[w+2]=u[w+2]^H,f[w+3]=u[w+3]^z,g=d[w++],p=d[w++],y=d[w++],m=d[w++]}const b=xn*Math.floor(u.length/4);if(b<o){({s0:g,s1:p,s2:y,s3:m}=un(a,g,p,y,m));const w=(0,ye.u8)(new Uint32Array([g,p,y,m]));for(let x=b,N=0;x<o;x++,N++)s[x]=r[x]^w[N];(0,ye.clean)(w)}return(0,ye.clean)(...l),s}return(0,je.bytes)(t),(0,je.bytes)(e,16),{encrypt:(r,i)=>n(r,!0,i),decrypt:(r,i)=>n(r,!1,i)}})),mt.gcm=(0,ye.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(t,e,n){if((0,je.bytes)(t),(0,je.bytes)(e),n!==void 0&&(0,je.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function i(o,a,c){const l=n_(Ip.ghash,!1,o,c,n);for(let u=0;u<a.length;u++)l[u]^=a[u];return l}function s(){const o=pr(t),a=Rl.slice(),c=Rl.slice();if(Oo(o,!1,c,c,a),e.length===12)c.set(e);else{const l=Rl.slice(),u=(0,ye.createView)(l);(0,ye.setBigUint64)(u,8,BigInt(8*e.length),!1);const f=Ip.ghash.create(a).update(e).update(l);f.digestInto(c),f.destroy()}return{xk:o,authKey:a,counter:c,tagMask:Oo(o,!1,c,Rl)}}return{encrypt(o){(0,je.bytes)(o);const{xk:a,authKey:c,counter:l,tagMask:u}=s(),f=new Uint8Array(o.length+r),d=[a,c,l,u];(0,ye.isAligned32)(o)||d.push(o=(0,ye.copyBytes)(o)),Oo(a,!1,l,o,f);const h=i(c,u,f.subarray(0,f.length-r));return d.push(h),f.set(h,o.length),(0,ye.clean)(...d),f},decrypt(o){if((0,je.bytes)(o),o.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:a,authKey:c,counter:l,tagMask:u}=s(),f=[a,c,u,l];(0,ye.isAligned32)(o)||f.push(o=(0,ye.copyBytes)(o));const d=o.subarray(0,-16),h=o.subarray(-16),g=i(c,u,d);if(f.push(g),!(0,ye.equalBytes)(g,h))throw new Error("aes/gcm: invalid ghash tag");const p=Oo(a,!1,l,d);return(0,ye.clean)(...f),p}}}));const Ol=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function r_(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function i_(t,e){if((0,je.bytes)(e,16),!r_(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,ye.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=un(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}function s_(t,e){if((0,je.bytes)(e,16),!r_(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,ye.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=kc(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}mt.siv=(0,ye.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(t,e,n){const r=Ol("AAD",0,68719476736),i=Ol("plaintext",0,2**36),s=Ol("nonce",12,12),o=Ol("ciphertext",16,2**36+16);function a(){const u=pr(t),f=new Uint8Array(t.length),d=new Uint8Array(16),h=[u,f];let g=e;(0,ye.isAligned32)(g)||h.push(g=(0,ye.copyBytes)(g));const p=(0,ye.u32)(g);let y=0,m=p[0],b=p[1],w=p[2],x=0;for(const H of[d,f].map(ye.u32)){const z=(0,ye.u32)(H);for(let G=0;G<z.length;G+=2){const{s0:F,s1:U}=un(u,y,m,b,w);z[G+0]=F,z[G+1]=U,y=++x}}const N={authKey:d,encKey:pr(f)};return(0,ye.clean)(...h),N}function c(u,f,d){const h=n_(Ip.polyval,!0,f,d,n);for(let w=0;w<12;w++)h[w]^=e[w];h[15]&=127;const g=(0,ye.u32)(h);let p=g[0],y=g[1],m=g[2],b=g[3];return{s0:p,s1:y,s2:m,s3:b}=un(u,p,y,m,b),g[0]=p,g[1]=y,g[2]=m,g[3]=b,h}function l(u,f,d){let h=(0,ye.copyBytes)(f);h[15]|=128;const g=Oo(u,!0,h,d);return(0,ye.clean)(h),g}return(0,je.bytes)(t,16,24,32),(0,je.bytes)(e),s(e.length),n!==void 0&&((0,je.bytes)(n),r(n.length)),{encrypt(u){(0,je.bytes)(u),i(u.length);const{encKey:f,authKey:d}=a(),h=c(f,d,u),g=[f,d,h];(0,ye.isAligned32)(u)||g.push(u=(0,ye.copyBytes)(u));const p=new Uint8Array(u.length+16);return p.set(h,u.length),p.set(l(f,h,u)),(0,ye.clean)(...g),p},decrypt(u){(0,je.bytes)(u),o(u.length);const f=u.subarray(-16),{encKey:d,authKey:h}=a(),g=[d,h];(0,ye.isAligned32)(u)||g.push(u=(0,ye.copyBytes)(u));const p=l(d,f,u.subarray(0,-16)),y=c(d,h,p);if(g.push(y),!(0,ye.equalBytes)(f,y))throw(0,ye.clean)(...g),new Error("invalid polyval tag");return(0,ye.clean)(...g),p}}}));const qu={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=pr(t);if(e.length===16)i_(n,e);else{const r=(0,ye.u32)(e);let i=r[0],s=r[1];for(let o=0,a=1;o<6;o++)for(let c=2;c<r.length;c+=2,a++){const{s0:l,s1:u,s2:f,s3:d}=un(n,i,s,r[c],r[c+1]);i=l,s=u^Gu(a),r[c]=f,r[c+1]=d}r[0]=i,r[1]=s}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=xc(t),r=e.length/8-1;if(r===1)s_(n,e);else{const i=(0,ye.u32)(e);let s=i[0],o=i[1];for(let a=0,c=6*r;a<6;a++)for(let l=2*r;l>=1;l-=2,c--){o^=Gu(c);const{s0:u,s1:f,s2:d,s3:h}=kc(n,s,o,i[l],i[l+1]);s=u,o=f,i[l]=d,i[l+1]=h}i[0]=s,i[1]=o}n.fill(0)}},$v=new Uint8Array(8).fill(166);mt.aeskw=(0,ye.wrapCipher)({blockSize:8},(t=>({encrypt(e){if((0,je.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,ye.concatBytes)($v,e);return qu.encrypt(t,n),n},decrypt(e){if((0,je.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,ye.copyBytes)(e);if(qu.decrypt(t,n),!(0,ye.equalBytes)(n.subarray(0,8),$v))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}})));const Hv=2790873510;mt.aeskwp=(0,ye.wrapCipher)({blockSize:8},(t=>({encrypt(e){if((0,je.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const i=(0,ye.u32)(r);return i[0]=Hv,i[1]=Gu(e.length),qu.encrypt(t,r),r},decrypt(e){if((0,je.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,ye.copyBytes)(e),r=(0,ye.u32)(n);qu.decrypt(t,n);const i=Gu(r[1])>>>0,s=8*Math.ceil(i/8);if(r[0]!==Hv||n.length-8!==s)throw new Error("integrity check failed");for(let o=i;o<s;o++)if(n[8+o]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}}))),mt.unsafe={expandKeyLE:pr,expandKeyDecLE:xc,encrypt:un,decrypt:kc,encryptBlock:i_,decryptBlock:s_,ctrCounter:t_,ctr32:Oo},Object.defineProperty(qo,"__esModule",{value:!0}),qo.aes256cbc=qo.aes256gcm=void 0;var o_=mt;qo.aes256gcm=function(t,e,n){return(0,o_.gcm)(t,e,n)};qo.aes256cbc=function(t,e,n){return(0,o_.cbc)(t,e)};var Wu={},a_={},No={};Object.defineProperty(No,"__esModule",{value:!0}),No.sigma=void 0,No.rotl=function(t,e){return t<<e|t>>>32-e},No.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=(0,Wn.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,Yr.number)(i),(0,Yr.number)(o),(0,Yr.bool)(s),(0,Yr.bool)(n),(a,c,l,u,f=0)=>{(0,Yr.bytes)(a),(0,Yr.bytes)(c),(0,Yr.bytes)(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),(0,Yr.bytes)(u),(0,Yr.number)(f),f<0||f>=Kv)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const h=[];let g,p,y=a.length;if(y===32)h.push(g=(0,Wn.copyBytes)(a)),p=l_;else{if(y!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${y}`);g=new Uint8Array(32),g.set(a),g.set(a,16),p=CM,h.push(g)}oh(c)||h.push(c=(0,Wn.copyBytes)(c));const m=(0,Wn.u32)(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(p,m,(0,Wn.u32)(c.subarray(0,16)),m),c=c.subarray(16)}const b=16-i;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const x=new Uint8Array(12);x.set(c,s?0:12-c.length),c=x,h.push(c)}const w=(0,Wn.u32)(c);return(function(x,N,H,z,G,F,U,V){const L=G.length,B=new Uint8Array(Nl),M=(0,Wn.u32)(B),_=oh(G)&&oh(F),R=_?(0,Wn.u32)(G):jv,j=_?(0,Wn.u32)(F):jv;for(let v=0;v<L;U++){if(x(N,H,z,M,U,V),U>=Kv)throw new Error("arx: counter overflow");const S=Math.min(Nl,L-v);if(_&&S===Nl){const C=v/4;if(v%4!=0)throw new Error("arx: invalid block position");for(let P,A=0;A<xM;A++)P=C+A,j[P]=R[P]^M[A];v+=Nl}else{for(let C,P=0;P<S;P++)C=v+P,F[C]=G[C]^B[P];v+=S}}})(t,p,m,w,l,u,f,o),(0,Wn.clean)(...h),u}};const Yr=Qt,Wn=Kn,c_=t=>Uint8Array.from(t.split("").map((e=>e.charCodeAt(0)))),_M=c_("expand 16-byte k"),SM=c_("expand 32-byte k"),CM=(0,Wn.u32)(_M),l_=(0,Wn.u32)(SM);function oh(t){return t.byteOffset%4==0}No.sigma=l_.slice();const Nl=64,xM=16,Kv=2**32-1,jv=new Uint32Array;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.poly1305=void 0,Xa.wrapConstructorWithKey=u_;const Ml=Qt,Ua=Kn,Ft=(t,e)=>255&t[e++]|(255&t[e++])<<8;class kM{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,Ua.toBytes)(e),(0,Ml.bytes)(e,32);const n=Ft(e,0),r=Ft(e,2),i=Ft(e,4),s=Ft(e,6),o=Ft(e,8),a=Ft(e,10),c=Ft(e,12),l=Ft(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ft(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],f=o[4],d=o[5],h=o[6],g=o[7],p=o[8],y=o[9],m=Ft(e,n+0),b=Ft(e,n+2),w=Ft(e,n+4),x=Ft(e,n+6),N=Ft(e,n+8),H=Ft(e,n+10),z=Ft(e,n+12),G=Ft(e,n+14);let F=s[0]+(8191&m),U=s[1]+(8191&(m>>>13|b<<3)),V=s[2]+(8191&(b>>>10|w<<6)),L=s[3]+(8191&(w>>>7|x<<9)),B=s[4]+(8191&(x>>>4|N<<12)),M=s[5]+(N>>>1&8191),_=s[6]+(8191&(N>>>14|H<<2)),R=s[7]+(8191&(H>>>11|z<<5)),j=s[8]+(8191&(z>>>8|G<<8)),v=s[9]+(G>>>5|i),S=0,C=S+F*a+U*(5*y)+V*(5*p)+L*(5*g)+B*(5*h);S=C>>>13,C&=8191,C+=M*(5*d)+_*(5*f)+R*(5*u)+j*(5*l)+v*(5*c),S+=C>>>13,C&=8191;let P=S+F*c+U*a+V*(5*y)+L*(5*p)+B*(5*g);S=P>>>13,P&=8191,P+=M*(5*h)+_*(5*d)+R*(5*f)+j*(5*u)+v*(5*l),S+=P>>>13,P&=8191;let A=S+F*l+U*c+V*a+L*(5*y)+B*(5*p);S=A>>>13,A&=8191,A+=M*(5*g)+_*(5*h)+R*(5*d)+j*(5*f)+v*(5*u),S+=A>>>13,A&=8191;let E=S+F*u+U*l+V*c+L*a+B*(5*y);S=E>>>13,E&=8191,E+=M*(5*p)+_*(5*g)+R*(5*h)+j*(5*d)+v*(5*f),S+=E>>>13,E&=8191;let k=S+F*f+U*u+V*l+L*c+B*a;S=k>>>13,k&=8191,k+=M*(5*y)+_*(5*p)+R*(5*g)+j*(5*h)+v*(5*d),S+=k>>>13,k&=8191;let I=S+F*d+U*f+V*u+L*l+B*c;S=I>>>13,I&=8191,I+=M*a+_*(5*y)+R*(5*p)+j*(5*g)+v*(5*h),S+=I>>>13,I&=8191;let D=S+F*h+U*d+V*f+L*u+B*l;S=D>>>13,D&=8191,D+=M*c+_*a+R*(5*y)+j*(5*p)+v*(5*g),S+=D>>>13,D&=8191;let T=S+F*g+U*h+V*d+L*f+B*u;S=T>>>13,T&=8191,T+=M*l+_*c+R*a+j*(5*y)+v*(5*p),S+=T>>>13,T&=8191;let K=S+F*p+U*g+V*h+L*d+B*f;S=K>>>13,K&=8191,K+=M*u+_*l+R*c+j*a+v*(5*y),S+=K>>>13,K&=8191;let q=S+F*y+U*p+V*g+L*h+B*d;S=q>>>13,q&=8191,q+=M*f+_*u+R*l+j*c+v*a,S+=q>>>13,q&=8191,S=(S<<2)+S|0,S=S+C|0,C=8191&S,S>>>=13,P+=S,s[0]=C,s[1]=P,s[2]=A,s[3]=E,s[4]=k,s[5]=I,s[6]=D,s[7]=T,s[8]=K,s[9]=q}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(1^i)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+n[0];e[0]=65535&o;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=65535&o;(0,Ua.clean)(r)}update(e){(0,Ml.exists)(this);const{buffer:n,blockLen:r}=this,i=(e=(0,Ua.toBytes)(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=i-s;s+=r)this.process(e,s)}return this}destroy(){(0,Ua.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,Ml.exists)(this),(0,Ml.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function u_(t){const e=(r,i)=>t(i).update((0,Ua.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}Xa.poly1305=u_((t=>new kM(t))),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=o;const e=No,n=Qt,r=Xa,i=Kn;function s(f,d,h,g,p,y=20){let m=f[0],b=f[1],w=f[2],x=f[3],N=d[0],H=d[1],z=d[2],G=d[3],F=d[4],U=d[5],V=d[6],L=d[7],B=p,M=h[0],_=h[1],R=h[2],j=m,v=b,S=w,C=x,P=N,A=H,E=z,k=G,I=F,D=U,T=V,K=L,q=B,Z=M,oe=_,O=R;for(let Q=0;Q<y;Q+=2)j=j+P|0,q=(0,e.rotl)(q^j,16),I=I+q|0,P=(0,e.rotl)(P^I,12),j=j+P|0,q=(0,e.rotl)(q^j,8),I=I+q|0,P=(0,e.rotl)(P^I,7),v=v+A|0,Z=(0,e.rotl)(Z^v,16),D=D+Z|0,A=(0,e.rotl)(A^D,12),v=v+A|0,Z=(0,e.rotl)(Z^v,8),D=D+Z|0,A=(0,e.rotl)(A^D,7),S=S+E|0,oe=(0,e.rotl)(oe^S,16),T=T+oe|0,E=(0,e.rotl)(E^T,12),S=S+E|0,oe=(0,e.rotl)(oe^S,8),T=T+oe|0,E=(0,e.rotl)(E^T,7),C=C+k|0,O=(0,e.rotl)(O^C,16),K=K+O|0,k=(0,e.rotl)(k^K,12),C=C+k|0,O=(0,e.rotl)(O^C,8),K=K+O|0,k=(0,e.rotl)(k^K,7),j=j+A|0,O=(0,e.rotl)(O^j,16),T=T+O|0,A=(0,e.rotl)(A^T,12),j=j+A|0,O=(0,e.rotl)(O^j,8),T=T+O|0,A=(0,e.rotl)(A^T,7),v=v+E|0,q=(0,e.rotl)(q^v,16),K=K+q|0,E=(0,e.rotl)(E^K,12),v=v+E|0,q=(0,e.rotl)(q^v,8),K=K+q|0,E=(0,e.rotl)(E^K,7),S=S+k|0,Z=(0,e.rotl)(Z^S,16),I=I+Z|0,k=(0,e.rotl)(k^I,12),S=S+k|0,Z=(0,e.rotl)(Z^S,8),I=I+Z|0,k=(0,e.rotl)(k^I,7),C=C+P|0,oe=(0,e.rotl)(oe^C,16),D=D+oe|0,P=(0,e.rotl)(P^D,12),C=C+P|0,oe=(0,e.rotl)(oe^C,8),D=D+oe|0,P=(0,e.rotl)(P^D,7);let $=0;g[$++]=m+j|0,g[$++]=b+v|0,g[$++]=w+S|0,g[$++]=x+C|0,g[$++]=N+P|0,g[$++]=H+A|0,g[$++]=z+E|0,g[$++]=G+k|0,g[$++]=F+I|0,g[$++]=U+D|0,g[$++]=V+T|0,g[$++]=L+K|0,g[$++]=B+q|0,g[$++]=M+Z|0,g[$++]=_+oe|0,g[$++]=R+O|0}function o(f,d,h,g){let p=f[0],y=f[1],m=f[2],b=f[3],w=d[0],x=d[1],N=d[2],H=d[3],z=d[4],G=d[5],F=d[6],U=d[7],V=h[0],L=h[1],B=h[2],M=h[3];for(let R=0;R<20;R+=2)p=p+w|0,V=(0,e.rotl)(V^p,16),z=z+V|0,w=(0,e.rotl)(w^z,12),p=p+w|0,V=(0,e.rotl)(V^p,8),z=z+V|0,w=(0,e.rotl)(w^z,7),y=y+x|0,L=(0,e.rotl)(L^y,16),G=G+L|0,x=(0,e.rotl)(x^G,12),y=y+x|0,L=(0,e.rotl)(L^y,8),G=G+L|0,x=(0,e.rotl)(x^G,7),m=m+N|0,B=(0,e.rotl)(B^m,16),F=F+B|0,N=(0,e.rotl)(N^F,12),m=m+N|0,B=(0,e.rotl)(B^m,8),F=F+B|0,N=(0,e.rotl)(N^F,7),b=b+H|0,M=(0,e.rotl)(M^b,16),U=U+M|0,H=(0,e.rotl)(H^U,12),b=b+H|0,M=(0,e.rotl)(M^b,8),U=U+M|0,H=(0,e.rotl)(H^U,7),p=p+x|0,M=(0,e.rotl)(M^p,16),F=F+M|0,x=(0,e.rotl)(x^F,12),p=p+x|0,M=(0,e.rotl)(M^p,8),F=F+M|0,x=(0,e.rotl)(x^F,7),y=y+N|0,V=(0,e.rotl)(V^y,16),U=U+V|0,N=(0,e.rotl)(N^U,12),y=y+N|0,V=(0,e.rotl)(V^y,8),U=U+V|0,N=(0,e.rotl)(N^U,7),m=m+H|0,L=(0,e.rotl)(L^m,16),z=z+L|0,H=(0,e.rotl)(H^z,12),m=m+H|0,L=(0,e.rotl)(L^m,8),z=z+L|0,H=(0,e.rotl)(H^z,7),b=b+w|0,B=(0,e.rotl)(B^b,16),G=G+B|0,w=(0,e.rotl)(w^G,12),b=b+w|0,B=(0,e.rotl)(B^b,8),G=G+B|0,w=(0,e.rotl)(w^G,7);let _=0;g[_++]=p,g[_++]=y,g[_++]=m,g[_++]=b,g[_++]=V,g[_++]=L,g[_++]=B,g[_++]=M}t.chacha20orig=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,extendNonceFn:o,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:12});const a=new Uint8Array(16),c=(f,d)=>{f.update(d);const h=d.length%16;h&&f.update(a.subarray(h))},l=new Uint8Array(32);function u(f,d,h,g,p){const y=f(d,h,l),m=r.poly1305.create(y);p&&c(m,p),c(m,g);const b=new Uint8Array(16),w=(0,i.createView)(b);(0,i.setBigUint64)(w,0,BigInt(p?p.length:0),!0),(0,i.setBigUint64)(w,8,BigInt(g.length),!0),m.update(b);const x=m.digest();return(0,i.clean)(y,b),x}t._poly1305_aead=f=>(d,h,g)=>((0,n.bytes)(d,32),(0,n.bytes)(h),{encrypt(y,m){const b=y.length,w=b+16;m?(0,n.bytes)(m,w):m=new Uint8Array(w),f(d,h,y,m,1);const x=u(f,d,h,m.subarray(0,-16),g);return m.set(x,b),(0,i.clean)(x),m},decrypt(y,m){const b=y.length,w=b-16;if(b<16)throw new Error("encrypted data must be at least 16 bytes");m?(0,n.bytes)(m,w):m=new Uint8Array(w);const x=y.subarray(0,-16),N=y.subarray(-16),H=u(f,d,h,x,g);if(!(0,i.equalBytes)(N,H))throw new Error("invalid tag");return f(d,h,x,m,1),(0,i.clean)(H),m}}),t.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))})(a_),Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.xchacha20=void 0;var mo,Vv,Pa,PM=a_;Wu.xchacha20=function(t,e,n){return(0,PM.xchacha20poly1305)(t,e,n)},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=Kn,n=qg,r=qo,i=Wu,s=Sc,o=Nt;t.symEncrypt=function(u,f,d){return a(c,u,f,d)};function a(u,f,d,h){var g=(0,s.symmetricAlgorithm)();if(g==="aes-256-gcm")return u(r.aes256gcm,f,d,(0,s.symmetricNonceLength)(),o.AEAD_TAG_LENGTH,h);if(g==="xchacha20")return u(i.xchacha20,f,d,o.XCHACHA20_NONCE_LENGTH,o.AEAD_TAG_LENGTH,h);if(g==="aes-256-cbc")return u(r.aes256cbc,f,d,16,0);throw new Error("Not implemented")}function c(u,f,d,h,g,p){var y=(0,n.randomBytes)(h),m=u(f,y,p).encrypt(d);if(g===0)return(0,e.concatBytes)(y,m);var b=m.length-g,w=m.subarray(0,b),x=m.subarray(b);return(0,e.concatBytes)(y,x,w)}function l(u,f,d,h,g,p){var y=d.subarray(0,h),m=u(f,Uint8Array.from(y),p),b=d.subarray(h);if(g===0)return m.decrypt(b);var w=b.subarray(0,g),x=b.subarray(g);return m.decrypt((0,e.concatBytes)(x,w))}t.symDecrypt=function(u,f,d){return a(l,u,f,d)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt})(Mv),mo=Jf,Vv=er&&er.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Pa=er&&er.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||Vv(e,t,n)},Object.defineProperty(mo,"__esModule",{value:!0}),Pa(d2,mo),Pa(q2,mo),Pa(Pp,mo),Pa(Mv,mo);var Pc={};Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.PublicKey=void 0;var zv=Kn,Ll=Jf,TM=(function(){function t(e){this.data=(0,Ll.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,Ll.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return pe.from((0,Ll.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return pe.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,zv.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,i=e.multiply(this,n);return(0,Ll.getSharedKey)(r,i)},t.prototype.equals=function(e){return(0,zv.equalBytes)(this.data,e.data)},t})();Pc.PublicKey=TM,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.PrivateKey=void 0;var Gv=Kn,yo=Jf,IM=Pc,RM=(function(){function t(e){if(e===void 0)this.data=(0,yo.getValidSecret)();else{if(!(0,yo.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new IM.PublicKey((0,yo.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,yo.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return pe.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,Gv.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,n);return(0,yo.getSharedKey)(r,i)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,yo.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,Gv.equalBytes)(this.data,e.data)},t})();Ku.PrivateKey=RM,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=Ku;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=Pc;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})})(zd),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(a,c){var l=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),f=l.encapsulate(u,(0,n.isHkdfKeyCompressed)()),d=(0,n.isEphemeralKeyCompressed)()?l.publicKey.compressed:l.publicKey.uncompressed,h=(0,i.symEncrypt)(f,c);return pe.from((0,e.concatBytes)(d,h))},t.decrypt=function(a,c){var l=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),f=new r.PublicKey(c.subarray(0,u)),d=c.subarray(u),h=f.decapsulate(l,(0,n.isHkdfKeyCompressed)());return pe.from((0,i.symDecrypt)(h,d))};var e=Kn,n=Sc,r=zd,i=Jf,s=Sc;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return s.ECIES_CONFIG}});var o=zd;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return o.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}}),t.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}})(_o);const f_=yn("KeyExchange:Layer"),d_=yn("SocketService:Layer"),h_=yn("Ecies:Layer"),p_=yn("RemoteCommunication:Layer");f_.color="##95c44e",d_.color="#f638d7",h_.color="#465b9c",p_.color="#47a2be";const ce={KeyExchange:f_,SocketService:d_,Ecies:h_,RemoteCommunication:p_};let Ta,Bl=[],ah=[];const Si=(t,e)=>de(void 0,void 0,void 0,(function*(){Ta=e,ah.push(t),(function(n){return de(this,void 0,void 0,(function*(){if(!Ta||!n)return;(function(){const o=ah;ah=Bl,Bl=o})();const r=Ta.endsWith("/")?`${Ta}evt`:`${Ta}/evt`,i=Object.assign({},n);if(delete i.params,n.params)for(const[o,a]of Object.entries(n.params))i[o]=a;const s=JSON.stringify(i);ce.RemoteCommunication(`[sendBufferedEvents] Sending ${Bl.length} analytics events to ${r}`);try{const o=yield BA(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:s}),a=yield o.text();ce.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),Bl.length=0}catch{}}))})(t).catch((()=>{}))}));class ch{constructor(e){this.enabled=!0,e?.debug&&yn.enable("Ecies:Layer"),this.ecies=e?.privateKey?_o.PrivateKey.fromHex(e.privateKey):new _o.PrivateKey,ce.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),ce.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),ce.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new _o.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{ce.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=pe.from(e),s=_o.encrypt(n,i);r=pe.from(s).toString("base64")}catch(i){throw ce.Ecies("[ECIES: encrypt()] error encrypt:",i),ce.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),ce.Ecies("[ECIES: encrypt()] data: ",e),ce.Ecies("[ECIES: encrypt()] otherkey: ",n),i}return r}decrypt(e){let n=e;if(this.enabled)try{ce.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=pe.from(e.toString(),"base64");n=_o.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw ce.Ecies("[ECIES: decrypt()] error decrypt",r),ce.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),ce.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){ce.Ecies("[ECIES: toString()]",this.getKeyInfo())}}var ps={version:"0.33.1"};const ua="https://metamask-sdk.api.cx.metamask.io/",OM=["websocket"],fa=6048e5,NM=3e3,qt={METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_WATCHASSET:"wallet_watchAsset",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},MM=[qt.METAMASK_CONNECTSIGN,qt.METAMASK_CONNECTWITH,qt.METAMASK_OPEN,qt.METAMASK_BATCH,qt.PERSONAL_SIGN,qt.WALLET_REQUESTPERMISSIONS,qt.WALLET_REVOKEPERMISSIONS,qt.WALLET_WATCHASSET,qt.ETH_SENDTRANSACTION,qt.ETH_SIGNTYPEDDATA,qt.ETH_SIGNTYPEDDATA_V3,qt.ETH_SIGNTYPEDDATA_V4,qt.ETH_SIGNTRANSACTION,qt.ETH_SIGN,qt.PERSONAL_EC_RECOVER];function Xc(t){return MM.includes(t)}function g_(t){const{context:e}=t;ce.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var zt,we,Qu,Qe,pt,Ct,vo;(vo=zt||(zt={})).DISCONNECTED="disconnected",vo.WAITING="waiting",vo.TIMEOUT="timeout",vo.LINKED="linked",vo.PAUSED="paused",vo.TERMINATED="terminated",(function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"})(we||(we={})),(Qu||(Qu={})).KEY_EXCHANGE="key_exchange",(function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"})(Qe||(Qe={}));class LM extends zf.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:i,logging:s}){super(),this.keysExchanged=!1,this.step=Qe.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,i?.privateKey&&n&&(ce.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new ch(Object.assign(Object.assign({},i),{debug:s?.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=s?.keyExchangeLayer===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(Qu.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(ce.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void ce.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&ce.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(we.KEY_INFO,r.type),r.type===Qe.KEY_HANDSHAKE_SYN?(this.checkStep([Qe.KEY_HANDSHAKE_NONE,Qe.KEY_HANDSHAKE_ACK]),ce.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch((i=>{ce.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",i)})),this.setStep(Qe.KEY_HANDSHAKE_ACK)):r.type===Qe.KEY_HANDSHAKE_SYNACK?(this.checkStep([Qe.KEY_HANDSHAKE_SYNACK,Qe.KEY_HANDSHAKE_ACK,Qe.KEY_HANDSHAKE_NONE]),ce.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_ACK}).catch((i=>{ce.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",i)})),this.keysExchanged=!0,this.setStep(Qe.KEY_HANDSHAKE_ACK),this.emit(we.KEYS_EXCHANGED)):r.type===Qe.KEY_HANDSHAKE_ACK&&(ce.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Qe.KEY_HANDSHAKE_ACK,Qe.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Qe.KEY_HANDSHAKE_ACK),this.emit(we.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new ch(e)}clean(){ce.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Qe.KEY_HANDSHAKE_NONE),this.emit(we.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state,s=i>=2;r?ce.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(ce.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==Qe.KEY_HANDSHAKE_NONE&&this.step!==Qe.KEY_HANDSHAKE_SYNACK)||n?(ce.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Qe.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch((o=>{ce.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",o)}))):ce.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?ce.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):s?this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch((o=>{ce.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",o)})):(this.communicationLayer.sendMessage({type:Qe.KEY_HANDSHAKE_START}).catch((o=>{ce.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",o)})),this.clean()))}setStep(e){this.step=e,this.emit(we.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new ch({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){ce.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}}(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(pt||(pt={})),(function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"})(Ct||(Ct={}));const su=(t,e,n)=>de(void 0,void 0,void 0,(function*(){var r,i,s,o,a,c;const{remote:l,state:u}=t,{channelId:f,isOriginator:d}=u;if(e==="error_terminated")return ce.SocketService(`handleJoinChannelResults: Channel ${f} terminated`),void t.emit(we.TERMINATE);if(!n)return void ce.SocketService(`handleJoinChannelResults: No result for channel ${f}`);const{persistence:h,walletKey:g,rejected:p}=n;if(ce.SocketService(`handleJoinChannelResults: Channel ${f} persistence=${h} walletKey=${g} rejected=${p}`),p)return ce.SocketService(`handleJoinChannelResults: Channel ${f} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(we.REJECTED,{channelId:f}),void t.remote.emitServiceStatusEvent();if(g&&!(!((r=l.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(g),(i=t.state.keyExchange)===null||i===void 0||i.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(we.AUTHORIZED);const{communicationLayer:y,storageManager:m}=l.state,b=Object.assign(Object.assign({},l.state.channelConfig),{channelId:(s=l.state.channelId)!==null&&s!==void 0?s:"",validUntil:Date.now()+fa,localKey:y?.getKeyInfo().ecies.private,otherKey:g});t.sendMessage({type:Qe.KEY_HANDSHAKE_ACK}).catch((w=>{})),(o=t.state.socket)===null||o===void 0||o.emit(pt.PING,{id:f,clientType:d?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield m?.persistChannelConfig(b),l.emitServiceStatusEvent(),l.setConnectionStatus(zt.LINKED)}h&&(t.emit(we.CHANNEL_PERSISTENCE),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(we.AUTHORIZED),Si(Object.assign(Object.assign({id:f??"",event:d?Ct.CONNECTED:Ct.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:ps.version,walletVersion:(c=t.remote.state.walletInfo)===null||c===void 0?void 0:c.version}),u.communicationServerUrl).catch((y=>{})))})),Qo=t=>new Promise((e=>{setTimeout(e,t)})),qv=(t,e,...n)=>de(void 0,[t,e,...n],void 0,(function*(r,i,s=200){let o;const a=Date.now();let c=!1;for(;!c;){if(c=Date.now()-a>3e5,o=i[r],o.elapsedTime!==void 0)return o;yield Qo(s)}throw new Error(`RPC ${r} timed out`)})),Op=t=>de(void 0,void 0,void 0,(function*(){const{state:e}=t,{socket:n,channelId:r,context:i,isOriginator:s,isReconnecting:o}=e;if(o)return ce.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return ce.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:a}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,ce.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(ce.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield Qo(200),n.connected)return ce.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(pt.PING,{id:r,clientType:s?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(we.SOCKET_RECONNECT);try{if(yield new Promise(((c,l)=>{n.emit(we.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:s?"dapp":"wallet"},((u,f)=>de(void 0,void 0,void 0,(function*(){try{yield su(t,u,f),c()}catch(d){l(d)}}))))})),yield Qo(100),n.connected)return ce.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(c){ce.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,c)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield Qo(200))}return ce.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}}));function m_(t,e){return de(this,void 0,void 0,(function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),i={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return ce.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,i),e.type===pt.TERMINATE&&(t.state.manualDisconnect=!0),new Promise(((s,o)=>{var a;(a=t.state.socket)===null||a===void 0||a.emit(we.MESSAGE,i,((c,l)=>{var u;c&&(ce.SocketService(`[SocketService: encryptAndSendMessage()] error=${c}`),o(c)),ce.SocketService("[encryptAndSendMessage] response",l),s((u=l?.success)!==null&&u!==void 0&&u)}))}))}))}var Mo;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(Mo||(Mo={}));const y_=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map((t=>t.toLowerCase())),BM=[{event:we.CLIENTS_CONNECTED,handler:function(t,e){return n=>de(this,void 0,void 0,(function*(){var r,i,s,o,a,c,l,u,f,d,h;const g=(i=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&i!==void 0&&i;if(ce.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${g} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(we.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(ce.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(c=t.state.keyExchange)===null||c===void 0||c.start({isOriginator:(l=t.state.isOriginator)!==null&&l!==void 0&&l})),t.state.resumed=!1;else if(t.state.clientsPaused)ce.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const p=!g;ce.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${p} -- backward compatibility`),ce.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(f=t.state.keyExchange)===null||f===void 0?void 0:f.areKeysExchanged()} -- force=${p} -- backward compatibility`),(d=t.state.keyExchange)===null||d===void 0||d.start({isOriginator:(h=t.state.isOriginator)!==null&&h!==void 0&&h,force:p})}t.state.clientsConnected=!0,t.state.clientsPaused=!1}))}},{event:we.CHANNEL_CREATED,handler:function(t,e){return n=>{ce.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(we.CHANNEL_CREATED,n)}}},{event:we.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,ce.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?ce.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(we.CLIENTS_DISCONNECTED,e))}}},{event:we.CONFIG,handler:function(t,e){return n=>de(this,void 0,void 0,(function*(){var r,i,s;ce.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:o,walletKey:a}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(ce.SocketService(`Setting wallet key ${a}`),t.remote.state.channelConfig.otherKey=a,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:Qe.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:pt.PING}),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig)),o!==!0||t.remote.state.channelConfig.relayPersistence||(ce.SocketService(`Setting relay persistence ${o}`),t.remote.state.channelConfig.relayPersistence=o,t.remote.state.relayPersistence=!0,t.remote.emit(we.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(we.AUTHORIZED),yield(s=t.remote.state.storageManager)===null||s===void 0?void 0:s.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(we.CHANNEL_PERSISTENCE))}))}},{event:we.MESSAGE,handler:function(t,e){return n=>{var r,i,s,o,a,c,l,u,f,d,h,g,p,y,m,b,w,x;const{ackId:N,message:H,error:z}=n,G=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(ce.SocketService(`[SocketService handleMessage()]  relayPersistence=${G}  context=${t.state.context} on 'message' ${e} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,n),z)throw ce.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${z}`),new Error(z);const F=typeof H=="string";if(!F&&H?.type===Qe.KEY_HANDSHAKE_START)return G?void 0:(ce.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,H),void((s=t.state.keyExchange)===null||s===void 0||s.start({isOriginator:(o=t.state.isOriginator)!==null&&o!==void 0&&o,force:!0})));if(!F&&(!((a=H?.type)===null||a===void 0)&&a.startsWith("key_handshake")))return G?void 0:(ce.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,H),void t.emit(Qu.KEY_EXCHANGE,{message:H,context:t.state.context}));if(F&&!(!((c=t.state.keyExchange)===null||c===void 0)&&c.areKeysExchanged())){let L=!1;try{ce.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(l=t.state.keyExchange)===null||l===void 0||l.decryptMessage(H),L=!0}catch(B){ce.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,B)}if(!L)return t.state.isOriginator?(f=t.state.keyExchange)===null||f===void 0||f.start({isOriginator:(d=t.state.isOriginator)!==null&&d!==void 0&&d}):t.sendMessage({type:Qe.KEY_HANDSHAKE_START}).catch((B=>{})),void ce.SocketService(`Message ignored because invalid key exchange status. step=${(h=t.state.keyExchange)===null||h===void 0?void 0:h.getKeyInfo().step}`,(g=t.state.keyExchange)===null||g===void 0?void 0:g.getKeyInfo(),H);ce.SocketService("Invalid key exchange status detected --- updating it."),(u=t.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!F&&H?.type)return void t.emit(we.MESSAGE,H);if(!F)return void t.emit(we.MESSAGE,H);const U=(p=t.state.keyExchange)===null||p===void 0?void 0:p.decryptMessage(H),V=JSON.parse(U??"{}");if(N&&N?.length>0&&(ce.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${N} channelId=${e}`),(y=t.state.socket)===null||y===void 0||y.emit(we.MESSAGE_ACK,{ackId:N,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=V?.type===pt.PAUSE,t.state.isOriginator&&V.data){const L=V.data,B=t.state.rpcMethodTracker[L.id];if(B){const M=Date.now()-B.timestamp;ce.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${L.id} method=${B.method} responseTime=${M}`,V),t.remote.state.analytics&&y_.includes(B.method.toLowerCase())&&Si(Object.assign(Object.assign({id:(m=t.remote.state.channelId)!==null&&m!==void 0?m:"",event:Ct.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:ps.version},t.remote.state.originatorInfo),{walletVersion:(b=t.remote.state.walletInfo)===null||b===void 0?void 0:b.version,params:{method:B.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch((R=>{})),Xc(B.method)&&_t.analytics.track(L.error?L.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:B.method});const _=Object.assign(Object.assign({},B),{result:L.result,error:L.error?{code:(w=L.error)===null||w===void 0?void 0:w.code,message:(x=L.error)===null||x===void 0?void 0:x.message}:void 0,elapsedTime:M});t.state.rpcMethodTracker[L.id]=_,t.emit(we.RPC_UPDATE,_)}}t.emit(we.MESSAGE,{message:V})}}},{event:we.REJECTED,handler:function(t,e){return n=>de(this,void 0,void 0,(function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(ce.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),Si(Object.assign(Object.assign({id:e,event:Ct.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:ps.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch((i=>{})),_t.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(we.REJECTED,{channelId:e}),t.remote.setConnectionStatus(zt.DISCONNECTED)):ce.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)}))}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{ce.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(we.CLIENTS_WAITING,n)}}}],DM=[{event:we.KEY_INFO,handler:function(t){return e=>{ce.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(we.KEY_INFO,e)}}},{event:we.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;ce.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:i}=t.remote.state;if(i){const o=t.getKeyExchange().getKeyInfo().ecies;i.localKey=o.private,i.otherKey=o.otherPubKey,t.remote.state.channelConfig=i,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(i).catch((a=>{}))}t.emit(we.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const s={keyInfo:t.getKeyInfo()};t.emit(we.SERVICE_STATUS,s)}}}];function Wv(t,e){ce.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n?.io.on("error",(i=>{ce.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,i)})),n?.io.on("reconnect",(i=>{ce.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,i),Op(t).catch((s=>{}))})),n?.io.on("reconnect_error",(i=>{ce.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,i)})),n?.io.on("reconnect_failed",(()=>{ce.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)}))),n?.on("disconnect",(i=>(ce.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${i}' begin recovery...`),(function(s){return o=>{ce.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${s.state.manualDisconnect}`,o),s.state.manualDisconnect||(s.emit(we.SOCKET_DISCONNECTED),Op(s).catch((a=>{})))}})(t)(i))))),BM.forEach((({event:i,handler:s})=>{n?.on(`${i}-${e}`,s(t,e))})),DM.forEach((({event:i,handler:s})=>{r?.on(i,s(t))})),t.state.setupChannelListeners=!0}class UM extends zf.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:i,context:s,remote:o,logging:a}=e;this.state.resumed=n,this.state.context=s,this.state.isOriginator=o.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=a?.serviceLayer===!0,this.remote=o,a?.serviceLayer===!0&&yn.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==ua&&a?.plaintext===!0,ce.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:i}=this.options,s={autoConnect:!1,transports:OM,withCredentials:!0},o=this.state.communicationServerUrl;ce.SocketService(`[SocketService: initSocket()] Socket IO url: ${o}`),this.state.socket=tu(o,s),(function(c){if(typeof window<"u"&&typeof document<"u"&&(ce.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,c),!c.state.focusListenerAdded)){const l=()=>{ce.SocketService("Document has focus --- reconnecting socket"),Op(c).catch((u=>{}))};window.addEventListener("focus",l),c.state.focusListenerAdded=!0,c.state.removeFocusListener=()=>{window.removeEventListener("focus",l),c.state.focusListenerAdded=!1}}})(this);const a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:i};this.state.keyExchange=new LM(a)}resetKeys(){return ce.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){var n,r,i;if(ce.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const s=Xi();e.state.channelId=s,Wv(e,s),yield new Promise(((a,c)=>{var l;(l=e.state.socket)===null||l===void 0||l.emit(we.JOIN_CHANNEL,{channelId:s,context:`${e.state.context}createChannel`,clientType:"dapp"},((u,f)=>de(this,void 0,void 0,(function*(){try{yield su(e,u,f),a()}catch(d){c(d)}}))))}));const o=(i=e.state.keyExchange)===null||i===void 0?void 0:i.getKeyInfo();return{channelId:s,pubKey:o?.ecies.public||"",privKey:o?.ecies.private||""}}))})(this)}))}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return(function(i){return de(this,arguments,void 0,(function*({options:s,instance:o}){const{channelId:a,authorized:c,withKeyExchange:l}=s,{state:u,remote:f}=o,{isOriginator:d=!1,socket:h,keyExchange:g}=u,{channelConfig:p}=f.state;if(h?.connected)throw new Error("socket already connected");if(d&&p?.relayPersistence){const{localKey:y,otherKey:m}=p;y&&m&&g?.setRelayPersistence({localKey:y,otherKey:m})}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:l,isOriginator:d,channelId:a}),h?.connect(),Wv(o,a),!d&&c&&(g?.setKeysExchanged(!0),Object.assign(f.state,{ready:!0,authorized:!0})),new Promise((y=>{var m;const b=(m=g?.getKeyInfo())===null||m===void 0?void 0:m.ecies.public;h?.emit(we.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:d?"dapp":"wallet",publicKey:c&&!d?b:void 0},((w,x)=>de(this,void 0,void 0,(function*(){yield su(o,w,x),y()}))))}))}))})({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(we.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Qe.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return de(this,void 0,void 0,(function*(){return(function(n,r){return de(this,void 0,void 0,(function*(){var i,s,o;if(!n.state.channelId)throw ce.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(ce.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(i=n.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,r),(s=r?.type)===null||s===void 0?void 0:s.startsWith("key_handshake"))return(function(c,l){var u;ce.SocketService(`[SocketService: handleKeyHandshake()] context=${c.state.context}`,l),(u=c.state.socket)===null||u===void 0||u.emit(we.MESSAGE,{id:c.state.channelId,context:c.state.context,clientType:c.state.isOriginator?"dapp":"wallet",message:l})})(n,r),!0;(function(c,l){var u;if(!(!((u=c.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!c.remote.state.relayPersistence)throw ce.SocketService(`[SocketService: validateKeyExchange()] context=${c.state.context} ERROR keys not exchanged`,l),new Error("Keys not exchanged BBB")})(n,r),(function(c,l){var u;const f=(u=l?.method)!==null&&u!==void 0?u:"",d=l?.id;c.state.isOriginator&&d&&(c.state.rpcMethodTracker[d]={id:d,timestamp:Date.now(),method:f},c.emit(we.RPC_UPDATE,c.state.rpcMethodTracker[d]))})(n,r);const a=yield m_(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&y_.includes(r.method.toLowerCase())&&Si({id:(o=n.remote.state.channelId)!==null&&o!==void 0?o:"",event:Ct.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch((c=>{})),n.remote.state.isOriginator&&r.method&&Xc(r.method)&&_t.analytics.track("sdk_action_requested",{action:r.method}),(function(c,l){return de(this,void 0,void 0,(function*(){var u;const f=l?.id,d=(u=l?.method)!==null&&u!==void 0?u:"";if(c.state.isOriginator&&f)try{const h=qv(f,c.state.rpcMethodTracker,200).then((y=>({type:Mo.RPC_CHECK,result:y}))),g=de(this,void 0,void 0,(function*(){const y=yield(b=>de(void 0,[b],void 0,(function*({rpcId:w,instance:x}){for(;x.state.lastRpcId===w||x.state.lastRpcId===void 0;)yield Qo(200);return x.state.lastRpcId})))({instance:c,rpcId:f}),m=yield qv(y,c.state.rpcMethodTracker,200);return{type:Mo.SKIPPED_RPC,result:m}})),p=yield Promise.race([h,g]);if(p.type===Mo.RPC_CHECK){const y=p.result;ce.SocketService(`[SocketService:handleRpcReplies()] id=${l.id} ${d} ( ${y.elapsedTime} ms)`,y.result)}else{if(p.type!==Mo.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${f}`);{const y=Object.assign(Object.assign({},c.state.rpcMethodTracker[f]),{error:new Error("SDK_CONNECTION_ISSUE")});c.emit(we.RPC_UPDATE,y);const m={data:Object.assign(Object.assign({},y),{jsonrpc:"2.0"}),name:"metamask-provider"};c.emit(we.MESSAGE,{message:m})}}}catch(h){throw h}}))})(n,r).catch((c=>{})),a}))})(this,e)}))}ping(){return(function(e){return de(this,void 0,void 0,(function*(){var n,r;ce.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(pt.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})}))})(this)}pause(){return(function(e){return de(this,void 0,void 0,(function*(){var n,r;ce.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:pt.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()}))})(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return(function(e){return de(this,void 0,void 0,(function*(){const{state:n,remote:r}=e,{socket:i,channelId:s,context:o,keyExchange:a,isOriginator:c}=n,{isOriginator:l}=r.state;if(ce.SocketService(`[SocketService: resume()] channelId=${s} context=${o} connected=${i?.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a?.areKeysExchanged()}`),!s)throw ce.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");i?.connected?(ce.SocketService("[SocketService: resume()] already connected."),i.emit(pt.PING,{id:s,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a?.areKeysExchanged()||(c?yield e.sendMessage({type:pt.READY}):a?.start({isOriginator:!1}))):(i?.connect(),ce.SocketService(`[SocketService: resume()] after connecting socket --> connected=${i?.connected}`),i?.emit(we.JOIN_CHANNEL,{channelId:s,context:`${o}_resume`,clientType:l?"dapp":"wallet"},((u,f)=>de(this,void 0,void 0,(function*(){try{yield su(e,u,f)}catch{}}))))),n.manualDisconnect=!1,n.resumed=!0}))})(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return(function(n,r){var i,s,o,a,c;ce.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r?.terminate&&((s=(i=n.state).removeFocusListener)===null||s===void 0||s.call(i),n.state.channelId=r.channelId,(o=n.state.socket)===null||o===void 0||o.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(c=n.state.socket)===null||c===void 0||c.disconnect()})(this,e)}}var Xs,Yt,Qv;function FM(t){return()=>de(this,void 0,void 0,(function*(){var e,n,r;const{state:i}=t;if(i.authorized)return;yield de(this,void 0,void 0,(function*(){for(;!i.walletInfo;)yield Qo(500)}));const s="7.3".localeCompare(((e=i.walletInfo)===null||e===void 0?void 0:e.version)||"");if(ce.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=i.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${s}`),s!==1)return;const o=i.platformType===Yt.MobileWeb||i.platformType===Yt.ReactNative||i.platformType===Yt.MetaMaskMobileWebview;ce.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${o} channel=${i.channelId} walletVersion=${(r=i.walletInfo)===null||r===void 0?void 0:r.version}`),o&&(i.authorized=!0,t.emit(we.AUTHORIZED))}))}function $M(t){return e=>{const{state:n}=t;ce.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(we.CHANNEL_CREATED,e)}}function HM(t,e){return()=>{var n,r,i,s;const{state:o}=t;ce.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${o.channelId} keysExchanged=${(r=(n=o.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),o.analytics&&Si(Object.assign(Object.assign({id:(i=o.channelId)!==null&&i!==void 0?i:"",event:o.reconnection?Ct.RECONNECT:o.isOriginator?Ct.REQUEST:Ct.REQUEST_MOBILE},o.originatorInfo),{commLayer:e,sdkVersion:o.sdkVersion,walletVersion:(s=o.walletInfo)===null||s===void 0?void 0:s.version,commLayerVersion:ps.version}),o.communicationServerUrl).catch((a=>{})),o.isOriginator&&!o.reconnection&&_t.analytics.track("sdk_connection_established",{transport_type:"websocket"}),o.clientsConnected=!0,o.originatorInfoSent=!1,t.emit(we.CLIENTS_CONNECTED)}}function KM(t){return e=>{const{state:n}=t;ce.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(we.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(zt.DISCONNECTED)}}function jM(t){return e=>{var n;const{state:r}=t;if(ce.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(zt.WAITING),t.emit(we.CLIENTS_WAITING,e),r.originatorConnectStarted){ce.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const i=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,s=setTimeout((()=>{ce.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(zt.TIMEOUT),clearTimeout(s)}),i)}}}function VM(t,e){return n=>{var r,i,s,o,a,c,l,u;const{state:f}=t;if(ce.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${f.context} on commLayer.'keys_exchanged' channel=${f.channelId}`,n),(i=(r=f.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||i===void 0?void 0:i.keysExchanged){const d=Object.assign(Object.assign({},f.channelConfig),{channelId:(s=f.channelId)!==null&&s!==void 0?s:"",validUntil:((o=f.channelConfig)===null||o===void 0?void 0:o.validUntil)||fa,localKey:f.communicationLayer.getKeyInfo().ecies.private,otherKey:f.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=f.storageManager)===null||a===void 0||a.persistChannelConfig(d).catch((h=>{})),t.setConnectionStatus(zt.LINKED)}(function(d,h){var g,p,y,m,b,w,x,N;const{state:H}=d;ce.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${H.channelId}`,h);const z=Object.assign(Object.assign({},H.channelConfig),{channelId:(g=H.channelId)!==null&&g!==void 0?g:"",validUntil:(y=(p=H.channelConfig)===null||p===void 0?void 0:p.validUntil)!==null&&y!==void 0?y:0,relayPersistence:H.relayPersistence,localKey:(b=(m=H.communicationLayer)===null||m===void 0?void 0:m.state.keyExchange)===null||b===void 0?void 0:b.getKeyInfo().ecies.private,otherKey:(x=(w=H.communicationLayer)===null||w===void 0?void 0:w.state.keyExchange)===null||x===void 0?void 0:x.getKeyInfo().ecies.otherPubKey,lastActive:h.getTime()});(N=H.storageManager)===null||N===void 0||N.persistChannelConfig(z)})(t,new Date),f.analytics&&f.channelId&&Si(Object.assign(Object.assign({id:f.channelId,event:n.isOriginator?Ct.CONNECTED:Ct.CONNECTED_MOBILE},f.originatorInfo),{sdkVersion:f.sdkVersion,commLayer:e,commLayerVersion:ps.version,walletVersion:(c=f.walletInfo)===null||c===void 0?void 0:c.version}),f.communicationServerUrl).catch((d=>{})),f.isOriginator=n.isOriginator,n.isOriginator||((l=f.communicationLayer)===null||l===void 0||l.sendMessage({type:pt.READY}),f.ready=!0,f.paused=!1),n.isOriginator&&!f.originatorInfoSent&&((u=f.communicationLayer)===null||u===void 0||u.sendMessage({type:pt.ORIGINATOR_INFO,originatorInfo:f.originatorInfo,originator:f.originatorInfo}),f.originatorInfoSent=!0)}}function zM(t){return e=>{let n=e;e.message&&(n=n.message),(function(r,i){const{state:s}=i;if(ce.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${s.context} on 'message' typeof=${typeof r}`,r),i.state.ready=!0,s.isOriginator||r.type!==pt.ORIGINATOR_INFO)if(s.isOriginator&&r.type===pt.WALLET_INFO)(function(o,a){const{state:c}=o;c.walletInfo=a.walletInfo,c.paused=!1})(i,r);else{if(s.isOriginator&&r.type===pt.WALLET_INIT)(function(o,a){return de(this,void 0,void 0,(function*(){var c,l,u;const{state:f}=o;if(f.isOriginator){const d=a.data||{};if(typeof d=="object"&&"accounts"in d&&"chainId"in d&&"walletKey"in d)try{const{channelConfig:h}=o.state;if(ce.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(h,null,2)),h){const g=d.accounts,p=d.chainId,y=d.walletKey;let m,b=!1;"deeplinkProtocol"in d&&(b=!!d.deeplinkProtocol,o.state.deeplinkProtocolAvailable=b),"walletVersion"in d&&(m=d.walletVersion),yield(c=o.state.storageManager)===null||c===void 0?void 0:c.persistChannelConfig(Object.assign(Object.assign({},h),{otherKey:y,walletVersion:m,deeplinkProtocolAvailable:b,relayPersistence:!0})),yield(l=o.state.storageManager)===null||l===void 0?void 0:l.persistAccounts(g),yield(u=o.state.storageManager)===null||u===void 0?void 0:u.persistChainId(p)}o.emit(we.WALLET_INIT,{accounts:d.accounts,chainId:d.chainId})}catch{}}}))})(i,r).catch((o=>{ce.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)}));else if(r.type===pt.TERMINATE)(function(o){return de(this,void 0,void 0,(function*(){const{state:a}=o;a.isOriginator&&(yield v_({options:{terminate:!0,sendMessage:!1},instance:o}),o.emit(we.TERMINATE))}))})(i).catch((o=>{ce.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)}));else if(r.type===pt.PAUSE)(function(o){const{state:a}=o;a.paused=!0,o.setConnectionStatus(zt.PAUSED)})(i);else if(r.type===pt.READY&&s.isOriginator)(function(o){const{state:a}=o;o.setConnectionStatus(zt.LINKED);const c=a.paused;a.paused=!1,o.emit(we.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),c&&(a.authorized=!0,o.emit(we.AUTHORIZED))})(i);else{if(r.type===pt.OTP&&s.isOriginator)return void(function(o,a){var c;const{state:l}=o;o.emit(we.OTP,a.otpAnswer),"6.6".localeCompare(((c=l.walletInfo)===null||c===void 0?void 0:c.version)||"")===1&&o.emit(we.SDK_RPC_CALL,{method:qt.ETH_REQUESTACCOUNTS,params:[]})})(i,r);r.type===pt.AUTHORIZED&&s.isOriginator&&(function(o){const{state:a}=o;a.authorized=!0,o.emit(we.AUTHORIZED)})(i)}i.emit(we.MESSAGE,r)}else(function(o,a){var c;const{state:l}=o;(c=l.communicationLayer)===null||c===void 0||c.sendMessage({type:pt.WALLET_INFO,walletInfo:l.walletInfo}),l.originatorInfo=a.originatorInfo||a.originator,o.emit(we.CLIENTS_READY,{isOriginator:l.isOriginator,originatorInfo:l.originatorInfo}),l.paused=!1})(i,r)})(n,t)}}function GM(t){return()=>{const{state:e}=t;ce.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,g_(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function qM(t){return()=>{const{state:e}=t;ce.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function WM(t){return()=>de(this,void 0,void 0,(function*(){var e,n,r,i,s,o,a;const{state:c}=t;ce.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${c.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(we.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(we.AUTHORIZED),t.emit(we.CLIENTS_READY),t.emit(we.CHANNEL_PERSISTENCE);try{c.channelConfig=Object.assign(Object.assign({},c.channelConfig),{localKey:(n=c.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=c.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(i=c.channelId)!==null&&i!==void 0?i:"",validUntil:(o=(s=c.channelConfig)===null||s===void 0?void 0:s.validUntil)!==null&&o!==void 0?o:fa,relayPersistence:!0}),yield(a=c.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(c.channelConfig)}catch{}}))}function Jv({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:i=ua,instance:s}){var o,a,c,l,u,f,d,h,g,p,y;const{state:m}=s;if(ce.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(m,null,2)),t!==Xs.SOCKET)throw new Error("Invalid communication protocol");m.communicationLayer=new UM({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:m.transports,communicationServerUrl:i,context:m.context,ecies:r,logging:m.logging,remote:s});let b=typeof document<"u"&&document.URL||"",w=typeof document<"u"&&document.title||"";!((o=m.dappMetadata)===null||o===void 0)&&o.url&&(b=m.dappMetadata.url),!((a=m.dappMetadata)===null||a===void 0)&&a.name&&(w=m.dappMetadata.name);const x=(f=(l=(c=m.dappMetadata)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:(u=m.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&f!==void 0?f:"N/A",N=typeof window<"u"&&window.location!==void 0&&(d=window.location.hostname)!==null&&d!==void 0?d:x,H={url:b,title:w,source:(h=m.dappMetadata)===null||h===void 0?void 0:h.source,dappId:N,anonId:m.anonId,icon:((g=m.dappMetadata)===null||g===void 0?void 0:g.iconUrl)||((p=m.dappMetadata)===null||p===void 0?void 0:p.base64Icon),platform:m.platformType,apiVersion:ps.version,connector:(y=m.dappMetadata)===null||y===void 0?void 0:y.connector};m.originatorInfo=H;const z={[we.AUTHORIZED]:FM(s),[we.MESSAGE]:zM(s),[we.CHANNEL_PERSISTENCE]:WM(s),[we.CLIENTS_CONNECTED]:HM(s,t),[we.KEYS_EXCHANGED]:VM(s,t),[we.SOCKET_DISCONNECTED]:qM(s),[we.SOCKET_RECONNECT]:GM(s),[we.CLIENTS_DISCONNECTED]:KM(s),[we.KEY_INFO]:()=>{},[we.CHANNEL_CREATED]:$M(s),[we.CLIENTS_WAITING]:jM(s),[we.RPC_UPDATE]:G=>{s.emit(we.RPC_UPDATE,G)}};for(const[G,F]of Object.entries(z))try{m.communicationLayer.on(G,F)}catch{}}function v_(t){return de(this,arguments,void 0,(function*({options:e,instance:n}){const{state:r}=n;return ce.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise(((i,s)=>{var o,a,c,l,u,f;e?.terminate?(n.state.ready&&Si({id:(o=n.state.channelId)!==null&&o!==void 0?o:"",event:Ct.TERMINATED},n.state.communicationServerUrl).catch((d=>{})),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((c=r.channelId)!==null&&c!==void 0?c:""),n.state.terminated=!0,e.sendMessage?!((l=r.communicationLayer)===null||l===void 0)&&l.getKeyInfo().keysExchanged&&n.state.communicationLayer&&m_(n.state.communicationLayer,{type:pt.TERMINATE}).then((()=>{i(!0)})).catch((d=>{s(d)})):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=Xi(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(zt.TERMINATED)):((f=r.communicationLayer)===null||f===void 0||f.disconnect(e),n.setConnectionStatus(zt.DISCONNECTED),i(!0))}))}))}(Xs||(Xs={})).SOCKET="socket",(function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"})(Yt||(Yt={}));class QM extends zf.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:ua,context:"",persist:!1,clientsConnected:!1,sessionDuration:fa,originatorConnectStarted:!1,debug:!1,_connectionStatus:zt.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:i,otherPublicKey:s,reconnect:o,walletInfo:a,dappMetadata:c,protocolVersion:l,transports:u,context:f,relayPersistence:d,ecies:h,analytics:g=!1,storage:p,sdkVersion:y,communicationServerUrl:m=ua,logging:b,autoConnect:w={timeout:NM}}=e;this.state.anonId=n,this.state.otherPublicKey=s,this.state.dappMetadata=c,this.state.walletInfo=a,this.state.transports=u,this.state.platformType=r,this.state.analytics=g,this.state.protocolVersion=l??1,this.state.isOriginator=!s,this.state.relayPersistence=d,this.state.communicationServerUrl=m,this.state.context=f,this.state.terminated=!1,this.state.sdkVersion=y,this.setMaxListeners(50),this.setConnectionStatus(zt.DISCONNECTED),p?.duration&&(this.state.sessionDuration=fa),this.state.storageOptions=p,this.state.autoConnectOptions=w,this.state.debug=b?.remoteLayer===!0,b?.remoteLayer===!0&&yn.enable("RemoteCommunication:Layer"),b?.serviceLayer===!0&&yn.enable("SocketService:Layer"),b?.eciesLayer===!0&&yn.enable("ECIES:Layer"),b?.keyExchangeLayer===!0&&yn.enable("KeyExchange:Layer"),this.state.logging=b,p?.storageManager&&(this.state.storageManager=p.storageManager),ce.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${l} relayPersistence=${d} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${s} reconnect=${o}`),this.state.isOriginator||Jv({communicationLayerPreference:i,otherPublicKey:s,reconnect:o,ecies:h,communicationServerUrl:m,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return de(this,void 0,void 0,(function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(zt.LINKED),yield this.connectToChannel({channelId:n.channelId})))}Jv({communicationLayerPreference:Xs.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})}))}originatorSessionConnect(){return de(this,void 0,void 0,(function*(){return yield(function(e){return de(this,void 0,void 0,(function*(){var n;const{state:r}=e;if(!r.storageManager)return void ce.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const i=yield r.storageManager.getPersistedChannelConfig({});if(ce.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return ce.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=i?.channelId,r.reconnection=!0,i;ce.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1}))})(this)}))}generateChannelIdConnect(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){var n,r,i,s,o,a;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(s=(i=e.communicationLayer)===null||i===void 0?void 0:i.getKeyInfo())===null||s===void 0?void 0:s.ecies.private,pubKey:(a=(o=e.communicationLayer)===null||o===void 0?void 0:o.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};ce.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const c=yield e.communicationLayer.createChannel();ce.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c);const l=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=c.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}}))})(this.state)}))}clean(){return g_(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return(function(i){return de(this,arguments,void 0,(function*({channelId:s,withKeyExchange:o,authorized:a,state:c}){var l,u,f;if(!pp(s))throw ce.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} invalid channel channelId=${s}`),new Error(`Invalid channel ${s}`);if(ce.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} channelId=${s} withKeyExchange=${o}`),(l=c.communicationLayer)===null||l===void 0?void 0:l.isConnected())return void ce.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} already connected - interrupt connection.`);c.channelId=s,yield(u=c.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:s,authorized:a,withKeyExchange:o});const d=Object.assign(Object.assign({},c.channelConfig),{channelId:s,validUntil:Date.now()+c.sessionDuration});c.channelConfig=d,(f=c.storageManager)===null||f===void 0||f.persistChannelConfig(d)}))})({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return de(this,void 0,void 0,(function*(){const n=this.state.isOriginator&&e.method&&Xc(e.method);n&&_t.analytics.track("sdk_action_requested",{action:e.method});try{return yield(function(r,i){return de(this,void 0,void 0,(function*(){var s,o;const{state:a}=r;ce.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context} paused=${a.paused} ready=${a.ready} relayPersistence=${a.relayPersistence} authorized=${a.authorized} socket=${(s=a.communicationLayer)===null||s===void 0?void 0:s.isConnected()} clientsConnected=${a.clientsConnected} status=${a._connectionStatus}`,i),a.relayPersistence||a.ready&&(!((o=a.communicationLayer)===null||o===void 0)&&o.isConnected())&&a.clientsConnected||(ce.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise((c=>{r.once(we.CLIENTS_READY,c)})),ce.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  AFTER SKIP / READY -- sending pending message`));try{return yield(function(l,u){return de(this,void 0,void 0,(function*(){return new Promise((f=>{var d;const{state:h}=l;ce.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context} ready=${h.ready} authorized=${h.authorized} method=${u.method}`),!h.isOriginator||h.authorized||h.relayPersistence?(d=h.communicationLayer)===null||d===void 0||d.sendMessage(u).then((g=>{f(g)})).catch((g=>{f(!1)})):l.once(we.AUTHORIZED,(()=>{var g;ce.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(g=h.communicationLayer)===null||g===void 0||g.sendMessage(u).then((p=>{f(p)})).catch((p=>{f(!1)}))}))}))}))})(r,i)}catch(c){throw c}}))})(this,e)}catch(r){throw n&&_t.analytics.track("sdk_action_failed",{action:e.method}),r}}))}testStorage(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();ce.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)}))})(this.state)}))}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return de(this,void 0,void 0,(function*(){var e;ce.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()}))}testLogger(){ce.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),ce.SocketService(`testLogger() channel=${this.state.channelId}`),ce.Ecies(`testLogger() channel=${this.state.channelId}`),ce.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;ce.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(we.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(we.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return de(this,void 0,void 0,(function*(){var e;ce.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(zt.PAUSED)}))}getVersion(){return ps.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){var n;const{state:r}=e;ce.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(zt.LINKED)}))})(this)}))}encrypt(e){var n,r,i;const s=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),o=s?.getOtherPublicKey();if(!o)throw new Error("KeyExchange not completed");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.encrypt(e,o)}decrypt(e){var n,r,i;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return(function(n){return de(this,arguments,void 0,(function*({channelId:r,state:i}){var s,o,a;if(!pp(r))throw ce.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(i.isOriginator)return void ce.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} isOriginator=${i.isOriginator} channelId=${r}`);const{socket:c}=(o=(s=i.communicationLayer)===null||s===void 0?void 0:s.state)!==null&&o!==void 0?o:{};c?.connected||(ce.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket already connected`),c?.connect()),Si(Object.assign(Object.assign({id:r,event:Ct.REJECTED},i.originatorInfo),{sdkVersion:i.sdkVersion,commLayerVersion:ps.version,walletVersion:(a=i.walletInfo)===null||a===void 0?void 0:a.version}),i.communicationServerUrl).catch((l=>{})),yield new Promise(((l,u)=>{c?.emit(we.REJECTED,{channelId:r},((f,d)=>{ce.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket=${c?.id}`,{error:f,response:d}),f?u(f):l(d)}))}))}))})({channelId:e,state:this.state})}disconnect(e){return de(this,void 0,void 0,(function*(){return v_({options:e,instance:this})}))}}(function(t){t.RENEW="renew",t.LINK="link"})(Qv||(Qv={}));var JM="ERC721",YM="ERC1155",wt={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function ZM(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[JM,YM].includes(n.params?.type||"")&&(t.warn(wt.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(wt.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(wt.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),i()}}var w_=4294967295,Yv=Math.floor(Math.random()*w_);function XM(){return(t,e,n,r)=>{const i=t.id,s=Yv=(Yv+1)%w_;t.id=s,e.id=s,n((o=>{t.id=i,e.id=i,o()}))}}var n0=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},ts=(t,e,n)=>(n0(t,e,"read from private field"),n?n.call(t):e.get(t)),fr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Dl=(t,e,n,r)=>(n0(t,e,"write to private field"),e.set(t,n),n),sn=(t,e,n)=>(n0(t,e,"access private method"),n),Ji={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},Zv={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function Xv(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var Ju=(t,e)=>Object.hasOwnProperty.call(t,e);class e8 extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function vi(t){return typeof t=="object"&&t!=null}function Gr(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function t8(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Gr(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*ew(t,e,n,r){(function(i){return vi(i)&&typeof i[Symbol.iterator]=="function"})(t)||(t=[t]);for(const i of t){const s=t8(i,e,n,r);s&&(yield s)}}function*r0(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&vi(e.schema)&&vi(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,f]of e.entries(t,a)){const d=r0(u,f,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const h of d)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):s&&(u=h[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):vi(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}class Ar{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=(c=>c),entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,this.validator=i?(c,l)=>ew(i(c,l),l,this,c):()=>[],this.refiner=s?(c,l)=>ew(s(c,l),l,this,c):()=>[]}assert(e,n){return b_(e,this,n)}create(e,n){return E_(e,this,n)}is(e){return va(e,this)}mask(e,n){return(function(r,i,s){const o=Tc(r,i,{coerce:!0,mask:!0,message:s});if(o[0])throw o[0];return o[1]})(e,this,n)}validate(e,n={}){return Tc(e,this,n)}}function b_(t,e,n){const r=Tc(t,e,{message:n});if(r[0])throw r[0]}function E_(t,e,n){const r=Tc(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function va(t,e){return!Tc(t,e)[0]}function Tc(t,e,n={}){const r=r0(t,e,n),i=(function(s){const{done:o,value:a}=s.next();return o?void 0:a})(r);return i[0]?[new e8(i[0],(function*(){for(const o of r)o[0]&&(yield o[0])})),void 0]:[void 0,i[1]]}function gs(t,e){return new Ar({type:t,schema:null,validator:e})}function tw(t){let e;return new Ar({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function A_(t){return new Ar({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Gr(e)}`})}function __(t){const e=Gr(t),n=typeof t;return new Ar({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${Gr(r)}`})}function S_(){return gs("number",(t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Gr(t)}`))}function C_(t){const e=t?Object.keys(t):[],n=gs("never",(()=>!1));return new Ar({type:"object",schema:t||null,*entries(r){if(t&&vi(r)){const i=new Set(Object.keys(r));for(const s of e)i.delete(s),yield[s,r[s],t[s]];for(const s of i)yield[s,r[s],n]}},validator:r=>vi(r)||`Expected an object, but received: ${Gr(r)}`,coercer:r=>vi(r)?{...r}:r})}function nw(t){return new Ar({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function x_(t,e){return new Ar({type:"record",schema:null,*entries(n){if(vi(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:n=>vi(n)||`Expected an object, but received: ${Gr(n)}`})}function ms(){return gs("string",(t=>typeof t=="string"||`Expected a string, but received: ${Gr(t)}`))}function Yf(t){const e=t.map((n=>n.type)).join(" | ");return new Ar({type:"union",schema:null,coercer(n){for(const r of t){const[i,s]=r.validate(n,{coerce:!0});if(!i)return s}return n},validator(n,r){const i=[];for(const s of t){const[...o]=r0(n,s,r),[a]=o;if(!a[0])return[];for(const[c]of o)c&&i.push(c)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Gr(n)}`,...i]}})}function n8(t){return(function(e){return(function(n){return typeof n=="object"&&n!==null&&"message"in n})(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)})(t).replace(/\.$/u,"")}function r8(t,e){return n=t,typeof n?.prototype?.constructor?.name=="string"?new t({message:e}):t({message:e});var n}var i8=class extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}};function k_(){throw new Error("setTimeout has not been defined")}function P_(){throw new Error("clearTimeout has not been defined")}var $i=k_,Hi=P_;function T_(t){if($i===setTimeout)return setTimeout(t,0);if(($i===k_||!$i)&&setTimeout)return $i=setTimeout,setTimeout(t,0);try{return $i(t,0)}catch{try{return $i.call(null,t,0)}catch{return $i.call(this,t,0)}}}typeof vn.setTimeout=="function"&&($i=setTimeout),typeof vn.clearTimeout=="function"&&(Hi=clearTimeout);var js,gi=[],Jo=!1,ou=-1;function s8(){Jo&&js&&(Jo=!1,js.length?gi=js.concat(gi):ou=-1,gi.length&&I_())}function I_(){if(!Jo){var t=T_(s8);Jo=!0;for(var e=gi.length;e;){for(js=gi,gi=[];++ou<e;)js&&js[ou].run();ou=-1,e=gi.length}js=null,Jo=!1,(function(n){if(Hi===clearTimeout)return clearTimeout(n);if((Hi===P_||!Hi)&&clearTimeout)return Hi=clearTimeout,clearTimeout(n);try{return Hi(n)}catch{try{return Hi.call(null,n)}catch{return Hi.call(this,n)}}})(t)}}function R_(t,e){this.fun=t,this.array=e}R_.prototype.run=function(){this.fun.apply(null,this.array)};function io(){}var o8=io,a8=io,c8=io,l8=io,u8=io,f8=io,d8=io,So=vn.performance||{},h8=So.now||So.mozNow||So.msNow||So.oNow||So.webkitNow||function(){return new Date().getTime()},p8=new Date,Ve={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];gi.push(new R_(t,e)),gi.length!==1||Jo||T_(I_)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:o8,addListener:a8,once:c8,off:l8,removeListener:u8,removeAllListeners:f8,emit:d8,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*h8.call(So),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-p8)/1e3}},Ic=t=>C_(t);function rw({path:t,branch:e}){const n=t[t.length-1];return Ju(e[e.length-2],n)}function Yu(t){return new Ar({...t,type:`optional ${t.type}`,validator:(e,n)=>!rw(n)||t.validator(e,n),refiner:(e,n)=>!rw(n)||t.refiner(e,n)})}var Ul,iw,sw,Zu=Yf([__(null),gs("boolean",(t=>typeof t=="boolean")),gs("finite number",(t=>va(t,S_())&&Number.isFinite(t))),ms(),A_(tw((()=>Zu))),x_(ms(),tw((()=>Zu)))]),Rc=(Ul=Zu,iw=gs("any",(()=>!0)),sw=t=>((function(e,n,r="Assertion failed",i=i8){try{b_(e,n)}catch(s){throw r8(i,`${r}: ${n8(s)}.`)}})(t,Zu),JSON.parse(JSON.stringify(t,((e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n})))),new Ar({...Ul,coercer:(t,e)=>va(t,iw)?Ul.coercer(sw(t,e),e):Ul.coercer(t,e)}));function Np(t){try{return(function(e){E_(e,Rc)})(t),!0}catch{return!1}}var ec=__("2.0"),au=(function(t){return new Ar({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})})(Yf([S_(),ms()])),Mp=Ic({code:gs("integer",(t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${Gr(t)}`)),message:ms(),data:Yu(Rc),stack:Yu(ms())}),O_=Yf([x_(ms(),Rc),A_(Rc)]),g8=Ic({id:au,jsonrpc:ec,method:ms(),params:Yu(O_)}),m8=Ic({jsonrpc:ec,method:ms(),params:Yu(O_)});function ow(t){return va(t,g8)}function aw(t){return va(t,Mp)}C_({id:au,jsonrpc:ec,result:nw(gs("unknown",(()=>!0))),error:nw(Mp)}),Yf([Ic({id:au,jsonrpc:ec,result:Rc}),Ic({id:au,jsonrpc:ec,error:Mp})]);var cw=Ji.internal,y8="Unspecified error message. This is a bug, please report it.",v8={code:cw,message:N_(cw)},w8="Unspecified server error.";function N_(t,e=y8){if((function(n){return Number.isInteger(n)})(t)){const n=t.toString();if(Ju(Zv,n))return Zv[n].message;if((function(r){return r>=-32099&&r<=-32e3})(t))return w8}return e}function lw(t,{fallbackError:e=v8,shouldIncludeStack:n=!0}={}){if(!aw(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=(function(i,s){if(i&&typeof i=="object"&&"serialize"in i&&typeof i.serialize=="function")return i.serialize();if(aw(i))return i;const o=M_(i);return{...s,data:{cause:o}}})(t,e);return n||delete r.stack,r}function M_(t){return Array.isArray(t)?t.map((e=>Np(e)?e:Xv(e)?uw(e):null)):Xv(t)?uw(t):Np(t)?t:null}function uw(t){return Object.getOwnPropertyNames(t).reduce(((e,n)=>{const r=t[n];return Np(r)&&(e[n]=r),e}),{})}var L_=Fa;Fa.default=Fa,Fa.stable=fw,Fa.stableStringify=fw;var Xu="[...]",B_="[Circular]",eo=[],Vs=[];function D_(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Fa(t,e,n,r){var i;r===void 0&&(r=D_()),Lp(t,"",0,[],void 0,0,r);try{i=Vs.length===0?JSON.stringify(t,e,n):JSON.stringify(t,U_(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;eo.length!==0;){var s=eo.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function Yo(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),eo.push([r,n,e,i])):Vs.push([e,n,t]):(r[n]=t,eo.push([r,n,e]))}function Lp(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void Yo(B_,t,e,i);if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void Yo(Xu,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Lp(t[a],a,a,r,t,s,o);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var l=c[a];Lp(t[l],l,a,r,t,s,o)}}r.pop()}}function b8(t,e){return t<e?-1:t>e?1:0}function fw(t,e,n,r){r===void 0&&(r=D_());var i,s=Bp(t,"",0,[],void 0,0,r)||t;try{i=Vs.length===0?JSON.stringify(s,e,n):JSON.stringify(s,U_(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;eo.length!==0;){var o=eo.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Bp(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void Yo(B_,t,e,i);try{if(typeof t.toJSON=="function")return}catch{return}if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void Yo(Xu,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Bp(t[a],a,a,r,t,s,o);else{var c={},l=Object.keys(t).sort(b8);for(a=0;a<l.length;a++){var u=l[a];Bp(t[u],u,a,r,t,s,o),c[u]=t[u]}if(i===void 0)return c;eo.push([i,e,t]),i[e]=c}r.pop()}}function U_(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(Vs.length>0)for(var r=0;r<Vs.length;r++){var i=Vs[r];if(i[1]===e&&i[0]===n){n=i[2],Vs.splice(r,1);break}}return t.call(this,e,n)}}var E8=Qf(L_),ri=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,(function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}})(this.data)&&(t.data.cause=M_(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return E8(this.serialize(),A8,2)}};function A8(t,e){if(e!=="[Circular]")return e}var tc=t=>_8(Ji.invalidRequest,t);function _8(t,e){const[n,r]=(function(i){if(i){if(typeof i=="string")return[i];if(typeof i=="object"&&!Array.isArray(i)){const{message:s,data:o}=i;if(s&&typeof s!="string")throw new Error("Must specify string message.");return[s??void 0,o]}}return[]})(e);return new ri(t,n??N_(t),r)}var F_={};function Ki(){}function We(){We.init.call(this)}function $_(t){return t._maxListeners===void 0?We.defaultMaxListeners:t._maxListeners}function dw(t,e,n,r){var i,s,o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]):(s=t._events=new Ki,t._eventsCount=0),o){if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=$_(t))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,(function(c){typeof console.warn=="function"?console.warn(c):console.log(c)})(a)}}else o=s[e]=n,++t._eventsCount;return t}function hw(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function pw(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function Ia(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Ki.prototype=Object.create(null),We.EventEmitter=We,We.usingDomains=!1,We.prototype.domain=void 0,We.prototype._events=void 0,We.prototype._maxListeners=void 0,We.defaultMaxListeners=10,We.init=function(){this.domain=null,We.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Ki,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},We.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},We.prototype.getMaxListeners=function(){return $_(this)},We.prototype.emit=function(t){var e,n,r,i,s,o,a,c=t==="error";if(o=this._events)c=c&&o.error==null;else if(!c)return!1;if(a=this.domain,c){if(e=arguments[1],!a){if(e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=o[t]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(f,d,h){if(d)f.call(h);else for(var g=f.length,p=Ia(f,g),y=0;y<g;++y)p[y].call(h)})(n,u,this);break;case 2:(function(f,d,h,g){if(d)f.call(h,g);else for(var p=f.length,y=Ia(f,p),m=0;m<p;++m)y[m].call(h,g)})(n,u,this,arguments[1]);break;case 3:(function(f,d,h,g,p){if(d)f.call(h,g,p);else for(var y=f.length,m=Ia(f,y),b=0;b<y;++b)m[b].call(h,g,p)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(f,d,h,g,p,y){if(d)f.call(h,g,p,y);else for(var m=f.length,b=Ia(f,m),w=0;w<m;++w)b[w].call(h,g,p,y)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];(function(f,d,h,g){if(d)f.apply(h,g);else for(var p=f.length,y=Ia(f,p),m=0;m<p;++m)y[m].apply(h,g)})(n,u,this,i)}return!0},We.prototype.addListener=function(t,e){return dw(this,t,e,!1)},We.prototype.on=We.prototype.addListener,We.prototype.prependListener=function(t,e){return dw(this,t,e,!0)},We.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,hw(this,t,e)),this},We.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,hw(this,t,e)),this},We.prototype.removeListener=function(t,e){var n,r,i,s,o;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new Ki:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new Ki,this;delete r[t]}else(function(a,c){for(var l=c,u=l+1,f=a.length;u<f;l+=1,u+=1)a[l]=a[u];a.pop()})(n,i);r.removeListener&&this.emit("removeListener",t,o||e)}return this},We.prototype.off=function(t,e){return this.removeListener(t,e)},We.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new Ki,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new Ki:delete n[t]),this;if(arguments.length===0){for(var r,i=Object.keys(n),s=0;s<i.length;++s)(r=i[s])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Ki,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},We.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:(function(i){for(var s=new Array(i.length),o=0;o<s.length;++o)s[o]=i[o].listener||i[o];return s})(e):[],n},We.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):pw.call(t,e)},We.prototype.listenerCount=pw,We.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var i0=Yc(Object.freeze({__proto__:null,EventEmitter:We,default:We}));Object.defineProperty(F_,"__esModule",{value:!0});const S8=i0;function gw(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout((()=>{throw r}))}}let C8=class extends S8.EventEmitter{emit(t,...e){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){let s;if(e.length>0&&([s]=e),s instanceof Error)throw s;const o=new Error("Unhandled error."+(s?` (${s.message})`:""));throw o.context=s,o}const i=r[t];if(i===void 0)return!1;if(typeof i=="function")gw(i,this,e);else{const s=i.length,o=(function(a){const c=a.length,l=new Array(c);for(let u=0;u<c;u+=1)l[u]=a[u];return l})(i);for(let a=0;a<s;a+=1)gw(o[a],this,e)}return!0}};var ef,Yi,Lo,$a,cu,lu,Dp,uu,Up,lh,mw,fu,Fp,uh,yw,nc,tf,fh,vw,H_=F_.default=C8,sr=class du extends H_{constructor({notificationHandler:e}={}){super(),fr(this,$a),fr(this,lu),fr(this,uu),fr(this,ef,!1),fr(this,Yi,void 0),fr(this,Lo,void 0),Dl(this,Yi,[]),Dl(this,Lo,e)}destroy(){ts(this,Yi).forEach((e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()})),Dl(this,Yi,[]),Dl(this,ef,!0)}push(e){sn(this,$a,cu).call(this),ts(this,Yi).push(e)}handle(e,n){if(sn(this,$a,cu).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?sn(this,lu,Dp).call(this,e,n):sn(this,lu,Dp).call(this,e):n?sn(this,uu,Up).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return sn(this,$a,cu).call(this),async(e,n,r,i)=>{var s,o;try{const[a,c,l]=await sn(s=du,fu,Fp).call(s,e,n,ts(this,Yi));return c?(await sn(o=du,nc,tf).call(o,l),i(a)):r((async u=>{var f;try{await sn(f=du,nc,tf).call(f,l)}catch(d){return u(d)}return u()}))}catch(a){return i(a)}}}async _promiseHandle(e){return new Promise(((n,r)=>{sn(this,uu,Up).call(this,e,((i,s)=>{i&&s===void 0?r(i):n(s)})).catch(r)}))}};ef=new WeakMap,Yi=new WeakMap,Lo=new WeakMap,$a=new WeakSet,cu=function(){if(ts(this,ef))throw new Error("This engine is destroyed and can no longer be used.")},lu=new WeakSet,Dp=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new ri(Ji.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter((r=>r!==void 0));return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},uu=new WeakSet,Up=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const o=new ri(Ji.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(o,{id:null,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new ri(Ji.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return ts(this,Lo)&&!ow(t)?e(null):e(o,{id:t.id??null,jsonrpc:"2.0",error:o})}if(ts(this,Lo)&&va(t,m8)&&!ow(t)){try{await ts(this,Lo).call(this,t)}catch(o){return e(o)}return e(null)}let r=null;const i={...t},s={id:i.id,jsonrpc:i.jsonrpc};try{await sn(n=sr,lh,mw).call(n,i,s,ts(this,Yi))}catch(o){r=o}return r&&(delete s.result,s.error||(s.error=lw(r))),e(r,s)},lh=new WeakSet,mw=async function(t,e,n){var r,i,s;const[o,a,c]=await sn(r=sr,fu,Fp).call(r,t,e,n);if(sn(i=sr,fh,vw).call(i,t,e,a),await sn(s=sr,nc,tf).call(s,c),o)throw o},fu=new WeakSet,Fp=async function(t,e,n){var r;const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await sn(r=sr,uh,yw).call(r,t,e,a,i),o)break;return[s,o,i.reverse()]},uh=new WeakSet,yw=async function(t,e,n,r){return new Promise((i=>{const s=a=>{const c=a||e.error;c&&(e.error=lw(c)),i([c,!0])},o=a=>{e.error?s(e.error):(a&&(typeof a!="function"&&s(new ri(Ji.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${dh(t)}`,{request:t})),r.push(a)),i([null,!1]))};try{n(t,e,o,s)}catch(a){s(a)}}))},nc=new WeakSet,tf=async function(t){for(const e of t)await new Promise(((n,r)=>{e((i=>i?r(i):n()))}))},fh=new WeakSet,vw=function(t,e,n){if(!Ju(e,"result")&&!Ju(e,"error"))throw new ri(Ji.internal,`JsonRpcEngine: Response has no error or result for request:
${dh(t)}`,{request:t});if(!n)throw new ri(Ji.internal,`JsonRpcEngine: Nothing ended request:
${dh(t)}`,{request:t})},fr(sr,lh),fr(sr,fu),fr(sr,uh),fr(sr,nc),fr(sr,fh);var x8=sr;function dh(t){return JSON.stringify(t,null,2)}var K_=Object.freeze(["eth_subscription"]),k8=(t=console)=>[XM(),P8(t),ZM(t)];function P8(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=tc({message:"The request 'method' must be a non-empty string.",data:e})),r((i=>{const{error:s}=n;return s&&t.error(`MetaMask - RPC Error: ${s.message}`,s),i()}))}}var hu=(t,e,n=!0)=>(r,i)=>{r||i.error?e(r||i.error):!n||Array.isArray(i)?t(i):t(i.result)},j_=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),V_=()=>{};async function ww(t,e){try{const n=await(async function(){return{name:T8(window),icon:await I8(window)}})();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},V_)}catch(n){e.error({message:wt.errors.sendSiteMetadata(),originalError:n})}}function T8(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function I8(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await R8(r.href))return r.href;return null}async function R8(t){return new Promise(((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}}))}var z_=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Br=(t,e,n)=>(z_(t,e,"read from private field"),n?n.call(t):e.get(t)),$p=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ii=(t,e,n,r)=>(z_(t,e,"write to private field"),e.set(t,n),n);function bw(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout((()=>{throw r}))}}class O8 extends We{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error("Unhandled error."+(o?` (${o.message})`:""));throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")bw(s,this,n);else{const o=s.length,a=(function(c){const l=c.length,u=new Array(l);for(let f=0;f<l;f+=1)u[f]=c[f];return u})(s);for(let c=0;c<o;c+=1)bw(a[c],this,n)}return!0}}var ji,Is,N8=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;i--!=0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!=0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n},M8=Qf(N8),G_=class q_ extends O8{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),$p(this,ji,void 0),$p(this,Is,void 0),this._log=e,this.setMaxListeners(n),this._state={...q_._defaultState},ii(this,Is,null),ii(this,ji,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new x8;r.forEach((s=>i.push(s))),this._rpcEngine=i}get chainId(){return Br(this,ji)}get selectedAddress(){return Br(this,Is)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw tc({message:wt.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw tc({message:wt.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw tc({message:wt.errors.invalidRequestParams(),data:e});const i=r==null?{method:n}:{method:n,params:r};return new Promise(((s,o)=>{this._rpcRequest(i,hu(s,o))}))}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:i,networkVersion:s}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:s}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(i,s)=>{this._handleAccountsChanged(s.result??[],e.method==="eth_accounts"),n(i,s)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(wt.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new ri(1013,n??wt.errors.disconnected()),this._log.debug(r)):(r=new ri(1011,n??wt.errors.permanentlyDisconnected()),this._log.error(r),ii(this,ji,null),this._state.accounts=null,ii(this,Is,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){j_(e)?(this._handleConnect(e),e!==Br(this,ji)&&(ii(this,ji,e),this._state.initialized&&this.emit("chainChanged",Br(this,ji)))):this._log.error(wt.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const i of e)if(typeof i!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!M8(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,Br(this,Is)!==r[0]&&ii(this,Is,r[0]||null),this._state.initialized)){const i=[...r];this.emit("accountsChanged",i)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};ji=new WeakMap,Is=new WeakMap,G_._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var s0,L8=G_,Hp={exports:{}},W_=i0.EventEmitter,o0=Yc(JN);s0=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var Q_=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},B8=/%[sdj%]/g;function Zf(t){if(!Oc(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Kr(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(B8,(function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}})),o=r[n];n<i;o=r[++n])el(o)||!so(o)?s+=" "+o:s+=" "+Kr(o);return s}function a0(t,e){if(Ur(vn.process))return function(){return a0(t,e).apply(this,arguments)};if(Ve.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(Ve.throwDeprecation)throw new Error(e);Ve.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var hh,Fl={};function J_(t){return Ur(hh)&&(hh=Ve.env.NODE_DEBUG||""),t=t.toUpperCase(),!Fl[t]&&(new RegExp("\\b"+t+"\\b","i").test(hh)?Fl[t]=function(){var e=Zf.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:Fl[t]=function(){}),Fl[t]}function Kr(t,e){var n={seen:[],stylize:U8};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Xf(e)?n.showHidden=e:e&&f0(n,e),Ur(n.showHidden)&&(n.showHidden=!1),Ur(n.depth)&&(n.depth=2),Ur(n.colors)&&(n.colors=!1),Ur(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=D8),nf(n,t,n.depth)}function D8(t,e){var n=Kr.styles[e];return n?"\x1B["+Kr.colors[n][0]+"m"+t+"\x1B["+Kr.colors[n][1]+"m":t}function U8(t,e){return t}function nf(t,e,n){if(t.customInspect&&e&&sc(e.inspect)&&e.inspect!==Kr&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return Oc(r)||(r=nf(t,r,n)),r}var i=(function(d,h){if(Ur(h))return d.stylize("undefined","undefined");if(Oc(h)){var g="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return d.stylize(g,"string")}if(l0(h))return d.stylize(""+h,"number");if(Xf(h))return d.stylize(""+h,"boolean");if(el(h))return d.stylize("null","null")})(t,e);if(i)return i;var s=Object.keys(e),o=(function(d){var h={};return d.forEach((function(g,p){h[g]=!0})),h})(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),ic(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return ph(e);if(s.length===0){if(sc(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(rc(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(rf(e))return t.stylize(Date.prototype.toString.call(e),"date");if(ic(e))return ph(e)}var c,l="",u=!1,f=["{","}"];return c0(e)&&(u=!0,f=["[","]"]),sc(e)&&(l=" [Function"+(e.name?": "+e.name:"")+"]"),rc(e)&&(l=" "+RegExp.prototype.toString.call(e)),rf(e)&&(l=" "+Date.prototype.toUTCString.call(e)),ic(e)&&(l=" "+ph(e)),s.length!==0||u&&e.length!=0?n<0?rc(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=u?(function(d,h,g,p,y){for(var m=[],b=0,w=h.length;b<w;++b)nS(h,String(b))?m.push(gh(d,h,g,p,String(b),!0)):m.push("");return y.forEach((function(x){x.match(/^\d+$/)||m.push(gh(d,h,g,p,x,!0))})),m})(t,e,n,o,s):s.map((function(d){return gh(t,e,n,o,d,u)})),t.seen.pop(),(function(d,h,g){var p=d.reduce((function(y,m){return m.indexOf(`
`),y+m.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return p>60?g[0]+(h===""?"":h+`
 `)+" "+d.join(`,
  `)+" "+g[1]:g[0]+h+" "+d.join(", ")+" "+g[1]})(c,l,f)):f[0]+l+f[1]}function ph(t){return"["+Error.prototype.toString.call(t)+"]"}function gh(t,e,n,r,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),nS(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=el(n)?nf(t,c.value,null):nf(t,c.value,n-1)).indexOf(`
`)>-1&&(a=s?a.split(`
`).map((function(l){return"  "+l})).join(`
`).substr(2):`
`+a.split(`
`).map((function(l){return"   "+l})).join(`
`)):a=t.stylize("[Circular]","special")),Ur(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function c0(t){return Array.isArray(t)}function Xf(t){return typeof t=="boolean"}function el(t){return t===null}function Y_(t){return t==null}function l0(t){return typeof t=="number"}function Oc(t){return typeof t=="string"}function Z_(t){return typeof t=="symbol"}function Ur(t){return t===void 0}function rc(t){return so(t)&&u0(t)==="[object RegExp]"}function so(t){return typeof t=="object"&&t!==null}function rf(t){return so(t)&&u0(t)==="[object Date]"}function ic(t){return so(t)&&(u0(t)==="[object Error]"||t instanceof Error)}function sc(t){return typeof t=="function"}function X_(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function eS(t){return pe.isBuffer(t)}function u0(t){return Object.prototype.toString.call(t)}function mh(t){return t<10?"0"+t.toString(10):t.toString(10)}Kr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Kr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var F8=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function tS(){var t,e;console.log("%s - %s",(t=new Date,e=[mh(t.getHours()),mh(t.getMinutes()),mh(t.getSeconds())].join(":"),[t.getDate(),F8[t.getMonth()],e].join(" ")),Zf.apply(null,arguments))}function f0(t,e){if(!e||!so(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function nS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Rs=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function d0(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(Rs&&t[Rs]){var e;if(typeof(e=t[Rs])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,Rs,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,i=new Promise((function(a,c){n=a,r=c})),s=[],o=0;o<arguments.length;o++)s.push(arguments[o]);s.push((function(a,c){a?r(a):n(c)}));try{t.apply(this,s)}catch(a){r(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Rs&&Object.defineProperty(e,Rs,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,Q_(t))}function $8(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function rS(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,n).then((function(a){Ve.nextTick(o.bind(null,null,a))}),(function(a){Ve.nextTick($8.bind(null,a,o))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,Q_(t)),e}d0.custom=Rs;var yh,Ew,H8={inherits:s0,_extend:f0,log:tS,isBuffer:eS,isPrimitive:X_,isFunction:sc,isError:ic,isDate:rf,isObject:so,isRegExp:rc,isUndefined:Ur,isSymbol:Z_,isString:Oc,isNumber:l0,isNullOrUndefined:Y_,isNull:el,isBoolean:Xf,isArray:c0,inspect:Kr,deprecate:a0,format:Zf,debuglog:J_,promisify:d0,callbackify:rS},iS=Yc(Object.freeze({__proto__:null,_extend:f0,callbackify:rS,debuglog:J_,default:H8,deprecate:a0,format:Zf,inherits:s0,inspect:Kr,isArray:c0,isBoolean:Xf,isBuffer:eS,isDate:rf,isError:ic,isFunction:sc,isNull:el,isNullOrUndefined:Y_,isNumber:l0,isObject:so,isPrimitive:X_,isRegExp:rc,isString:Oc,isSymbol:Z_,isUndefined:Ur,log:tS,promisify:d0}));function K8(){if(Ew)return yh;function t(c,l){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);l&&(f=f.filter((function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable}))),u.push.apply(u,f)}return u}function e(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?t(Object(u),!0).forEach((function(f){n(c,f,u[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach((function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(u,f))}))}return c}function n(c,l,u){return(l=i(l))in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u,c}function r(c,l,u){return l&&(function(f,d){for(var h=0;h<d.length;h++){var g=d[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,i(g.key),g)}})(c.prototype,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function i(c){var l=(function(u,f){if(typeof u!="object"||u===null)return u;var d=u[Symbol.toPrimitive];if(d!==void 0){var h=d.call(u,f);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)})(c,"string");return typeof l=="symbol"?l:String(l)}Ew=1;var s=o0.Buffer,o=iS.inspect,a=o&&o.custom||"inspect";return yh=(function(){function c(){(function(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return r(c,[{key:"push",value:function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var u=this.head,f=""+u.data;u=u.next;)f+=l+u.data;return f}},{key:"concat",value:function(l){if(this.length===0)return s.alloc(0);for(var u,f,d,h=s.allocUnsafe(l>>>0),g=this.head,p=0;g;)u=g.data,f=h,d=p,s.prototype.copy.call(u,f,d),p+=g.data.length,g=g.next;return h}},{key:"consume",value:function(l,u){var f;return l<this.head.data.length?(f=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):f=l===this.head.data.length?this.shift():u?this._getString(l):this._getBuffer(l),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var u=this.head,f=1,d=u.data;for(l-=d.length;u=u.next;){var h=u.data,g=l>h.length?h.length:l;if(g===h.length?d+=h:d+=h.slice(0,l),(l-=g)===0){g===h.length?(++f,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=h.slice(g));break}++f}return this.length-=f,d}},{key:"_getBuffer",value:function(l){var u=s.allocUnsafe(l),f=this.head,d=1;for(f.data.copy(u),l-=f.data.length;f=f.next;){var h=f.data,g=l>h.length?h.length:l;if(h.copy(u,u.length-l,0,g),(l-=g)===0){g===h.length?(++d,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=h.slice(g));break}++d}return this.length-=d,u}},{key:a,value:function(l,u){return o(this,e(e({},u),{},{depth:0,customInspect:!1}))}}]),c})(),yh}function Aw(t,e){Kp(t,e),pu(t)}function pu(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Kp(t,e){t.emit("error",e)}var sS={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ve.nextTick(Kp,this,t)):Ve.nextTick(Kp,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(s){!e&&s?n._writableState?n._writableState.errorEmitted?Ve.nextTick(pu,n):(n._writableState.errorEmitted=!0,Ve.nextTick(Aw,n,s)):Ve.nextTick(Aw,n,s):e?(Ve.nextTick(pu,n),e(s)):Ve.nextTick(pu,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}},oo={},oS={};function zn(t,e,n){n||(n=Error);var r=(function(i){var s,o;function a(c,l,u){return i.call(this,(function(f,d,h){return typeof e=="string"?e:e(f,d,h)})(c,l,u))||this}return o=i,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a})(n);r.prototype.name=n.name,r.prototype.code=t,oS[t]=r}function _w(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(r){return String(r)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}zn("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),zn("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,i,s;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",(function(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c})(t," argument"))s="The ".concat(t," ").concat(r," ").concat(_w(e,"type"));else{var o=(function(a,c,l){return typeof l!="number"&&(l=0),!(l+c.length>a.length)&&a.indexOf(c,l)!==-1})(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(_w(e,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),zn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),zn("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),zn("ERR_STREAM_PREMATURE_CLOSE","Premature close"),zn("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),zn("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),zn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),zn("ERR_STREAM_WRITE_AFTER_END","write after end"),zn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),zn("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),zn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),oo.codes=oS;var j8=oo.codes.ERR_INVALID_OPT_VALUE,vh,Sw,wh,Cw,aS={getHighWaterMark:function(t,e,n,r){var i=(function(s,o,a){return s.highWaterMark!=null?s.highWaterMark:o?s[a]:null})(e,r,n);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new j8(r?n:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}},V8=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},tl=Yc(Object.freeze({__proto__:null,default:V8})),z8=function(t,e){if(bh("noDeprecation"))return t;var n=!1;return function(){if(!n){if(bh("throwDeprecation"))throw new Error(e);bh("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}};function bh(t){try{if(!er.localStorage)return!1}catch{return!1}var e=er.localStorage[t];return e!=null&&String(e).toLowerCase()==="true"}function cS(){if(Sw)return vh;function t(L){var B=this;this.next=null,this.entry=null,this.finish=function(){(function(M,_,R){var j=M.entry;for(M.entry=null;j;){var v=j.callback;_.pendingcb--,v(R),j=j.next}_.corkedRequestsFree.next=M})(B,L)}}var e;Sw=1,vh=N,N.WritableState=x;var n={deprecate:z8},r=W_,i=o0.Buffer,s=(er!==void 0?er:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,a=sS,c=aS.getHighWaterMark,l=oo.codes,u=l.ERR_INVALID_ARG_TYPE,f=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,h=l.ERR_STREAM_CANNOT_PIPE,g=l.ERR_STREAM_DESTROYED,p=l.ERR_STREAM_NULL_VALUES,y=l.ERR_STREAM_WRITE_AFTER_END,m=l.ERR_UNKNOWN_ENCODING,b=a.errorOrDestroy;function w(){}function x(L,B,M){e=e||da(),L=L||{},typeof M!="boolean"&&(M=B instanceof e),this.objectMode=!!L.objectMode,M&&(this.objectMode=this.objectMode||!!L.writableObjectMode),this.highWaterMark=c(this,L,"writableHighWaterMark",M),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var _=L.decodeStrings===!1;this.decodeStrings=!_,this.defaultEncoding=L.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(R){(function(j,v){var S=j._writableState,C=S.sync,P=S.writecb;if(typeof P!="function")throw new d;if((function(E){E.writing=!1,E.writecb=null,E.length-=E.writelen,E.writelen=0})(S),v)(function(E,k,I,D,T){--k.pendingcb,I?(Ve.nextTick(T,D),Ve.nextTick(V,E,k),E._writableState.errorEmitted=!0,b(E,D)):(T(D),E._writableState.errorEmitted=!0,b(E,D),V(E,k))})(j,S,C,v,P);else{var A=F(S)||j.destroyed;A||S.corked||S.bufferProcessing||!S.bufferedRequest||G(j,S),C?Ve.nextTick(z,j,S,A,P):z(j,S,A,P)}})(B,R)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=L.emitClose!==!1,this.autoDestroy=!!L.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function N(L){var B=this instanceof(e=e||da());if(!B&&!o.call(N,this))return new N(L);this._writableState=new x(L,this,B),this.writable=!0,L&&(typeof L.write=="function"&&(this._write=L.write),typeof L.writev=="function"&&(this._writev=L.writev),typeof L.destroy=="function"&&(this._destroy=L.destroy),typeof L.final=="function"&&(this._final=L.final)),r.call(this)}function H(L,B,M,_,R,j,v){B.writelen=_,B.writecb=v,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new g("write")):M?L._writev(R,B.onwrite):L._write(R,j,B.onwrite),B.sync=!1}function z(L,B,M,_){M||(function(R,j){j.length===0&&j.needDrain&&(j.needDrain=!1,R.emit("drain"))})(L,B),B.pendingcb--,_(),V(L,B)}function G(L,B){B.bufferProcessing=!0;var M=B.bufferedRequest;if(L._writev&&M&&M.next){var _=B.bufferedRequestCount,R=new Array(_),j=B.corkedRequestsFree;j.entry=M;for(var v=0,S=!0;M;)R[v]=M,M.isBuf||(S=!1),M=M.next,v+=1;R.allBuffers=S,H(L,B,!0,B.length,R,"",j.finish),B.pendingcb++,B.lastBufferedRequest=null,j.next?(B.corkedRequestsFree=j.next,j.next=null):B.corkedRequestsFree=new t(B),B.bufferedRequestCount=0}else{for(;M;){var C=M.chunk,P=M.encoding,A=M.callback;if(H(L,B,!1,B.objectMode?1:C.length,C,P,A),M=M.next,B.bufferedRequestCount--,B.writing)break}M===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=M,B.bufferProcessing=!1}function F(L){return L.ending&&L.length===0&&L.bufferedRequest===null&&!L.finished&&!L.writing}function U(L,B){L._final((function(M){B.pendingcb--,M&&b(L,M),B.prefinished=!0,L.emit("prefinish"),V(L,B)}))}function V(L,B){var M=F(B);if(M&&((function(R,j){j.prefinished||j.finalCalled||(typeof R._final!="function"||j.destroyed?(j.prefinished=!0,R.emit("prefinish")):(j.pendingcb++,j.finalCalled=!0,Ve.nextTick(U,R,j)))})(L,B),B.pendingcb===0&&(B.finished=!0,L.emit("finish"),B.autoDestroy))){var _=L._readableState;(!_||_.autoDestroy&&_.endEmitted)&&L.destroy()}return M}return tl(N,r),x.prototype.getBuffer=function(){for(var L=this.bufferedRequest,B=[];L;)B.push(L),L=L.next;return B},(function(){try{Object.defineProperty(x.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(L){return!!o.call(this,L)||this===N&&L&&L._writableState instanceof x}})):o=function(L){return L instanceof this},N.prototype.pipe=function(){b(this,new h)},N.prototype.write=function(L,B,M){var _,R=this._writableState,j=!1,v=!R.objectMode&&(_=L,i.isBuffer(_)||_ instanceof s);return v&&!i.isBuffer(L)&&(L=(function(S){return i.from(S)})(L)),typeof B=="function"&&(M=B,B=null),v?B="buffer":B||(B=R.defaultEncoding),typeof M!="function"&&(M=w),R.ending?(function(S,C){var P=new y;b(S,P),Ve.nextTick(C,P)})(this,M):(v||(function(S,C,P,A){var E;return P===null?E=new p:typeof P=="string"||C.objectMode||(E=new u("chunk",["string","Buffer"],P)),!E||(b(S,E),Ve.nextTick(A,E),!1)})(this,R,L,M))&&(R.pendingcb++,j=(function(S,C,P,A,E,k){if(!P){var I=(function(q,Z,oe){return q.objectMode||q.decodeStrings===!1||typeof Z!="string"||(Z=i.from(Z,oe)),Z})(C,A,E);A!==I&&(P=!0,E="buffer",A=I)}var D=C.objectMode?1:A.length;C.length+=D;var T=C.length<C.highWaterMark;if(T||(C.needDrain=!0),C.writing||C.corked){var K=C.lastBufferedRequest;C.lastBufferedRequest={chunk:A,encoding:E,isBuf:P,callback:k,next:null},K?K.next=C.lastBufferedRequest:C.bufferedRequest=C.lastBufferedRequest,C.bufferedRequestCount+=1}else H(S,C,!1,D,A,E,k);return T})(this,R,v,L,B,M)),j},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var L=this._writableState;L.corked&&(L.corked--,L.writing||L.corked||L.bufferProcessing||!L.bufferedRequest||G(this,L))},N.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=L.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((L+"").toLowerCase())>-1))throw new m(L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),N.prototype._write=function(L,B,M){M(new f("_write()"))},N.prototype._writev=null,N.prototype.end=function(L,B,M){var _=this._writableState;return typeof L=="function"?(M=L,L=null,B=null):typeof B=="function"&&(M=B,B=null),L!=null&&this.write(L,B),_.corked&&(_.corked=1,this.uncork()),_.ending||(function(R,j,v){j.ending=!0,V(R,j),v&&(j.finished?Ve.nextTick(v):R.once("finish",v)),j.ended=!0,R.writable=!1})(this,_,M),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),N.prototype.destroy=a.destroy,N.prototype._undestroy=a.undestroy,N.prototype._destroy=function(L,B){B(L)},vh}function da(){if(Cw)return wh;Cw=1;var t=Object.keys||function(l){var u=[];for(var f in l)u.push(f);return u};wh=o;var e=lS(),n=cS();tl(o,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=n.prototype[s])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||Ve.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),wh}var G8=pe.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function gu(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),(function(e){if(e&&!G8(e))throw new Error("Unknown encoding: "+e)})(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=W8;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Q8;break;default:return void(this.write=q8)}this.charBuffer=new pe(6),this.charReceived=0,this.charLength=0}function q8(t){return t.toString(this.encoding)}function W8(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function Q8(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}gu.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},gu.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},gu.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var xw=Yc(Object.freeze({__proto__:null,StringDecoder:gu})),kw=oo.codes.ERR_STREAM_PREMATURE_CLOSE;function J8(){}var Eh,Pw,Tw,Iw,Ah,Rw,h0=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=(function(g){var p=!1;return function(){if(!p){p=!0;for(var y=arguments.length,m=new Array(y),b=0;b<y;b++)m[b]=arguments[b];g.apply(this,m)}}})(r||J8);var i=n.readable||n.readable!==!1&&e.readable,s=n.writable||n.writable!==!1&&e.writable,o=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){s=!1,a=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,s||r.call(e)},f=function(g){r.call(e,g)},d=function(){var g;return i&&!l?(e._readableState&&e._readableState.ended||(g=new kw),r.call(e,g)):s&&!a?(e._writableState&&e._writableState.ended||(g=new kw),r.call(e,g)):void 0},h=function(){e.req.on("finish",c)};return(function(g){return g.setHeader&&typeof g.abort=="function"})(e)?(e.on("complete",c),e.on("abort",d),e.req?h():e.on("request",h)):s&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",c),n.error!==!1&&e.on("error",f),e.on("close",d),function(){e.removeListener("complete",c),e.removeListener("abort",d),e.removeListener("request",h),e.req&&e.req.removeListener("finish",c),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",c),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",d)}};function Y8(){if(Pw)return Eh;var t;function e(p,y,m){return(y=(function(b){var w=(function(x,N){if(typeof x!="object"||x===null)return x;var H=x[Symbol.toPrimitive];if(H!==void 0){var z=H.call(x,N);if(typeof z!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(x)})(b,"string");return typeof w=="symbol"?w:String(w)})(y))in p?Object.defineProperty(p,y,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[y]=m,p}Pw=1;var n=h0,r=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function u(p,y){return{value:p,done:y}}function f(p){var y=p[r];if(y!==null){var m=p[l].read();m!==null&&(p[a]=null,p[r]=null,p[i]=null,y(u(m,!1)))}}function d(p){Ve.nextTick(f,p)}var h=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var p=this,y=this[s];if(y!==null)return Promise.reject(y);if(this[o])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise((function(x,N){Ve.nextTick((function(){p[s]?N(p[s]):x(u(void 0,!0))}))}));var m,b=this[a];if(b)m=new Promise((function(x,N){return function(H,z){x.then((function(){N[o]?H(u(void 0,!0)):N[c](H,z)}),z)}})(b,this));else{var w=this[l].read();if(w!==null)return Promise.resolve(u(w,!1));m=new Promise(this[c])}return this[a]=m,m}},Symbol.asyncIterator,(function(){return this})),e(t,"return",(function(){var p=this;return new Promise((function(y,m){p[l].destroy(null,(function(b){b?m(b):y(u(void 0,!0))}))}))})),t),h);return Eh=function(p){var y,m=Object.create(g,(e(y={},l,{value:p,writable:!0}),e(y,r,{value:null,writable:!0}),e(y,i,{value:null,writable:!0}),e(y,s,{value:null,writable:!0}),e(y,o,{value:p._readableState.endEmitted,writable:!0}),e(y,c,{value:function(b,w){var x=m[l].read();x?(m[a]=null,m[r]=null,m[i]=null,b(u(x,!1))):(m[r]=b,m[i]=w)},writable:!0}),y));return m[a]=null,n(p,(function(b){if(b&&b.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=m[i];return w!==null&&(m[a]=null,m[r]=null,m[i]=null,w(b)),void(m[s]=b)}var x=m[r];x!==null&&(m[a]=null,m[r]=null,m[i]=null,x(u(void 0,!0))),m[o]=!0})),p.on("readable",d.bind(null,m)),m},Eh}function lS(){if(Rw)return Ah;var t;Rw=1,Ah=N,N.ReadableState=x,i0.EventEmitter;var e=function(A,E){return A.listeners(E).length},n=W_,r=o0.Buffer,i=(er!==void 0?er:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,o=iS;s=o&&o.debuglog?o.debuglog("stream"):function(){};var a,c,l,u=K8(),f=sS,d=aS.getHighWaterMark,h=oo.codes,g=h.ERR_INVALID_ARG_TYPE,p=h.ERR_STREAM_PUSH_AFTER_EOF,y=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;tl(N,n);var b=f.errorOrDestroy,w=["error","close","destroy","pause","resume"];function x(A,E,k){t=t||da(),A=A||{},typeof k!="boolean"&&(k=E instanceof t),this.objectMode=!!A.objectMode,k&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=d(this,A,"readableHighWaterMark",k),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(a||(a=xw.StringDecoder),this.decoder=new a(A.encoding),this.encoding=A.encoding)}function N(A){if(t=t||da(),!(this instanceof N))return new N(A);var E=this instanceof t;this._readableState=new x(A,this,E),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),n.call(this)}function H(A,E,k,I,D){s("readableAddChunk",E);var T,K=A._readableState;if(E===null)K.reading=!1,(function(q,Z){if(s("onEofChunk"),!Z.ended){if(Z.decoder){var oe=Z.decoder.end();oe&&oe.length&&(Z.buffer.push(oe),Z.length+=Z.objectMode?1:oe.length)}Z.ended=!0,Z.sync?U(q):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,V(q)))}})(A,K);else if(D||(T=(function(q,Z){var oe;O=Z,r.isBuffer(O)||O instanceof i||typeof Z=="string"||Z===void 0||q.objectMode||(oe=new g("chunk",["string","Buffer","Uint8Array"],Z));var O;return oe})(K,E)),T)b(A,T);else if(K.objectMode||E&&E.length>0)if(typeof E=="string"||K.objectMode||Object.getPrototypeOf(E)===r.prototype||(E=(function(q){return r.from(q)})(E)),I)K.endEmitted?b(A,new m):z(A,K,E,!0);else if(K.ended)b(A,new p);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!k?(E=K.decoder.write(E),K.objectMode||E.length!==0?z(A,K,E,!1):L(A,K)):z(A,K,E,!1)}else I||(K.reading=!1,L(A,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function z(A,E,k,I){E.flowing&&E.length===0&&!E.sync?(E.awaitDrain=0,A.emit("data",k)):(E.length+=E.objectMode?1:k.length,I?E.buffer.unshift(k):E.buffer.push(k),E.needReadable&&U(A)),L(A,E)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),N.prototype.destroy=f.destroy,N.prototype._undestroy=f.undestroy,N.prototype._destroy=function(A,E){E(A)},N.prototype.push=function(A,E){var k,I=this._readableState;return I.objectMode?k=!0:typeof A=="string"&&((E=E||I.defaultEncoding)!==I.encoding&&(A=r.from(A,E),E=""),k=!0),H(this,A,E,!1,k)},N.prototype.unshift=function(A){return H(this,A,null,!0,!1)},N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(A){a||(a=xw.StringDecoder);var E=new a(A);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;for(var k=this._readableState.buffer.head,I="";k!==null;)I+=E.write(k.data),k=k.next;return this._readableState.buffer.clear(),I!==""&&this._readableState.buffer.push(I),this._readableState.length=I.length,this};var G=1073741824;function F(A,E){return A<=0||E.length===0&&E.ended?0:E.objectMode?1:A!=A?E.flowing&&E.length?E.buffer.head.data.length:E.length:(A>E.highWaterMark&&(E.highWaterMark=(function(k){return k>=G?k=G:(k--,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,k|=k>>>16,k++),k})(A)),A<=E.length?A:E.ended?E.length:(E.needReadable=!0,0))}function U(A){var E=A._readableState;s("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(s("emitReadable",E.flowing),E.emittedReadable=!0,Ve.nextTick(V,A))}function V(A){var E=A._readableState;s("emitReadable_",E.destroyed,E.length,E.ended),E.destroyed||!E.length&&!E.ended||(A.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,j(A)}function L(A,E){E.readingMore||(E.readingMore=!0,Ve.nextTick(B,A,E))}function B(A,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){var k=E.length;if(s("maybeReadMore read 0"),A.read(0),k===E.length)break}E.readingMore=!1}function M(A){var E=A._readableState;E.readableListening=A.listenerCount("readable")>0,E.resumeScheduled&&!E.paused?E.flowing=!0:A.listenerCount("data")>0&&A.resume()}function _(A){s("readable nexttick read 0"),A.read(0)}function R(A,E){s("resume",E.reading),E.reading||A.read(0),E.resumeScheduled=!1,A.emit("resume"),j(A),E.flowing&&!E.reading&&A.read(0)}function j(A){var E=A._readableState;for(s("flow",E.flowing);E.flowing&&A.read()!==null;);}function v(A,E){return E.length===0?null:(E.objectMode?k=E.buffer.shift():!A||A>=E.length?(k=E.decoder?E.buffer.join(""):E.buffer.length===1?E.buffer.first():E.buffer.concat(E.length),E.buffer.clear()):k=E.buffer.consume(A,E.decoder),k);var k}function S(A){var E=A._readableState;s("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,Ve.nextTick(C,E,A))}function C(A,E){if(s("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,E.readable=!1,E.emit("end"),A.autoDestroy)){var k=E._writableState;(!k||k.autoDestroy&&k.finished)&&E.destroy()}}function P(A,E){for(var k=0,I=A.length;k<I;k++)if(A[k]===E)return k;return-1}return N.prototype.read=function(A){s("read",A),A=parseInt(A,10);var E=this._readableState,k=A;if(A!==0&&(E.emittedReadable=!1),A===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return s("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?S(this):U(this),null;if((A=F(A,E))===0&&E.ended)return E.length===0&&S(this),null;var I,D=E.needReadable;return s("need readable",D),(E.length===0||E.length-A<E.highWaterMark)&&s("length less than watermark",D=!0),E.ended||E.reading?s("reading or ended",D=!1):D&&(s("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(A=F(k,E))),(I=A>0?v(A,E):null)===null?(E.needReadable=E.length<=E.highWaterMark,A=0):(E.length-=A,E.awaitDrain=0),E.length===0&&(E.ended||(E.needReadable=!0),k!==A&&E.ended&&S(this)),I!==null&&this.emit("data",I),I},N.prototype._read=function(A){b(this,new y("_read()"))},N.prototype.pipe=function(A,E){var k=this,I=this._readableState;switch(I.pipesCount){case 0:I.pipes=A;break;case 1:I.pipes=[I.pipes,A];break;default:I.pipes.push(A)}I.pipesCount+=1,s("pipe count=%d opts=%j",I.pipesCount,E);var D=(!E||E.end!==!1)&&A!==Ve.stdout&&A!==Ve.stderr?K:ne;function T(J,W){s("onunpipe"),J===k&&W&&W.hasUnpiped===!1&&(W.hasUnpiped=!0,s("cleanup"),A.removeListener("close",$),A.removeListener("finish",Q),A.removeListener("drain",q),A.removeListener("error",O),A.removeListener("unpipe",T),k.removeListener("end",K),k.removeListener("end",ne),k.removeListener("data",oe),Z=!0,!I.awaitDrain||A._writableState&&!A._writableState.needDrain||q())}function K(){s("onend"),A.end()}I.endEmitted?Ve.nextTick(D):k.once("end",D),A.on("unpipe",T);var q=(function(J){return function(){var W=J._readableState;s("pipeOnDrain",W.awaitDrain),W.awaitDrain&&W.awaitDrain--,W.awaitDrain===0&&e(J,"data")&&(W.flowing=!0,j(J))}})(k);A.on("drain",q);var Z=!1;function oe(J){s("ondata");var W=A.write(J);s("dest.write",W),W===!1&&((I.pipesCount===1&&I.pipes===A||I.pipesCount>1&&P(I.pipes,A)!==-1)&&!Z&&(s("false write response, pause",I.awaitDrain),I.awaitDrain++),k.pause())}function O(J){s("onerror",J),ne(),A.removeListener("error",O),e(A,"error")===0&&b(A,J)}function $(){A.removeListener("finish",Q),ne()}function Q(){s("onfinish"),A.removeListener("close",$),ne()}function ne(){s("unpipe"),k.unpipe(A)}return k.on("data",oe),(function(J,W,X){if(typeof J.prependListener=="function")return J.prependListener(W,X);J._events&&J._events[W]?Array.isArray(J._events[W])?J._events[W].unshift(X):J._events[W]=[X,J._events[W]]:J.on(W,X)})(A,"error",O),A.once("close",$),A.once("finish",Q),A.emit("pipe",k),I.flowing||(s("pipe resume"),k.resume()),A},N.prototype.unpipe=function(A){var E=this._readableState,k={hasUnpiped:!1};if(E.pipesCount===0)return this;if(E.pipesCount===1)return A&&A!==E.pipes||(A||(A=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,A&&A.emit("unpipe",this,k)),this;if(!A){var I=E.pipes,D=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var T=0;T<D;T++)I[T].emit("unpipe",this,{hasUnpiped:!1});return this}var K=P(E.pipes,A);return K===-1||(E.pipes.splice(K,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),A.emit("unpipe",this,k)),this},N.prototype.on=function(A,E){var k=n.prototype.on.call(this,A,E),I=this._readableState;return A==="data"?(I.readableListening=this.listenerCount("readable")>0,I.flowing!==!1&&this.resume()):A==="readable"&&(I.endEmitted||I.readableListening||(I.readableListening=I.needReadable=!0,I.flowing=!1,I.emittedReadable=!1,s("on readable",I.length,I.reading),I.length?U(this):I.reading||Ve.nextTick(_,this))),k},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(A,E){var k=n.prototype.removeListener.call(this,A,E);return A==="readable"&&Ve.nextTick(M,this),k},N.prototype.removeAllListeners=function(A){var E=n.prototype.removeAllListeners.apply(this,arguments);return A!=="readable"&&A!==void 0||Ve.nextTick(M,this),E},N.prototype.resume=function(){var A=this._readableState;return A.flowing||(s("resume"),A.flowing=!A.readableListening,(function(E,k){k.resumeScheduled||(k.resumeScheduled=!0,Ve.nextTick(R,E,k))})(this,A)),A.paused=!1,this},N.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},N.prototype.wrap=function(A){var E=this,k=this._readableState,I=!1;for(var D in A.on("end",(function(){if(s("wrapped end"),k.decoder&&!k.ended){var K=k.decoder.end();K&&K.length&&E.push(K)}E.push(null)})),A.on("data",(function(K){s("wrapped data"),k.decoder&&(K=k.decoder.write(K)),k.objectMode&&K==null||(k.objectMode||K&&K.length)&&(E.push(K)||(I=!0,A.pause()))})),A)this[D]===void 0&&typeof A[D]=="function"&&(this[D]=(function(K){return function(){return A[K].apply(A,arguments)}})(D));for(var T=0;T<w.length;T++)A.on(w[T],this.emit.bind(this,w[T]));return this._read=function(K){s("wrapped _read",K),I&&(I=!1,A.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=Y8()),c(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),N._fromList=v,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(N.from=function(A,E){return l===void 0&&(l=Iw?Tw:(Iw=1,Tw=function(){throw new Error("Readable.from is not available in the browser")})),l(N,A,E)}),Ah}var uS=si,ed=oo.codes,Z8=ed.ERR_METHOD_NOT_IMPLEMENTED,X8=ed.ERR_MULTIPLE_CALLBACK,e4=ed.ERR_TRANSFORM_ALREADY_TRANSFORMING,t4=ed.ERR_TRANSFORM_WITH_LENGTH_0,mu=da();function n4(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new X8);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function si(t){if(!(this instanceof si))return new si(t);mu.call(this,t),this._transformState={afterTransform:n4.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",r4)}function r4(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?Ow(this,null,null):this._flush((function(e,n){Ow(t,e,n)}))}function Ow(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new t4;if(t._transformState.transforming)throw new e4;return t.push(null)}tl(si,mu),si.prototype.push=function(t,e){return this._transformState.needTransform=!1,mu.prototype.push.call(this,t,e)},si.prototype._transform=function(t,e,n){n(new Z8("_transform()"))},si.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},si.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},si.prototype._destroy=function(t,e){mu.prototype._destroy.call(this,t,(function(n){e(n)}))};var _h,i4=Nc,fS=uS;function Nc(t){if(!(this instanceof Nc))return new Nc(t);fS.call(this,t)}tl(Nc,fS),Nc.prototype._transform=function(t,e,n){n(null,t)};var dS=oo.codes,s4=dS.ERR_MISSING_ARGS,o4=dS.ERR_STREAM_DESTROYED;function Nw(t){if(t)throw t}function Mw(t){t()}function a4(t,e){return t.pipe(e)}var c4=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=(function(o){return o.length?typeof o[o.length-1]!="function"?Nw:o.pop():Nw})(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new s4("streams");var s=e.map((function(o,a){var c=a<e.length-1;return(function(l,u,f,d){d=(function(p){var y=!1;return function(){y||(y=!0,p.apply(void 0,arguments))}})(d);var h=!1;l.on("close",(function(){h=!0})),_h===void 0&&(_h=h0),_h(l,{readable:u,writable:f},(function(p){if(p)return d(p);h=!0,d()}));var g=!1;return function(p){if(!h&&!g)return g=!0,(function(y){return y.setHeader&&typeof y.abort=="function"})(l)?l.abort():typeof l.destroy=="function"?l.destroy():void d(p||new o4("pipe"))}})(o,c,a>0,(function(l){r||(r=l),l&&s.forEach(Mw),c||(s.forEach(Mw),i(r))}))}));return e.reduce(a4)};(function(t,e){(e=Hp.exports=lS()).Stream=e,e.Readable=e,e.Writable=cS(),e.Duplex=da(),e.Transform=uS,e.PassThrough=i4,e.finished=h0,e.pipeline=c4})(0,Hp.exports);var ha=Hp.exports;function l4(t={}){const e={},n=new ha.Duplex({objectMode:!0,read:()=>{},write:function(s,o,a){let c=null;try{s.id?(function(l){const{id:u}=l;if(u===null)return;const f=e[u];if(!f)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete e[u],Object.assign(f.res,l),setTimeout(f.end)})(s):(function(l){t?.retryOnMessage&&l.method===t.retryOnMessage&&Object.values(e).forEach((({req:u,retryCount:f=0})=>{if(!u.id)return;if(f>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);const d=e[u.id];d&&(d.retryCount=f+1),i(u)})),r.emit("notification",l)})(s)}catch(l){c=l}a(c)}}),r=new H_;return{events:r,middleware:(s,o,a,c)=>{e[s.id]={req:s,res:o,next:a,end:c},i(s)},stream:n};function i(s){n.push(s)}}var sf={},jp={exports:{}},u4=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(i){r[i]=e[i]})),r;function r(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];var o=e.apply(this,i),a=i[i.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach((function(c){o[c]=a[c]})),o}},Lw=u4;function $l(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Bw(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}jp.exports=Lw($l),jp.exports.strict=Lw(Bw),$l.proto=$l((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return $l(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Bw(this)},configurable:!0})}));var f4=jp.exports,of={};Object.defineProperty(of,"__esModule",{value:!0}),of.Substream=void 0;const d4=ha;class h4 extends d4.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}of.Substream=h4;var p4=er&&er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sf,"__esModule",{value:!0}),sf.ObjectMultiplex=void 0;const Sh=ha,g4=p4(f4),m4=of,Dw=Symbol("IGNORE_SUBSTREAM");let y4=class extends Sh.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new m4.Substream({parent:this,name:t});return this._substreams[t]=e,(function(n,r){const i=(0,g4.default)(r);(0,Sh.finished)(n,{readable:!1},i),(0,Sh.finished)(n,{writable:!1},i)})(this,(n=>e.destroy(n||void 0))),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=Dw}_read(){}_write(t,e,n){const{name:r,data:i}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[r];return s?(s!==Dw&&s.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};sf.ObjectMultiplex=y4;var v4=Qf(sf.ObjectMultiplex);const kr=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";kr.writable=t=>kr(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",kr.readable=t=>kr(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",kr.duplex=t=>kr.writable(t)&&kr.readable(t),kr.transform=t=>kr.duplex(t)&&typeof t._transform=="function";var Pr,w4=kr,b4=class extends L8{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!w4.duplex(t))throw new Error(wt.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const s=new v4;ha.pipeline(t,s,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=l4({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),ha.pipeline(this._jsonRpcConnection.stream,s.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",(o=>{const{method:a,params:c}=o;a==="metamask_accountsChanged"?this._handleAccountsChanged(c):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(c):a==="metamask_chainChanged"?this._handleChainChanged(c):K_.includes(a)?this.emit("message",{type:a,data:c}):a==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(wt.errors.permanentlyDisconnected()))}))}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e?.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){j_(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(wt.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},E4=class extends b4{constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:k8(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},$p(this,Pr,void 0),this._initializeStateAsync(),ii(this,Pr,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",(s=>{const{method:o}=s;K_.includes(o)&&(this.emit("data",s),this.emit("notification",s.params.result))})),i)if(document.readyState==="complete")ww(this._rpcEngine,this._log);else{const s=()=>{ww(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",s)};window.addEventListener("DOMContentLoaded",s)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(wt.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(wt.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Br(this,Pr)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(wt.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),Br(this,Pr)&&!t&&ii(this,Pr,null)}_warnOfDeprecation(t){this._sentWarnings?.events[t]===!1&&(this._log.warn(wt.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(wt.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise(((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},hu(t,e))}catch(n){e(n)}}))}send(t,e){return this._sentWarnings.send||(this._log.warn(wt.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise(((n,r)=>{try{this._rpcRequest({method:t,params:e},hu(n,r,!1))}catch(i){r(i)}}))}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,V_),e=!0;break;case"net_version":e=Br(this,Pr)??null;break;default:throw new Error(wt.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise((t=>{this.on("_initialized",(()=>t()))})),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw tc({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise(((e,n)=>{this._rpcRequest(t,hu(e,n))}))}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(wt.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==Br(this,Pr)&&(ii(this,Pr,e),this._state.initialized&&this.emit("networkChanged",Br(this,Pr)))}};Pr=new WeakMap;const le=yn("MM_SDK");let Uw;le.color="#FFAC1C";var hS={},cs={};Object.defineProperty(cs,"__esModule",{value:!0}),cs.EthereumProviderError=cs.EthereumRpcError=void 0;const A4=L_;class pS extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return A4.default(this.serialize(),_4,2)}}cs.EthereumRpcError=pS;function _4(t,e){if(e!=="[Circular]")return e}cs.EthereumProviderError=class extends pS{constructor(t,e,n){if(!(function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999})(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var p0={},Zi={};Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.errorValues=Zi.errorCodes=void 0,Zi.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Zi.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Zi,n=cs,r=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:r,message:o(r)};function o(f,d=i){if(Number.isInteger(f)){const h=f.toString();if(u(e.errorValues,h))return e.errorValues[h].message;if(c(f))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return d}function a(f){if(!Number.isInteger(f))return!1;const d=f.toString();return!!e.errorValues[d]||!!c(f)}function c(f){return f>=-32099&&f<=-32e3}function l(f){return f&&typeof f=="object"&&!Array.isArray(f)?Object.assign({},f):f}function u(f,d){return Object.prototype.hasOwnProperty.call(f,d)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=o,t.isValidCode=a,t.serializeError=function(f,{fallbackError:d=s,shouldIncludeStack:h=!1}={}){var g,p;if(!d||!Number.isInteger(d.code)||typeof d.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(f instanceof n.EthereumRpcError)return f.serialize();const y={};if(f&&typeof f=="object"&&!Array.isArray(f)&&u(f,"code")&&a(f.code)){const b=f;y.code=b.code,b.message&&typeof b.message=="string"?(y.message=b.message,u(b,"data")&&(y.data=b.data)):(y.message=o(y.code),y.data={originalError:l(f)})}else{y.code=d.code;const b=(g=f)===null||g===void 0?void 0:g.message;y.message=b&&typeof b=="string"?b:d.message,y.data={originalError:l(f)}}const m=(p=f)===null||p===void 0?void 0:p.stack;return h&&f&&m&&typeof m=="string"&&(y.stack=m),y}})(p0);var af={};Object.defineProperty(af,"__esModule",{value:!0}),af.ethErrors=void 0;const g0=cs,gS=p0,Gt=Zi;function Gn(t,e){const[n,r]=mS(e);return new g0.EthereumRpcError(t,n||gS.getMessageFromCode(t),r)}function Ra(t,e){const[n,r]=mS(e);return new g0.EthereumProviderError(t,n||gS.getMessageFromCode(t),r)}function mS(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}af.ethErrors={rpc:{parse:t=>Gn(Gt.errorCodes.rpc.parse,t),invalidRequest:t=>Gn(Gt.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Gn(Gt.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Gn(Gt.errorCodes.rpc.methodNotFound,t),internal:t=>Gn(Gt.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Gn(e,t)},invalidInput:t=>Gn(Gt.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Gn(Gt.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Gn(Gt.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Gn(Gt.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Gn(Gt.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Gn(Gt.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Ra(Gt.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Ra(Gt.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Ra(Gt.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Ra(Gt.errorCodes.provider.disconnected,t),chainDisconnected:t=>Ra(Gt.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new g0.EthereumProviderError(e,n,r)}}},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=cs;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=p0;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=af;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Zi;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(hS);var yS={exports:{}};yS.exports=(function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(r,i,s){n.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,i){if(1&i&&(r=n(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var o in r)n.d(s,o,(function(a){return r[a]}).bind(null,o));return s},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=90)})({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),i=(function(){function s(){}return s.getFirstMatch=function(o,a){var c=a.match(o);return c&&c.length>0&&c[1]||""},s.getSecondMatch=function(o,a){var c=a.match(o);return c&&c.length>1&&c[2]||""},s.matchAndReturnConst=function(o,a,c){if(o.test(a))return c},s.getWindowsVersionName=function(o){switch(o){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(o){var a=o.split(".").splice(0,2).map((function(c){return parseInt(c,10)||0}));if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(o){var a=o.split(".").splice(0,2).map((function(c){return parseInt(c,10)||0}));if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},s.getVersionPrecision=function(o){return o.split(".").length},s.compareVersions=function(o,a,c){c===void 0&&(c=!1);var l=s.getVersionPrecision(o),u=s.getVersionPrecision(a),f=Math.max(l,u),d=0,h=s.map([o,a],(function(g){var p=f-s.getVersionPrecision(g),y=g+new Array(p+1).join(".0");return s.map(y.split("."),(function(m){return new Array(20-m.length).join("0")+m})).reverse()}));for(c&&(d=f-Math.min(l,u)),f-=1;f>=d;){if(h[0][f]>h[1][f])return 1;if(h[0][f]===h[1][f]){if(f===d)return 0;f-=1}else if(h[0][f]<h[1][f])return-1}},s.map=function(o,a){var c,l=[];if(Array.prototype.map)return Array.prototype.map.call(o,a);for(c=0;c<o.length;c+=1)l.push(a(o[c]));return l},s.find=function(o,a){var c,l;if(Array.prototype.find)return Array.prototype.find.call(o,a);for(c=0,l=o.length;c<l;c+=1){var u=o[c];if(a(u,c))return u}},s.assign=function(o){for(var a,c,l=o,u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];if(Object.assign)return Object.assign.apply(Object,[o].concat(f));var h=function(){var g=f[a];typeof g=="object"&&g!==null&&Object.keys(g).forEach((function(p){l[p]=g[p]}))};for(a=0,c=f.length;a<c;a+=1)h();return o},s.getBrowserAlias=function(o){return r.BROWSER_ALIASES_MAP[o]},s.getBrowserTypeByAlias=function(o){return r.BROWSER_MAP[o]||""},s})();e.default=i,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},s=n(18);function o(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}var a=(function(){function c(){}var l,u,f;return c.getParser=function(d,h){if(h===void 0&&(h=!1),typeof d!="string")throw new Error("UserAgent should be a string");return new i.default(d,h)},c.parse=function(d){return new i.default(d).getResult()},l=c,f=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(u=null)&&o(l.prototype,u),f&&o(l,f),c})();e.default=a,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=c(n(92)),i=c(n(93)),s=c(n(94)),o=c(n(95)),a=c(n(17));function c(u){return u&&u.__esModule?u:{default:u}}var l=(function(){function u(d,h){if(h===void 0&&(h=!1),d==null||d==="")throw new Error("UserAgent parameter can't be empty");this._ua=d,this.parsedResult={},h!==!0&&this.parse()}var f=u.prototype;return f.getUA=function(){return this._ua},f.test=function(d){return d.test(this._ua)},f.parseBrowser=function(){var d=this;this.parsedResult.browser={};var h=a.default.find(r.default,(function(g){if(typeof g.test=="function")return g.test(d);if(g.test instanceof Array)return g.test.some((function(p){return d.test(p)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},f.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},f.getBrowserName=function(d){return d?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},f.getBrowserVersion=function(){return this.getBrowser().version},f.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},f.parseOS=function(){var d=this;this.parsedResult.os={};var h=a.default.find(i.default,(function(g){if(typeof g.test=="function")return g.test(d);if(g.test instanceof Array)return g.test.some((function(p){return d.test(p)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},f.getOSName=function(d){var h=this.getOS().name;return d?String(h).toLowerCase()||"":h||""},f.getOSVersion=function(){return this.getOS().version},f.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},f.getPlatformType=function(d){d===void 0&&(d=!1);var h=this.getPlatform().type;return d?String(h).toLowerCase()||"":h||""},f.parsePlatform=function(){var d=this;this.parsedResult.platform={};var h=a.default.find(s.default,(function(g){if(typeof g.test=="function")return g.test(d);if(g.test instanceof Array)return g.test.some((function(p){return d.test(p)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},f.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},f.getEngineName=function(d){return d?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},f.parseEngine=function(){var d=this;this.parsedResult.engine={};var h=a.default.find(o.default,(function(g){if(typeof g.test=="function")return g.test(d);if(g.test instanceof Array)return g.test.some((function(p){return d.test(p)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},f.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},f.getResult=function(){return a.default.assign({},this.parsedResult)},f.satisfies=function(d){var h=this,g={},p=0,y={},m=0;if(Object.keys(d).forEach((function(F){var U=d[F];typeof U=="string"?(y[F]=U,m+=1):typeof U=="object"&&(g[F]=U,p+=1)})),p>0){var b=Object.keys(g),w=a.default.find(b,(function(F){return h.isOS(F)}));if(w){var x=this.satisfies(g[w]);if(x!==void 0)return x}var N=a.default.find(b,(function(F){return h.isPlatform(F)}));if(N){var H=this.satisfies(g[N]);if(H!==void 0)return H}}if(m>0){var z=Object.keys(y),G=a.default.find(z,(function(F){return h.isBrowser(F,!0)}));if(G!==void 0)return this.compareVersion(y[G])}},f.isBrowser=function(d,h){h===void 0&&(h=!1);var g=this.getBrowserName().toLowerCase(),p=d.toLowerCase(),y=a.default.getBrowserTypeByAlias(p);return h&&y&&(p=y.toLowerCase()),p===g},f.compareVersion=function(d){var h=[0],g=d,p=!1,y=this.getBrowserVersion();if(typeof y=="string")return d[0]===">"||d[0]==="<"?(g=d.substr(1),d[1]==="="?(p=!0,g=d.substr(2)):h=[],d[0]===">"?h.push(1):h.push(-1)):d[0]==="="?g=d.substr(1):d[0]==="~"&&(p=!0,g=d.substr(1)),h.indexOf(a.default.compareVersions(y,g,p))>-1},f.isOS=function(d){return this.getOSName(!0)===String(d).toLowerCase()},f.isPlatform=function(d){return this.getPlatformType(!0)===String(d).toLowerCase()},f.isEngine=function(d){return this.getEngineName(!0)===String(d).toLowerCase()},f.is=function(d,h){return h===void 0&&(h=!1),this.isBrowser(d,h)||this.isOS(d)||this.isPlatform(d)},f.some=function(d){var h=this;return d===void 0&&(d=[]),d.some((function(g){return h.is(g)}))},u})();e.default=l,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(a){var c={name:"Googlebot"},l=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/opera/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opr\/|opios/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/SamsungBrowser/i],describe:function(a){var c={name:"Samsung Internet for Android"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Whale/i],describe:function(a){var c={name:"NAVER Whale Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MZBrowser/i],describe:function(a){var c={name:"MZ Browser"},l=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/focus/i],describe:function(a){var c={name:"Focus"},l=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/swing/i],describe:function(a){var c={name:"Swing"},l=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/coast/i],describe:function(a){var c={name:"Opera Coast"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var c={name:"Opera Touch"},l=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/yabrowser/i],describe:function(a){var c={name:"Yandex Browser"},l=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/ucbrowser/i],describe:function(a){var c={name:"UC Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Maxthon|mxios/i],describe:function(a){var c={name:"Maxthon"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/epiphany/i],describe:function(a){var c={name:"Epiphany"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/puffin/i],describe:function(a){var c={name:"Puffin"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sleipnir/i],describe:function(a){var c={name:"Sleipnir"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/k-meleon/i],describe:function(a){var c={name:"K-Meleon"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/micromessenger/i],describe:function(a){var c={name:"WeChat"},l=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/qqbrowser/i],describe:function(a){var c={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},l=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/msie|trident/i],describe:function(a){var c={name:"Internet Explorer"},l=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/\sedg\//i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/edg([ea]|ios)/i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/vivaldi/i],describe:function(a){var c={name:"Vivaldi"},l=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/seamonkey/i],describe:function(a){var c={name:"SeaMonkey"},l=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sailfish/i],describe:function(a){var c={name:"Sailfish"},l=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return l&&(c.version=l),c}},{test:[/silk/i],describe:function(a){var c={name:"Amazon Silk"},l=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/phantom/i],describe:function(a){var c={name:"PhantomJS"},l=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/slimerjs/i],describe:function(a){var c={name:"SlimerJS"},l=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c={name:"BlackBerry"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c={name:"WebOS Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/bada/i],describe:function(a){var c={name:"Bada"},l=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/tizen/i],describe:function(a){var c={name:"Tizen"},l=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/qupzilla/i],describe:function(a){var c={name:"QupZilla"},l=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var c={name:"Firefox"},l=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/electron/i],describe:function(a){var c={name:"Electron"},l=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MiuiBrowser/i],describe:function(a){var c={name:"Miui"},l=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/chromium/i],describe:function(a){var c={name:"Chromium"},l=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/chrome|crios|crmo/i],describe:function(a){var c={name:"Chrome"},l=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/GSA/i],describe:function(a){var c={name:"Google Search"},l=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c={name:"Android Browser"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/playstation 4/i],describe:function(a){var c={name:"PlayStation 4"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/safari|applewebkit/i],describe:function(a){var c={name:"Safari"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/.*/i],describe:function(a){var c=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(c,a),version:i.default.getSecondMatch(c,a)}}}];e.default=o,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/Roku\/DVP/],describe:function(a){var c=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:s.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(a){var c=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(a){var c=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),l=i.default.getWindowsVersionName(c);return{name:s.OS_MAP.Windows,version:c,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var c={name:s.OS_MAP.iOS},l=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return l&&(c.version=l),c}},{test:[/macintosh/i],describe:function(a){var c=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),l=i.default.getMacOSVersionName(c),u={name:s.OS_MAP.MacOS,version:c};return l&&(u.versionName=l),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var c=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:c}}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),l=i.default.getAndroidVersionName(c),u={name:s.OS_MAP.Android,version:c};return l&&(u.versionName=l),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),l={name:s.OS_MAP.WebOS};return c&&c.length&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||i.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:s.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(a){var c=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(a){var c=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var c=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.PlayStation4,version:c}}}];e.default=o,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var c=i.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",l={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(l.model=c),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){var c=a.test(/ipod|iphone/i),l=a.test(/like (ipod|iphone)/i);return c&&!l},describe:function(a){var c=i.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var c=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:s.ENGINE_MAP.Blink};var c=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:s.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(a){var c={name:s.ENGINE_MAP.Trident},l=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){return a.test(/presto/i)},describe:function(a){var c={name:s.ENGINE_MAP.Presto},l=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=a.test(/gecko/i),l=a.test(/like gecko/i);return c&&!l},describe:function(a){var c={name:s.ENGINE_MAP.Gecko},l=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var c={name:s.ENGINE_MAP.WebKit},l=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}}];e.default=o,t.exports=e.default}});var vS=Qf(yS.exports);const Cn={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class vr{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:s}){const o=new S4({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),a=new Proxy(o,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=s,e&&typeof window<"u")try{c=o,window.ethereum=c,window.dispatchEvent(new Event("ethereum#initialized"))}catch(l){le("[Ethereum] Unable to set global provider - window.ethereum may be read-only",l)}var c;if(i&&typeof window<"u")try{(function(l,u=console){let f=!1,d=!1;if(!window.web3){const h="__isMetaMaskShim__";let g={currentProvider:l};Object.defineProperty(g,h,{value:!0,enumerable:!0,configurable:!1,writable:!1}),g=new Proxy(g,{get:(p,y,...m)=>(y!=="currentProvider"||f?y==="currentProvider"||y===h||d||(d=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),l.request({method:"metamask_logWeb3ShimUsage"}).catch((b=>{u.debug("MetaMask: Failed to log web3 shim usage.",b)}))):(f=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(p,y,...m)),set:(...p)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...p))}),Object.defineProperty(window,"web3",{value:g,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(l){le("[Ethereum] Unable to shim web3 - window.web3 may be read-only",l)}this.provider.on("display_uri",(l=>{this.sdkInstance.emit(Cn.DisplayURI,l)})),this.provider.on("_initialized",(()=>{const l={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Cn.Initialized,l),le("[Ethereum: constructor()] provider initialized",l)}))}static init(e){var n;return le("[Ethereum: init()] Initializing Ethereum service"),this.instance=new vr(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class Mc{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return(function(i,s,o,a){const{state:c}=i;le(`[PlatfformManager: openDeeplink()] universalLink --> ${s}`),le(`[PlatfformManager: openDeeplink()] deepLink --> ${o}`);try{if(c.preferredOpenLink)return void c.preferredOpenLink(c.useDeeplink?o:s,a);if(le(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${c.useDeeplink} link=${c.useDeeplink?o:s}`),c.useDeeplink)typeof window<"u"&&(window.location.href=o);else if(typeof document<"u"){const l=document.createElement("a");l.href=s,l.target="_self",l.rel="noreferrer noopener",l.click()}}catch(l){console.log("[PlatfformManager: openDeeplink()] can't open link",l)}})(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&window?.navigator&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return(function(){const e=vr.getProvider()||window?.ethereum;return le(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e?.isMetaMask} isConnected=${e?.isConnected()}`),e?.isMetaMask&&e?.isConnected()})()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=vS.parse(window.navigator.userAgent);return((e=r?.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r?.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===Yt.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!window?.navigator||vn!==void 0&&((e=vn?.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||navigator?.product==="ReactNative"}isNotBrowser(){return Mc.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return Mc.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return(function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?Yt.ReactNative:e.isNotBrowser()?Yt.NonBrowser:e.isMetaMaskMobileWebView()?Yt.MetaMaskMobileWebview:e.isMobile()?Yt.MobileWeb:Yt.DesktopWeb})(this)}}const wS=t=>de(void 0,void 0,void 0,(function*(){if(Mc.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then((function(){return X4}));return new n(t)}const e={persistChannelConfig:()=>de(void 0,void 0,void 0,(function*(){})),getPersistedChannelConfig:()=>de(void 0,void 0,void 0,(function*(){})),persistAccounts:()=>de(void 0,void 0,void 0,(function*(){})),getCachedAccounts:()=>de(void 0,void 0,void 0,(function*(){return[]})),persistChainId:()=>de(void 0,void 0,void 0,(function*(){})),getCachedChainId:()=>de(void 0,void 0,void 0,(function*(){})),terminate:()=>de(void 0,void 0,void 0,(function*(){}))};return Promise.resolve(e)}));class S4 extends E4{constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},le(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return de(this,void 0,void 0,(function*(){return le(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()}))}_setConnected(){le("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(le("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:i}=r;le(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",hS.ethErrors.provider.disconnected()),i.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return de(this,void 0,void 0,(function*(){return(function(e){var n,r;return de(this,void 0,void 0,(function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:i}=e;let s;if(i.providerStateRequested)le("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let o;i.providerStateRequested=!0;let a=null,c=!1,l=!1;const u=yield wS({enabled:!0});if(u){const f=yield u.getPersistedChannelConfig({});c=(n=f?.relayPersistence)!==null&&n!==void 0&&n,o=yield u.getCachedChainId();const d=yield u.getCachedAccounts();d.length>0&&(a=d[0])}if(le(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:o,cachedSelectedAddress:a}),c)if(o&&a)s={accounts:[a],chainId:o,isUnlocked:!1},l=!0;else try{s=yield e.request({method:"metamask_getProviderState"})}catch(f){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",f),void(i.providerStateRequested=!1)}if(((r=s?.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())s.accounts=[e.getSelectedAddress()];else{le("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const f=yield e.request({method:"eth_requestAccounts",params:[]});s.accounts=f}e._initializeState(s),i.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:s?.chainId}))}}))})(this)}))}_initializeState(e){return le("[SDKProvider: _initializeState()]",e),(function(n,r,i){return le("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(i)})(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,(function({instance:r,chainId:i,networkVersion:s,superHandleChainChanged:o}){le(`[SDKProvider: handleChainChanged()] chainId=${i} networkVersion=${s}`);let a=s;s||(le("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),i!==Uw&&(_t.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(i??"0x1",16)}`}),Uw=i),r._state.isConnected=!0,r.emit("connect",{chainId:i}),o({chainId:i,networkVersion:a})})({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var Lc,ao={name:"@metamask/sdk",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})(Lc||(Lc={}));const Fw="direct",Bc="https://metamask.app.link/connect",Dc="metamask://connect",$w={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},C4=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,xe={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},Uc={[xe.ETH_REQUESTACCOUNTS]:!0,[xe.ETH_SENDTRANSACTION]:!0,[xe.ETH_SIGNTRANSACTION]:!0,[xe.ETH_SIGN]:!0,[xe.PERSONAL_SIGN]:!0,[xe.ETH_ACCOUNTS]:!1,[xe.ETH_CHAINID]:!1,[xe.PERSONAL_SIGN]:!0,[xe.ETH_SIGNTYPEDDATA]:!0,[xe.ETH_SIGNTYPEDDATA_V3]:!0,[xe.ETH_SIGNTYPEDDATA_V4]:!0,[xe.WALLET_REQUESTPERMISSIONS]:!0,[xe.WALLET_GETPERMISSIONS]:!0,[xe.WALLET_WATCHASSET]:!0,[xe.WALLET_ADDETHEREUMCHAIN]:!0,[xe.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[xe.METAMASK_CONNECTSIGN]:!0,[xe.METAMASK_CONNECTWITH]:!0,[xe.PERSONAL_EC_RECOVER]:!0,[xe.METAMASK_BATCH]:!0,[xe.METAMASK_OPEN]:!0},x4=Object.keys(Uc).filter((t=>Uc[t]===!0)).map((t=>t.toLowerCase())),bS=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map((t=>t.toLowerCase())),Ch=".sdk-comm",cf="providerType",Vp=".MMSDK_cached_address",zp=".MMSDK_cached_chainId",xr={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},k4=1e6;var jr;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})(jr||(jr={}));const P4=typeof window<"u"&&window.localStorage;function T4({instance:t,msg:e}){return de(this,void 0,void 0,(function*(){if(t._initialized||(le("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),le(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:(function(r){let i;if(pe!==void 0)i=pe.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const s=new TextEncoder().encode(r);i=Array.from(s).map((o=>o.toString(16).padStart(2,"0"))).join("")}else{if(typeof vn!="object"||!("Buffer"in vn))throw new Error("Unable to convert string to hex: No available method.");i=vn.Buffer.from(r,"utf8").toString("hex")}return`0x${i}`})(e);return t.activeProvider.request({method:xe.METAMASK_CONNECTWITH,params:[{method:xe.PERSONAL_SIGN,params:[n]}]})}))}function Hw(t){var e,n;return de(this,void 0,void 0,(function*(){le("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});le(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(cf,"extension"),t.extensionActive=!0,t.emit(Cn.ProviderUpdate,jr.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:Ct.SDK_USE_EXTENSION}))}))}function lf(t){let e;if(pe!==void 0)e=pe.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,((n,r)=>String.fromCharCode(parseInt(r,16)))));else{if(typeof vn!="object"||!("Buffer"in vn))throw new Error("Unable to base64 encode: No available method.");e=vn.Buffer.from(t,"utf8").toString("base64")}return e}function I4(t,e,n,r){var i,s,o,a,c,l,u,f,d,h,g,p,y,m,b,w,x,N,H,z;return de(this,void 0,void 0,(function*(){const G=(i=t.state.remote)===null||i===void 0?void 0:i.isReady(),F=(s=t.state.remote)===null||s===void 0?void 0:s.isConnected(),U=(o=t.state.remote)===null||o===void 0?void 0:o.isPaused(),V=vr.getProvider(),L=(a=t.state.remote)===null||a===void 0?void 0:a.getChannelId(),B=(c=t.state.remote)===null||c===void 0?void 0:c.isAuthorized(),{deeplinkProtocol:M}=t.state,{method:_,data:R,triggeredInstaller:j}=(P=>{var A,E,k,I;let D;pe.isBuffer(P)?(D=P.toJSON(),D._isBuffer=!0):D=P;const T=(A=D?.data)===null||A===void 0?void 0:A.method;let K=!1;return typeof((E=D?.data)===null||E===void 0?void 0:E.params)=="object"&&((I=(k=D?.data)===null||k===void 0?void 0:k.params)===null||I===void 0?void 0:I.__triggeredInstaller)===!0&&(K=!0,D.data.params=D.data.params.wrappedParams),{method:T,data:D,triggeredInstaller:K}})(e);if(le(`[RCPMS: write()] method='${_}' isRemoteReady=${G} channelId=${L} isSocketConnected=${F} isRemotePaused=${U} providerConnected=${V.isConnected()}`,e),!L)return _!==xe.METAMASK_GETPROVIDERSTATE&&le(`[RCPMS: write()] ${_} --> channelId is undefined`),r(new Error("disconnected"));le(`[RCPMS: write()] remote.isPaused()=${(l=t.state.remote)===null||l===void 0?void 0:l.isPaused()} authorized=${B} ready=${G} socketConnected=${F}`,e);const v=(u=t.state.platformManager)===null||u===void 0?void 0:u.isSecure(),S=(d=(f=t.state.platformManager)===null||f===void 0?void 0:f.isMobileWeb())!==null&&d!==void 0&&d,C=(g=(h=t.state.remote)===null||h===void 0?void 0:h.hasDeeplinkProtocol())!==null&&g!==void 0&&g&&S&&B;try{if(!j){const E=JSON.stringify(R?.data);if(E.length>k4)return r(new Error(`Message size ${E.length} exceeds maximum allowed size of 1000000 bytes`));(p=t.state.remote)===null||p===void 0||p.sendMessage(R?.data).then((()=>{le(`[RCPMS: _write()] ${_} sent successfully`)})).catch((k=>{le("[RCPMS: _write()] error sending message",k)}))}if(!v)return le(`[RCPMS: _write()] unsecure platform for method ${_} -- return callback`),r();if(j)return le("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const P=(b=(m=(y=t.state.remote)===null||y===void 0?void 0:y.getKeyInfo())===null||m===void 0?void 0:m.ecies.public)!==null&&b!==void 0?b:"";let A=encodeURI(`channelId=${L}&pubkey=${P}&comm=socket&t=d&v=2`);if(C){const E=JSON.stringify(R?.data),k=(w=t.state.remote)===null||w===void 0?void 0:w.encrypt(E);if(!k)return le("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));A+=`&scheme=${M}&rpc=${lf(k)}`}if(!(!((x=t.state.platformManager)===null||x===void 0)&&x.isMetaMaskInstalled()))return le("[RCPMS: _write()] prevent deeplink until installation is completed."),r();Uc[_]?(le(`[RCPMS: _write()] redirect link for '${_}' socketConnected=${F} connect?${A}`),(N=t.state.platformManager)===null||N===void 0||N.openDeeplink(`${Bc}?${A}`,`${Dc}?${A}`,"_self")):!((H=t.state.remote)===null||H===void 0)&&H.isPaused()?(le(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${_}`),(z=t.state.platformManager)===null||z===void 0||z.openDeeplink(`${Bc}?redirect=true&${A}`,`${Dc}?redirect=true&${A}`,"_self")):le(`[RCPMS: _write()] method ${_} doesn't need redirect.`)}catch(P){return le("[RCPMS: _write()] error sending message",P),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()}))}class R4 extends ha.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(we.MESSAGE,this._onMessage)}_write(e,n,r){return de(this,void 0,void 0,(function*(){return I4(this,e,0,r)}))}_read(){}_onMessage(e){return(function(n,r){try{if(le("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof r?.data!="object")return;if(!r?.name)return void le("[RCPMS: onMessage()] ignore message without name",r);if(r?.name!==Lc.PROVIDER)return void le(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(pe.isBuffer(r)){const i=pe.from(r);n.push(i)}else n.push(r)}catch(i){le(`[RCPMS: onMessage()] ignore message error err=${i}`)}})(this,e)}start(){}}let Kw=1;const ES=t=>new Promise((e=>{setTimeout((()=>{e(!0)}),t)})),O4=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:s,sdk:o,remoteConnection:a,debug:c})=>de(void 0,void 0,void 0,(function*(){var l,u;const f=(({name:U,remoteConnection:V})=>{if(!V||!V?.getConnector())throw new Error("Missing remote connection parameter");return new R4({name:U,remote:V?.getConnector(),deeplinkProtocol:V?.state.deeplinkProtocol,platformManager:V?.getPlatformManager()})})({name:Lc.INPAGE,target:Lc.CONTENT_SCRIPT,remoteConnection:a}),d=i.getPlatformType(),h=o.options.dappMetadata,g=`Sdk/Javascript SdkVersion/${ao.version} Platform/${d} dApp/${(l=h.url)!==null&&l!==void 0?l:h.name} dAppTitle/${h.name}`;let p=null,y=null;const m=(u=o.options.storage)===null||u===void 0?void 0:u.storageManager;if(m){try{const U=yield m.getCachedAccounts();U.length>0&&(p=U[0])}catch(U){console.error(`[initializeMobileProvider] failed to get cached addresses: ${U}`)}try{const U=yield m.getCachedChainId();U&&(y=U)}catch(U){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${U}`)}}le(`[initializeMobileProvider] cachedAccountAddress: ${p}, cachedChainId: ${y}`);const b=!(!n||d===Yt.NonBrowser||d===Yt.ReactNative),w=vr.init({shouldSetOnWindow:b,connectionStream:f,shouldShimWeb3:r,sdkInstance:o});let x=!1;const N=U=>{x=U},H=()=>x,z=(U,V,L,B)=>de(void 0,void 0,void 0,(function*(){var M,_,R,j,v,S,C,P,A;const E=vr.getProvider();if(x){E.emit("display_uri",a?.state.qrcodeLink||""),a?.showActiveModal();let O=H();for(;O;){const $=H(),Q=a?.isAuthorized();O=$&&!Q,le(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${$} authorized: ${Q}`),yield ES(1e3)}return le("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),L(...V)}const k=i.isMetaMaskInstalled(),I=a?.isConnected();let D=null,T=null,K=null;if(D=(M=E.getSelectedAddress())!==null&&M!==void 0?M:p,K=E.getChainId()||y,D&&m&&D!==p&&m.persistAccounts([D]).catch((O=>{console.error(`[initializeMobileProvider] failed to persist account: ${O}`)})),K&&(y=K,m&&m.persistChainId(K).catch((O=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${O}`)}))),le("[initializeMobileProvider: sendRequest()]",{selectedAddress:D,chainId:K}),B&&le(`[initializeMobileProvider: sendRequest()] method=${U} ongoing=${x} selectedAddress=${D} isInstalled=${k} checkInstallationOnAllCalls=${t} socketConnected=${I}`),D&&U.toLowerCase()===xe.ETH_ACCOUNTS.toLowerCase())return[D];if(K&&U.toLowerCase()===xe.ETH_CHAINID.toLowerCase())return K;const q=[xe.ETH_REQUESTACCOUNTS,xe.WALLET_REQUESTPERMISSIONS,xe.METAMASK_CONNECTSIGN,xe.METAMASK_CONNECTWITH],Z=!Uc[U],oe=(_=o.options.readonlyRPCMap)===null||_===void 0?void 0:_[K];if(oe&&Z)try{const O=(R=V?.[0])===null||R===void 0?void 0:R.params,$=yield(({rpcEndpoint:Q,method:ne,sdkInfo:J,params:W})=>de(void 0,void 0,void 0,(function*(){const X=JSON.stringify({jsonrpc:"2.0",method:ne,params:W,id:(Kw+=1,Kw)}),re={Accept:"application/json","Content-Type":"application/json"};let ie;Q.includes("infura")&&(re["Metamask-Sdk-Info"]=J);try{ie=yield BA(Q,{method:"POST",headers:re,body:X})}catch(ae){throw ae instanceof Error?new Error(`Failed to fetch from RPC: ${ae.message}`):new Error(`Failed to fetch from RPC: ${ae}`)}if(!ie.ok)throw new Error(`Server responded with a status of ${ie.status}`);return(yield ie.json()).result})))({rpcEndpoint:oe,sdkInfo:g,method:U,params:O||[]});return B&&le(`initializeProvider::ReadOnlyRPCResponse ${$}`),$}catch(O){console.warn(`[initializeMobileProvider: sendRequest()] method=${U} readOnlyRPCRequest failed:`,O)}if((!k||k&&!I)&&U!==xe.METAMASK_GETPROVIDERSTATE){const O=((j=V?.[0])===null||j===void 0?void 0:j.params)||[];if(q.indexOf(U)!==-1||t){N(!0);const $=U===xe.METAMASK_CONNECTWITH,Q=`${Date.now()}`;try{yield s.start({wait:!1,connectWith:$?{method:U,id:Q,params:O}:void 0}),yield new Promise(((ne,J)=>{a?.isAuthorized()&&(le("[initializeMobileProvider: sendRequest()] already authorized"),ne(!0)),a?.getConnector().once(we.AUTHORIZED,(()=>{ne(!0)})),o.once(we.PROVIDER_UPDATE,(W=>{le(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${W}`),W===jr.EXTENSION?J(we.PROVIDER_UPDATE):J(new Error("Connection Terminated"))}))}))}catch(ne){if(jr.EXTENSION===ne){if(le(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${U} on the active provider`),U.toLowerCase()===xe.METAMASK_CONNECTSIGN.toLowerCase()){const J=yield(v=o.getProvider())===null||v===void 0?void 0:v.request({method:xe.ETH_REQUESTACCOUNTS,params:[]});if(!J.length)throw new Error("SDK state invalid -- undefined accounts");const W=yield(S=o.getProvider())===null||S===void 0?void 0:S.request({method:xe.PERSONAL_SIGN,params:[O[0],J[0]]});return o.emit(Cn.ConnectWithResponse,W),W}if(U.toLowerCase()===xe.METAMASK_CONNECTWITH.toLowerCase()){const[J]=O,W=yield(({method:X,sdk:re,params:ie})=>de(void 0,void 0,void 0,(function*(){var ae,he,ue,ge;if(!re.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");le("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",X,ie);const se=yield(ae=re.getProvider())===null||ae===void 0?void 0:ae.request({method:xe.ETH_REQUESTACCOUNTS,params:[]});if(!se.length)throw new Error("SDK state invalid -- undefined accounts");if(X?.toLowerCase()===xe.PERSONAL_SIGN.toLowerCase()){const Y={method:X,params:[ie[0],se[0]]};return yield(he=re.getProvider())===null||he===void 0?void 0:he.request(Y)}if(X?.toLowerCase()===xe.ETH_SENDTRANSACTION.toLowerCase()){const Y={method:X,params:[Object.assign(Object.assign({},ie[0]),{from:se[0]})]};return yield(ue=re.getProvider())===null||ue===void 0?void 0:ue.request(Y)}return bS.includes(X.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${X} -- not handled by the extension -- call separately`),se):yield(ge=re.getProvider())===null||ge===void 0?void 0:ge.request({method:X,params:ie})})))({method:J.method,sdk:o,params:J.params});return o.emit(Cn.ConnectWithResponse,W),W}return le(`[initializeMobileProvider: sendRequest()] sending '${U}' on active provider`,O),yield(C=o.getProvider())===null||C===void 0?void 0:C.request({method:U,params:O})}throw ne===we.REJECTED?(a?.closeModal(),(P=o.getProvider())===null||P===void 0||P.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(le(`[initializeMobileProvider: sendRequest()] failed to start installer: ${ne}`),ne)}finally{N(!1)}if(U===xe.ETH_REQUESTACCOUNTS)return T=yield new Promise((ne=>{const J=setInterval((()=>{const{accounts:W}=E.getState();W&&(clearInterval(J),ne(W))}),100)})),le(`[initializeMobileProvider: sendRequest()] selectedAddress: ${D} --- SKIP rpc call`),T;if(U===xe.METAMASK_CONNECTWITH)try{let ne=0;const J=5,W=({resolve:ae,reject:he})=>{ne+=1;const ue=a?.getConnector().getRPCMethodTracker(),ge=ue?.[Q];return le(`TRACKER: update method ${Q}`,ge),ge?.result?(le("[initializeMobileProvider: sendRequest()] found result",ge.result),o.emit(Cn.ConnectWithResponse,ge.result),void ae(ge.result)):ge?.error?(le("[initializeMobileProvider: sendRequest()] found error",ge.error),void he(ge.error)):ne>=J?(le("[initializeMobileProvider: sendRequest()] max message count reached without result"),void he(new Error("Max message count reached without result"))):void le("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let X,re;const ie=yield new Promise(((ae,he)=>{const ue=a?.getConnector().getRPCMethodTracker();le(`TRACKER: method ${Q}`,ue),ue?.[Q].result?(le("[initializeMobileProvider: sendRequest()] found result",ue?.[Q].result),ae(ue?.[Q].result)):ue?.[Q].error&&(le("[initializeMobileProvider: sendRequest()] found error",ue?.[Q].error),he(ue?.[Q].error)),re=()=>W({resolve:ae,reject:he}),X=a?.getConnector().on(we.RPC_UPDATE,re)}));return re&&X?.off(we.RPC_UPDATE,re),le("TRACKER: result",ie),ie}catch(ne){throw le("[initializeMobileProvider: sendRequest()] error:",ne),ne}return V[0]&&typeof V[0]=="object"&&(V[0].params={__triggeredInstaller:!0,wrappedParams:V[0].params}),L(...V)}if(i.isSecure()&&Uc[U])return L(...V);if(o.isExtensionActive())return le(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${U}' to it`,V,O),yield(A=o.getProvider())===null||A===void 0?void 0:A.request({method:U,params:O});throw le(`[initializeMobileProvider: sendRequest()] method=${U} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const O=yield L(...V);if(le(`[initializeMobileProvider: sendRequest()] method=${U} rpcResponse`,O),U===xe.WALLET_REQUESTPERMISSIONS){const $=O.reduce(((Q,ne)=>{var J;if(ne.parentCapability==="eth_accounts"){const W=(J=ne.caveats.find((X=>X.type==="restrictReturnedAccounts")))===null||J===void 0?void 0:J.value;W&&Q.push(...W)}return Q}),[]);le("[initializeMobileProvider: sendRequest()] accountsToPersist:",$),$.length>0&&(E.handleAccountsChanged($,!1),m?.persistAccounts($))}return O}catch(O){throw console.error("[initializeMobileProvider: sendRequest()] error:",O),O}})),{request:G}=w;w.request=(...U)=>de(void 0,void 0,void 0,(function*(){return z(U?.[0].method,U,G,c)}));const{send:F}=w;return w.send=(...U)=>de(void 0,void 0,void 0,(function*(){return z(U?.[0],U,F,c)})),le("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),f.start(),w}));function N4(t){var e,n,r,i;return de(this,void 0,void 0,(function*(){const{options:s}=t,o={communicationLayerPreference:(e=s.communicationLayerPreference)!==null&&e!==void 0?e:Xs.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:s.checkInstallationOnAllCalls,injectProvider:(n=s.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=s.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(i=s.extensionOnly)===null||i===void 0||i,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},a=yield O4(o);t.activeProvider=a,(function(c){var l,u,f,d;(u=(l=c.remoteConnection)===null||l===void 0?void 0:l.getConnector())===null||u===void 0||u.on(Cn.ConnectionStatus,(h=>{c.emit(Cn.ConnectionStatus,h)})),(d=(f=c.remoteConnection)===null||f===void 0?void 0:f.getConnector())===null||d===void 0||d.on(Cn.ServiceStatus,(h=>{c.emit(Cn.ServiceStatus,h)}))})(t)}))}const M4="sdk";class L4{constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=ua,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:M4,event:e,sdkVersion:ao.version},this.originatorInfo),{params:n});le(`[Analytics: send()] event: ${e}`,r),Si(r,this.serverURL).catch((i=>{le(`[Analytics: send()] error: ${i}`)}))}}const B4=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},D4=163400;function jw(t){var e,n,r;const{dappMetadata:i}=t,s=(function({url:u,name:f}){var d;const h=u+f,g=lf(h);if(!localStorage)return"";let p=(d=localStorage.getItem(g))!==null&&d!==void 0?d:"";if(!p){p=Xi();try{localStorage.setItem(g,p)}catch{return""}}return p})({url:(e=i?.url)!==null&&e!==void 0?e:"no_url",name:(n=i?.name)!==null&&n!==void 0?n:"no_name"}),o=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=o===Yt.DesktopWeb,c=o===Yt.MetaMaskMobileWebview;let l="N/A";return a?l="extension":c&&(l="mobile"),{id:s,from:l}}const Hl=(t,e,n)=>{if(Xc(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||e?.error;r&&r.code===4001?_t.analytics.track("sdk_action_rejected",{action:t}):_t.analytics.track("sdk_action_failed",{action:t})}else _t.analytics.track("sdk_action_succeeded",{action:t})},AS=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(i){var s,o;return de(this,void 0,void 0,(function*(){le("[wrapExtensionProvider()] Overwriting request method",i);const{method:a,params:c}=i,l=x4.includes(a.toLowerCase()),{id:u,from:f}=jw(e);if(l&&((s=e.analytics)===null||s===void 0||s.send({event:Ct.SDK_RPC_REQUEST,params:{method:a,from:f,id:u}})),Xc(a)&&_t.analytics.track("sdk_action_requested",{action:a}),a===xe.METAMASK_BATCH&&Array.isArray(c))return(({target:g,args:p,trackEvent:y,sdkInstance:m})=>de(void 0,void 0,void 0,(function*(){var b,w;if(p.method!=="metamask_batch")throw new Error("Invalid usage");const x=[],N=(b=p?.params)!==null&&b!==void 0?b:[];for(const G of N){const F=yield g?.request({method:G.method,params:G.params});x.push(F)}const{id:H,from:z}=jw(m);y&&((w=m.analytics)===null||w===void 0||w.send({event:Ct.SDK_RPC_REQUEST_DONE,params:{method:p.method,from:z,id:H}}));for(const G of x)Hl(p.method,G,null);return x})))({target:n,args:i,trackEvent:l,sdkInstance:e});if(a.toLowerCase()===xe.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(c))return(({target:g,params:p})=>de(void 0,void 0,void 0,(function*(){let y,m=null;try{const b=yield g.request({method:xe.ETH_REQUESTACCOUNTS,params:[]});if(!b.length)throw new Error("SDK state invalid -- undefined accounts");return y=yield g.request({method:xe.PERSONAL_SIGN,params:[p[0],b[0]]}),y}catch(b){throw m=b,b}finally{Hl(xe.PERSONAL_SIGN,y,m)}})))({target:n,params:c});if(a.toLowerCase()===xe.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(c))return(({target:g,params:p})=>de(void 0,void 0,void 0,(function*(){const[y]=p,m=y.method,b=y.params;let w,x=null;try{const N=yield g.request({method:xe.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(N)||!N.length)throw new Error("SDK state invalid -- undefined accounts");return m?.toLowerCase()===xe.PERSONAL_SIGN.toLowerCase()?(w=yield g.request({method:m,params:[b[0],N[0]]}),w):m?.toLowerCase()===xe.ETH_SENDTRANSACTION.toLowerCase()?(w=yield g.request({method:m,params:[Object.assign(Object.assign({},b[0]),{from:N[0]})]}),w):bS.includes(m.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${m} -- not handled by the extension -- call separately`),w=N,w):(w=yield g.request({method:m,params:b}),w)}catch(N){throw x=N,N}finally{Hl(m,w,x)}})))({target:n,params:c});let d,h=null;try{return d=yield n.request(i),d}catch(g){throw h=g,g}finally{l&&((o=e.analytics)===null||o===void 0||o.send({event:Ct.SDK_RPC_REQUEST_DONE,params:{method:a,from:f,id:u}})),Hl(a,d,h)}}))}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var uf;function U4({mustBeMetaMask:t,sdkInstance:e}){return de(this,void 0,void 0,(function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise(((r,i)=>{const s=setTimeout((()=>{i(new Error("eip6963RequestProvider timed out"))}),500);window.addEventListener(uf.Announce,(o=>{const a=o,{detail:{info:c,provider:l}={}}=a,{name:u,rdns:f,uuid:d}=c??{};C4.test(d)&&u.startsWith($w.NAME)&&$w.RDNS.includes(f)&&(clearTimeout(s),r(l))})),window.dispatchEvent(new Event(uf.Request))}));return AS({provider:n,sdkInstance:e})}catch{throw new Error("Provider not found")}}))}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(uf||(uf={}));const F4=t=>de(void 0,void 0,void 0,(function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r})),$4=t=>de(void 0,void 0,void 0,(function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{le("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}}));function H4(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n((function(f){f(u)}))).then(o,a)}c((r=r.apply(t,[])).next())}))}function K4(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return(function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(f){u=[6,f],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([c,l])}}}var Vw="INSTALLED",zw="NOT_INSTALLED",Gw="REGISTERED",qw="REGISTERING",Ww="RELOADING",Qw={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},Kl="REGISTRATION_IN_PROGRESS",Jw="FORWARDER_ID",j4=(function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,i=r===void 0?"https://fwd.metamask.io":r,s=n.forwarderMode,o=s===void 0?t.FORWARDER_MODE.INJECT:s;this.forwarderOrigin=i,this.forwarderMode=o,this.state=t.isMetaMaskInstalled()?Vw:zw;var a=t._detectBrowser();this.downloadUrl=a?Qw[a]:Qw.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),o===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(Kl)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return H4(this,0,void 0,(function(){return K4(this,(function(n){switch(n.label){case 0:switch(this.state){case Ww:return[3,1];case zw:return[3,2];case Vw:return[3,3];case qw:return[3,5];case Gw:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=Ww,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=qw,[4,t._register()];case 4:return n.sent(),this.state=Gw,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}}))}))},t.prototype.startOnboarding=function(){sessionStorage.setItem(Kl,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(Kl)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(Kl,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",Jw),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(Jw))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=vS.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t})();function V4(t,{wait:e=!1}){return de(this,void 0,void 0,(function*(){return le(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield ES(1e3)),yield t.checkInstallation()}))}class z4{constructor({remote:e,preferDesktop:n,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return(function(){return de(this,void 0,void 0,(function*(){le("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new j4().startOnboarding()}))})()}redirectToProperInstall(){return de(this,void 0,void 0,(function*(){return(function(e){var n,r;return de(this,void 0,void 0,(function*(){const{state:i}=e,s=(n=i.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(le(`[MetamaskInstaller: redirectToProperInstall()] platform=${s}`),s===Yt.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield(r=i.remote)===null||r===void 0?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(o){throw i.isInstalling=!1,o}return!0}))})(this)}))}checkInstallation(){return de(this,void 0,void 0,(function*(){return(function(e){var n;return de(this,void 0,void 0,(function*(){const{state:r}=e,i=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return le(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())}))})(this)}))}start({wait:e=!1,connectWith:n}){return de(this,void 0,void 0,(function*(){this.state.connectWith=n,le(`[MetaMaskInstaller: start()] wait=${e}`,n),yield V4(this,{wait:e})}))}}class _S{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return de(this,void 0,void 0,(function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then((function(){return C5}));console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}}))}renderInstallModal(e){var n;return de(this,void 0,void 0,(function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",(({detail:{shouldTerminate:i}})=>e.onClose(i))),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",(i=>{var s;return(s=e.onAnalyticsEvent)===null||s===void 0?void 0:s.call(e,i.detail)})),e.parentElement.appendChild(r)}))}renderSelectModal(e){var n;return de(this,void 0,void 0,(function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",(({detail:{shouldTerminate:i}})=>e.onClose(i))),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout((()=>this.updateQRCode(e.link)),100)}))}renderPendingModal(e){var n;return de(this,void 0,void 0,(function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",(({detail:{otpValue:i}})=>e.updateOTPValue(i))),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)}))}updateOTPValue(e){const n=()=>{var r;const i=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!i&&(i.otpCode=e,!0)};setTimeout((()=>{n()}),800)}updateQRCode(e){var n,r;const i=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(i)i.link=e;else{const s=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");s&&(s.link=e)}}unmount(){Object.entries(this.containers).forEach((([e,n])=>{var r;(r=n?.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0}))}}const G4=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:i,preferDesktop:s,onAnalyticsEvent:o})=>{let a=null,c=null;le("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),le(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),le(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),le(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),le(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const l=u=>{var f;le("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,c),c?.parentNode&&((f=c.parentNode)===null||f===void 0||f.removeChild(c)),c=null,a=null,u===!0&&r?.()};return{mount:u=>{if(le("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",c),c)return c.style.display="block",void(a==null||a.updateQRCode(u));a=new _S({debug:e,sdkVersion:ao.version}),c=document.createElement("div"),document.body.appendChild(c),window.extension?a.renderSelectModal({parentElement:c,connectWithExtension:()=>{l(),i?.()},onClose:l,link:t,preferDesktop:s!=null&&s}).catch((f=>{console.error(f)})):a.renderInstallModal({parentElement:c,preferDesktop:s!=null&&s,link:t,metaMaskInstaller:n,onClose:l,onAnalyticsEvent:o}).catch((f=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",f)}))},unmount:l}},q4=({onDisconnect:t,debug:e})=>{let n=null,r=null;const i=()=>{le("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n?.parentNode&&n.parentNode.removeChild(n),n=null,r=null},s=a=>{le("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},o=({displayOTP:a}={displayOTP:!0})=>{le("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new _S({debug:e,sdkVersion:ao.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:t,updateOTPValue:s,displayOTP:a}).catch((c=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",c)})))};return o(),{mount:o,unmount:i,updateOTPValue:s}};function SS(t,e){var n,r,i,s;t.connector||(le("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new QM({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:ao.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(le("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(s=(i=e.timer)===null||i===void 0?void 0:i.runBackgroundTimer)===null||s===void 0||s.call(i,(()=>!1),1e4)))}function Gp(t){t.listeners.forEach((({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)})),t.listeners=[]}function W4(t,e,n){return de(this,void 0,void 0,(function*(){const r=setTimeout((()=>{_t.analytics.track("sdk_connection_failed",{transport_type:"websocket"})}),6e4);return new Promise(((i,s)=>{if(!t.connector)return void s(new Error("No connector available"));le("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const o=`${t.useDeeplink?Dc:Bc}?${n}`;(function(a,c,l){var u,f,d,h;a.installModal=(f=(u=c.modals).install)===null||f===void 0?void 0:f.call(u,{link:l,preferDesktop:a.preferDesktop,installer:c.getMetaMaskInstaller(),terminate:()=>{le("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),c.sdk.terminate().catch((g=>{console.warn("[MMSDK] failed to terminate connection",g)}))},debug:a.developerMode,connectWithExtension:()=>{var g;return(g=c.connectWithExtensionProvider)===null||g===void 0||g.call(c),!1},onAnalyticsEvent:({event:g,params:p})=>{var y,m,b;const w=Object.assign(Object.assign({},p),{sdkVersion:c.sdk.getVersion(),dappId:(y=c.dappMetadata)===null||y===void 0?void 0:y.name,source:c._source,url:(m=c.dappMetadata)===null||m===void 0?void 0:m.url});(b=a.analytics)===null||b===void 0||b.send({event:g,params:w})}}),(h=(d=a.installModal)===null||d===void 0?void 0:d.mount)===null||h===void 0||h.call(d,l)})(t,e,o),e.sdk.once(we.PROVIDER_UPDATE,(a=>de(this,void 0,void 0,(function*(){if(le("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),a===jr.TERMINATE){const c={code:4001,message:"User rejected the request."};return clearTimeout(r),void s(c)}s(a)})))),t.connector.once(we.AUTHORIZED,(()=>{clearTimeout(r),i()})),t.connector.once(we.REJECTED,(()=>{clearTimeout(r),s(we.REJECTED)})),t.connector.once(we.CLIENTS_READY,(()=>de(this,void 0,void 0,(function*(){le("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))))}))}))}function CS(t,e){function n(r,i){var s;(s=t.connector)===null||s===void 0||s.on(r,i),t.listeners.push({event:r,handler:i})}t.connector&&(Gp(t),n(we.WALLET_INIT,(({accounts:r,chainId:i})=>de(this,void 0,void 0,(function*(){le(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${i}`);const s=vr.getProvider();s._setConnected();const o={accounts:r,chainId:i,isUnlocked:!1};s._initializeState(o),s.emit("chainChanged",i),s.emit("accountsChanged",r)})))),n(we.AUTHORIZED,(()=>de(this,void 0,void 0,(function*(){var r,i,s,o;try{le("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const a=vr.getProvider();a._setConnected(),(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!1),t.otpAnswer=void 0,t.authorized=!0,le("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})))),n(we.TERMINATE,(()=>{var r,i,s,o,a;(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(a=t.connector)===null||a===void 0||a.disconnect({terminate:!0}),t.authorized=!1,vr.getProvider().handleDisconnect({terminate:!0}),Gp(t),le("[RemoteConnection: setupListeners()] All listeners cleaned up")})))}function Q4(t,e,{initialCheck:n,connectWith:r}={}){var i,s,o,a,c,l,u,f,d,h,g,p,y,m,b,w,x,N,H;return de(this,void 0,void 0,(function*(){try{if(SS(t,e),!t.connector)throw new Error("no connector defined");CS(t);const z=vr.getProvider();t.authorized=!1,z.emit("connecting");const G=yield(i=t.connector)===null||i===void 0?void 0:i.originatorSessionConnect();le(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,G);let F=(s=G?.channelId)!==null&&s!==void 0?s:"",U=(a=(o=t.connector.getKeyInfo())===null||o===void 0?void 0:o.ecies.public)!==null&&a!==void 0?a:"",V=(l=(c=t.connector.getKeyInfo())===null||c===void 0?void 0:c.ecies.private)!==null&&l!==void 0?l:"";if(n&&!G)return Promise.resolve();if(!G&&!n){const I=yield t.connector.generateChannelIdConnect();F=(u=I.channelId)!==null&&u!==void 0?u:"",U=(f=I.pubKey)!==null&&f!==void 0?f:"",V=(d=I.privKey)!==null&&d!==void 0?d:"";const D=Date.now();(h=t.connector.state.storageManager)===null||h===void 0||h.persistChannelConfig({channelId:F,localKey:V,lastActive:D,validUntil:D+fa})}if(n&&G?.channelId)return!((g=t.connector)===null||g===void 0)&&g.isConnected()||(le(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,G),yield(p=t.connector)===null||p===void 0?void 0:p.connectToChannel({channelId:F})),Promise.resolve();G&&!(!((y=t.connector)===null||y===void 0)&&y.isConnected())&&(le("[RemoteConnection: startConnection()] reconnecting to channel",G),yield(m=t.connector)===null||m===void 0?void 0:m.connectToChannel({channelId:F}));const L=!((b=t.platformManager)===null||b===void 0)&&b.isSecure()?"":"&t=q",B=ao.version,{iconUrl:M,name:_,url:R,scheme:j}=e.dappMetadata||{},v=(w=t.platformManager)===null||w===void 0?void 0:w.getPlatformType();let S="N/A";typeof window<"u"&&window.location&&window.location.hostname?S=window.location.hostname:_!==void 0?S=_:R!==void 0&&(S=R);const C={url:R??"",title:_??"",icon:M,scheme:j??"",apiVersion:B,dappId:S||R||"N/A",anonId:e.anonId,platform:v??"",source:(x=e._source)!==null&&x!==void 0?x:""},P=lf(JSON.stringify(C));let A=`channelId=${F}&v=2&comm=${(N=t.communicationLayerPreference)!==null&&N!==void 0?N:""}&pubkey=${U}${L}&originatorInfo=${P}`;if(r){A+=`&rpc=${lf(JSON.stringify(r))}`;const I=t.connector.getRPCMethodTracker();I&&(I[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const E=encodeURI(A),k=`${t.useDeeplink?Dc:Bc}?${A}`;if(t.qrcodeLink=k,t.developerMode&&le(`[RemoteConnection: startConnection()] qrcodeLink=${E}`),z.emit("display_uri",k),_t.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(H=t.platformManager)===null||H===void 0?void 0:H.isSecure()){const I=setTimeout((()=>{_t.analytics.track("sdk_connection_failed",{transport_type:"websocket"})}),6e4);return yield(function(D,T){var K,q;return de(this,void 0,void 0,(function*(){const Z=`${Bc}?${T}`,oe=`${Dc}?${T}`;(q=(K=D.platformManager)===null||K===void 0?void 0:K.openDeeplink)===null||q===void 0||q.call(K,Z,oe,"_self")}))})(t,E),new Promise(((D,T)=>{var K,q,Z;if(!((K=t.connector)===null||K===void 0)&&K.isAuthorized())return clearTimeout(I),void D();(q=t.connector)===null||q===void 0||q.once(we.AUTHORIZED,(()=>{clearTimeout(I),D()})),(Z=t.connector)===null||Z===void 0||Z.once(we.REJECTED,(()=>{clearTimeout(I),T(we.REJECTED)}))}))}return W4(t,e,E)}catch(z){throw console.error("[startConnection] error",z),z}}))}class J4{constructor(e){var n,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=s,this.state.analytics=e.analytics,this.state.preferDesktop=(i=e.preferDesktop)!==null&&i!==void 0&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=G4),e.modals.otp||(e.modals.otp=q4)}startConnection(e){return de(this,void 0,void 0,(function*(){return Q4(this.state,this.options,e)}))}initRemoteCommunication({sdkInstance:e}){var n,r,i;return de(this,void 0,void 0,(function*(){const s=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const o={privateKey:s?.localKey};this.options.ecies=o}SS(this.state,this.options),yield(i=this.getConnector())===null||i===void 0?void 0:i.initFromDappStorage(),CS(this.state,this.options)}))}showActiveModal(){return(function(e){var n,r,i,s;e.authorized?le("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((s=(i=e.installModal).mount)===null||s===void 0||s.call(i,e.qrcodeLink||""))})(this.state)}closeModal(){var e,n,r,i;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(i=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,i;le("[RemoteConnection: disconnect()]",e),e?.terminate&&(vr.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(i=this.state.connector)===null||i===void 0||i.disconnect(e),(function(s){le("[RemoteConnection: cleanupConnector()] cleaning up connector"),s.connector&&(Gp(s),s.connector.disconnect({terminate:!0}).catch((o=>{le("[RemoteConnection: cleanupConnector()] error disconnecting connector",o)})))})(this.state)}}function Y4(t){var e,n,r,i,s,o,a,c,l,u,f;return de(this,void 0,void 0,(function*(){const{options:d}=t;if(d.logging=(e=d.logging)!==null&&e!==void 0?e:{},d.communicationLayerPreference=(n=d.communicationLayerPreference)!==null&&n!==void 0?n:Xs.SOCKET,d.enableDebug!==void 0&&(yn.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),d.enableAnalytics=(r=d.enableAnalytics)===null||r===void 0||r,d.injectProvider=(i=d.injectProvider)===null||i===void 0||i,d.shouldShimWeb3=(s=d.shouldShimWeb3)===null||s===void 0||s,d.extensionOnly=(o=d.extensionOnly)===null||o===void 0||o,d.useDeeplink=(a=d.useDeeplink)===null||a===void 0||a,d.storage=(c=d.storage)!==null&&c!==void 0?c:{enabled:!0},d.headless){yn("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const b=()=>{},w={install:()=>({mount:b,unmount:b})},x={installer:b};d.modals=w,d.ui=x}const h=((l=d.logging)===null||l===void 0?void 0:l.developerMode)===!0;t.debug=((u=d.logging)===null||u===void 0?void 0:u.sdk)||h,le("[MetaMaskSDK: performSDKInitialization()] options",t.options);const g=Object.assign({},d.logging);h&&(g.sdk=!0,g.eciesLayer=!0,g.keyExchangeLayer=!0,g.remoteLayer=!0,g.serviceLayer=!0,g.plaintext=!0),yield(function(b){var w;return de(this,void 0,void 0,(function*(){const{options:x}=b;b.platformManager=new Mc({useDeepLink:(w=x.useDeeplink)!==null&&w!==void 0&&w,preferredOpenLink:x.openDeeplink,debug:b.debug})}))})(t),yield(function(b){var w,x,N,H,z;return de(this,void 0,void 0,(function*(){const{options:G}=b,F=(w=b.platformManager)===null||w===void 0?void 0:w.getPlatformType();b.analytics=new L4({serverUrl:(x=G.communicationServerUrl)!==null&&x!==void 0?x:ua,enabled:G.enableAnalytics,originatorInfo:{url:(N=G.dappMetadata.url)!==null&&N!==void 0?N:"",title:(H=G.dappMetadata.name)!==null&&H!==void 0?H:"",dappId:b.getDappId(),platform:F??"",source:(z=G._source)!==null&&z!==void 0?z:"",anonId:""}})}))})(t),yield(function(b){var w,x,N;return de(this,void 0,void 0,(function*(){if(!b.options.enableAnalytics||!(!((w=b.platformManager)===null||w===void 0)&&w.isBrowser())&&!(!((x=b.platformManager)===null||x===void 0)&&x.isReactNative()))return;const H=b.getVersion(),z=b.getDappId(),G=yield b.getAnonId(),F=(N=b.platformManager)===null||N===void 0?void 0:N.getPlatformType(),U=b.options._source;_t.analytics.setGlobalProperty("sdk_version",H),_t.analytics.setGlobalProperty("dapp_id",z),_t.analytics.setGlobalProperty("anon_id",G),_t.analytics.setGlobalProperty("platform",F),_t.analytics.setGlobalProperty("integration_type",U),_t.analytics.enable(),_t.analytics.track("sdk_initialized",{})}))})(t),yield(function(b){var w;return de(this,void 0,void 0,(function*(){const{options:x}=b;((w=x.storage)===null||w===void 0?void 0:w.enabled)!==!0||x.storage.storageManager||(x.storage.storageManager=yield wS(x.storage))}))})(t),yield(function(b){return de(this,void 0,void 0,(function*(){const{options:w}=b,x=/^(http|https):\/\/[^\s]*$/;if(w.dappMetadata){w.dappMetadata.iconUrl&&!x.test(w.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),w.dappMetadata.iconUrl=void 0),w.dappMetadata.base64Icon&&w.dappMetadata.base64Icon.length>D4&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),w.dappMetadata.base64Icon=void 0),w.dappMetadata.url&&!x.test(w.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const N=B4();if(N&&!w.dappMetadata.iconUrl&&!w.dappMetadata.base64Icon){const H=`${window.location.protocol}//${window.location.host}${N}`;w.dappMetadata.iconUrl=H}}b.dappMetadata=w.dappMetadata}))})(t),yield F4(t),yield $4(t);const{metamaskBrowserExtension:p,preferExtension:y,shouldReturn:m}=yield(function(b){var w,x,N,H;return de(this,void 0,void 0,(function*(){const{options:z}=b;let G,F=!1,U=!1;if(typeof window<"u"&&window.ethereum&&!(!((w=b.platformManager)===null||w===void 0)&&w.isMetaMaskMobileWebView())){F=localStorage.getItem(cf)==="extension";try{G=yield U4({mustBeMetaMask:!0,sdkInstance:b}),window.extension=G,G.on(xr.CHAIN_CHANGED,(V=>{le(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${V}`),b.sdkProvider&&b.getMobileProvider().emit(xr.CHAIN_CHANGED,V)})),G.on(xr.ACCOUNTS_CHANGED,(V=>de(this,void 0,void 0,(function*(){var L;le(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${V}`);const B=!!b.sdkProvider,M=!!b.extensionActive;if(B&&b.getMobileProvider().emit(xr.ACCOUNTS_CHANGED,V),M&&V?.length===0&&(yield(L=b.getProvider())===null||L===void 0?void 0:L.request({method:xe.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield b.terminate()}catch(_){le("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",_)}})))),G.on(xr.DISCONNECT,(V=>{le(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${V}`),b.sdkProvider&&b.getMobileProvider().emit(xr.DISCONNECT,V)})),G.on(xr.CONNECT,(V=>{le(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${V}`),b.sdkProvider&&b.getMobileProvider().emit(xr.CONNECT,V)})),G.on(xr.CONNECTED,(V=>{le("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",V),b.sdkProvider&&b.getMobileProvider().emit(xr.CONNECTED,V)}))}catch{window.extension=void 0}}else!((x=b.platformManager)===null||x===void 0)&&x.isMetaMaskMobileWebView()&&((N=b.analytics)===null||N===void 0||N.send({event:Ct.SDK_USE_INAPP_BROWSER}),b.activeProvider=AS({provider:window.ethereum,sdkInstance:b}),b._initialized=!0,U=!0);return G&&z.extensionOnly&&(le("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(H=b.analytics)===null||H===void 0||H.send({event:Ct.SDK_USE_EXTENSION}),b.activeProvider=G,b.extensionActive=!0,b.extension=G,b._initialized=!0,U=!0),{preferExtension:F,shouldReturn:U,metamaskBrowserExtension:G}}))})(t);if(m)le("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield(function(b,w){var x,N,H,z,G;return de(this,void 0,void 0,(function*(){const{options:F}=b,U=Object.assign({},F.logging);b.remoteConnection=new J4({anonId:yield b.getAnonId(),preferDesktop:(x=F.preferDesktop)!==null&&x!==void 0&&x,communicationLayerPreference:(N=F.communicationLayerPreference)!==null&&N!==void 0?N:Xs.SOCKET,analytics:b.analytics,dappMetadata:F.dappMetadata,_source:F._source,enableAnalytics:(H=F.enableAnalytics)===null||H===void 0||H,timer:F.timer,sdk:b,platformManager:b.platformManager,transports:F.transports,communicationServerUrl:F.communicationServerUrl,storage:(z=F.storage)!==null&&z!==void 0?z:{enabled:!0},getMetaMaskInstaller:()=>{if(!b.installer)throw new Error("Invalid SDK status -- installer not initialized");return b.installer},logging:U,connectWithExtensionProvider:w===void 0?void 0:()=>Hw(b),modals:Object.assign(Object.assign({},F.modals),{onPendingModalDisconnect:b.terminate.bind(b)})}),yield b.remoteConnection.initRemoteCommunication({sdkInstance:b}),b.installer=new z4({remote:b.remoteConnection,preferDesktop:(G=F.preferDesktop)!==null&&G!==void 0&&G,platformManager:b.platformManager,debug:b.debug})}))})(t,p),yield N4(t),yield(function(b,w){var x,N;return de(this,void 0,void 0,(function*(){const{options:H}=b;w?(le("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(x=b.analytics)===null||x===void 0||x.send({event:Ct.SDK_EXTENSION_UTILIZED}),Hw(b).catch((z=>{console.warn("Can't connect with MetaMask extension...",z),localStorage.removeItem(cf)}))):H.checkInstallationImmediately&&(!((N=b.platformManager)===null||N===void 0)&&N.isDesktopWeb()?(le("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),b.connect().catch((z=>{le(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${z}`)}))):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),b._initialized=!0}))})(t,y);try{yield(f=t.remoteConnection)===null||f===void 0?void 0:f.startConnection({initialCheck:!0})}catch(b){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",b)}t.emit(Cn.ProviderUpdate,jr.INITIALIZED)}}))}class Z4 extends LO{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:Fw,i18nOptions:{enabled:!1}}){var n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",yn.disable();const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||s)&&yn.enable("MM_SDK"),le("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((i=e.dappMetadata)===null||i===void 0)&&i.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=Fw),this.init().then((()=>{le("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)})).catch((o=>{console.error("[MetaMaskSDK: constructor()] error during initialization",o)}))}init(){return de(this,void 0,void 0,(function*(){return(function(e){var n;return de(this,void 0,void 0,(function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return le("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return le("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return le("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=Y4(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise}))})(this)}))}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return de(this,void 0,void 0,(function*(){return(function(e){return de(this,void 0,void 0,(function*(){if(e._initialized||(le("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),le(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:xe.ETH_REQUESTACCOUNTS,params:[]})}))})(this)}))}connectAndSign({msg:e}){return de(this,void 0,void 0,(function*(){return T4({instance:this,msg:e})}))}connectWith(e){return de(this,void 0,void 0,(function*(){return(function({instance:n,rpc:r}){return de(this,void 0,void 0,(function*(){if(n._initialized||(le("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),le(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:xe.METAMASK_CONNECTWITH,params:[r]})}))})({instance:this,rpc:e})}))}resume(){return(function(e){var n,r,i;return de(this,void 0,void 0,(function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return le("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((i=e.remoteConnection)===null||i===void 0||i.startConnection());le("[MetaMaskSDK: resume()] channel is ready")}))})(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return(function(e){var n,r,i;return de(this,void 0,void 0,(function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(P4&&(window.localStorage.removeItem(cf),window.localStorage.removeItem(zp),window.localStorage.removeItem(Vp)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:xe.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(s){le("[MetaMaskSDK: terminate()] error revoking permissions",s)}return e.options.extensionOnly?(e.emit(Cn.ProviderUpdate,jr.TERMINATE),void le("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(Cn.ProviderUpdate,jr.TERMINATE))}e.emit(Cn.ProviderUpdate,jr.TERMINATE),le(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(i=e.remoteConnection)===null||i===void 0||i.disconnect({terminate:!0,sendMessage:!0})}}))})(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return ao.version}getDappId(){var e,n,r,i;return typeof window>"u"||window.location===void 0?(i=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&i!==void 0?i:"N/A":window.location.hostname}getAnonId(){var e,n;return de(this,void 0,void 0,(function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():Xi(),this._anonId=r,r}))}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=Xi();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),Xi()}}getReactNativeAnonId(){return de(this,void 0,void 0,(function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const i=Xi();return yield n.setItem(e,i),i}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),Xi()}}))}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var X4=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return de(this,void 0,void 0,(function*(){const e=JSON.stringify(t);le(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(Ch,e)}))}getPersistedChannelConfig(){return de(this,void 0,void 0,(function*(){let t;try{if(le(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(Ch),le("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return le("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}}))}persistAccounts(t){return de(this,void 0,void 0,(function*(){le(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(Vp,e)}))}getCachedAccounts(){return de(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(Vp);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}}))}persistChainId(t){return de(this,void 0,void 0,(function*(){le(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(zp,t)}))}getCachedChainId(){return de(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(zp);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}}))}terminate(){return de(this,void 0,void 0,(function*(){le(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(Ch)}))}}});const e5="hydrated",t5=!1,n5=!0;var r5=Object.defineProperty,m0=new WeakMap,rs=t=>m0.get(t),y0=(t,e)=>m0.set(e.$lazyInstance$=t,e),Yw=(t,e)=>e in t,Ws=(t,e)=>(0,console.error)(t,e),xh=new Map,yu=new Map,xS="slot-fb{display:contents}slot-fb[hidden]{display:none}",td=typeof window<"u"?window:{},Fr=td.document||{head:{}},Ht={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},kS=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),qp=!1,Zw=[],PS=[],i5=(t,e)=>n=>{t.push(n),qp||(qp=!0,4&Ht.$flags$?v0(Wp):Ht.raf(Wp))},Xw=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Ws(n)}t.length=0},Wp=()=>{Xw(Zw),Xw(PS),(qp=Zw.length>0)&&Ht.raf(Wp)},v0=t=>(e=>Promise.resolve(e))().then(t),s5=i5(PS),eb={},w0=t=>(t=typeof t)=="object"||t==="function";function TS(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)r5(t,n,{get:e[n],enumerable:!0})})({},{err:()=>IS,map:()=>o5,ok:()=>Qp,unwrap:()=>a5,unwrapErr:()=>c5});var Qp=t=>({isOk:!0,isErr:!1,value:t}),IS=t=>({isOk:!1,isErr:!0,value:t});function o5(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then((r=>Qp(r))):Qp(n)}if(t.isErr){const n=t.value;return IS(n)}throw"should never get here"}var b0,a5=t=>{if(t.isOk)return t.value;throw t.value},c5=t=>{if(t.isErr)return t.value;throw t.value},fe=(t,e,...n)=>{let r=null,i=!1,s=!1;const o=[],a=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!w0(r))&&(r=String(r)),i&&s?o[o.length-1].$text$+=r:o.push(i?ff(null,r):r),s=i)};if(a(n),e){const l=e.className||e.class;l&&(e.class=typeof l!="object"?l:Object.keys(l).filter((u=>l[u])).join(" "))}if(typeof t=="function")return t(e===null?{}:e,o,u5);const c=ff(t,null);return c.$attrs$=e,o.length>0&&(c.$children$=o),c},ff=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),l5={},u5={forEach:(t,e)=>t.map(tb).forEach(e),map:(t,e)=>t.map(tb).map(e).map(f5)},tb=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),f5=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),fe(t.vtag,n,...t.vchildren||[])}const e=ff(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},nd=t=>rs(t).$hostElement$,ls=(t,e,n)=>{const r=nd(t);return{emit:i=>RS(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:i})}},RS=(t,e,n)=>{const r=Ht.ce(e,n);return t.dispatchEvent(r),r},nb=new WeakMap,d5=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const i=((s,o,a)=>{var c;const l=OS(o),u=yu.get(l);if(s=s.nodeType===11?s:Fr,u)if(typeof u=="string"){s=s.head||s;let f,d=nb.get(s);if(d||nb.set(s,d=new Set),!d.has(l)){{f=Fr.createElement("style"),f.innerHTML=u;const h=(c=Ht.$nonce$)!=null?c:TS(Fr);if(h!=null&&f.setAttribute("nonce",h),!(1&o.$flags$))if(s.nodeName==="HEAD"){const g=s.querySelectorAll("link[rel=preconnect]"),p=g.length>0?g[g.length-1].nextSibling:s.querySelector("style");s.insertBefore(f,p)}else if("host"in s)if(kS){const g=new CSSStyleSheet;g.replaceSync(u),s.adoptedStyleSheets=[g,...s.adoptedStyleSheets]}else{const g=s.querySelector("style");g?g.innerHTML=u+g.innerHTML:s.prepend(f)}else s.append(f);1&o.$flags$&&s.nodeName!=="HEAD"&&s.insertBefore(f,null)}4&o.$flags$&&(f.innerHTML+=xS),d&&d.add(l)}}else s.adoptedStyleSheets.includes(u)||(s.adoptedStyleSheets=[...s.adoptedStyleSheets,u]);return l})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h"))},OS=(t,e)=>"sc-"+t.$tagName$,rb=(t,e,n,r,i,s)=>{if(n!==r){let o=Yw(t,e),a=e.toLowerCase();if(e==="class"){const c=t.classList,l=ib(n),u=ib(r);c.remove(...l.filter((f=>f&&!u.includes(f)))),c.add(...u.filter((f=>f&&!l.includes(f))))}else if(e==="style"){for(const c in n)r&&r[c]!=null||(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)n&&r[c]===n[c]||(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(o||e[0]!=="o"||e[1]!=="n"){const c=w0(r);if((o||c&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const l=r??"";e==="list"?o=!1:n!=null&&t[e]==l||(typeof t.__lookupSetter__(e)=="function"?t[e]=l:t.setAttribute(e,l))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!o||4&s||i)&&!c&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):Yw(td,a)?a.slice(2):a[2]+e.slice(3),n||r){const c=e.endsWith(NS);e=e.replace(p5,""),n&&Ht.rel(t,e,n,c),r&&Ht.ael(t,e,r,c)}}},h5=/\s/,ib=t=>t?t.split(h5):[],NS="Capture",p5=new RegExp(NS+"$"),MS=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||eb,s=e.$attrs$||eb;for(const o of sb(Object.keys(i)))o in s||rb(r,o,i[o],void 0,n,e.$flags$);for(const o of sb(Object.keys(s)))rb(r,o,i[o],s[o],n,e.$flags$)};function sb(t){return t.includes("ref")?[...t.filter((e=>e!=="ref")),"ref"]:t}var Zn=!1,E0=(t,e,n,r)=>{const i=e.$children$[n];let s,o,a=0;if(i.$text$!==null)s=i.$elm$=Fr.createTextNode(i.$text$);else{if(Zn||(Zn=i.$tag$==="svg"),s=i.$elm$=Fr.createElementNS(Zn?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.$tag$),Zn&&i.$tag$==="foreignObject"&&(Zn=!1),MS(null,i,Zn),s.getRootNode().querySelector("body"),i.$children$)for(a=0;a<i.$children$.length;++a)o=E0(t,i,a),o&&s.appendChild(o);i.$tag$==="svg"?Zn=!1:s.tagName==="foreignObject"&&(Zn=!0)}return s["s-hn"]=b0,s},ob=(t,e,n,r,i,s)=>{let o,a=t;for(a.shadowRoot&&a.tagName===b0&&(a=a.shadowRoot);i<=s;++i)r[i]&&(o=E0(null,n,i),o&&(r[i].$elm$=o,vu(a,o,e)))},ab=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const s=i.$elm$;s&&s.remove()}}},jl=(t,e,n=!1)=>t.$tag$===e.$tag$,Ha=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,s=e.$children$,o=e.$tag$,a=e.$text$;a===null?(MS(t,e,Zn=o==="svg"||o!=="foreignObject"&&Zn),i!==null&&s!==null?((c,l,u,f,d=!1)=>{let h,g=0,p=0,y=l.length-1,m=l[0],b=l[y],w=f.length-1,x=f[0],N=f[w];for(;g<=y&&p<=w;)m==null?m=l[++g]:b==null?b=l[--y]:x==null?x=f[++p]:N==null?N=f[--w]:jl(m,x,d)?(Ha(m,x,d),m=l[++g],x=f[++p]):jl(b,N,d)?(Ha(b,N,d),b=l[--y],N=f[--w]):jl(m,N,d)?(Ha(m,N,d),vu(c,m.$elm$,b.$elm$.nextSibling),m=l[++g],N=f[--w]):jl(b,x,d)?(Ha(b,x,d),vu(c,b.$elm$,m.$elm$),b=l[--y],x=f[++p]):(h=E0(l&&l[p],u,p),x=f[++p],h&&vu(m.$elm$.parentNode,h,m.$elm$));g>y?ob(c,f[w+1]==null?null:f[w+1].$elm$,u,f,p,w):p>w&&ab(l,g,y)})(r,i,e,s,n):s!==null?(t.$text$!==null&&(r.textContent=""),ob(r,null,e,s,0,s.length-1)):!n&&n5&&i!==null&&ab(i,0,i.length-1),Zn&&o==="svg"&&(Zn=!1)):t.$text$!==a&&(r.data=a)},vu=(t,e,n)=>t?.insertBefore(e,n),g5=(t,e,n=!1)=>{const r=t.$hostElement$,i=t.$cmpMeta$,s=t.$vnode$||ff(null,null),o=(a=e)&&a.$tag$===l5?e:fe(null,null,e);var a;if(b0=r.tagName,n&&o.$attrs$)for(const c of Object.keys(o.$attrs$))r.hasAttribute(c)&&!["key","ref","style","class"].includes(c)&&(o.$attrs$[c]=r[c]);o.$tag$=null,o.$flags$|=4,t.$vnode$=o,o.$elm$=s.$elm$=r.shadowRoot||r,r["s-sc"],1&i.$flags$,Ha(s,o,n)},LS=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((n=>t.$onRenderResolve$=n)))},A0=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(LS(t,t.$ancestorComponent$),s5((()=>m5(t,e))))),m5=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return y5(void 0,(()=>w5(t,r,e)))},y5=(t,e)=>v5(t)?t.then(e).catch((n=>{console.error(n),e()})):e(),v5=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",w5=async(t,e,n)=>{var r;const i=t.$hostElement$;t.$cmpMeta$.$tagName$;const s=i["s-rc"];n&&d5(t),t.$cmpMeta$.$tagName$,b5(t,e,i,n),s&&(s.map((o=>o())),i["s-rc"]=void 0);{const o=(r=i["s-p"])!=null?r:[],a=()=>E5(t);o.length===0?a():(Promise.all(o).then(a),t.$flags$|=4,o.length=0)}},b5=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,g5(t,e,r)}catch(i){Ws(i,t.$hostElement$)}return null},E5=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,DS(e),_0(r,"componentDidLoad"),t.$onReadyResolve$(e),i||BS()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&v0((()=>A0(t,!1))),t.$flags$&=-517},BS=t=>{DS(Fr.documentElement),v0((()=>RS(td,"appload",{detail:{namespace:"sdk-install-modal-web"}})))},_0=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){Ws(r)}},DS=t=>{var e;return t.classList.add((e=e5)!=null?e:"hydrated")},A5=(t,e,n,r)=>{const i=rs(t);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const s=i.$hostElement$,o=i.$instanceValues$.get(e),a=i.$flags$,c=i.$lazyInstance$;var l,u;l=n,u=r.$members$[e][0],n=l==null||w0(l)?l:4&u?l!=="false"&&(l===""||!!l):1&u?String(l):l;const f=Number.isNaN(o)&&Number.isNaN(n);if((!(8&a)||o===void 0)&&n!==o&&!f&&(i.$instanceValues$.set(e,n),c)){if(r.$watchers$&&128&a){const d=r.$watchers$[e];d&&d.map((h=>{try{c[h](n,o,e)}catch(g){Ws(g,s)}}))}(18&a)==2&&A0(i,!1)}},US=(t,e,n)=>{var r,i;const s=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((r=e.$members$)!=null?r:{});if(o.map((([a,[c]])=>{(31&c||2&n&&32&c)&&Object.defineProperty(s,a,{get(){return l=a,rs(this).$instanceValues$.get(l);var l},set(l){A5(this,a,l,e)},configurable:!0,enumerable:!0})})),1&n){const a=new Map;s.attributeChangedCallback=function(c,l,u){Ht.jmp((()=>{var f;const d=a.get(c);if(this.hasOwnProperty(d))u=this[d],delete this[d];else{if(s.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==u)return;if(d==null){const h=rs(this),g=h?.$flags$;if(g&&!(8&g)&&128&g&&u!==l){const p=h.$lazyInstance$,y=(f=e.$watchers$)==null?void 0:f[c];y?.forEach((m=>{p[m]!=null&&p[m].call(p,u,l,c)}))}return}}this[d]=(u!==null||typeof this[d]!="boolean")&&u}))},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...o.filter((([c,l])=>15&l[0])).map((([c,l])=>{const u=l[1]||c;return a.set(u,c),u}))]))}}return t},_5=async(t,e,n,r)=>{let i;if((32&e.$flags$)==0){if(e.$flags$|=32,n.$lazyBundleId$){const a=((c,l,u)=>{const f=c.$tagName$.replace(/-/g,"_"),d=c.$lazyBundleId$;if(!d)return;const h=xh.get(d);if(h)return h[f];{const g=p=>(xh.set(d,p),p[f]);if(d==="mm-install-modal_3")return Promise.resolve().then((function(){return U5})).then(g,Ws)}return Ma(()=>import(`./${d}.entry.js`),[]).then((g=>(xh.set(d,g),g[f])),Ws)})(n);if(a&&"then"in a?i=await a:i=a,!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,US(i,n,2),i.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new i(e)}catch(c){Ws(c)}e.$flags$&=-9,e.$flags$|=128,Jp(e.$lazyInstance$)}else{i=t.constructor;const a=t.localName;customElements.whenDefined(a).then((()=>e.$flags$|=128))}if(i&&i.style){let a;typeof i.style=="string"&&(a=i.style);const c=OS(n);yu.has(c)||(n.$tagName$,((l,u,f)=>{let d=yu.get(l);kS&&f?(d=d||new CSSStyleSheet,typeof d=="string"?d=u:d.replaceSync(u)):d=u,yu.set(l,d)})(c,a,!!(1&n.$flags$)))}}const s=e.$ancestorComponent$,o=()=>A0(e,!0);s&&s["s-rc"]?s["s-rc"].push(o):o()},Jp=t=>{_0(t,"connectedCallback")},cb=t=>{_0(t,"disconnectedCallback")},S5=(t,e={})=>{var n;const r=[],i=e.exclude||[],s=td.customElements,o=Fr.head,a=o.querySelector("meta[charset]"),c=Fr.createElement("style"),l=[];let u,f=!0;Object.assign(Ht,e),Ht.$resourcesUrl$=new URL(e.resourcesUrl||"./",Fr.baseURI).href;let d=!1;if(t.map((h=>{h[1].map((g=>{var p;const y={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};4&y.$flags$&&(d=!0),y.$members$=g[2],y.$watchers$=(p=g[4])!=null?p:{};const m=y.$tagName$,b=class extends HTMLElement{constructor(w){if(super(w),this.hasRegisteredEventListeners=!1,((x,N)=>{const H={$flags$:0,$hostElement$:x,$cmpMeta$:N,$instanceValues$:new Map};H.$onReadyPromise$=new Promise((z=>H.$onReadyResolve$=z)),x["s-p"]=[],x["s-rc"]=[],m0.set(x,H)})(w=this,y),1&y.$flags$)if(w.shadowRoot){if(w.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${y.$tagName$}! Mode is set to ${w.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else w.attachShadow({mode:"open"})}connectedCallback(){rs(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),f?l.push(this):Ht.jmp((()=>(w=>{if((1&Ht.$flags$)==0){const x=rs(w),N=x.$cmpMeta$;if(N.$tagName$,1&x.$flags$)x?.$lazyInstance$?Jp(x.$lazyInstance$):x?.$onReadyPromise$&&x.$onReadyPromise$.then((()=>Jp(x.$lazyInstance$)));else{x.$flags$|=1;{let H=w;for(;H=H.parentNode||H.host;)if(H["s-p"]){LS(x,x.$ancestorComponent$=H);break}}N.$members$&&Object.entries(N.$members$).map((([H,[z]])=>{if(31&z&&w.hasOwnProperty(H)){const G=w[H];delete w[H],w[H]=G}})),_5(w,x,N)}}})(this)))}disconnectedCallback(){Ht.jmp((()=>(async w=>{if((1&Ht.$flags$)==0){const x=rs(w);x?.$lazyInstance$?cb(x.$lazyInstance$):x?.$onReadyPromise$&&x.$onReadyPromise$.then((()=>cb(x.$lazyInstance$)))}})(this)))}componentOnReady(){return rs(this).$onReadyPromise$}};y.$lazyBundleId$=h[0],i.includes(m)||s.get(m)||(r.push(m),s.define(m,US(b,y,1)))}))})),r.length>0&&(d&&(c.textContent+=xS),c.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",c.innerHTML.length)){c.setAttribute("data-styles","");const h=(n=Ht.$nonce$)!=null?n:TS(Fr);h!=null&&c.setAttribute("nonce",h),o.insertBefore(c,a?a.nextSibling:o.firstChild)}f=!1,l.length?l.map((h=>h.connectedCallback())):Ht.jmp((()=>u=setTimeout(BS,30)))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var C5=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,S5([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>Ht.$nonce$=t});const x5={fontFamily:"Roboto, sans-serif"},S0=({className:t},e)=>fe("div",{style:x5,class:t},e),kh=({Icon:t,text:e})=>fe("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},fe("div",{class:"flexItem1"},fe(t,null)),fe("div",{class:"flexItem11"},fe("span",{style:{lineHeight:"2",color:"black"}},e))),k5=()=>fe("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),fe("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),P5=()=>fe("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),T5=()=>fe("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),I5=()=>fe("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),fe("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),fe("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function C0({version:t}){return fe("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const x0=()=>fe("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("rect",{width:"16",height:"16",fill:"white"}),fe("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),k0=()=>fe("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},fe("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function Cs(t,e){return t.toString(2).padStart(e,"0")}function lb(t,e){const n=t%e;return n>=0?n:e+n}function Dn(t,e){return new Array(t).fill(e)}function ub(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function fb(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function db(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map((n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r}))},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map((n=>{if((function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)})(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]}))}}}class Ln{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,i=new Array(r);let s;for(const o of n){const a=o.split("").map((c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)}));if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new Ln({height:r,width:s},i)}constructor(e,n){const{height:r,width:i}=Ln.size(e);this.data=n||Array.from({length:r},(()=>Dn(i,void 0))),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=lb(e.x,this.width),e.y=lb(e.y,this.height),e}rect(e,n,r){const{x:i,y:s}=this.xy(e),{height:o,width:a}=Ln.size(n,this.size({x:i,y:s}));for(let c=0;c<o;c++)for(let l=0;l<a;l++)this.data[s+c][i+l]=typeof r=="function"?r({x:l,y:c},this.data[s+c][i+l]):r;return this}rectRead(e,n,r){return this.rect(e,n,((i,s)=>(r(i,s),s)))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,s=Dn(e,n),o=Array.from({length:e},(()=>Dn(i,n)));return new Ln({height:r,width:i},[...o,...this.data.map((a=>[...s,...a,...s])),...o])}embed(e,n){return this.rect(e,n.size(),(({x:r,y:i})=>n.data[i][r]))}rectSlice(e,n=this.size()){const r=new Ln(Ln.size(n,this.size(this.xy(e))));return this.rect(e,n,(({x:i,y:s},o)=>r.data[s][i]=o)),r}inverse(){const{height:e,width:n}=this;return new Ln({height:n,width:e}).rect({x:0,y:0},1/0,(({x:r,y:i})=>this.data[r][i]))}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new Ln({height:e*n,width:e*r}).rect({x:0,y:0},1/0,(({x:i,y:s})=>this.data[Math.floor(s/e)][Math.floor(i/e)]))}clone(){return new Ln(this.size()).rect({x:0,y:0},this.size(),(({x:e,y:n})=>this.data[n][e]))}assertDrawn(){this.rectRead(0,1/0,((e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)}))}toString(){return this.data.map((e=>e.map((n=>n===void 0?"?":n?"X":" ")).join(""))).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<n;o++){const a=r[s][o],c=s+1>=e||r[s+1][o];a||c?!a&&c?i+="":a&&!c?i+="":a&&c&&(i+=" "):i+=""}i+=`
`}return i}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map((i=>i.map((s=>s?r:n)).join(""))).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,(({x:n,y:r},i)=>{i&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)})),e+="</svg>",e}toGIF(){const e=a=>[255&a,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,((a,c)=>r.push(+(c===!0))));const i=126,s=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...Dn(381,0),44,0,0,0,0,...n,0,7],o=Math.floor(r.length/i);for(let a=0;a<o;a++)s.push(127,128,...r.slice(i*a,i*(a+1)).map((c=>+c)));return s.push(r.length%i+1,128,...r.slice(o*i).map((a=>+a))),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let s=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){const c=this.data[o][a]?0:255;i[s++]=c,i[s++]=c,i[s++]=c,e||(i[s++]=255)}return{height:n,width:r,data:i}}}const hb=["low","medium","quartile","high"],pb=["numeric","alphanumeric","byte","kanji","eci"],R5=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],O5={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},N5={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},Xt={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=Xt.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);const s=[6];for(let o=1;o<r;o++)s.push(e-(r-o)*i);return s.push(e),s},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=Xt.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^Xt.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:db("0123456789"),alphanumerc:db("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][Xt.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=R5[t-1],r=O5[e][t-1],i=N5[e][t-1],s=Math.floor(n/i)-r,o=i-n%i;return{words:r,numBlocks:i,shortBlocks:o,blockLen:s,capacity:8*(n-r*i),total:(r+s)*i+i-o}}},Yp=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],Ee={tables:(t=>{const e=Dn(256,0),n=Dn(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,256&i&&(i^=285);return{exp:e,log:n}})(),exp:t=>Ee.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return Ee.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:Ee.tables.exp[(Ee.tables.log[t]+Ee.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>Ee.tables.exp[Ee.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return Ee.tables.exp[255-Ee.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=Dn(t+1,0);return n[0]=e,Ee.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[Ee.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=Dn(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=Ee.add(n[r+i],Ee.mul(t[r],e[i]));return Ee.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=Dn(t.length,0);for(let r=0;r<t.length;r++)n[r]=Ee.mul(t[r],e);return Ee.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=Dn(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=Ee.mul(t[i],n);return Ee.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=Dn(r.length,0),s=r.length-n.length,o=r.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<r.length;a++)i[a]=Ee.add(n[a-s],r[a]);return Ee.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(n[r+s]=Ee.add(n[r+s],Ee.mul(e[s],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=Ee.mulPoly(e,[1,Ee.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return Ee.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=Ee.add(Ee.mul(e,n),t[r]);return n},euclidian(t,e,n){Ee.degree(t)<Ee.degree(e)&&([t,e]=[e,t]);let r=t,i=e,s=[0],o=[1];for(;2*Ee.degree(i)>=n;){let l=r,u=s;if(r=i,s=o,r[0]===0)throw new Error("rLast[0] === 0");i=l;let f=[0];const d=Ee.inv(r[0]);for(;Ee.degree(i)>=Ee.degree(r)&&i[0]!==0;){const h=Ee.degree(i)-Ee.degree(r),g=Ee.mul(i[0],d);f=Ee.addPoly(f,Ee.monomial(h,g)),i=Ee.addPoly(i,Ee.mulPolyMonomial(r,h,g))}if(f=Ee.mulPoly(f,s),o=Ee.addPoly(f,u),Ee.degree(i)>=Ee.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=Ee.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=Ee.inv(a);return[Ee.mulPolyScalar(o,c),Ee.mulPolyScalar(i,c)]}};function M5(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:s,total:o}=Xt.capacity(t,e),a=(c=n,{encode(l){const u=Ee.divisorPoly(c),f=Array.from(l);return f.push(...u.slice(0,-1).fill(0)),Uint8Array.from(Ee.remainderPoly(f,u))},decode(l){const u=l.slice(),f=Ee.polynomial(Array.from(l));let d=Dn(c,0),h=!1;for(let w=0;w<c;w++){const x=Ee.evalPoly(f,Ee.exp(w));d[d.length-1-w]=x,x!==0&&(h=!0)}if(!h)return u;d=Ee.polynomial(d);const g=Ee.monomial(c,1),[p,y]=Ee.euclidian(g,d,c),m=Dn(Ee.degree(p),0);let b=0;for(let w=1;w<256&&b<m.length;w++)Ee.evalPoly(p,w)===0&&(m[b++]=Ee.inv(w));if(b!==m.length)throw new Error("RS.decode: wrong errors number");for(let w=0;w<m.length;w++){const x=u.length-1-Ee.log(m[w]);if(x<0)throw new Error("RS.decode: wrong error location");const N=Ee.inv(m[w]);let H=1;for(let z=0;z<m.length;z++)w!==z&&(H=Ee.mul(H,Ee.add(1,Ee.mul(m[z],N))));u[x]=Ee.add(u[x],Ee.mul(Ee.evalPoly(y,N),Ee.inv(H)))}return u}});var c;return{encode(l){const u=[],f=[];for(let p=0;p<i;p++){const y=s+(p<r?0:1);u.push(l.subarray(0,y)),f.push(a.encode(l.subarray(0,y))),l=l.subarray(y)}const d=ub(...u),h=ub(...f),g=new Uint8Array(d.length+h.length);return g.set(d),g.set(h,d.length),g},decode(l){if(l.length!==o)throw new Error(`interleave.decode: len(data)=${l.length}, total=${o}`);const u=[];for(let h=0;h<i;h++){const g=h<r;u.push(new Uint8Array(n+s+(g?0:1)))}let f=0;for(let h=0;h<s;h++)for(let g=0;g<i;g++)u[g][h]=l[f++];for(let h=r;h<i;h++)u[h][s]=l[f++];for(let h=s;h<s+n;h++)for(let g=0;g<i;g++){const p=g<r;u[g][h+(p?0:1)]=l[f++]}const d=[];for(const h of u)d.push(...Array.from(a.decode(h)).slice(0,-n));return Uint8Array.from(d)}}}function gb(t,e,n,r){let i="",s=n.length;if(r==="numeric"){const f=Xt.alphabet.numeric.decode(n.split("")),d=f.length;for(let h=0;h<d-2;h+=3)i+=Cs(100*f[h]+10*f[h+1]+f[h+2],10);d%3==1?i+=Cs(f[d-1],4):d%3==2&&(i+=Cs(10*f[d-2]+f[d-1],7))}else if(r==="alphanumeric"){const f=Xt.alphabet.alphanumerc.decode(n.split("")),d=f.length;for(let h=0;h<d-1;h+=2)i+=Cs(45*f[h]+f[h+1],11);d%2==1&&(i+=Cs(f[d-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const f=(function(d){if(typeof d!="string")throw new Error("utf8ToBytes expected string, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))})(n);s=f.length,i=Array.from(f).map((d=>Cs(d,8))).join("")}}const{capacity:o}=Xt.capacity(t,e),a=Cs(s,Xt.lengthBits(t,r));let c=Xt.modeBits[r]+a+i;if(c.length>o)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,o-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let f=0;c.length!==o;f++)c+=l[f%16];const u=Uint8Array.from(c.match(/(.{8})/g).map((f=>+`0b${f}`)));return M5(t,e).encode(u)}function mb(t,e,n,r,i=!1){const s=(function(c,l,u,f=!1){const d=Xt.size.encode(c);let h=new Ln(d+2);const g=new Ln(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);h=h.embed(0,g).embed({x:-g.width,y:0},g).embed({x:0,y:-g.height},g),h=h.rectSlice(1,d);const p=new Ln(1).rect(0,1,!0).border(1,!1).border(1,!0),y=Xt.alignmentPatterns(c);for(const m of y)for(const b of y)h.data[m][b]===void 0&&h.embed({x:b-2,y:m-2},p);h=h.hLine({x:0,y:6},1/0,(({x:m},b)=>b===void 0?m%2==0:b)).vLine({x:6,y:0},1/0,(({y:m},b)=>b===void 0?m%2==0:b));{const m=Xt.formatBits(l,u),b=w=>!f&&(m>>w&1)==1;for(let w=0;w<6;w++)h.data[w][8]=b(w);for(let w=6;w<8;w++)h.data[w+1][8]=b(w);for(let w=8;w<15;w++)h.data[d-15+w][8]=b(w);for(let w=0;w<8;w++)h.data[8][d-w-1]=b(w);for(let w=8;w<9;w++)h.data[8][15-w-1+1]=b(w);for(let w=9;w<15;w++)h.data[8][15-w-1]=b(w);h.data[d-8][8]=!f}if(c>=7){const m=Xt.versionBits(c);for(let b=0;b<18;b+=1){const w=!f&&(m>>b&1)==1,x=Math.floor(b/3),N=b%3+d-8-3;h.data[x][N]=w,h.data[N][x]=w}}return h})(t,e,r,i);let o=0;const a=8*n.length;if((function(c,l,u){const f=c.height,d=Yp[l];let h=-1,g=f-1;for(let p=f-1;p>0;p-=2){for(p==6&&(p=5);;g+=h){for(let y=0;y<2;y+=1){const m=p-y;c.data[g][m]===void 0&&u(m,g,d(m,g))}if(g+h<0||g+h>=f)break}h=-h}})(s,r,((c,l,u)=>{let f=!1;o<a&&(f=(n[o>>>3]>>(7-o&7)&1)!=0,o++),s.data[l][c]=f!==u})),o!==a)throw new Error("QR: bytes left after draw");return s}function L5(t){const e=t.inverse(),n=h=>{let g=0;for(let p,y=0,m=1;y<h.length;y++)p===h[y]&&(m++,y!==h.length-1)||(m>=5&&(g+=m-5+3),p=h[y],m=1);return g};let r=0;t.data.forEach((h=>r+=n(h))),e.data.forEach((h=>r+=n(h)));let i=0,s=t.data;const o=t.width-1,a=t.height-1;for(let h=0;h<o;h++)for(let g=0;g<a;g++){const p=h+1,y=g+1;s[h][g]===s[p][g]&&s[p][g]===s[h][y]&&s[p][g]===s[p][y]&&(i+=3)}const c=h=>{const g=[!0,!1,!0,!0,!0,!1,!0],p=[!1,!1,!1,!1],y=[...g,...p],m=[...p,...g];let b=0;for(let w=0;w<h.length;w++)fb(h,y,w)&&(b+=40),fb(h,m,w)&&(b+=40);return b};let l=0;for(const h of t.data)l+=c(h);for(const h of e.data)l+=c(h);let u=0;t.rectRead(0,1/0,((h,g)=>u+=g?1:0));const f=u/(t.height*t.width)*100,d=10*Math.floor(Math.abs(f-50)/5);return r+i+l+d}function FS(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!hb.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${hb}`)})(r);const i=n.encoding!==void 0?n.encoding:(function(u){let f="numeric";for(let d of u)if(!Xt.alphabet.numeric.has(d)&&(f="alphanumeric",!Xt.alphabet.alphanumerc.has(d)))return"byte";return f})(t);(function(u){if(!pb.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${pb}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(i),n.mask!==void 0&&(function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!Yp[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)})(n.mask);let s,o=n.version,a=new Error("Unknown error");if(o!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(o),s=gb(o,r,t,i);else for(let u=1;u<=40;u++)try{s=gb(u,r,t,i),o=u;break}catch(f){a=f}if(!o||!s)throw a;let c=(function(u,f,d,h){if(h===void 0){const g=(function(){let p,y=1/0;return{add(m,b){m>=y||(p=b,y=m)},get:()=>p,score:()=>y}})();for(let p=0;p<Yp.length;p++)g.add(L5(mb(u,f,d,p,!0)),p);h=g.get()}if(h===void 0)throw new Error("Cannot find mask");return mb(u,f,d,h)})(o,r,s,n.mask);c.assertDrawn();const l=n.border===void 0?2:n.border;if(!Number.isSafeInteger(l))throw new Error("Wrong border type="+typeof l);if(c=c.border(l,!1),n.scale!==void 0&&(c=c.scale(n.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG();if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}const Ph={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class P0{constructor(e){var n;this.translations=Ph,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e?.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some((n=>n.toLowerCase().startsWith("en"))))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);this.translations=await i.json()}catch(r){console.warn(` Failed to load ${n} translations, falling back to English:`,r),this.translations=Ph}else this.translations=Ph}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let i=n;for(const s of r){if(typeof i!="object")return"";i=i[s]}return typeof i=="string"?i:""}}var oc;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(oc||(oc={}));const $S=class{constructor(t){y0(this,t),this.close=ls(this,"close"),this.startDesktopOnboarding=ls(this,"startDesktopOnboarding"),this.trackAnalytics=ls(this,"trackAnalytics"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new P0}componentDidLoad(){this.trackAnalytics.emit({event:oc.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:oc.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:oc.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=FS(this.link,"svg",{ecc:"medium",scale:2});return fe(S0,{className:"install-model"},fe("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),fe("div",{class:"modal"},fe("div",{class:"closeButtonContainer"},fe("div",{class:"right"},fe("span",{class:"closeButton",onClick:()=>this.onClose(!0)},fe(x0,null)))),fe("div",{class:"logoContainer"},fe(k0,null)),fe("div",null,fe("div",{class:"tabcontainer"},fe("div",{class:"flexContainer"},fe("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),fe("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),fe("div",{style:{display:e===1?"none":"block"}},fe("div",{class:"flexContainer"},fe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&fe("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),fe("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",fe("br",null),fe("span",{class:"blue"},fe("b",null,t("META_MASK_MOBILE_APP"))))))),fe("div",{style:{display:e===2?"none":"block"}},fe("div",{class:"item"},fe(kh,{Icon:P5,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),fe("div",{class:"item"},fe(kh,{Icon:k5,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),fe("div",{class:"item"},fe(kh,{Icon:T5,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),fe("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},fe(I5,null),fe("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),fe(C0,{version:this.sdkVersion})))}get el(){return nd(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};$S.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const HS=class{constructor(t){y0(this,t),this.close=ls(this,"close"),this.disconnect=ls(this,"disconnect"),this.updateOTPValue=ls(this,"updateOTPValue"),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new P0}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=i=>this.i18nInstance.t(i);return fe(S0,{className:"pending-modal"},fe("div",{class:"backdrop",onClick:()=>this.onClose()}),fe("div",{class:"modal"},fe("div",{class:"closeButtonContainer"},fe("div",{class:"right"},fe("span",{class:"closeButton",onClick:()=>this.onClose()},fe(x0,null)))),fe("div",{class:"logoContainer"},fe(k0,null)),fe("div",null,fe("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},fe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),fe("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&fe("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),fe("div",{style:{marginTop:"20px"}},fe("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),fe(C0,{version:n})))}get el(){return nd(this)}};HS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const B5=()=>fe("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),D5=()=>fe("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("rect",{width:"400",height:"300",fill:"white"}),fe("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),fe("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),fe("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),fe("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),fe("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),fe("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),fe("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),fe("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),fe("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),fe("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),fe("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),fe("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),fe("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),fe("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),fe("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),fe("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),fe("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),fe("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),fe("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),fe("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),fe("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),fe("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),KS=class{constructor(t){y0(this,t),this.close=ls(this,"close"),this.connectWithExtension=ls(this,"connectWithExtension"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new P0,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=i=>this.i18nInstance.t(i),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=FS(this.link,"svg",{ecc:"medium",scale:2});return fe(S0,{className:"select-modal"},fe("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),fe("div",{class:"modal"},fe("div",{class:"closeButtonContainer"},fe("div",{class:"right"},fe("span",{class:"closeButton",onClick:()=>this.onClose(!0)},fe(x0,null)))),fe("div",{class:"logoContainer"},fe(k0,null)),fe("div",null,fe("div",{class:"tabcontainer"},fe("div",{class:"flexContainer"},fe("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),fe("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),fe("div",{style:{display:n===1?"none":"block"}},fe("div",{class:"flexContainer"},fe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},fe("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),fe("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),fe("br",null),fe("span",{class:"blue"},fe("b",null,t("META_MASK_MOBILE_APP"))))))),fe("div",{style:{display:n===2?"none":"block"}},fe("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},fe(D5,null)),fe("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),fe("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},fe(B5,null),fe("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),fe(C0,{version:e})))}get el(){return nd(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};KS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var U5=Object.freeze({__proto__:null,mm_install_modal:$S,mm_pending_modal:HS,mm_select_modal:KS});const df=Ie(null),jS=Ie(null);let Th=null,Oa=null;function F5(){if(typeof window>"u")return null;const t=window.ethereum;return t?Array.isArray(t.providers)?t.providers.find(e=>e?.isMetaMask)||null:t.isMetaMask?t:null:null}function VS(){if(Oa=F5(),Oa||(Oa=new Z4({dappMetadata:{name:"NFT Ticketing",url:window.location.origin},checkInstallationImmediately:!1}).getProvider()),!Oa)throw new Error("MetaMask tidak terdeteksi.");return Oa}async function zS(){const t=VS(),e=await t.request({method:"eth_requestAccounts"});Th=new Un(t);const n=await Th.getNetwork();return df.value=e?.[0]||null,jS.value=Number(n.chainId),t.on?.("accountsChanged",r=>{df.value=r?.[0]||null}),t.on?.("chainChanged",()=>window.location.reload()),{provider:Th}}async function Fc(t="amoy"){const e=VS(),r=String(t||"polygon").toLowerCase()==="amoy"?{chainId:"0x13882",add:{chainId:"0x13882",chainName:"Polygon Amoy",rpcUrls:["https://rpc-amoy.polygon.technology"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://amoy.polygonscan.com"]}}:{chainId:"0x89",add:{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-bor-rpc.publicnode.com"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://polygonscan.com"]}};if((await e.request({method:"eth_chainId"}))?.toLowerCase()===r.chainId.toLowerCase())return!0;try{return await e.request({method:"wallet_switchEthereumChain",params:[{chainId:r.chainId}]}),!0}catch(s){if(s?.code===4902)return await e.request({method:"wallet_addEthereumChain",params:[r.add]}),!0;throw s}}async function $5(){return Fc("polygon")}async function H5(){return Fc("amoy")}function GS(){return{connect:zS,ensureChain:Fc,switchToPolygonMainnet:$5,switchToPolygonAmoy:H5,account:df,chainId:jS}}const Co=["function owner() view returns (address)","function feeRecipient() view returns (address)","function events(uint256 id) view returns (address promoter,uint256 tokenId,uint256 priceWei,uint256 maxSupply,uint256 sold,bool active,uint64 eventTime,string metadataURI)","function isPromoter(address account) view returns (bool)","function nextEventId() view returns (uint256)","function promoterBalances(uint256 eventId) view returns (uint256)","function feeBalances(uint256 eventId) view returns (uint256)","function createEvent(uint256 priceWei,uint256 maxSupply,uint64 eventTime,string metadataURI) external returns (uint256)","function updateEvent(uint256 eventId,uint256 newPriceWei,uint256 additionalSupply,bool active,uint64 newEventTime,string newMetadataURI) external","function buyTicket(uint256 eventId,uint256 quantity) external payable","function setPromoter(address account,bool active) external","function withdrawPromoter(uint256 eventId) external","function withdrawFees(uint256 eventId) external","event EventCreated(uint256 indexed eventId,address indexed promoter,uint256 tokenId,uint256 priceWei,uint256 maxSupply,uint64 eventTime,string metadataURI)","event TicketPurchased(uint256 indexed eventId,address indexed buyer,uint256 quantity,uint256 totalPaidWei,uint256 feeWei,uint256 promoterShareWei)","event PromoterWithdraw(uint256 indexed eventId,address indexed promoter,uint256 amount)","event FeeWithdraw(uint256 indexed eventId,address indexed admin,uint256 amount)"],K5={class:"topbar"},j5={class:"container"},V5={class:"hero"},z5={class:"hero-title"},G5={key:0,class:"alert error"},q5={class:"cards"},W5={class:"img-wrap"},Q5={class:"title"},J5={key:0,class:"adm-tools"},Y5=["onClick"],Z5=["onClick","title"],X5=["onClick"],e6={class:"meta"},t6={class:"v"},n6={class:"v"},r6={class:"desc"},i6=["onClick"],s6={class:"modal-card"},o6={class:"scroll"},a6={class:"file"},c6={key:1,class:"mt-2"},l6=["src"],u6={class:"mb-4"},f6={class:"relative"},d6=["value"],h6={class:"mt-1 text-xs text-gray-300 flex items-center gap-2"},p6={key:0},g6={key:1},m6={key:2},y6={class:"opacity-70 ml-1"},v6={class:"chk"},w6={class:"actions-bar"},b6=["disabled"],E6={class:"modal-card"},A6={class:"scroll"},_6={class:"chk"},S6={class:"actions-bar"},C6={__name:"HomeView",setup(t){const e=Tf(),n=mg(),r=Ie(!1),i=()=>r.value=!r.value;gr(()=>e.fullPath,()=>r.value=!1);const{account:s,ensureChain:o}=GS(),a="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15",c=Ue(()=>({"--hero-img":"url(/Background.png)"})),u="http://localhost:3001".replace(/\/+$/,"").replace(/\/api$/i,""),f=()=>(s.value||localStorage.getItem("walletAddress")||"").toString();function d(se){const Y=f();return Y?se+(se.includes("?")?"&":"?")+"wallet="+encodeURIComponent(Y):se}async function h(se){const Y=await g("/api/price/idr-to-wei",{method:"POST",body:JSON.stringify({amount_idr:se})});if(!Y||!Y.price_wei)throw new Error("Gagal konversi");return Y.idr_per_pol&&(D.value=Number(Y.idr_per_pol)),BigInt(Y.price_wei)}async function g(se,Y={}){const ve=se.startsWith("/api")?se:`/api${se.startsWith("/")?se:`/${se}`}`,Te=String(Y?.method||"GET").toUpperCase();let ct=`${u}${ve}`;Te==="GET"&&(ct=d(ct));const dt=await fetch(ct,{...Y,headers:{"content-type":"application/json",...Y.headers||{},"x-wallet-address":f()}}),lt=await dt.json().catch(()=>({}));if(!dt.ok)throw new Error(lt?.error||lt?.message||`HTTP ${dt.status}`);return lt}async function p(se){const Y=new FormData;Y.append("file",se);const ve=await fetch(`${u}/api/upload`,{method:"POST",headers:{"x-wallet-address":f()},body:Y}),Te=await ve.json().catch(()=>({}));if(!ve.ok)throw new Error(Te?.error||Te?.message||`HTTP ${ve.status}`);if(!Te?.url||!/^https?:\/\//i.test(Te.url))throw new Error("Upload gagal: URL tidak valid");return Te.url}const y=Ie("customer"),m=Ue(()=>y.value==="admin"),b=Ue(()=>y.value==="promoter"),w=Ue(()=>m.value||b.value?"CREATE A NEW EVENT":"UPCOMING CONCERT"),x=Ue(()=>(f()||"").toLowerCase());function N(se){return m.value?!0:b.value?(se.promoter_wallet||"").toLowerCase()===x.value:!1}async function H(){if(!s.value&&window?.ethereum)try{const se=await window.ethereum.request({method:"eth_accounts"});se?.[0]&&(s.value=se[0])}catch{}}async function z(){if(!f()){y.value="customer";return}try{const Y=await g("/api/me");y.value=Y?.role||"customer"}catch{y.value="customer"}}const G=Ie(!1),F=Ie(""),U=Ie([]);async function V(){G.value=!0,F.value="";try{const se=m.value?"?all=1":"",Y=await g(`/api/events${se}`);U.value=Array.isArray(Y?.items)?Y.items:[]}catch(se){F.value=String(se.message||se)}finally{G.value=!1}}function L(se){s.value=se?.[0]||"",z(),V()}Xo(async()=>{await H(),window?.ethereum?.on&&window.ethereum.on("accountsChanged",L),await z(),await V()}),_f(()=>{window?.ethereum?.removeListener&&window.ethereum.removeListener("accountsChanged",L)}),gr(s,async()=>{await z(),await V()});const B=Ie(""),M=Ue(()=>{const se=B.value.trim().toLowerCase();return se?U.value.filter(Y=>[Y.title,Y.venue,Y.description].some(ve=>String(ve||"").toLowerCase().includes(se))):U.value});function _(se){n.push({name:"event",params:{id:se.id}})}const R=Ie(!1),j=Ie(!1),v=Zo({title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),S=Ie(null),C=Ie(""),P=Ie(!1),A=Ie(null),E=Ie(""),k=Ie(""),I=Ie(""),D=Ie(null),T=Ie(!1),K=Ie("");function q(se){return se?String(se).replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function Z(se){let Y=se.target.value||"";if(Y=Y.replace(/[^\d]/g,""),!Y){v.price_idr=0,I.value="";return}const ve=Number(Y);v.price_idr=ve,I.value=q(ve)}gr(()=>v.price_idr,se=>{I.value=se?q(se):""});function oe(se){const Y=se?.target?.files?.[0];S.value=Y||null,C.value&&URL.revokeObjectURL(C.value),C.value=Y?URL.createObjectURL(Y):""}function O(se){const Y=se.target.files?.[0];if(!Y){A.value=null,E.value&&URL.revokeObjectURL(E.value),E.value="",k.value="";return}A.value=Y,E.value&&URL.revokeObjectURL(E.value),E.value=URL.createObjectURL(Y)}async function $(){try{T.value=!0,K.value="";const se=await g("/api/price/pol"),Y=Number(se?.price_idr||0);if(!Y)throw new Error("Harga tidak valid");D.value=Y}catch(se){console.error(se),K.value="Gagal mengambil harga POL/IDR"}finally{T.value=!1}}gr(R,se=>{se&&$()});const Q=Ue(()=>{if(!D.value)return null;const se=Number(v.price_idr||0);if(!se)return null;const Y=se/D.value;return isFinite(Y)?Y:null});function ne(se){if(!se)return"";const Y=new Date(se);if(Number.isNaN(Y.getTime()))throw new Error("Tanggal tidak valid");return Y.toISOString()}async function J(){try{if(!v.title||!v.date_iso||!v.venue)throw new Error("Title/Date/Venue wajib diisi");const se=Number(v.price_idr);if(!se||se<=0)throw new Error("Harga tiket (IDR) wajib > 0");if(S.value&&!v.image_url){P.value=!0;const ht=await p(S.value);v.image_url=ht}if(A.value&&!k.value){P.value=!0;const ht=await p(A.value);k.value=ht}const Y=k.value||v.image_url||"";await o("amoy");const Te=await new Un(window.ethereum).getSigner(),ct=new hr(a,Co,Te),dt=await h(se),lt=BigInt(Math.floor(Number(v.total_tickets)||0));if(lt<=0n)throw new Error("Total tiket harus > 0");const tn=new Date(v.date_iso);if(Number.isNaN(tn.getTime()))throw new Error("Tanggal event tidak valid");const _r=BigInt(Math.floor(tn.getTime()/1e3));try{await ct.createEvent.staticCall(dt,lt,_r,Y)}catch(ht){console.error("callStatic createEvent REVERT:",ht),console.error("reason:",ht.reason),console.error("raw error:",ht.error??ht.data??ht.info),alert(ht?.reason||ht?.error?.message||ht?.message||"Create event gagal (revert dari smart contract)");return}const Rt=await(await ct.createEvent(dt,lt,_r,Y)).wait();if(!Rt.status)throw new Error("Transaksi createEvent gagal di blockchain");let Tt=null;for(const ht of Rt.logs)try{const nl=ct.interface.parseLog(ht);if(nl?.name==="EventCreated"){Tt=Number(nl.args.eventId.toString());break}}catch{}if(Tt==null)throw new Error("Tidak bisa menemukan eventId dari log EventCreated");const co={title:v.title,date_iso:ne(v.date_iso),venue:v.venue,description:v.description||"",image_url:v.image_url||null,price_idr:se,total_tickets:Number(v.total_tickets)||0,listed:!!v.listed,chain_event_id:Tt};await g("/api/events",{method:"POST",body:JSON.stringify(co)}),Object.assign(v,{title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),I.value="",S.value=null,C.value&&(URL.revokeObjectURL(C.value),C.value=""),A.value=null,E.value&&URL.revokeObjectURL(E.value),E.value="",k.value="",R.value=!1,await V(),alert(`Event berhasil dibuat. ID on-chain: ${Tt}`)}catch(se){console.error(se),alert(`Create event gagal: ${se?.message||se}`)}finally{P.value=!1}}const W=Ie(null),X=Zo({title:"",date_iso:"",venue:"",description:"",image_url:"",price_pol:0,total_tickets:0,listed:!0});function re(se){W.value=se.id,X.title=se.title||"";try{const Y=new Date(se.date_iso),ve=Te=>String(Te).padStart(2,"0");X.date_iso=`${Y.getFullYear()}-${ve(Y.getMonth()+1)}-${ve(Y.getDate())}T${ve(Y.getHours())}:${ve(Y.getMinutes())}`}catch{X.date_iso=""}X.venue=se.venue||"",X.description=se.description||"",X.image_url=se.image_url||"",X.price_idr=Number(se.price_idr||0),X.total_tickets=Number(se.total_tickets||0),X.listed=!!se.listed,j.value=!0}function ie(){j.value=!1,W.value=null}async function ae(){try{const se={title:X.title,date_iso:ne(X.date_iso),venue:X.venue,description:X.description,image_url:X.image_url||null,price_idr:Number(X.price_idr)||0,total_tickets:Number(X.total_tickets)||0,listed:!!X.listed};await g(`/api/events/${W.value}`,{method:"PUT",body:JSON.stringify(se)}),j.value=!1,W.value=null,await V(),alert("Event updated.")}catch(se){alert(`Update failed: ${se.message}`)}}async function he(se){if(confirm("Delete this event?"))try{await g(`/api/events/${se}`,{method:"DELETE"}),await V(),alert("Deleted.")}catch(Y){alert(`Delete failed: ${Y.message}`)}}async function ue(se){try{await g(`/api/events/${se.id}/list`,{method:"PATCH",body:JSON.stringify({listed:!se.listed})}),await V()}catch(Y){alert(`List/Delist failed: ${Y.message}`)}}function ge(se){if(se.image_url&&se.image_url.length>0)return se.image_url}return(se,Y)=>(Se(),Ce("div",{class:"home-page",style:ss(c.value)},[ee("header",K5,[Y[26]||(Y[26]=ee("div",{class:"brand"},[ee("img",{src:yg,alt:"Tickety"})],-1)),ee("form",{class:"search search--top",onSubmit:Y[1]||(Y[1]=Ps(()=>{},["prevent"]))},[nn(ee("input",{class:"search-input","onUpdate:modelValue":Y[0]||(Y[0]=ve=>B.value=ve),type:"search",placeholder:"Search concerts, venues"},null,512),[[Pn,B.value]]),Y[24]||(Y[24]=ee("button",{class:"search-btn",type:"submit"},"",-1))],32),ee("button",{class:"hamburger",onClick:Ps(i,["stop"]),"aria-label":"Toggle Sidebar"},[...Y[25]||(Y[25]=[ee("span",null,null,-1),ee("span",null,null,-1),ee("span",null,null,-1)])])]),ft(q1,{modelValue:r.value,"onUpdate:modelValue":Y[2]||(Y[2]=ve=>r.value=ve)},null,8,["modelValue"]),ee("main",j5,[ee("section",V5,[Y[27]||(Y[27]=ee("div",{class:"hero-bg","aria-hidden":"true"},null,-1)),ee("h2",z5,Oe(w.value),1)]),F.value?(Se(),Ce("div",G5,Oe(F.value),1)):Xe("",!0),ee("section",q5,[(Se(!0),Ce(ln,null,c1(M.value,ve=>(Se(),Ce("article",{key:ve.id,class:"card"},[ee("div",W5,[ee("div",{class:"img",style:ss({backgroundImage:`url(${ge(ve)})`})},null,4),Y[28]||(Y[28]=ee("div",{class:"img-overlay"},null,-1)),ee("div",Q5,Oe(ve.title),1),N(ve)?(Se(),Ce("div",J5,[ee("button",{class:"adm-btn",onClick:Te=>re(ve),title:"Edit"},"",8,Y5),ee("button",{class:"adm-btn",onClick:Te=>ue(ve),title:ve.listed?"Delist":"List"},Oe(ve.listed?"":""),9,Z5),ee("button",{class:"adm-btn danger",onClick:Te=>he(ve.id),title:"Delete"},"",8,X5)])):Xe("",!0)]),ee("div",e6,[ee("div",null,[Y[29]||(Y[29]=ee("span",{class:"k"},"Location:",-1)),Y[30]||(Y[30]=rt()),ee("span",t6,Oe(ve.venue),1)]),ee("div",null,[Y[31]||(Y[31]=ee("span",{class:"k"},"Date:",-1)),Y[32]||(Y[32]=rt()),ee("span",n6,Oe(new Date(ve.date_iso).toLocaleString("id-ID")),1)])]),ee("p",r6,Oe(ve.description||"(Blank Text)"),1),ee("button",{class:"buy",onClick:Te=>_(ve)},"BUY TICKET",8,i6)]))),128))])]),m.value||b.value?(Se(),Ce("button",{key:0,class:"fab",title:"Add event","aria-label":"Create new event",onClick:Y[3]||(Y[3]=ve=>R.value=!0)},[...Y[33]||(Y[33]=[rt("",-1),ee("span",{class:"sr-only"},"Create new event",-1)])])):Xe("",!0),R.value?(Se(),Ce("div",{key:1,class:"modal",onClick:Y[12]||(Y[12]=Ps(ve=>R.value=!1,["self"]))},[ee("div",s6,[ee("button",{class:"modal-x","aria-label":"Close",onClick:Y[4]||(Y[4]=ve=>R.value=!1)},""),Y[46]||(Y[46]=ee("h3",null,"Create Event",-1)),ee("form",{class:"form",onSubmit:Ps(J,["prevent"])},[ee("div",o6,[ee("label",null,[Y[34]||(Y[34]=rt("Title ",-1)),nn(ee("input",{"onUpdate:modelValue":Y[5]||(Y[5]=ve=>v.title=ve)},null,512),[[Pn,v.title]])]),ee("label",null,[Y[35]||(Y[35]=rt("Date (UTC) ",-1)),nn(ee("input",{type:"datetime-local",step:"60","onUpdate:modelValue":Y[6]||(Y[6]=ve=>v.date_iso=ve)},null,512),[[Pn,v.date_iso]])]),ee("label",null,[Y[36]||(Y[36]=rt("Venue ",-1)),nn(ee("input",{"onUpdate:modelValue":Y[7]||(Y[7]=ve=>v.venue=ve)},null,512),[[Pn,v.venue]])]),ee("label",a6,[Y[37]||(Y[37]=ee("span",null,"Image",-1)),ee("input",{type:"file",accept:"image/*",onChange:oe},null,32)]),C.value||v.image_url?(Se(),Ce("div",{key:0,class:"img-preview",style:ss({backgroundImage:`url(${C.value||v.image_url})`})},null,4)):Xe("",!0),Y[44]||(Y[44]=ee("label",{class:"block text-sm font-medium mb-1"},"NFT Image (optional)",-1)),ee("input",{type:"file",accept:"image/*",onChange:O},null,32),Y[45]||(Y[45]=ee("p",{class:"mt-1 text-xs text-gray-400"},"Jika tidak diisi, NFT akan memakai gambar banner event.",-1)),E.value?(Se(),Ce("div",c6,[Y[38]||(Y[38]=ee("span",{class:"text-xs text-gray-300"},"Preview NFT:",-1)),ee("img",{src:E.value,alt:"NFT preview",class:"mt-1 h-24 rounded object-cover"},null,8,l6)])):Xe("",!0),ee("div",u6,[Y[40]||(Y[40]=ee("label",{class:"block text-sm font-medium mb-1"},"Price (IDR)",-1)),ee("div",f6,[Y[39]||(Y[39]=ee("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-sm text-gray-400"}," Rp ",-1)),ee("input",{type:"text",value:I.value,onInput:Z,inputmode:"numeric",class:"w-full rounded border px-3 py-2 pl-10",placeholder:"contoh: 150.000"},null,40,d6)]),ee("div",h6,[T.value?(Se(),Ce("span",p6,"Mengambil harga POL/IDR...")):K.value?(Se(),Ce("span",g6,[rt(Oe(K.value)+" ",1),ee("button",{type:"button",class:"underline ml-1",onClick:$}," coba lagi ")])):Q.value!==null?(Se(),Ce("span",m6,[rt("  "+Oe(Q.value.toFixed(4))+" POL ",1),ee("span",y6," (1 POL  "+Oe(D.value?.toLocaleString("id-ID"))+" IDR) ",1),ee("button",{type:"button",class:"text-[10px] px-2 py-1 border rounded ml-2 opacity-70 hover:opacity-100",onClick:$}," Refresh ")])):Xe("",!0)])]),ee("label",null,[Y[41]||(Y[41]=rt("Total Tickets ",-1)),nn(ee("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":Y[8]||(Y[8]=ve=>v.total_tickets=ve)},null,512),[[Pn,v.total_tickets,void 0,{number:!0}]])]),ee("label",v6,[nn(ee("input",{type:"checkbox","onUpdate:modelValue":Y[9]||(Y[9]=ve=>v.listed=ve)},null,512),[[dm,v.listed]]),Y[42]||(Y[42]=rt(" Listed",-1))]),ee("label",null,[Y[43]||(Y[43]=rt("Description ",-1)),nn(ee("textarea",{rows:"3","onUpdate:modelValue":Y[10]||(Y[10]=ve=>v.description=ve)},null,512),[[Pn,v.description]])])]),ee("div",w6,[ee("button",{type:"button",class:"btn ghost",onClick:Y[11]||(Y[11]=ve=>R.value=!1)},"Cancel"),ee("button",{type:"submit",class:"btn primary",disabled:P.value},Oe(P.value?"Uploading":"Create"),9,b6)])],32)])])):Xe("",!0),j.value?(Se(),Ce("div",{key:2,class:"modal",onClick:Y[23]||(Y[23]=Ps(ve=>ie(),["self"]))},[ee("div",E6,[ee("button",{class:"modal-x","aria-label":"Close",onClick:Y[13]||(Y[13]=ve=>ie())},""),Y[56]||(Y[56]=ee("h3",null,"Edit Event",-1)),ee("form",{class:"form",onSubmit:Ps(ae,["prevent"])},[ee("div",A6,[ee("label",null,[Y[47]||(Y[47]=rt("Title ",-1)),nn(ee("input",{"onUpdate:modelValue":Y[14]||(Y[14]=ve=>X.title=ve)},null,512),[[Pn,X.title]])]),ee("label",null,[Y[48]||(Y[48]=rt("Date (UTC) ",-1)),nn(ee("input",{type:"datetime-local",step:"60","onUpdate:modelValue":Y[15]||(Y[15]=ve=>X.date_iso=ve)},null,512),[[Pn,X.date_iso]])]),ee("label",null,[Y[49]||(Y[49]=rt("Venue ",-1)),nn(ee("input",{"onUpdate:modelValue":Y[16]||(Y[16]=ve=>X.venue=ve)},null,512),[[Pn,X.venue]])]),ee("label",null,[Y[50]||(Y[50]=rt("Image URL ",-1)),nn(ee("input",{"onUpdate:modelValue":Y[17]||(Y[17]=ve=>X.image_url=ve),placeholder:"https://..."},null,512),[[Pn,X.image_url]])]),ee("label",null,[Y[51]||(Y[51]=rt("Price (IDR) ",-1)),nn(ee("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":Y[18]||(Y[18]=ve=>X.price_idr=ve)},null,512),[[Pn,X.price_idr,void 0,{number:!0}]])]),ee("label",null,[Y[52]||(Y[52]=rt("Total Tickets ",-1)),nn(ee("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":Y[19]||(Y[19]=ve=>X.total_tickets=ve)},null,512),[[Pn,X.total_tickets,void 0,{number:!0}]])]),ee("label",_6,[nn(ee("input",{type:"checkbox","onUpdate:modelValue":Y[20]||(Y[20]=ve=>X.listed=ve)},null,512),[[dm,X.listed]]),Y[53]||(Y[53]=rt(" Listed",-1))]),ee("label",null,[Y[54]||(Y[54]=rt("Description ",-1)),nn(ee("textarea",{rows:"3","onUpdate:modelValue":Y[21]||(Y[21]=ve=>X.description=ve)},null,512),[[Pn,X.description]])])]),ee("div",S6,[ee("button",{type:"button",class:"btn ghost",onClick:Y[22]||(Y[22]=ve=>ie())},"Cancel"),Y[55]||(Y[55]=ee("button",{type:"submit",class:"btn primary"},"Save",-1))])],32)])])):Xe("",!0)],4))}},x6=pa(C6,[["__scopeId","data-v-2aacfef3"]]),yb="/assets/MetaMask-eUUnB-vT.png",k6={class:"login-page"},P6={class:"login-container"},T6={key:0,class:"hint"},I6={key:2,class:"wallet-info"},R6={class:"wallet-label"},O6=["src"],N6={class:"wallet-address"},M6=["disabled"],L6=["src"],B6=["disabled"],D6={key:0},U6={key:1},F6={key:5,class:"metamask-warning"},$6={__name:"Login",setup(t){const e=mg(),n=Ie(!1),r=Ie(!1),i=Ie(""),s=Ie(""),o=Ie(!0),a=Ie("");gr(df,g=>{a.value=g||""});function c(g,p){i.value=g,s.value=p,setTimeout(()=>{i.value="",s.value=""},5e3)}function l(g){return g?`${g.slice(0,6)}...${g.slice(-4)}`:""}const u="http://localhost:3001".replace(/\/+$/,"");async function f(g,p){if(typeof g!="string")throw new Error("Path harus string");const y=[];g.startsWith("/api")&&u&&y.push(`${u}${g}`),y.push(g);const m={method:p?.method||"GET",headers:p?.headers||{},body:p?.body,credentials:p?.credentials||"omit"},b=12e3;let w;for(const x of y){const N=new AbortController,H=setTimeout(()=>N.abort(),b);try{const z=await fetch(x,{...m,signal:N.signal});clearTimeout(H);const G=await z.text().catch(()=>"");let F={};if(G&&G.trim())try{F=JSON.parse(G)}catch{F={message:G}}if(!z.ok){const U=(F?.message||`${z.status} ${z.statusText||""}`).trim();throw new Error(`Request gagal (${U}) ke ${x}`)}return F}catch(z){if(clearTimeout(H),w=z,!(z?.name==="AbortError"||z instanceof TypeError))break}}throw new Error(String(w?.message||w||"Failed to fetch"))}async function d(){n.value=!0;try{await zS(),await Fc("amoy"),c("Wallet berhasil terhubung!","success")}catch(g){const p=String(g?.message||g);p.toLowerCase().includes("tidak terdeteksi")&&(o.value=!1),console.error(g),c(p,"error")}finally{n.value=!1}}async function h(){if(!a.value){c("Silakan hubungkan wallet terlebih dahulu!","error");return}let g;try{g=qe(a.value)}catch{c("Alamat wallet tidak valid.","error");return}r.value=!0;try{await Fc("amoy");const p=g.toLowerCase(),{nonce:y}=await f(`/api/nonce?address=${encodeURIComponent(p)}`),m=await window.ethereum.request({method:"eth_chainId"}),b=parseInt(m,16),w=window.location.host,x=window.location.origin,N=new Date().toISOString(),z=`${w} wants you to sign in with your Ethereum account:
${g}

Sign in to AsiqTIX

URI: ${x}
Version: 1
Chain ID: ${b}
Nonce: ${y}
Issued At: ${N}`,G=await window.ethereum.request({method:"personal_sign",params:[z,g]}),F=await f("/api/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:z,signature:G})});localStorage.setItem("walletAddress",g),F?.token&&localStorage.setItem("auth_token",F.token),c(" Autentikasi berhasil!","success"),e.push({name:"home"})}catch(p){console.error(p),c(String(p?.message||p),"error")}finally{r.value=!1}}return(g,p)=>(Se(),Ce("div",k6,[ee("div",P6,[p[3]||(p[3]=ee("img",{src:yg,alt:"Logo",class:"logo"},null,-1)),p[4]||(p[4]=ee("h1",null,"Selamat Datang!",-1)),o.value?Xe("",!0):(Se(),Ce("p",T6," Pastikan Anda telah memasang ekstensi MetaMask pada browser Anda atau aplikasi MetaMask pada perangkat seluler Anda. ")),p[5]||(p[5]=ee("p",{class:"subtitle"},"Hubungkan wallet MetaMask untuk mendaftar",-1)),i.value?(Se(),Ce("div",{key:1,class:Hc(["status-message",s.value])},Oe(i.value),3)):Xe("",!0),a.value?(Se(),Ce("div",I6,[ee("div",R6,[ee("img",{src:fn(yb),class:"mm-ico",alt:"MetaMask"},null,8,O6),p[0]||(p[0]=ee("span",null,"Wallet Terhubung",-1))]),ee("div",N6,Oe(l(a.value)),1)])):Xe("",!0),a.value?(Se(),Ce("button",{key:4,onClick:h,disabled:r.value,class:"btn-login"},[r.value?(Se(),Ce("span",D6," Mendaftarkan...")):(Se(),Ce("span",U6,"Masuk"))],8,B6)):(Se(),Ce("button",{key:3,onClick:d,disabled:n.value,class:"btn-metamask"},[n.value?(Se(),Ce(ln,{key:0},[rt("  Menghubungkan... ")],64)):(Se(),Ce(ln,{key:1},[ee("img",{src:fn(yb),class:"mm-ico mm-ico--btn",alt:"MetaMask"},null,8,L6),p[1]||(p[1]=ee("span",{class:"btn-label"},"Hubungkan MetaMask",-1))],64))],8,M6)),o.value?Xe("",!0):(Se(),Ce("div",F6,[...p[2]||(p[2]=[ee("p",null," MetaMask tidak terdeteksi!",-1),ee("a",{href:"https://metamask.io/download/",target:"_blank",class:"install-link"}," Install MetaMask ",-1)])]))])]))}},H6=pa($6,[["__scopeId","data-v-820c4ebe"]]),K6={key:0,class:"modal-backdrop"},j6={class:"modal"},V6={class:"receipt"},z6={class:"receipt-body"},G6={class:"row"},q6={class:"value"},W6={class:"row"},Q6={class:"value"},J6={class:"row"},Y6={class:"value"},Z6={class:"row"},X6={class:"value"},eL={class:"row"},tL={class:"value"},nL={class:"row total"},rL={class:"value"},iL={key:0,class:"row hash"},sL={class:"value mono"},oL={class:"receipt-footer"},aL={__name:"Purchase_Success_Dialog",props:{open:{type:Boolean,default:!1},eventTitle:{type:String,default:""},venue:{type:String,default:""},dateText:{type:String,default:""},quantity:{type:Number,default:1},pricePerTicketPol:{type:Number,default:0},totalPol:{type:Number,default:0},txHash:{type:String,default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=e;function i(){r("close")}function s(){if(!n.txHash)return;const o=`https://amoy.polygonscan.com/tx/${n.txHash}`;window.open(o,"_blank","noopener")}return(o,a)=>t.open?(Se(),Ce("div",K6,[ee("div",j6,[ee("div",V6,[a[9]||(a[9]=ee("header",{class:"receipt-header"},[ee("h2",null,"Tiket Berhasil Dibeli"),ee("p",null,"Terima kasih! Berikut struk pembelian Anda.")],-1)),ee("div",z6,[ee("div",G6,[a[0]||(a[0]=ee("span",{class:"label"},"Event",-1)),ee("span",q6,Oe(t.eventTitle||"-"),1)]),ee("div",W6,[a[1]||(a[1]=ee("span",{class:"label"},"Lokasi",-1)),ee("span",Q6,Oe(t.venue||"-"),1)]),ee("div",J6,[a[2]||(a[2]=ee("span",{class:"label"},"Tanggal",-1)),ee("span",Y6,Oe(t.dateText||"-"),1)]),a[7]||(a[7]=ee("hr",{class:"divider"},null,-1)),ee("div",Z6,[a[3]||(a[3]=ee("span",{class:"label"},"Qty",-1)),ee("span",X6,Oe(t.quantity),1)]),ee("div",eL,[a[4]||(a[4]=ee("span",{class:"label"},"Harga / Tiket",-1)),ee("span",tL,Oe(t.pricePerTicketPol.toFixed(4))+" POL",1)]),ee("div",nL,[a[5]||(a[5]=ee("span",{class:"label"},"Total",-1)),ee("span",rL,Oe(t.totalPol.toFixed(4))+" POL",1)]),a[8]||(a[8]=ee("hr",{class:"divider"},null,-1)),t.txHash?(Se(),Ce("div",iL,[a[6]||(a[6]=ee("span",{class:"label"},"Tx Hash",-1)),ee("span",sL,Oe(t.txHash.slice(0,10))+""+Oe(t.txHash.slice(-8)),1)])):Xe("",!0)]),ee("footer",oL,[ee("button",{class:"btn ghost",type:"button",onClick:i}," Tutup "),t.txHash?(Se(),Ce("button",{key:0,class:"btn primary",type:"button",onClick:s}," Lihat di Polygonscan ")):Xe("",!0)])])])])):Xe("",!0)}},cL=pa(aL,[["__scopeId","data-v-ec46f849"]]),lL={key:0,class:"modal-backdrop"},uL={class:"modal"},fL={class:"card"},dL={class:"msg"},hL={__name:"Purchase_Error_Dialog",props:{open:{type:Boolean,default:!1},message:{type:String,default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,i=()=>r("close");return(s,o)=>n.open?(Se(),Ce("div",lL,[ee("div",uL,[ee("div",fL,[o[0]||(o[0]=ee("h2",null,"Pembelian Gagal",-1)),ee("p",dL,Oe(t.message||"Terjadi kesalahan saat memproses transaksi."),1),ee("div",{class:"actions"},[ee("button",{class:"btn",type:"button",onClick:i},"Tutup")])])])])):Xe("",!0)}},pL=pa(hL,[["__scopeId","data-v-a69c504f"]]),gL={class:"event-page"},mL={key:0,class:"alert error"},yL={key:1,class:"loading"},vL={class:"hero-inner"},wL={class:"poster"},bL={class:"info"},EL={class:"event-title"},AL={class:"meta"},_L={class:"row"},SL={class:"v"},CL={class:"row"},xL={class:"v"},kL={class:"desc"},PL={class:"pricebox"},TL={class:"price"},IL={key:0,class:"stock"},RL={key:0},OL={key:1,class:"sold-out"},NL=["disabled"],ML={key:0},LL={key:1},BL={key:2},DL={key:1,class:"buy-msg"},UL={key:2,class:"promoter-tools"},FL={class:"promoter-balance"},$L={key:0,class:"hint"},HL={key:1,class:"buy-msg"},KL={key:2,class:"buy-msg"},jL=["href"],VL=["disabled"],zL={key:0},GL={key:1},qL={key:2},WL={key:3},QL={key:3,class:"promoter-tools",style:{"margin-top":"1.5rem"}},JL={class:"promoter-balance"},YL={key:0,class:"buy-msg"},ZL=["disabled"],XL={key:0},eB={key:1},tB={key:2},nB={__name:"EventDetailView",setup(t){const e=Tf(),n=mg(),{ensureChain:r}=GS(),i="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15",s=Ie(!1),o=()=>s.value=!s.value;gr(()=>e.fullPath,()=>s.value=!1);const c="http://localhost:3001".replace(/\/+$/,"").replace(/\/api$/i,""),l=()=>(localStorage.getItem("walletAddress")||"").toString();async function u(J,W={}){const X=J.startsWith("/api")?J:`/api${J.startsWith("/")?J:`/${J}`}`,re=await fetch(`${c}${X}`,{...W,headers:{"content-type":"application/json",...W.headers||{},"x-wallet-address":l()}}),ie=await re.json().catch(()=>({}));if(!re.ok)throw new Error(ie?.error||ie?.message||`HTTP ${re.status}`);return ie}const f=Ie(null),d=Ie(!0),h=Ie(""),g=Ie(!1),p=Ie(""),y=Ie(!1),m=Ie(!1),b=Ie(null),w=Ie(""),x=Ie("customer"),N=Ue(()=>x.value==="admin"),H=Ue(()=>(l()||"").toLowerCase()),z=Ue(()=>{if(!f.value)return!1;const J=(f.value.promoter_wallet||"").toLowerCase();return J&&H.value&&J===H.value}),G=Ie(0n),F=Ue(()=>{try{return fo(G.value||0n)}catch{return"0.0"}}),U=Ue(()=>G.value>0n),V=Ie(!1),L=Ie(""),B=Ie(""),M=Ue(()=>{if(!f.value?.date_iso)return!1;const J=new Date(f.value.date_iso);return Number.isNaN(J.getTime())?!1:J.getTime()<=Date.now()}),_=Ue(()=>N.value||z.value),R=Ue(()=>_.value&&M.value&&U.value);async function j(){if(!f.value)return;if(!l()){p.value="Wallet belum terhubung.";return}const J=Number(f.value.chain_event_id||0);if(!J){p.value="Event ini belum di-link ke kontrak (chain_event_id kosong).";return}try{g.value=!0,p.value="",await r("amoy");const X=await new Un(window.ethereum).getSigner(),re=new hr(i,Co,X),ie=1n,ae=await re.events(J),he=ae.priceWei;if(he<=0n)throw new Error("Harga tiket on-chain tidak valid");if(!ae.active)throw new Error("Event ini tidak aktif lagi");const ue=he*ie;console.log("[DEBUG BUY] chainEventId",J),console.log("[DEBUG BUY] on-chain event:",{promoter:ae.promoter,priceWei:ae.priceWei.toString(),maxSupply:ae.maxSupply.toString(),sold:ae.sold.toString(),active:ae.active}),console.log("[DEBUG BUY] quantity",ie.toString()),console.log("[DEBUG BUY] totalPriceWei (value yg dikirim)",ue.toString());const ge=await re.buyTicket(J,ie,{value:ue});if(!(await ge.wait()).status)throw new Error("Transaksi di blockchain gagal");await u("/purchase",{method:"POST",body:JSON.stringify({amount:Number(f.value.price_idr||0)||0,ref_id:f.value.id,description:"On-chain purchase",tx_hash:ge.hash})}),f.value.sold_tickets=Number(f.value.sold_tickets??0)+Number(ie);const Y=Number(fo(he)),ve=Number(fo(ue));b.value={eventTitle:f.value.title,venue:f.value.venue,dateText:q.value,quantity:Number(ie),pricePerTicketPol:Y,totalPol:ve,txHash:ge.hash},p.value="Tiket berhasil dibeli! NFT tiket tersimpan di wallet kamu.",y.value=!0}catch(W){console.error("[BUY ERROR RAW]",W);const X=W?.info?.error||W?.error||W,re=W?.reason||W?.shortMessage||X?.data?.message||X?.message||W?.message||"Unknown error";p.value=`Gagal membeli tiket: ${re}`,w.value=p.value,m.value=!0}finally{g.value=!1}}async function v(){if(!l()){x.value="customer";return}try{const J=await u("/api/me");x.value=J?.role||"customer"}catch{x.value="customer"}}async function S(){if(G.value=0n,L.value="",!!l()&&f.value?.chain_event_id)try{await r("amoy");const W=await new Un(window.ethereum).getSigner(),X=new hr(i,Co,W),re=Number(f.value.chain_event_id||0);if(!re)return;const ie=await X.promoterBalances(re),ae=typeof ie=="bigint"?ie:BigInt(ie.toString());G.value=ae}catch(J){console.error("[promoterBalance] gagal load",J),L.value="Gagal memuat saldo promotor."}}async function C(){if(L.value="",!_.value){L.value="Anda tidak berhak menarik dana event ini.";return}if(!f.value?.chain_event_id){L.value="Event ini belum di-link ke kontrak.";return}try{V.value=!0,await r("amoy");const W=await new Un(window.ethereum).getSigner(),X=new hr(i,Co,W),re=Number(f.value.chain_event_id||0);if(!re){L.value="Event belum punya ID on-chain.";return}const ie=G.value||0n,ae=Number(fo(ie));try{await X.withdrawPromoter.staticCall(re)}catch(ge){console.error("[withdrawPromoter staticCall]",ge);const se=ge?.info?.error||ge?.error||ge;let Y=ge?.reason||ge?.shortMessage||se?.data?.message||se?.message||ge?.message||"Unknown error";Y.includes("EVENT_NOT_FINISHED")?L.value="Event belum selesai di blockchain. Dana baru bisa ditarik setelah waktu event terlewati.":Y.includes("NO_BALANCE")?L.value="Tidak ada saldo yang bisa ditarik untuk event ini.":Y.includes("NOT_EVENT_PROMOTER")?L.value="Wallet ini bukan promotor event ini (atau Anda bukan owner kontrak).":Y.includes("EVENT_NOT_FOUND")?L.value="Event dengan ID tersebut tidak ditemukan di kontrak.":L.value=`Gagal menarik dana: ${Y}`;return}const he=await X.withdrawPromoter(re);if(!(await he.wait()).status)throw new Error("Transaksi withdraw gagal di blockchain");B.value=he.hash;try{await u("/withdraw-log",{method:"POST",body:JSON.stringify({amount:ae,ref_id:f.value.id,description:`Withdraw hasil penjualan event ${f.value.title||f.value.id}`,tx_hash:he.hash})})}catch(ge){console.error("[withdraw-log] gagal simpan ke backend",ge)}L.value="Penarikan dana berhasil dikirim ke wallet.",await S()}catch(J){console.error("[withdrawPromoter]",J);const W=J?.info?.error||J?.error||J;let X=J?.reason||J?.shortMessage||W?.data?.message||W?.message||J?.message||"Unknown error";L.value=`Gagal menarik dana: ${X}`}finally{V.value=!1}}const P=Ie(0n),A=Ue(()=>{try{return fo(P.value||0n)}catch{return"0.0"}}),E=Ie(!1),k=Ie(""),I=Ue(()=>P.value>0n),D=Ue(()=>N.value&&I.value);async function T(){if(P.value=0n,k.value="",!!l()&&f.value?.chain_event_id)try{await r("amoy");const W=await new Un(window.ethereum).getSigner(),X=new hr(i,Co,W),re=Number(f.value.chain_event_id||0);if(!re)return;const ie=await X.feeBalances(re),ae=typeof ie=="bigint"?ie:BigInt(ie.toString());P.value=ae}catch(J){console.error("[adminFeeBalance] gagal load",J),k.value="Gagal memuat saldo admin."}}async function K(){if(k.value="",!!D.value)try{E.value=!0,await r("amoy");const W=await new Un(window.ethereum).getSigner(),X=new hr(i,Co,W),re=Number(f.value.chain_event_id||0),ie=await X.feeBalances(re),ae=typeof ie=="bigint"?ie:BigInt(ie.toString()),he=Number(fo(ae||0n)),ue=await X.withdrawFees(re);if(!(await ue.wait()).status)throw new Error("Transaksi gagal di blockchain");try{await u("/withdraw-log",{method:"POST",body:JSON.stringify({amount:he,ref_id:f.value.id,description:`Withdraw fee admin event ${f.value.title||f.value.id}`,tx_hash:ue.hash})})}catch(se){console.error("[withdraw-log admin] gagal simpan ke backend",se)}k.value="Fee admin berhasil ditarik ke wallet.",await T()}catch(J){console.error("[withdrawAdminFee] error",J);let W=String(J?.reason||J?.message||J||"");W.includes("NO_FEE")&&(W="Tidak ada fee yang bisa ditarik."),W.includes("NOT_ADMIN")&&(W="Wallet ini bukan admin/feeRecipient di kontrak."),k.value=W}finally{E.value=!1}}const q=Ue(()=>{const J=f.value?.date_iso?new Date(f.value.date_iso):null;if(!J)return"-";const W=J.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit"}),X=J.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${W}, ${X.replaceAll(".",":")}`.replace(/:/g,".")}),Z=Ue(()=>{const J=Number(f.value?.price_idr||0);return J?`Rp ${J.toLocaleString("id-ID")}`:"-"}),oe=Ue(()=>{if(!f.value)return null;const J=Number(f.value.total_tickets??0),W=Number(f.value.sold_tickets??0),X=J-W;return!Number.isFinite(X)||X<0?0:X}),O=Ue(()=>Number(f.value?.total_tickets??0)>0&&oe.value===0),$=Ue(()=>"url(/Background.png)"),Q=Ue(()=>`url(${f.value?.image_url||"/poster_fallback.jpg"})`);function ne(){n.push({name:"home"})}return Xo(async()=>{try{d.value=!0;const J=String(e.params.id||"");f.value=await u(`/api/events/${J}`),await Promise.all([v(),S(),T()])}catch(J){h.value=String(J.message||J)}finally{d.value=!1}}),(J,W)=>(Se(),Ce("div",gL,[ee("header",{class:"topbar"},[ee("button",{class:"back",onClick:ne}," Back"),W[3]||(W[3]=ee("div",{class:"brand"},[ee("img",{src:yg,alt:"Tickety"})],-1)),W[4]||(W[4]=ee("h1",{class:"title"},"Event",-1)),ee("button",{class:"hamburger","aria-label":"Toggle menu",onClick:o})]),ft(q1,{modelValue:s.value,"onUpdate:modelValue":W[0]||(W[0]=X=>s.value=X),extraClass:"sb-topright"},null,8,["modelValue"]),ee("main",null,[h.value?(Se(),Ce("div",mL,Oe(h.value),1)):d.value?(Se(),Ce("div",yL,"Loading")):(Se(),Ce("section",{key:2,class:"hero",style:ss({"--hero":$.value})},[ee("div",vL,[ee("div",wL,[ee("div",{class:"poster-img",style:ss({backgroundImage:Q.value})},null,4),W[5]||(W[5]=ee("div",{class:"poster-grad"},null,-1))]),ee("div",bL,[ee("h2",EL,Oe(f.value.title),1),ee("div",AL,[ee("div",_L,[W[6]||(W[6]=ee("span",{class:"k"},"Location:",-1)),ee("span",SL,Oe(f.value.venue),1)]),ee("div",CL,[W[7]||(W[7]=ee("span",{class:"k"},"Date:",-1)),ee("span",xL,Oe(q.value),1)])]),ee("p",kL,Oe(f.value.description||"No description."),1)]),ee("aside",PL,[W[12]||(W[12]=ee("div",{class:"label"},"Price",-1)),ee("div",TL,Oe(Z.value),1),f.value.total_tickets>0?(Se(),Ce("div",IL,[O.value?(Se(),Ce("span",OL,"Sold out")):(Se(),Ce("span",RL,"Tickets left: "+Oe(oe.value),1))])):Xe("",!0),ee("button",{class:"cta",disabled:O.value||g.value,onClick:j},[O.value?(Se(),Ce("span",ML,"SOLD OUT")):g.value?(Se(),Ce("span",LL,"PROCESSING")):(Se(),Ce("span",BL,"BUY TICKET"))],8,NL),p.value?(Se(),Ce("p",DL,Oe(p.value),1)):Xe("",!0),_.value?(Se(),Ce("div",UL,[W[8]||(W[8]=ee("h3",null,"Promoter Tools",-1)),W[9]||(W[9]=ee("p",null,"Saldo dapat ditarik:",-1)),ee("p",FL,[ee("strong",null,Oe(F.value)+" POL",1)]),M.value?Xe("",!0):(Se(),Ce("p",$L," Dana baru bisa ditarik setelah waktu event terlewati. ")),L.value?(Se(),Ce("p",HL,Oe(L.value),1)):Xe("",!0),B.value?(Se(),Ce("p",KL,[ee("a",{href:`https://amoy.polygonscan.com/tx/${B.value}`,target:"_blank",rel:"noopener noreferrer"}," Lihat transaksi di PolygonScan Amoy ",8,jL)])):Xe("",!0),ee("button",{class:"cta secondary",disabled:V.value||!R.value,onClick:C},[V.value?(Se(),Ce("span",zL,"WITHDRAWING")):U.value?M.value?(Se(),Ce("span",WL,"WITHDRAW TO WALLET")):(Se(),Ce("span",qL,"WAIT EVENT FINISH")):(Se(),Ce("span",GL,"NO FUNDS"))],8,VL)])):Xe("",!0),N.value?(Se(),Ce("div",QL,[W[10]||(W[10]=ee("h3",null,"Admin Fee",-1)),W[11]||(W[11]=ee("p",null,"Saldo fee admin yang bisa ditarik:",-1)),ee("p",JL,[ee("strong",null,Oe(A.value)+" POL",1)]),k.value?(Se(),Ce("p",YL,Oe(k.value),1)):Xe("",!0),ee("button",{class:"cta secondary",disabled:E.value||!D.value,onClick:K},[E.value?(Se(),Ce("span",XL,"WITHDRAWING")):I.value?(Se(),Ce("span",tB,"WITHDRAW ADMIN FEE")):(Se(),Ce("span",eB,"NO FEE"))],8,ZL)])):Xe("",!0)])])],4))]),y.value&&b.value?(Se(),Hh(cL,{key:0,open:y.value,"event-title":b.value.eventTitle,venue:b.value.venue,"date-text":b.value.dateText,quantity:b.value.quantity,"price-per-ticket-pol":b.value.pricePerTicketPol,"total-pol":b.value.totalPol,"tx-hash":b.value.txHash,onClose:W[1]||(W[1]=X=>y.value=!1)},null,8,["open","event-title","venue","date-text","quantity","price-per-ticket-pol","total-pol","tx-hash"])):Xe("",!0),m.value?(Se(),Hh(pL,{key:1,open:m.value,message:w.value||p.value,onClose:W[2]||(W[2]=X=>m.value=!1)},null,8,["open","message"])):Xe("",!0)]))}},rB=pa(nB,[["__scopeId","data-v-a0fd75d0"]]),qS=S3({history:t3("/"),routes:[{path:"/",name:"login",component:H6},{path:"/home",name:"home",component:x6,meta:{requiresWallet:!0}},{path:"/events/:id",name:"event",component:rB},{path:"/profile",name:"profile",component:()=>Ma(()=>import("./Profile-io59fk1S.js"),__vite__mapDeps([0,1])),meta:{requiresAuth:!0}},{path:"/logout",name:"logout",component:()=>Ma(()=>import("./LogoutConfirm-BLY6jgB4.js"),__vite__mapDeps([2,3]))},{path:"/wallet",name:"wallet",component:()=>Ma(()=>import("./Wallet-BhqTzd3z.js"),__vite__mapDeps([4,5]))},{path:"/history",name:"history",component:()=>Ma(()=>import("./History-beWEVuSy.js"),__vite__mapDeps([6,7]))},{path:"/:pathMatch(.*)*",redirect:{name:"login"}}]});qS.beforeEach(t=>{if(!t.meta.requiresWallet)return!0;const e=!!localStorage.getItem("auth_token"),n=!!localStorage.getItem("walletAddress");return e||n?!0:{name:"login"}});const T0=bk(F3);T0.use(Sk());T0.use(qS);T0.mount("#app");export{ln as F,Eo as R,q1 as S,pa as _,_f as a,Ce as b,Ue as c,ee as d,ft as e,ks as f,Ps as g,Tf as h,Se as i,rt as j,GS as k,c1 as l,iB as m,Hc as n,Xo as o,tu as p,mg as q,Ie as r,a1 as s,Oe as t,fn as u,yg as v,gr as w,Xe as x,Rx as y};

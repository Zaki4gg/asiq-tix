const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Admin_Dashboard-DAo40IpI.js","assets/Admin_Dashboard-aZ9nQjo9.css","assets/Promoter_Dashboard-BmulPgMa.js","assets/Promoter_Dashboard-DujdnGJz.css","assets/Profile-CV15128M.js","assets/Profile-DiDHWdbE.css","assets/LogoutConfirm-BlMcM1Qi.js","assets/LogoutConfirm-BnB5lI_g.css","assets/Wallet-gf85q0_k.js","assets/Wallet-BFXQozc4.css","assets/History-CsAdnEDS.js","assets/History-DZMQk71l.css","assets/Promoter_EventTransactions-YFkDxkxk.js","assets/Promoter_EventTransactions-CPDFh58c.css","assets/Admin_EventTransactions-DZn5Yf80.js","assets/Admin_EventTransactions-BWd17dux.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function J1(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const St={},Za=[],Fi=()=>{},fE=()=>!1,Jd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),eg=t=>t.startsWith("onUpdate:"),jn=Object.assign,tg=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ZS=Object.prototype.hasOwnProperty,bt=(t,e)=>ZS.call(t,e),He=Array.isArray,Qa=t=>lu(t)==="[object Map]",Pc=t=>lu(t)==="[object Set]",Wv=t=>lu(t)==="[object Date]",Ke=t=>typeof t=="function",nn=t=>typeof t=="string",Vi=t=>typeof t=="symbol",It=t=>t!==null&&typeof t=="object",dE=t=>(It(t)||Ke(t))&&Ke(t.then)&&Ke(t.catch),hE=Object.prototype.toString,lu=t=>hE.call(t),QS=t=>lu(t).slice(8,-1),pE=t=>lu(t)==="[object Object]",ng=t=>nn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,dl=J1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),eh=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},JS=/-\w/g,Zr=eh(t=>t.replace(JS,e=>e.slice(1).toUpperCase())),e8=/\B([A-Z])/g,Ss=eh(t=>t.replace(e8,"-$1").toLowerCase()),th=eh(t=>t.charAt(0).toUpperCase()+t.slice(1)),jh=eh(t=>t?`on${th(t)}`:""),ds=(t,e)=>!Object.is(t,e),Ef=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},gE=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Jf=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let qv;const nh=()=>qv||(qv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function go(t){if(He(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=nn(r)?i8(r):go(r);if(i)for(const o in i)e[o]=i[o]}return e}else if(nn(t)||It(t))return t}const t8=/;(?![^(]*\))/g,n8=/:([^]+)/,r8=/\/\*[^]*?\*\//g;function i8(t){const e={};return t.replace(r8,"").split(t8).forEach(n=>{if(n){const r=n.split(n8);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function aa(t){let e="";if(nn(t))e=t;else if(He(t))for(let n=0;n<t.length;n++){const r=aa(t[n]);r&&(e+=r+" ")}else if(It(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const o8="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s8=J1(o8);function vE(t){return!!t||t===""}function a8(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=uu(t[r],e[r]);return n}function uu(t,e){if(t===e)return!0;let n=Wv(t),r=Wv(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Vi(t),r=Vi(e),n||r)return t===e;if(n=He(t),r=He(e),n||r)return n&&r?a8(t,e):!1;if(n=It(t),r=It(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const s in t){const a=t.hasOwnProperty(s),c=e.hasOwnProperty(s);if(a&&!c||!a&&c||!uu(t[s],e[s]))return!1}}return String(t)===String(e)}function rg(t,e){return t.findIndex(n=>uu(n,e))}const yE=t=>!!(t&&t.__v_isRef===!0),ke=t=>nn(t)?t:t==null?"":He(t)||It(t)&&(t.toString===hE||!Ke(t.toString))?yE(t)?ke(t.value):JSON.stringify(t,mE,2):String(t),mE=(t,e)=>yE(e)?mE(t,e.value):Qa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],o)=>(n[Kh(r,o)+" =>"]=i,n),{})}:Pc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Kh(n))}:Vi(e)?Kh(e):It(e)&&!He(e)&&!pE(e)?String(e):e,Kh=(t,e="")=>{var n;return Vi(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let fr;class wE{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fr,!e&&fr&&(this.index=(fr.scopes||(fr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=fr;try{return fr=this,e()}finally{fr=n}}}on(){++this._on===1&&(this.prevScope=fr,fr=this)}off(){this._on>0&&--this._on===0&&(fr=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function c8(t){return new wE(t)}function l8(){return fr}let Tt;const Gh=new WeakSet;class bE{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fr&&fr.active&&fr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gh.has(this)&&(Gh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xE(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Yv(this),AE(this);const e=Tt,n=gi;Tt=this,gi=!0;try{return this.fn()}finally{_E(this),Tt=e,gi=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)sg(e);this.deps=this.depsTail=void 0,Yv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_p(this)&&this.run()}get dirty(){return _p(this)}}let EE=0,hl,pl;function xE(t,e=!1){if(t.flags|=8,e){t.next=pl,pl=t;return}t.next=hl,hl=t}function ig(){EE++}function og(){if(--EE>0)return;if(pl){let e=pl;for(pl=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;hl;){let e=hl;for(hl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function AE(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function _E(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),sg(r),u8(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function _p(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(CE(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function CE(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Pl)||(t.globalVersion=Pl,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!_p(t))))return;t.flags|=2;const e=t.dep,n=Tt,r=gi;Tt=t,gi=!0;try{AE(t);const i=t.fn(t._value);(e.version===0||ds(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Tt=n,gi=r,_E(t),t.flags&=-3}}function sg(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)sg(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function u8(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let gi=!0;const SE=[];function Co(){SE.push(gi),gi=!1}function So(){const t=SE.pop();gi=t===void 0?!0:t}function Yv(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Tt;Tt=void 0;try{e()}finally{Tt=n}}}let Pl=0;class f8{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ag{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Tt||!gi||Tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Tt)n=this.activeLink=new f8(Tt,this),Tt.deps?(n.prevDep=Tt.depsTail,Tt.depsTail.nextDep=n,Tt.depsTail=n):Tt.deps=Tt.depsTail=n,IE(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Tt.depsTail,n.nextDep=void 0,Tt.depsTail.nextDep=n,Tt.depsTail=n,Tt.deps===n&&(Tt.deps=r)}return n}trigger(e){this.version++,Pl++,this.notify(e)}notify(e){ig();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{og()}}}function IE(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)IE(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Cp=new WeakMap,na=Symbol(""),Sp=Symbol(""),Nl=Symbol("");function Fn(t,e,n){if(gi&&Tt){let r=Cp.get(t);r||Cp.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new ag),i.map=r,i.key=n),i.track()}}function uo(t,e,n,r,i,o){const s=Cp.get(t);if(!s){Pl++;return}const a=c=>{c&&c.trigger()};if(ig(),e==="clear")s.forEach(a);else{const c=He(t),l=c&&ng(n);if(c&&n==="length"){const u=Number(r);s.forEach((f,d)=>{(d==="length"||d===Nl||!Vi(d)&&d>=u)&&a(f)})}else switch((n!==void 0||s.has(void 0))&&a(s.get(n)),l&&a(s.get(Nl)),e){case"add":c?l&&a(s.get("length")):(a(s.get(na)),Qa(t)&&a(s.get(Sp)));break;case"delete":c||(a(s.get(na)),Qa(t)&&a(s.get(Sp)));break;case"set":Qa(t)&&a(s.get(na));break}}og()}function Ea(t){const e=wt(t);return e===t?e:(Fn(e,"iterate",Nl),Yr(t)?e:e.map(In))}function rh(t){return Fn(t=wt(t),"iterate",Nl),t}const d8={__proto__:null,[Symbol.iterator](){return zh(this,Symbol.iterator,In)},concat(...t){return Ea(this).concat(...t.map(e=>He(e)?Ea(e):e))},entries(){return zh(this,"entries",t=>(t[1]=In(t[1]),t))},every(t,e){return Yi(this,"every",t,e,void 0,arguments)},filter(t,e){return Yi(this,"filter",t,e,n=>n.map(In),arguments)},find(t,e){return Yi(this,"find",t,e,In,arguments)},findIndex(t,e){return Yi(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Yi(this,"findLast",t,e,In,arguments)},findLastIndex(t,e){return Yi(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Yi(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wh(this,"includes",t)},indexOf(...t){return Wh(this,"indexOf",t)},join(t){return Ea(this).join(t)},lastIndexOf(...t){return Wh(this,"lastIndexOf",t)},map(t,e){return Yi(this,"map",t,e,void 0,arguments)},pop(){return Fc(this,"pop")},push(...t){return Fc(this,"push",t)},reduce(t,...e){return Xv(this,"reduce",t,e)},reduceRight(t,...e){return Xv(this,"reduceRight",t,e)},shift(){return Fc(this,"shift")},some(t,e){return Yi(this,"some",t,e,void 0,arguments)},splice(...t){return Fc(this,"splice",t)},toReversed(){return Ea(this).toReversed()},toSorted(t){return Ea(this).toSorted(t)},toSpliced(...t){return Ea(this).toSpliced(...t)},unshift(...t){return Fc(this,"unshift",t)},values(){return zh(this,"values",In)}};function zh(t,e,n){const r=rh(t),i=r[e]();return r!==t&&!Yr(t)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.done||(o.value=n(o.value)),o}),i}const h8=Array.prototype;function Yi(t,e,n,r,i,o){const s=rh(t),a=s!==t&&!Yr(t),c=s[e];if(c!==h8[e]){const f=c.apply(t,o);return a?In(f):f}let l=n;s!==t&&(a?l=function(f,d){return n.call(this,In(f),d,t)}:n.length>2&&(l=function(f,d){return n.call(this,f,d,t)}));const u=c.call(s,l,r);return a&&i?i(u):u}function Xv(t,e,n,r){const i=rh(t);let o=n;return i!==t&&(Yr(t)?n.length>3&&(o=function(s,a,c){return n.call(this,s,a,c,t)}):o=function(s,a,c){return n.call(this,s,In(a),c,t)}),i[e](o,...r)}function Wh(t,e,n){const r=wt(t);Fn(r,"iterate",Nl);const i=r[e](...n);return(i===-1||i===!1)&&ug(n[0])?(n[0]=wt(n[0]),r[e](...n)):i}function Fc(t,e,n=[]){Co(),ig();const r=wt(t)[e].apply(t,n);return og(),So(),r}const p8=J1("__proto__,__v_isRef,__isVue"),TE=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Vi));function g8(t){Vi(t)||(t=String(t));const e=wt(this);return Fn(e,"has",t),e.hasOwnProperty(t)}class OE{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?C8:kE:o?NE:PE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=He(e);if(!i){let c;if(s&&(c=d8[n]))return c;if(n==="hasOwnProperty")return g8}const a=Reflect.get(e,n,Vn(e)?e:r);if((Vi(n)?TE.has(n):p8(n))||(i||Fn(e,"get",n),o))return a;if(Vn(a)){const c=s&&ng(n)?a:a.value;return i&&It(c)?Tp(c):c}return It(a)?i?Tp(a):hc(a):a}}class RE extends OE{constructor(e=!1){super(!1,e)}set(e,n,r,i){let o=e[n];if(!this._isShallow){const c=ws(o);if(!Yr(r)&&!ws(r)&&(o=wt(o),r=wt(r)),!He(e)&&Vn(o)&&!Vn(r))return c||(o.value=r),!0}const s=He(e)&&ng(n)?Number(n)<e.length:bt(e,n),a=Reflect.set(e,n,r,Vn(e)?e:i);return e===wt(i)&&(s?ds(r,o)&&uo(e,"set",n,r):uo(e,"add",n,r)),a}deleteProperty(e,n){const r=bt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&uo(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Vi(n)||!TE.has(n))&&Fn(e,"has",n),r}ownKeys(e){return Fn(e,"iterate",He(e)?"length":na),Reflect.ownKeys(e)}}class v8 extends OE{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const y8=new RE,m8=new v8,w8=new RE(!0);const Ip=t=>t,Ou=t=>Reflect.getPrototypeOf(t);function b8(t,e,n){return function(...r){const i=this.__v_raw,o=wt(i),s=Qa(o),a=t==="entries"||t===Symbol.iterator&&s,c=t==="keys"&&s,l=i[t](...r),u=n?Ip:e?ed:In;return!e&&Fn(o,"iterate",c?Sp:na),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:a?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function Ru(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function E8(t,e){const n={get(i){const o=this.__v_raw,s=wt(o),a=wt(i);t||(ds(i,a)&&Fn(s,"get",i),Fn(s,"get",a));const{has:c}=Ou(s),l=e?Ip:t?ed:In;if(c.call(s,i))return l(o.get(i));if(c.call(s,a))return l(o.get(a));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!t&&Fn(wt(i),"iterate",na),i.size},has(i){const o=this.__v_raw,s=wt(o),a=wt(i);return t||(ds(i,a)&&Fn(s,"has",i),Fn(s,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const s=this,a=s.__v_raw,c=wt(a),l=e?Ip:t?ed:In;return!t&&Fn(c,"iterate",na),a.forEach((u,f)=>i.call(o,l(u),l(f),s))}};return jn(n,t?{add:Ru("add"),set:Ru("set"),delete:Ru("delete"),clear:Ru("clear")}:{add(i){!e&&!Yr(i)&&!ws(i)&&(i=wt(i));const o=wt(this);return Ou(o).has.call(o,i)||(o.add(i),uo(o,"add",i,i)),this},set(i,o){!e&&!Yr(o)&&!ws(o)&&(o=wt(o));const s=wt(this),{has:a,get:c}=Ou(s);let l=a.call(s,i);l||(i=wt(i),l=a.call(s,i));const u=c.call(s,i);return s.set(i,o),l?ds(o,u)&&uo(s,"set",i,o):uo(s,"add",i,o),this},delete(i){const o=wt(this),{has:s,get:a}=Ou(o);let c=s.call(o,i);c||(i=wt(i),c=s.call(o,i)),a&&a.call(o,i);const l=o.delete(i);return c&&uo(o,"delete",i,void 0),l},clear(){const i=wt(this),o=i.size!==0,s=i.clear();return o&&uo(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=b8(i,t,e)}),n}function cg(t,e){const n=E8(t,e);return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(bt(n,i)&&i in r?n:r,i,o)}const x8={get:cg(!1,!1)},A8={get:cg(!1,!0)},_8={get:cg(!0,!1)};const PE=new WeakMap,NE=new WeakMap,kE=new WeakMap,C8=new WeakMap;function S8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function I8(t){return t.__v_skip||!Object.isExtensible(t)?0:S8(QS(t))}function hc(t){return ws(t)?t:lg(t,!1,y8,x8,PE)}function ME(t){return lg(t,!1,w8,A8,NE)}function Tp(t){return lg(t,!0,m8,_8,kE)}function lg(t,e,n,r,i){if(!It(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=I8(t);if(o===0)return t;const s=i.get(t);if(s)return s;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Ja(t){return ws(t)?Ja(t.__v_raw):!!(t&&t.__v_isReactive)}function ws(t){return!!(t&&t.__v_isReadonly)}function Yr(t){return!!(t&&t.__v_isShallow)}function ug(t){return t?!!t.__v_raw:!1}function wt(t){const e=t&&t.__v_raw;return e?wt(e):t}function DE(t){return!bt(t,"__v_skip")&&Object.isExtensible(t)&&gE(t,"__v_skip",!0),t}const In=t=>It(t)?hc(t):t,ed=t=>It(t)?Tp(t):t;function Vn(t){return t?t.__v_isRef===!0:!1}function Pe(t){return BE(t,!1)}function T8(t){return BE(t,!0)}function BE(t,e){return Vn(t)?t:new O8(t,e)}class O8{constructor(e,n){this.dep=new ag,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:wt(e),this._value=n?e:In(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Yr(e)||ws(e);e=r?e:wt(e),ds(e,n)&&(this._rawValue=e,this._value=r?e:In(e),this.dep.trigger())}}function yn(t){return Vn(t)?t.value:t}const R8={get:(t,e,n)=>e==="__v_raw"?t:yn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Vn(i)&&!Vn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function LE(t){return Ja(t)?t:new Proxy(t,R8)}class P8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ag(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return xE(this,!0),!0}get value(){const e=this.dep.track();return CE(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function N8(t,e,n=!1){let r,i;return Ke(t)?r=t:(r=t.get,i=t.set),new P8(r,i,n)}const Pu={},td=new WeakMap;let Us;function k8(t,e=!1,n=Us){if(n){let r=td.get(n);r||td.set(n,r=[]),r.push(t)}}function M8(t,e,n=St){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:a,call:c}=n,l=E=>i?E:Yr(E)||i===!1||i===0?fo(E,1):fo(E);let u,f,d,h,p=!1,g=!1;if(Vn(t)?(f=()=>t.value,p=Yr(t)):Ja(t)?(f=()=>l(t),p=!0):He(t)?(g=!0,p=t.some(E=>Ja(E)||Yr(E)),f=()=>t.map(E=>{if(Vn(E))return E.value;if(Ja(E))return l(E);if(Ke(E))return c?c(E,2):E()})):Ke(t)?e?f=c?()=>c(t,2):t:f=()=>{if(d){Co();try{d()}finally{So()}}const E=Us;Us=u;try{return c?c(t,3,[h]):t(h)}finally{Us=E}}:f=Fi,e&&i){const E=f,S=i===!0?1/0:i;f=()=>fo(E(),S)}const y=l8(),v=()=>{u.stop(),y&&y.active&&tg(y.effects,u)};if(o&&e){const E=e;e=(...S)=>{E(...S),v()}}let m=g?new Array(t.length).fill(Pu):Pu;const w=E=>{if(!(!(u.flags&1)||!u.dirty&&!E))if(e){const S=u.run();if(i||p||(g?S.some((O,F)=>ds(O,m[F])):ds(S,m))){d&&d();const O=Us;Us=u;try{const F=[S,m===Pu?void 0:g&&m[0]===Pu?[]:m,h];m=S,c?c(e,3,F):e(...F)}finally{Us=O}}}else u.run()};return a&&a(w),u=new bE(f),u.scheduler=s?()=>s(w,!1):w,h=E=>k8(E,!1,u),d=u.onStop=()=>{const E=td.get(u);if(E){if(c)c(E,4);else for(const S of E)S();td.delete(u)}},e?r?w(!0):m=u.run():s?s(w.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function fo(t,e=1/0,n){if(e<=0||!It(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Vn(t))fo(t.value,e,n);else if(He(t))for(let r=0;r<t.length;r++)fo(t[r],e,n);else if(Pc(t)||Qa(t))t.forEach(r=>{fo(r,e,n)});else if(pE(t)){for(const r in t)fo(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&fo(t[r],e,n)}return t}function fu(t,e,n,r){try{return r?t(...r):t()}catch(i){ih(i,e,n)}}function ji(t,e,n,r){if(Ke(t)){const i=fu(t,e,n,r);return i&&dE(i)&&i.catch(o=>{ih(o,e,n)}),i}if(He(t)){const i=[];for(let o=0;o<t.length;o++)i.push(ji(t[o],e,n,r));return i}}function ih(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||St;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,c,l)===!1)return}a=a.parent}if(o){Co(),fu(o,null,10,[t,c,l]),So();return}}D8(t,n,i,r,s)}function D8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Qn=[];let Si=-1;const ec=[];let Xo=null,Pa=0;const FE=Promise.resolve();let nd=null;function fg(t){const e=nd||FE;return t?e.then(this?t.bind(this):t):e}function B8(t){let e=Si+1,n=Qn.length;for(;e<n;){const r=e+n>>>1,i=Qn[r],o=kl(i);o<t||o===t&&i.flags&2?e=r+1:n=r}return e}function dg(t){if(!(t.flags&1)){const e=kl(t),n=Qn[Qn.length-1];!n||!(t.flags&2)&&e>=kl(n)?Qn.push(t):Qn.splice(B8(e),0,t),t.flags|=1,UE()}}function UE(){nd||(nd=FE.then($E))}function L8(t){He(t)?ec.push(...t):Xo&&t.id===-1?Xo.splice(Pa+1,0,t):t.flags&1||(ec.push(t),t.flags|=1),UE()}function Zv(t,e,n=Si+1){for(;n<Qn.length;n++){const r=Qn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Qn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function HE(t){if(ec.length){const e=[...new Set(ec)].sort((n,r)=>kl(n)-kl(r));if(ec.length=0,Xo){Xo.push(...e);return}for(Xo=e,Pa=0;Pa<Xo.length;Pa++){const n=Xo[Pa];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Xo=null,Pa=0}}const kl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function $E(t){try{for(Si=0;Si<Qn.length;Si++){const e=Qn[Si];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Si<Qn.length;Si++){const e=Qn[Si];e&&(e.flags&=-2)}Si=-1,Qn.length=0,HE(),nd=null,(Qn.length||ec.length)&&$E()}}let Pr=null,VE=null;function rd(t){const e=Pr;return Pr=t,VE=t&&t.type.__scopeId||null,e}function Ji(t,e=Pr,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&sd(-1);const o=rd(e);let s;try{s=t(...i)}finally{rd(o),r._d&&sd(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function ur(t,e){if(Pr===null)return t;const n=ch(Pr),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,a,c=St]=e[i];o&&(Ke(o)&&(o={mounted:o,updated:o}),o.deep&&fo(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:a,modifiers:c}))}return t}function Ps(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let c=a.dir[r];c&&(Co(),ji(c,n,8,[t.el,a,t,e]),So())}}const F8=Symbol("_vte"),U8=t=>t.__isTeleport,H8=Symbol("_leaveCb");function hg(t,e){t.shapeFlag&6&&t.component?(t.transition=e,hg(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function jE(t,e){return Ke(t)?jn({name:t.name},e,{setup:t}):t}function KE(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const id=new WeakMap;function gl(t,e,n,r,i=!1){if(He(t)){t.forEach((p,g)=>gl(p,e&&(He(e)?e[g]:e),n,r,i));return}if(vl(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&gl(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?ch(r.component):r.el,s=i?null:o,{i:a,r:c}=t,l=e&&e.r,u=a.refs===St?a.refs={}:a.refs,f=a.setupState,d=wt(f),h=f===St?fE:p=>bt(d,p);if(l!=null&&l!==c){if(Qv(e),nn(l))u[l]=null,h(l)&&(f[l]=null);else if(Vn(l)){l.value=null;const p=e;p.k&&(u[p.k]=null)}}if(Ke(c))fu(c,a,12,[s,u]);else{const p=nn(c),g=Vn(c);if(p||g){const y=()=>{if(t.f){const v=p?h(c)?f[c]:u[c]:c.value;if(i)He(v)&&tg(v,o);else if(He(v))v.includes(o)||v.push(o);else if(p)u[c]=[o],h(c)&&(f[c]=u[c]);else{const m=[o];c.value=m,t.k&&(u[t.k]=m)}}else p?(u[c]=s,h(c)&&(f[c]=s)):g&&(c.value=s,t.k&&(u[t.k]=s))};if(s){const v=()=>{y(),id.delete(t)};v.id=-1,id.set(t,v),Ar(v,n)}else Qv(t),y()}}}function Qv(t){const e=id.get(t);e&&(e.flags|=8,id.delete(t))}nh().requestIdleCallback;nh().cancelIdleCallback;const vl=t=>!!t.type.__asyncLoader,GE=t=>t.type.__isKeepAlive;function $8(t,e){zE(t,"a",e)}function V8(t,e){zE(t,"da",e)}function zE(t,e,n=Hn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(oh(e,r,n),n){let i=n.parent;for(;i&&i.parent;)GE(i.parent.vnode)&&j8(r,e,n,i),i=i.parent}}function j8(t,e,n,r){const i=oh(e,t,r,!0);gg(()=>{tg(r[e],i)},n)}function oh(t,e,n=Hn,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{Co();const a=hu(n),c=ji(e,n,t,s);return a(),So(),c});return r?i.unshift(o):i.push(o),o}}const Ro=t=>(e,n=Hn)=>{(!Dl||t==="sp")&&oh(t,(...r)=>e(...r),n)},K8=Ro("bm"),du=Ro("m"),G8=Ro("bu"),z8=Ro("u"),pg=Ro("bum"),gg=Ro("um"),W8=Ro("sp"),q8=Ro("rtg"),Y8=Ro("rtc");function X8(t,e=Hn){oh("ec",t,e)}const Z8="components";function uV(t,e){return J8(Z8,t,!0,e)||t}const Q8=Symbol.for("v-ndc");function J8(t,e,n=!0,r=!1){const i=Pr||Hn;if(i){const o=i.type;{const a=V4(o,!1);if(a&&(a===e||a===Zr(e)||a===th(Zr(e))))return o}const s=Jv(i[t]||o[t],e)||Jv(i.appContext[t],e);return!s&&r?o:s}}function Jv(t,e){return t&&(t[e]||t[Zr(e)]||t[th(Zr(e))])}function vg(t,e,n,r){let i;const o=n,s=He(t);if(s||nn(t)){const a=s&&Ja(t);let c=!1,l=!1;a&&(c=!Yr(t),l=ws(t),t=rh(t)),i=new Array(t.length);for(let u=0,f=t.length;u<f;u++)i[u]=e(c?l?ed(In(t[u])):In(t[u]):t[u],u,void 0,o)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,o)}else if(It(t))if(t[Symbol.iterator])i=Array.from(t,(a,c)=>e(a,c,void 0,o));else{const a=Object.keys(t);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=e(t[u],u,c,o)}}else i=[];return i}const Op=t=>t?dx(t)?ch(t):Op(t.parent):null,yl=jn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Op(t.parent),$root:t=>Op(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>qE(t),$forceUpdate:t=>t.f||(t.f=()=>{dg(t.update)}),$nextTick:t=>t.n||(t.n=fg.bind(t.proxy)),$watch:t=>b4.bind(t)}),qh=(t,e)=>t!==St&&!t.__isScriptSetup&&bt(t,e),e4={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const h=s[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(qh(r,e))return s[e]=1,r[e];if(i!==St&&bt(i,e))return s[e]=2,i[e];if((l=t.propsOptions[0])&&bt(l,e))return s[e]=3,o[e];if(n!==St&&bt(n,e))return s[e]=4,n[e];Rp&&(s[e]=0)}}const u=yl[e];let f,d;if(u)return e==="$attrs"&&Fn(t.attrs,"get",""),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==St&&bt(n,e))return s[e]=4,n[e];if(d=c.config.globalProperties,bt(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return qh(i,e)?(i[e]=n,!0):r!==St&&bt(r,e)?(r[e]=n,!0):bt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o,type:s}},a){let c,l;return!!(n[a]||t!==St&&a[0]!=="$"&&bt(t,a)||qh(e,a)||(c=o[0])&&bt(c,a)||bt(r,a)||bt(yl,a)||bt(i.config.globalProperties,a)||(l=s.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:bt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function ey(t){return He(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Rp=!0;function t4(t){const e=qE(t),n=t.proxy,r=t.ctx;Rp=!1,e.beforeCreate&&ty(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:p,activated:g,deactivated:y,beforeDestroy:v,beforeUnmount:m,destroyed:w,unmounted:E,render:S,renderTracked:O,renderTriggered:F,errorCaptured:$,serverPrefetch:U,expose:B,inheritAttrs:Y,components:j,directives:L,filters:I}=e;if(l&&n4(l,r,null),s)for(const G in s){const b=s[G];Ke(b)&&(r[G]=b.bind(n))}if(i){const G=i.call(n,n);It(G)&&(t.data=hc(G))}if(Rp=!0,o)for(const G in o){const b=o[G],C=Ke(b)?b.bind(n,n):Ke(b.get)?b.get.bind(n,n):Fi,T=!Ke(b)&&Ke(b.set)?b.set.bind(n):Fi,k=je({get:C,set:T});Object.defineProperty(r,G,{enumerable:!0,configurable:!0,get:()=>k.value,set:A=>k.value=A})}if(a)for(const G in a)WE(a[G],r,n,G);if(c){const G=Ke(c)?c.call(n):c;Reflect.ownKeys(G).forEach(b=>{xf(b,G[b])})}u&&ty(u,t,"c");function P(G,b){He(b)?b.forEach(C=>G(C.bind(n))):b&&G(b.bind(n))}if(P(K8,f),P(du,d),P(G8,h),P(z8,p),P($8,g),P(V8,y),P(X8,$),P(Y8,O),P(q8,F),P(pg,m),P(gg,E),P(W8,U),He(B))if(B.length){const G=t.exposed||(t.exposed={});B.forEach(b=>{Object.defineProperty(G,b,{get:()=>n[b],set:C=>n[b]=C,enumerable:!0})})}else t.exposed||(t.exposed={});S&&t.render===Fi&&(t.render=S),Y!=null&&(t.inheritAttrs=Y),j&&(t.components=j),L&&(t.directives=L),U&&KE(t)}function n4(t,e,n=Fi){He(t)&&(t=Pp(t));for(const r in t){const i=t[r];let o;It(i)?"default"in i?o=vi(i.from||r,i.default,!0):o=vi(i.from||r):o=vi(i),Vn(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[r]=o}}function ty(t,e,n){ji(He(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function WE(t,e,n,r){let i=r.includes(".")?ax(n,r):()=>n[r];if(nn(t)){const o=e[t];Ke(o)&&vr(i,o)}else if(Ke(t))vr(i,t.bind(n));else if(It(t))if(He(t))t.forEach(o=>WE(o,e,n,r));else{const o=Ke(t.handler)?t.handler.bind(n):e[t.handler];Ke(o)&&vr(i,o,t)}}function qE(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let c;return a?c=a:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(l=>od(c,l,s,!0)),od(c,e,s)),It(e)&&o.set(e,c),c}function od(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&od(t,o,n,!0),i&&i.forEach(s=>od(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const a=r4[s]||n&&n[s];t[s]=a?a(t[s],e[s]):e[s]}return t}const r4={data:ny,props:ry,emits:ry,methods:el,computed:el,beforeCreate:Wn,created:Wn,beforeMount:Wn,mounted:Wn,beforeUpdate:Wn,updated:Wn,beforeDestroy:Wn,beforeUnmount:Wn,destroyed:Wn,unmounted:Wn,activated:Wn,deactivated:Wn,errorCaptured:Wn,serverPrefetch:Wn,components:el,directives:el,watch:o4,provide:ny,inject:i4};function ny(t,e){return e?t?function(){return jn(Ke(t)?t.call(this,this):t,Ke(e)?e.call(this,this):e)}:e:t}function i4(t,e){return el(Pp(t),Pp(e))}function Pp(t){if(He(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Wn(t,e){return t?[...new Set([].concat(t,e))]:e}function el(t,e){return t?jn(Object.create(null),t,e):e}function ry(t,e){return t?He(t)&&He(e)?[...new Set([...t,...e])]:jn(Object.create(null),ey(t),ey(e??{})):e}function o4(t,e){if(!t)return e;if(!e)return t;const n=jn(Object.create(null),t);for(const r in e)n[r]=Wn(t[r],e[r]);return n}function YE(){return{app:null,config:{isNativeTag:fE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let s4=0;function a4(t,e){return function(r,i=null){Ke(r)||(r=jn({},r)),i!=null&&!It(i)&&(i=null);const o=YE(),s=new WeakSet,a=[];let c=!1;const l=o.app={_uid:s4++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:K4,get config(){return o.config},set config(u){},use(u,...f){return s.has(u)||(u&&Ke(u.install)?(s.add(u),u.install(l,...f)):Ke(u)&&(s.add(u),u(l,...f))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,f){return f?(o.components[u]=f,l):o.components[u]},directive(u,f){return f?(o.directives[u]=f,l):o.directives[u]},mount(u,f,d){if(!c){const h=l._ceVNode||Bt(r,i);return h.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),t(h,u,d),c=!0,l._container=u,u.__vue_app__=l,ch(h.component)}},onUnmount(u){a.push(u)},unmount(){c&&(ji(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,f){return o.provides[u]=f,l},runWithContext(u){const f=tc;tc=l;try{return u()}finally{tc=f}}};return l}}let tc=null;function xf(t,e){if(Hn){let n=Hn.provides;const r=Hn.parent&&Hn.parent.provides;r===n&&(n=Hn.provides=Object.create(r)),n[t]=e}}function vi(t,e,n=!1){const r=L4();if(r||tc){let i=tc?tc._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ke(e)?e.call(r&&r.proxy):e}}const XE={},ZE=()=>Object.create(XE),QE=t=>Object.getPrototypeOf(t)===XE;function c4(t,e,n,r=!1){const i={},o=ZE();t.propsDefaults=Object.create(null),JE(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:ME(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function l4(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=wt(i),[c]=t.propsOptions;let l=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(sh(t.emitsOptions,d))continue;const h=e[d];if(c)if(bt(o,d))h!==o[d]&&(o[d]=h,l=!0);else{const p=Zr(d);i[p]=Np(c,a,p,h,t,!1)}else h!==o[d]&&(o[d]=h,l=!0)}}}else{JE(t,e,i,o)&&(l=!0);let u;for(const f in a)(!e||!bt(e,f)&&((u=Ss(f))===f||!bt(e,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=Np(c,a,f,void 0,t,!0)):delete i[f]);if(o!==a)for(const f in o)(!e||!bt(e,f))&&(delete o[f],l=!0)}l&&uo(t.attrs,"set","")}function JE(t,e,n,r){const[i,o]=t.propsOptions;let s=!1,a;if(e)for(let c in e){if(dl(c))continue;const l=e[c];let u;i&&bt(i,u=Zr(c))?!o||!o.includes(u)?n[u]=l:(a||(a={}))[u]=l:sh(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,s=!0)}if(o){const c=wt(n),l=a||St;for(let u=0;u<o.length;u++){const f=o[u];n[f]=Np(i,c,f,l[f],t,!bt(l,f))}}return s}function Np(t,e,n,r,i,o){const s=t[n];if(s!=null){const a=bt(s,"default");if(a&&r===void 0){const c=s.default;if(s.type!==Function&&!s.skipFactory&&Ke(c)){const{propsDefaults:l}=i;if(n in l)r=l[n];else{const u=hu(i);r=l[n]=c.call(null,e),u()}}else r=c;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!a?r=!1:s[1]&&(r===""||r===Ss(n))&&(r=!0))}return r}const u4=new WeakMap;function ex(t,e,n=!1){const r=n?u4:e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let c=!1;if(!Ke(t)){const u=f=>{c=!0;const[d,h]=ex(f,e,!0);jn(s,d),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!c)return It(t)&&r.set(t,Za),Za;if(He(o))for(let u=0;u<o.length;u++){const f=Zr(o[u]);iy(f)&&(s[f]=St)}else if(o)for(const u in o){const f=Zr(u);if(iy(f)){const d=o[u],h=s[f]=He(d)||Ke(d)?{type:d}:jn({},d),p=h.type;let g=!1,y=!0;if(He(p))for(let v=0;v<p.length;++v){const m=p[v],w=Ke(m)&&m.name;if(w==="Boolean"){g=!0;break}else w==="String"&&(y=!1)}else g=Ke(p)&&p.name==="Boolean";h[0]=g,h[1]=y,(g||bt(h,"default"))&&a.push(f)}}const l=[s,a];return It(t)&&r.set(t,l),l}function iy(t){return t[0]!=="$"&&!dl(t)}const yg=t=>t==="_"||t==="_ctx"||t==="$stable",mg=t=>He(t)?t.map(Ii):[Ii(t)],f4=(t,e,n)=>{if(e._n)return e;const r=Ji((...i)=>mg(e(...i)),n);return r._c=!1,r},tx=(t,e,n)=>{const r=t._ctx;for(const i in t){if(yg(i))continue;const o=t[i];if(Ke(o))e[i]=f4(i,o,r);else if(o!=null){const s=mg(o);e[i]=()=>s}}},nx=(t,e)=>{const n=mg(e);t.slots.default=()=>n},rx=(t,e,n)=>{for(const r in e)(n||!yg(r))&&(t[r]=e[r])},d4=(t,e,n)=>{const r=t.slots=ZE();if(t.vnode.shapeFlag&32){const i=e._;i?(rx(r,e,n),n&&gE(r,"_",i,!0)):tx(e,r)}else e&&nx(t,e)},h4=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=St;if(r.shapeFlag&32){const a=e._;a?n&&a===1?o=!1:rx(i,e,n):(o=!e.$stable,tx(e,i)),s=e}else e&&(nx(t,e),s={default:1});if(o)for(const a in i)!yg(a)&&s[a]==null&&delete i[a]},Ar=T4;function p4(t){return g4(t)}function g4(t,e){const n=nh();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=Fi,insertStaticContent:p}=t,g=(M,V,X,ie=null,te=null,ne=null,de=void 0,le=null,J=!!V.dynamicChildren)=>{if(M===V)return;M&&!Uc(M,V)&&(ie=N(M),A(M,te,ne,!0),M=null),V.patchFlag===-2&&(J=!1,V.dynamicChildren=null);const{type:ee,ref:ue,shapeFlag:ae}=V;switch(ee){case ah:y(M,V,X,ie);break;case bs:v(M,V,X,ie);break;case Af:M==null&&m(V,X,ie,de);break;case hr:j(M,V,X,ie,te,ne,de,le,J);break;default:ae&1?S(M,V,X,ie,te,ne,de,le,J):ae&6?L(M,V,X,ie,te,ne,de,le,J):(ae&64||ae&128)&&ee.process(M,V,X,ie,te,ne,de,le,J,Z)}ue!=null&&te?gl(ue,M&&M.ref,ne,V||M,!V):ue==null&&M&&M.ref!=null&&gl(M.ref,null,ne,M,!0)},y=(M,V,X,ie)=>{if(M==null)r(V.el=a(V.children),X,ie);else{const te=V.el=M.el;V.children!==M.children&&l(te,V.children)}},v=(M,V,X,ie)=>{M==null?r(V.el=c(V.children||""),X,ie):V.el=M.el},m=(M,V,X,ie)=>{[M.el,M.anchor]=p(M.children,V,X,ie,M.el,M.anchor)},w=({el:M,anchor:V},X,ie)=>{let te;for(;M&&M!==V;)te=d(M),r(M,X,ie),M=te;r(V,X,ie)},E=({el:M,anchor:V})=>{let X;for(;M&&M!==V;)X=d(M),i(M),M=X;i(V)},S=(M,V,X,ie,te,ne,de,le,J)=>{V.type==="svg"?de="svg":V.type==="math"&&(de="mathml"),M==null?O(V,X,ie,te,ne,de,le,J):U(M,V,te,ne,de,le,J)},O=(M,V,X,ie,te,ne,de,le)=>{let J,ee;const{props:ue,shapeFlag:ae,transition:ce,dirs:xe}=M;if(J=M.el=s(M.type,ne,ue&&ue.is,ue),ae&8?u(J,M.children):ae&16&&$(M.children,J,null,ie,te,Yh(M,ne),de,le),xe&&Ps(M,null,ie,"created"),F(J,M,M.scopeId,de,ie),ue){for(const $e in ue)$e!=="value"&&!dl($e)&&o(J,$e,null,ue[$e],ne,ie);"value"in ue&&o(J,"value",null,ue.value,ne),(ee=ue.onVnodeBeforeMount)&&Ei(ee,ie,M)}xe&&Ps(M,null,ie,"beforeMount");const Ce=v4(te,ce);Ce&&ce.beforeEnter(J),r(J,V,X),((ee=ue&&ue.onVnodeMounted)||Ce||xe)&&Ar(()=>{ee&&Ei(ee,ie,M),Ce&&ce.enter(J),xe&&Ps(M,null,ie,"mounted")},te)},F=(M,V,X,ie,te)=>{if(X&&h(M,X),ie)for(let ne=0;ne<ie.length;ne++)h(M,ie[ne]);if(te){let ne=te.subTree;if(V===ne||lx(ne.type)&&(ne.ssContent===V||ne.ssFallback===V)){const de=te.vnode;F(M,de,de.scopeId,de.slotScopeIds,te.parent)}}},$=(M,V,X,ie,te,ne,de,le,J=0)=>{for(let ee=J;ee<M.length;ee++){const ue=M[ee]=le?Zo(M[ee]):Ii(M[ee]);g(null,ue,V,X,ie,te,ne,de,le)}},U=(M,V,X,ie,te,ne,de)=>{const le=V.el=M.el;let{patchFlag:J,dynamicChildren:ee,dirs:ue}=V;J|=M.patchFlag&16;const ae=M.props||St,ce=V.props||St;let xe;if(X&&Ns(X,!1),(xe=ce.onVnodeBeforeUpdate)&&Ei(xe,X,V,M),ue&&Ps(V,M,X,"beforeUpdate"),X&&Ns(X,!0),(ae.innerHTML&&ce.innerHTML==null||ae.textContent&&ce.textContent==null)&&u(le,""),ee?B(M.dynamicChildren,ee,le,X,ie,Yh(V,te),ne):de||b(M,V,le,null,X,ie,Yh(V,te),ne,!1),J>0){if(J&16)Y(le,ae,ce,X,te);else if(J&2&&ae.class!==ce.class&&o(le,"class",null,ce.class,te),J&4&&o(le,"style",ae.style,ce.style,te),J&8){const Ce=V.dynamicProps;for(let $e=0;$e<Ce.length;$e++){const Ue=Ce[$e],ht=ae[Ue],At=ce[Ue];(At!==ht||Ue==="value")&&o(le,Ue,ht,At,te,X)}}J&1&&M.children!==V.children&&u(le,V.children)}else!de&&ee==null&&Y(le,ae,ce,X,te);((xe=ce.onVnodeUpdated)||ue)&&Ar(()=>{xe&&Ei(xe,X,V,M),ue&&Ps(V,M,X,"updated")},ie)},B=(M,V,X,ie,te,ne,de)=>{for(let le=0;le<V.length;le++){const J=M[le],ee=V[le],ue=J.el&&(J.type===hr||!Uc(J,ee)||J.shapeFlag&198)?f(J.el):X;g(J,ee,ue,null,ie,te,ne,de,!0)}},Y=(M,V,X,ie,te)=>{if(V!==X){if(V!==St)for(const ne in V)!dl(ne)&&!(ne in X)&&o(M,ne,V[ne],null,te,ie);for(const ne in X){if(dl(ne))continue;const de=X[ne],le=V[ne];de!==le&&ne!=="value"&&o(M,ne,le,de,te,ie)}"value"in X&&o(M,"value",V.value,X.value,te)}},j=(M,V,X,ie,te,ne,de,le,J)=>{const ee=V.el=M?M.el:a(""),ue=V.anchor=M?M.anchor:a("");let{patchFlag:ae,dynamicChildren:ce,slotScopeIds:xe}=V;xe&&(le=le?le.concat(xe):xe),M==null?(r(ee,X,ie),r(ue,X,ie),$(V.children||[],X,ue,te,ne,de,le,J)):ae>0&&ae&64&&ce&&M.dynamicChildren?(B(M.dynamicChildren,ce,X,te,ne,de,le),(V.key!=null||te&&V===te.subTree)&&ix(M,V,!0)):b(M,V,X,ue,te,ne,de,le,J)},L=(M,V,X,ie,te,ne,de,le,J)=>{V.slotScopeIds=le,M==null?V.shapeFlag&512?te.ctx.activate(V,X,ie,de,J):I(V,X,ie,te,ne,de,J):x(M,V,J)},I=(M,V,X,ie,te,ne,de)=>{const le=M.component=B4(M,ie,te);if(GE(M)&&(le.ctx.renderer=Z),F4(le,!1,de),le.asyncDep){if(te&&te.registerDep(le,P,de),!M.el){const J=le.subTree=Bt(bs);v(null,J,V,X),M.placeholder=J.el}}else P(le,M,V,X,te,ne,de)},x=(M,V,X)=>{const ie=V.component=M.component;if(S4(M,V,X))if(ie.asyncDep&&!ie.asyncResolved){G(ie,V,X);return}else ie.next=V,ie.update();else V.el=M.el,ie.vnode=V},P=(M,V,X,ie,te,ne,de)=>{const le=()=>{if(M.isMounted){let{next:ae,bu:ce,u:xe,parent:Ce,vnode:$e}=M;{const Nn=ox(M);if(Nn){ae&&(ae.el=$e.el,G(M,ae,de)),Nn.asyncDep.then(()=>{M.isUnmounted||le()});return}}let Ue=ae,ht;Ns(M,!1),ae?(ae.el=$e.el,G(M,ae,de)):ae=$e,ce&&Ef(ce),(ht=ae.props&&ae.props.onVnodeBeforeUpdate)&&Ei(ht,Ce,ae,$e),Ns(M,!0);const At=sy(M),rn=M.subTree;M.subTree=At,g(rn,At,f(rn.el),N(rn),M,te,ne),ae.el=At.el,Ue===null&&I4(M,At.el),xe&&Ar(xe,te),(ht=ae.props&&ae.props.onVnodeUpdated)&&Ar(()=>Ei(ht,Ce,ae,$e),te)}else{let ae;const{el:ce,props:xe}=V,{bm:Ce,m:$e,parent:Ue,root:ht,type:At}=M,rn=vl(V);Ns(M,!1),Ce&&Ef(Ce),!rn&&(ae=xe&&xe.onVnodeBeforeMount)&&Ei(ae,Ue,V),Ns(M,!0);{ht.ce&&ht.ce._def.shadowRoot!==!1&&ht.ce._injectChildStyle(At);const Nn=M.subTree=sy(M);g(null,Nn,X,ie,M,te,ne),V.el=Nn.el}if($e&&Ar($e,te),!rn&&(ae=xe&&xe.onVnodeMounted)){const Nn=V;Ar(()=>Ei(ae,Ue,Nn),te)}(V.shapeFlag&256||Ue&&vl(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&M.a&&Ar(M.a,te),M.isMounted=!0,V=X=ie=null}};M.scope.on();const J=M.effect=new bE(le);M.scope.off();const ee=M.update=J.run.bind(J),ue=M.job=J.runIfDirty.bind(J);ue.i=M,ue.id=M.uid,J.scheduler=()=>dg(ue),Ns(M,!0),ee()},G=(M,V,X)=>{V.component=M;const ie=M.vnode.props;M.vnode=V,M.next=null,l4(M,V.props,ie,X),h4(M,V.children,X),Co(),Zv(M),So()},b=(M,V,X,ie,te,ne,de,le,J=!1)=>{const ee=M&&M.children,ue=M?M.shapeFlag:0,ae=V.children,{patchFlag:ce,shapeFlag:xe}=V;if(ce>0){if(ce&128){T(ee,ae,X,ie,te,ne,de,le,J);return}else if(ce&256){C(ee,ae,X,ie,te,ne,de,le,J);return}}xe&8?(ue&16&&H(ee,te,ne),ae!==ee&&u(X,ae)):ue&16?xe&16?T(ee,ae,X,ie,te,ne,de,le,J):H(ee,te,ne,!0):(ue&8&&u(X,""),xe&16&&$(ae,X,ie,te,ne,de,le,J))},C=(M,V,X,ie,te,ne,de,le,J)=>{M=M||Za,V=V||Za;const ee=M.length,ue=V.length,ae=Math.min(ee,ue);let ce;for(ce=0;ce<ae;ce++){const xe=V[ce]=J?Zo(V[ce]):Ii(V[ce]);g(M[ce],xe,X,null,te,ne,de,le,J)}ee>ue?H(M,te,ne,!0,!1,ae):$(V,X,ie,te,ne,de,le,J,ae)},T=(M,V,X,ie,te,ne,de,le,J)=>{let ee=0;const ue=V.length;let ae=M.length-1,ce=ue-1;for(;ee<=ae&&ee<=ce;){const xe=M[ee],Ce=V[ee]=J?Zo(V[ee]):Ii(V[ee]);if(Uc(xe,Ce))g(xe,Ce,X,null,te,ne,de,le,J);else break;ee++}for(;ee<=ae&&ee<=ce;){const xe=M[ae],Ce=V[ce]=J?Zo(V[ce]):Ii(V[ce]);if(Uc(xe,Ce))g(xe,Ce,X,null,te,ne,de,le,J);else break;ae--,ce--}if(ee>ae){if(ee<=ce){const xe=ce+1,Ce=xe<ue?V[xe].el:ie;for(;ee<=ce;)g(null,V[ee]=J?Zo(V[ee]):Ii(V[ee]),X,Ce,te,ne,de,le,J),ee++}}else if(ee>ce)for(;ee<=ae;)A(M[ee],te,ne,!0),ee++;else{const xe=ee,Ce=ee,$e=new Map;for(ee=Ce;ee<=ce;ee++){const ve=V[ee]=J?Zo(V[ee]):Ii(V[ee]);ve.key!=null&&$e.set(ve.key,ee)}let Ue,ht=0;const At=ce-Ce+1;let rn=!1,Nn=0;const Jr=new Array(At);for(ee=0;ee<At;ee++)Jr[ee]=0;for(ee=xe;ee<=ae;ee++){const ve=M[ee];if(ht>=At){A(ve,te,ne,!0);continue}let Q;if(ve.key!=null)Q=$e.get(ve.key);else for(Ue=Ce;Ue<=ce;Ue++)if(Jr[Ue-Ce]===0&&Uc(ve,V[Ue])){Q=Ue;break}Q===void 0?A(ve,te,ne,!0):(Jr[Q-Ce]=ee+1,Q>=Nn?Nn=Q:rn=!0,g(ve,V[Q],X,null,te,ne,de,le,J),ht++)}const qi=rn?y4(Jr):Za;for(Ue=qi.length-1,ee=At-1;ee>=0;ee--){const ve=Ce+ee,Q=V[ve],_e=V[ve+1],lt=ve+1<ue?_e.el||_e.placeholder:ie;Jr[ee]===0?g(null,Q,X,lt,te,ne,de,le,J):rn&&(Ue<0||ee!==qi[Ue]?k(Q,X,lt,2):Ue--)}}},k=(M,V,X,ie,te=null)=>{const{el:ne,type:de,transition:le,children:J,shapeFlag:ee}=M;if(ee&6){k(M.component.subTree,V,X,ie);return}if(ee&128){M.suspense.move(V,X,ie);return}if(ee&64){de.move(M,V,X,Z);return}if(de===hr){r(ne,V,X);for(let ae=0;ae<J.length;ae++)k(J[ae],V,X,ie);r(M.anchor,V,X);return}if(de===Af){w(M,V,X);return}if(ie!==2&&ee&1&&le)if(ie===0)le.beforeEnter(ne),r(ne,V,X),Ar(()=>le.enter(ne),te);else{const{leave:ae,delayLeave:ce,afterLeave:xe}=le,Ce=()=>{M.ctx.isUnmounted?i(ne):r(ne,V,X)},$e=()=>{ne._isLeaving&&ne[H8](!0),ae(ne,()=>{Ce(),xe&&xe()})};ce?ce(ne,Ce,$e):$e()}else r(ne,V,X)},A=(M,V,X,ie=!1,te=!1)=>{const{type:ne,props:de,ref:le,children:J,dynamicChildren:ee,shapeFlag:ue,patchFlag:ae,dirs:ce,cacheIndex:xe}=M;if(ae===-2&&(te=!1),le!=null&&(Co(),gl(le,null,X,M,!0),So()),xe!=null&&(V.renderCache[xe]=void 0),ue&256){V.ctx.deactivate(M);return}const Ce=ue&1&&ce,$e=!vl(M);let Ue;if($e&&(Ue=de&&de.onVnodeBeforeUnmount)&&Ei(Ue,V,M),ue&6)D(M.component,X,ie);else{if(ue&128){M.suspense.unmount(X,ie);return}Ce&&Ps(M,null,V,"beforeUnmount"),ue&64?M.type.remove(M,V,X,Z,ie):ee&&!ee.hasOnce&&(ne!==hr||ae>0&&ae&64)?H(ee,V,X,!1,!0):(ne===hr&&ae&384||!te&&ue&16)&&H(J,V,X),ie&&_(M)}($e&&(Ue=de&&de.onVnodeUnmounted)||Ce)&&Ar(()=>{Ue&&Ei(Ue,V,M),Ce&&Ps(M,null,V,"unmounted")},X)},_=M=>{const{type:V,el:X,anchor:ie,transition:te}=M;if(V===hr){R(X,ie);return}if(V===Af){E(M);return}const ne=()=>{i(X),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(M.shapeFlag&1&&te&&!te.persisted){const{leave:de,delayLeave:le}=te,J=()=>de(X,ne);le?le(M.el,ne,J):J()}else ne()},R=(M,V)=>{let X;for(;M!==V;)X=d(M),i(M),M=X;i(V)},D=(M,V,X)=>{const{bum:ie,scope:te,job:ne,subTree:de,um:le,m:J,a:ee}=M;oy(J),oy(ee),ie&&Ef(ie),te.stop(),ne&&(ne.flags|=8,A(de,M,V,X)),le&&Ar(le,V),Ar(()=>{M.isUnmounted=!0},V)},H=(M,V,X,ie=!1,te=!1,ne=0)=>{for(let de=ne;de<M.length;de++)A(M[de],V,X,ie,te)},N=M=>{if(M.shapeFlag&6)return N(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const V=d(M.anchor||M.el),X=V&&V[F8];return X?d(X):V};let K=!1;const z=(M,V,X)=>{M==null?V._vnode&&A(V._vnode,null,null,!0):g(V._vnode||null,M,V,null,null,null,X),V._vnode=M,K||(K=!0,Zv(),HE(),K=!1)},Z={p:g,um:A,m:k,r:_,mt:I,mc:$,pc:b,pbc:B,n:N,o:t};return{render:z,hydrate:void 0,createApp:a4(z)}}function Yh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ns({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function v4(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ix(t,e,n=!1){const r=t.children,i=e.children;if(He(r)&&He(i))for(let o=0;o<r.length;o++){const s=r[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Zo(i[o]),a.el=s.el),!n&&a.patchFlag!==-2&&ix(s,a)),a.type===ah&&a.patchFlag!==-1&&(a.el=s.el),a.type===bs&&!a.el&&(a.el=s.el)}}function y4(t){const e=t.slice(),n=[0];let r,i,o,s,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<l?o=a+1:s=a;l<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=e[s];return n}function ox(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ox(e)}function oy(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const m4=Symbol.for("v-scx"),w4=()=>vi(m4);function vr(t,e,n){return sx(t,e,n)}function sx(t,e,n=St){const{immediate:r,deep:i,flush:o,once:s}=n,a=jn({},n),c=e&&r||!e&&o!=="post";let l;if(Dl){if(o==="sync"){const h=w4();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=Fi,h.resume=Fi,h.pause=Fi,h}}const u=Hn;a.call=(h,p,g)=>ji(h,u,p,g);let f=!1;o==="post"?a.scheduler=h=>{Ar(h,u&&u.suspense)}:o!=="sync"&&(f=!0,a.scheduler=(h,p)=>{p?h():dg(h)}),a.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const d=M8(t,e,a);return Dl&&(l?l.push(d):c&&d()),d}function b4(t,e,n){const r=this.proxy,i=nn(t)?t.includes(".")?ax(r,t):()=>r[t]:t.bind(r,r);let o;Ke(e)?o=e:(o=e.handler,n=e);const s=hu(this),a=sx(i,o.bind(r),n);return s(),a}function ax(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const E4=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Zr(e)}Modifiers`]||t[`${Ss(e)}Modifiers`];function x4(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||St;let i=n;const o=e.startsWith("update:"),s=o&&E4(r,e.slice(7));s&&(s.trim&&(i=n.map(u=>nn(u)?u.trim():u)),s.number&&(i=n.map(Jf)));let a,c=r[a=jh(e)]||r[a=jh(Zr(e))];!c&&o&&(c=r[a=jh(Ss(e))]),c&&ji(c,t,6,i);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ji(l,t,6,i)}}const A4=new WeakMap;function cx(t,e,n=!1){const r=n?A4:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let s={},a=!1;if(!Ke(t)){const c=l=>{const u=cx(l,e,!0);u&&(a=!0,jn(s,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!o&&!a?(It(t)&&r.set(t,null),null):(He(o)?o.forEach(c=>s[c]=null):jn(s,o),It(t)&&r.set(t,s),s)}function sh(t,e){return!t||!Jd(e)?!1:(e=e.slice(2).replace(/Once$/,""),bt(t,e[0].toLowerCase()+e.slice(1))||bt(t,Ss(e))||bt(t,e))}function sy(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:a,emit:c,render:l,renderCache:u,props:f,data:d,setupState:h,ctx:p,inheritAttrs:g}=t,y=rd(t);let v,m;try{if(n.shapeFlag&4){const E=i||r,S=E;v=Ii(l.call(S,E,u,f,h,d,p)),m=a}else{const E=e;v=Ii(E.length>1?E(f,{attrs:a,slots:s,emit:c}):E(f,null)),m=e.props?a:_4(a)}}catch(E){ml.length=0,ih(E,t,1),v=Bt(bs)}let w=v;if(m&&g!==!1){const E=Object.keys(m),{shapeFlag:S}=w;E.length&&S&7&&(o&&E.some(eg)&&(m=C4(m,o)),w=pc(w,m,!1,!0))}return n.dirs&&(w=pc(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&hg(w,n.transition),v=w,rd(y),v}const _4=t=>{let e;for(const n in t)(n==="class"||n==="style"||Jd(n))&&((e||(e={}))[n]=t[n]);return e},C4=(t,e)=>{const n={};for(const r in t)(!eg(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function S4(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:c}=e,l=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?ay(r,s,l):!!s;if(c&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(s[d]!==r[d]&&!sh(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?ay(r,s,l):!0:!!s;return!1}function ay(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!sh(n,o))return!0}return!1}function I4({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const lx=t=>t.__isSuspense;function T4(t,e){e&&e.pendingBranch?He(t)?e.effects.push(...t):e.effects.push(t):L8(t)}const hr=Symbol.for("v-fgt"),ah=Symbol.for("v-txt"),bs=Symbol.for("v-cmt"),Af=Symbol.for("v-stc"),ml=[];let Nr=null;function Se(t=!1){ml.push(Nr=t?null:[])}function O4(){ml.pop(),Nr=ml[ml.length-1]||null}let Ml=1;function sd(t,e=!1){Ml+=t,t<0&&Nr&&e&&(Nr.hasOnce=!0)}function ux(t){return t.dynamicChildren=Ml>0?Nr||Za:null,O4(),Ml>0&&Nr&&Nr.push(t),t}function Ie(t,e,n,r,i,o){return ux(q(t,e,n,r,i,o,!0))}function nc(t,e,n,r,i){return ux(Bt(t,e,n,r,i,!0))}function ad(t){return t?t.__v_isVNode===!0:!1}function Uc(t,e){return t.type===e.type&&t.key===e.key}const fx=({key:t})=>t??null,_f=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?nn(t)||Vn(t)||Ke(t)?{i:Pr,r:t,k:e,f:!!n}:t:null);function q(t,e=null,n=null,r=0,i=null,o=t===hr?0:1,s=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&fx(e),ref:e&&_f(e),scopeId:VE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Pr};return a?(wg(c,n),o&128&&t.normalize(c)):n&&(c.shapeFlag|=nn(n)?8:16),Ml>0&&!s&&Nr&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&Nr.push(c),c}const Bt=R4;function R4(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===Q8)&&(t=bs),ad(t)){const a=pc(t,e,!0);return n&&wg(a,n),Ml>0&&!o&&Nr&&(a.shapeFlag&6?Nr[Nr.indexOf(t)]=a:Nr.push(a)),a.patchFlag=-2,a}if(j4(t)&&(t=t.__vccOpts),e){e=P4(e);let{class:a,style:c}=e;a&&!nn(a)&&(e.class=aa(a)),It(c)&&(ug(c)&&!He(c)&&(c=jn({},c)),e.style=go(c))}const s=nn(t)?1:lx(t)?128:U8(t)?64:It(t)?4:Ke(t)?2:0;return q(t,e,n,r,i,s,o,!0)}function P4(t){return t?ug(t)||QE(t)?jn({},t):t:null}function pc(t,e,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:a,transition:c}=t,l=e?k4(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&fx(l),ref:e&&e.ref?n&&o?He(o)?o.concat(_f(e)):[o,_f(e)]:_f(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==hr?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&pc(t.ssContent),ssFallback:t.ssFallback&&pc(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&hg(u,c.clone(u)),u}function at(t=" ",e=0){return Bt(ah,null,t,e)}function N4(t,e){const n=Bt(Af,null,t);return n.staticCount=e,n}function Qe(t="",e=!1){return e?(Se(),nc(bs,null,t)):Bt(bs,null,t)}function Ii(t){return t==null||typeof t=="boolean"?Bt(bs):He(t)?Bt(hr,null,t.slice()):ad(t)?Zo(t):Bt(ah,null,String(t))}function Zo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:pc(t)}function wg(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(He(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),wg(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!QE(e)?e._ctx=Pr:i===3&&Pr&&(Pr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:Pr},n=32):(e=String(e),r&64?(n=16,e=[at(e)]):n=8);t.children=e,t.shapeFlag|=n}function k4(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=aa([e.class,r.class]));else if(i==="style")e.style=go([e.style,r.style]);else if(Jd(i)){const o=e[i],s=r[i];s&&o!==s&&!(He(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function Ei(t,e,n,r=null){ji(t,e,7,[n,r])}const M4=YE();let D4=0;function B4(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||M4,o={uid:D4++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new wE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ex(r,i),emitsOptions:cx(r,i),emit:null,emitted:null,propsDefaults:St,inheritAttrs:r.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=x4.bind(null,o),t.ce&&t.ce(o),o}let Hn=null;const L4=()=>Hn||Pr;let cd,kp;{const t=nh(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};cd=e("__VUE_INSTANCE_SETTERS__",n=>Hn=n),kp=e("__VUE_SSR_SETTERS__",n=>Dl=n)}const hu=t=>{const e=Hn;return cd(t),t.scope.on(),()=>{t.scope.off(),cd(e)}},cy=()=>{Hn&&Hn.scope.off(),cd(null)};function dx(t){return t.vnode.shapeFlag&4}let Dl=!1;function F4(t,e=!1,n=!1){e&&kp(e);const{props:r,children:i}=t.vnode,o=dx(t);c4(t,r,o,e),d4(t,i,n||e);const s=o?U4(t,e):void 0;return e&&kp(!1),s}function U4(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,e4);const{setup:r}=n;if(r){Co();const i=t.setupContext=r.length>1?$4(t):null,o=hu(t),s=fu(r,t,0,[t.props,i]),a=dE(s);if(So(),o(),(a||t.sp)&&!vl(t)&&KE(t),a){if(s.then(cy,cy),e)return s.then(c=>{ly(t,c)}).catch(c=>{ih(c,t,0)});t.asyncDep=s}else ly(t,s)}else hx(t)}function ly(t,e,n){Ke(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:It(e)&&(t.setupState=LE(e)),hx(t)}function hx(t,e,n){const r=t.type;t.render||(t.render=r.render||Fi);{const i=hu(t);Co();try{t4(t)}finally{So(),i()}}}const H4={get(t,e){return Fn(t,"get",""),t[e]}};function $4(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,H4),slots:t.slots,emit:t.emit,expose:e}}function ch(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(LE(DE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in yl)return yl[n](t)},has(e,n){return n in e||n in yl}})):t.proxy}function V4(t,e=!0){return Ke(t)?t.displayName||t.name:t.name||e&&t.__name}function j4(t){return Ke(t)&&"__vccOpts"in t}const je=(t,e)=>N8(t,e,Dl);function px(t,e,n){try{sd(-1);const r=arguments.length;return r===2?It(e)&&!He(e)?ad(e)?Bt(t,null,[e]):Bt(t,e):Bt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ad(n)&&(n=[n]),Bt(t,e,n))}finally{sd(1)}}const K4="3.5.22";let Mp;const uy=typeof window<"u"&&window.trustedTypes;if(uy)try{Mp=uy.createPolicy("vue",{createHTML:t=>t})}catch{}const gx=Mp?t=>Mp.createHTML(t):t=>t,G4="http://www.w3.org/2000/svg",z4="http://www.w3.org/1998/Math/MathML",no=typeof document<"u"?document:null,fy=no&&no.createElement("template"),W4={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?no.createElementNS(G4,t):e==="mathml"?no.createElementNS(z4,t):n?no.createElement(t,{is:n}):no.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>no.createTextNode(t),createComment:t=>no.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>no.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{fy.innerHTML=gx(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=fy.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},q4=Symbol("_vtc");function Y4(t,e,n){const r=t[q4];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const dy=Symbol("_vod"),X4=Symbol("_vsh"),Z4=Symbol(""),Q4=/(?:^|;)\s*display\s*:/;function J4(t,e,n){const r=t.style,i=nn(n);let o=!1;if(n&&!i){if(e)if(nn(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();n[a]==null&&Cf(r,a,"")}else for(const s in e)n[s]==null&&Cf(r,s,"");for(const s in n)s==="display"&&(o=!0),Cf(r,s,n[s])}else if(i){if(e!==n){const s=r[Z4];s&&(n+=";"+s),r.cssText=n,o=Q4.test(n)}}else e&&t.removeAttribute("style");dy in t&&(t[dy]=o?r.display:"",t[X4]&&(r.display="none"))}const hy=/\s*!important$/;function Cf(t,e,n){if(He(n))n.forEach(r=>Cf(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=eI(t,e);hy.test(n)?t.setProperty(Ss(r),n.replace(hy,""),"important"):t[r]=n}}const py=["Webkit","Moz","ms"],Xh={};function eI(t,e){const n=Xh[e];if(n)return n;let r=Zr(e);if(r!=="filter"&&r in t)return Xh[e]=r;r=th(r);for(let i=0;i<py.length;i++){const o=py[i]+r;if(o in t)return Xh[e]=o}return e}const gy="http://www.w3.org/1999/xlink";function vy(t,e,n,r,i,o=s8(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(gy,e.slice(6,e.length)):t.setAttributeNS(gy,e,n):n==null||o&&!vE(n)?t.removeAttribute(e):t.setAttribute(e,o?"":Vi(n)?String(n):n)}function yy(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?gx(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=vE(n):n==null&&a==="string"?(n="",s=!0):a==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(i||e)}function ss(t,e,n,r){t.addEventListener(e,n,r)}function tI(t,e,n,r){t.removeEventListener(e,n,r)}const my=Symbol("_vei");function nI(t,e,n,r,i=null){const o=t[my]||(t[my]={}),s=o[e];if(r&&s)s.value=r;else{const[a,c]=rI(e);if(r){const l=o[e]=sI(r,i);ss(t,a,l,c)}else s&&(tI(t,a,s,c),o[e]=void 0)}}const wy=/(?:Once|Passive|Capture)$/;function rI(t){let e;if(wy.test(t)){e={};let r;for(;r=t.match(wy);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ss(t.slice(2)),e]}let Zh=0;const iI=Promise.resolve(),oI=()=>Zh||(iI.then(()=>Zh=0),Zh=Date.now());function sI(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ji(aI(r,n.value),e,5,[r])};return n.value=t,n.attached=oI(),n}function aI(t,e){if(He(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const by=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,cI=(t,e,n,r,i,o)=>{const s=i==="svg";e==="class"?Y4(t,r,s):e==="style"?J4(t,n,r):Jd(e)?eg(e)||nI(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):lI(t,e,r,s))?(yy(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&vy(t,e,r,s,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!nn(r))?yy(t,Zr(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),vy(t,e,r,s))};function lI(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&by(e)&&Ke(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return by(e)&&nn(n)?!1:e in t}const gc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return He(e)?n=>Ef(e,n):e};function uI(t){t.target.composing=!0}function Ey(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Eo=Symbol("_assign"),ei={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Eo]=gc(i);const o=r||i.props&&i.props.type==="number";ss(t,e?"change":"input",s=>{if(s.target.composing)return;let a=t.value;n&&(a=a.trim()),o&&(a=Jf(a)),t[Eo](a)}),n&&ss(t,"change",()=>{t.value=t.value.trim()}),e||(ss(t,"compositionstart",uI),ss(t,"compositionend",Ey),ss(t,"change",Ey))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(t[Eo]=gc(s),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?Jf(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===c)||(t.value=c))}},xy={deep:!0,created(t,e,n){t[Eo]=gc(n),ss(t,"change",()=>{const r=t._modelValue,i=Bl(t),o=t.checked,s=t[Eo];if(He(r)){const a=rg(r,i),c=a!==-1;if(o&&!c)s(r.concat(i));else if(!o&&c){const l=[...r];l.splice(a,1),s(l)}}else if(Pc(r)){const a=new Set(r);o?a.add(i):a.delete(i),s(a)}else s(vx(t,o))})},mounted:Ay,beforeUpdate(t,e,n){t[Eo]=gc(n),Ay(t,e,n)}};function Ay(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(He(e))i=rg(e,r.props.value)>-1;else if(Pc(e))i=e.has(r.props.value);else{if(e===n)return;i=uu(e,vx(t,!0))}t.checked!==i&&(t.checked=i)}const fI={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Pc(e);ss(t,"change",()=>{const o=Array.prototype.filter.call(t.options,s=>s.selected).map(s=>n?Jf(Bl(s)):Bl(s));t[Eo](t.multiple?i?new Set(o):o:o[0]),t._assigning=!0,fg(()=>{t._assigning=!1})}),t[Eo]=gc(r)},mounted(t,{value:e}){_y(t,e)},beforeUpdate(t,e,n){t[Eo]=gc(n)},updated(t,{value:e}){t._assigning||_y(t,e)}};function _y(t,e){const n=t.multiple,r=He(e);if(!(n&&!r&&!Pc(e))){for(let i=0,o=t.options.length;i<o;i++){const s=t.options[i],a=Bl(s);if(n)if(r){const c=typeof a;c==="string"||c==="number"?s.selected=e.some(l=>String(l)===String(a)):s.selected=rg(e,a)>-1}else s.selected=e.has(a);else if(uu(Bl(s),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Bl(t){return"_value"in t?t._value:t.value}function vx(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const dI=["ctrl","shift","alt","meta"],hI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>dI.some(n=>t[`${n}Key`]&&!e.includes(n))},io=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...o)=>{for(let s=0;s<e.length;s++){const a=hI[e[s]];if(a&&a(i,e))return}return t(i,...o)}))},pI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},gI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(i=>{if(!("key"in i))return;const o=Ss(i.key);if(e.some(s=>s===o||pI[s]===o))return t(i)}))},vI=jn({patchProp:cI},W4);let Cy;function yI(){return Cy||(Cy=p4(vI))}const mI=((...t)=>{const e=yI().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=bI(r);if(!i)return;const o=e._component;!Ke(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,wI(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e});function wI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bI(t){return nn(t)?document.querySelector(t):t}const EI=Symbol();var Sy;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Sy||(Sy={}));function xI(){const t=c8(!0),e=t.run(()=>Pe({}));let n=[],r=[];const i=DE({install(o){i._a=o,o.provide(EI,i),o.config.globalProperties.$pinia=i,r.forEach(s=>n.push(s)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const Na=typeof document<"u";function yx(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function AI(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&yx(t.default)}const mt=Object.assign;function Qh(t,e){const n={};for(const r in e){const i=e[r];n[r]=mi(i)?i.map(t):t(i)}return n}const wl=()=>{},mi=Array.isArray,mx=/#/g,_I=/&/g,CI=/\//g,SI=/=/g,II=/\?/g,wx=/\+/g,TI=/%5B/g,OI=/%5D/g,bx=/%5E/g,RI=/%60/g,Ex=/%7B/g,PI=/%7C/g,xx=/%7D/g,NI=/%20/g;function bg(t){return encodeURI(""+t).replace(PI,"|").replace(TI,"[").replace(OI,"]")}function kI(t){return bg(t).replace(Ex,"{").replace(xx,"}").replace(bx,"^")}function Dp(t){return bg(t).replace(wx,"%2B").replace(NI,"+").replace(mx,"%23").replace(_I,"%26").replace(RI,"`").replace(Ex,"{").replace(xx,"}").replace(bx,"^")}function MI(t){return Dp(t).replace(SI,"%3D")}function DI(t){return bg(t).replace(mx,"%23").replace(II,"%3F")}function BI(t){return t==null?"":DI(t).replace(CI,"%2F")}function Ll(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const LI=/\/$/,FI=t=>t.replace(LI,"");function Jh(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),o=e.slice(c+1,a>-1?a:e.length),i=t(o)),a>-1&&(r=r||e.slice(0,a),s=e.slice(a,e.length)),r=VI(r??e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:Ll(s)}}function UI(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Iy(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function HI(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&vc(e.matched[r],n.matched[i])&&Ax(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function vc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ax(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!$I(t[n],e[n]))return!1;return!0}function $I(t,e){return mi(t)?Ty(t,e):mi(e)?Ty(e,t):t===e}function Ty(t,e){return mi(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function VI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,s,a;for(s=0;s<r.length;s++)if(a=r[s],a!==".")if(a==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(s).join("/")}const ko={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Fl;(function(t){t.pop="pop",t.push="push"})(Fl||(Fl={}));var bl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(bl||(bl={}));function jI(t){if(!t)if(Na){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),FI(t)}const KI=/^[^#]+#/;function GI(t,e){return t.replace(KI,"#")+e}function zI(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const lh=()=>({left:window.scrollX,top:window.scrollY});function WI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=zI(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Oy(t,e){return(history.state?history.state.position-e:-1)+t}const Bp=new Map;function qI(t,e){Bp.set(t,e)}function YI(t){const e=Bp.get(t);return Bp.delete(t),e}let XI=()=>location.protocol+"//"+location.host;function _x(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let a=i.includes(t.slice(o))?t.slice(o).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),Iy(c,"")}return Iy(n,t)+r+i}function ZI(t,e,n,r){let i=[],o=[],s=null;const a=({state:d})=>{const h=_x(t,location),p=n.value,g=e.value;let y=0;if(d){if(n.value=h,e.value=d,s&&s===p){s=null;return}y=g?d.position-g.position:0}else r(h);i.forEach(v=>{v(n.value,p,{delta:y,type:Fl.pop,direction:y?y>0?bl.forward:bl.back:bl.unknown})})};function c(){s=n.value}function l(d){i.push(d);const h=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return o.push(h),h}function u(){const{history:d}=window;d.state&&d.replaceState(mt({},d.state,{scroll:lh()}),"")}function f(){for(const d of o)d();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function Ry(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?lh():null}}function QI(t){const{history:e,location:n}=window,r={value:_x(t,n)},i={value:e.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(c,l,u){const f=t.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:XI()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),i.value=l}catch(h){console.error(h),n[u?"replace":"assign"](d)}}function s(c,l){const u=mt({},e.state,Ry(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});o(c,u,!0),r.value=c}function a(c,l){const u=mt({},i.value,e.state,{forward:c,scroll:lh()});o(u.current,u,!0);const f=mt({},Ry(r.value,c,null),{position:u.position+1},l);o(c,f,!1),r.value=c}return{location:r,state:i,push:a,replace:s}}function JI(t){t=jI(t);const e=QI(t),n=ZI(t,e.state,e.location,e.replace);function r(o,s=!0){s||n.pauseListeners(),history.go(o)}const i=mt({location:"",base:t,go:r,createHref:GI.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function e6(t){return typeof t=="string"||t&&typeof t=="object"}function Cx(t){return typeof t=="string"||typeof t=="symbol"}const Sx=Symbol("");var Py;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Py||(Py={}));function yc(t,e){return mt(new Error,{type:t,[Sx]:!0},e)}function Xi(t,e){return t instanceof Error&&Sx in t&&(e==null||!!(t.type&e))}const Ny="[^/]+?",t6={sensitive:!1,strict:!1,start:!0,end:!0},n6=/[.+*?^${}()[\]/\\]/g;function r6(t,e){const n=mt({},t6,e),r=[];let i=n.start?"^":"";const o=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const d=l[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(n6,"\\$&"),h+=40;else if(d.type===1){const{value:p,repeatable:g,optional:y,regexp:v}=d;o.push({name:p,repeatable:g,optional:y});const m=v||Ny;if(m!==Ny){h+=10;try{new RegExp(`(${m})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${p}" (${m}): `+E.message)}}let w=g?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;f||(w=y&&l.length<2?`(?:/${w})`:"/"+w),y&&(w+="?"),i+=w,h+=20,y&&(h+=-8),g&&(h+=-20),m===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(s),f={};if(!u)return null;for(let d=1;d<u.length;d++){const h=u[d]||"",p=o[d-1];f[p.name]=h&&p.repeatable?h.split("/"):h}return f}function c(l){let u="",f=!1;for(const d of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of d)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:y}=h,v=p in l?l[p]:"";if(mi(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const m=mi(v)?v.join("/"):v;if(!m)if(y)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);u+=m}}return u||"/"}return{re:s,score:r,keys:o,parse:a,stringify:c}}function i6(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ix(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const o=i6(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(ky(r))return 1;if(ky(i))return-1}return i.length-r.length}function ky(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const o6={type:0,value:""},s6=/[a-zA-Z0-9_]/;function a6(t){if(!t)return[[]];if(t==="/")return[[o6]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a=0,c,l="",u="";function f(){l&&(n===0?o.push({type:0,value:l}):n===1||n===2||n===3?(o.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&f(),s()):c===":"?(f(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:s6.test(c)?d():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),s(),i}function c6(t,e,n){const r=r6(a6(t.path),n),i=mt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function l6(t,e){const n=[],r=new Map;e=Ly({strict:!1,end:!0,sensitive:!1},e);function i(f){return r.get(f)}function o(f,d,h){const p=!h,g=Dy(f);g.aliasOf=h&&h.record;const y=Ly(e,f),v=[g];if("alias"in f){const E=typeof f.alias=="string"?[f.alias]:f.alias;for(const S of E)v.push(Dy(mt({},g,{components:h?h.record.components:g.components,path:S,aliasOf:h?h.record:g})))}let m,w;for(const E of v){const{path:S}=E;if(d&&S[0]!=="/"){const O=d.record.path,F=O[O.length-1]==="/"?"":"/";E.path=d.record.path+(S&&F+S)}if(m=c6(E,d,y),h?h.alias.push(m):(w=w||m,w!==m&&w.alias.push(m),p&&f.name&&!By(m)&&s(f.name)),Tx(m)&&c(m),g.children){const O=g.children;for(let F=0;F<O.length;F++)o(O[F],m,h&&h.children[F])}h=h||m}return w?()=>{s(w)}:wl}function s(f){if(Cx(f)){const d=r.get(f);d&&(r.delete(f),n.splice(n.indexOf(d),1),d.children.forEach(s),d.alias.forEach(s))}else{const d=n.indexOf(f);d>-1&&(n.splice(d,1),f.record.name&&r.delete(f.record.name),f.children.forEach(s),f.alias.forEach(s))}}function a(){return n}function c(f){const d=d6(f,n);n.splice(d,0,f),f.record.name&&!By(f)&&r.set(f.record.name,f)}function l(f,d){let h,p={},g,y;if("name"in f&&f.name){if(h=r.get(f.name),!h)throw yc(1,{location:f});y=h.record.name,p=mt(My(d.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),f.params&&My(f.params,h.keys.map(w=>w.name))),g=h.stringify(p)}else if(f.path!=null)g=f.path,h=n.find(w=>w.re.test(g)),h&&(p=h.parse(g),y=h.record.name);else{if(h=d.name?r.get(d.name):n.find(w=>w.re.test(d.path)),!h)throw yc(1,{location:f,currentLocation:d});y=h.record.name,p=mt({},d.params,f.params),g=h.stringify(p)}const v=[];let m=h;for(;m;)v.unshift(m.record),m=m.parent;return{name:y,path:g,params:p,matched:v,meta:f6(v)}}t.forEach(f=>o(f));function u(){n.length=0,r.clear()}return{addRoute:o,resolve:l,removeRoute:s,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function My(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Dy(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:u6(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function u6(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function By(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function f6(t){return t.reduce((e,n)=>mt(e,n.meta),{})}function Ly(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function d6(t,e){let n=0,r=e.length;for(;n!==r;){const o=n+r>>1;Ix(t,e[o])<0?r=o:n=o+1}const i=h6(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function h6(t){let e=t;for(;e=e.parent;)if(Tx(e)&&Ix(t,e)===0)return e}function Tx({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function p6(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(wx," "),s=o.indexOf("="),a=Ll(s<0?o:o.slice(0,s)),c=s<0?null:Ll(o.slice(s+1));if(a in e){let l=e[a];mi(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function Fy(t){let e="";for(let n in t){const r=t[n];if(n=MI(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(mi(r)?r.map(o=>o&&Dp(o)):[r&&Dp(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function g6(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=mi(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const v6=Symbol(""),Uy=Symbol(""),uh=Symbol(""),Eg=Symbol(""),Lp=Symbol("");function Hc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Qo(t,e,n,r,i,o=s=>s()){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=d=>{d===!1?c(yc(4,{from:n,to:e})):d instanceof Error?c(d):e6(d)?c(yc(2,{from:e,to:d})):(s&&r.enterCallbacks[i]===s&&typeof d=="function"&&s.push(d),a())},u=o(()=>t.call(r&&r.instances[i],e,n,l));let f=Promise.resolve(u);t.length<3&&(f=f.then(l)),f.catch(d=>c(d))})}function e0(t,e,n,r,i=o=>o()){const o=[];for(const s of t)for(const a in s.components){let c=s.components[a];if(!(e!=="beforeRouteEnter"&&!s.instances[a]))if(yx(c)){const u=(c.__vccOpts||c)[e];u&&o.push(Qo(u,n,r,s,a,i))}else{let l=c();o.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${s.path}"`);const f=AI(u)?u.default:u;s.mods[a]=u,s.components[a]=f;const h=(f.__vccOpts||f)[e];return h&&Qo(h,n,r,s,a,i)()}))}}return o}function Hy(t){const e=vi(uh),n=vi(Eg),r=je(()=>{const c=yn(t.to);return e.resolve(c)}),i=je(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex(vc.bind(null,u));if(d>-1)return d;const h=$y(c[l-2]);return l>1&&$y(u)===h&&f[f.length-1].path!==h?f.findIndex(vc.bind(null,c[l-2])):d}),o=je(()=>i.value>-1&&b6(n.params,r.value.params)),s=je(()=>i.value>-1&&i.value===n.matched.length-1&&Ax(n.params,r.value.params));function a(c={}){if(w6(c)){const l=e[yn(t.replace)?"replace":"push"](yn(t.to)).catch(wl);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:je(()=>r.value.href),isActive:o,isExactActive:s,navigate:a}}function y6(t){return t.length===1?t[0]:t}const m6=jE({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Hy,setup(t,{slots:e}){const n=hc(Hy(t)),{options:r}=vi(uh),i=je(()=>({[Vy(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Vy(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&y6(e.default(n));return t.custom?o:px("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),eo=m6;function w6(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function b6(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!mi(i)||i.length!==r.length||r.some((o,s)=>o!==i[s]))return!1}return!0}function $y(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Vy=(t,e,n)=>t??e??n,E6=jE({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=vi(Lp),i=je(()=>t.route||r.value),o=vi(Uy,0),s=je(()=>{let l=yn(o);const{matched:u}=i.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=je(()=>i.value.matched[s.value]);xf(Uy,je(()=>s.value+1)),xf(v6,a),xf(Lp,i);const c=Pe();return vr(()=>[c.value,a.value,t.name],([l,u,f],[d,h,p])=>{u&&(u.instances[f]=l,h&&h!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),l&&u&&(!h||!vc(u,h)||!d)&&(u.enterCallbacks[f]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,f=a.value,d=f&&f.components[u];if(!d)return jy(n.default,{Component:d,route:l});const h=f.props[u],p=h?h===!0?l.params:typeof h=="function"?h(l):h:null,y=px(d,mt({},p,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return jy(n.default,{Component:y,route:l})||y}}});function jy(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Ox=E6;function x6(t){const e=l6(t.routes,t),n=t.parseQuery||p6,r=t.stringifyQuery||Fy,i=t.history,o=Hc(),s=Hc(),a=Hc(),c=T8(ko);let l=ko;Na&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Qh.bind(null,N=>""+N),f=Qh.bind(null,BI),d=Qh.bind(null,Ll);function h(N,K){let z,Z;return Cx(N)?(z=e.getRecordMatcher(N),Z=K):Z=N,e.addRoute(Z,z)}function p(N){const K=e.getRecordMatcher(N);K&&e.removeRoute(K)}function g(){return e.getRoutes().map(N=>N.record)}function y(N){return!!e.getRecordMatcher(N)}function v(N,K){if(K=mt({},K||c.value),typeof N=="string"){const X=Jh(n,N,K.path),ie=e.resolve({path:X.path},K),te=i.createHref(X.fullPath);return mt(X,ie,{params:d(ie.params),hash:Ll(X.hash),redirectedFrom:void 0,href:te})}let z;if(N.path!=null)z=mt({},N,{path:Jh(n,N.path,K.path).path});else{const X=mt({},N.params);for(const ie in X)X[ie]==null&&delete X[ie];z=mt({},N,{params:f(X)}),K.params=f(K.params)}const Z=e.resolve(z,K),oe=N.hash||"";Z.params=u(d(Z.params));const M=UI(r,mt({},N,{hash:kI(oe),path:Z.path})),V=i.createHref(M);return mt({fullPath:M,hash:oe,query:r===Fy?g6(N.query):N.query||{}},Z,{redirectedFrom:void 0,href:V})}function m(N){return typeof N=="string"?Jh(n,N,c.value.path):mt({},N)}function w(N,K){if(l!==N)return yc(8,{from:K,to:N})}function E(N){return F(N)}function S(N){return E(mt(m(N),{replace:!0}))}function O(N){const K=N.matched[N.matched.length-1];if(K&&K.redirect){const{redirect:z}=K;let Z=typeof z=="function"?z(N):z;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=m(Z):{path:Z},Z.params={}),mt({query:N.query,hash:N.hash,params:Z.path!=null?{}:N.params},Z)}}function F(N,K){const z=l=v(N),Z=c.value,oe=N.state,M=N.force,V=N.replace===!0,X=O(z);if(X)return F(mt(m(X),{state:typeof X=="object"?mt({},oe,X.state):oe,force:M,replace:V}),K||z);const ie=z;ie.redirectedFrom=K;let te;return!M&&HI(r,Z,z)&&(te=yc(16,{to:ie,from:Z}),k(Z,Z,!0,!1)),(te?Promise.resolve(te):B(ie,Z)).catch(ne=>Xi(ne)?Xi(ne,2)?ne:T(ne):b(ne,ie,Z)).then(ne=>{if(ne){if(Xi(ne,2))return F(mt({replace:V},m(ne.to),{state:typeof ne.to=="object"?mt({},oe,ne.to.state):oe,force:M}),K||ie)}else ne=j(ie,Z,!0,V,oe);return Y(ie,Z,ne),ne})}function $(N,K){const z=w(N,K);return z?Promise.reject(z):Promise.resolve()}function U(N){const K=R.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(N):N()}function B(N,K){let z;const[Z,oe,M]=A6(N,K);z=e0(Z.reverse(),"beforeRouteLeave",N,K);for(const X of Z)X.leaveGuards.forEach(ie=>{z.push(Qo(ie,N,K))});const V=$.bind(null,N,K);return z.push(V),H(z).then(()=>{z=[];for(const X of o.list())z.push(Qo(X,N,K));return z.push(V),H(z)}).then(()=>{z=e0(oe,"beforeRouteUpdate",N,K);for(const X of oe)X.updateGuards.forEach(ie=>{z.push(Qo(ie,N,K))});return z.push(V),H(z)}).then(()=>{z=[];for(const X of M)if(X.beforeEnter)if(mi(X.beforeEnter))for(const ie of X.beforeEnter)z.push(Qo(ie,N,K));else z.push(Qo(X.beforeEnter,N,K));return z.push(V),H(z)}).then(()=>(N.matched.forEach(X=>X.enterCallbacks={}),z=e0(M,"beforeRouteEnter",N,K,U),z.push(V),H(z))).then(()=>{z=[];for(const X of s.list())z.push(Qo(X,N,K));return z.push(V),H(z)}).catch(X=>Xi(X,8)?X:Promise.reject(X))}function Y(N,K,z){a.list().forEach(Z=>U(()=>Z(N,K,z)))}function j(N,K,z,Z,oe){const M=w(N,K);if(M)return M;const V=K===ko,X=Na?history.state:{};z&&(Z||V?i.replace(N.fullPath,mt({scroll:V&&X&&X.scroll},oe)):i.push(N.fullPath,oe)),c.value=N,k(N,K,z,V),T()}let L;function I(){L||(L=i.listen((N,K,z)=>{if(!D.listening)return;const Z=v(N),oe=O(Z);if(oe){F(mt(oe,{replace:!0,force:!0}),Z).catch(wl);return}l=Z;const M=c.value;Na&&qI(Oy(M.fullPath,z.delta),lh()),B(Z,M).catch(V=>Xi(V,12)?V:Xi(V,2)?(F(mt(m(V.to),{force:!0}),Z).then(X=>{Xi(X,20)&&!z.delta&&z.type===Fl.pop&&i.go(-1,!1)}).catch(wl),Promise.reject()):(z.delta&&i.go(-z.delta,!1),b(V,Z,M))).then(V=>{V=V||j(Z,M,!1),V&&(z.delta&&!Xi(V,8)?i.go(-z.delta,!1):z.type===Fl.pop&&Xi(V,20)&&i.go(-1,!1)),Y(Z,M,V)}).catch(wl)}))}let x=Hc(),P=Hc(),G;function b(N,K,z){T(N);const Z=P.list();return Z.length?Z.forEach(oe=>oe(N,K,z)):console.error(N),Promise.reject(N)}function C(){return G&&c.value!==ko?Promise.resolve():new Promise((N,K)=>{x.add([N,K])})}function T(N){return G||(G=!N,I(),x.list().forEach(([K,z])=>N?z(N):K()),x.reset()),N}function k(N,K,z,Z){const{scrollBehavior:oe}=t;if(!Na||!oe)return Promise.resolve();const M=!z&&YI(Oy(N.fullPath,0))||(Z||!z)&&history.state&&history.state.scroll||null;return fg().then(()=>oe(N,K,M)).then(V=>V&&WI(V)).catch(V=>b(V,N,K))}const A=N=>i.go(N);let _;const R=new Set,D={currentRoute:c,listening:!0,addRoute:h,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:g,resolve:v,options:t,push:E,replace:S,go:A,back:()=>A(-1),forward:()=>A(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:P.add,isReady:C,install(N){const K=this;N.component("RouterLink",eo),N.component("RouterView",Ox),N.config.globalProperties.$router=K,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>yn(c)}),Na&&!_&&c.value===ko&&(_=!0,E(i.location).catch(oe=>{}));const z={};for(const oe in ko)Object.defineProperty(z,oe,{get:()=>c.value[oe],enumerable:!0});N.provide(uh,K),N.provide(Eg,ME(z)),N.provide(Lp,c);const Z=N.unmount;R.add(N),N.unmount=function(){R.delete(N),R.size<1&&(l=ko,L&&L(),L=null,c.value=ko,_=!1,G=!1),Z()}}};function H(N){return N.reduce((K,z)=>K.then(()=>U(z)),Promise.resolve())}return D}function A6(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const a=e.matched[s];a&&(t.matched.find(l=>vc(l,a))?r.push(a):n.push(a));const c=t.matched[s];c&&(e.matched.find(l=>vc(l,c))||i.push(c))}return[n,r,i]}function xg(){return vi(uh)}function fh(t){return vi(Eg)}const _6={key:0,class:"site-footer",role:"contentinfo"},C6={class:"footer-inner"},S6={class:"brand-cell"},I6={class:"copy"},T6={class:"city"},O6=["href"],R6=["href"],P6={class:"addr"},N6={key:0},k6="AsiqIt",M6={__name:"AppFooter",setup(t){let e=null;try{e=fh()}catch{e=null}const n=je(()=>{const o=e?.path??"",s=e?.name??"";return o==="/"||o==="/scan"||o==="/login"||s==="login"}),r=new Date().getFullYear(),i=[{city:"BALIKPAPAN",email:"asiqtix.bpn@gmail.com",tel:"087879127524",telHref:"+6287879127524",addr1:"Jl. Jendral Sudirman No. 88,",addr2:"Klandasan Ilir, Balikpapan",addr3:"Kota 76113"}];return(o,s)=>n.value?Qe("",!0):(Se(),Ie("footer",_6,[q("div",C6,[q("section",S6,[s[0]||(s[0]=N4('<h2 class="footer-title">Contact us</h2><nav class="socials" aria-label="social links"><a href="https://www.instagram.com/bagas.y0/" aria-label="Instagram" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2.2c3.2 0 3.6 0 4.9.1 1.2.1 1.9.2 2.4.4.6.2 1 .4 1.5.8.4.3.7.8.8 1.5.2.5.3 1.2.4 2.4.1 1.3.1 1.7.1 4.9s0 3.6-.1 4.9c-.1 1.2-.2 1.9-.4 2.4-.2.6-.4 1-.8 1.5-.3.4-.8.7-1.5.8-.5.2-1.2.3-2.4.4-1.3.1-1.7.1-4.9.1s-3.6 0-4.9-.1c-1.2-.1-1.9-.2-2.4-.4-.6-.2-1-.4-1.5-.8-.4-.3-.7-.8-.8-1.5-.2-.5-.3-1.2-.4-2.4C2.2 15.6 2.2 15.2 2.2 12s0-3.6.1-4.9c.1-1.2.2-1.9.4-2.4.2-.6.4-1 .8-1.5.3-.4.8-.7 1.5-.8.5-.2 1.2-.3 2.4-.4C8.4 2.2 8.8 2.2 12 2.2Zm0 1.8c-3.1 0-3.5 0-4.7.1-1.1.1-1.7.2-2.1.4-.5.2-.8.4-1.1.7-.3.3-.5.6-.7 1.1-.2.4-.3 1-.4 2.1-.1 1.2-.1 1.6-.1 4.7s0 3.5.1 4.7c.1 1.1.2 1.7.4 2.1.2.5.4.8.7 1.1.3.3.6.5 1.1.7.4.2 1 .3 2.1.4 1.2.1 1.6.1 4.7.1s3.5 0 4.7-.1c1.1-.1 1.7-.2 2.1-.4.5-.2.8-.4 1.1-.7.3-.3.5-.6.7-1.1.2-.4.3-1 .4-2.1.1-1.2.1-1.6.1-4.7s0-3.5-.1-4.7c-.1-1.1-.2-1.7-.4-2.1-.2-.5-.4-.8-.7-1.1-.3-.3-.6-.5-1.1-.7-.4-.2-1-.3-2.1-.4-1.2-.1-1.6-.1-4.7-.1Zm0 3.4a6.6 6.6 0 1 1 0 13.2 6.6 6.6 0 0 1 0-13.2Zm0 2a4.6 4.6 0 1 0 0 9.2 4.6 4.6 0 0 0 0-9.2Zm5-2.2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"></path></svg></a><a href="https://web.facebook.com/profile.php?id=100010487190698" aria-label="Facebook" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13.5 22v-8h2.7l.4-3h-3.1V8.6c0-.9.2-1.6 1.6-1.6h1.7V4.3c-.3 0-1.3-.1-2.5-.1-2.5 0-4.1 1.5-4.1 4.2V11H8.3v3h2.9v8h2.3Z"></path></svg></a><a href="https://www.tiktok.com/@bagaspp253" aria-label="Tiktok" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12.67 2h2.53c.12 1.1.44 2.02 1.09 2.89.63.84 1.47 1.35 2.53 1.55v2.56c-.96-.02-1.86-.23-2.71-.65-.42-.2-.82-.45-1.22-.72l-.01 6.7c0 1.15-.23 2.22-.83 3.2a6.08 6.08 0 0 1-4.18 2.94c-.77.14-1.52.14-2.27-.05-1.65-.42-2.9-1.36-3.72-2.85-1.26-2.31-.98-5.2.69-7.22 1.28-1.52 2.93-2.24 4.93-2.21v2.66c-.52.02-1 .1-1.45.32-1.03.48-1.62 1.3-1.75 2.42-.18 1.5.67 2.86 2.03 3.3 1.72.56 3.59-.48 3.93-2.26.05-.26.07-.54.07-.81l.02-11.52Z"></path></svg></a></nav>',2)),q("small",I6," "+ke(yn(r))+" "+ke(k6)+". All rights reserved.",1)]),(Se(),Ie(hr,null,vg(i,(a,c)=>q("section",{key:c,class:"office-cell"},[q("h3",T6,ke(a.city),1),q("a",{class:"email",href:`mailto:${a.email}`},ke(a.email),9,O6),q("a",{class:"tel",href:`tel:${a.telHref}`},ke(a.tel),9,R6),q("address",P6,[q("span",null,ke(a.addr1),1),q("span",null,ke(a.addr2),1),a.addr3?(Se(),Ie("span",N6,ke(a.addr3),1)):Qe("",!0)])])),64))])]))}},D6={id:"app",class:"app-shell"},B6={class:"app-main"},L6={__name:"App",setup(t){return(e,n)=>(Se(),Ie("div",D6,[q("main",B6,[Bt(yn(Ox))]),Bt(M6)]))}},F6="modulepreload",U6=function(t){return"/"+t},Ky={},to=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");i=c(n.map(l=>{if(l=U6(l),l in Ky)return;Ky[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":F6,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},Ag="/assets/logo_with_text-CUi1xsHR.png",Is=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},H6=["aria-hidden"],$6={class:"mini-nav","aria-label":"Main"},V6={__name:"SideNavSB",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=fh(),o=je({get:()=>n.modelValue,set:v=>r("update:modelValue",v)});function s(){o.value=!1}function a(v){v.key==="Escape"&&s()}const c=Pe("customer"),l=Pe(!1),f="http://localhost:3001,https://asiqtix-main-production.up.railway.app/".replace(/\/+$/,"").replace(/\/api\/?$/i,"");function d(){return(localStorage.getItem("walletAddress")||"").toString().trim().toLowerCase()}async function h(){if(typeof window>"u"||!window.ethereum?.request)return"";try{const v=await window.ethereum.request({method:"eth_accounts"}),m=Array.isArray(v)&&v[0]||"";return String(m||"").trim().toLowerCase()}catch{return""}}async function p(){const v=await h();return v||d()}async function g(){const v=await p();if(!v){c.value="customer";return}l.value=!0;try{const m=await fetch(`${f}/api/me`,{headers:{"x-wallet-address":v},credentials:"include"});if(!m.ok){c.value="customer";return}const w=await m.json().catch(()=>({}));c.value=w?.role||"customer"}catch(m){console.error("[DrawerNav] failed to load role",m),c.value="customer"}finally{l.value=!1}}function y(){g()}return du(()=>{window.addEventListener("keydown",a),g(),typeof window<"u"&&window.ethereum?.on&&window.ethereum.on("accountsChanged",y)}),pg(()=>{window.removeEventListener("keydown",a),typeof window<"u"&&window.ethereum?.removeListener&&window.ethereum.removeListener("accountsChanged",y)}),vr(()=>i.fullPath,s),vr(o,v=>{v&&g()}),(v,m)=>(Se(),Ie("div",{class:aa(["drawer",{"is-open":o.value}]),"aria-hidden":!o.value},[q("div",{class:"drawer-backdrop",onClick:s}),q("div",{class:"drawer-panel",role:"dialog","aria-modal":"true",onClick:m[0]||(m[0]=io(()=>{},["stop"]))},[q("nav",$6,[Bt(yn(eo),{class:"link","active-class":"active",to:"/home",onClick:s},{default:Ji(()=>[...m[1]||(m[1]=[at("Home",-1)])]),_:1}),c.value==="admin"?(Se(),nc(yn(eo),{key:0,class:"link","active-class":"active",to:"/admin/dashboard",onClick:s},{default:Ji(()=>[...m[2]||(m[2]=[at(" Admin Dashboard ",-1)])]),_:1})):Qe("",!0),c.value==="promoter"?(Se(),nc(yn(eo),{key:1,class:"link","active-class":"active",to:"/promoter/dashboard",onClick:s},{default:Ji(()=>[...m[3]||(m[3]=[at(" Promoter Dashboard ",-1)])]),_:1})):Qe("",!0),c.value==="promoter"?(Se(),nc(yn(eo),{key:2,class:"link","active-class":"active",to:"/scan",onClick:s},{default:Ji(()=>[...m[4]||(m[4]=[at(" Scan Ticket ",-1)])]),_:1})):Qe("",!0),Bt(yn(eo),{class:"link","active-class":"active",to:"/profile",onClick:s},{default:Ji(()=>[...m[5]||(m[5]=[at("Profile",-1)])]),_:1}),Bt(yn(eo),{class:"link","active-class":"active",to:"/wallet",onClick:s},{default:Ji(()=>[...m[6]||(m[6]=[at("Wallet",-1)])]),_:1}),Bt(yn(eo),{class:"link","active-class":"active",to:"/history",onClick:s},{default:Ji(()=>[...m[7]||(m[7]=[at("History",-1)])]),_:1}),Bt(yn(eo),{class:"link-btn",to:"/logout",onClick:s},{default:Ji(()=>[...m[8]||(m[8]=[at("Log out",-1)])]),_:1})])])],10,H6))}},_g=Is(V6,[["__scopeId","data-v-d247ec95"]]),j6="6.15.0";function K6(t,e,n){const r=e.split("|").map(o=>o.trim());for(let o=0;o<r.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function Xn(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,o)=>(r[e[o]]=i,r),{})}function Fe(t,e,n){for(let r in e){let i=e[r];const o=n?n[r]:null;o&&K6(i,o,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function La(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>La(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return La(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${La(r,e)}: ${La(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function On(t,e){return t&&t.code===e}function Cg(t){return On(t,"CALL_EXCEPTION")}function Lt(t,e,n){let r=t;{const o=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${La(n)}`);for(const s in n){if(s==="shortMessage")continue;const a=n[s];o.push(s+"="+La(a))}}o.push(`code=${e}`),o.push(`version=${j6}`),o.length&&(t+=" ("+o.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Fe(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Fe(i,{shortMessage:r}),i}function we(t,e,n,r){if(!t)throw Lt(e,n,r)}function re(t,e,n,r){we(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Rx(t,e,n){n==null&&(n=""),n&&(n=": "+n),we(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),we(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function pu(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),we(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Px(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let o=0;o<r.length;o++)r[o]=parseInt(t.substring(i,i+2),16),i+=2;return r}re(!1,"invalid BytesLike value",e||"value",t)}function Xe(t,e){return Px(t,e,!1)}function er(t,e){return Px(t,e,!0)}function Pt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function Sg(t){return Pt(t,!0)||t instanceof Uint8Array}const Gy="0123456789abcdef";function Te(t){const e=Xe(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=Gy[(i&240)>>4]+Gy[i&15]}return n}function Wt(t){return"0x"+t.map(e=>Te(e).substring(2)).join("")}function rc(t){return Pt(t,!0)?(t.length-2)/2:Xe(t).length}function jt(t,e,n){const r=Xe(t);return n!=null&&n>r.length&&we(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Te(r.slice(e??0,n??r.length))}function Nx(t,e,n){const r=Xe(t);we(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),Te(i)}function Io(t,e){return Nx(t,e,!0)}function G6(t,e){return Nx(t,e,!1)}const dh=BigInt(0),ui=BigInt(1),Fa=9007199254740991;function ld(t,e){const n=hh(t,"value"),r=BigInt(We(e,"width"));if(we(n>>r===dh,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-ui){const i=(ui<<r)-ui;return-((~n&i)+ui)}return n}function kx(t,e){let n=Ne(t,"value");const r=BigInt(We(e,"width")),i=ui<<r-ui;if(n<dh){n=-n,we(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const o=(ui<<r)-ui;return(~n&o)+ui}else we(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Ws(t,e){const n=hh(t,"value"),r=BigInt(We(e,"bits"));return n&(ui<<r)-ui}function Ne(t,e){switch(typeof t){case"bigint":return t;case"number":return re(Number.isInteger(t),"underflow",e||"value",t),re(t>=-Fa&&t<=Fa,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){re(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}re(!1,"invalid BigNumberish value",e||"value",t)}function hh(t,e){const n=Ne(t,e);return we(n>=dh,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const zy="0123456789abcdef";function ph(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=zy[n>>4],e+=zy[n&15];return BigInt(e)}return Ne(t)}function We(t,e){switch(typeof t){case"bigint":return re(t>=-Fa&&t<=Fa,"overflow",e||"value",t),Number(t);case"number":return re(Number.isInteger(t),"underflow",e||"value",t),re(t>=-Fa&&t<=Fa,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return We(BigInt(t),e)}catch(n){re(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}re(!1,"invalid numeric value",e||"value",t)}function z6(t){return We(ph(t))}function Es(t,e){let r=hh(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=We(e,"width");for(we(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function un(t){const e=hh(t,"value");if(e===dh)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const o=i*2;r[i]=parseInt(n.substring(o,o+2),16)}return r}function ci(t){let e=Te(Sg(t)?t:un(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Wy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const qy=BigInt(58);function W6(t){const e=Xe(t);let n=ph(e),r="";for(;n;)r=Wy[Number(n%qy)]+r,n/=qy;for(let i=0;i<e.length&&!e[i];i++)r=Wy[0]+r;return r}function q6(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Xe(e)}function Y6(t){const e=Xe(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}class Mx{filter;emitter;#e;constructor(e,n,r){this.#e=n,Fe(this,{emitter:e,filter:r})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function X6(t,e,n,r,i){re(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Dx(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let o=0;for(let s=e+1;s<n.length&&n[s]>>6===2;s++)o++;return o}return t==="OVERRUN"?n.length-e-1:0}function Z6(t,e,n,r,i){return t==="OVERLONG"?(re(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),Dx(t,e,n))}const Q6=Object.freeze({error:X6,ignore:Dx,replace:Z6});function J6(t,e){e==null&&(e=Q6.error);const n=Xe(t,"bytes"),r=[];let i=0;for(;i<n.length;){const o=n[i++];if(o>>7===0){r.push(o);continue}let s=null,a=null;if((o&224)===192)s=1,a=127;else if((o&240)===224)s=2,a=2047;else if((o&248)===240)s=3,a=65535;else{(o&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+s>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let c=o&(1<<8-s-1)-1;for(let l=0;l<s;l++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),c=null;break}c=c<<6|u&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-s,n,r,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-s,n,r,c);continue}if(c<=a){i+=e("OVERLONG",i-1-s,n,r,c);continue}r.push(c)}}return r}function xo(t,e){re(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const o=t.charCodeAt(r);re(r<t.length&&(o&64512)===56320,"invalid surrogate pair","str",t);const s=65536+((i&1023)<<10)+(o&1023);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function eT(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ud(t,e){return eT(J6(t,e))}function Bx(t){async function e(n,r){we(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();we(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),we(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let o=null;const s=new AbortController,a=setTimeout(()=>{o=Lt("request timeout","TIMEOUT"),s.abort()},n.timeout);r&&r.addListener(()=>{o=Lt("request cancelled","CANCELLED"),s.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:s.signal});let l;try{l=await fetch(n.url,c)}catch(h){throw clearTimeout(a),o||h}clearTimeout(a);const u={};l.headers.forEach((h,p)=>{u[p.toLowerCase()]=h});const f=await l.arrayBuffer(),d=f==null?null:new Uint8Array(f);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:d}}return e}const tT=12,nT=250;let Yy=Bx();const rT=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),iT=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let t0=!1;async function Lx(t,e){try{const n=t.match(rT);if(!n)throw new Error("invalid data");return new hs(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?q6(n[3]):sT(n[3]))}catch{return new hs(599,"BAD REQUEST (invalid data: URI)",{},null,new Ki(t))}}function Fx(t){async function e(n,r){try{const i=n.match(iT);if(!i)throw new Error("invalid link");return new Ki(`${t}${i[2]}`)}catch{return new hs(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ki(n))}}return e}const Nu={data:Lx,ipfs:Fx("https://gateway.ipfs.io/ipfs/")},Ux=new WeakMap;class oT{#e;#t;constructor(e){this.#e=[],this.#t=!1,Ux.set(e,()=>{if(!this.#t){this.#t=!0;for(const n of this.#e)setTimeout(()=>{n()},0);this.#e=[]}})}addListener(e){we(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){we(!this.cancelled,"cancelled","CANCELLED",{})}}function ku(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class Ki{#e;#t;#n;#r;#i;#s;#o;#a;#f;#l;#p;#g;#c;#u;#d;get url(){return this.#s}set url(e){this.#s=String(e)}get body(){return this.#o==null?null:new Uint8Array(this.#o)}set body(e){if(e==null)this.#o=void 0,this.#a=void 0;else if(typeof e=="string")this.#o=xo(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#o=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#o=xo(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#o!=null}get method(){return this.#r?this.#r:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#r=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#f&&(e.authorization=`Basic ${Y6(xo(this.#f))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){this.#n[String(e).toLowerCase()]=String(n)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#f||null}setCredentials(e,n){re(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#f=`${e}:${n}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#i}set timeout(e){re(e>=0,"timeout must be non-zero","timeout",e),this.#i=e}get preflightFunc(){return this.#l||null}set preflightFunc(e){this.#l=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#d||Yy}set getUrlFunc(e){this.#d=e}constructor(e){this.#s=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#r="",this.#i=3e5,this.#u={slotInterval:nT,maxAttempts:tT},this.#d=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#o?Te(this.#o):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#h(e,n,r,i,o){if(e>=this.#u.maxAttempts)return o.makeServerError("exceeded maximum retry limit");we(Xy()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await aT(r);let s=this.clone();const a=(s.url.split(":")[0]||"").toLowerCase();if(a in Nu){const u=await Nu[a](s.url,ku(i.#c));if(u instanceof hs){let f=u;if(this.processFunc){ku(i.#c);try{f=await this.processFunc(s,f)}catch(d){(d.throttle==null||typeof d.stall!="number")&&f.makeServerError("error in post-processing function",d).assertOk()}}return f}s=u}this.preflightFunc&&(s=await this.preflightFunc(s));const c=await this.getUrlFunc(s,ku(i.#c));let l=new hs(c.statusCode,c.statusMessage,c.headers,c.body,i);if(l.statusCode===301||l.statusCode===302){try{const u=l.headers.location||"";return s.redirect(u).#h(e+1,n,0,i,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(s,l,e))){const u=l.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof u=="string"&&u.match(/^[1-9][0-9]*$/)&&(f=parseInt(u)),s.clone().#h(e+1,n,f,i,l)}if(this.processFunc){ku(i.#c);try{l=await this.processFunc(s,l)}catch(u){(u.throttle==null||typeof u.stall!="number")&&l.makeServerError("error in post-processing function",u).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return u.stall>=0&&(f=u.stall),s.clone().#h(e+1,n,f,i,l)}}return l}send(){return we(this.#c==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#c=new oT(this),this.#h(0,Xy()+this.timeout,0,this,new hs(0,"",{},null,this))}cancel(){we(this.#c!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Ux.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();we(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Ki(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,i.#n=Object.assign({},this.#n),this.#o&&(i.#o=new Uint8Array(this.#o)),i.#a=this.#a,i}clone(){const e=new Ki(this.url);return e.#r=this.#r,this.#o&&(e.#o=this.#o),e.#a=this.#a,e.#n=Object.assign({},this.#n),e.#f=this.#f,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#l=this.#l,e.#p=this.#p,e.#g=this.#g,e.#u=Object.assign({},this.#u),e.#d=this.#d,e}static lockConfig(){t0=!0}static getGateway(e){return Nu[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(t0)throw new Error("gateways locked");Nu[e]=n}static registerGetUrl(e){if(t0)throw new Error("gateways locked");Yy=e}static createGetUrlFunc(e){return Bx(e)}static createDataGateway(){return Lx}static createIpfsGatewayFunc(e){return Fx(e)}}class hs{#e;#t;#n;#r;#i;#s;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#r?Te(this.#r):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#r==null?null:new Uint8Array(this.#r)}get bodyText(){try{return this.#r==null?"":ud(this.#r)}catch{we(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{we(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,n,r,i,o){this.#e=e,this.#t=n,this.#n=Object.keys(r).reduce((s,a)=>(s[a.toLowerCase()]=String(r[a]),s),{}),this.#r=i==null?null:new Uint8Array(i),this.#i=o||null,this.#s={message:""}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new hs(599,r,this.headers,this.body,this.#i||void 0);return i.#s={message:e,error:n},i}throwThrottleError(e,n){n==null?n=-1:re(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Fe(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#r!=null}get request(){return this.#i}ok(){return this.#s.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=this.#s;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{this.#r&&(i=ud(this.#r))}catch{}we(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function Xy(){return new Date().getTime()}function sT(t){return xo(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function aT(t){return new Promise(e=>setTimeout(e,t))}const cT=BigInt(-1),ii=BigInt(0),Ua=BigInt(1),lT=BigInt(5),xa={};let ic="0000";for(;ic.length<80;)ic+=ic;function ks(t){let e=ic;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function $c(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Ua<<r-Ua;we(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>ii?t=ld(Ws(t,r),r):t=-ld(Ws(-t,r),r)}else{const i=Ua<<r;we(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Ua}return t}function n0(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const o=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);re(o,"invalid fixed format","format",t),e=o[1]!=="u",n=parseInt(o[2]),r=parseInt(o[3])}}else if(t){const o=t,s=(a,c,l)=>o[a]==null?l:(re(typeof o[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,o[a]),o[a]);e=s("signed","boolean",e),n=s("width","number",n),r=s("decimals","number",r)}re(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),re(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function uT(t,e){let n="";t<ii&&(n="-",t*=cT);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=ic+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}class Jo{format;#e;#t;#n;_value;constructor(e,n,r){pu(e,xa,"FixedNumber"),this.#t=n,this.#e=r;const i=uT(n,r.decimals);Fe(this,{format:r.name,_value:i}),this.#n=ks(r.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#r(e){re(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#i(e,n){return e=$c(e,this.#e,n),new Jo(xa,e,this.#e)}#s(e,n){return this.#r(e),this.#i(this.#t+e.#t,n)}addUnsafe(e){return this.#s(e)}add(e){return this.#s(e,"add")}#o(e,n){return this.#r(e),this.#i(this.#t-e.#t,n)}subUnsafe(e){return this.#o(e)}sub(e){return this.#o(e,"sub")}#a(e,n){return this.#r(e),this.#i(this.#t*e.#t/this.#n,n)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#r(e);const n=this.#t*e.#t;return we(n%this.#n===ii,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#i(n/this.#n,"mulSignal")}#f(e,n){return we(e.#t!==ii,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e),this.#i(this.#t*this.#n/e.#t,n)}divUnsafe(e){return this.#f(e)}div(e){return this.#f(e,"div")}divSignal(e){we(e.#t!==ii,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e);const n=this.#t*this.#n;return we(n%e.#t===ii,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#i(n/e.#t,"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=ks(i):i<0&&(n*=ks(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<ii&&(e-=this.#n-Ua),e=this.#t/this.#n*this.#n,this.#i(e,"floor")}ceiling(){let e=this.#t;return this.#t>ii&&(e+=this.#n-Ua),e=this.#t/this.#n*this.#n,this.#i(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=lT*ks(n-1);let i=this.value+r;const o=ks(n);return i=i/o*o,$c(i,this.#e,"round"),new Jo(xa,i,this.#e)}isZero(){return this.#t===ii}isNegative(){return this.#t<ii}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Jo.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:We(n),o=n0(r);let s=Ne(e,"value");const a=i-o.decimals;if(a>0){const c=ks(a);we(s%c===ii,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),s/=c}else a<0&&(s*=ks(-a));return $c(s,o,"fromValue"),new Jo(xa,s,o)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);re(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=n0(n);let o=r[2]||"0",s=r[3]||"";for(;s.length<i.decimals;)s+=ic;we(s.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),s=s.substring(0,i.decimals);const a=BigInt(r[1]+o+s);return $c(a,i,"fromString"),new Jo(xa,a,i)}static fromBytes(e,n){let r=ph(Xe(e,"value"));const i=n0(n);return i.signed&&(r=ld(r,i.width)),$c(r,i,"fromBytes"),new Jo(xa,r,i)}}function fT(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Zy(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function Qy(t,e,n,r){const i=[];for(;n<e+1+r;){const o=Hx(t,n);i.push(o.result),n+=o.consumed,we(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function Hx(t,e){we(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{we(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=Zy(t,e+1,r);return n(e+1+r+i),Qy(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),Qy(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=Zy(t,e+1,r);n(e+1+r+i);const o=Te(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:o}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=Te(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:fT(t[e])}}function gu(t){const e=Xe(t,"data"),n=Hx(e,0);return re(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Jy(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function $x(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(o){r=r.concat($x(o))}),r.length<=55)return r.unshift(192+r.length),r;const i=Jy(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Xe(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Jy(e.length);return n.unshift(183+n.length),n.concat(e)}const em="0123456789abcdef";function xs(t){let e="0x";for(const n of $x(t))e+=em[n>>4],e+=em[n&15];return e}function dT(t,e){let n=18;return n=We(e,"unit"),Jo.fromValue(t,n,{decimals:n,width:512}).toString()}function Aa(t){return dT(t,18)}const tr=32,Fp=new Uint8Array(tr),hT=["then"],Mu={},Vx=new WeakMap;function Ks(t){return Vx.get(t)}function tm(t,e){Vx.set(t,e)}function Vc(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function Up(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof fd?Up(Ks(r),r,n):r):t.reduce((r,i,o)=>{let s=e.getValue(i);return i in r||(n&&s instanceof fd&&(s=Up(Ks(s),s,n)),r[i]=s),r},{})}let fd=class tl extends Array{#e;constructor(...e){const n=e[0];let r=e[1],i=(e[2]||[]).slice(),o=!0;n!==Mu&&(r=e,i=[],o=!1),super(r.length),r.forEach((c,l)=>{this[l]=c});const s=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(tm(this,Object.freeze(r.map((c,l)=>{const u=i[l];return u!=null&&s.get(u)===1?u:null}))),this.#e=[],this.#e==null&&this.#e,!o)return;Object.freeze(this);const a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const d=We(l,"%index");if(d<0||d>=this.length)throw new RangeError("out of result range");const h=c[d];return h instanceof Error&&Vc(`index ${d}`,h),h}if(hT.indexOf(l)>=0)return Reflect.get(c,l,u);const f=c[l];if(f instanceof Function)return function(...d){return f.apply(this===u?c:this,d)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return tm(a,Ks(this)),a}toArray(e){const n=[];return this.forEach((r,i)=>{r instanceof Error&&Vc(`index ${i}`,r),e&&r instanceof tl&&(r=r.toArray(e)),n.push(r)}),n}toObject(e){const n=Ks(this);return n.reduce((r,i,o)=>(we(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Up(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const r=Ks(this),i=[],o=[];for(let s=e;s<n;s++)i.push(this[s]),o.push(r[s]);return new tl(Mu,i,o)}filter(e,n){const r=Ks(this),i=[],o=[];for(let s=0;s<this.length;s++){const a=this[s];a instanceof Error&&Vc(`index ${s}`,a),e.call(n,a,s,this)&&(i.push(a),o.push(r[s]))}return new tl(Mu,i,o)}map(e,n){const r=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Vc(`index ${i}`,o),r.push(e.call(n,o,i,this))}return r}getValue(e){const n=Ks(this).indexOf(e);if(n===-1)return;const r=this[n];return r instanceof Error&&Vc(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,n){return new tl(Mu,e,n)}};function nm(t){let e=un(t);return we(e.length<=tr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:tr,offset:e.length}),e.length!==tr&&(e=er(Wt([Fp.slice(e.length%tr),e]))),e}class Po{name;type;localName;dynamic;constructor(e,n,r,i){Fe(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){re(!1,e,this.localName,n)}}class Hp{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return Wt(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(er(e.data))}writeBytes(e){let n=er(e);const r=n.length%tr;return r&&(n=er(Wt([n,Fp.slice(r)]))),this.#n(n)}writeValue(e){return this.#n(nm(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(Fp),this.#t+=tr,n=>{this.#e[e]=nm(n)}}}class Ig{allowLoose;#e;#t;#n;#r;#i;constructor(e,n,r){Fe(this,{allowLoose:!!n}),this.#e=er(e),this.#n=0,this.#r=null,this.#i=r??1024,this.#t=0}get data(){return Te(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#s(e){if(this.#r)return this.#r.#s(e);this.#n+=e,we(this.#i<1||this.#n<=this.#i*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#i} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:er(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#o(e,n,r){let i=Math.ceil(n/tr)*tr;return this.#t+i>this.#e.length&&(this.allowLoose&&r&&this.#t+n<=this.#e.length?i=n:we(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:er(this.#e),length:this.#e.length,offset:this.#t+i})),this.#e.slice(this.#t,this.#t+i)}subReader(e){const n=new Ig(this.#e.slice(this.#t+e),this.allowLoose,this.#i);return n.#r=this,n}readBytes(e,n){let r=this.#o(0,e,!!n);return this.#s(e),this.#t+=r.length,r.slice(0,e)}readValue(){return ph(this.readBytes(tr))}readIndex(){return z6(this.readBytes(tr))}}function dd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Tg(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function pT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");dd(t.outputLen),dd(t.blockLen)}function mc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jx(t,e){Tg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const r0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const Kx=t=>t instanceof Uint8Array,gT=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),i0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xi=(t,e)=>t<<32-e|t>>>e,vT=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!vT)throw new Error("Non little-endian hardware is not supported");function yT(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function gh(t){if(typeof t=="string"&&(t=yT(t)),!Kx(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function mT(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Kx(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class Og{clone(){return this._cloneInto()}}function Rg(t){const e=r=>t().update(gh(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function wT(t=32){if(r0&&typeof r0.getRandomValues=="function")return r0.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Gx extends Og{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,pT(e);const r=gh(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return mc(this),this.iHash.update(e),this}digestInto(e){mc(this),Tg(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zx=(t,e,n)=>new Gx(t,e).update(n).digest();zx.create=(t,e)=>new Gx(t,e);function bT(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,l=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+l,a,r)}class Wx extends Og{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=i0(this.buffer)}update(e){mc(this);const{view:n,buffer:r,blockLen:i}=this;e=gh(e);const o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const c=i0(e);for(;i<=o-s;s+=i)this.process(c,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){mc(this),jx(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let f=s;f<i;f++)n[f]=0;bT(r,i-8,BigInt(this.length*8),o),this.process(r,0);const a=i0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%n&&e.buffer.set(r),e}}const ET=(t,e,n)=>t&e^~t&n,xT=(t,e,n)=>t&e^t&n^e&n,AT=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Mo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Do=new Uint32Array(64);class _T extends Wx{constructor(){super(64,32,8,!1),this.A=Mo[0]|0,this.B=Mo[1]|0,this.C=Mo[2]|0,this.D=Mo[3]|0,this.E=Mo[4]|0,this.F=Mo[5]|0,this.G=Mo[6]|0,this.H=Mo[7]|0}get(){const{A:e,B:n,C:r,D:i,E:o,F:s,G:a,H:c}=this;return[e,n,r,i,o,s,a,c]}set(e,n,r,i,o,s,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,n){for(let f=0;f<16;f++,n+=4)Do[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Do[f-15],h=Do[f-2],p=xi(d,7)^xi(d,18)^d>>>3,g=xi(h,17)^xi(h,19)^h>>>10;Do[f]=g+Do[f-7]+p+Do[f-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=xi(a,6)^xi(a,11)^xi(a,25),h=u+d+ET(a,c,l)+AT[f]+Do[f]|0,g=(xi(r,2)^xi(r,13)^xi(r,22))+xT(r,i,o)|0;u=l,l=c,c=a,a=s+h|0,s=o,o=i,i=r,r=h+g|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,o,s,a,c,l,u)}roundClean(){Do.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const qx=Rg(()=>new _T),Du=BigInt(2**32-1),$p=BigInt(32);function Yx(t,e=!1){return e?{h:Number(t&Du),l:Number(t>>$p&Du)}:{h:Number(t>>$p&Du)|0,l:Number(t&Du)|0}}function Xx(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=Yx(t[i],e);[n[i],r[i]]=[o,s]}return[n,r]}const CT=(t,e)=>BigInt(t>>>0)<<$p|BigInt(e>>>0),ST=(t,e,n)=>t>>>n,IT=(t,e,n)=>t<<32-n|e>>>n,TT=(t,e,n)=>t>>>n|e<<32-n,OT=(t,e,n)=>t<<32-n|e>>>n,RT=(t,e,n)=>t<<64-n|e>>>n-32,PT=(t,e,n)=>t>>>n-32|e<<64-n,NT=(t,e)=>e,kT=(t,e)=>t,Zx=(t,e,n)=>t<<n|e>>>32-n,Qx=(t,e,n)=>e<<n|t>>>32-n,Jx=(t,e,n)=>e<<n-32|t>>>64-n,eA=(t,e,n)=>t<<n-32|e>>>64-n;function MT(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const DT=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),BT=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,LT=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),FT=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,UT=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),HT=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0,Ge={fromBig:Yx,split:Xx,toBig:CT,shrSH:ST,shrSL:IT,rotrSH:TT,rotrSL:OT,rotrBH:RT,rotrBL:PT,rotr32H:NT,rotr32L:kT,rotlSH:Zx,rotlSL:Qx,rotlBH:Jx,rotlBL:eA,add:MT,add3L:DT,add3H:BT,add4L:LT,add4H:FT,add5H:HT,add5L:UT},[$T,VT]=Ge.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Bo=new Uint32Array(80),Lo=new Uint32Array(80);class jT extends Wx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:h,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y]}set(e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let w=0;w<16;w++,n+=4)Bo[w]=e.getUint32(n),Lo[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const E=Bo[w-15]|0,S=Lo[w-15]|0,O=Ge.rotrSH(E,S,1)^Ge.rotrSH(E,S,8)^Ge.shrSH(E,S,7),F=Ge.rotrSL(E,S,1)^Ge.rotrSL(E,S,8)^Ge.shrSL(E,S,7),$=Bo[w-2]|0,U=Lo[w-2]|0,B=Ge.rotrSH($,U,19)^Ge.rotrBH($,U,61)^Ge.shrSH($,U,6),Y=Ge.rotrSL($,U,19)^Ge.rotrBL($,U,61)^Ge.shrSL($,U,6),j=Ge.add4L(F,Y,Lo[w-7],Lo[w-16]),L=Ge.add4H(j,O,B,Bo[w-7],Bo[w-16]);Bo[w]=L|0,Lo[w]=j|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:h,Fl:p,Gh:g,Gl:y,Hh:v,Hl:m}=this;for(let w=0;w<80;w++){const E=Ge.rotrSH(f,d,14)^Ge.rotrSH(f,d,18)^Ge.rotrBH(f,d,41),S=Ge.rotrSL(f,d,14)^Ge.rotrSL(f,d,18)^Ge.rotrBL(f,d,41),O=f&h^~f&g,F=d&p^~d&y,$=Ge.add5L(m,S,F,VT[w],Lo[w]),U=Ge.add5H($,v,E,O,$T[w],Bo[w]),B=$|0,Y=Ge.rotrSH(r,i,28)^Ge.rotrBH(r,i,34)^Ge.rotrBH(r,i,39),j=Ge.rotrSL(r,i,28)^Ge.rotrBL(r,i,34)^Ge.rotrBL(r,i,39),L=r&o^r&a^o&a,I=i&s^i&c^s&c;v=g|0,m=y|0,g=h|0,y=p|0,h=f|0,p=d|0,{h:f,l:d}=Ge.add(l|0,u|0,U|0,B|0),l=a|0,u=c|0,a=o|0,c=s|0,o=r|0,s=i|0;const x=Ge.add3L(B,j,I);r=Ge.add3H(x,U,Y,L),i=x|0}({h:r,l:i}=Ge.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=Ge.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Ge.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ge.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=Ge.add(this.Eh|0,this.El|0,f|0,d|0),{h,l:p}=Ge.add(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:y}=Ge.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:v,l:m}=Ge.add(this.Hh|0,this.Hl|0,v|0,m|0),this.set(r,i,o,s,a,c,l,u,f,d,h,p,g,y,v,m)}roundClean(){Bo.fill(0),Lo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const KT=Rg(()=>new jT);function GT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const rm=GT();rm.crypto||rm.msCrypto;function zT(t){switch(t){case"sha256":return qx.create();case"sha512":return KT.create()}re(!1,"invalid hashing algorithm name","algorithm",t)}const[tA,nA,rA]=[[],[],[]],WT=BigInt(0),jc=BigInt(1),qT=BigInt(2),YT=BigInt(7),XT=BigInt(256),ZT=BigInt(113);for(let t=0,e=jc,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],tA.push(2*(5*r+n)),nA.push((t+1)*(t+2)/2%64);let i=WT;for(let o=0;o<7;o++)e=(e<<jc^(e>>YT)*ZT)%XT,e&qT&&(i^=jc<<(jc<<BigInt(o))-jc);rA.push(i)}const[QT,JT]=Xx(rA,!0),im=(t,e,n)=>n>32?Jx(t,e,n):Zx(t,e,n),om=(t,e,n)=>n>32?eA(t,e,n):Qx(t,e,n);function eO(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let s=0;s<10;s++)n[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const a=(s+8)%10,c=(s+2)%10,l=n[c],u=n[c+1],f=im(l,u,1)^n[a],d=om(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[s+h]^=f,t[s+h+1]^=d}let i=t[2],o=t[3];for(let s=0;s<24;s++){const a=nA[s],c=im(i,o,a),l=om(i,o,a),u=tA[s];i=t[u],o=t[u+1],t[u]=c,t[u+1]=l}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)n[a]=t[s+a];for(let a=0;a<10;a++)t[s+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=QT[r],t[1]^=JT[r]}n.fill(0)}class Pg extends Og{constructor(e,n,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,dd(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=gT(this.state)}keccak(){eO(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){mc(this);const{blockLen:n,state:r}=this;e=gh(e);const i=e.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);for(let a=0;a<s;a++)r[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){mc(this,!1),Tg(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=e.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);e.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return dd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(jx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return e||(e=new Pg(n,r,i,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}const tO=(t,e,n)=>Rg(()=>new Pg(e,t,n)),nO=tO(1,136,256/8);let iA=!1;const oA=function(t){return nO(t)};let sA=oA;function Jt(t){const e=Xe(t,"data");return Te(sA(e))}Jt._=oA;Jt.lock=function(){iA=!0};Jt.register=function(t){if(iA)throw new TypeError("keccak256 is locked");sA=t};Object.freeze(Jt);const aA=function(t){return zT("sha256").update(t).digest()};let cA=aA,lA=!1;function Nc(t){const e=Xe(t,"data");return Te(cA(e))}Nc._=aA;Nc.lock=function(){lA=!0};Nc.register=function(t){if(lA)throw new Error("sha256 is locked");cA=t};Object.freeze(Nc);Object.freeze(Nc);const uA=BigInt(0),vh=BigInt(1),rO=BigInt(2),yh=t=>t instanceof Uint8Array,iO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wc(t){if(!yh(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=iO[t[n]];return e}function fA(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Ng(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function bc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function ra(t){return Ng(wc(t))}function kg(t){if(!yh(t))throw new Error("Uint8Array expected");return Ng(wc(Uint8Array.from(t).reverse()))}function Ec(t,e){return bc(t.toString(16).padStart(e*2,"0"))}function Mg(t,e){return Ec(t,e).reverse()}function oO(t){return bc(fA(t))}function oi(t,e,n){let r;if(typeof e=="string")try{r=bc(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(yh(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Ul(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!yh(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function sO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function aO(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function cO(t){let e;for(e=0;t>uA;t>>=vh,e+=1);return e}function lO(t,e){return t>>BigInt(e)&vh}const uO=(t,e,n)=>t|(n?vh:uA)<<BigInt(e),Dg=t=>(rO<<BigInt(t-1))-vh,o0=t=>new Uint8Array(t),sm=t=>Uint8Array.from(t);function dA(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=o0(t),i=o0(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...f)=>n(i,r,...f),c=(f=o0())=>{i=a(sm([0]),f),r=a(),f.length!==0&&(i=a(sm([1]),f),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=a();const h=r.slice();d.push(h),f+=r.length}return Ul(...d)};return(f,d)=>{s(),c(f);let h;for(;!(h=d(l()));)c();return s(),h}}const fO={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function vu(t,e,n={}){const r=(i,o,s)=>{const a=fO[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=t[i];if(!(s&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(const[i,o]of Object.entries(e))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return t}const dO=Object.freeze(Object.defineProperty({__proto__:null,bitGet:lO,bitLen:cO,bitMask:Dg,bitSet:uO,bytesToHex:wc,bytesToNumberBE:ra,bytesToNumberLE:kg,concatBytes:Ul,createHmacDrbg:dA,ensureBytes:oi,equalBytes:sO,hexToBytes:bc,hexToNumber:Ng,numberToBytesBE:Ec,numberToBytesLE:Mg,numberToHexUnpadded:fA,numberToVarBytesBE:oO,utf8ToBytes:aO,validateObject:vu},Symbol.toStringTag,{value:"Module"}));const bn=BigInt(0),Zt=BigInt(1),Gs=BigInt(2),hO=BigInt(3),Vp=BigInt(4),am=BigInt(5),cm=BigInt(8);BigInt(9);BigInt(16);function dr(t,e){const n=t%e;return n>=bn?n:e+n}function pO(t,e,n){if(n<=bn||e<bn)throw new Error("Expected power/modulo > 0");if(n===Zt)return bn;let r=Zt;for(;e>bn;)e&Zt&&(r=r*t%n),t=t*t%n,e>>=Zt;return r}function Br(t,e,n){let r=t;for(;e-- >bn;)r*=r,r%=n;return r}function jp(t,e){if(t===bn||e<=bn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=dr(t,e),r=e,i=bn,o=Zt;for(;n!==bn;){const a=r/n,c=r%n,l=i-o*a;r=n,n=c,i=o,o=l}if(r!==Zt)throw new Error("invert: does not exist");return dr(i,e)}function gO(t){const e=(t-Zt)/Gs;let n,r,i;for(n=t-Zt,r=0;n%Gs===bn;n/=Gs,r++);for(i=Gs;i<t&&pO(i,e,t)!==t-Zt;i++);if(r===1){const s=(t+Zt)/Vp;return function(c,l){const u=c.pow(l,s);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const o=(n+Zt)/Gs;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),f=a.pow(c,o),d=a.pow(c,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let g=a.sqr(d);h<l&&!a.eql(g,a.ONE);h++)g=a.sqr(g);const p=a.pow(u,Zt<<BigInt(l-h-1));u=a.sqr(p),f=a.mul(f,p),d=a.mul(d,u),l=h}return f}}function vO(t){if(t%Vp===hO){const e=(t+Zt)/Vp;return function(r,i){const o=r.pow(i,e);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%cm===am){const e=(t-am)/cm;return function(r,i){const o=r.mul(i,Gs),s=r.pow(o,e),a=r.mul(i,s),c=r.mul(r.mul(a,Gs),s),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return gO(t)}const yO=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mO(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=yO.reduce((r,i)=>(r[i]="function",r),e);return vu(t,n)}function wO(t,e,n){if(n<bn)throw new Error("Expected power > 0");if(n===bn)return t.ONE;if(n===Zt)return e;let r=t.ONE,i=e;for(;n>bn;)n&Zt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Zt;return r}function bO(t,e){const n=new Array(e.length),r=e.reduce((o,s,a)=>t.is0(s)?o:(n[a]=o,t.mul(o,s)),t.ONE),i=t.inv(r);return e.reduceRight((o,s,a)=>t.is0(s)?o:(n[a]=t.mul(o,n[a]),t.mul(o,s)),i),n}function hA(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function EO(t,e,n=!1,r={}){if(t<=bn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=hA(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=vO(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:Dg(i),ZERO:bn,ONE:Zt,create:c=>dr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return bn<=c&&c<t},is0:c=>c===bn,isOdd:c=>(c&Zt)===Zt,neg:c=>dr(-c,t),eql:(c,l)=>c===l,sqr:c=>dr(c*c,t),add:(c,l)=>dr(c+l,t),sub:(c,l)=>dr(c-l,t),mul:(c,l)=>dr(c*l,t),pow:(c,l)=>wO(a,c,l),div:(c,l)=>dr(c*jp(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>jp(c,t),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>bO(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?Mg(c,o):Ec(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return n?kg(c):ra(c)}});return Object.freeze(a)}function pA(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function gA(t){const e=pA(t);return e+Math.ceil(e/2)}function xO(t,e,n=!1){const r=t.length,i=pA(e),o=gA(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=n?ra(t):kg(t),a=dr(s,e-Zt)+Zt;return n?Mg(a,i):Ec(a,i)}const AO=BigInt(0),s0=BigInt(1);function _O(t,e){const n=(i,o)=>{const s=o.negate();return i?s:o},r=i=>{const o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:n,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>AO;)o&s0&&(s=s.add(a)),a=a.double(),o>>=s0;return s},precomputeWindow(i,o){const{windows:s,windowSize:a}=r(o),c=[];let l=i,u=l;for(let f=0;f<s;f++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(i,o,s){const{windows:a,windowSize:c}=r(i);let l=t.ZERO,u=t.BASE;const f=BigInt(2**i-1),d=2**i,h=BigInt(i);for(let p=0;p<a;p++){const g=p*c;let y=Number(s&f);s>>=h,y>c&&(y-=d,s+=s0);const v=g,m=g+Math.abs(y)-1,w=p%2!==0,E=y<0;y===0?u=u.add(n(w,o[v])):l=l.add(n(E,o[m]))}return{p:l,f:u}},wNAFCached(i,o,s,a){const c=i._WINDOW_SIZE||1;let l=o.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&o.set(i,a(l))),this.wNAF(c,l,s)}}}function vA(t){return mO(t.Fp),vu(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...hA(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function CO(t){const e=vA(t);vu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:SO,hexToBytes:IO}=dO,qs={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=qs;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:SO(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=qs,n=typeof t=="string"?IO(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=qs._parseInt(n.subarray(2)),{d:s,l:a}=qs._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},ho=BigInt(0),jr=BigInt(1);BigInt(2);const lm=BigInt(3);BigInt(4);function TO(t){const e=CO(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const v=g.toAffine();return Ul(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),i=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),v=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:v}});function o(p){const{a:g,b:y}=e,v=n.sqr(p),m=n.mul(v,p);return n.add(n.add(m,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&ho<p&&p<e.n}function a(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:v,n:m}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=wc(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let w;try{w=typeof p=="bigint"?p:ra(oi("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return v&&(w=dr(w,m)),a(w),w}const l=new Map;function u(p){if(!(p instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(g,y,v){if(this.px=g,this.py=y,this.pz=v,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(v==null||!n.isValid(v))throw new Error("z required")}static fromAffine(g){const{x:y,y:v}=g||{};if(!g||!n.isValid(y)||!n.isValid(v))throw new Error("invalid affine point");if(g instanceof f)throw new Error("projective point not allowed");const m=w=>n.eql(w,n.ZERO);return m(y)&&m(v)?f.ZERO:new f(y,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(v=>v.pz));return g.map((v,m)=>v.toAffine(y[m])).map(f.fromAffine)}static fromHex(g){const y=f.fromAffine(i(oi("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return f.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const v=n.sqr(y),m=o(g);if(!n.eql(v,m))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:v,pz:m}=this,{px:w,py:E,pz:S}=g,O=n.eql(n.mul(y,S),n.mul(w,m)),F=n.eql(n.mul(v,S),n.mul(E,m));return O&&F}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,v=n.mul(y,lm),{px:m,py:w,pz:E}=this;let S=n.ZERO,O=n.ZERO,F=n.ZERO,$=n.mul(m,m),U=n.mul(w,w),B=n.mul(E,E),Y=n.mul(m,w);return Y=n.add(Y,Y),F=n.mul(m,E),F=n.add(F,F),S=n.mul(g,F),O=n.mul(v,B),O=n.add(S,O),S=n.sub(U,O),O=n.add(U,O),O=n.mul(S,O),S=n.mul(Y,S),F=n.mul(v,F),B=n.mul(g,B),Y=n.sub($,B),Y=n.mul(g,Y),Y=n.add(Y,F),F=n.add($,$),$=n.add(F,$),$=n.add($,B),$=n.mul($,Y),O=n.add(O,$),B=n.mul(w,E),B=n.add(B,B),$=n.mul(B,Y),S=n.sub(S,$),F=n.mul(B,U),F=n.add(F,F),F=n.add(F,F),new f(S,O,F)}add(g){u(g);const{px:y,py:v,pz:m}=this,{px:w,py:E,pz:S}=g;let O=n.ZERO,F=n.ZERO,$=n.ZERO;const U=e.a,B=n.mul(e.b,lm);let Y=n.mul(y,w),j=n.mul(v,E),L=n.mul(m,S),I=n.add(y,v),x=n.add(w,E);I=n.mul(I,x),x=n.add(Y,j),I=n.sub(I,x),x=n.add(y,m);let P=n.add(w,S);return x=n.mul(x,P),P=n.add(Y,L),x=n.sub(x,P),P=n.add(v,m),O=n.add(E,S),P=n.mul(P,O),O=n.add(j,L),P=n.sub(P,O),$=n.mul(U,x),O=n.mul(B,L),$=n.add(O,$),O=n.sub(j,$),$=n.add(j,$),F=n.mul(O,$),j=n.add(Y,Y),j=n.add(j,Y),L=n.mul(U,L),x=n.mul(B,x),j=n.add(j,L),L=n.sub(Y,L),L=n.mul(U,L),x=n.add(x,L),Y=n.mul(j,x),F=n.add(F,Y),Y=n.mul(P,x),O=n.mul(I,O),O=n.sub(O,Y),Y=n.mul(I,j),$=n.mul(P,$),$=n.add($,Y),new f(O,F,$)}subtract(g){return this.add(g.negate())}is0(){return this.equals(f.ZERO)}wNAF(g){return h.wNAFCached(this,l,g,y=>{const v=n.invertBatch(y.map(m=>m.pz));return y.map((m,w)=>m.toAffine(v[w])).map(f.fromAffine)})}multiplyUnsafe(g){const y=f.ZERO;if(g===ho)return y;if(a(g),g===jr)return this;const{endo:v}=e;if(!v)return h.unsafeLadder(this,g);let{k1neg:m,k1:w,k2neg:E,k2:S}=v.splitScalar(g),O=y,F=y,$=this;for(;w>ho||S>ho;)w&jr&&(O=O.add($)),S&jr&&(F=F.add($)),$=$.double(),w>>=jr,S>>=jr;return m&&(O=O.negate()),E&&(F=F.negate()),F=new f(n.mul(F.px,v.beta),F.py,F.pz),O.add(F)}multiply(g){a(g);let y=g,v,m;const{endo:w}=e;if(w){const{k1neg:E,k1:S,k2neg:O,k2:F}=w.splitScalar(y);let{p:$,f:U}=this.wNAF(S),{p:B,f:Y}=this.wNAF(F);$=h.constTimeNegate(E,$),B=h.constTimeNegate(O,B),B=new f(n.mul(B.px,w.beta),B.py,B.pz),v=$.add(B),m=U.add(Y)}else{const{p:E,f:S}=this.wNAF(y);v=E,m=S}return f.normalizeZ([v,m])[0]}multiplyAndAddUnsafe(g,y,v){const m=f.BASE,w=(S,O)=>O===ho||O===jr||!S.equals(m)?S.multiplyUnsafe(O):S.multiply(O),E=w(this,y).add(w(g,v));return E.is0()?void 0:E}toAffine(g){const{px:y,py:v,pz:m}=this,w=this.is0();g==null&&(g=w?n.ONE:n.inv(m));const E=n.mul(y,g),S=n.mul(v,g),O=n.mul(m,g);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:E,y:S}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===jr)return!0;if(y)return y(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===jr?this:y?y(f,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(f,this,g)}toHex(g=!0){return wc(this.toRawBytes(g))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,h=_O(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function OO(t){const e=vA(t);return vu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function RO(t){const e=OO(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(x){return ho<x&&x<n.ORDER}function a(x){return dr(x,r)}function c(x){return jp(x,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=TO({...e,toBytes(x,P,G){const b=P.toAffine(),C=n.toBytes(b.x),T=Ul;return G?T(Uint8Array.from([P.hasEvenY()?2:3]),C):T(Uint8Array.from([4]),C,n.toBytes(b.y))},fromBytes(x){const P=x.length,G=x[0],b=x.subarray(1);if(P===i&&(G===2||G===3)){const C=ra(b);if(!s(C))throw new Error("Point is not on curve");const T=f(C);let k=n.sqrt(T);const A=(k&jr)===jr;return(G&1)===1!==A&&(k=n.neg(k)),{x:C,y:k}}else if(P===o&&G===4){const C=n.fromBytes(b.subarray(0,n.BYTES)),T=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:C,y:T}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),h=x=>wc(Ec(x,e.nByteLength));function p(x){const P=r>>jr;return x>P}function g(x){return p(x)?a(-x):x}const y=(x,P,G)=>ra(x.slice(P,G));class v{constructor(P,G,b){this.r=P,this.s=G,this.recovery=b,this.assertValidity()}static fromCompact(P){const G=e.nByteLength;return P=oi("compactSignature",P,G*2),new v(y(P,0,G),y(P,G,2*G))}static fromDER(P){const{r:G,s:b}=qs.toSig(oi("DER",P));return new v(G,b)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new v(this.r,this.s,P)}recoverPublicKey(P){const{r:G,s:b,recovery:C}=this,T=F(oi("msgHash",P));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");const k=C===2||C===3?G+e.n:G;if(k>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const A=(C&1)===0?"02":"03",_=l.fromHex(A+h(k)),R=c(k),D=a(-T*R),H=a(b*R),N=l.BASE.multiplyAndAddUnsafe(_,D,H);if(!N)throw new Error("point at infinify");return N.assertValidity(),N}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return bc(this.toDERHex())}toDERHex(){return qs.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return bc(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(x){try{return u(x),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const x=gA(e.n);return xO(e.randomBytes(x),e.n)},precompute(x=8,P=l.BASE){return P._setWindowSize(x),P.multiply(BigInt(3)),P}};function w(x,P=!0){return l.fromPrivateKey(x).toRawBytes(P)}function E(x){const P=x instanceof Uint8Array,G=typeof x=="string",b=(P||G)&&x.length;return P?b===i||b===o:G?b===2*i||b===2*o:x instanceof l}function S(x,P,G=!0){if(E(x))throw new Error("first arg must be private key");if(!E(P))throw new Error("second arg must be public key");return l.fromHex(P).multiply(u(x)).toRawBytes(G)}const O=e.bits2int||function(x){const P=ra(x),G=x.length*8-e.nBitLength;return G>0?P>>BigInt(G):P},F=e.bits2int_modN||function(x){return a(O(x))},$=Dg(e.nBitLength);function U(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(ho<=x&&x<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ec(x,e.nByteLength)}function B(x,P,G=Y){if(["recovered","canonical"].some(z=>z in G))throw new Error("sign() legacy options not supported");const{hash:b,randomBytes:C}=e;let{lowS:T,prehash:k,extraEntropy:A}=G;T==null&&(T=!0),x=oi("msgHash",x),k&&(x=oi("prehashed msgHash",b(x)));const _=F(x),R=u(P),D=[U(R),U(_)];if(A!=null){const z=A===!0?C(n.BYTES):A;D.push(oi("extraEntropy",z))}const H=Ul(...D),N=_;function K(z){const Z=O(z);if(!d(Z))return;const oe=c(Z),M=l.BASE.multiply(Z).toAffine(),V=a(M.x);if(V===ho)return;const X=a(oe*a(N+V*R));if(X===ho)return;let ie=(M.x===V?0:2)|Number(M.y&jr),te=X;return T&&p(X)&&(te=g(X),ie^=1),new v(V,te,ie)}return{seed:H,k2sig:K}}const Y={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function L(x,P,G=Y){const{seed:b,k2sig:C}=B(x,P,G),T=e;return dA(T.hash.outputLen,T.nByteLength,T.hmac)(b,C)}l.BASE._setWindowSize(8);function I(x,P,G,b=j){const C=x;if(P=oi("msgHash",P),G=oi("publicKey",G),"strict"in b)throw new Error("options.strict was renamed to lowS");const{lowS:T,prehash:k}=b;let A,_;try{if(typeof C=="string"||C instanceof Uint8Array)try{A=v.fromDER(C)}catch(M){if(!(M instanceof qs.Err))throw M;A=v.fromCompact(C)}else if(typeof C=="object"&&typeof C.r=="bigint"&&typeof C.s=="bigint"){const{r:M,s:V}=C;A=new v(M,V)}else throw new Error("PARSE");_=l.fromHex(G)}catch(M){if(M.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(T&&A.hasHighS())return!1;k&&(P=e.hash(P));const{r:R,s:D}=A,H=F(P),N=c(D),K=a(H*N),z=a(R*N),Z=l.BASE.multiplyAndAddUnsafe(_,K,z)?.toAffine();return Z?a(Z.x)===R:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:S,sign:L,verify:I,ProjectivePoint:l,Signature:v,utils:m}}function PO(t){return{hash:t,hmac:(e,...n)=>zx(t,e,mT(...n)),randomBytes:wT}}function NO(t,e){const n=r=>RO({...t,...PO(r)});return Object.freeze({...n(e),create:n})}const yA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),um=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kO=BigInt(1),Kp=BigInt(2),fm=(t,e)=>(t+e/Kp)/e;function MO(t){const e=yA,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,f=Br(u,n,e)*u%e,d=Br(f,n,e)*u%e,h=Br(d,Kp,e)*l%e,p=Br(h,i,e)*h%e,g=Br(p,o,e)*p%e,y=Br(g,a,e)*g%e,v=Br(y,c,e)*y%e,m=Br(v,a,e)*g%e,w=Br(m,n,e)*u%e,E=Br(w,s,e)*p%e,S=Br(E,r,e)*l%e,O=Br(S,Kp,e);if(!Gp.eql(Gp.sqr(O),t))throw new Error("Cannot find square root");return O}const Gp=EO(yA,void 0,void 0,{sqrt:MO}),Go=NO({a:BigInt(0),b:BigInt(7),Fp:Gp,n:um,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=um,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-kO*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=fm(o*t,e),c=fm(-r*t,e);let l=dr(t-a*n-c*i,e),u=dr(-a*r-c*o,e);const f=l>s,d=u>s;if(f&&(l=e-l),d&&(u=e-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},qx);BigInt(0);Go.ProjectivePoint;const Hl="0x0000000000000000000000000000000000000000",dm="0x0000000000000000000000000000000000000000000000000000000000000000",hm=BigInt(0),pm=BigInt(1),gm=BigInt(2),vm=BigInt(27),ym=BigInt(28),Bu=BigInt(35),_a={};function mm(t){return Io(un(t),32)}class Kt{#e;#t;#n;#r;get r(){return this.#e}set r(e){re(rc(e)===32,"invalid r","value",e),this.#e=Te(e)}get s(){return re(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){re(rc(e)===32,"invalid s","value",e),this.#t=Te(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#n}set v(e){const n=We(e,"value");re(n===27||n===28,"invalid v","v",e),this.#n=n}get networkV(){return this.#r}get legacyChainId(){const e=this.networkV;return e==null?null:Kt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Xe(this.s);return this.yParity&&(e[0]|=128),Te(e)}get compactSerialized(){return Wt([this.r,this.yParityAndS])}get serialized(){return Wt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,n,r,i){pu(e,_a,"Signature"),this.#e=n,this.#t=r,this.#n=i,this.#r=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Kt(_a,this.r,this._s,this.v);return this.networkV&&(e.#r=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ne(e,"v");return n==vm||n==ym?hm:(re(n>=Bu,"invalid EIP-155 v","v",e),(n-Bu)/gm)}static getChainIdV(e,n){return Ne(e)*gm+BigInt(35+n-27)}static getNormalizedV(e){const n=Ne(e);return n===hm||n===vm?27:n===pm||n===ym?28:(re(n>=Bu,"invalid v","v",e),n&pm?27:28)}static from(e){function n(l,u){re(l,u,"signature",e)}if(e==null)return new Kt(_a,dm,dm,27);if(typeof e=="string"){const l=Xe(e,"signature");if(l.length===64){const u=Te(l.slice(0,32)),f=l.slice(32,64),d=f[0]&128?28:27;return f[0]&=127,new Kt(_a,u,Te(f),d)}if(l.length===65){const u=Te(l.slice(0,32)),f=Te(l.slice(32,64)),d=Kt.getNormalizedV(l[64]);return new Kt(_a,u,f,d)}n(!1,"invalid raw signature length")}if(e instanceof Kt)return e.clone();const r=e.r;n(r!=null,"missing r");const i=mm(r),o=(function(l,u){if(l!=null)return mm(l);if(u!=null){n(Pt(u,32),"invalid yParityAndS");const f=Xe(u);return f[0]&=127,Te(f)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:s,v:a}=(function(l,u,f){if(l!=null){const d=Ne(l);return{networkV:d>=Bu?d:void 0,v:Kt.getNormalizedV(d)}}if(u!=null)return n(Pt(u,32),"invalid yParityAndS"),{v:Xe(u)[0]&128?28:27};if(f!=null){switch(We(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),c=new Kt(_a,i,o,a);return s&&(c.#r=s),n(e.yParity==null||We(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}class po{#e;constructor(e){re(rc(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=Te(e)}get privateKey(){return this.#e}get publicKey(){return po.computePublicKey(this.#e)}get compressedPublicKey(){return po.computePublicKey(this.#e,!0)}sign(e){re(rc(e)===32,"invalid digest length","digest",e);const n=Go.sign(er(e),er(this.#e),{lowS:!0});return Kt.from({r:Es(n.r,32),s:Es(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=po.computePublicKey(e);return Te(Go.getSharedSecret(er(this.#e),Xe(n),!1))}static computePublicKey(e,n){let r=Xe(e,"key");if(r.length===32){const o=Go.getPublicKey(r,!!n);return Te(o)}if(r.length===64){const o=new Uint8Array(65);o[0]=4,o.set(r,1),r=o}const i=Go.ProjectivePoint.fromHex(r);return Te(i.toRawBytes(n))}static recoverPublicKey(e,n){re(rc(e)===32,"invalid digest length","digest",e);const r=Kt.from(n);let i=Go.Signature.fromCompact(er(Wt([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const o=i.recoverPublicKey(er(e));return re(o!=null,"invalid signature for digest","signature",n),"0x"+o.toHex(!1)}static addPoints(e,n,r){const i=Go.ProjectivePoint.fromHex(po.computePublicKey(e).substring(2)),o=Go.ProjectivePoint.fromHex(po.computePublicKey(n).substring(2));return"0x"+i.add(o).toHex(!!r)}}const DO=BigInt(0),BO=BigInt(36);function wm(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=Xe(Jt(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Bg={};for(let t=0;t<10;t++)Bg[String(t)]=String(t);for(let t=0;t<26;t++)Bg[String.fromCharCode(65+t)]=String(10+t);const bm=15;function LO(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>Bg[r]).join("");for(;e.length>=bm;){let r=e.substring(0,bm);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const FO=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function UO(t){t=t.toLowerCase();let e=DO;for(let n=0;n<t.length;n++)e=e*BO+FO[t[n]];return e}function dt(t){if(re(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=wm(t);return re(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){re(t.substring(2,4)===LO(t),"bad icap checksum","address",t);let e=UO(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return wm("0x"+e)}re(!1,"invalid address","address",t)}function HO(t){const e=dt(t.from);let r=Ne(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,dt(jt(Jt(xs([e,r])),12))}function mA(t){return t&&typeof t.getAddress=="function"}async function a0(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(we(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),re(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),dt(n)}function nr(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?dt(t):(we(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),a0(t,e.resolveName(t)));if(mA(t))return a0(t,t.getAddress());if(t&&typeof t.then=="function")return a0(t,t);re(!1,"unsupported addressable value","target",t)}const ro={};function Re(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new zt(ro,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function st(t,e){return new zt(ro,`bytes${e||""}`,t,{size:e})}const Em=Symbol.for("_ethers_typed");class zt{type;value;#e;_typedSymbol;constructor(e,n,r,i){i==null&&(i=null),pu(ro,e,"Typed"),Fe(this,{_typedSymbol:Em,type:n,value:r}),this.#e=i,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,n){return new zt(ro,e,n)}static uint8(e){return Re(e,8)}static uint16(e){return Re(e,16)}static uint24(e){return Re(e,24)}static uint32(e){return Re(e,32)}static uint40(e){return Re(e,40)}static uint48(e){return Re(e,48)}static uint56(e){return Re(e,56)}static uint64(e){return Re(e,64)}static uint72(e){return Re(e,72)}static uint80(e){return Re(e,80)}static uint88(e){return Re(e,88)}static uint96(e){return Re(e,96)}static uint104(e){return Re(e,104)}static uint112(e){return Re(e,112)}static uint120(e){return Re(e,120)}static uint128(e){return Re(e,128)}static uint136(e){return Re(e,136)}static uint144(e){return Re(e,144)}static uint152(e){return Re(e,152)}static uint160(e){return Re(e,160)}static uint168(e){return Re(e,168)}static uint176(e){return Re(e,176)}static uint184(e){return Re(e,184)}static uint192(e){return Re(e,192)}static uint200(e){return Re(e,200)}static uint208(e){return Re(e,208)}static uint216(e){return Re(e,216)}static uint224(e){return Re(e,224)}static uint232(e){return Re(e,232)}static uint240(e){return Re(e,240)}static uint248(e){return Re(e,248)}static uint256(e){return Re(e,256)}static uint(e){return Re(e,256)}static int8(e){return Re(e,-8)}static int16(e){return Re(e,-16)}static int24(e){return Re(e,-24)}static int32(e){return Re(e,-32)}static int40(e){return Re(e,-40)}static int48(e){return Re(e,-48)}static int56(e){return Re(e,-56)}static int64(e){return Re(e,-64)}static int72(e){return Re(e,-72)}static int80(e){return Re(e,-80)}static int88(e){return Re(e,-88)}static int96(e){return Re(e,-96)}static int104(e){return Re(e,-104)}static int112(e){return Re(e,-112)}static int120(e){return Re(e,-120)}static int128(e){return Re(e,-128)}static int136(e){return Re(e,-136)}static int144(e){return Re(e,-144)}static int152(e){return Re(e,-152)}static int160(e){return Re(e,-160)}static int168(e){return Re(e,-168)}static int176(e){return Re(e,-176)}static int184(e){return Re(e,-184)}static int192(e){return Re(e,-192)}static int200(e){return Re(e,-200)}static int208(e){return Re(e,-208)}static int216(e){return Re(e,-216)}static int224(e){return Re(e,-224)}static int232(e){return Re(e,-232)}static int240(e){return Re(e,-240)}static int248(e){return Re(e,-248)}static int256(e){return Re(e,-256)}static int(e){return Re(e,-256)}static bytes1(e){return st(e,1)}static bytes2(e){return st(e,2)}static bytes3(e){return st(e,3)}static bytes4(e){return st(e,4)}static bytes5(e){return st(e,5)}static bytes6(e){return st(e,6)}static bytes7(e){return st(e,7)}static bytes8(e){return st(e,8)}static bytes9(e){return st(e,9)}static bytes10(e){return st(e,10)}static bytes11(e){return st(e,11)}static bytes12(e){return st(e,12)}static bytes13(e){return st(e,13)}static bytes14(e){return st(e,14)}static bytes15(e){return st(e,15)}static bytes16(e){return st(e,16)}static bytes17(e){return st(e,17)}static bytes18(e){return st(e,18)}static bytes19(e){return st(e,19)}static bytes20(e){return st(e,20)}static bytes21(e){return st(e,21)}static bytes22(e){return st(e,22)}static bytes23(e){return st(e,23)}static bytes24(e){return st(e,24)}static bytes25(e){return st(e,25)}static bytes26(e){return st(e,26)}static bytes27(e){return st(e,27)}static bytes28(e){return st(e,28)}static bytes29(e){return st(e,29)}static bytes30(e){return st(e,30)}static bytes31(e){return st(e,31)}static bytes32(e){return st(e,32)}static address(e){return new zt(ro,"address",e)}static bool(e){return new zt(ro,"bool",!!e)}static bytes(e){return new zt(ro,"bytes",e)}static string(e){return new zt(ro,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new zt(ro,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===Em}static dereference(e,n){if(zt.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}}class $O extends Po{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=zt.dereference(n,"string");try{r=dt(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return dt(Es(e.readValue(),20))}}class VO extends Po{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function wA(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return we(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),we(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else re(!1,"invalid tuple value","tuple",n);re(e.length===r.length,"types/value length mismatch","tuple",n);let i=new Hp,o=new Hp,s=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let f=o.length;c.encode(o,u);let d=i.writeUpdatableValue();s.push(h=>{d(h+f)})}else c.encode(i,u)}),s.forEach(c=>{c(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(o),a}function bA(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(o=>{let s=null;if(o.dynamic){let a=t.readIndex(),c=i.subReader(a);try{s=o.decode(c)}catch(l){if(On(l,"BUFFER_OVERRUN"))throw l;s=l,s.baseType=o.name,s.name=o.localName,s.type=o.type}}else try{s=o.decode(t)}catch(a){if(On(a,"BUFFER_OVERRUN"))throw a;s=a,s.baseType=o.name,s.name=o.localName,s.type=o.type}if(s==null)throw new Error("investigate");n.push(s),r.push(o.localName||null)}),fd.fromItems(n,r)}class jO extends Po{coder;length;constructor(e,n,r){const i=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",i,r,o),Fe(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let r=0;r<this.length;r++)n.push(e);return n}encode(e,n){const r=zt.dereference(n,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),Rx(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let s=0;s<r.length;s++)o.push(this.coder);return wA(e,o,r)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),we(n*tr<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*tr,length:e.dataLength}));let r=[];for(let i=0;i<n;i++)r.push(new VO(this.coder));return bA(e,r)}}class KO extends Po{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=zt.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class EA extends Po{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=er(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class GO extends EA{constructor(e){super("bytes",e)}decode(e){return Te(super.decode(e))}}class zO extends Po{size;constructor(e,n){let r="bytes"+String(e);super(r,r,n,!1),Fe(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let r=er(zt.dereference(n,this.type));return r.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(r)}decode(e){return Te(e.readBytes(this.size))}}const WO=new Uint8Array([]);class qO extends Po{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(WO)}decode(e){return e.readBytes(0),null}}const YO=BigInt(0),XO=BigInt(1),ZO=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class QO extends Po{size;signed;constructor(e,n,r){const i=(n?"int":"uint")+e*8;super(i,i,r,!1),Fe(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let r=Ne(zt.dereference(n,this.type)),i=Ws(ZO,tr*8);if(this.signed){let o=Ws(i,this.size*8-1);(r>o||r<-(o+XO))&&this._throwError("value out-of-bounds",n),r=kx(r,8*tr)}else(r<YO||r>Ws(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(r)}decode(e){let n=Ws(e.readValue(),this.size*8);return this.signed&&(n=ld(n,this.size*8)),n}}class JO extends EA{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,xo(zt.dereference(n,"string")))}decode(e){return ud(super.decode(e))}}class Lu extends Po{coders;constructor(e,n){let r=!1;const i=[];e.forEach(s=>{s.dynamic&&(r=!0),i.push(s.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,r),Fe(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const n=this.coders.reduce((r,i)=>{const o=i.localName;return o&&(r[o]||(r[o]=0),r[o]++),r},{});return this.coders.forEach((r,i)=>{let o=r.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,n){const r=zt.dereference(n,"tuple");return wA(e,this.coders,r)}decode(e){return bA(e,this.coders)}}function c0(t,e){return{address:dt(t),storageKeys:e.map((n,r)=>(re(Pt(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function pa(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(re(n.length===2,"invalid slot set",`value[${r}]`,n),c0(n[0],n[1])):(re(n!=null&&typeof n=="object","invalid address-slot set","value",t),c0(n.address,n.storageKeys)));re(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,o)=>(i[o]=!0,i),{});return c0(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function xA(t){return{address:dt(t.address),nonce:Ne(t.nonce!=null?t.nonce:0),chainId:Ne(t.chainId!=null?t.chainId:0),signature:Kt.from(t.signature)}}function e5(t){let e;return typeof t=="string"?e=po.computePublicKey(t,!1):e=t.publicKey,dt(Jt("0x"+e.substring(4)).substring(26))}function t5(t,e){return e5(po.recoverPublicKey(t,e))}const mn=BigInt(0),n5=BigInt(2),r5=BigInt(27),i5=BigInt(28),o5=BigInt(35),s5=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),l0=4096*32;function a5(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Xe(t.blobToKzgCommitment(Te(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Xe(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Xe(t.blobToKZGCommitment(Te(r)));re(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Xe(t.computeBlobProof(Te(r),Te(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Xe(t.computeBlobKZGProof(Te(r),Te(i)));re(!1,"unsupported KZG library","kzg",t)}}}function xm(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Nc(e).substring(4),"0x"+n}function kc(t){return t==="0x"?null:dt(t)}function mh(t,e){try{return pa(t)}catch(n){re(!1,n.message,e,t)}}function c5(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:kc(i[1]),nonce:Ct(i[2],"nonce"),chainId:Ct(i[0],"chainId"),signature:Kt.from({yParity:ga(i[3],"yParity"),r:Io(i[4],32),s:Io(i[5],32)})})}return n}catch(n){re(!1,n.message,e,t)}}function ga(t,e){return t==="0x"?0:We(t,e)}function Ct(t,e){if(t==="0x")return mn;const n=Ne(t,e);return re(n<=s5,"value exceeds uint size",e,n),n}function tt(t,e){const n=Ne(t,"value"),r=un(n);return re(r.length<=32,"value too large",`tx.${e}`,n),r}function wh(t){return pa(t).map(e=>[e.address,e.storageKeys])}function l5(t){return t.map(e=>[tt(e.chainId,"chainId"),e.address,tt(e.nonce,"nonce"),tt(e.signature.yParity,"yParity"),un(e.signature.r),un(e.signature.s)])}function u5(t,e){re(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)re(Pt(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function f5(t){const e=gu(t);re(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:ga(e[0],"nonce"),gasPrice:Ct(e[1],"gasPrice"),gasLimit:Ct(e[2],"gasLimit"),to:kc(e[3]),value:Ct(e[4],"value"),data:Te(e[5]),chainId:mn};if(e.length===6)return n;const r=Ct(e[6],"v"),i=Ct(e[7],"r"),o=Ct(e[8],"s");if(i===mn&&o===mn)n.chainId=r;else{let s=(r-o5)/n5;s<mn&&(s=mn),n.chainId=s,re(s!==mn||r===r5||r===i5,"non-canonical legacy v","v",e[6]),n.signature=Kt.from({r:Io(e[7],32),s:Io(e[8],32),v:r})}return n}function d5(t,e){const n=[tt(t.nonce,"nonce"),tt(t.gasPrice||0,"gasPrice"),tt(t.gasLimit,"gasLimit"),t.to||"0x",tt(t.value,"value"),t.data];let r=mn;if(t.chainId!=mn)r=Ne(t.chainId,"tx.chainId"),re(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const o=t.signature.legacyChainId;o!=null&&(r=o)}if(!e)return r!==mn&&(n.push(un(r)),n.push("0x"),n.push("0x")),xs(n);let i=BigInt(27+e.yParity);return r!==mn?i=Kt.getChainIdV(r,e.v):BigInt(e.v)!==i&&re(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(un(i)),n.push(un(e.r)),n.push(un(e.s)),xs(n)}function bh(t,e){let n;try{if(n=ga(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{re(!1,"invalid yParity","yParity",e[0])}const r=Io(e[1],32),i=Io(e[2],32),o=Kt.from({r,s:i,yParity:n});t.signature=o}function h5(t){const e=gu(Xe(t).slice(1));re(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Te(t));const n={type:2,chainId:Ct(e[0],"chainId"),nonce:ga(e[1],"nonce"),maxPriorityFeePerGas:Ct(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ct(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ct(e[4],"gasLimit"),to:kc(e[5]),value:Ct(e[6],"value"),data:Te(e[7]),accessList:mh(e[8],"accessList")};return e.length===9||bh(n,e.slice(9)),n}function p5(t,e){const n=[tt(t.chainId,"chainId"),tt(t.nonce,"nonce"),tt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(t.maxFeePerGas||0,"maxFeePerGas"),tt(t.gasLimit,"gasLimit"),t.to||"0x",tt(t.value,"value"),t.data,wh(t.accessList||[])];return e&&(n.push(tt(e.yParity,"yParity")),n.push(un(e.r)),n.push(un(e.s))),Wt(["0x02",xs(n)])}function g5(t){const e=gu(Xe(t).slice(1));re(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Te(t));const n={type:1,chainId:Ct(e[0],"chainId"),nonce:ga(e[1],"nonce"),gasPrice:Ct(e[2],"gasPrice"),gasLimit:Ct(e[3],"gasLimit"),to:kc(e[4]),value:Ct(e[5],"value"),data:Te(e[6]),accessList:mh(e[7],"accessList")};return e.length===8||bh(n,e.slice(8)),n}function v5(t,e){const n=[tt(t.chainId,"chainId"),tt(t.nonce,"nonce"),tt(t.gasPrice||0,"gasPrice"),tt(t.gasLimit,"gasLimit"),t.to||"0x",tt(t.value,"value"),t.data,wh(t.accessList||[])];return e&&(n.push(tt(e.yParity,"recoveryParam")),n.push(un(e.r)),n.push(un(e.s))),Wt(["0x01",xs(n)])}function y5(t){let e=gu(Xe(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],s=e[2],a=e[3];re(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),re(Array.isArray(s),"invalid network format: commitments not an array","fields[2]",s),re(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),re(o.length===s.length,"invalid network format: blobs/commitments length mismatch","fields",e),re(o.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:o[c],commitment:s[c],proof:a[c]});e=e[0]}re(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Te(t));const i={type:3,chainId:Ct(e[0],"chainId"),nonce:ga(e[1],"nonce"),maxPriorityFeePerGas:Ct(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ct(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ct(e[4],"gasLimit"),to:kc(e[5]),value:Ct(e[6],"value"),data:Te(e[7]),accessList:mh(e[8],"accessList"),maxFeePerBlobGas:Ct(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),re(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),re(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)re(Pt(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||bh(i,e.slice(11)),i}function m5(t,e,n){const r=[tt(t.chainId,"chainId"),tt(t.nonce,"nonce"),tt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(t.maxFeePerGas||0,"maxFeePerGas"),tt(t.gasLimit,"gasLimit"),t.to||Hl,tt(t.value,"value"),t.data,wh(t.accessList||[]),tt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),u5(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(tt(e.yParity,"yParity")),r.push(un(e.r)),r.push(un(e.s)),n)?Wt(["0x03",xs([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):Wt(["0x03",xs(r)])}function w5(t){const e=gu(Xe(t).slice(1));re(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Te(t));const n={type:4,chainId:Ct(e[0],"chainId"),nonce:ga(e[1],"nonce"),maxPriorityFeePerGas:Ct(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Ct(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Ct(e[4],"gasLimit"),to:kc(e[5]),value:Ct(e[6],"value"),data:Te(e[7]),accessList:mh(e[8],"accessList"),authorizationList:c5(e[9],"authorizationList")};return e.length===10||bh(n,e.slice(10)),n}function b5(t,e){const n=[tt(t.chainId,"chainId"),tt(t.nonce,"nonce"),tt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),tt(t.maxFeePerGas||0,"maxFeePerGas"),tt(t.gasLimit,"gasLimit"),t.to||"0x",tt(t.value,"value"),t.data,wh(t.accessList||[]),l5(t.authorizationList||[])];return e&&(n.push(tt(e.yParity,"yParity")),n.push(un(e.r)),n.push(un(e.s))),Wt(["0x04",xs(n)])}class si{#e;#t;#n;#r;#i;#s;#o;#a;#f;#l;#p;#g;#c;#u;#d;#h;#y;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:re(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?Hl:e}set to(e){this.#t=e==null?null:dt(e)}get nonce(){return this.#r}set nonce(e){this.#r=We(e,"value")}get gasLimit(){return this.#i}set gasLimit(e){this.#i=Ne(e)}get gasPrice(){const e=this.#s;return e==null&&(this.type===0||this.type===1)?mn:e}set gasPrice(e){this.#s=e==null?null:Ne(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#o;return e??(this.type===2||this.type===3?mn:null)}set maxPriorityFeePerGas(e){this.#o=e==null?null:Ne(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?mn:null)}set maxFeePerGas(e){this.#a=e==null?null:Ne(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=Te(e)}get value(){return this.#f}set value(e){this.#f=Ne(e,"value")}get chainId(){return this.#l}set chainId(e){this.#l=Ne(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:Kt.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:pa(e)}get authorizationList(){const e=this.#y||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#y=e==null?null:e.map(n=>xA(n))}get maxFeePerBlobGas(){const e=this.#c;return e==null&&this.type===3?mn:e}set maxFeePerBlobGas(e){this.#c=e==null?null:Ne(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){re(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)re(Pt(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}this.#u=e}get blobs(){return this.#h==null?null:this.#h.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#h=null;return}const n=[],r=[];for(let i=0;i<e.length;i++){const o=e[i];if(Sg(o)){we(this.#d,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let s=Xe(o);if(re(s.length<=l0,"blob is too large",`blobs[${i}]`,o),s.length!==l0){const l=new Uint8Array(l0);l.set(s),s=l}const a=this.#d.blobToKzgCommitment(s),c=Te(this.#d.computeBlobKzgProof(s,a));n.push({data:Te(s),commitment:Te(a),proof:c}),r.push(xm(1,a))}else{const s=Te(o.commitment);n.push({data:Te(o.data),commitment:s,proof:Te(o.proof)}),r.push(xm(1,s))}}this.#h=n,this.#u=r}get kzg(){return this.#d}set kzg(e){e==null?this.#d=null:this.#d=a5(e)}constructor(){this.#e=null,this.#t=null,this.#r=0,this.#i=mn,this.#s=null,this.#o=null,this.#a=null,this.#n="0x",this.#f=mn,this.#l=mn,this.#p=null,this.#g=null,this.#c=null,this.#u=null,this.#d=null,this.#h=null,this.#y=null}get hash(){return this.signature==null?null:Jt(this.#v(!0,!1))}get unsignedHash(){return Jt(this.unsignedSerialized)}get from(){return this.signature==null?null:t5(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:po.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#v(e,n){we(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return d5(this,r);case 1:return v5(this,r);case 2:return p5(this,r);case 3:return m5(this,r,n?this.blobs:null);case 4:return b5(this,r)}we(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#v(!0,!0)}get unsignedSerialized(){return this.#v(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=this.#c!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&we(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),we(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),we(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const o=[];return this.type!=null?o.push(this.type):this.authorizationList&&this.authorizationList.length?o.push(4):n?o.push(2):e?(o.push(1),r||o.push(0)):r?(o.push(1),o.push(2)):(i&&this.to||(o.push(0),o.push(1),o.push(2)),o.push(3)),o.sort(),o}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return si.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new si;if(typeof e=="string"){const r=Xe(e);if(r[0]>=127)return si.from(f5(r));switch(r[0]){case 1:return si.from(g5(r));case 2:return si.from(h5(r));case 3:return si.from(y5(r));case 4:return si.from(w5(r))}we(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new si;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Kt.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(re(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),re(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(re(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),re(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}}function ca(t){return Jt(xo(t))}var E5="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const Am=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),_m=4;function x5(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,o=[0,1];for(let S=1;S<r;S++)o.push(i+=n());let s=n(),a=e;e+=s;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const f=31,d=2**f,h=d>>>1,p=h>>1,g=d-1;let y=0;for(let S=0;S<f;S++)y=y<<1|u();let v=[],m=0,w=d;for(;;){let S=Math.floor(((y-m+1)*i-1)/w),O=0,F=r;for(;F-O>1;){let B=O+F>>>1;S<o[B]?F=B:O=B}if(O==0)break;v.push(O);let $=m+Math.floor(w*o[O]/i),U=m+Math.floor(w*o[O+1]/i)-1;for(;(($^U)&h)==0;)y=y<<1&g|u(),$=$<<1&g,U=U<<1&g|1;for(;$&~U&p;)y=y&h|y<<1&g>>>1|u(),$=$<<1^h,U=(U^h)<<1|h|1;m=$,w=1+U-$}let E=r-4;return v.map(S=>{switch(S-E){case 3:return E+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return E+256+(t[a++]<<8|t[a++]);case 1:return E+t[a++];default:return S-1}})}function A5(t){let e=0;return()=>t[e++]}function AA(t){return A5(x5(_5(t)))}function _5(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,o)=>e[i.charCodeAt(0)]=o);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,o=0,s=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],s+=6,s>=8&&(r[o++]=a>>(s-=8));return r}function C5(t){return t&1?~t>>1:t>>1}function S5(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=C5(e());return n}function $l(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let o=0;o<i;o++)n.push(e+o);e+=i+1}return n}function _A(t){return Vl(()=>{let e=$l(t);if(e.length)return e})}function CA(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(I5(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(T5(n,t))}return e.flat()}function Vl(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function SA(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)S5(t,n).forEach((o,s)=>r[s].push(o));return r}function I5(t,e){let n=1+e(),r=e(),i=Vl(e);return SA(i.length,1+t,e).flatMap((s,a)=>{let[c,...l]=s;return Array(i[a]).fill().map((u,f)=>{let d=f*r;return[c+f*n,l.map(h=>h+d)]})})}function T5(t,e){let n=1+e();return SA(n,1+t,e).map(i=>[i[0],i.slice(1)])}function O5(t){let e=[],n=$l(t);return i(r([]),[]),e;function r(o){let s=t(),a=Vl(()=>{let c=$l(t).map(l=>n[l]);if(c.length)return r(c)});return{S:s,B:a,Q:o}}function i({S:o,B:s},a,c){if(!(o&4&&c===a[a.length-1])){o&2&&(c=a[a.length-1]),o&1&&e.push(a);for(let l of s)for(let u of l.Q)i(l,[...a,u],c)}}}function R5(t){return t.toString(16).toUpperCase().padStart(2,"0")}function IA(t){return`{${R5(t)}}`}function P5(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function xc(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function N5(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var k5="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const jl=44032,hd=4352,pd=4449,gd=4519,TA=19,OA=21,Ac=28,vd=OA*Ac,M5=TA*vd,D5=jl+M5,B5=hd+TA,L5=pd+OA,F5=gd+Ac;function nl(t){return t>>24&255}function RA(t){return t&16777215}let zp,Cm,Wp,Sf;function U5(){let t=AA(k5);zp=new Map(_A(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),Cm=new Set($l(t)),Wp=new Map,Sf=new Map;for(let[e,n]of CA(t)){if(!Cm.has(e)&&n.length==2){let[r,i]=n,o=Sf.get(r);o||(o=new Map,Sf.set(r,o)),o.set(i,e)}Wp.set(e,n.reverse())}}function PA(t){return t>=jl&&t<D5}function H5(t,e){if(t>=hd&&t<B5&&e>=pd&&e<L5)return jl+(t-hd)*vd+(e-pd)*Ac;if(PA(t)&&e>gd&&e<F5&&(t-jl)%Ac==0)return t+(e-gd);{let n=Sf.get(t);return n&&(n=n.get(e),n)?n:-1}}function NA(t){zp||U5();let e=[],n=[],r=!1;function i(o){let s=zp.get(o);s&&(r=!0,o|=s),e.push(o)}for(let o of t)for(;;){if(o<128)e.push(o);else if(PA(o)){let s=o-jl,a=s/vd|0,c=s%vd/Ac|0,l=s%Ac;i(hd+a),i(pd+c),l>0&&i(gd+l)}else{let s=Wp.get(o);s?n.push(...s):i(o)}if(!n.length)break;o=n.pop()}if(r&&e.length>1){let o=nl(e[0]);for(let s=1;s<e.length;s++){let a=nl(e[s]);if(a==0||o<=a){o=a;continue}let c=s-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(o=nl(e[--c]),o<=a))break}o=nl(e[s])}}return e}function $5(t){let e=[],n=[],r=-1,i=0;for(let o of t){let s=nl(o),a=RA(o);if(r==-1)s==0?r=a:e.push(a);else if(i>0&&i>=s)s==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=s;else{let c=H5(r,a);c>=0?r=c:i==0&&s==0?(e.push(r),r=a):(n.push(a),i=s)}}return r>=0&&e.push(r,...n),e}function kA(t){return NA(t).map(RA)}function V5(t){return $5(NA(t))}const Sm=45,MA=".",DA=65039,BA=1,yd=t=>Array.from(t);function Kl(t,e){return t.P.has(e)||t.Q.has(e)}class j5 extends Array{get is_emoji(){return!0}}let qp,LA,Ys,Yp,FA,oc,u0,ka,Hs,Im,Xp;function Lg(){if(qp)return;let t=AA(E5);const e=()=>$l(t),n=()=>new Set(e()),r=(u,f)=>f.forEach(d=>u.add(d));qp=new Map(CA(t)),LA=n(),Ys=e(),Yp=new Set(e().map(u=>Ys[u])),Ys=new Set(Ys),FA=n(),n();let i=_A(t),o=t();const s=()=>{let u=new Set;return e().forEach(f=>r(u,i[f])),r(u,e()),u};oc=Vl(u=>{let f=Vl(t).map(d=>d+96);if(f.length){let d=u>=o;f[0]-=32,f=xc(f),d&&(f=`Restricted[${f}]`);let h=s(),p=s(),g=!t();return{N:f,P:h,Q:p,M:g,R:d}}}),u0=n(),ka=new Map;let a=e().concat(yd(u0)).sort((u,f)=>u-f);a.forEach((u,f)=>{let d=t(),h=a[f]=d?a[f-d]:{V:[],M:new Map};h.V.push(u),u0.has(u)||ka.set(u,h)});for(let{V:u,M:f}of new Set(ka.values())){let d=[];for(let p of u){let g=oc.filter(v=>Kl(v,p)),y=d.find(({G:v})=>g.some(m=>v.has(m)));y||(y={G:new Set,V:[]},d.push(y)),y.V.push(p),r(y.G,g)}let h=d.flatMap(p=>yd(p.G));for(let{G:p,V:g}of d){let y=new Set(h.filter(v=>!p.has(v)));for(let v of g)f.set(v,y)}}Hs=new Set;let c=new Set;const l=u=>Hs.has(u)?c.add(u):Hs.add(u);for(let u of oc){for(let f of u.P)l(f);for(let f of u.Q)l(f)}for(let u of Hs)!ka.has(u)&&!c.has(u)&&ka.set(u,BA);r(Hs,kA(Hs)),Im=O5(t).map(u=>j5.from(u)).sort(N5),Xp=new Map;for(let u of Im){let f=[Xp];for(let d of u){let h=f.map(p=>{let g=p.get(d);return g||(g=new Map,p.set(d,g)),g});d===DA?f.push(...h):f=h}for(let d of f)d.V=u}}function Fg(t){return(UA(t)?"":`${Ug(Eh([t]))} `)+IA(t)}function Ug(t){return`"${t}"`}function K5(t){if(t.length>=4&&t[2]==Sm&&t[3]==Sm)throw new Error(`invalid label extension: "${xc(t.slice(0,4))}"`)}function G5(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function z5(t){let e=t[0],n=Am.get(e);if(n)throw El(`leading ${n}`);let r=t.length,i=-1;for(let o=1;o<r;o++){e=t[o];let s=Am.get(e);if(s){if(i==o)throw El(`${n} + ${s}`);i=o+1,n=s}}if(i==r)throw El(`trailing ${n}`)}function Eh(t,e=1/0,n=IA){let r=[];W5(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,o=t.length;for(let s=0;s<o;s++){let a=t[s];UA(a)&&(r.push(xc(t.slice(i,s))),r.push(n(a)),i=s+1)}return r.push(xc(t.slice(i,o))),r.join("")}function W5(t){return Lg(),Ys.has(t)}function UA(t){return Lg(),FA.has(t)}function q5(t){return Q5(Y5(t,V5,tR))}function Y5(t,e,n){if(!t)return[];Lg();let r=0;return t.split(MA).map(i=>{let o=P5(i),s={input:o,offset:r};r+=o.length+1;try{let a=s.tokens=eR(o,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=s.output=a.flat();if(G5(u),!(s.emoji=c>1||a[0].is_emoji)&&u.every(d=>d<128))K5(u),l="ASCII";else{let d=a.flatMap(h=>h.is_emoji?[]:h);if(!d.length)l="Emoji";else{if(Ys.has(u[0]))throw El("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&Ys.has(y[0]))throw El(`emoji + combining mark: "${xc(a[g-1])} + ${Eh([y[0]])}"`)}z5(u);let h=yd(new Set(d)),[p]=Z5(h);J5(p,d),X5(p,h),l=p.N}}s.type=l}catch(a){s.error=a}return s})}function X5(t,e){let n,r=[];for(let i of e){let o=ka.get(i);if(o===BA)return;if(o){let s=o.M.get(i);if(n=n?n.filter(a=>s.has(a)):yd(s),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(o=>Kl(i,o)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function Z5(t){let e=oc;for(let n of t){let r=e.filter(i=>Kl(i,n));if(!r.length)throw oc.some(i=>Kl(i,n))?$A(e[0],n):HA(n);if(e=r,r.length==1)break}return e}function Q5(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${Ug(Eh(e,63))}: ${i}`)}return xc(r)}).join(MA)}function HA(t){return new Error(`disallowed character: ${Fg(t)}`)}function $A(t,e){let n=Fg(e),r=oc.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function El(t){return new Error(`illegal placement: ${t}`)}function J5(t,e){for(let n of e)if(!Kl(t,n))throw $A(t,n);if(t.M){let n=kA(e);for(let r=1,i=n.length;r<i;r++)if(Yp.has(n[r])){let o=r+1;for(let s;o<i&&Yp.has(s=n[o]);o++)for(let a=r;a<o;a++)if(n[a]==s)throw new Error(`duplicate non-spacing marks: ${Fg(s)}`);if(o-r>_m)throw new Error(`excessive non-spacing marks: ${Ug(Eh(n.slice(r-1,o)))} (${o-r}/${_m})`);r=o}}}function eR(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let o=nR(t);if(o)i.length&&(r.push(e(i)),i=[]),r.push(n(o));else{let s=t.pop();if(Hs.has(s))i.push(s);else{let a=qp.get(s);if(a)i.push(...a);else if(!LA.has(s))throw HA(s)}}}return i.length&&r.push(e(i)),r}function tR(t){return t.filter(e=>e!=DA)}function nR(t,e){let n=Xp,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:o}=n;o&&(r=o,t.length=i)}return r}const VA=new Uint8Array(32);VA.fill(0);function Tm(t){return re(t.length!==0,"invalid ENS name; empty component","comp",t),t}function jA(t){const e=xo(rR(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(Tm(e.slice(r,i))),r=i+1);return re(r<e.length,"invalid ENS name; empty component","name",t),n.push(Tm(e.slice(r))),n}function rR(t){try{if(t.length===0)throw new Error("empty label");return q5(t)}catch(e){re(!1,`invalid ENS name (${e.message})`,"name",t)}}function Zp(t){re(typeof t=="string","invalid ENS name; not a string","name",t),re(t.length,"invalid ENS name (empty label)","name",t);let e=VA;const n=jA(t);for(;n.length;)e=Jt(Wt([e,Jt(n.pop())]));return Te(e)}function iR(t,e){const n=e;return re(n<=255,"DNS encoded label cannot exceed 255","length",n),Te(Wt(jA(t).map(r=>{re(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const KA=new Uint8Array(32);KA.fill(0);const oR=BigInt(-1),GA=BigInt(0),zA=BigInt(1),sR=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function aR(t){const e=Xe(t),n=e.length%32;return n?Wt([e,KA.slice(n)]):Te(e)}const cR=Es(zA,32),lR=Es(GA,32),Om={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},f0=["name","version","chainId","verifyingContract","salt"];function Rm(t){return function(e){return re(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const uR={name:Rm("name"),version:Rm("version"),chainId:function(t){const e=Ne(t,"domain.chainId");return re(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):ci(e)},verifyingContract:function(t){try{return dt(t).toLowerCase()}catch{}re(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Xe(t,"domain.salt");return re(e.length===32,'invalid domain value "salt"',"domain.salt",t),Te(e)}};function d0(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);re(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=Ws(sR,n?r-1:r),o=n?(i+zA)*oR:GA;return function(s){const a=Ne(s,"value");return re(a>=o&&a<=i,`value out-of-bounds for ${t}`,"value",a),Es(n?kx(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return re(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=Xe(r);return re(i.length===n,`invalid length for ${t}`,"value",r),aR(r)}}}switch(t){case"address":return function(e){return Io(dt(e),32)};case"bool":return function(e){return e?cR:lR};case"bytes":return function(e){return Jt(e)};case"string":return function(e){return ca(e)}}return null}function Pm(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function Fu(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}class _r{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const n=new Map,r=new Map,i=new Map,o={};Object.keys(e).forEach(c=>{o[c]=e[c].map(({name:l,type:u})=>{let{base:f,index:d}=Fu(u);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:l,type:f+(d||"")}}),n.set(c,new Set),r.set(c,[]),i.set(c,new Set)}),this.#e=JSON.stringify(o);for(const c in o){const l=new Set;for(const u of o[c]){re(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const f=Fu(u.type).base;re(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",e),!d0(f)&&(re(r.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),r.get(f).push(c),n.get(c).add(f))}}const s=Array.from(r.keys()).filter(c=>r.get(c).length===0);re(s.length!==0,"missing primary type","types",e),re(s.length===1,`ambiguous primary types or unused types: ${s.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Fe(this,{primaryType:s[0]});function a(c,l){re(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const f of l)i.get(f).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of i){const u=Array.from(l);u.sort(),this.#t.set(c,Pm(c,o[c])+u.map(f=>Pm(f,o[f])).join(""))}}getEncoder(e){let n=this.#n.get(e);return n||(n=this.#r(e),this.#n.set(e,n)),n}#r(e){{const i=d0(e);if(i)return i}const n=Fu(e).array;if(n){const i=n.prefix,o=this.getEncoder(i);return s=>{re(n.count===-1||n.count===s.length,`array length mismatch; expected length ${n.count}`,"value",s);let a=s.map(o);return this.#t.has(i)&&(a=a.map(Jt)),Jt(Wt(a))}}const r=this.types[e];if(r){const i=ca(this.#t.get(e));return o=>{const s=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(o[a]);return this.#t.has(c)?Jt(l):l});return s.unshift(i),Wt(s)}}re(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const n=this.#t.get(e);return re(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Jt(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(d0(e))return r(e,n);const i=Fu(e).array;if(i)return re(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(s=>this._visit(i.prefix,s,r));const o=this.types[e];if(o)return o.reduce((s,{name:a,type:c})=>(s[a]=this._visit(c,n[a],r),s),{});re(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new _r(e)}static getPrimaryType(e){return _r.from(e).primaryType}static hashStruct(e,n,r){return _r.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=Om[r];re(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>f0.indexOf(r.name)-f0.indexOf(i.name)),_r.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Wt(["0x1901",_r.hashDomain(e),_r.from(n).hash(r)])}static hash(e,n,r){return Jt(_r.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const o={};e.verifyingContract&&!Pt(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const s=_r.from(n);s.visit(r,(a,c)=>(a==="address"&&!Pt(c,20)&&(o[c]="0x"),c));for(const a in o)o[a]=await i(a);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),r=s.visit(r,(a,c)=>a==="address"&&o[c]?o[c]:c),{domain:e,value:r}}static getPayload(e,n,r){_r.hashDomain(e);const i={},o=[];f0.forEach(c=>{const l=e[c];l!=null&&(i[c]=uR[c](l),o.push({name:c,type:Om[c]}))});const s=_r.from(n);n=s.types;const a=Object.assign({},n);return re(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=o,s.encode(r),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Te(Xe(l));if(c.match(/^u?int/))return Ne(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return re(typeof l=="string","invalid string","value",l),l}re(!1,"unsupported type","type",c)})}}}function rr(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const fR="external public payable override",dR=rr(fR.split(" ")),WA="constant external internal payable private public pure view override",hR=rr(WA.split(" ")),qA="constructor error event fallback function receive struct",YA=rr(qA.split(" ")),XA="calldata memory storage payable indexed",pR=rr(XA.split(" ")),gR="tuple returns",vR=[qA,XA,gR,WA].join(" "),yR=rr(vR.split(" ")),mR={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},wR=new RegExp("^(\\s*)"),bR=new RegExp("^([0-9]+)"),ER=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),ZA=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),QA=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Qr{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Qr(this.#t)}reset(){this.#e=0}#n(e=0,n=0){return new Qr(this.#t.slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;this.#e<e.match-1;){const r=this.peek().linkNext;n.push(this.#n(this.#e+1,r)),this.#e=r}return this.#e=e.match+1,n}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let n=this.#e;n<this.#t.length;n++){const r=this.#t[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function Ts(t){const e=[],n=s=>{const a=o<t.length?JSON.stringify(t[o]):"$EOI";throw new Error(`invalid token ${a} at ${o}: ${s}`)};let r=[],i=[],o=0;for(;o<t.length;){let s=t.substring(o),a=s.match(wR);a&&(o+=a[1].length,s=t.substring(o));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};e.push(c);let l=mR[s[0]]||"";if(l){if(c.type=l,c.text=s[0],o++,l==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=We(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=s.match(ER),a){if(c.text=a[1],o+=c.text.length,yR.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(QA)){c.type="TYPE";continue}c.type="ID";continue}if(a=s.match(bR),a){c.text=a[1],c.type="NUMBER",o+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(s[0])} at position ${o}`)}return new Qr(e.map(s=>Object.freeze(s)))}function Nm(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function xh(t,e){if(e.peekKeyword(YA)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function To(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function JA(t){let e=To(t,hR);return Nm(e,rr("constant payable nonpayable".split(" "))),Nm(e,rr("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Ao(t,e){return t.popParams().map(n=>Ot.from(n,e))}function e_(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ne(t.pop().text);throw new Error("invalid gas")}return null}function la(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const xR=new RegExp(/^(.*)\[([0-9]*)\]$/);function km(t){const e=t.match(QA);if(re(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);re(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);re(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const $t={},wr=Symbol.for("_ethers_internal"),Mm="_ParamTypeInternal",Dm="_ErrorInternal",Bm="_EventInternal",Lm="_ConstructorInternal",Fm="_FallbackInternal",Um="_FunctionInternal",Hm="_StructInternal";class Ot{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,n,r,i,o,s,a,c){if(pu(e,$t,"ParamType"),Object.defineProperty(this,wr,{value:Mm}),s&&(s=Object.freeze(s.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(s==null)throw new Error("")}else if(s!=null)throw new Error("");Fe(this,{name:n,type:r,baseType:i,indexed:o,components:s,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const o=JSON.parse(this.arrayChildren.format("json"));return o.name=r,o.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(o)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(o=>JSON.parse(o.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,o)=>r.components[o].walk(i,n))}return n(this.type,e)}#e(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{s.#e(e,c,r,u=>{a[l]=u})}),i(a);return}if(this.isTuple()){const s=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=s.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{s[l].#e(e,c,r,u=>{a[l]=u})}),i(a);return}const o=r(this.type,n);o.then?e.push((async function(){i(await o)})()):i(o)}async walkAsync(e,n){const r=[],i=[e];return this.#e(r,e,n,o=>{i[0]=o}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(Ot.isParamType(e))return e;if(typeof e=="string")try{return Ot.from(Ts(e),n)}catch{re(!1,"invalid param type","obj",e)}else if(e instanceof Qr){let a="",c="",l=null;To(e,rr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>Ot.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=km(e.popType("TYPE")),c=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new Ot($t,"",a,c,null,l,f,u),f=g.value,a+=g.text,c="array",l=null}let d=null;if(To(e,pR).has("indexed")){if(!n)throw new Error("");d=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ot($t,p,a,c,d,l,f,u)}const r=e.name;re(!r||typeof r=="string"&&r.match(ZA),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(re(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let o=e.type,s=o.match(xR);if(s){const a=parseInt(s[2]||"-1"),c=Ot.from({type:s[1],components:e.components});return new Ot($t,r||"",o,"array",i,null,a,c)}if(o==="tuple"||o.startsWith("tuple(")||o.startsWith("(")){const a=e.components!=null?e.components.map(l=>Ot.from(l)):null;return new Ot($t,r||"",o,"tuple",i,a,null,null)}return o=km(e.type),new Ot($t,r||"",o,o,i,null,null,null)}static isParamType(e){return e&&e[wr]===Mm}}class ua{type;inputs;constructor(e,n,r){pu(e,$t,"Fragment"),r=Object.freeze(r.slice()),Fe(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{ua.from(JSON.parse(e))}catch{}return ua.from(Ts(e))}if(e instanceof Qr)switch(e.peekKeyword(YA)){case"constructor":return vo.from(e);case"error":return pr.from(e);case"event":return Ti.from(e);case"fallback":case"receive":return oo.from(e);case"function":return Oi.from(e);case"struct":return ia.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return vo.from(e);case"error":return pr.from(e);case"event":return Ti.from(e);case"fallback":case"receive":return oo.from(e);case"function":return Oi.from(e);case"struct":return ia.from(e)}we(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}re(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return vo.isFragment(e)}static isError(e){return pr.isFragment(e)}static isEvent(e){return Ti.isFragment(e)}static isFunction(e){return Oi.isFragment(e)}static isStruct(e){return ia.isFragment(e)}}class Ah extends ua{name;constructor(e,n,r,i){super(e,n,i),re(typeof r=="string"&&r.match(ZA),"invalid identifier","name",r),i=Object.freeze(i.slice()),Fe(this,{name:r})}}function Gl(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class pr extends Ah{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,wr,{value:Dm})}get selector(){return ca(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Gl(e,this.inputs)),n.join(" ")}static from(e){if(pr.isFragment(e))return e;if(typeof e=="string")return pr.from(Ts(e));if(e instanceof Qr){const n=xh("error",e),r=Ao(e);return la(e),new pr($t,n,r)}return new pr($t,e.name,e.inputs?e.inputs.map(Ot.from):[])}static isFragment(e){return e&&e[wr]===Dm}}class Ti extends Ah{anonymous;constructor(e,n,r,i){super(e,"event",n,r),Object.defineProperty(this,wr,{value:Bm}),Fe(this,{anonymous:i})}get topicHash(){return ca(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+Gl(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>Ot.from(i)),new Ti($t,e,n,!1).topicHash}static from(e){if(Ti.isFragment(e))return e;if(typeof e=="string")try{return Ti.from(Ts(e))}catch{re(!1,"invalid event fragment","obj",e)}else if(e instanceof Qr){const n=xh("event",e),r=Ao(e,!0),i=!!To(e,rr(["anonymous"])).has("anonymous");return la(e),new Ti($t,n,r,i)}return new Ti($t,e.name,e.inputs?e.inputs.map(n=>Ot.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[wr]===Bm}}class vo extends ua{payable;gas;constructor(e,n,r,i,o){super(e,n,r),Object.defineProperty(this,wr,{value:Lm}),Fe(this,{payable:i,gas:o})}format(e){if(we(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[`constructor${Gl(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(vo.isFragment(e))return e;if(typeof e=="string")try{return vo.from(Ts(e))}catch{re(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Qr){To(e,rr(["constructor"]));const n=Ao(e),r=!!To(e,dR).has("payable"),i=e_(e);return la(e),new vo($t,"constructor",n,r,i)}return new vo($t,"constructor",e.inputs?e.inputs.map(Ot.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[wr]===Lm}}class oo extends ua{payable;constructor(e,n,r){super(e,"fallback",n),Object.defineProperty(this,wr,{value:Fm}),Fe(this,{payable:r})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:r})}return`${n}()${this.payable?" payable":""}`}static from(e){if(oo.isFragment(e))return e;if(typeof e=="string")try{return oo.from(Ts(e))}catch{re(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Qr){const n=e.toString(),r=e.peekKeyword(rr(["fallback","receive"]));if(re(r,"type must be fallback or receive","obj",n),e.popKeyword(rr(["fallback","receive"]))==="receive"){const a=Ao(e);return re(a.length===0,"receive cannot have arguments","obj.inputs",a),To(e,rr(["payable"])),la(e),new oo($t,[],!0)}let o=Ao(e);o.length?re(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(a=>a.format("minimal")).join(", ")):o=[Ot.from("bytes")];const s=JA(e);if(re(s==="nonpayable"||s==="payable","fallback cannot be constants","obj.stateMutability",s),To(e,rr(["returns"])).has("returns")){const a=Ao(e);re(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return la(e),new oo($t,o,s==="payable")}if(e.type==="receive")return new oo($t,[],!0);if(e.type==="fallback"){const n=[Ot.from("bytes")],r=e.stateMutability==="payable";return new oo($t,n,r)}re(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[wr]===Fm}}class Oi extends Ah{constant;outputs;stateMutability;payable;gas;constructor(e,n,r,i,o,s){super(e,"function",n,i),Object.defineProperty(this,wr,{value:Um}),o=Object.freeze(o.slice()),Fe(this,{constant:r==="view"||r==="pure",gas:s,outputs:o,payable:r==="payable",stateMutability:r})}get selector(){return ca(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+Gl(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Gl(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>Ot.from(i)),new Oi($t,e,"view",n,[],null).selector}static from(e){if(Oi.isFragment(e))return e;if(typeof e=="string")try{return Oi.from(Ts(e))}catch{re(!1,"invalid function fragment","obj",e)}else if(e instanceof Qr){const r=xh("function",e),i=Ao(e),o=JA(e);let s=[];To(e,rr(["returns"])).has("returns")&&(s=Ao(e));const a=e_(e);return la(e),new Oi($t,r,o,i,s,a)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new Oi($t,e.name,n,e.inputs?e.inputs.map(Ot.from):[],e.outputs?e.outputs.map(Ot.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[wr]===Um}}class ia extends Ah{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,wr,{value:Hm})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return ia.from(Ts(e))}catch{re(!1,"invalid struct fragment","obj",e)}else if(e instanceof Qr){const n=xh("struct",e),r=Ao(e);return la(e),new ia($t,n,r)}return new ia($t,e.name,e.inputs?e.inputs.map(Ot.from):[])}static isFragment(e){return e&&e[wr]===Hm}}const wi=new Map;wi.set(0,"GENERIC_PANIC");wi.set(1,"ASSERT_FALSE");wi.set(17,"OVERFLOW");wi.set(18,"DIVIDE_BY_ZERO");wi.set(33,"ENUM_RANGE_ERROR");wi.set(34,"BAD_STORAGE_DATA");wi.set(49,"STACK_UNDERFLOW");wi.set(50,"ARRAY_RANGE_ERROR");wi.set(65,"OUT_OF_MEMORY");wi.set(81,"UNINITIALIZED_FUNCTION_CALL");const AR=new RegExp(/^bytes([0-9]*)$/),_R=new RegExp(/^(u?int)([0-9]*)$/);let h0=null,$m=1024;function CR(t,e,n,r){let i="missing revert data",o=null;const s=null;let a=null;if(n){i="execution reverted";const l=Xe(n);if(n=Te(n),l.length===0)i+=" (no data present; likely require(false) occurred",o="require(false)";else if(l.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Te(l.slice(0,4))==="0x08c379a0")try{o=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[o]},i+=`: ${JSON.stringify(o)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Te(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},o=`Panic due to ${wi.get(u)||"UNKNOWN"}(${u})`,i+=`: ${o}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?dt(e.to):null,data:e.data||"0x"};return e.from&&(c.from=dt(e.from)),Lt(i,"CALL_EXCEPTION",{action:t,data:n,reason:o,transaction:c,invocation:s,revert:a})}class _c{#e(e){if(e.isArray())return new jO(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Lu(e.components.map(r=>this.#e(r)),e.name);switch(e.baseType){case"address":return new $O(e.name);case"bool":return new KO(e.name);case"string":return new JO(e.name);case"bytes":return new GO(e.name);case"":return new qO(e.name)}let n=e.type.match(_R);if(n){let r=parseInt(n[2]||"256");return re(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new QO(r/8,n[1]==="int",e.name)}if(n=e.type.match(AR),n){let r=parseInt(n[1]);return re(r!==0&&r<=32,"invalid bytes length","param",e),new zO(r,e.name)}re(!1,"invalid type","type",e.type)}getDefaultValue(e){const n=e.map(i=>this.#e(Ot.from(i)));return new Lu(n,"_").defaultValue()}encode(e,n){Rx(n.length,e.length,"types/values length mismatch");const r=e.map(s=>this.#e(Ot.from(s))),i=new Lu(r,"_"),o=new Hp;return i.encode(o,n),o.data}decode(e,n,r){const i=e.map(s=>this.#e(Ot.from(s)));return new Lu(i,"_").decode(new Ig(n,r,$m))}static _setDefaultMaxInflation(e){re(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),$m=e}static defaultAbiCoder(){return h0==null&&(h0=new _c),h0}static getBuiltinCallException(e,n,r){return CR(e,n,r,_c.defaultAbiCoder())}}class SR{fragment;name;signature;topic;args;constructor(e,n,r){const i=e.name,o=e.format();Fe(this,{fragment:e,name:i,signature:o,topic:n,args:r})}}class IR{fragment;name;args;signature;selector;value;constructor(e,n,r,i){const o=e.name,s=e.format();Fe(this,{fragment:e,name:o,args:r,signature:s,selector:n,value:i})}}class TR{fragment;name;args;signature;selector;constructor(e,n,r){const i=e.name,o=e.format();Fe(this,{fragment:e,name:i,args:r,signature:o,selector:n})}}class Vm{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Fe(this,{hash:e,_isIndexed:!0})}}const jm={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Km={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&jm[t.toString()]&&(e=jm[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class zs{fragments;deploy;fallback;receive;#e;#t;#n;#r;constructor(e){let n=[];typeof e=="string"?n=JSON.parse(e):n=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const r=[];for(const s of n)try{r.push(ua.from(s))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(s)}:`,a.message)}Fe(this,{fragments:Object.freeze(r)});let i=null,o=!1;this.#r=this.getAbiCoder(),this.fragments.forEach((s,a)=>{let c;switch(s.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Fe(this,{deploy:s});return;case"fallback":s.inputs.length===0?o=!0:(re(!i||s.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,s),i=s,o=i.payable);return;case"function":c=this.#n;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}const l=s.format();c.has(l)||c.set(l,s)}),this.deploy||Fe(this,{deploy:vo.from("constructor()")}),Fe(this,{fallback:i,receive:o})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return _c.defaultAbiCoder()}#i(e,n,r){if(Pt(e)){const o=e.toLowerCase();for(const s of this.#n.values())if(o===s.selector)return s;return null}if(e.indexOf("(")===-1){const o=[];for(const[s,a]of this.#n)s.split("(")[0]===e&&o.push(a);if(n){const s=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;zt.isTyped(s)&&s.type==="overrides"&&(c=!1,a--);for(let l=o.length-1;l>=0;l--){const u=o[l].inputs.length;u!==a&&(!c||u!==a-1)&&o.splice(l,1)}for(let l=o.length-1;l>=0;l--){const u=o[l].inputs;for(let f=0;f<n.length;f++)if(zt.isTyped(n[f])){if(f>=u.length){if(n[f].type==="overrides")continue;o.splice(l,1);break}if(n[f].type!==u[f].baseType){o.splice(l,1);break}}}}if(o.length===1&&n&&n.length!==o[0].inputs.length){const s=n[n.length-1];(s==null||Array.isArray(s)||typeof s!="object")&&o.splice(0,1)}if(o.length===0)return null;if(o.length>1&&r){const s=o.map(a=>JSON.stringify(a.format())).join(", ");re(!1,`ambiguous function description (i.e. matches ${s})`,"key",e)}return o[0]}const i=this.#n.get(Oi.from(e).format());return i||null}getFunctionName(e){const n=this.#i(e,null,!1);return re(n,"no matching function","key",e),n.name}hasFunction(e){return!!this.#i(e,null,!1)}getFunction(e,n){return this.#i(e,n||null,!0)}forEachFunction(e){const n=Array.from(this.#n.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#n.get(i),r)}}#s(e,n,r){if(Pt(e)){const o=e.toLowerCase();for(const s of this.#t.values())if(o===s.topicHash)return s;return null}if(e.indexOf("(")===-1){const o=[];for(const[s,a]of this.#t)s.split("(")[0]===e&&o.push(a);if(n){for(let s=o.length-1;s>=0;s--)o[s].inputs.length<n.length&&o.splice(s,1);for(let s=o.length-1;s>=0;s--){const a=o[s].inputs;for(let c=0;c<n.length;c++)if(zt.isTyped(n[c])&&n[c].type!==a[c].baseType){o.splice(s,1);break}}}if(o.length===0)return null;if(o.length>1&&r){const s=o.map(a=>JSON.stringify(a.format())).join(", ");re(!1,`ambiguous event description (i.e. matches ${s})`,"key",e)}return o[0]}const i=this.#t.get(Ti.from(e).format());return i||null}getEventName(e){const n=this.#s(e,null,!1);return re(n,"no matching event","key",e),n.name}hasEvent(e){return!!this.#s(e,null,!1)}getEvent(e,n){return this.#s(e,n||null,!0)}forEachEvent(e){const n=Array.from(this.#t.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#t.get(i),r)}}getError(e,n){if(Pt(e)){const i=e.toLowerCase();if(Km[i])return pr.from(Km[i].signature);for(const o of this.#e.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,s]of this.#e)o.split("(")[0]===e&&i.push(s);if(i.length===0)return e==="Error"?pr.from("error Error(string)"):e==="Panic"?pr.from("error Panic(uint256)"):null;if(i.length>1){const o=i.map(s=>JSON.stringify(s.format())).join(", ");re(!1,`ambiguous error description (i.e. ${o})`,"name",e)}return i[0]}if(e=pr.from(e).format(),e==="Error(string)")return pr.from("error Error(string)");if(e==="Panic(uint256)")return pr.from("error Panic(uint256)");const r=this.#e.get(e);return r||null}forEachError(e){const n=Array.from(this.#e.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#e.get(i),r)}}_decodeParams(e,n){return this.#r.decode(e,n)}_encodeParams(e,n){return this.#r.encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);re(r,"unknown error","fragment",e),e=r}return re(jt(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,jt(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);re(r,"unknown error","fragment",e),e=r}return Wt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);re(r,"unknown function","fragment",e),e=r}return re(jt(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,jt(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);re(r,"unknown function","fragment",e),e=r}return Wt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const o=this.getFunction(e);re(o,"unknown function","fragment",e),e=o}let r="invalid length for result data";const i=er(n);if(i.length%32===0)try{return this.#r.decode(e.outputs,i)}catch{r="could not decode result data"}we(!1,r,"BAD_DATA",{value:Te(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Xe(e,"data"),i=_c.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=Te(r.slice(0,4)),c=this.getError(a);if(c)try{const l=this.#r.decode(c.inputs,r.slice(4));i.revert={name:c.name,signature:c.format(),args:l},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(n);return s&&(i.invocation={method:s.name,signature:s.signature,args:s.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);re(r,"unknown function","fragment",e),e=r}return Te(this.#r.encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const o=this.getEvent(e);re(o,"unknown event","eventFragment",e),e=o}we(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(o,s)=>o.type==="string"?ca(s):o.type==="bytes"?Jt(Te(s)):(o.type==="bool"&&typeof s=="boolean"?s=s?"0x01":"0x00":o.type.match(/^u?int/)?s=Es(s):o.type.match(/^bytes/)?s=G6(s,32):o.type==="address"&&this.#r.encode(["address"],[s]),Io(Te(s),32));for(n.forEach((o,s)=>{const a=e.inputs[s];if(!a.indexed){re(o==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,o);return}o==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?re(!1,"filtering with tuples or arrays not supported","contract."+a.name,o):Array.isArray(o)?r.push(o.map(c=>i(a,c))):r.push(i(a,o))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const s=this.getEvent(e);re(s,"unknown event","eventFragment",e),e=s}const r=[],i=[],o=[];return e.anonymous||r.push(e.topicHash),re(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((s,a)=>{const c=n[a];if(s.indexed)if(s.type==="string")r.push(ca(c));else if(s.type==="bytes")r.push(Jt(c));else{if(s.baseType==="tuple"||s.baseType==="array")throw new Error("not implemented");r.push(this.#r.encode([s.type],[c]))}else i.push(s),o.push(c)}),{data:this.#r.encode(i,o),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const h=this.getEvent(e);re(h,"unknown event","eventFragment",e),e=h}if(r!=null&&!e.anonymous){const h=e.topicHash;re(Pt(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],o=[],s=[];e.inputs.forEach((h,p)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(Ot.from({type:"bytes32",name:h.name})),s.push(!0)):(i.push(h),s.push(!1)):(o.push(h),s.push(!1))});const a=r!=null?this.#r.decode(i,Wt(r)):null,c=this.#r.decode(o,n,!0),l=[],u=[];let f=0,d=0;return e.inputs.forEach((h,p)=>{let g=null;if(h.indexed)if(a==null)g=new Vm(null);else if(s[p])g=new Vm(a[d++]);else try{g=a[d++]}catch(y){g=y}else try{g=c[f++]}catch(y){g=y}l.push(g),u.push(h.name||null)}),fd.fromItems(l,u)}parseTransaction(e){const n=Xe(e.data,"tx.data"),r=Ne(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Te(n.slice(0,4)));if(!i)return null;const o=this.#r.decode(i.inputs,n.slice(4));return new IR(i,i.selector,o,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new SR(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Te(e),r=this.getError(jt(n,0,4));if(!r)return null;const i=this.#r.decode(r.inputs,jt(n,4));return new TR(r,r.selector,i)}static from(e){return e instanceof zs?e:typeof e=="string"?new zs(JSON.parse(e)):typeof e.formatJson=="function"?new zs(e.formatJson()):typeof e.format=="function"?new zs(e.format("json")):new zs(e)}}const t_=BigInt(0);function sc(t){return t??null}function Yt(t){return t==null?null:t.toString()}class Gm{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,n,r){Fe(this,{gasPrice:sc(e),maxFeePerGas:sc(n),maxPriorityFeePerGas:sc(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Yt(e),maxFeePerGas:Yt(n),maxPriorityFeePerGas:Yt(r)}}}function md(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Te(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=Ne(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=We(t[i],`request.${i}`));return t.accessList&&(e.accessList=pa(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>Sg(i)?Te(i):Object.assign({},i))),e}class OR{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,n){this.#e=e.transactions.map(r=>typeof r!="string"?new mu(r,n):r),Fe(this,{provider:n,hash:sc(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:sc(e.prevRandao),extraData:e.extraData,baseFeePerGas:sc(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(we(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:o,hash:s,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,parentBeaconBlockRoot:d,stateRoot:h,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Yt(e),difficulty:Yt(n),extraData:r,gasLimit:Yt(i),gasUsed:Yt(o),blobGasUsed:Yt(this.blobGasUsed),excessBlobGas:Yt(this.excessBlobGas),hash:s,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,timestamp:g,parentBeaconBlockRoot:d,stateRoot:h,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=this.#e[e];else{const r=e.toLowerCase();for(const i of this.#e)if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;re(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return RR(this)}}class yu{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,n){this.provider=n;const r=Object.freeze(e.topics.slice());Fe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:o,removed:s,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:o,removed:s,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return we(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return we(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return we(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return PR(this)}}class n_{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,n){this.#e=Object.freeze(e.logs.map(i=>new yu(i,n)));let r=t_;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Fe(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:o,blockHash:s,blockNumber:a,logsBloom:c,logs:l,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:r,cumulativeGasUsed:Yt(this.cumulativeGasUsed),from:n,gasPrice:Yt(this.gasPrice),blobGasUsed:Yt(this.blobGasUsed),blobGasPrice:Yt(this.blobGasPrice),gasUsed:Yt(this.gasUsed),hash:i,index:o,logs:l,logsBloom:c,root:f,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return i_(this)}reorderedEvent(e){return we(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),r_(this,e)}}class mu{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,n){this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:o,to:s,from:a,nonce:c,data:l,signature:u,accessList:f,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:n,blobVersionedHashes:d,chainId:Yt(this.chainId),data:l,from:a,gasLimit:Yt(this.gasLimit),gasPrice:Yt(this.gasPrice),hash:i,maxFeePerGas:Yt(this.maxFeePerGas),maxPriorityFeePerGas:Yt(this.maxPriorityFeePerGas),maxFeePerBlobGas:Yt(this.maxFeePerBlobGas),nonce:c,signature:u,to:s,index:r,type:o,value:Yt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Xn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let o=this.#e,s=-1,a=o===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:h}=await Xn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){o=d;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(s===-1&&(s=o-3,s<this.#e&&(s=this.#e));s<=d;){if(a)return null;const g=await this.provider.getBlock(s,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const v=await g.getTransaction(y);if(v.from===this.from&&v.nonce===this.nonce){if(a)return null;const m=await this.provider.getTransactionReceipt(v.hash);if(m==null||d-m.blockNumber+1<r)return;let w="replaced";v.data===this.data&&v.to===this.to&&v.value===this.value?w="repriced":v.data==="0x"&&v.from===v.to&&v.value===t_&&(w="cancelled"),we(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:w==="replaced"||w==="cancelled",reason:w,replacement:v.replaceableTransaction(o),hash:v.hash,receipt:m})}}s++}},l=d=>{if(d==null||d.status!==0)return d;we(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((d,h)=>{const p=[],g=()=>{p.forEach(v=>v())};if(p.push(()=>{a=!0}),i>0){const v=setTimeout(()=>{g(),h(Lt("wait for transaction timeout","TIMEOUT"))},i);p.push(()=>{clearTimeout(v)})}const y=async v=>{if(await v.confirmations()>=r){g();try{d(l(v))}catch(m){h(m)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),o>=0){const v=async()=>{try{await c()}catch(m){if(On(m,"TRANSACTION_REPLACED")){g(),h(m);return}}a||this.provider.once("block",v)};p.push(()=>{this.provider.off("block",v)}),this.provider.once("block",v)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return we(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),i_(this)}reorderedEvent(e){return we(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),we(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),r_(this,e)}replaceableTransaction(e){re(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new mu(this,this.provider);return n.#e=e,n}}function RR(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function r_(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function i_(t){return{orphan:"drop-transaction",tx:t}}function PR(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class Hg extends yu{interface;fragment;args;constructor(e,n,r){super(e,e.provider);const i=n.decodeEventLog(r,e.data,e.topics);Fe(this,{args:i,fragment:r,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class o_ extends yu{error;constructor(e,n){super(e,e.provider),Fe(this,{error:n})}}class NR extends n_{#e;constructor(e,n,r){super(r,n),this.#e=e}get logs(){return super.logs.map(e=>{const n=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(n)try{return new Hg(e,this.#e,n)}catch(r){return new o_(e,r)}return e})}}class $g extends mu{#e;constructor(e,n,r){super(r,n),this.#e=e}async wait(e,n){const r=await super.wait(e,n);return r==null?null:new NR(this.#e,this.provider,r)}}class s_ extends Mx{log;constructor(e,n,r,i){super(e,n,r),Fe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class kR extends s_{constructor(e,n,r,i,o){super(e,n,r,new Hg(o,e.interface,i));const s=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Fe(this,{args:s,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const zm=BigInt(0);function a_(t){return t&&typeof t.call=="function"}function c_(t){return t&&typeof t.estimateGas=="function"}function _h(t){return t&&typeof t.resolveName=="function"}function l_(t){return t&&typeof t.sendTransaction=="function"}function u_(t){if(t!=null){if(_h(t))return t;if(t.provider)return t.provider}}class MR{#e;fragment;constructor(e,n,r){if(Fe(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=fa(e.runner,"resolveName"),o=_h(i)?i:null;this.#e=(async function(){const s=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(d=>nr(d,o))):nr(f,o):f)));return e.interface.encodeFilterTopics(n,s)})()}getTopicFilter(){return this.#e}}function fa(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Xs(t){return t==null?null:t.provider||null}async function f_(t,e){const n=zt.dereference(t,"overrides");re(typeof n=="object","invalid overrides parameter","overrides",t);const r=md(n);return re(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),re(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function DR(t,e,n){const r=fa(t,"resolveName"),i=_h(r)?r:null;return await Promise.all(e.map((o,s)=>o.walkAsync(n[s],(a,c)=>(c=zt.dereference(c,a),a==="address"?nr(c,i):c))))}function BR(t){const e=async function(s){const a=await f_(s,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await nr(a.from,u_(t.runner)));const c=t.interface,l=Ne(a.value||zm,"overrides.value")===zm,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&re(!1,"cannot send data to receive or send value to non-payable fallback","overrides",s),re(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const f=c.receive||c.fallback&&c.fallback.payable;return re(f||l,"cannot send value to non-payable fallback","overrides.value",a.value),re(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(s){const a=fa(t.runner,"call");we(a_(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(s);try{return await a.call(c)}catch(l){throw Cg(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(s){const a=t.runner;we(l_(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(s)),l=Xs(t.runner);return new $g(t.interface,l,c)},i=async function(s){const a=fa(t.runner,"estimateGas");return we(c_(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(s))},o=async s=>await r(s);return Fe(o,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),o}function LR(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return we(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let f={};if(u.inputs.length+1===l.length&&(f=await f_(l.pop()),f.from&&(f.from=await nr(f.from,u_(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await DR(t.runner,u.inputs,l);return Object.assign({},f,await Xn({to:t.getAddress(),data:t.interface.encodeFunctionData(u,d)}))},i=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},o=async function(...l){const u=t.runner;we(l_(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await u.sendTransaction(await r(...l)),d=Xs(t.runner);return new $g(t.interface,d,f)},s=async function(...l){const u=fa(t.runner,"estimateGas");return we(c_(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=fa(t.runner,"call");we(a_(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await r(...l);let d="0x";try{d=await u.call(f)}catch(p){throw Cg(p)&&p.data?t.interface.makeError(p.data,f):p}const h=n(...l);return t.interface.decodeFunctionResult(h,d)},c=async(...l)=>n(...l).constant?await i(...l):await o(...l);return Fe(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:s,populateTransaction:r,send:o,staticCall:i,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return we(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function FR(t,e){const n=function(...i){const o=t.interface.getEvent(e,i);return we(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),o},r=function(...i){return new MR(t,n(...i),i)};return Fe(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return we(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const wd=Symbol.for("_ethersInternal_contract"),d_=new WeakMap;function UR(t,e){d_.set(t[wd],e)}function Cr(t){return d_.get(t[wd])}function HR(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function Vg(t,e){let n,r=null;if(Array.isArray(e)){const o=function(s){if(Pt(s,32))return s;const a=t.interface.getEvent(s);return re(a,"unknown fragment","name",s),a.topicHash};n=e.map(s=>s==null?null:Array.isArray(s)?s.map(o):o(s))}else e==="*"?n=[null]:typeof e=="string"?Pt(e,32)?n=[e]:(r=t.interface.getEvent(e),re(r,"unknown fragment","event",e),n=[r.topicHash]):HR(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):re(!1,"unknown event name","event",e);n=n.map(o=>{if(o==null)return null;if(Array.isArray(o)){const s=Array.from(new Set(o.map(a=>a.toLowerCase())).values());return s.length===1?s[0]:(s.sort(),s)}return o.toLowerCase()});const i=n.map(o=>o==null?"null":Array.isArray(o)?o.join("|"):o).join("&");return{fragment:r,tag:i,topics:n}}async function rl(t,e){const{subs:n}=Cr(t);return n.get((await Vg(t,e)).tag)||null}async function Wm(t,e,n){const r=Xs(t.runner);we(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:o,topics:s}=await Vg(t,n),{addr:a,subs:c}=Cr(t);let l=c.get(o);if(!l){const f={address:a||t,topics:s},d=y=>{let v=i;if(v==null)try{v=t.interface.getEvent(y.topics[0])}catch{}if(v){const m=v,w=i?t.interface.decodeEventLog(i,y.data,y.topics):[];Jp(t,n,w,E=>new kR(t,E,n,m,y))}else Jp(t,n,[],m=>new s_(t,m,n,y))};let h=[];l={tag:o,listeners:[],start:()=>{h.length||h.push(r.on(f,d))},stop:async()=>{if(h.length==0)return;let y=h;h=[],await Promise.all(y),r.off(f,d)}},c.set(o,l)}return l}let Qp=Promise.resolve();async function $R(t,e,n,r){await Qp;const i=await rl(t,e);if(!i)return!1;const o=i.listeners.length;return i.listeners=i.listeners.filter(({listener:s,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:s));try{s.call(t,...c)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Cr(t).subs.delete(i.tag)),o>0}async function Jp(t,e,n,r){try{await Qp}catch{}const i=$R(t,e,n,r);return Qp=i,await i}const Uu=["then"];class xl{target;interface;runner;filters;[wd];fallback;constructor(e,n,r,i){re(typeof e=="string"||mA(e),"invalid value for Contract target","target",e),r==null&&(r=null);const o=zs.from(n);Fe(this,{target:e,runner:r,interface:o}),Object.defineProperty(this,wd,{value:{}});let s,a=null,c=null;if(i){const f=Xs(r);c=new $g(this.interface,f,i)}let l=new Map;if(typeof e=="string")if(Pt(e))a=e,s=Promise.resolve(e);else{const f=fa(r,"resolveName");if(!_h(f))throw Lt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});s=f.resolveName(e).then(d=>{if(d==null)throw Lt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Cr(this).addr=d,d})}else s=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Cr(this).addr=f,f});UR(this,{addrPromise:s,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(f,d,h)=>{if(typeof d=="symbol"||Uu.indexOf(d)>=0)return Reflect.get(f,d,h);try{return this.getEvent(d)}catch(p){if(!On(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(f,d)=>Uu.indexOf(d)>=0?Reflect.has(f,d):Reflect.has(f,d)||this.interface.hasEvent(String(d))});return Fe(this,{filters:u}),Fe(this,{fallback:o.receive||o.fallback?BR(this):null}),new Proxy(this,{get:(f,d,h)=>{if(typeof d=="symbol"||d in f||Uu.indexOf(d)>=0)return Reflect.get(f,d,h);try{return f.getFunction(d)}catch(p){if(!On(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(f,d)=>typeof d=="symbol"||d in f||Uu.indexOf(d)>=0?Reflect.has(f,d):f.interface.hasFunction(d)})}connect(e){return new xl(this.target,this.interface,e)}attach(e){return new xl(e,this.interface,this.runner)}async getAddress(){return await Cr(this).addrPromise}async getDeployedCode(){const e=Xs(this.runner);we(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Xs(this.runner);return we(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,o)=>{const s=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",s)}catch(a){o(a)}};s()})}deploymentTransaction(){return Cr(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),LR(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),FR(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:o}=Cr(this),s=i||await o,{fragment:a,topics:c}=await Vg(this,e),l={address:s,topics:c,fromBlock:n,toBlock:r},u=Xs(this.runner);return we(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(f=>{let d=a;if(d==null)try{d=this.interface.getEvent(f.topics[0])}catch{}if(d)try{return new Hg(f,this.interface,d)}catch(h){return new o_(f,h)}return new yu(f,u)})}async on(e,n){const r=await Wm(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await Wm(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await Jp(this,e,n,null)}async listenerCount(e){if(e){const i=await rl(this,e);return i?i.listeners.length:0}const{subs:n}=Cr(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await rl(this,e);return i?i.listeners.map(({listener:o})=>o):[]}const{subs:n}=Cr(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:o})=>o));return r}async off(e,n){const r=await rl(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:o})=>o).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Cr(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await rl(this,e);if(!n)return this;n.stop(),Cr(this).subs.delete(n.tag)}else{const{subs:n}=Cr(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends xl{constructor(i,o=null){super(i,e,o)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}}function VR(){return xl}class fi extends VR(){}function p0(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):re(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class jR{name;constructor(e){Fe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const h_=new RegExp("^(ipfs)://(.*)$","i"),qm=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),h_,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class ac{provider;address;name;#e;#t;constructor(e,n,r){Fe(this,{provider:e,address:n,name:r}),this.#e=null,this.#t=new fi(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(On(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,n){n=(n||[]).slice();const r=this.#t.interface;n.unshift(Zp(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),we(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[iR(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const o=await this.#t[e](...n);return i?r.decodeFunctionResult(i,o)[0]:o}catch(o){if(!On(o,"CALL_EXCEPTION"))throw o}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const o=await this.#n("addr(bytes32)");return o==null||o===Hl?null:o}catch(o){if(On(o,"CALL_EXCEPTION"))return null;throw o}if(e>=0&&e<2147483648){let o=e+2147483648;const s=await this.#n("addr(bytes32,uint)",[o]);if(Pt(s,20))return dt(s)}let n=null;for(const o of this.provider.plugins)if(o instanceof jR&&o.supportsCoinType(e)){n=o;break}if(n==null)return null;const r=await this.#n("addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;we(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await this.#n("text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",o=parseInt(n[4],16);if(n[5].length===o*2)return`${i}://${W6("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;we(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<qm.length;r++){const i=n.match(qm[r]);if(i==null)continue;const o=i[1].toLowerCase();switch(o){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const s=p0(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:s}),{linkage:e,url:s}}case"erc721":case"erc1155":{const s=o==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:o,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${o}caip`,value:i[2]||""}),{url:null,linkage:e};const l=c[1],u=new fi(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(o==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(o==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let f=await u[s](l);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),o==="erc1155"&&(f=f.replace("{id}",Es(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=p0(f)),e.push({type:"metadata-url",value:f});let d={};const h=await new Ki(f).send();h.assertOk();try{d=h.bodyJson}catch{try{e.push({type:"!metadata",value:h.bodyText})}catch{const v=h.body;return v&&e.push({type:"!metadata",value:Te(v)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let p=d.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(h_)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=p0(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return we(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async#r(e,n){const r=await ac.getEnsAddress(e);try{const o=await new fi(r,["function resolver(bytes32) view returns (address)"],e).resolver(Zp(n),{enableCcipRead:!0});return o===Hl?null:o}catch(i){throw i}return null}static async fromName(e,n){let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await ac.#r(e,r);if(i!=null){const o=new ac(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}}const Ym=BigInt(0);function Je(t,e){return(function(n){return n==null?e:t(n)})}function zl(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function wu(t,e){return(n=>{const r={};for(const i in t){let o=i;if(e&&i in e&&!(o in n)){for(const s of e[i])if(s in n){o=s;break}}try{const s=t[i](n[o]);s!==void 0&&(r[i]=s)}catch(s){const a=s instanceof Error?s.message:"not-an-error";we(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function KR(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}re(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Cc(t){return re(Pt(t,!0),"invalid data","value",t),t}function Tn(t){return re(Pt(t,32),"invalid hash","value",t),t}const GR=wu({address:dt,blockHash:Tn,blockNumber:We,data:Cc,index:We,removed:Je(KR,!1),topics:zl(Tn),transactionHash:Tn,transactionIndex:We},{index:["logIndex"]});function zR(t){return GR(t)}const WR=wu({hash:Je(Tn),parentHash:Tn,parentBeaconBlockRoot:Je(Tn,null),number:We,timestamp:We,nonce:Je(Cc),difficulty:Ne,gasLimit:Ne,gasUsed:Ne,stateRoot:Je(Tn,null),receiptsRoot:Je(Tn,null),blobGasUsed:Je(Ne,null),excessBlobGas:Je(Ne,null),miner:Je(dt),prevRandao:Je(Tn,null),extraData:Cc,baseFeePerGas:Je(Ne)},{prevRandao:["mixHash"]});function qR(t){const e=WR(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:p_(n)),e}const YR=wu({transactionIndex:We,blockNumber:We,transactionHash:Tn,address:dt,topics:zl(Tn),data:Cc,index:We,blockHash:Tn},{index:["logIndex"]});function XR(t){return YR(t)}const ZR=wu({to:Je(dt,null),from:Je(dt,null),contractAddress:Je(dt,null),index:We,root:Je(Te),gasUsed:Ne,blobGasUsed:Je(Ne,null),logsBloom:Je(Cc),blockHash:Tn,hash:Tn,logs:zl(XR),blockNumber:We,cumulativeGasUsed:Ne,effectiveGasPrice:Je(Ne),blobGasPrice:Je(Ne,null),status:Je(We),type:Je(We,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function QR(t){return ZR(t)}function p_(t){t.to&&Ne(t.to)===Ym&&(t.to="0x0000000000000000000000000000000000000000");const e=wu({hash:Tn,index:Je(We,void 0),type:n=>n==="0x"||n==null?0:We(n),accessList:Je(pa,null),blobVersionedHashes:Je(zl(Tn,!0),null),authorizationList:Je(zl(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:dt(n.address),chainId:Ne(n.chainId),nonce:Ne(n.nonce),signature:Kt.from(r)}},!1),null),blockHash:Je(Tn,null),blockNumber:Je(We,null),transactionIndex:Je(We,null),from:dt,gasPrice:Je(Ne),maxPriorityFeePerGas:Je(Ne),maxFeePerGas:Je(Ne),maxFeePerBlobGas:Je(Ne,null),gasLimit:Ne,to:Je(dt,null),value:Ne,nonce:We,data:Cc,creates:Je(dt,null),chainId:Je(Ne,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=HO(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Kt.from(t.signature):e.signature=Kt.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ne(e.blockHash)===Ym&&(e.blockHash=null),e}const JR="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class bu{name;constructor(e){Fe(this,{name:e})}clone(){return new bu(this.name)}}class Ch extends bu{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,n){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const r={effectiveBlock:e};function i(o,s){let a=(n||{})[o];a==null&&(a=s),re(typeof a=="number",`invalud value for ${o}`,"costs",n),r[o]=a}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Fe(this,r)}clone(){return new Ch(this.effectiveBlock,this)}}class Sh extends bu{address;targetNetwork;constructor(e,n){super("org.ethers.plugins.network.Ens"),Fe(this,{address:e||JR,targetNetwork:n??1})}clone(){return new Sh(this.address,this.targetNetwork)}}class eP extends bu{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=n}clone(){return this}}const g0=new Map;class kr{#e;#t;#n;constructor(e,n){this.#e=e,this.#t=Ne(n),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=Ne(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ne(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ne(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ne(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new kr(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new Ch;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=pa(e.accessList);for(const o in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[o].storageKeys.length}return r}static from(e){if(tP(),e==null)return kr.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=g0.get(e);if(n)return n();if(typeof e=="bigint")return new kr("unknown",e);re(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){re(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new kr(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new Sh(e.ensAddress,e.ensNetwork)),n}re(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=g0.get(e);r&&re(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),g0.set(e,n)}}function Xm(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function Zm(t){return new eP(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[o,s]=await Promise.all([r.send(),e()]);i=o;const a=i.bodyJson.standard;return{gasPrice:s.gasPrice,maxFeePerGas:Xm(a.maxFee,9),maxPriorityFeePerGas:Xm(a.maxPriorityFee,9)}}catch(o){we(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:o})}})}let Qm=!1;function tP(){if(Qm)return;Qm=!0;function t(e,n,r){const i=function(){const o=new kr(e,n);return r.ensNetwork!=null&&o.attachPlugin(new Sh(null,r.ensNetwork)),o.attachPlugin(new Ch),(r.plugins||[]).forEach(s=>{o.attachPlugin(s)}),o};kr.register(e,i),kr.register(n,i),r.altNames&&r.altNames.forEach(o=>{kr.register(o,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[Zm("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Zm("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function e1(t){return JSON.parse(JSON.stringify(t))}class nP{#e;#t;#n;#r;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#r=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#i(){try{const e=await this.#e.getBlockNumber();if(this.#r===-2){this.#r=e;return}if(e!==this.#r){for(let n=this.#r+1;n<=e;n++){if(this.#t==null)return;await this.#e.emit("block",n)}this.#r=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#n),this.#i())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}class jg{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=n=>{this._poll(n,this.#e)}}async _poll(e,n){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class rP extends jg{#e;#t;constructor(e,n){super(e),this.#e=n,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,n){const r=await n.getBlock(this.#e);r!=null&&(this.#t===-2?this.#t=r.number:r.number>this.#t&&(n.emit(this.#e,r.number),this.#t=r.number))}}class iP extends jg{#e;constructor(e,n){super(e),this.#e=e1(n)}async _poll(e,n){throw new Error("@TODO")}}class oP extends jg{#e;constructor(e,n){super(e),this.#e=n}async _poll(e,n){const r=await n.getTransactionReceipt(this.#e);r&&n.emit(this.#e,r)}}class Kg{#e;#t;#n;#r;#i;constructor(e,n){this.#e=e,this.#t=e1(n),this.#n=this.#s.bind(this),this.#r=!1,this.#i=-2}async#s(e){if(this.#i===-2)return;const n=e1(this.#t);n.fromBlock=this.#i+1,n.toBlock=e;const r=await this.#e.getLogs(n);if(r.length===0){this.#i<e-60&&(this.#i=e-60);return}for(const i of r)this.#e.emit(this.#t,i),this.#i=i.blockNumber}start(){this.#r||(this.#r=!0,this.#i===-2&&this.#e.getBlockNumber().then(e=>{this.#i=e}),this.#e.on("block",this.#n))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#i=-2)}resume(){this.start()}}const sP=BigInt(2),aP=10;function Hu(t){return t&&typeof t.then=="function"}function If(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((o,s)=>(o[s]=r[s],o),{})}return r})}class g_{name;constructor(e){Fe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function cP(t){return JSON.parse(JSON.stringify(t))}function t1(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function v0(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Pt(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:If("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:If("orphan",n),filter:cP(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?t1(i.map(o=>o.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],o=[],s=a=>{Pt(a)?i.push(a):o.push((async()=>{i.push(await nr(a,e))})())};Array.isArray(n.address)?n.address.forEach(s):s(n.address),o.length&&await Promise.all(o),r.address=t1(i.map(a=>a.toLowerCase()))}return{filter:r,tag:If("event",r),type:"event"}}re(!1,"unknown ProviderEvent","event",t)}function y0(){return new Date().getTime()}const lP={cacheTimeout:250,pollingInterval:4e3};class uP{#e;#t;#n;#r;#i;#s;#o;#a;#f;#l;#p;#g;constructor(e,n){if(this.#g=Object.assign({},lP,n||{}),e==="any")this.#s=!0,this.#i=null;else if(e){const r=kr.from(e);this.#s=!1,this.#i=Promise.resolve(r),setTimeout(()=>{this.emit("network",r,null)},0)}else this.#s=!1,this.#i=null;this.#a=-1,this.#o=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#r=!1,this.#f=1,this.#l=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#c(e){const n=this.#g.cacheTimeout;if(n<0)return await this._perform(e);const r=If(e.method,e);let i=this.#o.get(r);return i||(i=this._perform(e),this.#o.set(r,i),setTimeout(()=>{this.#o.get(r)===i&&this.#o.delete(r)},n)),await i}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),o=n.toLowerCase(),s=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",i).replace("{data}",o),u=new Ki(l);c.indexOf("{data}")===-1&&(u.body={data:o,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let f="unknown error",d;try{d=await u.send()}catch(h){s.push(h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:h}});continue}try{const h=d.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:h}),h.data;h.message&&(f=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:h})}catch{}we(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:f}}),s.push(f)}we(!1,`error encountered during CCIP fetch: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:s}})}_wrapBlock(e,n){return new OR(qR(e),this)}_wrapLog(e,n){return new yu(zR(e),this)}_wrapTransactionReceipt(e,n){return new n_(QR(e),this)}_wrapTransactionResponse(e,n){return new mu(p_(e),this)}_detectNetwork(){we(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){we(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=We(await this.#c({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return nr(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Pt(e))return Pt(e,32)?e:ci(e);if(typeof e=="bigint"&&(e=We(e,"blockTag")),typeof e=="number")return e>=0?ci(e):this.#a>=0?ci(this.#a+e):this.getBlockNumber().then(n=>ci(n+e));re(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?t1(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(c,l,u)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const d={};return f&&(d.address=f),n.length&&(d.topics=n),l&&(d.fromBlock=l),u&&(d.toBlock=u),r&&(d.blockHash=r),d};let o=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)o.push(this._getAddress(c));else o.push(this._getAddress(e.address));let s;"fromBlock"in e&&(s=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),o.filter(c=>typeof c!="string").length||s!=null&&typeof s!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(o),s,a]).then(c=>i(c[0],c[1],c[2])):i(o,s,a)}_getTransactionRequest(e){const n=md(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const o=nr(n[i],this);Hu(o)?r.push((async function(){n[i]=await o})()):n[i]=o}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);Hu(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(this.#i==null){const i=(async()=>{try{const o=await this._detectNetwork();return this.emit("network",o,null),o}catch(o){throw this.#i===i&&(this.#i=null),o}})();return this.#i=i,(await i).clone()}const e=this.#i,[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(this.#s?(this.emit("network",r,n),this.#i===e&&(this.#i=Promise.resolve(r))):we(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:o,priorityFee:s}=await Xn({_block:this.#y("latest",!1),gasPrice:(async()=>{try{const u=await this.#c({method:"getGasPrice"});return Ne(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await this.#c({method:"getPriorityFee"});return Ne(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(i,e);return l&&l.baseFeePerGas&&(c=s??BigInt("1000000000"),a=l.baseFeePerGas*sP+c),new Gm(o,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ki(r.url),o=await r.processFunc(n,this,i);return new Gm(o.gasPrice,o.maxFeePerGas,o.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return Hu(n)&&(n=await n),Ne(await this.#c({method:"estimateGas",transaction:n}),"%response")}async#u(e,n,r){we(r<aP,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=md(e);try{return Te(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(o){if(!this.disableCcipRead&&Cg(o)&&o.data&&r>=0&&n==="latest"&&i.to!=null&&jt(o.data,0,4)==="0x556f1830"){const s=o.data,a=await nr(i.to,this);let c;try{c=gP(jt(o.data,4))}catch(f){we(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:s}})}we(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(i,c.calldata,c.urls);we(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:o.data,errorArgs:c.errorArgs}});const u={to:a,data:Wt([c.selector,pP([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const f=await this.#u(u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw o}}async#d(e){const{value:n}=await Xn({network:this.getNetwork(),value:e});return n}async call(e){const{tx:n,blockTag:r}=await Xn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#d(this.#u(n,r,e.enableCcipRead?0:-1))}async#h(e,n,r){let i=this._getAddress(n),o=this._getBlockTag(r);return(typeof i!="string"||typeof o!="string")&&([i,o]=await Promise.all([i,o])),await this.#d(this.#c(Object.assign(e,{address:i,blockTag:o})))}async getBalance(e,n){return Ne(await this.#h({method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return We(await this.#h({method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Te(await this.#h({method:"getCode"},e,n))}async getStorage(e,n,r){const i=Ne(n,"position");return Te(await this.#h({method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await Xn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),o=si.from(e);if(o.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(o,i).replaceableTransaction(n)}async#y(e,n){if(Pt(e,32))return await this.#c({method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await this.#c({method:"getBlock",blockTag:r,includeTransactions:n})}async getBlock(e,n){const{network:r,params:i}=await Xn({network:this.getNetwork(),params:this.#y(e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await Xn({network:this.getNetwork(),params:this.#c({method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Xn({network:this.getNetwork(),params:this.#c({method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await this.#c({method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Xn({network:this.getNetwork(),result:this.#c({method:"getTransactionResult",hash:e})});return n==null?null:Te(n)}async getLogs(e){let n=this._getFilter(e);Hu(n)&&(n=await n);const{network:r,params:i}=await Xn({network:this.getNetwork(),params:this.#c({method:"getLogs",filter:n})});return i.map(o=>this._wrapLog(o,r))}_getProvider(e){we(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await ac.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=dt(e);const n=Zp(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await ac.getEnsAddress(this),o=await new fi(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(o==null||o===Hl)return null;const a=await new fi(o,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(On(r,"BAD_DATA")&&r.value==="0x"||On(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(o,s)=>{let a=null;const c=(async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=i){o(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),s(Lt("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){we(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=this.#l.get(e);n&&(n.timer&&clearTimeout(n.timer),this.#l.delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=this.#f++,i=()=>{this.#l.delete(r),e()};if(this.paused)this.#l.set(r,{timer:null,func:i,time:n});else{const o=setTimeout(i,n);this.#l.set(r,{timer:o,func:i,time:y0()})}return r}_forEachSubscriber(e){for(const n of this.#e.values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new g_(e.type);case"block":{const n=new nP(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new rP(this,e.type);case"event":return new Kg(this,e.filter);case"transaction":return new oP(this,e.hash);case"orphan":return new iP(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of this.#e.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),this.#n!=null&&n.pause(this.#n);break}}async#v(e,n){let r=await v0(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await v0({orphan:"drop-log",log:n[0]},this)),this.#e.get(r.tag)||null}async#m(e){const n=await v0(e,this),r=n.tag;let i=this.#e.get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(r,i)),i}async on(e,n){const r=await this.#m(e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async once(e,n){const r=await this.#m(e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async emit(e,...n){const r=await this.#v(e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:s})=>{const a=new Mx(this,s?null:o,e);try{o.call(this,...n,a)}catch{}return!s}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await this.#v(e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of this.#e.values())n+=r.length;return n}async listeners(e){if(e){const r=await this.#v(e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of this.#e.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await this.#v(e);if(!r)return this;if(n){const i=r.listeners.map(({listener:o})=>o).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await this.#m(e);r&&i.stop(),this.#e.delete(n)}else for(const[n,{started:r,subscriber:i}]of this.#e)r&&i.stop(),this.#e.delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return this.#r}destroy(){this.removeAllListeners();for(const e of this.#l.keys())this._clearTimeout(e);this.#r=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#n!=null){if(this.#n==!!e)return;we(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),this.#n=!!e;for(const n of this.#l.values())n.timer&&clearTimeout(n.timer),n.time=y0()-n.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#l.values()){let n=e.time;n<0&&(n=0),e.time=y0(),setTimeout(e.func,n)}}}}function fP(t,e){try{const n=n1(t,e);if(n)return ud(n)}catch{}return null}function n1(t,e){if(t==="0x")return null;try{const n=We(jt(t,e,e+32)),r=We(jt(t,n,n+32));return jt(t,n+32,n+32+r)}catch{}return null}function Jm(t){const e=un(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function dP(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const hP=new Uint8Array([]);function pP(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(hP),n+=32;for(let r=0;r<t.length;r++){const i=Xe(t[r]);e[r]=Jm(n),e.push(Jm(i.length)),e.push(dP(i)),n+=32+Math.ceil(i.length/32)*32}return Wt(e)}const ew="0x0000000000000000000000000000000000000000000000000000000000000000";function gP(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};we(rc(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=jt(t,0,32);we(jt(n,0,12)===jt(ew,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=jt(n,12);try{const r=[],i=We(jt(t,32,64)),o=We(jt(t,i,i+32)),s=jt(t,i+32);for(let a=0;a<o;a++){const c=fP(s,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{we(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=n1(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{we(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}we(jt(t,100,128)===jt(ew,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=jt(t,96,100);try{const r=n1(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{we(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Ms(t,e){if(t.provider)return t.provider;we(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function tw(t,e){let n=md(e);if(n.to!=null&&(n.to=nr(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),nr(r,t)]).then(([i,o])=>(re(i.toLowerCase()===o.toLowerCase(),"transaction from mismatch","tx.from",o),i))}else n.from=t.getAddress();return await Xn(n)}class vP{provider;constructor(e){Fe(this,{provider:e||null})}async getNonce(e){return Ms(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await tw(this,e)}async populateTransaction(e){const n=Ms(this,"populateTransaction"),r=await tw(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const s=Ne(r.chainId);re(s===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const o=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||o)?re(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&o&&re(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const s=await n.getFeeData();we(s.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=s.gasPrice)}else{const s=await n.getFeeData();if(r.type==null)if(s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas);else s.gasPrice!=null?(we(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=s.gasPrice),r.type=0):we(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas))}return await Xn(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Ms(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Ms(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Ms(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Ms(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Ms(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=si.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){we(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function yP(t){return JSON.parse(JSON.stringify(t))}class v_{#e;#t;#n;#r;#i;#s;constructor(e){this.#e=e,this.#t=null,this.#n=this.#o.bind(this),this.#r=!1,this.#i=null,this.#s=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#o(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let n=null;try{n=await this.#t}catch(o){if(!On(o,"UNSUPPORTED_OPERATION")||o.operation!=="eth_newFilter")throw o}if(n==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const r=await this.#e.getNetwork();if(this.#i||(this.#i=r),this.#i.chainId!==r.chainId)throw new Error("chaid changed");if(this.#s)return;const i=await this.#e.send("eth_getFilterChanges",[n]);await this._emitResults(this.#e,i)}catch(n){console.log("@TODO",n)}this.#e.once("block",this.#n)}#a(){const e=this.#t;e&&(this.#t=null,e.then(n=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[n])}))}start(){this.#r||(this.#r=!0,this.#o(-2))}stop(){this.#r&&(this.#r=!1,this.#s=!0,this.#a(),this.#e.off("block",this.#n))}pause(e){e&&this.#a(),this.#e.off("block",this.#n)}resume(){this.start()}}class mP extends v_{#e;constructor(e,n){super(e),this.#e=yP(n)}_recover(e){return new Kg(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,n){for(const r of n)e.emit(this.#e,e._wrapLog(r,e._network))}}class wP extends v_{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const bP="bigint,boolean,function,number,string,symbol".split(/,/g);function Tf(t){if(t==null||bP.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(Tf);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function EP(t){return new Promise(e=>{setTimeout(e,t)})}function Ca(t){return t&&t.toLowerCase()}function nw(t){return t&&typeof t.pollingInterval=="number"}const y_={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class m0 extends vP{address;constructor(e,n){super(e),n=dt(n),Fe(this,{address:n})}connect(e){we(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=Tf(e),r=[];if(n.from){const o=n.from;r.push((async()=>{const s=await nr(o,this.provider);re(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=s})())}else n.from=this.address;if(n.gasLimit==null&&r.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;r.push((async()=>{n.to=await nr(o,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const s=[1e3,100];let a=0;const c=async()=>{try{const l=await this.provider.getTransaction(r);if(l!=null){i(l.replaceableTransaction(n));return}}catch(l){if(On(l,"CANCELLED")||On(l,"BAD_DATA")||On(l,"NETWORK_ERROR")||On(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=r,o(l);return}if(On(l,"INVALID_ARGUMENT")&&(a++,l.info==null&&(l.info={}),l.info.sendTransactionHash=r,a>10)){o(l);return}this.provider.emit("error",Lt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{c()},s.pop()||4e3)};c()})}async signTransaction(e){const n=Tf(e);if(n.from){const i=await nr(n.from,this.provider);re(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const r=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const n=typeof e=="string"?xo(e):e;return await this.provider.send("personal_sign",[Te(n),this.address.toLowerCase()])}async signTypedData(e,n,r){const i=Tf(r),o=await _r.resolveNames(e,n,i,async s=>{const a=await nr(s);return re(a!=null,"TypedData does not support null address","value",s),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(_r.getPayload(o.domain,n,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?xo(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Te(n)])}}class xP extends uP{#e;#t;#n;#r;#i;#s;#o;#a(){if(this.#r)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#r=setTimeout(()=>{this.#r=null;const n=this.#n;for(this.#n=[];n.length;){const r=[n.shift()];for(;n.length&&r.length!==this.#e.batchMaxCount;)if(r.push(n.shift()),JSON.stringify(r.map(o=>o.payload)).length>this.#e.batchMaxSize){n.unshift(r.pop());break}(async()=>{const i=r.length===1?r[0].payload:r.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:s,reject:a,payload:c}of r){if(this.destroyed){a(Lt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const l=o.filter(u=>u.id===c.id)[0];if(l==null){const u=Lt("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",u),a(u);continue}if("error"in l){a(this.getRpcError(c,l));continue}s(l.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:s}of r)s(o)}})()}},e)}constructor(e,n){super(e,n),this.#t=1,this.#e=Object.assign({},y_,n||{}),this.#n=[],this.#r=null,this.#s=null,this.#o=null;{let i=null;const o=new Promise(s=>{i=s});this.#i={promise:o,resolve:i}}const r=this._getOption("staticNetwork");typeof r=="boolean"?(re(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),r&&e!=null&&(this.#s=kr.from(e))):r&&(re(e==null||r.matches(e),"staticNetwork MUST match network object","options",n),this.#s=r)}_getOption(e){return this.#e[e]}get _network(){return we(this.#s,"network is not available yet","NETWORK_ERROR"),this.#s}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&Ne(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#s)return this.#s}else return e;return this.#o?await this.#o:this.ready?(this.#o=(async()=>{try{const n=kr.from(Ne(await this.send("eth_chainId",[])));return this.#o=null,n}catch(n){throw this.#o=null,n}})(),await this.#o):(this.#o=(async()=>{const n={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let r;try{r=(await this._send(n))[0],this.#o=null}catch(i){throw this.#o=null,this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return kr.from(Ne(r.result));throw this.getRpcError(n,r)})(),await this.#o)}_start(){this.#i==null||this.#i.resolve==null||(this.#i.resolve(),this.#i=null,(async()=>{for(;this.#s==null&&!this.destroyed;)try{this.#s=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Lt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await EP(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#i!=null)return await this.#i.promise}_getSubscriber(e){return e.type==="pending"?new wP(this):e.type==="event"?this._getOption("polling")?new Kg(this,e.filter):new mP(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new g_("orphan"):super._getSubscriber(e)}get ready(){return this.#i==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let i=r;r==="gasLimit"&&(i="gas"),n[i]=ci(Ne(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(n[r]=Te(e[r]))}),e.accessList&&(n.accessList=pa(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(r=>r.toLowerCase())),e.authorizationList&&(n.authorizationList=e.authorizationList.map(r=>{const i=xA(r);return{address:i.address,nonce:ci(i.nonce),chainId:ci(i.chainId),yParity:ci(i.signature.yParity),r:ci(i.signature.r),s:ci(i.signature.s)}})),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ca(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ca(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ca(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ca(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Ca):e.filter.address=Ca(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:r}=e,{error:i}=n;if(r==="eth_estimateGas"&&i.message){const a=i.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return Lt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return Lt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(r==="eth_call"||r==="eth_estimateGas"){const a=r1(i),c=_c.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return c.info={error:i,payload:e},c}const o=JSON.stringify(AP(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Lt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const a=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Lt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Lt("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Lt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:i}});if(o.match(/only replay-protected/i))return Lt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:a,info:{error:i}}})}let s=!!o.match(/the method .* does not exist/i);return s||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(s=!0),s?Lt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):Lt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(Lt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=this.#t++,i=new Promise((o,s)=>{this.#n.push({resolve:o,reject:s,payload:{method:e,params:n,id:r,jsonrpc:"2.0"}})});return this.#a(),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new m0(this,i[e])}const{accounts:r}=await Xn({network:this.getNetwork(),accounts:n});e=dt(e);for(const i of r)if(dt(i)===e)return new m0(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new m0(this,n))}destroy(){this.#r&&(clearTimeout(this.#r),this.#r=null);for(const{payload:e,reject:n}of this.#n)n(Lt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class m_ extends xP{#e;constructor(e,n){super(e,n);let r=this._getOption("pollingInterval");r==null&&(r=y_.pollingInterval),this.#e=r}_getSubscriber(e){const n=super._getSubscriber(e);return nw(n)&&(n.pollingInterval=this.#e),n}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(n=>{nw(n)&&(n.pollingInterval=this.#e)})}}class dV extends m_{#e;constructor(e,n,r){e==null&&(e="http://localhost:8545"),super(n,r),typeof e=="string"?this.#e=new Ki(e):this.#e=e.clone()}_getConnection(){return this.#e.clone()}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){const n=this._getConnection();n.body=JSON.stringify(e),n.setHeader("content-type","application/json");const r=await n.send();r.assertOk();let i=r.bodyJson;return Array.isArray(i)||(i=[i]),i}}function r1(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Pt(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=r1(t[e]);if(n)return n}return null}if(typeof t=="string")try{return r1(JSON.parse(t))}catch{}return null}function i1(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)i1(t[n],e);if(typeof t=="string")try{return i1(JSON.parse(t),e)}catch{}}}function AP(t){const e=[];return i1(t,e),e}class Rr extends m_{#e;#t;constructor(e,n,r){const i=Object.assign({},r??{},{batchMaxCount:1});re(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(n,i),this.#t=null,r&&r.providerInfo&&(this.#t=r.providerInfo),this.#e=async(o,s)=>{const a={method:o,params:s};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const c=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const l=new Error(c.message);throw l.code=c.code,l.data=c.data,l.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}}}get providerInfo(){return this.#t}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){re(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await this.#e(e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(n){const r=n.payload;throw this.getRpcError(r,{id:r.id,error:n})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Rr(e.provider);const n=e.window?e.window:typeof window<"u"?window:null;if(n==null)return null;const r=e.anyProvider;if(r&&n.ethereum)return new Rr(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((o,s)=>{let a=[];const c=f=>{a.push(f.detail),r&&l()},l=()=>{if(clearTimeout(u),a.length)if(e&&e.filter){const f=e.filter(a.map(d=>Object.assign({},d.info)));if(f==null)o(null);else if(f instanceof Rr)o(f);else{let d=null;if(f.uuid&&(d=a.filter(p=>f.uuid===p.info.uuid)[0]),d){const{provider:h,info:p}=d;o(new Rr(h,void 0,{providerInfo:p}))}else s(Lt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:d}=a[0];o(new Rr(f,void 0,{providerInfo:d}))}else o(null);n.removeEventListener("eip6963:announceProvider",c)},u=setTimeout(()=>{l()},i);n.addEventListener("eip6963:announceProvider",c),n.dispatchEvent(new Event("eip6963:requestProvider"))})}}var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vu={exports:{}},rw;function _P(){return rw||(rw=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof $u<"u"&&$u,r=(function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o})();(function(o){(function(s){var a=typeof o<"u"&&o||typeof self<"u"&&self||typeof $u<"u"&&$u||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(x){return x&&DataView.prototype.isPrototypeOf(x)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(x){return x&&u.indexOf(Object.prototype.toString.call(x))>-1};function d(x){if(typeof x!="string"&&(x=String(x)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(x)||x==="")throw new TypeError('Invalid character in header field name: "'+x+'"');return x.toLowerCase()}function h(x){return typeof x!="string"&&(x=String(x)),x}function p(x){var P={next:function(){var G=x.shift();return{done:G===void 0,value:G}}};return c.iterable&&(P[Symbol.iterator]=function(){return P}),P}function g(x){this.map={},x instanceof g?x.forEach(function(P,G){this.append(G,P)},this):Array.isArray(x)?x.forEach(function(P){if(P.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+P.length);this.append(P[0],P[1])},this):x&&Object.getOwnPropertyNames(x).forEach(function(P){this.append(P,x[P])},this)}g.prototype.append=function(x,P){x=d(x),P=h(P);var G=this.map[x];this.map[x]=G?G+", "+P:P},g.prototype.delete=function(x){delete this.map[d(x)]},g.prototype.get=function(x){return x=d(x),this.has(x)?this.map[x]:null},g.prototype.has=function(x){return this.map.hasOwnProperty(d(x))},g.prototype.set=function(x,P){this.map[d(x)]=h(P)},g.prototype.forEach=function(x,P){for(var G in this.map)this.map.hasOwnProperty(G)&&x.call(P,this.map[G],G,this)},g.prototype.keys=function(){var x=[];return this.forEach(function(P,G){x.push(G)}),p(x)},g.prototype.values=function(){var x=[];return this.forEach(function(P){x.push(P)}),p(x)},g.prototype.entries=function(){var x=[];return this.forEach(function(P,G){x.push([G,P])}),p(x)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(x){if(!x._noBody){if(x.bodyUsed)return Promise.reject(new TypeError("Already read"));x.bodyUsed=!0}}function v(x){return new Promise(function(P,G){x.onload=function(){P(x.result)},x.onerror=function(){G(x.error)}})}function m(x){var P=new FileReader,G=v(P);return P.readAsArrayBuffer(x),G}function w(x){var P=new FileReader,G=v(P),b=/charset=([A-Za-z0-9_-]+)/.exec(x.type),C=b?b[1]:"utf-8";return P.readAsText(x,C),G}function E(x){for(var P=new Uint8Array(x),G=new Array(P.length),b=0;b<P.length;b++)G[b]=String.fromCharCode(P[b]);return G.join("")}function S(x){if(x.slice)return x.slice(0);var P=new Uint8Array(x.byteLength);return P.set(new Uint8Array(x)),P.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(x){this.bodyUsed=this.bodyUsed,this._bodyInit=x,x?typeof x=="string"?this._bodyText=x:c.blob&&Blob.prototype.isPrototypeOf(x)?this._bodyBlob=x:c.formData&&FormData.prototype.isPrototypeOf(x)?this._bodyFormData=x:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)?this._bodyText=x.toString():c.arrayBuffer&&c.blob&&l(x)?(this._bodyArrayBuffer=S(x.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(x)||f(x))?this._bodyArrayBuffer=S(x):this._bodyText=x=Object.prototype.toString.call(x):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof x=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var x=y(this);if(x)return x;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var x=y(this);return x||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var x=y(this);if(x)return x;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(x){var P=x.toUpperCase();return F.indexOf(P)>-1?P:x}function U(x,P){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var G=P.body;if(x instanceof U){if(x.bodyUsed)throw new TypeError("Already read");this.url=x.url,this.credentials=x.credentials,P.headers||(this.headers=new g(x.headers)),this.method=x.method,this.mode=x.mode,this.signal=x.signal,!G&&x._bodyInit!=null&&(G=x._bodyInit,x.bodyUsed=!0)}else this.url=String(x);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new g(P.headers)),this.method=$(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal||(function(){if("AbortController"in a){var T=new AbortController;return T.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var b=/([?&])_=[^&]*/;if(b.test(this.url))this.url=this.url.replace(b,"$1_="+new Date().getTime());else{var C=/\?/;this.url+=(C.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}U.prototype.clone=function(){return new U(this,{body:this._bodyInit})};function B(x){var P=new FormData;return x.trim().split("&").forEach(function(G){if(G){var b=G.split("="),C=b.shift().replace(/\+/g," "),T=b.join("=").replace(/\+/g," ");P.append(decodeURIComponent(C),decodeURIComponent(T))}}),P}function Y(x){var P=new g,G=x.replace(/\r?\n[\t ]+/g," ");return G.split("\r").map(function(b){return b.indexOf(`
`)===0?b.substr(1,b.length):b}).forEach(function(b){var C=b.split(":"),T=C.shift().trim();if(T){var k=C.join(":").trim();try{P.append(T,k)}catch(A){console.warn("Response "+A.message)}}}),P}O.call(U.prototype);function j(x,P){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new g(P.headers),this.url=P.url||"",this._initBody(x)}O.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},j.error=function(){var x=new j(null,{status:200,statusText:""});return x.ok=!1,x.status=0,x.type="error",x};var L=[301,302,303,307,308];j.redirect=function(x,P){if(L.indexOf(P)===-1)throw new RangeError("Invalid status code");return new j(null,{status:P,headers:{location:x}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(P,G){this.message=P,this.name=G;var b=Error(P);this.stack=b.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function I(x,P){return new Promise(function(G,b){var C=new U(x,P);if(C.signal&&C.signal.aborted)return b(new s.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function k(){T.abort()}T.onload=function(){var R={statusText:T.statusText,headers:Y(T.getAllResponseHeaders()||"")};C.url.indexOf("file://")===0&&(T.status<200||T.status>599)?R.status=200:R.status=T.status,R.url="responseURL"in T?T.responseURL:R.headers.get("X-Request-URL");var D="response"in T?T.response:T.responseText;setTimeout(function(){G(new j(D,R))},0)},T.onerror=function(){setTimeout(function(){b(new TypeError("Network request failed"))},0)},T.ontimeout=function(){setTimeout(function(){b(new TypeError("Network request timed out"))},0)},T.onabort=function(){setTimeout(function(){b(new s.DOMException("Aborted","AbortError"))},0)};function A(R){try{return R===""&&a.location.href?a.location.href:R}catch{return R}}if(T.open(C.method,A(C.url),!0),C.credentials==="include"?T.withCredentials=!0:C.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&(c.blob?T.responseType="blob":c.arrayBuffer&&(T.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof g||a.Headers&&P.headers instanceof a.Headers)){var _=[];Object.getOwnPropertyNames(P.headers).forEach(function(R){_.push(d(R)),T.setRequestHeader(R,h(P.headers[R]))}),C.headers.forEach(function(R,D){_.indexOf(D)===-1&&T.setRequestHeader(D,R)})}else C.headers.forEach(function(R,D){T.setRequestHeader(D,R)});C.signal&&(C.signal.addEventListener("abort",k),T.onreadystatechange=function(){T.readyState===4&&C.signal.removeEventListener("abort",k)}),T.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return I.polyfill=!0,a.fetch||(a.fetch=I,a.Headers=g,a.Request=U,a.Response=j),s.Headers=g,s.Request=U,s.Response=j,s.fetch=I,s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(Vu,Vu.exports)),Vu.exports}var CP=_P();const w_=Gg(CP);var ju={exports:{}},w0,iw;function SP(){if(iw)return w0;iw=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,o=r*365.25;w0=function(u,f){f=f||{};var d=typeof u;if(d==="string"&&u.length>0)return s(u);if(d==="number"&&isFinite(u))return f.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var d=parseFloat(f[1]),h=(f[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return d*o;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*r;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*e;case"seconds":case"second":case"secs":case"sec":case"s":return d*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=n?Math.round(u/n)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var f=Math.abs(u);return f>=r?l(u,f,r,"day"):f>=n?l(u,f,n,"hour"):f>=e?l(u,f,e,"minute"):f>=t?l(u,f,t,"second"):u+" ms"}function l(u,f,d,h){var p=f>=d*1.5;return Math.round(u/d)+" "+h+(p?"s":"")}return w0}var b0,ow;function IP(){if(ow)return b0;ow=1;function t(e){r.debug=r,r.default=r,r.coerce=l,r.disable=s,r.enable=o,r.enabled=a,r.humanize=SP(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let d=0;for(let h=0;h<f.length;h++)d=(d<<5)-d+f.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=n;function r(f){let d,h=null,p,g;function y(...v){if(!y.enabled)return;const m=y,w=Number(new Date),E=w-(d||w);m.diff=E,m.prev=d,m.curr=w,d=w,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let S=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(F,$)=>{if(F==="%%")return"%";S++;const U=r.formatters[$];if(typeof U=="function"){const B=v[S];F=U.call(m,B),v.splice(S,1),S--}return F}),r.formatArgs.call(m,v),(m.log||r.log).apply(m,v)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,g=r.enabled(f)),g),set:v=>{h=v}}),typeof r.init=="function"&&r.init(y),y}function i(f,d){const h=r(this.namespace+(typeof d>"u"?":":d)+f);return h.log=this.log,h}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d;const h=(typeof f=="string"?f:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(f=h[d].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){const f=[...r.names.map(c),...r.skips.map(c).map(d=>"-"+d)].join(",");return r.enable(""),f}function a(f){if(f[f.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(f))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return b0=t,b0}var sw;function TP(){return sw||(sw=1,(function(t,e){var n={};e.formatArgs=i,e.save=o,e.load=s,e.useColors=r,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let f=0,d=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(f++,h==="%c"&&(d=f))}),l.splice(d,0,u)}e.log=console.debug||console.log||(()=>{});function o(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=n.DEBUG),l}function a(){try{return localStorage}catch{}}t.exports=IP()(e);const{formatters:c}=t.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(ju,ju.exports)),ju.exports}var OP=TP();const ir=Gg(OP);var E0,aw;function RP(){if(aw)return E0;aw=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i=(U,B)=>{for(var Y in B)t(U,Y,{get:B[Y],enumerable:!0})},o=(U,B,Y,j)=>{if(B&&typeof B=="object"||typeof B=="function")for(let L of n(B))!r.call(U,L)&&L!==Y&&t(U,L,{get:()=>B[L],enumerable:!(j=e(B,L))||j.enumerable});return U},s=U=>o(t({},"__esModule",{value:!0}),U),a={};i(a,{createFinalURL:()=>O,createPathBasedClient:()=>g,createQuerySerializer:()=>w,default:()=>f,defaultBodySerializer:()=>S,defaultPathSerializer:()=>E,mergeHeaders:()=>F,randomID:()=>u,removeTrailingSlash:()=>$,serializeArrayParam:()=>m,serializeObjectParam:()=>v,serializePrimitiveParam:()=>y,wrapAsPathBasedClient:()=>p}),E0=s(a);var c=/\{[^{}]+\}/g,l=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function u(){return Math.random().toString(36).slice(2,11)}function f(U){let{baseUrl:B="",Request:Y=globalThis.Request,fetch:j=globalThis.fetch,querySerializer:L,bodySerializer:I,headers:x,requestInitExt:P=void 0,...G}={...U};P=l()?P:void 0,B=$(B);const b=[];async function C(T,k){const{baseUrl:A,fetch:_=j,Request:R=Y,headers:D,params:H={},parseAs:N="json",querySerializer:K,bodySerializer:z=I??S,body:Z,...oe}=k||{};let M=B;A&&(M=$(A)??B);let V=typeof L=="function"?L:w(L);K&&(V=typeof K=="function"?K:w({...typeof L=="object"?L:{},...K}));const X=Z===void 0?void 0:z(Z,F(x,D,H.header)),ie=F(X===void 0||X instanceof FormData?{}:{"Content-Type":"application/json"},x,D,H.header),te={redirect:"follow",...G,...oe,body:X,headers:ie};let ne,de,le=new Y(O(T,{baseUrl:M,params:H,querySerializer:V}),te),J;for(const ue in oe)ue in le||(le[ue]=oe[ue]);if(b.length){ne=u(),de=Object.freeze({baseUrl:M,fetch:_,parseAs:N,querySerializer:V,bodySerializer:z});for(const ue of b)if(ue&&typeof ue=="object"&&typeof ue.onRequest=="function"){const ae=await ue.onRequest({request:le,schemaPath:T,params:H,options:de,id:ne});if(ae)if(ae instanceof Y)le=ae;else if(ae instanceof Response){J=ae;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!J){try{J=await _(le,P)}catch(ue){let ae=ue;if(b.length)for(let ce=b.length-1;ce>=0;ce--){const xe=b[ce];if(xe&&typeof xe=="object"&&typeof xe.onError=="function"){const Ce=await xe.onError({request:le,error:ae,schemaPath:T,params:H,options:de,id:ne});if(Ce){if(Ce instanceof Response){ae=void 0,J=Ce;break}if(Ce instanceof Error){ae=Ce;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(ae)throw ae}if(b.length)for(let ue=b.length-1;ue>=0;ue--){const ae=b[ue];if(ae&&typeof ae=="object"&&typeof ae.onResponse=="function"){const ce=await ae.onResponse({request:le,response:J,schemaPath:T,params:H,options:de,id:ne});if(ce){if(!(ce instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");J=ce}}}}if(J.status===204||le.method==="HEAD"||J.headers.get("Content-Length")==="0")return J.ok?{data:void 0,response:J}:{error:void 0,response:J};if(J.ok)return N==="stream"?{data:J.body,response:J}:{data:await J[N](),response:J};let ee=await J.text();try{ee=JSON.parse(ee)}catch{}return{error:ee,response:J}}return{request(T,k,A){return C(k,{...A,method:T.toUpperCase()})},GET(T,k){return C(T,{...k,method:"GET"})},PUT(T,k){return C(T,{...k,method:"PUT"})},POST(T,k){return C(T,{...k,method:"POST"})},DELETE(T,k){return C(T,{...k,method:"DELETE"})},OPTIONS(T,k){return C(T,{...k,method:"OPTIONS"})},HEAD(T,k){return C(T,{...k,method:"HEAD"})},PATCH(T,k){return C(T,{...k,method:"PATCH"})},TRACE(T,k){return C(T,{...k,method:"TRACE"})},use(...T){for(const k of T)if(k){if(typeof k!="object"||!("onRequest"in k||"onResponse"in k||"onError"in k))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");b.push(k)}},eject(...T){for(const k of T){const A=b.indexOf(k);A!==-1&&b.splice(A,1)}}}}var d=class{constructor(U,B){this.client=U,this.url=B}GET=U=>this.client.GET(this.url,U);PUT=U=>this.client.PUT(this.url,U);POST=U=>this.client.POST(this.url,U);DELETE=U=>this.client.DELETE(this.url,U);OPTIONS=U=>this.client.OPTIONS(this.url,U);HEAD=U=>this.client.HEAD(this.url,U);PATCH=U=>this.client.PATCH(this.url,U);TRACE=U=>this.client.TRACE(this.url,U)},h=class{constructor(){this.client=null}get(U,B){const Y=new d(U,B);return this.client[B]=Y,Y}};function p(U){const B=new h,Y=new Proxy(U,B);function j(){}j.prototype=Y;const L=new j;return B.client=L,L}function g(U){return p(f(U))}function y(U,B,Y){if(B==null)return"";if(typeof B=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${U}=${Y?.allowReserved===!0?B:encodeURIComponent(B)}`}function v(U,B,Y){if(!B||typeof B!="object")return"";const j=[],L={simple:",",label:".",matrix:";"}[Y.style]||"&";if(Y.style!=="deepObject"&&Y.explode===!1){for(const P in B)j.push(P,Y.allowReserved===!0?B[P]:encodeURIComponent(B[P]));const x=j.join(",");switch(Y.style){case"form":return`${U}=${x}`;case"label":return`.${x}`;case"matrix":return`;${U}=${x}`;default:return x}}for(const x in B){const P=Y.style==="deepObject"?`${U}[${x}]`:x;j.push(y(P,B[x],Y))}const I=j.join(L);return Y.style==="label"||Y.style==="matrix"?`${L}${I}`:I}function m(U,B,Y){if(!Array.isArray(B))return"";if(Y.explode===!1){const I={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[Y.style]||",",x=(Y.allowReserved===!0?B:B.map(P=>encodeURIComponent(P))).join(I);switch(Y.style){case"simple":return x;case"label":return`.${x}`;case"matrix":return`;${U}=${x}`;default:return`${U}=${x}`}}const j={simple:",",label:".",matrix:";"}[Y.style]||"&",L=[];for(const I of B)Y.style==="simple"||Y.style==="label"?L.push(Y.allowReserved===!0?I:encodeURIComponent(I)):L.push(y(U,I,Y));return Y.style==="label"||Y.style==="matrix"?`${j}${L.join(j)}`:L.join(j)}function w(U){return function(Y){const j=[];if(Y&&typeof Y=="object")for(const L in Y){const I=Y[L];if(I!=null){if(Array.isArray(I)){if(I.length===0)continue;j.push(m(L,I,{style:"form",explode:!0,...U?.array,allowReserved:U?.allowReserved||!1}));continue}if(typeof I=="object"){j.push(v(L,I,{style:"deepObject",explode:!0,...U?.object,allowReserved:U?.allowReserved||!1}));continue}j.push(y(L,I,U))}}return j.join("&")}}function E(U,B){let Y=U;for(const j of U.match(c)??[]){let L=j.substring(1,j.length-1),I=!1,x="simple";if(L.endsWith("*")&&(I=!0,L=L.substring(0,L.length-1)),L.startsWith(".")?(x="label",L=L.substring(1)):L.startsWith(";")&&(x="matrix",L=L.substring(1)),!B||B[L]===void 0||B[L]===null)continue;const P=B[L];if(Array.isArray(P)){Y=Y.replace(j,m(L,P,{style:x,explode:I}));continue}if(typeof P=="object"){Y=Y.replace(j,v(L,P,{style:x,explode:I}));continue}if(x==="matrix"){Y=Y.replace(j,`;${y(L,P)}`);continue}Y=Y.replace(j,x==="label"?`.${encodeURIComponent(P)}`:encodeURIComponent(P))}return Y}function S(U,B){return U instanceof FormData?U:B&&(B.get instanceof Function?B.get("Content-Type")??B.get("content-type"):B["Content-Type"]??B["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(U).toString():JSON.stringify(U)}function O(U,B){let Y=`${B.baseUrl}${U}`;B.params?.path&&(Y=E(Y,B.params.path));let j=B.querySerializer(B.params.query??{});return j.startsWith("?")&&(j=j.substring(1)),j&&(Y+=`?${j}`),Y}function F(...U){const B=new Headers;for(const Y of U){if(!Y||typeof Y!="object")continue;const j=Y instanceof Headers?Y.entries():Object.entries(Y);for(const[L,I]of j)if(I===null)B.delete(L);else if(Array.isArray(I))for(const x of I)B.append(L,x);else I!==void 0&&B.set(L,I)}return B}function $(U){return U.endsWith("/")?U.substring(0,U.length-1):U}return E0}var x0,cw;function PP(){if(cw)return x0;cw=1;var t={},e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,a=(O,F)=>{for(var $ in F)n(O,$,{get:F[$],enumerable:!0})},c=(O,F,$,U)=>{if(F&&typeof F=="object"||typeof F=="function")for(let B of i(F))!s.call(O,B)&&B!==$&&n(O,B,{get:()=>F[B],enumerable:!(U=r(F,B))||U.enumerable});return O},l=(O,F,$)=>($=O!=null?e(o(O)):{},c(!O||!O.__esModule?n($,"default",{value:O,enumerable:!0}):$,O)),u=O=>c(n({},"__esModule",{value:!0}),O),f={};a(f,{analytics:()=>S}),x0=u(f);var d=l(RP()),h=class{constructor(O){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=O.batchSize,this.baseTimeoutMs=O.baseTimeoutMs,this.currentTimeoutMs=O.baseTimeoutMs,this.sendFn=O.sendFn}enqueue(O){this.batch.push(O),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const O=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(O),this.currentTimeoutMs=this.baseTimeoutMs}catch(F){console.error("Sender: Failed to send batch",F),this.batch=[...O,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},p=h,g=class{constructor(O){this.enabled=!1,this.properties={};const F=(0,d.default)({baseUrl:O}),$=async U=>{const B=await F.POST("/v1/events",{body:U});if(B.response.status!==200)throw new Error(B.error)};this.sender=new p({batchSize:100,baseTimeoutMs:200,sendFn:$})}enable(){this.enabled=!0}setGlobalProperty(O,F){this.properties[O]=F}track(O,F){if(!this.enabled)return;const $={name:O,...this.properties,...F};this.sender.enqueue($)}},y=g,v,m;typeof process<"u"&&t&&(v=(m=t.METAMASK_ANALYTICS_ENDPOINT)!=null?m:t.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var w=v??"https://mm-sdk-analytics.api.cx.metamask.io/",E=new y(w),S=E;return x0}var Xt=PP(),A0={exports:{}};var lw;function NP(){return lw||(lw=1,(function(t,e){(function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(C){return Object.prototype.toString.call(C)==="[object Array]"},o=10,s=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",c=typeof Reflect=="object",l=typeof setImmediate=="function",u=l?setImmediate:setTimeout,f=a?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(b){var C=Object.getOwnPropertyNames(b);return C.push.apply(C,Object.getOwnPropertySymbols(b)),C}:Object.keys;function d(){this._events={},this._conf&&h.call(this,this._conf)}function h(b){b&&(this._conf=b,b.delimiter&&(this.delimiter=b.delimiter),b.maxListeners!==n&&(this._maxListeners=b.maxListeners),b.wildcard&&(this.wildcard=b.wildcard),b.newListener&&(this._newListener=b.newListener),b.removeListener&&(this._removeListener=b.removeListener),b.verboseMemoryLeak&&(this.verboseMemoryLeak=b.verboseMemoryLeak),b.ignoreErrors&&(this.ignoreErrors=b.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(b,C){var T="(node) warning: possible EventEmitter memory leak detected. "+b+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(T+=" Event name: "+C+"."),typeof process<"u"&&process.emitWarning){var k=new Error(T);k.name="MaxListenersExceededWarning",k.emitter=this,k.count=b,process.emitWarning(k)}else console.error(T),console.trace&&console.trace()}var g=function(b,C,T){var k=arguments.length;switch(k){case 0:return[];case 1:return[b];case 2:return[b,C];case 3:return[b,C,T];default:for(var A=new Array(k);k--;)A[k]=arguments[k];return A}};function y(b,C){for(var T={},k,A=b.length,_=0,R=0;R<A;R++)k=b[R],T[k]=R<_?C[R]:n;return T}function v(b,C,T){this._emitter=b,this._target=C,this._listeners={},this._listenersCount=0;var k,A;if((T.on||T.off)&&(k=T.on,A=T.off),C.addEventListener?(k=C.addEventListener,A=C.removeEventListener):C.addListener?(k=C.addListener,A=C.removeListener):C.on&&(k=C.on,A=C.off),!k&&!A)throw Error("target does not implement any known event API");if(typeof k!="function")throw TypeError("on method must be a function");if(typeof A!="function")throw TypeError("off method must be a function");this._on=k,this._off=A;var _=b._observers;_?_.push(this):b._observers=[this]}Object.assign(v.prototype,{subscribe:function(b,C,T){var k=this,A=this._target,_=this._emitter,R=this._listeners,D=function(){var H=g.apply(null,arguments),N={data:H,name:C,original:b};if(T){var K=T.call(A,N);K!==!1&&_.emit.apply(_,[N.name].concat(H));return}_.emit.apply(_,[C].concat(H))};if(R[b])throw Error("Event '"+b+"' is already listening");this._listenersCount++,_._newListener&&_._removeListener&&!k._onNewListener?(this._onNewListener=function(H){H===C&&R[b]===null&&(R[b]=D,k._on.call(A,b,D))},_.on("newListener",this._onNewListener),this._onRemoveListener=function(H){H===C&&!_.hasListeners(H)&&R[b]&&(R[b]=null,k._off.call(A,b,D))},R[b]=null,_.on("removeListener",this._onRemoveListener)):(R[b]=D,k._on.call(A,b,D))},unsubscribe:function(b){var C=this,T=this._listeners,k=this._emitter,A,_,R=this._off,D=this._target,H;if(b&&typeof b!="string")throw TypeError("event must be a string");function N(){C._onNewListener&&(k.off("newListener",C._onNewListener),k.off("removeListener",C._onRemoveListener),C._onNewListener=null,C._onRemoveListener=null);var K=$.call(k,C);k._observers.splice(K,1)}if(b){if(A=T[b],!A)return;R.call(D,b,A),delete T[b],--this._listenersCount||N()}else{for(_=f(T),H=_.length;H-- >0;)b=_[H],R.call(D,b,T[b]);this._listeners={},this._listenersCount=0,N()}}});function m(b,C,T,k){var A=Object.assign({},C);if(!b)return A;if(typeof b!="object")throw TypeError("options must be an object");var _=Object.keys(b),R=_.length,D,H,N;function K(Z){throw Error('Invalid "'+D+'" option value'+(Z?". Reason: "+Z:""))}for(var z=0;z<R;z++){if(D=_[z],!r.call(C,D))throw Error('Unknown "'+D+'" option');H=b[D],H!==n&&(N=T[D],A[D]=N?N(H,K):H)}return A}function w(b,C){return(typeof b!="function"||!b.hasOwnProperty("prototype"))&&C("value must be a constructor"),b}function E(b){var C="value must be type of "+b.join("|"),T=b.length,k=b[0],A=b[1];return T===1?function(_,R){if(typeof _===k)return _;R(C)}:T===2?function(_,R){var D=typeof _;if(D===k||D===A)return _;R(C)}:function(_,R){for(var D=typeof _,H=T;H-- >0;)if(D===b[H])return _;R(C)}}var S=E(["function"]),O=E(["object","function"]);function F(b,C,T){var k,A,_=0,R,D=new b(function(H,N,K){T=m(T,{timeout:0,overload:!1},{timeout:function(M,V){return M*=1,(typeof M!="number"||M<0||!Number.isFinite(M))&&V("timeout must be a positive number"),M}}),k=!T.overload&&typeof b.prototype.cancel=="function"&&typeof K=="function";function z(){A&&(A=null),_&&(clearTimeout(_),_=0)}var Z=function(M){z(),H(M)},oe=function(M){z(),N(M)};k?C(Z,oe,K):(A=[function(M){oe(M||Error("canceled"))}],C(Z,oe,function(M){if(R)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof M!="function")throw TypeError("onCancel callback must be a function");A.push(M)}),R=!0),T.timeout>0&&(_=setTimeout(function(){var M=Error("timeout");M.code="ETIMEDOUT",_=0,D.cancel(M),N(M)},T.timeout))});return k||(D.cancel=function(H){if(A){for(var N=A.length,K=1;K<N;K++)A[K](H);A[0](H),A=null}}),D}function $(b){var C=this._observers;if(!C)return-1;for(var T=C.length,k=0;k<T;k++)if(C[k]._target===b)return k;return-1}function U(b,C,T,k,A){if(!T)return null;if(k===0){var _=typeof C;if(_==="string"){var R,D,H=0,N=0,K=this.delimiter,z=K.length;if((D=C.indexOf(K))!==-1){R=new Array(5);do R[H++]=C.slice(N,D),N=D+z;while((D=C.indexOf(K,N))!==-1);R[H++]=C.slice(N),C=R,A=H}else C=[C],A=1}else _==="object"?A=C.length:(C=[C],A=1)}var Z=null,oe,M,V,X,ie,te=C[k],ne=C[k+1],de,le;if(k===A)T._listeners&&(typeof T._listeners=="function"?(b&&b.push(T._listeners),Z=[T]):(b&&b.push.apply(b,T._listeners),Z=[T]));else if(te==="*"){for(de=f(T),D=de.length;D-- >0;)oe=de[D],oe!=="_listeners"&&(le=U(b,C,T[oe],k+1,A),le&&(Z?Z.push.apply(Z,le):Z=le));return Z}else if(te==="**"){for(ie=k+1===A||k+2===A&&ne==="*",ie&&T._listeners&&(Z=U(b,C,T,A,A)),de=f(T),D=de.length;D-- >0;)oe=de[D],oe!=="_listeners"&&(oe==="*"||oe==="**"?(T[oe]._listeners&&!ie&&(le=U(b,C,T[oe],A,A),le&&(Z?Z.push.apply(Z,le):Z=le)),le=U(b,C,T[oe],k,A)):oe===ne?le=U(b,C,T[oe],k+2,A):le=U(b,C,T[oe],k,A),le&&(Z?Z.push.apply(Z,le):Z=le));return Z}else T[te]&&(Z=U(b,C,T[te],k+1,A));if(M=T["*"],M&&U(b,C,M,k+1,A),V=T["**"],V)if(k<A)for(V._listeners&&U(b,C,V,A,A),de=f(V),D=de.length;D-- >0;)oe=de[D],oe!=="_listeners"&&(oe===ne?U(b,C,V[oe],k+2,A):oe===te?U(b,C,V[oe],k+1,A):(X={},X[oe]=V[oe],U(b,C,{"**":X},k+1,A)));else V._listeners?U(b,C,V,A,A):V["*"]&&V["*"]._listeners&&U(b,C,V["*"],A,A);return Z}function B(b,C,T){var k=0,A=0,_,R=this.delimiter,D=R.length,H;if(typeof b=="string")if((_=b.indexOf(R))!==-1){H=new Array(5);do H[k++]=b.slice(A,_),A=_+D;while((_=b.indexOf(R,A))!==-1);H[k++]=b.slice(A)}else H=[b],k=1;else H=b,k=b.length;if(k>1){for(_=0;_+1<k;_++)if(H[_]==="**"&&H[_+1]==="**")return}var N=this.listenerTree,K;for(_=0;_<k;_++)if(K=H[_],N=N[K]||(N[K]={}),_===k-1)return N._listeners?(typeof N._listeners=="function"&&(N._listeners=[N._listeners]),T?N._listeners.unshift(C):N._listeners.push(C),!N._listeners.warned&&this._maxListeners>0&&N._listeners.length>this._maxListeners&&(N._listeners.warned=!0,p.call(this,N._listeners.length,K))):N._listeners=C,!0;return!0}function Y(b,C,T,k){for(var A=f(b),_=A.length,R,D,H,N=b._listeners,K;_-- >0;)D=A[_],R=b[D],D==="_listeners"?H=T:H=T?T.concat(D):[D],K=k||typeof D=="symbol",N&&C.push(K?H:H.join(this.delimiter)),typeof R=="object"&&Y.call(this,R,C,H,K);return C}function j(b){for(var C=f(b),T=C.length,k,A,_;T-- >0;)A=C[T],k=b[A],k&&(_=!0,A!=="_listeners"&&!j(k)&&delete b[A]);return _}function L(b,C,T){this.emitter=b,this.event=C,this.listener=T}L.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function I(b,C,T){if(T===!0)A=!0;else if(T===!1)k=!0;else{if(!T||typeof T!="object")throw TypeError("options should be an object or true");var k=T.async,A=T.promisify,_=T.nextTick,R=T.objectify}if(k||_||A){var D=C,H=C._origin||C;if(_&&!s)throw Error("process.nextTick is not supported");A===n&&(A=C.constructor.name==="AsyncFunction"),C=function(){var N=arguments,K=this,z=this.event;return A?_?Promise.resolve():new Promise(function(Z){u(Z)}).then(function(){return K.event=z,D.apply(K,N)}):(_?process.nextTick:u)(function(){K.event=z,D.apply(K,N)})},C._async=!0,C._origin=H}return[C,R?new L(this,b,C):this]}function x(b){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,b)}x.EventEmitter2=x,x.prototype.listenTo=function(b,C,T){if(typeof b!="object")throw TypeError("target musts be an object");var k=this;T=m(T,{on:n,off:n,reducers:n},{on:S,off:S,reducers:O});function A(_){if(typeof _!="object")throw TypeError("events must be an object");var R=T.reducers,D=$.call(k,b),H;D===-1?H=new v(k,b,T):H=k._observers[D];for(var N=f(_),K=N.length,z,Z=typeof R=="function",oe=0;oe<K;oe++)z=N[oe],H.subscribe(z,_[z]||z,Z?R:R&&R[z])}return i(C)?A(y(C)):A(typeof C=="string"?y(C.split(/\s+/)):C),this},x.prototype.stopListeningTo=function(b,C){var T=this._observers;if(!T)return!1;var k=T.length,A,_=!1;if(b&&typeof b!="object")throw TypeError("target should be an object");for(;k-- >0;)A=T[k],(!b||A._target===b)&&(A.unsubscribe(C),_=!0);return _},x.prototype.delimiter=".",x.prototype.setMaxListeners=function(b){b!==n&&(this._maxListeners=b,this._conf||(this._conf={}),this._conf.maxListeners=b)},x.prototype.getMaxListeners=function(){return this._maxListeners},x.prototype.event="",x.prototype.once=function(b,C,T){return this._once(b,C,!1,T)},x.prototype.prependOnceListener=function(b,C,T){return this._once(b,C,!0,T)},x.prototype._once=function(b,C,T,k){return this._many(b,1,C,T,k)},x.prototype.many=function(b,C,T,k){return this._many(b,C,T,!1,k)},x.prototype.prependMany=function(b,C,T,k){return this._many(b,C,T,!0,k)},x.prototype._many=function(b,C,T,k,A){var _=this;if(typeof T!="function")throw new Error("many only accepts instances of Function");function R(){return--C===0&&_.off(b,R),T.apply(this,arguments)}return R._origin=T,this._on(b,R,k,A)},x.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var b=arguments[0],C,T=this.wildcard,k,A,_,R,D;if(b==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(T&&(C=b,b!=="newListener"&&b!=="removeListener"&&typeof b=="object")){if(A=b.length,a){for(_=0;_<A;_++)if(typeof b[_]=="symbol"){D=!0;break}}D||(b=b.join(this.delimiter))}var H=arguments.length,N;if(this._all&&this._all.length)for(N=this._all.slice(),_=0,A=N.length;_<A;_++)switch(this.event=b,H){case 1:N[_].call(this,b);break;case 2:N[_].call(this,b,arguments[1]);break;case 3:N[_].call(this,b,arguments[1],arguments[2]);break;default:N[_].apply(this,arguments)}if(T)N=[],U.call(this,N,C,this.listenerTree,0,A);else if(N=this._events[b],typeof N=="function"){switch(this.event=b,H){case 1:N.call(this);break;case 2:N.call(this,arguments[1]);break;case 3:N.call(this,arguments[1],arguments[2]);break;default:for(k=new Array(H-1),R=1;R<H;R++)k[R-1]=arguments[R];N.apply(this,k)}return!0}else N&&(N=N.slice());if(N&&N.length){if(H>3)for(k=new Array(H-1),R=1;R<H;R++)k[R-1]=arguments[R];for(_=0,A=N.length;_<A;_++)switch(this.event=b,H){case 1:N[_].call(this);break;case 2:N[_].call(this,arguments[1]);break;case 3:N[_].call(this,arguments[1],arguments[2]);break;default:N[_].apply(this,k)}return!0}else if(!this.ignoreErrors&&!this._all&&b==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},x.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var b=arguments[0],C=this.wildcard,T,k,A,_,R,D;if(b==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(C&&(T=b,b!=="newListener"&&b!=="removeListener"&&typeof b=="object")){if(_=b.length,a){for(R=0;R<_;R++)if(typeof b[R]=="symbol"){k=!0;break}}k||(b=b.join(this.delimiter))}var H=[],N=arguments.length,K;if(this._all)for(R=0,_=this._all.length;R<_;R++)switch(this.event=b,N){case 1:H.push(this._all[R].call(this,b));break;case 2:H.push(this._all[R].call(this,b,arguments[1]));break;case 3:H.push(this._all[R].call(this,b,arguments[1],arguments[2]));break;default:H.push(this._all[R].apply(this,arguments))}if(C?(K=[],U.call(this,K,T,this.listenerTree,0)):K=this._events[b],typeof K=="function")switch(this.event=b,N){case 1:H.push(K.call(this));break;case 2:H.push(K.call(this,arguments[1]));break;case 3:H.push(K.call(this,arguments[1],arguments[2]));break;default:for(A=new Array(N-1),D=1;D<N;D++)A[D-1]=arguments[D];H.push(K.apply(this,A))}else if(K&&K.length){if(K=K.slice(),N>3)for(A=new Array(N-1),D=1;D<N;D++)A[D-1]=arguments[D];for(R=0,_=K.length;R<_;R++)switch(this.event=b,N){case 1:H.push(K[R].call(this));break;case 2:H.push(K[R].call(this,arguments[1]));break;case 3:H.push(K[R].call(this,arguments[1],arguments[2]));break;default:H.push(K[R].apply(this,A))}}else if(!this.ignoreErrors&&!this._all&&b==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(H)},x.prototype.on=function(b,C,T){return this._on(b,C,!1,T)},x.prototype.prependListener=function(b,C,T){return this._on(b,C,!0,T)},x.prototype.onAny=function(b){return this._onAny(b,!1)},x.prototype.prependAny=function(b){return this._onAny(b,!0)},x.prototype.addListener=x.prototype.on,x.prototype._onAny=function(b,C){if(typeof b!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),C?this._all.unshift(b):this._all.push(b),this},x.prototype._on=function(b,C,T,k){if(typeof b=="function")return this._onAny(b,C),this;if(typeof C!="function")throw new Error("on only accepts instances of Function");this._events||d.call(this);var A=this,_;return k!==n&&(_=I.call(this,b,C,k),C=_[0],A=_[1]),this._newListener&&this.emit("newListener",b,C),this.wildcard?(B.call(this,b,C,T),A):(this._events[b]?(typeof this._events[b]=="function"&&(this._events[b]=[this._events[b]]),T?this._events[b].unshift(C):this._events[b].push(C),!this._events[b].warned&&this._maxListeners>0&&this._events[b].length>this._maxListeners&&(this._events[b].warned=!0,p.call(this,this._events[b].length,b))):this._events[b]=C,A)},x.prototype.off=function(b,C){if(typeof C!="function")throw new Error("removeListener only takes instances of Function");var T,k=[];if(this.wildcard){var A=typeof b=="string"?b.split(this.delimiter):b.slice();if(k=U.call(this,null,A,this.listenerTree,0),!k)return this}else{if(!this._events[b])return this;T=this._events[b],k.push({_listeners:T})}for(var _=0;_<k.length;_++){var R=k[_];if(T=R._listeners,i(T)){for(var D=-1,H=0,N=T.length;H<N;H++)if(T[H]===C||T[H].listener&&T[H].listener===C||T[H]._origin&&T[H]._origin===C){D=H;break}if(D<0)continue;return this.wildcard?R._listeners.splice(D,1):this._events[b].splice(D,1),T.length===0&&(this.wildcard?delete R._listeners:delete this._events[b]),this._removeListener&&this.emit("removeListener",b,C),this}else(T===C||T.listener&&T.listener===C||T._origin&&T._origin===C)&&(this.wildcard?delete R._listeners:delete this._events[b],this._removeListener&&this.emit("removeListener",b,C))}return this.listenerTree&&j(this.listenerTree),this},x.prototype.offAny=function(b){var C=0,T=0,k;if(b&&this._all&&this._all.length>0){for(k=this._all,C=0,T=k.length;C<T;C++)if(b===k[C])return k.splice(C,1),this._removeListener&&this.emit("removeListenerAny",b),this}else{if(k=this._all,this._removeListener)for(C=0,T=k.length;C<T;C++)this.emit("removeListenerAny",k[C]);this._all=[]}return this},x.prototype.removeListener=x.prototype.off,x.prototype.removeAllListeners=function(b){if(b===n)return!this._events||d.call(this),this;if(this.wildcard){var C=U.call(this,null,b,this.listenerTree,0),T,k;if(!C)return this;for(k=0;k<C.length;k++)T=C[k],T._listeners=null;this.listenerTree&&j(this.listenerTree)}else this._events&&(this._events[b]=null);return this},x.prototype.listeners=function(b){var C=this._events,T,k,A,_,R;if(b===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!C)return[];for(T=f(C),_=T.length,A=[];_-- >0;)k=C[T[_]],typeof k=="function"?A.push(k):A.push.apply(A,k);return A}else{if(this.wildcard){if(R=this.listenerTree,!R)return[];var D=[],H=typeof b=="string"?b.split(this.delimiter):b.slice();return U.call(this,D,H,R,0),D}return C?(k=C[b],k?typeof k=="function"?[k]:k:[]):[]}},x.prototype.eventNames=function(b){var C=this._events;return this.wildcard?Y.call(this,this.listenerTree,[],null,b):C?f(C):[]},x.prototype.listenerCount=function(b){return this.listeners(b).length},x.prototype.hasListeners=function(b){if(this.wildcard){var C=[],T=typeof b=="string"?b.split(this.delimiter):b.slice();return U.call(this,C,T,this.listenerTree,0),C.length>0}var k=this._events,A=this._all;return!!(A&&A.length||k&&(b===n?f(k).length:k[b]))},x.prototype.listenersAny=function(){return this._all?this._all:[]},x.prototype.waitFor=function(b,C){var T=this,k=typeof C;return k==="number"?C={timeout:C}:k==="function"&&(C={filter:C}),C=m(C,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:S,Promise:w}),F(C.Promise,function(A,_,R){function D(){var H=C.filter;if(!(H&&!H.apply(T,arguments)))if(T.off(b,D),C.handleError){var N=arguments[0];N?_(N):A(g.apply(null,arguments).slice(1))}else A(g.apply(null,arguments))}R(function(){T.off(b,D)}),T._on(b,D,!1)},{timeout:C.timeout,overload:C.overload})};function P(b,C,T){T=m(T,{Promise,timeout:0,overload:!1},{Promise:w});var k=T.Promise;return F(k,function(A,_,R){var D;if(typeof b.addEventListener=="function"){D=function(){A(g.apply(null,arguments))},R(function(){b.removeEventListener(C,D)}),b.addEventListener(C,D,{once:!0});return}var H=function(){N&&b.removeListener("error",N),A(g.apply(null,arguments))},N;C!=="error"&&(N=function(K){b.removeListener(C,H),_(K)},b.once("error",N)),R(function(){N&&b.removeListener("error",N),b.removeListener(C,H)}),b.once(C,H)},{timeout:T.timeout,overload:T.overload})}var G=x.prototype;Object.defineProperties(x,{defaultMaxListeners:{get:function(){return G._maxListeners},set:function(b){if(typeof b!="number"||b<0||Number.isNaN(b))throw TypeError("n must be a non-negative number");G._maxListeners=b},enumerable:!0},once:{value:P,writable:!0,configurable:!0}}),Object.defineProperties(G,{_maxListeners:{value:o,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=x})()})(A0)),A0.exports}var Ih=NP();const kP=Gg(Ih);var Ku,MP=new Uint8Array(16);function DP(){if(!Ku&&(Ku=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ku))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ku(MP)}const BP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function o1(t){return typeof t=="string"&&BP.test(t)}var An=[];for(var _0=0;_0<256;++_0)An.push((_0+256).toString(16).substr(1));function LP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(An[t[e+0]]+An[t[e+1]]+An[t[e+2]]+An[t[e+3]]+"-"+An[t[e+4]]+An[t[e+5]]+"-"+An[t[e+6]]+An[t[e+7]]+"-"+An[t[e+8]]+An[t[e+9]]+"-"+An[t[e+10]]+An[t[e+11]]+An[t[e+12]]+An[t[e+13]]+An[t[e+14]]+An[t[e+15]]).toLowerCase();if(!o1(n))throw TypeError("Stringified UUID is invalid");return n}function as(t,e,n){t=t||{};var r=t.random||(t.rng||DP)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,LP(r)}const Gi=Object.create(null);Gi.open="0";Gi.close="1";Gi.ping="2";Gi.pong="3";Gi.message="4";Gi.upgrade="5";Gi.noop="6";const Of=Object.create(null);Object.keys(Gi).forEach(t=>{Of[Gi[t]]=t});const s1={type:"error",data:"parser error"},b_=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",E_=typeof ArrayBuffer=="function",x_=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,zg=({type:t,data:e},n,r)=>b_&&e instanceof Blob?n?r(e):uw(e,r):E_&&(e instanceof ArrayBuffer||x_(e))?n?r(e):uw(new Blob([e]),r):r(Gi[t]+(e||"")),uw=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function fw(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let C0;function FP(t,e){if(b_&&t.data instanceof Blob)return t.data.arrayBuffer().then(fw).then(e);if(E_&&(t.data instanceof ArrayBuffer||x_(t.data)))return e(fw(t.data));zg(t,!1,n=>{C0||(C0=new TextEncoder),e(C0.encode(n))})}const dw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",il=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<dw.length;t++)il[dw.charCodeAt(t)]=t;const UP=t=>{let e=t.length*.75,n=t.length,r,i=0,o,s,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)o=il[t.charCodeAt(r)],s=il[t.charCodeAt(r+1)],a=il[t.charCodeAt(r+2)],c=il[t.charCodeAt(r+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},HP=typeof ArrayBuffer=="function",Wg=(t,e)=>{if(typeof t!="string")return{type:"message",data:A_(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:$P(t.substring(1),e)}:Of[n]?t.length>1?{type:Of[n],data:t.substring(1)}:{type:Of[n]}:s1},$P=(t,e)=>{if(HP){const n=UP(t);return A_(n,e)}else return{base64:!0,data:t}},A_=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},__="",VP=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((o,s)=>{zg(o,!1,a=>{r[s]=a,++i===n&&e(r.join(__))})})},jP=(t,e)=>{const n=t.split(__),r=[];for(let i=0;i<n.length;i++){const o=Wg(n[i],e);if(r.push(o),o.type==="error")break}return r};function KP(){return new TransformStream({transform(t,e){FP(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let S0;function Gu(t){return t.reduce((e,n)=>e+n.length,0)}function zu(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function GP(t,e){S0||(S0=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(r===0){if(Gu(n)<1)break;const c=zu(n,1);o=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Gu(n)<2)break;const c=zu(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Gu(n)<8)break;const c=zu(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(s1);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(Gu(n)<i)break;const c=zu(n,i);a.enqueue(Wg(o?c:S0.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(s1);break}}}})}const C_=4;function tn(t){if(t)return zP(t)}function zP(t){for(var e in tn.prototype)t[e]=tn.prototype[e];return t}tn.prototype.on=tn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};tn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};tn.prototype.off=tn.prototype.removeListener=tn.prototype.removeAllListeners=tn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};tn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};tn.prototype.emitReserved=tn.prototype.emit;tn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};tn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Th=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),zr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),WP="arraybuffer";function S_(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const qP=zr.setTimeout,YP=zr.clearTimeout;function Oh(t,e){e.useNativeTimers?(t.setTimeoutFn=qP.bind(zr),t.clearTimeoutFn=YP.bind(zr)):(t.setTimeoutFn=zr.setTimeout.bind(zr),t.clearTimeoutFn=zr.clearTimeout.bind(zr))}const XP=1.33;function ZP(t){return typeof t=="string"?QP(t):Math.ceil((t.byteLength||t.size)*XP)}function QP(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function I_(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function JP(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function eN(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class tN extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class qg extends tn{constructor(e){super(),this.writable=!1,Oh(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new tN(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Wg(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=JP(e);return n.length?"?"+n:""}}class nN extends qg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};jP(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,VP(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=I_()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let T_=!1;try{T_=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const rN=T_;function iN(){}class oN extends nN{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Ui extends tn{constructor(e,n,r){super(),this.createRequest=e,Oh(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=S_(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Ui.requestsCount++,Ui.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=iN,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ui.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ui.requestsCount=0;Ui.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hw);else if(typeof addEventListener=="function"){const t="onpagehide"in zr?"pagehide":"unload";addEventListener(t,hw,!1)}}function hw(){for(let t in Ui.requests)Ui.requests.hasOwnProperty(t)&&Ui.requests[t].abort()}const sN=(function(){const t=O_({xdomain:!1});return t&&t.responseType!==null})();class aN extends oN{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=sN&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ui(O_,this.uri(),e)}}function O_(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||rN))return new XMLHttpRequest}catch{}if(!e)try{return new zr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const R_=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class cN extends qg{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=R_?{}:S_(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;zg(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}i&&Th(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=I_()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const I0=zr.WebSocket||zr.MozWebSocket;class lN extends cN{createSocket(e,n,r){return R_?new I0(e,n,r):n?new I0(e,n):new I0(e)}doWrite(e,n){this.ws.send(n)}}class uN extends qg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=GP(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=KP();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),o())}).catch(a=>{})};o();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Th(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const fN={websocket:lN,webtransport:uN,polling:aN},dN=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function a1(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=dN.exec(t||""),o={},s=14;for(;s--;)o[hN[s]]=i[s]||"";return n!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=pN(o,o.path),o.queryKey=gN(o,o.query),o}function pN(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function gN(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}const c1=typeof addEventListener=="function"&&typeof removeEventListener=="function",Rf=[];c1&&addEventListener("offline",()=>{Rf.forEach(t=>t())},!1);class ps extends tn{constructor(e,n){if(super(),this.binaryType=WP,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=a1(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=a1(n.host).host);Oh(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=eN(this.opts.query)),c1&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Rf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=C_,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ps.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ps.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=ZP(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Th(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ps.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),c1&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Rf.indexOf(this._offlineEventListener);r!==-1&&Rf.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ps.protocol=C_;class vN extends ps{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ps.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ps.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function o(){r||(r=!0,u(),n.close(),n=null)}const s=f=>{const d=new Error("probe error: "+f);d.transport=n.name,o(),this.emitReserved("upgradeError",d)};function a(){s("transport closed")}function c(){s("socket closed")}function l(f){n&&f.name!==n.name&&o()}const u=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",s),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let yN=class extends vN{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>fN[i]).filter(i=>!!i)),super(e,r)}};function mN(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=a1(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const wN=typeof ArrayBuffer=="function",bN=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,P_=Object.prototype.toString,EN=typeof Blob=="function"||typeof Blob<"u"&&P_.call(Blob)==="[object BlobConstructor]",xN=typeof File=="function"||typeof File<"u"&&P_.call(File)==="[object FileConstructor]";function Yg(t){return wN&&(t instanceof ArrayBuffer||bN(t))||EN&&t instanceof Blob||xN&&t instanceof File}function Pf(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Pf(t[n]))return!0;return!1}if(Yg(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Pf(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Pf(t[n]))return!0;return!1}function AN(t){const e=[],n=t.data,r=t;return r.data=l1(n,e),r.attachments=e.length,{packet:r,buffers:e}}function l1(t,e){if(!t)return t;if(Yg(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=l1(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=l1(t[r],e));return n}return t}function _N(t,e){return t.data=u1(t.data,e),delete t.attachments,t}function u1(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=u1(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=u1(t[n],e));return t}const CN=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],SN=5;var et;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(et||(et={}));class IN{constructor(e){this.replacer=e}encode(e){return(e.type===et.EVENT||e.type===et.ACK)&&Pf(e)?this.encodeAsBinary({type:e.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===et.BINARY_EVENT||e.type===et.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=AN(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function pw(t){return Object.prototype.toString.call(t)==="[object Object]"}let TN=class N_ extends tn{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===et.BINARY_EVENT;r||n.type===et.BINARY_ACK?(n.type=r?et.EVENT:et.ACK,this.reconstructor=new ON(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Yg(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(et[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===et.BINARY_EVENT||r.type===et.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(o,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(o,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(N_.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case et.CONNECT:return pw(n);case et.DISCONNECT:return n===void 0;case et.CONNECT_ERROR:return typeof n=="string"||pw(n);case et.EVENT:case et.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&CN.indexOf(n[0])===-1);case et.ACK:case et.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class ON{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=_N(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const RN=Object.freeze(Object.defineProperty({__proto__:null,Decoder:TN,Encoder:IN,get PacketType(){return et},protocol:SN},Symbol.toStringTag,{value:"Module"}));function ai(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const PN=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class k_ extends tn{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ai(e,"open",this.onopen.bind(this)),ai(e,"packet",this.onpacket.bind(this)),ai(e,"error",this.onerror.bind(this)),ai(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,o;if(PN.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:et.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,f=n.pop();this._registerAckCallback(u,f),s.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),s=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,i)=>{const o=(s,a)=>s?i(s):r(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:et.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case et.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(e);break;case et.ACK:case et.BINARY_ACK:this.onack(e);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:et.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Mc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Mc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Mc.prototype.reset=function(){this.attempts=0};Mc.prototype.setMin=function(t){this.ms=t};Mc.prototype.setMax=function(t){this.max=t};Mc.prototype.setJitter=function(t){this.jitter=t};class f1 extends tn{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Oh(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Mc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||RN;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new yN(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=ai(n,"open",function(){r.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=ai(n,"error",o);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ai(e,"ping",this.onping.bind(this)),ai(e,"data",this.ondata.bind(this)),ai(e,"error",this.onerror.bind(this)),ai(e,"close",this.onclose.bind(this)),ai(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Th(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new k_(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Kc={};function Nf(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=mN(t,e.path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=Kc[i]&&o in Kc[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let c;return a?c=new f1(r,e):(Kc[i]||(Kc[i]=new f1(r,e)),c=Kc[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Nf,{Manager:f1,Socket:k_,io:Nf,connect:Nf});function ye(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(l){try{c(r.next(l))}catch(u){o(u)}}function a(l){try{c(r.throw(l))}catch(u){o(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n((function(f){f(u)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}var or=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Ri=[],Vr=[],NN=typeof Uint8Array<"u"?Uint8Array:Array,Xg=!1;function M_(){Xg=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)Ri[e]=t[e],Vr[t.charCodeAt(e)]=e;Vr[45]=62,Vr[95]=63}function kN(t,e,n){for(var r,i,o=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(Ri[(i=r)>>18&63]+Ri[i>>12&63]+Ri[i>>6&63]+Ri[63&i]);return o.join("")}function gw(t){var e;Xg||M_();for(var n=t.length,r=n%3,i="",o=[],s=16383,a=0,c=n-r;a<c;a+=s)o.push(kN(t,a,a+s>c?c:a+s));return r===1?(e=t[n-1],i+=Ri[e>>2],i+=Ri[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Ri[e>>10],i+=Ri[e>>4&63],i+=Ri[e<<2&63],i+="="),o.push(i),o.join("")}function Wu(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,o=h&(1<<-u)-1,h>>=-u,u+=a;u>0;o=256*o+t[e+f],f+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+f],f+=d,u-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=l}return(h?-1:1)*s*Math.pow(2,o-r)}function D_(t,e,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(e*c-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+h]=255&s,h+=p,s/=256,l-=8);t[n+h-p]|=128*g}var MN={}.toString,B_=Array.isArray||function(t){return MN.call(t)=="[object Array]"};me.TYPED_ARRAY_SUPPORT=or.TYPED_ARRAY_SUPPORT===void 0||or.TYPED_ARRAY_SUPPORT;var DN=bd();function bd(){return me.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function yo(t,e){if(bd()<e)throw new RangeError("Invalid typed array length");return me.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=me.prototype:(t===null&&(t=new me(e)),t.length=e),t}function me(t,e,n){if(!(me.TYPED_ARRAY_SUPPORT||this instanceof me))return new me(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return d1(this,t)}return L_(this,t,e,n)}function L_(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?(function(i,o,s,a){if(o.byteLength,s<0||o.byteLength<s)throw new RangeError("'offset' is out of bounds");if(o.byteLength<s+(a||0))throw new RangeError("'length' is out of bounds");return o=s===void 0&&a===void 0?new Uint8Array(o):a===void 0?new Uint8Array(o,s):new Uint8Array(o,s,a),me.TYPED_ARRAY_SUPPORT?(i=o).__proto__=me.prototype:i=T0(i,o),i})(t,e,n,r):typeof e=="string"?(function(i,o,s){if(typeof s=="string"&&s!==""||(s="utf8"),!me.isEncoding(s))throw new TypeError('"encoding" must be a valid string encoding');var a=0|U_(o,s);i=yo(i,a);var c=i.write(o,s);return c!==a&&(i=i.slice(0,c)),i})(t,e,n):(function(i,o){if(Pi(o)){var s=0|Zg(o.length);return(i=yo(i,s)).length===0||o.copy(i,0,0,s),i}if(o){if(typeof ArrayBuffer<"u"&&o.buffer instanceof ArrayBuffer||"length"in o)return typeof o.length!="number"||(a=o.length)!=a?yo(i,0):T0(i,o);if(o.type==="Buffer"&&B_(o.data))return T0(i,o.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")})(t,e)}function F_(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d1(t,e){if(F_(e),t=yo(t,e<0?0:0|Zg(e)),!me.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function T0(t,e){var n=e.length<0?0:0|Zg(e.length);t=yo(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function Zg(t){if(t>=bd())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+bd().toString(16)+" bytes");return 0|t}function Pi(t){return!(t==null||!t._isBuffer)}function U_(t,e){if(Pi(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Ed(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j_(t).length;default:if(r)return Ed(t).length;e=(""+e).toLowerCase(),r=!0}}function BN(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return GN(this,e,n);case"utf8":case"utf-8":return $_(this,e,n);case"ascii":return jN(this,e,n);case"latin1":case"binary":return KN(this,e,n);case"base64":return VN(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zN(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Ds(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function vw(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(typeof e=="string"&&(e=me.from(e,r)),Pi(e))return e.length===0?-1:yw(t,e,n,r,i);if(typeof e=="number")return e&=255,me.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):yw(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function yw(t,e,n,r,i){var o,s=1,a=t.length,c=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(h,p){return s===1?h[p]:h.readUInt16BE(p*s)}if(i){var u=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,u===-1?0:o-u)){if(u===-1&&(u=o),o-u+1===c)return u*s}else u!==-1&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var f=!0,d=0;d<c;d++)if(l(t,o+d)!==l(e,d)){f=!1;break}if(f)return o}return-1}function LN(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function FN(t,e,n,r){return Rh(Ed(e,t.length-n),t,n,r)}function H_(t,e,n,r){return Rh((function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o})(e),t,n,r)}function UN(t,e,n,r){return H_(t,e,n,r)}function HN(t,e,n,r){return Rh(j_(e),t,n,r)}function $N(t,e,n,r){return Rh((function(i,o){for(var s,a,c,l=[],u=0;u<i.length&&!((o-=2)<0);++u)a=(s=i.charCodeAt(u))>>8,c=s%256,l.push(c),l.push(a);return l})(e,t.length-n),t,n,r)}function VN(t,e,n){return e===0&&n===t.length?gw(t):gw(t.slice(e,n))}function $_(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,c,l=t[i],u=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(u=l);break;case 2:(192&(o=t[i+1]))==128&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=t[i+1],s=t[i+2],(192&o)==128&&(192&s)==128&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}u===null?(u=65533,f=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=f}return(function(d){var h=d.length;if(h<=mw)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<h;)p+=String.fromCharCode.apply(String,d.slice(g,g+=mw));return p})(r)}me.poolSize=8192,me._augment=function(t){return t.__proto__=me.prototype,t},me.from=function(t,e,n){return L_(null,t,e,n)},me.TYPED_ARRAY_SUPPORT&&(me.prototype.__proto__=Uint8Array.prototype,me.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&me[Symbol.species]),me.alloc=function(t,e,n){return(function(r,i,o,s){return F_(i),i<=0?yo(r,i):o!==void 0?typeof s=="string"?yo(r,i).fill(o,s):yo(r,i).fill(o):yo(r,i)})(null,t,e,n)},me.allocUnsafe=function(t){return d1(null,t)},me.allocUnsafeSlow=function(t){return d1(null,t)},me.isBuffer=K_,me.compare=function(t,e){if(!Pi(t)||!Pi(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},me.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},me.concat=function(t,e){if(!B_(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return me.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=me.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!Pi(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},me.byteLength=U_,me.prototype._isBuffer=!0,me.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ds(this,e,e+1);return this},me.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ds(this,e,e+3),Ds(this,e+1,e+2);return this},me.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ds(this,e,e+7),Ds(this,e+1,e+6),Ds(this,e+2,e+5),Ds(this,e+3,e+4);return this},me.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?$_(this,0,t):BN.apply(this,arguments)},me.prototype.equals=function(t){if(!Pi(t))throw new TypeError("Argument must be a Buffer");return this===t||me.compare(this,t)===0},me.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},me.prototype.compare=function(t,e,n,r,i){if(!Pi(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),u=0;u<a;++u)if(c[u]!==l[u]){o=c[u],s=l[u];break}return o<s?-1:s<o?1:0},me.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},me.prototype.indexOf=function(t,e,n){return vw(this,t,e,n,!0)},me.prototype.lastIndexOf=function(t,e,n){return vw(this,t,e,n,!1)},me.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return LN(this,t,e,n);case"utf8":case"utf-8":return FN(this,t,e,n);case"ascii":return H_(this,t,e,n);case"latin1":case"binary":return UN(this,t,e,n);case"base64":return HN(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $N(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},me.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var mw=4096;function jN(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function KN(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function GN(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=qN(t[o]);return i}function zN(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function dn(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function sr(t,e,n,r,i,o){if(!Pi(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function qu(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Yu(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function V_(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ww(t,e,n,r,i){return i||V_(t,0,n,4),D_(t,e,n,r,23,4),n+4}function bw(t,e,n,r,i){return i||V_(t,0,n,8),D_(t,e,n,r,52,8),n+8}me.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),me.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=me.prototype;else{var i=e-t;n=new me(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},me.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||dn(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},me.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||dn(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},me.prototype.readUInt8=function(t,e){return e||dn(t,1,this.length),this[t]},me.prototype.readUInt16LE=function(t,e){return e||dn(t,2,this.length),this[t]|this[t+1]<<8},me.prototype.readUInt16BE=function(t,e){return e||dn(t,2,this.length),this[t]<<8|this[t+1]},me.prototype.readUInt32LE=function(t,e){return e||dn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},me.prototype.readUInt32BE=function(t,e){return e||dn(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},me.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||dn(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},me.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||dn(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},me.prototype.readInt8=function(t,e){return e||dn(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},me.prototype.readInt16LE=function(t,e){e||dn(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},me.prototype.readInt16BE=function(t,e){e||dn(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},me.prototype.readInt32LE=function(t,e){return e||dn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},me.prototype.readInt32BE=function(t,e){return e||dn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},me.prototype.readFloatLE=function(t,e){return e||dn(t,4,this.length),Wu(this,t,!0,23,4)},me.prototype.readFloatBE=function(t,e){return e||dn(t,4,this.length),Wu(this,t,!1,23,4)},me.prototype.readDoubleLE=function(t,e){return e||dn(t,8,this.length),Wu(this,t,!0,52,8)},me.prototype.readDoubleBE=function(t,e){return e||dn(t,8,this.length),Wu(this,t,!1,52,8)},me.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||sr(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},me.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||sr(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},me.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,1,255,0),me.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},me.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,2,65535,0),me.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):qu(this,t,e,!0),e+2},me.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,2,65535,0),me.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):qu(this,t,e,!1),e+2},me.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,4,4294967295,0),me.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Yu(this,t,e,!0),e+4},me.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,4,4294967295,0),me.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Yu(this,t,e,!1),e+4},me.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);sr(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&a===0&&this[e+o-1]!==0&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},me.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);sr(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&a===0&&this[e+o+1]!==0&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},me.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,1,127,-128),me.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},me.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,2,32767,-32768),me.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):qu(this,t,e,!0),e+2},me.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,2,32767,-32768),me.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):qu(this,t,e,!1),e+2},me.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,4,2147483647,-2147483648),me.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Yu(this,t,e,!0),e+4},me.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),me.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Yu(this,t,e,!1),e+4},me.prototype.writeFloatLE=function(t,e,n){return ww(this,t,e,!0,n)},me.prototype.writeFloatBE=function(t,e,n){return ww(this,t,e,!1,n)},me.prototype.writeDoubleLE=function(t,e,n){return bw(this,t,e,!0,n)},me.prototype.writeDoubleBE=function(t,e,n){return bw(this,t,e,!1,n)},me.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!me.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},me.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!me.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(o=e;o<n;++o)this[o]=t;else{var s=Pi(t)?t:Ed(new me(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var WN=/[^+\/0-9A-Za-z-_]/g;function qN(t){return t<16?"0"+t.toString(16):t.toString(16)}function Ed(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j_(t){return(function(e){var n,r,i,o,s,a;Xg||M_();var c=e.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=e[c-2]==="="?2:e[c-1]==="="?1:0,a=new NN(3*c/4-s),i=s>0?c-4:c;var l=0;for(n=0,r=0;n<i;n+=4,r+=3)o=Vr[e.charCodeAt(n)]<<18|Vr[e.charCodeAt(n+1)]<<12|Vr[e.charCodeAt(n+2)]<<6|Vr[e.charCodeAt(n+3)],a[l++]=o>>16&255,a[l++]=o>>8&255,a[l++]=255&o;return s===2?(o=Vr[e.charCodeAt(n)]<<2|Vr[e.charCodeAt(n+1)]>>4,a[l++]=255&o):s===1&&(o=Vr[e.charCodeAt(n)]<<10|Vr[e.charCodeAt(n+1)]<<4|Vr[e.charCodeAt(n+2)]>>2,a[l++]=o>>8&255,a[l++]=255&o),a})((function(e){if((e=(function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")})(e).replace(WN,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e})(t))}function Rh(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function K_(t){return t!=null&&(!!t._isBuffer||Ew(t)||(function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Ew(e.slice(0,0))})(t))}function Ew(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var YN=Object.freeze({__proto__:null,Buffer:me,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),me.alloc(+t)},isBuffer:K_,kMaxLength:DN}),Wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ph(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Eu(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})})),n}var Ma={},Mr={},Ln={};function xd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function G_(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function z_(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Qg(t,...e){if(!z_(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function W_(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");xd(t.outputLen),xd(t.blockLen)}function q_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Y_(t,e){Qg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.isBytes=z_,Ln.number=xd,Ln.bool=G_,Ln.bytes=Qg,Ln.hash=W_,Ln.exists=q_,Ln.output=Y_;const XN={number:xd,bool:G_,bytes:Qg,hash:W_,exists:q_,output:Y_};Ln.default=XN,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=s,t.hexToNumber=a,t.bytesToNumberBE=function(f){return a(r(f))},t.numberToBytesBE=function(f,d){return s(f.toString(16).padStart(2*d,"0"))},t.asyncLoop=async function(f,d,h){let p=Date.now();for(let g=0;g<f;g++){h(g);const y=Date.now()-p;y>=0&&y<d||(await(0,t.nextTick)(),p+=y)}},t.utf8ToBytes=c,t.bytesToUtf8=function(f){return new TextDecoder().decode(f)},t.toBytes=function(f){if(typeof f=="string")f=c(f);else{if(!(0,e.isBytes)(f))throw new Error("Uint8Array expected, got "+typeof f);f=u(f)}return f},t.concatBytes=function(...f){let d=0;for(let p=0;p<f.length;p++){const g=f[p];(0,e.bytes)(g),d+=g.length}const h=new Uint8Array(d);for(let p=0,g=0;p<f.length;p++){const y=f[p];h.set(y,g),g+=y.length}return h},t.checkOpts=function(f,d){if(d==null||typeof d!="object")throw new Error("options must be defined");return Object.assign(f,d)},t.equalBytes=function(f,d){if(f.length!==d.length)return!1;let h=0;for(let p=0;p<f.length;p++)h|=f[p]^d[p];return h===0},t.setBigUint64=l,t.u64Lengths=function(f,d){const h=new Uint8Array(16),p=(0,t.createView)(h);return l(p,0,BigInt(d?d.length:0),!0),l(p,8,BigInt(f.length),!0),h},t.isAligned32=function(f){return f.byteOffset%4==0},t.copyBytes=u,t.clean=function(...f){for(let d=0;d<f.length;d++)f[d].fill(0)};const e=Ln;if(t.u8=f=>new Uint8Array(f.buffer,f.byteOffset,f.byteLength),t.u16=f=>new Uint16Array(f.buffer,f.byteOffset,Math.floor(f.byteLength/2)),t.u32=f=>new Uint32Array(f.buffer,f.byteOffset,Math.floor(f.byteLength/4)),t.createView=f=>new DataView(f.buffer,f.byteOffset,f.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},((f,d)=>d.toString(16).padStart(2,"0")));function r(f){(0,e.bytes)(f);let d="";for(let h=0;h<f.length;h++)d+=n[f[h]];return d}const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(f){return f>=i._0&&f<=i._9?f-i._0:f>=i._A&&f<=i._F?f-(i._A-10):f>=i._a&&f<=i._f?f-(i._a-10):void 0}function s(f){if(typeof f!="string")throw new Error("hex string expected, got "+typeof f);const d=f.length,h=d/2;if(d%2)throw new Error("padded hex string expected, got unpadded hex of length "+d);const p=new Uint8Array(h);for(let g=0,y=0;g<h;g++,y+=2){const v=o(f.charCodeAt(y)),m=o(f.charCodeAt(y+1));if(v===void 0||m===void 0){const w=f[y]+f[y+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+y)}p[g]=16*v+m}return p}function a(f){if(typeof f!="string")throw new Error("hex string expected, got "+typeof f);return BigInt(f===""?"0":`0x${f}`)}function c(f){if(typeof f!="string")throw new Error("string expected, got "+typeof f);return new Uint8Array(new TextEncoder().encode(f))}t.nextTick=async()=>{},t.Hash=class{};function l(f,d,h,p){if(typeof f.setBigUint64=="function")return f.setBigUint64(d,h,p);const g=BigInt(32),y=BigInt(4294967295),v=Number(h>>g&y),m=Number(h&y),w=p?4:0,E=p?0:4;f.setUint32(d+w,v,p),f.setUint32(d+E,m,p)}function u(f){return Uint8Array.from(f)}t.wrapCipher=(f,d)=>(Object.assign(d,f),d)})(Mr);var Wl={},hn={};Object.defineProperty(hn,"__esModule",{value:!0}),hn.AEAD_TAG_LENGTH=hn.XCHACHA20_NONCE_LENGTH=hn.CURVE25519_PUBLIC_KEY_SIZE=hn.ETH_PUBLIC_KEY_SIZE=hn.UNCOMPRESSED_PUBLIC_KEY_SIZE=hn.COMPRESSED_PUBLIC_KEY_SIZE=hn.SECRET_KEY_LENGTH=void 0,hn.SECRET_KEY_LENGTH=32,hn.COMPRESSED_PUBLIC_KEY_SIZE=33,hn.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,hn.ETH_PUBLIC_KEY_SIZE=64,hn.CURVE25519_PUBLIC_KEY_SIZE=32,hn.XCHACHA20_NONCE_LENGTH=24,hn.AEAD_TAG_LENGTH=16,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=hn,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}})(Wl);var O0={},Ad={},Nh={},X_={},Jg={},Xu={};Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.crypto=void 0,Xu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=i,t.getWebcryptoSubtle=o,t.managedNonce=function(c){return(0,n.number)(c.nonceLength),(l,...u)=>({encrypt(f,...d){const{nonceLength:h}=c,p=i(h),g=c(l,p,...u).encrypt(f,...d),y=(0,r.concatBytes)(p,g);return g.fill(0),y},decrypt(f,...d){const{nonceLength:h}=c,p=f.subarray(0,h),g=f.subarray(h);return c(l,p,...u).decrypt(g,...d)}})};const e=Xu,n=Ln,r=Mr;function i(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")}function o(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(c,l,u,f){const d=o(),h=await d.importKey("raw",c,l,!0,["encrypt"]),p=await d.encrypt(u,h,f);return new Uint8Array(p)},async decrypt(c,l,u,f){const d=o(),h=await d.importKey("raw",c,l,!0,["decrypt"]),p=await d.decrypt(u,h,f);return new Uint8Array(p)}};const s={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(c){return(l,u,f)=>{(0,n.bytes)(l),(0,n.bytes)(u);const d={name:c,length:8*l.length},h=(function(p,g,y){if(p===s.CBC)return{name:s.CBC,iv:g};if(p===s.CTR)return{name:s.CTR,counter:g,length:64};if(p===s.GCM)return y?{name:s.GCM,iv:g,additionalData:y}:{name:s.GCM,iv:g};throw new Error("unknown aes block mode")})(c,u,f);return{encrypt:p=>((0,n.bytes)(p),t.utils.encrypt(l,d,h,p)),decrypt:p=>((0,n.bytes)(p),t.utils.decrypt(l,d,h,p))}}}t.cbc=a(s.CBC),t.ctr=a(s.CTR),t.gcm=a(s.GCM)})(Jg);var Z_={},vn={},mo={},Tr={};function _d(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function Q_(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function J_(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function ev(t,...e){if(!J_(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function e3(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_d(t.outputLen),_d(t.blockLen)}function t3(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function n3(t,e){ev(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.isBytes=J_,Tr.number=_d,Tr.bool=Q_,Tr.bytes=ev,Tr.hash=e3,Tr.exists=t3,Tr.output=n3;const ZN={number:_d,bool:Q_,bytes:ev,hash:e3,exists:t3,output:n3};Tr.default=ZN;var No={},Zu={};Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.crypto=void 0,Zu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"},t.byteSwap32=function(l){for(let u=0;u<l.length;u++)l[u]=(0,t.byteSwap)(l[u])},t.bytesToHex=function(l){(0,n.bytes)(l);let u="";for(let f=0;f<l.length;f++)u+=r[l[f]];return u},t.hexToBytes=function(l){if(typeof l!="string")throw new Error("hex string expected, got "+typeof l);const u=l.length,f=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);const d=new Uint8Array(f);for(let h=0,p=0;h<f;h++,p+=2){const g=o(l.charCodeAt(p)),y=o(l.charCodeAt(p+1));if(g===void 0||y===void 0){const v=l[p]+l[p+1];throw new Error('hex string expected, got non-hex character "'+v+'" at index '+p)}d[h]=16*g+y}return d},t.asyncLoop=async function(l,u,f){let d=Date.now();for(let h=0;h<l;h++){f(h);const p=Date.now()-d;p>=0&&p<u||(await(0,t.nextTick)(),d+=p)}},t.utf8ToBytes=s,t.toBytes=a,t.concatBytes=function(...l){let u=0;for(let d=0;d<l.length;d++){const h=l[d];(0,n.bytes)(h),u+=h.length}const f=new Uint8Array(u);for(let d=0,h=0;d<l.length;d++){const p=l[d];f.set(p,h),h+=p.length}return f},t.checkOpts=function(l,u){if(u!==void 0&&c.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(l,u)},t.wrapConstructor=function(l){const u=d=>l().update(a(d)).digest(),f=l();return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=()=>l(),u},t.wrapConstructorWithOpts=function(l){const u=(d,h)=>l(h).update(a(d)).digest(),f=l({});return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=d=>l(d),u},t.wrapXOFConstructorWithOpts=function(l){const u=(d,h)=>l(h).update(a(d)).digest(),f=l({});return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=d=>l(d),u},t.randomBytes=function(l=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(l));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")};const e=Zu,n=Tr;t.u8=l=>new Uint8Array(l.buffer,l.byteOffset,l.byteLength),t.u32=l=>new Uint32Array(l.buffer,l.byteOffset,Math.floor(l.byteLength/4)),t.createView=l=>new DataView(l.buffer,l.byteOffset,l.byteLength),t.rotr=(l,u)=>l<<32-u|l>>>u,t.rotl=(l,u)=>l<<u|l>>>32-u>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=l=>l<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255,t.byteSwapIfBE=t.isLE?l=>l:l=>(0,t.byteSwap)(l);const r=Array.from({length:256},((l,u)=>u.toString(16).padStart(2,"0"))),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(l){return l>=i._0&&l<=i._9?l-i._0:l>=i._A&&l<=i._F?l-(i._A-10):l>=i._a&&l<=i._f?l-(i._a-10):void 0}function s(l){if(typeof l!="string")throw new Error("utf8ToBytes expected string, got "+typeof l);return new Uint8Array(new TextEncoder().encode(l))}function a(l){return typeof l=="string"&&(l=s(l)),(0,n.bytes)(l),l}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString})(No),Object.defineProperty(mo,"__esModule",{value:!0}),mo.HashMD=mo.Maj=mo.Chi=void 0;const R0=Tr,Gc=No;mo.Chi=(t,e,n)=>t&e^~t&n;mo.Maj=(t,e,n)=>t&e^t&n^e&n;mo.HashMD=class extends Gc.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Gc.createView)(this.buffer)}update(t){(0,R0.exists)(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=(0,Gc.toBytes)(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const a=(0,Gc.createView)(t);for(;r<=i-o;o+=r)this.process(a,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,R0.exists)(this),(0,R0.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let u=o;u<r;u++)e[u]=0;(function(u,f,d,h){if(typeof u.setBigUint64=="function")return u.setBigUint64(f,d,h);const p=BigInt(32),g=BigInt(4294967295),y=Number(d>>p&g),v=Number(d&g),m=h?4:0,w=h?0:4;u.setUint32(f+m,y,h),u.setUint32(f+w,v,h)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=(0,Gc.createView)(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)s.setUint32(4*u,l[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}};var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.add5L=Ve.add5H=Ve.add4H=Ve.add4L=Ve.add3H=Ve.add3L=Ve.rotlBL=Ve.rotlBH=Ve.rotlSL=Ve.rotlSH=Ve.rotr32L=Ve.rotr32H=Ve.rotrBL=Ve.rotrBH=Ve.rotrSL=Ve.rotrSH=Ve.shrSL=Ve.shrSH=Ve.toBig=void 0,Ve.fromBig=tv,Ve.split=r3,Ve.add=y3;const Qu=BigInt(2**32-1),h1=BigInt(32);function tv(t,e=!1){return e?{h:Number(t&Qu),l:Number(t>>h1&Qu)}:{h:0|Number(t>>h1&Qu),l:0|Number(t&Qu)}}function r3(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=tv(t[i],e);[n[i],r[i]]=[o,s]}return[n,r]}const i3=(t,e)=>BigInt(t>>>0)<<h1|BigInt(e>>>0);Ve.toBig=i3;const o3=(t,e,n)=>t>>>n;Ve.shrSH=o3;const s3=(t,e,n)=>t<<32-n|e>>>n;Ve.shrSL=s3;const a3=(t,e,n)=>t>>>n|e<<32-n;Ve.rotrSH=a3;const c3=(t,e,n)=>t<<32-n|e>>>n;Ve.rotrSL=c3;const l3=(t,e,n)=>t<<64-n|e>>>n-32;Ve.rotrBH=l3;const u3=(t,e,n)=>t>>>n-32|e<<64-n;Ve.rotrBL=u3;const f3=(t,e)=>e;Ve.rotr32H=f3;const d3=(t,e)=>t;Ve.rotr32L=d3;const h3=(t,e,n)=>t<<n|e>>>32-n;Ve.rotlSH=h3;const p3=(t,e,n)=>e<<n|t>>>32-n;Ve.rotlSL=p3;const g3=(t,e,n)=>e<<n-32|t>>>64-n;Ve.rotlBH=g3;const v3=(t,e,n)=>t<<n-32|e>>>64-n;function y3(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}Ve.rotlBL=v3;const m3=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Ve.add3L=m3;const w3=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Ve.add3H=w3;const b3=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Ve.add4L=b3;const E3=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;Ve.add4H=E3;const x3=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);Ve.add5L=x3;const A3=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0;Ve.add5H=A3;const QN={fromBig:tv,split:r3,toBig:i3,shrSH:o3,shrSL:s3,rotrSH:a3,rotrSL:c3,rotrBH:l3,rotrBL:u3,rotr32H:f3,rotr32L:d3,rotlSH:h3,rotlSL:p3,rotlBH:g3,rotlBL:v3,add:y3,add3L:m3,add3H:w3,add4L:b3,add4H:E3,add5H:A3,add5L:x3};Ve.default=QN,Object.defineProperty(vn,"__esModule",{value:!0}),vn.sha384=vn.sha512_256=vn.sha512_224=vn.sha512=vn.SHA384=vn.SHA512_256=vn.SHA512_224=vn.SHA512=void 0;const JN=mo,ze=Ve,Ju=No,[ek,tk]=ze.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),Fo=new Uint32Array(80),Uo=new Uint32Array(80);class xu extends JN.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:h,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y]}set(e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|i,this.Ch=0|o,this.Cl=0|s,this.Dh=0|a,this.Dl=0|c,this.Eh=0|l,this.El=0|u,this.Fh=0|f,this.Fl=0|d,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|y}process(e,n){for(let w=0;w<16;w++,n+=4)Fo[w]=e.getUint32(n),Uo[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const E=0|Fo[w-15],S=0|Uo[w-15],O=ze.default.rotrSH(E,S,1)^ze.default.rotrSH(E,S,8)^ze.default.shrSH(E,S,7),F=ze.default.rotrSL(E,S,1)^ze.default.rotrSL(E,S,8)^ze.default.shrSL(E,S,7),$=0|Fo[w-2],U=0|Uo[w-2],B=ze.default.rotrSH($,U,19)^ze.default.rotrBH($,U,61)^ze.default.shrSH($,U,6),Y=ze.default.rotrSL($,U,19)^ze.default.rotrBL($,U,61)^ze.default.shrSL($,U,6),j=ze.default.add4L(F,Y,Uo[w-7],Uo[w-16]),L=ze.default.add4H(j,O,B,Fo[w-7],Fo[w-16]);Fo[w]=0|L,Uo[w]=0|j}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:h,Fl:p,Gh:g,Gl:y,Hh:v,Hl:m}=this;for(let w=0;w<80;w++){const E=ze.default.rotrSH(f,d,14)^ze.default.rotrSH(f,d,18)^ze.default.rotrBH(f,d,41),S=ze.default.rotrSL(f,d,14)^ze.default.rotrSL(f,d,18)^ze.default.rotrBL(f,d,41),O=f&h^~f&g,F=d&p^~d&y,$=ze.default.add5L(m,S,F,tk[w],Uo[w]),U=ze.default.add5H($,v,E,O,ek[w],Fo[w]),B=0|$,Y=ze.default.rotrSH(r,i,28)^ze.default.rotrBH(r,i,34)^ze.default.rotrBH(r,i,39),j=ze.default.rotrSL(r,i,28)^ze.default.rotrBL(r,i,34)^ze.default.rotrBL(r,i,39),L=r&o^r&a^o&a,I=i&s^i&c^s&c;v=0|g,m=0|y,g=0|h,y=0|p,h=0|f,p=0|d,{h:f,l:d}=ze.default.add(0|l,0|u,0|U,0|B),l=0|a,u=0|c,a=0|o,c=0|s,o=0|r,s=0|i;const x=ze.default.add3L(B,j,I);r=ze.default.add3H(x,U,Y,L),i=0|x}({h:r,l:i}=ze.default.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:o,l:s}=ze.default.add(0|this.Bh,0|this.Bl,0|o,0|s),{h:a,l:c}=ze.default.add(0|this.Ch,0|this.Cl,0|a,0|c),{h:l,l:u}=ze.default.add(0|this.Dh,0|this.Dl,0|l,0|u),{h:f,l:d}=ze.default.add(0|this.Eh,0|this.El,0|f,0|d),{h,l:p}=ze.default.add(0|this.Fh,0|this.Fl,0|h,0|p),{h:g,l:y}=ze.default.add(0|this.Gh,0|this.Gl,0|g,0|y),{h:v,l:m}=ze.default.add(0|this.Hh,0|this.Hl,0|v,0|m),this.set(r,i,o,s,a,c,l,u,f,d,h,p,g,y,v,m)}roundClean(){Fo.fill(0),Uo.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}vn.SHA512=xu;class _3 extends xu{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}vn.SHA512_224=_3;class C3 extends xu{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}vn.SHA512_256=C3;class xw extends xu{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}vn.SHA384=xw,vn.sha512=(0,Ju.wrapConstructor)((()=>new xu)),vn.sha512_224=(0,Ju.wrapConstructor)((()=>new _3)),vn.sha512_256=(0,Ju.wrapConstructor)((()=>new C3)),vn.sha384=(0,Ju.wrapConstructor)((()=>new xw));var p1={},Ha={},yt={},qe={};Object.defineProperty(qe,"__esModule",{value:!0}),qe.notImplemented=qe.bitMask=void 0,qe.isBytes=Cd,qe.abytes=Sd,qe.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},qe.bytesToHex=P0,qe.numberToHexUnpadded=Aw,qe.hexToNumber=N0,qe.hexToBytes=Mf,qe.bytesToNumberBE=function(t){return N0(P0(t))},qe.bytesToNumberLE=function(t){return Sd(t),N0(P0(Uint8Array.from(t).reverse()))},qe.numberToBytesBE=Cw,qe.numberToBytesLE=function(t,e){return Cw(t,e).reverse()},qe.numberToVarBytesBE=function(t){return Mf(Aw(t))},qe.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=Mf(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else{if(!Cd(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r},qe.concatBytes=Sw,qe.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},qe.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},qe.inRange=Iw,qe.aInRange=function(t,e,n,r){if(!Iw(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},qe.bitLen=function(t){let e;for(e=0;t>g1;t>>=kf,e+=1);return e},qe.bitGet=function(t,e){return t>>BigInt(e)&kf},qe.bitSet=function(t,e,n){return t|(n?kf:g1)<<BigInt(e)},qe.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=M0(t),i=M0(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...u)=>n(i,r,...u),c=(u=M0())=>{i=a(Tw([0]),u),r=a(),u.length!==0&&(i=a(Tw([1]),u),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const f=[];for(;u<e;){r=a();const d=r.slice();f.push(d),u+=r.length}return Sw(...f)};return(u,f)=>{let d;for(s(),c(u);!(d=f(l()));)c();return s(),d}},qe.validateObject=function(t,e,n={}){const r=(i,o,s)=>{const a=ik[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=t[i];if(!(s&&c===void 0||a(c,t)))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(const[i,o]of Object.entries(e))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return t},qe.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const o=t(n,...r);return e.set(n,o),o}};const g1=BigInt(0),kf=BigInt(1),nk=BigInt(2);function Cd(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Sd(t){if(!Cd(t))throw new Error("Uint8Array expected")}const rk=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function P0(t){Sd(t);let e="";for(let n=0;n<t.length;n++)e+=rk[t[n]];return e}function Aw(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function N0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Zi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function _w(t){return t>=Zi._0&&t<=Zi._9?t-Zi._0:t>=Zi._A&&t<=Zi._F?t-(Zi._A-10):t>=Zi._a&&t<=Zi._f?t-(Zi._a-10):void 0}function Mf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=_w(t.charCodeAt(o)),a=_w(t.charCodeAt(o+1));if(s===void 0||a===void 0){const c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[i]=16*s+a}return r}function Cw(t,e){return Mf(t.toString(16).padStart(2*e,"0"))}function Sw(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Sd(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const o=t[r];n.set(o,i),i+=o.length}return n}const k0=t=>typeof t=="bigint"&&g1<=t;function Iw(t,e,n){return k0(t)&&k0(e)&&k0(n)&&e<=t&&t<n}qe.bitMask=t=>(nk<<BigInt(t-1))-kf;const M0=t=>new Uint8Array(t),Tw=t=>Uint8Array.from(t),ik={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Cd(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};qe.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(yt,"__esModule",{value:!0}),yt.isNegativeLE=void 0,yt.mod=Sr,yt.pow=S3,yt.pow2=function(t,e,n){let r=t;for(;e-- >wn;)r*=r,r%=n;return r},yt.invert=ef,yt.tonelliShanks=I3,yt.FpSqrt=Pw,yt.validateField=function(t){const e=sk.reduce(((n,r)=>(n[r]="function",n)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,Er.validateObject)(t,e)},yt.FpPow=Nw,yt.FpInvertBatch=kw,yt.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?ef(n,t.ORDER):t.inv(n))},yt.FpLegendre=Mw,yt.FpIsSquare=function(t){const e=Mw(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},yt.nLength=D0,yt.Field=function(t,e,n=!1,r={}){if(t<=wn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=D0(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Pw(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:(0,Er.bitMask)(i),ZERO:wn,ONE:Rt,create:c=>Sr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return wn<=c&&c<t},is0:c=>c===wn,isOdd:c=>(c&Rt)===Rt,neg:c=>Sr(-c,t),eql:(c,l)=>c===l,sqr:c=>Sr(c*c,t),add:(c,l)=>Sr(c+l,t),sub:(c,l)=>Sr(c-l,t),mul:(c,l)=>Sr(c*l,t),pow:(c,l)=>Nw(a,c,l),div:(c,l)=>Sr(c*ef(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>ef(c,t),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>kw(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?(0,Er.numberToBytesLE)(c,o):(0,Er.numberToBytesBE)(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return n?(0,Er.bytesToNumberLE)(c):(0,Er.bytesToNumberBE)(c)}});return Object.freeze(a)},yt.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},yt.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},yt.hashToPrivateScalar=function(t,e,n=!1){t=(0,Er.ensureBytes)("privateHash",t);const r=t.length,i=D0(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const o=n?(0,Er.bytesToNumberLE)(t):(0,Er.bytesToNumberBE)(t);return Sr(o,e-Rt)+Rt},yt.getFieldBytesLength=y1,yt.getMinHashLength=Dw,yt.mapHashToField=function(t,e,n=!1){const r=t.length,i=y1(e),o=Dw(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=Sr(n?(0,Er.bytesToNumberBE)(t):(0,Er.bytesToNumberLE)(t),e-Rt)+Rt;return n?(0,Er.numberToBytesLE)(s,i):(0,Er.numberToBytesBE)(s,i)};const Er=qe,wn=BigInt(0),Rt=BigInt(1),cs=BigInt(2),ok=BigInt(3),v1=BigInt(4),Ow=BigInt(5),Rw=BigInt(8);function Sr(t,e){const n=t%e;return n>=wn?n:e+n}function S3(t,e,n){if(n<=wn||e<wn)throw new Error("Expected power/modulo > 0");if(n===Rt)return wn;let r=Rt;for(;e>wn;)e&Rt&&(r=r*t%n),t=t*t%n,e>>=Rt;return r}function ef(t,e){if(t===wn||e<=wn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Sr(t,e),r=e,i=wn,o=Rt;for(;n!==wn;){const s=r%n,a=i-o*(r/n);r=n,n=s,i=o,o=a}if(r!==Rt)throw new Error("invert: does not exist");return Sr(i,e)}function I3(t){const e=(t-Rt)/cs;let n,r,i;for(n=t-Rt,r=0;n%cs===wn;n/=cs,r++);for(i=cs;i<t&&S3(i,e,t)!==t-Rt;i++);if(r===1){const s=(t+Rt)/v1;return function(a,c){const l=a.pow(c,s);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const o=(n+Rt)/cs;return function(s,a){if(s.pow(a,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,l=s.pow(s.mul(s.ONE,i),n),u=s.pow(a,o),f=s.pow(a,n);for(;!s.eql(f,s.ONE);){if(s.eql(f,s.ZERO))return s.ZERO;let d=1;for(let p=s.sqr(f);d<c&&!s.eql(p,s.ONE);d++)p=s.sqr(p);const h=s.pow(l,Rt<<BigInt(c-d-1));l=s.sqr(h),u=s.mul(u,h),f=s.mul(f,l),c=d}return u}}function Pw(t){if(t%v1===ok){const e=(t+Rt)/v1;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%Rw===Ow){const e=(t-Ow)/Rw;return function(n,r){const i=n.mul(r,cs),o=n.pow(i,e),s=n.mul(r,o),a=n.mul(n.mul(s,cs),o),c=n.mul(s,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return I3(t)}BigInt(9),BigInt(16);yt.isNegativeLE=(t,e)=>(Sr(t,e)&Rt)===Rt;const sk=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Nw(t,e,n){if(n<wn)throw new Error("Expected power > 0");if(n===wn)return t.ONE;if(n===Rt)return e;let r=t.ONE,i=e;for(;n>wn;)n&Rt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Rt;return r}function kw(t,e){const n=new Array(e.length),r=e.reduce(((o,s,a)=>t.is0(s)?o:(n[a]=o,t.mul(o,s))),t.ONE),i=t.inv(r);return e.reduceRight(((o,s,a)=>t.is0(s)?o:(n[a]=t.mul(o,n[a]),t.mul(o,s))),i),n}function Mw(t){const e=(t-Rt)/cs;return(n,r)=>n.pow(r,e)}function D0(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function y1(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Dw(t){const e=y1(t);return e+Math.ceil(e/2)}Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.wNAF=function(t,e){const n=(o,s)=>{const a=s.negate();return o?a:s},r=o=>{if(!Number.isSafeInteger(o)||o<=0||o>e)throw new Error(`Wrong window size=${o}, should be [1..${e}]`)},i=o=>(r(o),{windows:Math.ceil(e/o)+1,windowSize:2**(o-1)});return{constTimeNegate:n,unsafeLadder(o,s){let a=t.ZERO,c=o;for(;s>ak;)s&B0&&(a=a.add(c)),c=c.double(),s>>=B0;return a},precomputeWindow(o,s){const{windows:a,windowSize:c}=i(s),l=[];let u=o,f=u;for(let d=0;d<a;d++){f=u,l.push(f);for(let h=1;h<c;h++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(o,s,a){const{windows:c,windowSize:l}=i(o);let u=t.ZERO,f=t.BASE;const d=BigInt(2**o-1),h=2**o,p=BigInt(o);for(let g=0;g<c;g++){const y=g*l;let v=Number(a&d);a>>=p,v>l&&(v-=h,a+=B0);const m=y,w=y+Math.abs(v)-1,E=g%2!=0,S=v<0;v===0?f=f.add(n(E,s[m])):u=u.add(n(S,s[w]))}return{p:u,f}},wNAFCached(o,s,a){const c=Fw.get(o)||1;let l=L0.get(o);return l||(l=this.precomputeWindow(o,c),c!==1&&L0.set(o,a(l))),this.wNAF(c,l,s)},setWindowSize(o,s){r(s),Fw.set(o,s),L0.delete(o)}}},Ha.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((u,f)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${f}`)})),n.forEach(((u,f)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${f}`)}));const i=(0,Lw.bitLen)(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,s=(1<<o)-1,a=new Array(s+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/o)*o;let l=t.ZERO;for(let u=c;u>=0;u-=o){a.fill(t.ZERO);for(let d=0;d<r.length;d++){const h=r[d],p=Number(h>>BigInt(u)&BigInt(s));a[p]=a[p].add(n[d])}let f=t.ZERO;for(let d=a.length-1,h=t.ZERO;d>0;d--)h=h.add(a[d]),f=f.add(h);if(l=l.add(f),u!==0)for(let d=0;d<o;d++)l=l.double()}return l},Ha.validateBasic=function(t){return(0,Bw.validateField)(t.Fp),(0,Lw.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Bw.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const Bw=yt,Lw=qe,ak=BigInt(0),B0=BigInt(1),L0=new WeakMap,Fw=new WeakMap;Object.defineProperty(p1,"__esModule",{value:!0}),p1.twistedEdwards=function(t){const e=(function(L){const I=(0,F0.validateBasic)(L);return ar.validateObject(L,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...I})})(t),{Fp:n,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=e,l=tf<<BigInt(8*a)-cr,u=n.create,f=(0,Uw.Field)(e.n,e.nBitLength),d=e.uvRatio||((L,I)=>{try{return{isValid:!0,value:n.sqrt(L*n.inv(I))}}catch{return{isValid:!1,value:ti}}}),h=e.adjustScalarBytes||(L=>L),p=e.domain||((L,I,x)=>{if((0,xr.abool)("phflag",x),I.length||x)throw new Error("Contexts/pre-hash are not supported");return L});function g(L,I){ar.aInRange("coordinate "+L,I,ti,l)}function y(L){if(!(L instanceof w))throw new Error("ExtendedPoint expected")}const v=(0,xr.memoized)(((L,I)=>{const{ex:x,ey:P,ez:G}=L,b=L.is0();I==null&&(I=b?ck:n.inv(G));const C=u(x*I),T=u(P*I),k=u(G*I);if(b)return{x:ti,y:cr};if(k!==cr)throw new Error("invZ was invalid");return{x:C,y:T}})),m=(0,xr.memoized)((L=>{const{a:I,d:x}=e;if(L.is0())throw new Error("bad point: ZERO");const{ex:P,ey:G,ez:b,et:C}=L,T=u(P*P),k=u(G*G),A=u(b*b),_=u(A*A),R=u(T*I);if(u(A*u(R+k))!==u(_+u(x*u(T*k))))throw new Error("bad point: equation left != right (1)");if(u(P*G)!==u(b*C))throw new Error("bad point: equation left != right (2)");return!0}));class w{constructor(I,x,P,G){this.ex=I,this.ey=x,this.ez=P,this.et=G,g("x",I),g("y",x),g("z",P),g("t",G),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof w)throw new Error("extended point not allowed");const{x,y:P}=I||{};return g("x",x),g("y",P),new w(x,P,cr,u(x*P))}static normalizeZ(I){const x=n.invertBatch(I.map((P=>P.ez)));return I.map(((P,G)=>P.toAffine(x[G]))).map(w.fromAffine)}static msm(I,x){return(0,F0.pippenger)(w,f,I,x)}_setWindowSize(I){O.setWindowSize(this,I)}assertValidity(){m(this)}equals(I){y(I);const{ex:x,ey:P,ez:G}=this,{ex:b,ey:C,ez:T}=I,k=u(x*T),A=u(b*G),_=u(P*T),R=u(C*G);return k===A&&_===R}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:I}=e,{ex:x,ey:P,ez:G}=this,b=u(x*x),C=u(P*P),T=u(tf*u(G*G)),k=u(I*b),A=x+P,_=u(u(A*A)-b-C),R=k+C,D=R-T,H=k-C,N=u(_*D),K=u(R*H),z=u(_*H),Z=u(D*R);return new w(N,K,Z,z)}add(I){y(I);const{a:x,d:P}=e,{ex:G,ey:b,ez:C,et:T}=this,{ex:k,ey:A,ez:_,et:R}=I;if(x===BigInt(-1)){const ne=u((b-G)*(A+k)),de=u((b+G)*(A-k)),le=u(de-ne);if(le===ti)return this.double();const J=u(C*tf*R),ee=u(T*tf*_),ue=ee+J,ae=de+ne,ce=ee-J,xe=u(ue*le),Ce=u(ae*ce),$e=u(ue*ce),Ue=u(le*ae);return new w(xe,Ce,Ue,$e)}const D=u(G*k),H=u(b*A),N=u(T*P*R),K=u(C*_),z=u((G+b)*(k+A)-D-H),Z=K-N,oe=K+N,M=u(H-x*D),V=u(z*Z),X=u(oe*M),ie=u(z*M),te=u(Z*oe);return new w(V,X,te,ie)}subtract(I){return this.add(I.negate())}wNAF(I){return O.wNAFCached(this,I,w.normalizeZ)}multiply(I){const x=I;ar.aInRange("scalar",x,cr,r);const{p:P,f:G}=this.wNAF(x);return w.normalizeZ([P,G])[0]}multiplyUnsafe(I){const x=I;return ar.aInRange("scalar",x,ti,r),x===ti?S:this.equals(S)||x===cr?this:this.equals(E)?this.wNAF(x).p:O.unsafeLadder(this,x)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return O.unsafeLadder(this,r).is0()}toAffine(I){return v(this,I)}clearCofactor(){const{h:I}=e;return I===cr?this:this.multiplyUnsafe(I)}static fromHex(I,x=!1){const{d:P,a:G}=e,b=n.BYTES;I=(0,xr.ensureBytes)("pointHex",I,b),(0,xr.abool)("zip215",x);const C=I.slice(),T=I[b-1];C[b-1]=-129&T;const k=ar.bytesToNumberLE(C),A=x?l:n.ORDER;ar.aInRange("pointHex.y",k,ti,A);const _=u(k*k),R=u(_-cr),D=u(P*_-G);let{isValid:H,value:N}=d(R,D);if(!H)throw new Error("Point.fromHex: invalid y coordinate");const K=(N&cr)===cr,z=(128&T)!=0;if(!x&&N===ti&&z)throw new Error("Point.fromHex: x=0 and x_0=1");return z!==K&&(N=u(-N)),w.fromAffine({x:N,y:k})}static fromPrivateKey(I){return U(I).point}toRawBytes(){const{x:I,y:x}=this.toAffine(),P=ar.numberToBytesLE(x,n.BYTES);return P[P.length-1]|=I&cr?128:0,P}toHex(){return ar.bytesToHex(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,cr,u(e.Gx*e.Gy)),w.ZERO=new w(ti,cr,cr,ti);const{BASE:E,ZERO:S}=w,O=(0,F0.wNAF)(w,8*a);function F(L){return(0,Uw.mod)(L,r)}function $(L){return F(ar.bytesToNumberLE(L))}function U(L){const I=a;L=(0,xr.ensureBytes)("private key",L,I);const x=(0,xr.ensureBytes)("hashed private key",o(L),2*I),P=h(x.slice(0,I)),G=x.slice(I,2*I),b=$(P),C=E.multiply(b),T=C.toRawBytes();return{head:P,prefix:G,scalar:b,point:C,pointBytes:T}}function B(L=new Uint8Array,...I){const x=ar.concatBytes(...I);return $(o(p(x,(0,xr.ensureBytes)("context",L),!!i)))}const Y=lk;return E._setWindowSize(8),{CURVE:e,getPublicKey:function(L){return U(L).pointBytes},sign:function(L,I,x={}){L=(0,xr.ensureBytes)("message",L),i&&(L=i(L));const{prefix:P,scalar:G,pointBytes:b}=U(I),C=B(x.context,P,L),T=E.multiply(C).toRawBytes(),k=F(C+B(x.context,T,b,L)*G);ar.aInRange("signature.s",k,ti,r);const A=ar.concatBytes(T,ar.numberToBytesLE(k,n.BYTES));return(0,xr.ensureBytes)("result",A,2*a)},verify:function(L,I,x,P=Y){const{context:G,zip215:b}=P,C=n.BYTES;L=(0,xr.ensureBytes)("signature",L,2*C),I=(0,xr.ensureBytes)("message",I),b!==void 0&&(0,xr.abool)("zip215",b),i&&(I=i(I));const T=ar.bytesToNumberLE(L.slice(C,2*C));let k,A,_;try{k=w.fromHex(x,b),A=w.fromHex(L.slice(0,C),b),_=E.multiplyUnsafe(T)}catch{return!1}if(!b&&k.isSmallOrder())return!1;const R=B(G,A.toRawBytes(),k.toRawBytes(),I);return A.add(k.multiplyUnsafe(R)).subtract(_).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:U,randomPrivateKey:()=>s(n.BYTES),precompute:(L=8,I=w.BASE)=>(I._setWindowSize(L),I.multiply(BigInt(3)),I)}}};const F0=Ha,Uw=yt,ar=qe,xr=qe,ti=BigInt(0),cr=BigInt(1),tf=BigInt(2),ck=BigInt(8),lk={zip215:!0};var es={};Object.defineProperty(es,"__esModule",{value:!0}),es.expand_message_xmd=T3,es.expand_message_xof=O3,es.hash_to_field=U0,es.isogenyMap=function(t,e){const n=e.map((r=>Array.from(r).reverse()));return(r,i)=>{const[o,s,a,c]=n.map((l=>l.reduce(((u,f)=>t.add(t.mul(u,r),f)))));return r=t.div(o,s),i=t.mul(i,t.div(a,c)),{x:r,y:i}}},es.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const o=U0(r,2,{...n,DST:n.DST,...i}),s=t.fromAffine(e(o[0])),a=t.fromAffine(e(o[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const o=U0(r,1,{...n,DST:n.encodeDST,...i}),s=t.fromAffine(e(o[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const o of r)if(typeof o!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${o} in array`);const i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};const uk=yt,Bn=qe,fk=Bn.bytesToNumberBE;function ts(t,e){if(ql(t),ql(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function dk(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function ql(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function T3(t,e,n,r){(0,Bn.abytes)(t),(0,Bn.abytes)(e),ql(n),e.length>255&&(e=r((0,Bn.concatBytes)((0,Bn.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:o}=r,s=Math.ceil(n/i);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,Bn.concatBytes)(e,ts(e.length,1)),c=ts(0,o),l=ts(n,2),u=new Array(s),f=r((0,Bn.concatBytes)(c,t,l,ts(0,1),a));u[0]=r((0,Bn.concatBytes)(f,ts(1,1),a));for(let d=1;d<=s;d++){const h=[dk(f,u[d-1]),ts(d+1,1),a];u[d]=r((0,Bn.concatBytes)(...h))}return(0,Bn.concatBytes)(...u).slice(0,n)}function O3(t,e,n,r,i){if((0,Bn.abytes)(t),(0,Bn.abytes)(e),ql(n),e.length>255){const o=Math.ceil(2*r/8);e=i.create({dkLen:o}).update((0,Bn.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(ts(n,2)).update(e).update(ts(e.length,1)).digest()}function U0(t,e,n){(0,Bn.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:o,hash:s,expand:a,DST:c}=n;(0,Bn.abytes)(t),ql(e);const l=typeof c=="string"?(0,Bn.utf8ToBytes)(c):c,u=r.toString(2).length,f=Math.ceil((u+i)/8),d=e*o*f;let h;if(a==="xmd")h=T3(t,l,d,s);else if(a==="xof")h=O3(t,l,d,i,s);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');h=t}const p=new Array(e);for(let g=0;g<e;g++){const y=new Array(o);for(let v=0;v<o;v++){const m=f*(v+g*o),w=h.subarray(m,m+f);y[v]=(0,uk.mod)(fk(w),r)}p[g]=y}return p}var m1={};Object.defineProperty(m1,"__esModule",{value:!0}),m1.montgomery=function(t){const e=(function(g){return(0,Ho.validateObject)(g,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...g})})(t),{P:n}=e,r=g=>(0,Hw.mod)(g,n),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,a=e.adjustScalarBytes||(g=>g),c=e.powPminus2||(g=>(0,Hw.pow)(g,n-BigInt(2),n));function l(g,y,v){const m=r(g*(y-v));return[y=r(y-m),v=r(v+m)]}const u=(e.a-BigInt(2))/BigInt(4);function f(g){return(0,Ho.numberToBytesLE)(r(g),o)}function d(g,y){const v=(function(E){const S=(0,Ho.ensureBytes)("u coordinate",E,o);return s===32&&(S[31]&=127),(0,Ho.bytesToNumberLE)(S)})(y),m=(function(E){const S=(0,Ho.ensureBytes)("scalar",E),O=S.length;if(O!==o&&O!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${O}`);return(0,Ho.bytesToNumberLE)(a(S))})(g),w=(function(E,S){(0,Ho.aInRange)("u",E,Sa,n),(0,Ho.aInRange)("scalar",S,Sa,n);const O=S,F=E;let $,U=H0,B=Sa,Y=E,j=H0,L=Sa;for(let x=BigInt(i-1);x>=Sa;x--){const P=O>>x&H0;L^=P,$=l(L,U,Y),U=$[0],Y=$[1],$=l(L,B,j),B=$[0],j=$[1],L=P;const G=U+B,b=r(G*G),C=U-B,T=r(C*C),k=b-T,A=Y+j,_=r((Y-j)*G),R=r(A*C),D=_+R,H=_-R;Y=r(D*D),j=r(F*r(H*H)),U=r(b*T),B=r(k*(b+r(u*k)))}$=l(L,U,Y),U=$[0],Y=$[1],$=l(L,B,j),B=$[0],j=$[1];const I=c(B);return r(U*I)})(v,m);if(w===Sa)throw new Error("Invalid private or public key received");return f(w)}const h=f(e.Gu);function p(g){return d(g,h)}return{scalarMult:d,scalarMultBase:p,getSharedSecret:(g,y)=>d(g,y),getPublicKey:g=>p(g),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:h}};const Hw=yt,Ho=qe,Sa=BigInt(0),H0=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=O,t.edwardsToMontgomeryPriv=function(R){const D=E.hash(R.subarray(0,32));return E.adjustScalarBytes(D).subarray(0,32)};const e=vn,n=No,r=p1,i=es,o=yt,s=m1,a=qe,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),f=BigInt(1),d=BigInt(2),h=BigInt(3),p=BigInt(5),g=BigInt(8);function y(R){const D=BigInt(10),H=BigInt(20),N=BigInt(40),K=BigInt(80),z=c,Z=R*R%z*R%z,oe=(0,o.pow2)(Z,d,z)*Z%z,M=(0,o.pow2)(oe,f,z)*R%z,V=(0,o.pow2)(M,p,z)*M%z,X=(0,o.pow2)(V,D,z)*V%z,ie=(0,o.pow2)(X,H,z)*X%z,te=(0,o.pow2)(ie,N,z)*ie%z,ne=(0,o.pow2)(te,K,z)*te%z,de=(0,o.pow2)(ne,K,z)*te%z,le=(0,o.pow2)(de,D,z)*V%z;return{pow_p_5_8:(0,o.pow2)(le,d,z)*R%z,b2:Z}}function v(R){return R[0]&=248,R[31]&=127,R[31]|=64,R}function m(R,D){const H=c,N=(0,o.mod)(D*D*D,H),K=y(R*(0,o.mod)(N*N*D,H)).pow_p_5_8;let z=(0,o.mod)(R*N*K,H);const Z=(0,o.mod)(D*z*z,H),oe=z,M=(0,o.mod)(z*l,H),V=Z===R,X=Z===(0,o.mod)(-R,H),ie=Z===(0,o.mod)(-R*l,H);return V&&(z=oe),(X||ie)&&(z=M),(0,o.isNegativeLE)(z,H)&&(z=(0,o.mod)(-z,H)),{isValid:V||X,value:z}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const w=(0,o.Field)(c,void 0,!0),E={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:w,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:g,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:v,uvRatio:m};function S(R,D,H){if(D.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([H?1:0,D.length]),D,R)}function O(R){const{y:D}=t.ed25519.ExtendedPoint.fromHex(R),H=BigInt(1);return w.toBytes(w.create((H+D)*w.inv(H-D)))}t.ed25519=(0,r.twistedEdwards)(E),t.ed25519ctx=(0,r.twistedEdwards)({...E,domain:S}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},E,{domain:S,prehash:e.sha512})),t.x25519=(0,s.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:R=>{const D=c,{pow_p_5_8:H,b2:N}=y(R);return(0,o.mod)((0,o.pow2)(H,h,D)*N,D)},adjustScalarBytes:v,randomBytes:n.randomBytes}),t.edwardsToMontgomery=O;const F=(w.ORDER+h)/g,$=w.pow(d,F),U=w.sqrt(w.neg(w.ONE)),B=(0,o.FpSqrtEven)(w,w.neg(BigInt(486664)));function Y(R){const{xMn:D,xMd:H,yMn:N,yMd:K}=(function(te){const ne=(w.ORDER-p)/g,de=BigInt(486662);let le=w.sqr(te);le=w.mul(le,d);let J=w.add(le,w.ONE),ee=w.neg(de),ue=w.sqr(J),ae=w.mul(ue,J),ce=w.mul(le,de);ce=w.mul(ce,ee),ce=w.add(ce,ue),ce=w.mul(ce,ee);let xe=w.sqr(ae);ue=w.sqr(xe),xe=w.mul(xe,ae),xe=w.mul(xe,ce),ue=w.mul(ue,xe);let Ce=w.pow(ue,ne);Ce=w.mul(Ce,xe);let $e=w.mul(Ce,U);ue=w.sqr(Ce),ue=w.mul(ue,ae);let Ue=w.eql(ue,ce),ht=w.cmov($e,Ce,Ue),At=w.mul(ee,le),rn=w.mul(Ce,te);rn=w.mul(rn,$);let Nn=w.mul(rn,U),Jr=w.mul(ce,le);ue=w.sqr(rn),ue=w.mul(ue,ae);let qi=w.eql(ue,Jr),ve=w.cmov(Nn,rn,qi);ue=w.sqr(ht),ue=w.mul(ue,ae);let Q=w.eql(ue,ce),_e=w.cmov(At,ee,Q),lt=w.cmov(ve,ht,Q),Os=w.isOdd(lt);return lt=w.cmov(lt,w.neg(lt),Q!==Os),{xMn:_e,xMd:J,yMn:lt,yMd:f}})(R);let z=w.mul(D,K);z=w.mul(z,B);let Z=w.mul(H,N),oe=w.sub(D,H),M=w.add(D,H),V=w.mul(Z,M),X=w.eql(V,w.ZERO);z=w.cmov(z,w.ZERO,X),Z=w.cmov(Z,w.ONE,X),oe=w.cmov(oe,w.ONE,X),M=w.cmov(M,w.ONE,X);const ie=w.invertBatch([Z,M]);return{x:w.mul(z,ie[0]),y:w.mul(oe,ie[1])}}const j=(0,i.createHasher)(t.ed25519.ExtendedPoint,(R=>Y(R[0])),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:w.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});function L(R){if(!(R instanceof _))throw new Error("RistrettoPoint expected")}t.hashToCurve=j.hashToCurve,t.encodeToCurve=j.encodeToCurve;const I=l,x=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),P=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),G=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),b=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),C=R=>m(f,R),T=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),k=R=>t.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(R)&T);function A(R){const{d:D}=t.ed25519.CURVE,H=t.ed25519.CURVE.Fp.ORDER,N=t.ed25519.CURVE.Fp.create,K=N(I*R*R),z=N((K+f)*G);let Z=BigInt(-1);const oe=N((Z-D*K)*N(K+D));let{isValid:M,value:V}=m(z,oe),X=N(V*R);(0,o.isNegativeLE)(X,H)||(X=N(-X)),M||(V=X),M||(Z=K);const ie=N(Z*(K-f)*b-oe),te=V*V,ne=N((V+V)*oe),de=N(ie*x),le=N(f-te),J=N(f+te);return new t.ed25519.ExtendedPoint(N(ne*J),N(le*de),N(de*J),N(ne*le))}class _{constructor(D){this.ep=D}static fromAffine(D){return new _(t.ed25519.ExtendedPoint.fromAffine(D))}static hashToCurve(D){D=(0,a.ensureBytes)("ristrettoHash",D,64);const H=A(k(D.slice(0,32))),N=A(k(D.slice(32,64)));return new _(H.add(N))}static fromHex(D){D=(0,a.ensureBytes)("ristrettoHex",D,32);const{a:H,d:N}=t.ed25519.CURVE,K=t.ed25519.CURVE.Fp.ORDER,z=t.ed25519.CURVE.Fp.create,Z="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",oe=k(D);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(oe,32),D)||(0,o.isNegativeLE)(oe,K))throw new Error(Z);const M=z(oe*oe),V=z(f+H*M),X=z(f-H*M),ie=z(V*V),te=z(X*X),ne=z(H*N*ie-te),{isValid:de,value:le}=C(z(ne*te)),J=z(le*X),ee=z(le*J*ne);let ue=z((oe+oe)*J);(0,o.isNegativeLE)(ue,K)&&(ue=z(-ue));const ae=z(V*ee),ce=z(ue*ae);if(!de||(0,o.isNegativeLE)(ce,K)||ae===u)throw new Error(Z);return new _(new t.ed25519.ExtendedPoint(ue,ae,f,ce))}toRawBytes(){let{ex:D,ey:H,ez:N,et:K}=this.ep;const z=t.ed25519.CURVE.Fp.ORDER,Z=t.ed25519.CURVE.Fp.create,oe=Z(Z(N+H)*Z(N-H)),M=Z(D*H),V=Z(M*M),{value:X}=C(Z(oe*V)),ie=Z(X*oe),te=Z(X*M),ne=Z(ie*te*K);let de;if((0,o.isNegativeLE)(K*ne,z)){let J=Z(H*I),ee=Z(D*I);D=J,H=ee,de=Z(ie*P)}else de=te;(0,o.isNegativeLE)(D*ne,z)&&(H=Z(-H));let le=Z((N-H)*de);return(0,o.isNegativeLE)(le,z)&&(le=Z(-le)),(0,a.numberToBytesLE)(le,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(D){L(D);const{ex:H,ey:N}=this.ep,{ex:K,ey:z}=D.ep,Z=t.ed25519.CURVE.Fp.create,oe=Z(H*z)===Z(N*K),M=Z(N*z)===Z(H*K);return oe||M}add(D){return L(D),new _(this.ep.add(D.ep))}subtract(D){return L(D),new _(this.ep.subtract(D.ep))}multiply(D){return new _(this.ep.multiply(D))}multiplyUnsafe(D){return new _(this.ep.multiplyUnsafe(D))}double(){return new _(this.ep.double())}negate(){return new _(this.ep.negate())}}t.RistrettoPoint=(_.BASE||(_.BASE=new _(t.ed25519.ExtendedPoint.BASE)),_.ZERO||(_.ZERO=new _(t.ed25519.ExtendedPoint.ZERO)),_),t.hashToRistretto255=(R,D)=>{const H=D.DST,N=typeof H=="string"?(0,n.utf8ToBytes)(H):H,K=(0,i.expand_message_xmd)(R,N,64,e.sha512);return _.hashToCurve(K)},t.hash_to_ristretto255=t.hashToRistretto255})(Z_);var R3={},wo={};Object.defineProperty(wo,"__esModule",{value:!0}),wo.sha224=wo.sha256=wo.SHA256=void 0;const $0=mo,Ur=No,hk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vo=new Uint32Array(64);class nv extends $0.HashMD{constructor(){super(64,32,8,!1),this.A=0|$o[0],this.B=0|$o[1],this.C=0|$o[2],this.D=0|$o[3],this.E=0|$o[4],this.F=0|$o[5],this.G=0|$o[6],this.H=0|$o[7]}get(){const{A:e,B:n,C:r,D:i,E:o,F:s,G:a,H:c}=this;return[e,n,r,i,o,s,a,c]}set(e,n,r,i,o,s,a,c){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|i,this.E=0|o,this.F=0|s,this.G=0|a,this.H=0|c}process(e,n){for(let f=0;f<16;f++,n+=4)Vo[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Vo[f-15],h=Vo[f-2],p=(0,Ur.rotr)(d,7)^(0,Ur.rotr)(d,18)^d>>>3,g=(0,Ur.rotr)(h,17)^(0,Ur.rotr)(h,19)^h>>>10;Vo[f]=g+Vo[f-7]+p+Vo[f-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=u+((0,Ur.rotr)(a,6)^(0,Ur.rotr)(a,11)^(0,Ur.rotr)(a,25))+(0,$0.Chi)(a,c,l)+hk[f]+Vo[f]|0,h=((0,Ur.rotr)(r,2)^(0,Ur.rotr)(r,13)^(0,Ur.rotr)(r,22))+(0,$0.Maj)(r,i,o)|0;u=l,l=c,c=a,a=s+d|0,s=o,o=i,i=r,r=d+h|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,o,s,a,c,l,u)}roundClean(){Vo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}wo.SHA256=nv;class pk extends nv{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}wo.sha256=(0,Ur.wrapConstructor)((()=>new nv)),wo.sha224=(0,Ur.wrapConstructor)((()=>new pk));var Df={},rv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Tr,n=No;class r extends n.Hash{constructor(o,s){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(o);const a=(0,n.toBytes)(s);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,l=new Uint8Array(c);l.set(a.length>c?o.create().update(a).digest():a);for(let u=0;u<l.length;u++)l[u]^=54;this.iHash.update(l),this.oHash=o.create();for(let u=0;u<l.length;u++)l[u]^=106;this.oHash.update(l),l.fill(0)}update(o){return(0,e.exists)(this),this.iHash.update(o),this}digestInto(o){(0,e.exists)(this),(0,e.bytes)(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:a,finished:c,destroyed:l,blockLen:u,outputLen:f}=this;return o.finished=c,o.destroyed=l,o.blockLen=u,o.outputLen=f,o.oHash=s._cloneInto(o.oHash),o.iHash=a._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(i,o,s)=>new r(i,o).update(s).digest(),t.hmac.create=(i,o)=>new r(i,o)})(rv);var iv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=h,t.weierstrass=function(g){const y=(function(R){const D=(0,e.validateBasic)(R);return r.validateObject(D,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...D})})(g),{Fp:v,n:m}=y,w=v.BYTES+1,E=2*v.BYTES+1;function S(R){return n.mod(R,m)}function O(R){return n.invert(R,m)}const{ProjectivePoint:F,normPrivateKeyToScalar:$,weierstrassEquation:U,isWithinCurveOrder:B}=h({...y,toBytes(R,D,H){const N=D.toAffine(),K=v.toBytes(N.x),z=r.concatBytes;return(0,i.abool)("isCompressed",H),H?z(Uint8Array.from([D.hasEvenY()?2:3]),K):z(Uint8Array.from([4]),K,v.toBytes(N.y))},fromBytes(R){const D=R.length,H=R[0],N=R.subarray(1);if(D!==w||H!==2&&H!==3){if(D===E&&H===4)return{x:v.fromBytes(N.subarray(0,v.BYTES)),y:v.fromBytes(N.subarray(v.BYTES,2*v.BYTES))};throw new Error(`Point of length ${D} was invalid. Expected ${w} compressed bytes or ${E} uncompressed bytes`)}{const K=r.bytesToNumberBE(N);if(!r.inRange(K,l,v.ORDER))throw new Error("Point is not on curve");const z=U(K);let Z;try{Z=v.sqrt(z)}catch(oe){const M=oe instanceof Error?": "+oe.message:"";throw new Error("Point is not on curve"+M)}return(1&H)==1!=((Z&l)===l)&&(Z=v.neg(Z)),{x:K,y:Z}}}}),Y=R=>r.bytesToHex(r.numberToBytesBE(R,y.nByteLength));function j(R){return R>m>>l}const L=(R,D,H)=>r.bytesToNumberBE(R.slice(D,H));class I{constructor(D,H,N){this.r=D,this.s=H,this.recovery=N,this.assertValidity()}static fromCompact(D){const H=y.nByteLength;return D=(0,i.ensureBytes)("compactSignature",D,2*H),new I(L(D,0,H),L(D,H,2*H))}static fromDER(D){const{r:H,s:N}=t.DER.toSig((0,i.ensureBytes)("DER",D));return new I(H,N)}assertValidity(){r.aInRange("r",this.r,l,m),r.aInRange("s",this.s,l,m)}addRecoveryBit(D){return new I(this.r,this.s,D)}recoverPublicKey(D){const{r:H,s:N,recovery:K}=this,z=b((0,i.ensureBytes)("msgHash",D));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const Z=K===2||K===3?H+y.n:H;if(Z>=v.ORDER)throw new Error("recovery id 2 or 3 invalid");const oe=(1&K)==0?"02":"03",M=F.fromHex(oe+Y(Z)),V=O(Z),X=S(-z*V),ie=S(N*V),te=F.BASE.multiplyAndAddUnsafe(M,X,ie);if(!te)throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return j(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,S(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return Y(this.r)+Y(this.s)}}const x={isValidPrivateKey(R){try{return $(R),!0}catch{return!1}},normPrivateKeyToScalar:$,randomPrivateKey:()=>{const R=n.getMinHashLength(y.n);return n.mapHashToField(y.randomBytes(R),y.n)},precompute:(R=8,D=F.BASE)=>(D._setWindowSize(R),D.multiply(BigInt(3)),D)};function P(R){const D=r.isBytes(R),H=typeof R=="string",N=(D||H)&&R.length;return D?N===w||N===E:H?N===2*w||N===2*E:R instanceof F}const G=y.bits2int||function(R){const D=r.bytesToNumberBE(R),H=8*R.length-y.nBitLength;return H>0?D>>BigInt(H):D},b=y.bits2int_modN||function(R){return S(G(R))},C=r.bitMask(y.nBitLength);function T(R){return r.aInRange(`num < 2^${y.nBitLength}`,R,c,C),r.numberToBytesBE(R,y.nByteLength)}function k(R,D,H=A){if(["recovered","canonical"].some((ne=>ne in H)))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:K}=y;let{lowS:z,prehash:Z,extraEntropy:oe}=H;z==null&&(z=!0),R=(0,i.ensureBytes)("msgHash",R),o(H),Z&&(R=(0,i.ensureBytes)("prehashed msgHash",N(R)));const M=b(R),V=$(D),X=[T(V),T(M)];if(oe!=null&&oe!==!1){const ne=oe===!0?K(v.BYTES):oe;X.push((0,i.ensureBytes)("extraEntropy",ne))}const ie=r.concatBytes(...X),te=M;return{seed:ie,k2sig:function(ne){const de=G(ne);if(!B(de))return;const le=O(de),J=F.BASE.multiply(de).toAffine(),ee=S(J.x);if(ee===c)return;const ue=S(le*S(te+ee*V));if(ue===c)return;let ae=(J.x===ee?0:2)|Number(J.y&l),ce=ue;return z&&j(ue)&&(ce=(function(xe){return j(xe)?S(-xe):xe})(ue),ae^=1),new I(ee,ce,ae)}}}const A={lowS:y.lowS,prehash:!1},_={lowS:y.lowS,prehash:!1};return F.BASE._setWindowSize(8),{CURVE:y,getPublicKey:function(R,D=!0){return F.fromPrivateKey(R).toRawBytes(D)},getSharedSecret:function(R,D,H=!0){if(P(R))throw new Error("first arg must be private key");if(!P(D))throw new Error("second arg must be public key");return F.fromHex(D).multiply($(R)).toRawBytes(H)},sign:function(R,D,H=A){const{seed:N,k2sig:K}=k(R,D,H),z=y;return r.createHmacDrbg(z.hash.outputLen,z.nByteLength,z.hmac)(N,K)},verify:function(R,D,H,N=_){const K=R;if(D=(0,i.ensureBytes)("msgHash",D),H=(0,i.ensureBytes)("publicKey",H),"strict"in N)throw new Error("options.strict was renamed to lowS");o(N);const{lowS:z,prehash:Z}=N;let oe,M;try{if(typeof K=="string"||r.isBytes(K))try{oe=I.fromDER(K)}catch(ee){if(!(ee instanceof t.DER.Err))throw ee;oe=I.fromCompact(K)}else{if(typeof K!="object"||typeof K.r!="bigint"||typeof K.s!="bigint")throw new Error("PARSE");{const{r:ee,s:ue}=K;oe=new I(ee,ue)}}M=F.fromHex(H)}catch(ee){if(ee.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(z&&oe.hasHighS())return!1;Z&&(D=y.hash(D));const{r:V,s:X}=oe,ie=b(D),te=O(X),ne=S(ie*te),de=S(V*te),le=F.BASE.multiplyAndAddUnsafe(M,ne,de)?.toAffine();return le?S(le.x)===V:!1},ProjectivePoint:F,Signature:I,utils:x}},t.SWUFpSqrtRatio=p,t.mapToCurveSimpleSWU=function(g,y){if(n.validateField(g),!g.isValid(y.A)||!g.isValid(y.B)||!g.isValid(y.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const v=p(g,y.Z);if(!g.isOdd)throw new Error("Fp.isOdd is not implemented!");return m=>{let w,E,S,O,F,$,U,B;w=g.sqr(m),w=g.mul(w,y.Z),E=g.sqr(w),E=g.add(E,w),S=g.add(E,g.ONE),S=g.mul(S,y.B),O=g.cmov(y.Z,g.neg(E),!g.eql(E,g.ZERO)),O=g.mul(O,y.A),E=g.sqr(S),$=g.sqr(O),F=g.mul($,y.A),E=g.add(E,F),E=g.mul(E,S),$=g.mul($,O),F=g.mul($,y.B),E=g.add(E,F),U=g.mul(w,S);const{isValid:Y,value:j}=v(E,$);B=g.mul(w,m),B=g.mul(B,j),U=g.cmov(U,S,Y),B=g.cmov(B,j,Y);const L=g.isOdd(m)===g.isOdd(B);return B=g.cmov(g.neg(B),B,L),U=g.div(U,O),{x:U,y:B}}};const e=Ha,n=yt,r=qe,i=qe;function o(g){g.lowS!==void 0&&(0,i.abool)("lowS",g.lowS),g.prehash!==void 0&&(0,i.abool)("prehash",g.prehash)}const{bytesToNumberBE:s,hexToBytes:a}=r;t.DER={Err:class extends Error{constructor(g=""){super(g)}},_tlv:{encode:(g,y)=>{const{Err:v}=t.DER;if(g<0||g>256)throw new v("tlv.encode: wrong tag");if(1&y.length)throw new v("tlv.encode: unpadded data");const m=y.length/2,w=r.numberToHexUnpadded(m);if(w.length/2&128)throw new v("tlv.encode: long form length too big");const E=m>127?r.numberToHexUnpadded(w.length/2|128):"";return`${r.numberToHexUnpadded(g)}${E}${w}${y}`},decode(g,y){const{Err:v}=t.DER;let m=0;if(g<0||g>256)throw new v("tlv.encode: wrong tag");if(y.length<2||y[m++]!==g)throw new v("tlv.decode: wrong tlv");const w=y[m++];let E=0;if(128&w){const O=127&w;if(!O)throw new v("tlv.decode(long): indefinite length not supported");if(O>4)throw new v("tlv.decode(long): byte length is too big");const F=y.subarray(m,m+O);if(F.length!==O)throw new v("tlv.decode: length bytes not complete");if(F[0]===0)throw new v("tlv.decode(long): zero leftmost byte");for(const $ of F)E=E<<8|$;if(m+=O,E<128)throw new v("tlv.decode(long): not minimal encoding")}else E=w;const S=y.subarray(m,m+E);if(S.length!==E)throw new v("tlv.decode: wrong value length");return{v:S,l:y.subarray(m+E)}}},_int:{encode(g){const{Err:y}=t.DER;if(g<c)throw new y("integer: negative integers are not allowed");let v=r.numberToHexUnpadded(g);if(8&Number.parseInt(v[0],16)&&(v="00"+v),1&v.length)throw new y("unexpected assertion");return v},decode(g){const{Err:y}=t.DER;if(128&g[0])throw new y("Invalid signature integer: negative");if(g[0]===0&&!(128&g[1]))throw new y("Invalid signature integer: unnecessary leading zero");return s(g)}},toSig(g){const{Err:y,_int:v,_tlv:m}=t.DER,w=typeof g=="string"?a(g):g;r.abytes(w);const{v:E,l:S}=m.decode(48,w);if(S.length)throw new y("Invalid signature: left bytes after parsing");const{v:O,l:F}=m.decode(2,E),{v:$,l:U}=m.decode(2,F);if(U.length)throw new y("Invalid signature: left bytes after parsing");return{r:v.decode(O),s:v.decode($)}},hexFromSig(g){const{_tlv:y,_int:v}=t.DER,m=`${y.encode(2,v.encode(g.r))}${y.encode(2,v.encode(g.s))}`;return y.encode(48,m)}};const c=BigInt(0),l=BigInt(1),u=BigInt(2),f=BigInt(3),d=BigInt(4);function h(g){const y=(function(L){const I=(0,e.validateBasic)(L);r.validateObject(I,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:x,Fp:P,a:G}=I;if(x){if(!P.eql(G,P.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof x!="object"||typeof x.beta!="bigint"||typeof x.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...I})})(g),{Fp:v}=y,m=n.Field(y.n,y.nBitLength),w=y.toBytes||((L,I,x)=>{const P=I.toAffine();return r.concatBytes(Uint8Array.from([4]),v.toBytes(P.x),v.toBytes(P.y))}),E=y.fromBytes||(L=>{const I=L.subarray(1);return{x:v.fromBytes(I.subarray(0,v.BYTES)),y:v.fromBytes(I.subarray(v.BYTES,2*v.BYTES))}});function S(L){const{a:I,b:x}=y,P=v.sqr(L),G=v.mul(P,L);return v.add(v.add(G,v.mul(L,I)),x)}if(!v.eql(v.sqr(y.Gy),S(y.Gx)))throw new Error("bad generator point: equation left != right");function O(L){const{allowedPrivateKeyLengths:I,nByteLength:x,wrapPrivateKey:P,n:G}=y;if(I&&typeof L!="bigint"){if(r.isBytes(L)&&(L=r.bytesToHex(L)),typeof L!="string"||!I.includes(L.length))throw new Error("Invalid key");L=L.padStart(2*x,"0")}let b;try{b=typeof L=="bigint"?L:r.bytesToNumberBE((0,i.ensureBytes)("private key",L,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof L}`)}return P&&(b=n.mod(b,G)),r.aInRange("private key",b,l,G),b}function F(L){if(!(L instanceof B))throw new Error("ProjectivePoint expected")}const $=(0,i.memoized)(((L,I)=>{const{px:x,py:P,pz:G}=L;if(v.eql(G,v.ONE))return{x,y:P};const b=L.is0();I==null&&(I=b?v.ONE:v.inv(G));const C=v.mul(x,I),T=v.mul(P,I),k=v.mul(G,I);if(b)return{x:v.ZERO,y:v.ZERO};if(!v.eql(k,v.ONE))throw new Error("invZ was invalid");return{x:C,y:T}})),U=(0,i.memoized)((L=>{if(L.is0()){if(y.allowInfinityPoint&&!v.is0(L.py))return;throw new Error("bad point: ZERO")}const{x:I,y:x}=L.toAffine();if(!v.isValid(I)||!v.isValid(x))throw new Error("bad point: x or y not FE");const P=v.sqr(x),G=S(I);if(!v.eql(P,G))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class B{constructor(I,x,P){if(this.px=I,this.py=x,this.pz=P,I==null||!v.isValid(I))throw new Error("x required");if(x==null||!v.isValid(x))throw new Error("y required");if(P==null||!v.isValid(P))throw new Error("z required");Object.freeze(this)}static fromAffine(I){const{x,y:P}=I||{};if(!I||!v.isValid(x)||!v.isValid(P))throw new Error("invalid affine point");if(I instanceof B)throw new Error("projective point not allowed");const G=b=>v.eql(b,v.ZERO);return G(x)&&G(P)?B.ZERO:new B(x,P,v.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const x=v.invertBatch(I.map((P=>P.pz)));return I.map(((P,G)=>P.toAffine(x[G]))).map(B.fromAffine)}static fromHex(I){const x=B.fromAffine(E((0,i.ensureBytes)("pointHex",I)));return x.assertValidity(),x}static fromPrivateKey(I){return B.BASE.multiply(O(I))}static msm(I,x){return(0,e.pippenger)(B,m,I,x)}_setWindowSize(I){j.setWindowSize(this,I)}assertValidity(){U(this)}hasEvenY(){const{y:I}=this.toAffine();if(v.isOdd)return!v.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){F(I);const{px:x,py:P,pz:G}=this,{px:b,py:C,pz:T}=I,k=v.eql(v.mul(x,T),v.mul(b,G)),A=v.eql(v.mul(P,T),v.mul(C,G));return k&&A}negate(){return new B(this.px,v.neg(this.py),this.pz)}double(){const{a:I,b:x}=y,P=v.mul(x,f),{px:G,py:b,pz:C}=this;let T=v.ZERO,k=v.ZERO,A=v.ZERO,_=v.mul(G,G),R=v.mul(b,b),D=v.mul(C,C),H=v.mul(G,b);return H=v.add(H,H),A=v.mul(G,C),A=v.add(A,A),T=v.mul(I,A),k=v.mul(P,D),k=v.add(T,k),T=v.sub(R,k),k=v.add(R,k),k=v.mul(T,k),T=v.mul(H,T),A=v.mul(P,A),D=v.mul(I,D),H=v.sub(_,D),H=v.mul(I,H),H=v.add(H,A),A=v.add(_,_),_=v.add(A,_),_=v.add(_,D),_=v.mul(_,H),k=v.add(k,_),D=v.mul(b,C),D=v.add(D,D),_=v.mul(D,H),T=v.sub(T,_),A=v.mul(D,R),A=v.add(A,A),A=v.add(A,A),new B(T,k,A)}add(I){F(I);const{px:x,py:P,pz:G}=this,{px:b,py:C,pz:T}=I;let k=v.ZERO,A=v.ZERO,_=v.ZERO;const R=y.a,D=v.mul(y.b,f);let H=v.mul(x,b),N=v.mul(P,C),K=v.mul(G,T),z=v.add(x,P),Z=v.add(b,C);z=v.mul(z,Z),Z=v.add(H,N),z=v.sub(z,Z),Z=v.add(x,G);let oe=v.add(b,T);return Z=v.mul(Z,oe),oe=v.add(H,K),Z=v.sub(Z,oe),oe=v.add(P,G),k=v.add(C,T),oe=v.mul(oe,k),k=v.add(N,K),oe=v.sub(oe,k),_=v.mul(R,Z),k=v.mul(D,K),_=v.add(k,_),k=v.sub(N,_),_=v.add(N,_),A=v.mul(k,_),N=v.add(H,H),N=v.add(N,H),K=v.mul(R,K),Z=v.mul(D,Z),N=v.add(N,K),K=v.sub(H,K),K=v.mul(R,K),Z=v.add(Z,K),H=v.mul(N,Z),A=v.add(A,H),H=v.mul(oe,Z),k=v.mul(z,k),k=v.sub(k,H),H=v.mul(z,N),_=v.mul(oe,_),_=v.add(_,H),new B(k,A,_)}subtract(I){return this.add(I.negate())}is0(){return this.equals(B.ZERO)}wNAF(I){return j.wNAFCached(this,I,B.normalizeZ)}multiplyUnsafe(I){r.aInRange("scalar",I,c,y.n);const x=B.ZERO;if(I===c)return x;if(I===l)return this;const{endo:P}=y;if(!P)return j.unsafeLadder(this,I);let{k1neg:G,k1:b,k2neg:C,k2:T}=P.splitScalar(I),k=x,A=x,_=this;for(;b>c||T>c;)b&l&&(k=k.add(_)),T&l&&(A=A.add(_)),_=_.double(),b>>=l,T>>=l;return G&&(k=k.negate()),C&&(A=A.negate()),A=new B(v.mul(A.px,P.beta),A.py,A.pz),k.add(A)}multiply(I){const{endo:x,n:P}=y;let G,b;if(r.aInRange("scalar",I,l,P),x){const{k1neg:C,k1:T,k2neg:k,k2:A}=x.splitScalar(I);let{p:_,f:R}=this.wNAF(T),{p:D,f:H}=this.wNAF(A);_=j.constTimeNegate(C,_),D=j.constTimeNegate(k,D),D=new B(v.mul(D.px,x.beta),D.py,D.pz),G=_.add(D),b=R.add(H)}else{const{p:C,f:T}=this.wNAF(I);G=C,b=T}return B.normalizeZ([G,b])[0]}multiplyAndAddUnsafe(I,x,P){const G=B.BASE,b=(T,k)=>k!==c&&k!==l&&T.equals(G)?T.multiply(k):T.multiplyUnsafe(k),C=b(this,x).add(b(I,P));return C.is0()?void 0:C}toAffine(I){return $(this,I)}isTorsionFree(){const{h:I,isTorsionFree:x}=y;if(I===l)return!0;if(x)return x(B,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:x}=y;return I===l?this:x?x(B,this):this.multiplyUnsafe(y.h)}toRawBytes(I=!0){return(0,i.abool)("isCompressed",I),this.assertValidity(),w(B,this,I)}toHex(I=!0){return(0,i.abool)("isCompressed",I),r.bytesToHex(this.toRawBytes(I))}}B.BASE=new B(y.Gx,y.Gy,v.ONE),B.ZERO=new B(v.ZERO,v.ONE,v.ZERO);const Y=y.nBitLength,j=(0,e.wNAF)(B,y.endo?Math.ceil(Y/2):Y);return{CURVE:y,ProjectivePoint:B,normPrivateKeyToScalar:O,weierstrassEquation:S,isWithinCurveOrder:function(L){return r.inRange(L,l,y.n)}}}function p(g,y){const v=g.ORDER;let m=c;for(let L=v-l;L%u===c;L/=u)m+=l;const w=m,E=u<<w-l-l,S=E*u,O=(v-l)/S,F=(O-l)/u,$=S-l,U=E,B=g.pow(y,O),Y=g.pow(y,(O+l)/u);let j=(L,I)=>{let x=B,P=g.pow(I,$),G=g.sqr(P);G=g.mul(G,I);let b=g.mul(L,G);b=g.pow(b,F),b=g.mul(b,P),P=g.mul(b,I),G=g.mul(b,L);let C=g.mul(G,P);b=g.pow(C,U);let T=g.eql(b,g.ONE);P=g.mul(G,Y),b=g.mul(C,x),G=g.cmov(P,G,T),C=g.cmov(b,C,T);for(let k=w;k>l;k--){let A=k-u;A=u<<A-l;let _=g.pow(C,A);const R=g.eql(_,g.ONE);P=g.mul(G,x),x=g.mul(x,x),_=g.mul(C,x),G=g.cmov(P,G,R),C=g.cmov(_,C,R)}return{isValid:T,value:G}};if(g.ORDER%d===f){const L=(g.ORDER-f)/d,I=g.sqrt(g.neg(y));j=(x,P)=>{let G=g.sqr(P);const b=g.mul(x,P);G=g.mul(G,b);let C=g.pow(G,L);C=g.mul(C,b);const T=g.mul(C,I),k=g.mul(g.sqr(C),P),A=g.eql(k,x);return{isValid:A,value:g.cmov(T,C,A)}}}return j}})(iv),Object.defineProperty(Df,"__esModule",{value:!0}),Df.getHash=Vw,Df.createCurve=function(t,e){const n=r=>(0,vk.weierstrass)({...t,...Vw(r)});return Object.freeze({...n(e),create:n})};const gk=rv,$w=No,vk=iv;function Vw(t){return{hash:t,hmac:(e,...n)=>(0,gk.hmac)(t,e,(0,$w.concatBytes)(...n)),randomBytes:$w.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=wo,n=No,r=Df,i=es,o=yt,s=qe,a=iv,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),f=BigInt(2),d=(b,C)=>(b+C/f)/C;function h(b){const C=c,T=BigInt(3),k=BigInt(6),A=BigInt(11),_=BigInt(22),R=BigInt(23),D=BigInt(44),H=BigInt(88),N=b*b*b%C,K=N*N*b%C,z=(0,o.pow2)(K,T,C)*K%C,Z=(0,o.pow2)(z,T,C)*K%C,oe=(0,o.pow2)(Z,f,C)*N%C,M=(0,o.pow2)(oe,A,C)*oe%C,V=(0,o.pow2)(M,_,C)*M%C,X=(0,o.pow2)(V,D,C)*V%C,ie=(0,o.pow2)(X,H,C)*X%C,te=(0,o.pow2)(ie,D,C)*V%C,ne=(0,o.pow2)(te,T,C)*K%C,de=(0,o.pow2)(ne,R,C)*M%C,le=(0,o.pow2)(de,k,C)*N%C,J=(0,o.pow2)(le,f,C);if(!p.eql(p.sqr(J),b))throw new Error("Cannot find square root");return J}const p=(0,o.Field)(c,void 0,void 0,{sqrt:h});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:b=>{const C=l,T=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),k=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),A=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),_=T,R=BigInt("0x100000000000000000000000000000000"),D=d(_*b,C),H=d(-k*b,C);let N=(0,o.mod)(b-D*T-H*A,C),K=(0,o.mod)(-D*k-H*_,C);const z=N>R,Z=K>R;if(z&&(N=C-N),Z&&(K=C-K),N>R||K>R)throw new Error("splitScalar: Endomorphism failed, k="+b);return{k1neg:z,k1:N,k2neg:Z,k2:K}}}},e.sha256);const g=BigInt(0),y={};function v(b,...C){let T=y[b];if(T===void 0){const k=(0,e.sha256)(Uint8Array.from(b,(A=>A.charCodeAt(0))));T=(0,s.concatBytes)(k,k),y[b]=T}return(0,e.sha256)((0,s.concatBytes)(T,...C))}const m=b=>b.toRawBytes(!0).slice(1),w=b=>(0,s.numberToBytesBE)(b,32),E=b=>(0,o.mod)(b,c),S=b=>(0,o.mod)(b,l),O=t.secp256k1.ProjectivePoint,F=(b,C,T)=>O.BASE.multiplyAndAddUnsafe(b,C,T);function $(b){let C=t.secp256k1.utils.normPrivateKeyToScalar(b),T=O.fromPrivateKey(C);return{scalar:T.hasEvenY()?C:S(-C),bytes:m(T)}}function U(b){(0,s.aInRange)("x",b,u,c);const C=E(b*b);let T=h(E(C*b+BigInt(7)));T%f!==g&&(T=E(-T));const k=new O(b,T,u);return k.assertValidity(),k}const B=s.bytesToNumberBE;function Y(...b){return S(B(v("BIP0340/challenge",...b)))}function j(b){return $(b).bytes}function L(b,C,T=(0,n.randomBytes)(32)){const k=(0,s.ensureBytes)("message",b),{bytes:A,scalar:_}=$(C),R=(0,s.ensureBytes)("auxRand",T,32),D=w(_^B(v("BIP0340/aux",R))),H=v("BIP0340/nonce",D,A,k),N=S(B(H));if(N===g)throw new Error("sign failed: k is zero");const{bytes:K,scalar:z}=$(N),Z=Y(K,A,k),oe=new Uint8Array(64);if(oe.set(K,0),oe.set(w(S(z+Z*_)),32),!I(oe,k,A))throw new Error("sign: Invalid signature produced");return oe}function I(b,C,T){const k=(0,s.ensureBytes)("signature",b,64),A=(0,s.ensureBytes)("message",C),_=(0,s.ensureBytes)("publicKey",T,32);try{const R=U(B(_)),D=B(k.subarray(0,32));if(!(0,s.inRange)(D,u,c))return!1;const H=B(k.subarray(32,64));if(!(0,s.inRange)(H,u,l))return!1;const N=Y(w(D),m(R),A),K=F(R,H,S(-N));return!(!K||!K.hasEvenY()||K.toAffine().x!==D)}catch{return!1}}t.schnorr={getPublicKey:j,sign:L,verify:I,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:U,pointToBytes:m,numberToBytesBE:s.numberToBytesBE,bytesToNumberBE:s.bytesToNumberBE,taggedHash:v,mod:o.mod}};const x=(0,i.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((b=>b.map((C=>BigInt(C)))))),P=(0,a.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),G=(0,i.createHasher)(t.secp256k1.ProjectivePoint,(b=>{const{x:C,y:T}=P(p.create(b[0]));return x(C,T)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=G.hashToCurve,t.encodeToCurve=G.encodeToCurve})(R3);var w1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=Mr;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(w1),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=Jg,n=Z_,r=R3,i=Wl,o=hn,s=w1;t.getValidSecret=function(){var u;do u=(0,e.randomBytes)(o.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(u));return u},t.isValidPrivateKey=function(u){return a((0,i.ellipticCurve)(),(function(f){return f.utils.isValidPrivateKey(u)}),(function(){return!0}),(function(){return!0}))},t.getPublicKey=function(u){return a((0,i.ellipticCurve)(),(function(f){return f.getPublicKey(u)}),(function(f){return f.getPublicKey(u)}),(function(f){return f.getPublicKey(u)}))},t.getSharedPoint=function(u,f,d){return a((0,i.ellipticCurve)(),(function(h){return h.getSharedSecret(u,f,d)}),(function(h){return h.getSharedSecret(u,f)}),(function(h){return l(h,u,f)}))},t.convertPublicKeyFormat=function(u,f){return a((0,i.ellipticCurve)(),(function(d){return d.getSharedSecret(BigInt(1),u,f)}),(function(){return u}),(function(){return u}))};function a(u,f,d,h){if(u==="secp256k1")return f(r.secp256k1);if(u==="x25519")return d(n.x25519);if(u==="ed25519")return h(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(u){var f=(0,s.decodeHex)(u);return a((0,i.ellipticCurve)(),(function(){return c(f)}),(function(){return f}),(function(){return f}))};var c=function(u){if(u.length===o.ETH_PUBLIC_KEY_SIZE){var f=new Uint8Array(1+u.length);return f.set([4]),f.set(u,1),f}return u},l=function(u,f,d){var h=u.utils.getExtendedPublicKey(f).scalar;return u.ExtendedPoint.fromHex(d).multiply(h).toRawBytes()}})(X_);var P3={},$a={};Object.defineProperty($a,"__esModule",{value:!0}),$a.hkdf=void 0,$a.extract=k3,$a.expand=M3;const b1=Tr,jw=No,N3=rv;function k3(t,e,n){return(0,b1.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,N3.hmac)(t,(0,jw.toBytes)(n),(0,jw.toBytes)(e))}const V0=new Uint8Array([0]),Kw=new Uint8Array;function M3(t,e,n,r=32){if((0,b1.hash)(t),(0,b1.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=Kw);const o=new Uint8Array(i*t.outputLen),s=N3.hmac.create(t,e),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let l=0;l<i;l++)V0[0]=l+1,a.update(l===0?Kw:c).update(n).update(V0).digestInto(c),o.set(c,t.outputLen*l),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),V0.fill(0),o.slice(0,r)}$a.hkdf=(t,e,n,r,i)=>M3(t,k3(t,e,n),r,i),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=Mr,n=$a,r=wo;t.deriveKey=function(i,o,s){return(0,n.hkdf)(r.sha256,i,o,s,32)},t.getSharedKey=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return(0,t.deriveKey)(e.concatBytes.apply(void 0,i))}})(P3);var Gw={},cc={},Vt={},Zs={};Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.polyval=Zs.ghash=void 0,Zs._toGHASHKey=D3;const Qs=Ln,Zn=Mr,so=16,ov=new Uint8Array(16),Ni=(0,Zn.u32)(ov),Kr=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function D3(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const i=t[r];t[r]=i>>>1|n,n=(1&i)<<7}return t[0]^=225&-e,t}class B3{constructor(e,n){this.blockLen=so,this.outputLen=so,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,Zn.toBytes)(e),(0,Qs.bytes)(e,16);const r=(0,Zn.createView)(e);let i=r.getUint32(0,!1),o=r.getUint32(4,!1),s=r.getUint32(8,!1),a=r.getUint32(12,!1);const c=[];for(let v=0;v<128;v++)c.push({s0:Kr(i),s1:Kr(o),s2:Kr(s),s3:Kr(a)}),{s0:i,s1:o,s2:s,s3:a}={s3:(f=s)<<31|(d=a)>>>1,s2:(u=o)<<31|f>>>1,s1:(l=i)<<31|u>>>1,s0:l>>>1^225<<24&-(1&d)};var l,u,f,d;const h=(v=>v>65536?8:v>1024?4:2)(n||1024);if(![1,2,4,8].includes(h))throw new Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;const p=128/h,g=this.windowSize=2**h,y=[];for(let v=0;v<p;v++)for(let m=0;m<g;m++){let w=0,E=0,S=0,O=0;for(let F=0;F<h;F++){if(!(m>>>h-F-1&1))continue;const{s0:$,s1:U,s2:B,s3:Y}=c[h*v+F];w^=$,E^=U,S^=B,O^=Y}y.push({s0:w,s1:E,s2:S,s3:O})}this.t=y}_updateBlock(e,n,r,i){e^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:o,t:s,windowSize:a}=this;let c=0,l=0,u=0,f=0;const d=(1<<o)-1;let h=0;for(const p of[e,n,r,i])for(let g=0;g<4;g++){const y=p>>>8*g&255;for(let v=8/o-1;v>=0;v--){const m=y>>>o*v&d,{s0:w,s1:E,s2:S,s3:O}=s[h*a+m];c^=w,l^=E,u^=S,f^=O,h+=1}}this.s0=c,this.s1=l,this.s2=u,this.s3=f}update(e){e=(0,Zn.toBytes)(e),(0,Qs.exists)(this);const n=(0,Zn.u32)(e),r=Math.floor(e.length/so),i=e.length%so;for(let o=0;o<r;o++)this._updateBlock(n[4*o+0],n[4*o+1],n[4*o+2],n[4*o+3]);return i&&(ov.set(e.subarray(r*so)),this._updateBlock(Ni[0],Ni[1],Ni[2],Ni[3]),(0,Zn.clean)(Ni)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,Qs.exists)(this),(0,Qs.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:o}=this,s=(0,Zn.u32)(e);return s[0]=n,s[1]=r,s[2]=i,s[3]=o,e}digest(){const e=new Uint8Array(so);return this.digestInto(e),this.destroy(),e}}class yk extends B3{constructor(e,n){e=(0,Zn.toBytes)(e);const r=D3((0,Zn.copyBytes)(e));super(r,n),(0,Zn.clean)(r)}update(e){e=(0,Zn.toBytes)(e),(0,Qs.exists)(this);const n=(0,Zn.u32)(e),r=e.length%so,i=Math.floor(e.length/so);for(let o=0;o<i;o++)this._updateBlock(Kr(n[4*o+3]),Kr(n[4*o+2]),Kr(n[4*o+1]),Kr(n[4*o+0]));return r&&(ov.set(e.subarray(i*so)),this._updateBlock(Kr(Ni[3]),Kr(Ni[2]),Kr(Ni[1]),Kr(Ni[0])),(0,Zn.clean)(Ni)),this}digestInto(e){(0,Qs.exists)(this),(0,Qs.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:o}=this,s=(0,Zn.u32)(e);return s[0]=n,s[1]=r,s[2]=i,s[3]=o,e.reverse()}}function zw(t){const e=(r,i)=>t(i,r.length).update((0,Zn.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,i)=>t(r,i),e}Zs.ghash=zw(((t,e)=>new B3(t,e))),Zs.polyval=zw(((t,e)=>new yk(t,e))),Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.unsafe=Vt.aeskwp=Vt.aeskw=Vt.siv=Vt.gcm=Vt.cfb=Vt.cbc=Vt.ecb=Vt.ctr=void 0,Vt.expandKeyLE=di,Vt.expandKeyDecLE=Yl;const nt=Ln,E1=Zs,be=Mr,mr=16,nf=new Uint8Array(mr),mk=283;function sv(t){return t<<1^mk&-(t>>7)}function Va(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=sv(t);return n}const x1=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=sv(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,be.clean)(t),e})(),wk=x1.map(((t,e)=>x1.indexOf(e))),bk=t=>t<<24|t>>>8,j0=t=>t<<8|t>>>24,Id=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function L3(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((l,u)=>e(t[u]))),r=n.map(j0),i=r.map(j0),o=i.map(j0),s=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let l=0;l<256;l++)for(let u=0;u<256;u++){const f=256*l+u;s[f]=n[l]^r[u],a[f]=i[l]^o[u],c[f]=t[l]<<8|t[u]}return{sbox:t,sbox2:c,T0:n,T1:r,T2:i,T3:o,T01:s,T23:a}}const av=L3(x1,(t=>Va(t,3)<<24|t<<16|t<<8|Va(t,2))),F3=L3(wk,(t=>Va(t,11)<<24|Va(t,13)<<16|Va(t,9)<<8|Va(t,14))),Ek=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=sv(n))t[e]=n;return t})();function di(t){(0,nt.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=av,r=[];(0,be.isAligned32)(t)||r.push(t=(0,be.copyBytes)(t));const i=(0,be.u32)(t),o=i.length,s=c=>Mi(n,c,c,c,c),a=new Uint32Array(e+28);a.set(i);for(let c=o;c<a.length;c++){let l=a[c-1];c%o==0?l=s(bk(l))^Ek[c/o-1]:o>6&&c%o==4&&(l=s(l)),a[c]=a[c-o]^l}return(0,be.clean)(...r),a}function Yl(t){const e=di(t),n=e.slice(),r=e.length,{sbox2:i}=av,{T0:o,T1:s,T2:a,T3:c}=F3;for(let l=0;l<r;l+=4)for(let u=0;u<4;u++)n[l+u]=e[r-l-4+u];(0,be.clean)(e);for(let l=4;l<r-4;l++){const u=n[l],f=Mi(i,u,u,u,u);n[l]=o[255&f]^s[f>>>8&255]^a[f>>>16&255]^c[f>>>24]}return n}function us(t,e,n,r,i,o){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|o>>>24&255]}function Mi(t,e,n,r,i){return t[255&e|65280&n]|t[r>>>16&255|i>>>16&65280]<<16}function Jn(t,e,n,r,i){const{sbox2:o,T01:s,T23:a}=av;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const f=t[c++]^us(s,a,e,n,r,i),d=t[c++]^us(s,a,n,r,i,e),h=t[c++]^us(s,a,r,i,e,n),p=t[c++]^us(s,a,i,e,n,r);e=f,n=d,r=h,i=p}return{s0:t[c++]^Mi(o,e,n,r,i),s1:t[c++]^Mi(o,n,r,i,e),s2:t[c++]^Mi(o,r,i,e,n),s3:t[c++]^Mi(o,i,e,n,r)}}function Xl(t,e,n,r,i){const{sbox2:o,T01:s,T23:a}=F3;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const f=t[c++]^us(s,a,e,i,r,n),d=t[c++]^us(s,a,n,e,i,r),h=t[c++]^us(s,a,r,n,e,i),p=t[c++]^us(s,a,i,r,n,e);e=f,n=d,r=h,i=p}return{s0:t[c++]^Mi(o,e,i,r,n),s1:t[c++]^Mi(o,n,e,i,r),s2:t[c++]^Mi(o,r,n,e,i),s3:t[c++]^Mi(o,i,r,n,e)}}function lc(t,e){if(e===void 0)return new Uint8Array(t);if((0,nt.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,be.isAligned32)(e))throw new Error("unaligned dst");return e}function U3(t,e,n,r){(0,nt.bytes)(e,mr),(0,nt.bytes)(n);const i=n.length;r=lc(i,r);const o=e,s=(0,be.u32)(o);let{s0:a,s1:c,s2:l,s3:u}=Jn(t,s[0],s[1],s[2],s[3]);const f=(0,be.u32)(n),d=(0,be.u32)(r);for(let p=0;p+4<=f.length;p+=4){d[p+0]=f[p+0]^a,d[p+1]=f[p+1]^c,d[p+2]=f[p+2]^l,d[p+3]=f[p+3]^u;let g=1;for(let y=o.length-1;y>=0;y--)g=g+(255&o[y])|0,o[y]=255&g,g>>>=8;({s0:a,s1:c,s2:l,s3:u}=Jn(t,s[0],s[1],s[2],s[3]))}const h=mr*Math.floor(f.length/4);if(h<i){const p=new Uint32Array([a,c,l,u]),g=(0,be.u8)(p);for(let y=h,v=0;y<i;y++,v++)r[y]=n[y]^g[v];(0,be.clean)(p)}return r}function ja(t,e,n,r,i){(0,nt.bytes)(n,mr),(0,nt.bytes)(r),i=lc(r.length,i);const o=n,s=(0,be.u32)(o),a=(0,be.createView)(o),c=(0,be.u32)(r),l=(0,be.u32)(i),u=e?0:12,f=r.length;let d=a.getUint32(u,e),{s0:h,s1:p,s2:g,s3:y}=Jn(t,s[0],s[1],s[2],s[3]);for(let m=0;m+4<=c.length;m+=4)l[m+0]=c[m+0]^h,l[m+1]=c[m+1]^p,l[m+2]=c[m+2]^g,l[m+3]=c[m+3]^y,d=d+1>>>0,a.setUint32(u,d,e),{s0:h,s1:p,s2:g,s3:y}=Jn(t,s[0],s[1],s[2],s[3]);const v=mr*Math.floor(c.length/4);if(v<f){const m=new Uint32Array([h,p,g,y]),w=(0,be.u8)(m);for(let E=v,S=0;E<f;E++,S++)i[E]=r[E]^w[S];(0,be.clean)(m)}return i}function Ww(t){if((0,nt.bytes)(t),t.length%mr!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function qw(t,e,n){(0,nt.bytes)(t);let r=t.length;const i=r%mr;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,be.isAligned32)(t)||(t=(0,be.copyBytes)(t));const o=(0,be.u32)(t);if(e){let a=mr-i;a||(a=mr),r+=a}const s=lc(r,n);return{b:o,o:(0,be.u32)(s),out:s}}function Yw(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const i=t.subarray(0,-r);for(let o=0;o<r;o++)if(t[n-o-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function Xw(t){const e=new Uint8Array(16),n=(0,be.u32)(e);e.set(t);const r=mr-t.length;for(let i=mr-r;i<mr;i++)e[i]=r;return n}function H3(t,e,n,r,i){const o=i==null?0:i.length,s=t.create(n,r.length+o);i&&s.update(i),s.update(r);const a=new Uint8Array(16),c=(0,be.createView)(a);i&&(0,be.setBigUint64)(c,0,BigInt(8*o),e),(0,be.setBigUint64)(c,8,BigInt(8*r.length),e),s.update(a);const l=s.digest();return(0,be.clean)(a),l}Vt.ctr=(0,be.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e){function n(r,i){if((0,nt.bytes)(r),i!==void 0&&((0,nt.bytes)(i),!(0,be.isAligned32)(i)))throw new Error("unaligned destination");const o=di(t),s=(0,be.copyBytes)(e),a=[o,s];(0,be.isAligned32)(r)||a.push(r=(0,be.copyBytes)(r));const c=U3(o,s,r,i);return(0,be.clean)(...a),c}return(0,nt.bytes)(t),(0,nt.bytes)(e,mr),{encrypt:(r,i)=>n(r,i),decrypt:(r,i)=>n(r,i)}})),Vt.ecb=(0,be.wrapCipher)({blockSize:16},(function(t,e={}){(0,nt.bytes)(t);const n=!e.disablePadding;return{encrypt(r,i){const{b:o,o:s,out:a}=qw(r,n,i),c=di(t);let l=0;for(;l+4<=o.length;){const{s0:u,s1:f,s2:d,s3:h}=Jn(c,o[l+0],o[l+1],o[l+2],o[l+3]);s[l++]=u,s[l++]=f,s[l++]=d,s[l++]=h}if(n){const u=Xw(r.subarray(4*l)),{s0:f,s1:d,s2:h,s3:p}=Jn(c,u[0],u[1],u[2],u[3]);s[l++]=f,s[l++]=d,s[l++]=h,s[l++]=p}return(0,be.clean)(c),a},decrypt(r,i){Ww(r);const o=Yl(t),s=lc(r.length,i),a=[o];(0,be.isAligned32)(r)||a.push(r=(0,be.copyBytes)(r));const c=(0,be.u32)(r),l=(0,be.u32)(s);for(let u=0;u+4<=c.length;){const{s0:f,s1:d,s2:h,s3:p}=Xl(o,c[u+0],c[u+1],c[u+2],c[u+3]);l[u++]=f,l[u++]=d,l[u++]=h,l[u++]=p}return(0,be.clean)(...a),Yw(s,n)}}})),Vt.cbc=(0,be.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e,n={}){(0,nt.bytes)(t),(0,nt.bytes)(e,16);const r=!n.disablePadding;return{encrypt(i,o){const s=di(t),{b:a,o:c,out:l}=qw(i,r,o);let u=e;const f=[s];(0,be.isAligned32)(u)||f.push(u=(0,be.copyBytes)(u));const d=(0,be.u32)(u);let h=d[0],p=d[1],g=d[2],y=d[3],v=0;for(;v+4<=a.length;)h^=a[v+0],p^=a[v+1],g^=a[v+2],y^=a[v+3],{s0:h,s1:p,s2:g,s3:y}=Jn(s,h,p,g,y),c[v++]=h,c[v++]=p,c[v++]=g,c[v++]=y;if(r){const m=Xw(i.subarray(4*v));h^=m[0],p^=m[1],g^=m[2],y^=m[3],{s0:h,s1:p,s2:g,s3:y}=Jn(s,h,p,g,y),c[v++]=h,c[v++]=p,c[v++]=g,c[v++]=y}return(0,be.clean)(...f),l},decrypt(i,o){Ww(i);const s=Yl(t);let a=e;const c=[s];(0,be.isAligned32)(a)||c.push(a=(0,be.copyBytes)(a));const l=(0,be.u32)(a),u=lc(i.length,o);(0,be.isAligned32)(i)||c.push(i=(0,be.copyBytes)(i));const f=(0,be.u32)(i),d=(0,be.u32)(u);let h=l[0],p=l[1],g=l[2],y=l[3];for(let v=0;v+4<=f.length;){const m=h,w=p,E=g,S=y;h=f[v+0],p=f[v+1],g=f[v+2],y=f[v+3];const{s0:O,s1:F,s2:$,s3:U}=Xl(s,h,p,g,y);d[v++]=O^m,d[v++]=F^w,d[v++]=$^E,d[v++]=U^S}return(0,be.clean)(...c),Yw(u,r)}}})),Vt.cfb=(0,be.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e){function n(r,i,o){(0,nt.bytes)(r);const s=r.length;o=lc(s,o);const a=di(t);let c=e;const l=[a];(0,be.isAligned32)(c)||l.push(c=(0,be.copyBytes)(c)),(0,be.isAligned32)(r)||l.push(r=(0,be.copyBytes)(r));const u=(0,be.u32)(r),f=(0,be.u32)(o),d=i?f:u,h=(0,be.u32)(c);let p=h[0],g=h[1],y=h[2],v=h[3];for(let w=0;w+4<=u.length;){const{s0:E,s1:S,s2:O,s3:F}=Jn(a,p,g,y,v);f[w+0]=u[w+0]^E,f[w+1]=u[w+1]^S,f[w+2]=u[w+2]^O,f[w+3]=u[w+3]^F,p=d[w++],g=d[w++],y=d[w++],v=d[w++]}const m=mr*Math.floor(u.length/4);if(m<s){({s0:p,s1:g,s2:y,s3:v}=Jn(a,p,g,y,v));const w=(0,be.u8)(new Uint32Array([p,g,y,v]));for(let E=m,S=0;E<s;E++,S++)o[E]=r[E]^w[S];(0,be.clean)(w)}return(0,be.clean)(...l),o}return(0,nt.bytes)(t),(0,nt.bytes)(e,16),{encrypt:(r,i)=>n(r,!0,i),decrypt:(r,i)=>n(r,!1,i)}})),Vt.gcm=(0,be.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(t,e,n){if((0,nt.bytes)(t),(0,nt.bytes)(e),n!==void 0&&(0,nt.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function i(s,a,c){const l=H3(E1.ghash,!1,s,c,n);for(let u=0;u<a.length;u++)l[u]^=a[u];return l}function o(){const s=di(t),a=nf.slice(),c=nf.slice();if(ja(s,!1,c,c,a),e.length===12)c.set(e);else{const l=nf.slice(),u=(0,be.createView)(l);(0,be.setBigUint64)(u,8,BigInt(8*e.length),!1);const f=E1.ghash.create(a).update(e).update(l);f.digestInto(c),f.destroy()}return{xk:s,authKey:a,counter:c,tagMask:ja(s,!1,c,nf)}}return{encrypt(s){(0,nt.bytes)(s);const{xk:a,authKey:c,counter:l,tagMask:u}=o(),f=new Uint8Array(s.length+r),d=[a,c,l,u];(0,be.isAligned32)(s)||d.push(s=(0,be.copyBytes)(s)),ja(a,!1,l,s,f);const h=i(c,u,f.subarray(0,f.length-r));return d.push(h),f.set(h,s.length),(0,be.clean)(...d),f},decrypt(s){if((0,nt.bytes)(s),s.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:a,authKey:c,counter:l,tagMask:u}=o(),f=[a,c,u,l];(0,be.isAligned32)(s)||f.push(s=(0,be.copyBytes)(s));const d=s.subarray(0,-16),h=s.subarray(-16),p=i(c,u,d);if(f.push(p),!(0,be.equalBytes)(p,h))throw new Error("aes/gcm: invalid ghash tag");const g=ja(a,!1,l,d);return(0,be.clean)(...f),g}}}));const rf=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function $3(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function V3(t,e){if((0,nt.bytes)(e,16),!$3(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,be.u32)(e);let{s0:r,s1:i,s2:o,s3:s}=Jn(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=o,n[3]=s,e}function j3(t,e){if((0,nt.bytes)(e,16),!$3(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,be.u32)(e);let{s0:r,s1:i,s2:o,s3:s}=Xl(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=o,n[3]=s,e}Vt.siv=(0,be.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(t,e,n){const r=rf("AAD",0,68719476736),i=rf("plaintext",0,2**36),o=rf("nonce",12,12),s=rf("ciphertext",16,2**36+16);function a(){const u=di(t),f=new Uint8Array(t.length),d=new Uint8Array(16),h=[u,f];let p=e;(0,be.isAligned32)(p)||h.push(p=(0,be.copyBytes)(p));const g=(0,be.u32)(p);let y=0,v=g[0],m=g[1],w=g[2],E=0;for(const O of[d,f].map(be.u32)){const F=(0,be.u32)(O);for(let $=0;$<F.length;$+=2){const{s0:U,s1:B}=Jn(u,y,v,m,w);F[$+0]=U,F[$+1]=B,y=++E}}const S={authKey:d,encKey:di(f)};return(0,be.clean)(...h),S}function c(u,f,d){const h=H3(E1.polyval,!0,f,d,n);for(let w=0;w<12;w++)h[w]^=e[w];h[15]&=127;const p=(0,be.u32)(h);let g=p[0],y=p[1],v=p[2],m=p[3];return{s0:g,s1:y,s2:v,s3:m}=Jn(u,g,y,v,m),p[0]=g,p[1]=y,p[2]=v,p[3]=m,h}function l(u,f,d){let h=(0,be.copyBytes)(f);h[15]|=128;const p=ja(u,!0,h,d);return(0,be.clean)(h),p}return(0,nt.bytes)(t,16,24,32),(0,nt.bytes)(e),o(e.length),n!==void 0&&((0,nt.bytes)(n),r(n.length)),{encrypt(u){(0,nt.bytes)(u),i(u.length);const{encKey:f,authKey:d}=a(),h=c(f,d,u),p=[f,d,h];(0,be.isAligned32)(u)||p.push(u=(0,be.copyBytes)(u));const g=new Uint8Array(u.length+16);return g.set(h,u.length),g.set(l(f,h,u)),(0,be.clean)(...p),g},decrypt(u){(0,nt.bytes)(u),s(u.length);const f=u.subarray(-16),{encKey:d,authKey:h}=a(),p=[d,h];(0,be.isAligned32)(u)||p.push(u=(0,be.copyBytes)(u));const g=l(d,f,u.subarray(0,-16)),y=c(d,h,g);if(p.push(y),!(0,be.equalBytes)(f,y))throw(0,be.clean)(...p),new Error("invalid polyval tag");return(0,be.clean)(...p),g}}}));const Td={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=di(t);if(e.length===16)V3(n,e);else{const r=(0,be.u32)(e);let i=r[0],o=r[1];for(let s=0,a=1;s<6;s++)for(let c=2;c<r.length;c+=2,a++){const{s0:l,s1:u,s2:f,s3:d}=Jn(n,i,o,r[c],r[c+1]);i=l,o=u^Id(a),r[c]=f,r[c+1]=d}r[0]=i,r[1]=o}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=Yl(t),r=e.length/8-1;if(r===1)j3(n,e);else{const i=(0,be.u32)(e);let o=i[0],s=i[1];for(let a=0,c=6*r;a<6;a++)for(let l=2*r;l>=1;l-=2,c--){s^=Id(c);const{s0:u,s1:f,s2:d,s3:h}=Xl(n,o,s,i[l],i[l+1]);o=u,s=f,i[l]=d,i[l+1]=h}i[0]=o,i[1]=s}n.fill(0)}},Zw=new Uint8Array(8).fill(166);Vt.aeskw=(0,be.wrapCipher)({blockSize:8},(t=>({encrypt(e){if((0,nt.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,be.concatBytes)(Zw,e);return Td.encrypt(t,n),n},decrypt(e){if((0,nt.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,be.copyBytes)(e);if(Td.decrypt(t,n),!(0,be.equalBytes)(n.subarray(0,8),Zw))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}})));const Qw=2790873510;Vt.aeskwp=(0,be.wrapCipher)({blockSize:8},(t=>({encrypt(e){if((0,nt.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const i=(0,be.u32)(r);return i[0]=Qw,i[1]=Id(e.length),Td.encrypt(t,r),r},decrypt(e){if((0,nt.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,be.copyBytes)(e),r=(0,be.u32)(n);Td.decrypt(t,n);const i=Id(r[1])>>>0,o=8*Math.ceil(i/8);if(r[0]!==Qw||n.length-8!==o)throw new Error("integrity check failed");for(let s=i;s<o;s++)if(n[8+s]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}}))),Vt.unsafe={expandKeyLE:di,expandKeyDecLE:Yl,encrypt:Jn,decrypt:Xl,encryptBlock:V3,decryptBlock:j3,ctrCounter:U3,ctr32:ja},Object.defineProperty(cc,"__esModule",{value:!0}),cc.aes256cbc=cc.aes256gcm=void 0;var K3=Vt;cc.aes256gcm=function(t,e,n){return(0,K3.gcm)(t,e,n)};cc.aes256cbc=function(t,e,n){return(0,K3.cbc)(t,e)};var Od={},G3={},Ka={};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.sigma=void 0,Ka.rotl=function(t,e){return t<<e|t>>>32-e},Ka.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=(0,Hr.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,Qi.number)(i),(0,Qi.number)(s),(0,Qi.bool)(o),(0,Qi.bool)(n),(a,c,l,u,f=0)=>{(0,Qi.bytes)(a),(0,Qi.bytes)(c),(0,Qi.bytes)(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),(0,Qi.bytes)(u),(0,Qi.number)(f),f<0||f>=Jw)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const h=[];let p,g,y=a.length;if(y===32)h.push(p=(0,Hr.copyBytes)(a)),g=W3;else{if(y!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${y}`);p=new Uint8Array(32),p.set(a),p.set(a,16),g=_k,h.push(p)}K0(c)||h.push(c=(0,Hr.copyBytes)(c));const v=(0,Hr.u32)(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,v,(0,Hr.u32)(c.subarray(0,16)),v),c=c.subarray(16)}const m=16-i;if(m!==c.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const E=new Uint8Array(12);E.set(c,o?0:12-c.length),c=E,h.push(c)}const w=(0,Hr.u32)(c);return(function(E,S,O,F,$,U,B,Y){const j=$.length,L=new Uint8Array(of),I=(0,Hr.u32)(L),x=K0($)&&K0(U),P=x?(0,Hr.u32)($):e2,G=x?(0,Hr.u32)(U):e2;for(let b=0;b<j;B++){if(E(S,O,F,I,B,Y),B>=Jw)throw new Error("arx: counter overflow");const C=Math.min(of,j-b);if(x&&C===of){const T=b/4;if(b%4!=0)throw new Error("arx: invalid block position");for(let k,A=0;A<Ck;A++)k=T+A,G[k]=P[k]^I[A];b+=of}else{for(let T,k=0;k<C;k++)T=b+k,U[T]=$[T]^L[k];b+=C}}})(t,g,v,w,l,u,f,s),(0,Hr.clean)(...h),u}};const Qi=Ln,Hr=Mr,z3=t=>Uint8Array.from(t.split("").map((e=>e.charCodeAt(0)))),xk=z3("expand 16-byte k"),Ak=z3("expand 32-byte k"),_k=(0,Hr.u32)(xk),W3=(0,Hr.u32)(Ak);function K0(t){return t.byteOffset%4==0}Ka.sigma=W3.slice();const of=64,Ck=16,Jw=2**32-1,e2=new Uint32Array;var Al={};Object.defineProperty(Al,"__esModule",{value:!0}),Al.poly1305=void 0,Al.wrapConstructorWithKey=q3;const sf=Ln,ol=Mr,xn=(t,e)=>255&t[e++]|(255&t[e++])<<8;class Sk{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,ol.toBytes)(e),(0,sf.bytes)(e,32);const n=xn(e,0),r=xn(e,2),i=xn(e,4),o=xn(e,6),s=xn(e,8),a=xn(e,10),c=xn(e,12),l=xn(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|o<<9),this.r[4]=255&(o>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=xn(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:o,r:s}=this,a=s[0],c=s[1],l=s[2],u=s[3],f=s[4],d=s[5],h=s[6],p=s[7],g=s[8],y=s[9],v=xn(e,n+0),m=xn(e,n+2),w=xn(e,n+4),E=xn(e,n+6),S=xn(e,n+8),O=xn(e,n+10),F=xn(e,n+12),$=xn(e,n+14);let U=o[0]+(8191&v),B=o[1]+(8191&(v>>>13|m<<3)),Y=o[2]+(8191&(m>>>10|w<<6)),j=o[3]+(8191&(w>>>7|E<<9)),L=o[4]+(8191&(E>>>4|S<<12)),I=o[5]+(S>>>1&8191),x=o[6]+(8191&(S>>>14|O<<2)),P=o[7]+(8191&(O>>>11|F<<5)),G=o[8]+(8191&(F>>>8|$<<8)),b=o[9]+($>>>5|i),C=0,T=C+U*a+B*(5*y)+Y*(5*g)+j*(5*p)+L*(5*h);C=T>>>13,T&=8191,T+=I*(5*d)+x*(5*f)+P*(5*u)+G*(5*l)+b*(5*c),C+=T>>>13,T&=8191;let k=C+U*c+B*a+Y*(5*y)+j*(5*g)+L*(5*p);C=k>>>13,k&=8191,k+=I*(5*h)+x*(5*d)+P*(5*f)+G*(5*u)+b*(5*l),C+=k>>>13,k&=8191;let A=C+U*l+B*c+Y*a+j*(5*y)+L*(5*g);C=A>>>13,A&=8191,A+=I*(5*p)+x*(5*h)+P*(5*d)+G*(5*f)+b*(5*u),C+=A>>>13,A&=8191;let _=C+U*u+B*l+Y*c+j*a+L*(5*y);C=_>>>13,_&=8191,_+=I*(5*g)+x*(5*p)+P*(5*h)+G*(5*d)+b*(5*f),C+=_>>>13,_&=8191;let R=C+U*f+B*u+Y*l+j*c+L*a;C=R>>>13,R&=8191,R+=I*(5*y)+x*(5*g)+P*(5*p)+G*(5*h)+b*(5*d),C+=R>>>13,R&=8191;let D=C+U*d+B*f+Y*u+j*l+L*c;C=D>>>13,D&=8191,D+=I*a+x*(5*y)+P*(5*g)+G*(5*p)+b*(5*h),C+=D>>>13,D&=8191;let H=C+U*h+B*d+Y*f+j*u+L*l;C=H>>>13,H&=8191,H+=I*c+x*a+P*(5*y)+G*(5*g)+b*(5*p),C+=H>>>13,H&=8191;let N=C+U*p+B*h+Y*d+j*f+L*u;C=N>>>13,N&=8191,N+=I*l+x*c+P*a+G*(5*y)+b*(5*g),C+=N>>>13,N&=8191;let K=C+U*g+B*p+Y*h+j*d+L*f;C=K>>>13,K&=8191,K+=I*u+x*l+P*c+G*a+b*(5*y),C+=K>>>13,K&=8191;let z=C+U*y+B*g+Y*p+j*h+L*d;C=z>>>13,z&=8191,z+=I*f+x*u+P*l+G*c+b*a,C+=z>>>13,z&=8191,C=(C<<2)+C|0,C=C+T|0,T=8191&C,C>>>=13,k+=C,o[0]=T,o[1]=k,o[2]=A,o[3]=_,o[4]=R,o[5]=D,o[6]=H,o[7]=N,o[8]=K,o[9]=z}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let o=(1^i)-1;for(let a=0;a<10;a++)r[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+n[0];e[0]=65535&s;for(let a=1;a<8;a++)s=(e[a]+n[a]|0)+(s>>>16)|0,e[a]=65535&s;(0,ol.clean)(r)}update(e){(0,sf.exists)(this);const{buffer:n,blockLen:r}=this,i=(e=(0,ol.toBytes)(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=i-o;o+=r)this.process(e,o)}return this}destroy(){(0,ol.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,sf.exists)(this),(0,sf.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=r[s]>>>0,e[o++]=r[s]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function q3(t){const e=(r,i)=>t(i).update((0,ol.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}Al.poly1305=q3((t=>new Sk(t))),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=s;const e=Ka,n=Ln,r=Al,i=Mr;function o(f,d,h,p,g,y=20){let v=f[0],m=f[1],w=f[2],E=f[3],S=d[0],O=d[1],F=d[2],$=d[3],U=d[4],B=d[5],Y=d[6],j=d[7],L=g,I=h[0],x=h[1],P=h[2],G=v,b=m,C=w,T=E,k=S,A=O,_=F,R=$,D=U,H=B,N=Y,K=j,z=L,Z=I,oe=x,M=P;for(let X=0;X<y;X+=2)G=G+k|0,z=(0,e.rotl)(z^G,16),D=D+z|0,k=(0,e.rotl)(k^D,12),G=G+k|0,z=(0,e.rotl)(z^G,8),D=D+z|0,k=(0,e.rotl)(k^D,7),b=b+A|0,Z=(0,e.rotl)(Z^b,16),H=H+Z|0,A=(0,e.rotl)(A^H,12),b=b+A|0,Z=(0,e.rotl)(Z^b,8),H=H+Z|0,A=(0,e.rotl)(A^H,7),C=C+_|0,oe=(0,e.rotl)(oe^C,16),N=N+oe|0,_=(0,e.rotl)(_^N,12),C=C+_|0,oe=(0,e.rotl)(oe^C,8),N=N+oe|0,_=(0,e.rotl)(_^N,7),T=T+R|0,M=(0,e.rotl)(M^T,16),K=K+M|0,R=(0,e.rotl)(R^K,12),T=T+R|0,M=(0,e.rotl)(M^T,8),K=K+M|0,R=(0,e.rotl)(R^K,7),G=G+A|0,M=(0,e.rotl)(M^G,16),N=N+M|0,A=(0,e.rotl)(A^N,12),G=G+A|0,M=(0,e.rotl)(M^G,8),N=N+M|0,A=(0,e.rotl)(A^N,7),b=b+_|0,z=(0,e.rotl)(z^b,16),K=K+z|0,_=(0,e.rotl)(_^K,12),b=b+_|0,z=(0,e.rotl)(z^b,8),K=K+z|0,_=(0,e.rotl)(_^K,7),C=C+R|0,Z=(0,e.rotl)(Z^C,16),D=D+Z|0,R=(0,e.rotl)(R^D,12),C=C+R|0,Z=(0,e.rotl)(Z^C,8),D=D+Z|0,R=(0,e.rotl)(R^D,7),T=T+k|0,oe=(0,e.rotl)(oe^T,16),H=H+oe|0,k=(0,e.rotl)(k^H,12),T=T+k|0,oe=(0,e.rotl)(oe^T,8),H=H+oe|0,k=(0,e.rotl)(k^H,7);let V=0;p[V++]=v+G|0,p[V++]=m+b|0,p[V++]=w+C|0,p[V++]=E+T|0,p[V++]=S+k|0,p[V++]=O+A|0,p[V++]=F+_|0,p[V++]=$+R|0,p[V++]=U+D|0,p[V++]=B+H|0,p[V++]=Y+N|0,p[V++]=j+K|0,p[V++]=L+z|0,p[V++]=I+Z|0,p[V++]=x+oe|0,p[V++]=P+M|0}function s(f,d,h,p){let g=f[0],y=f[1],v=f[2],m=f[3],w=d[0],E=d[1],S=d[2],O=d[3],F=d[4],$=d[5],U=d[6],B=d[7],Y=h[0],j=h[1],L=h[2],I=h[3];for(let P=0;P<20;P+=2)g=g+w|0,Y=(0,e.rotl)(Y^g,16),F=F+Y|0,w=(0,e.rotl)(w^F,12),g=g+w|0,Y=(0,e.rotl)(Y^g,8),F=F+Y|0,w=(0,e.rotl)(w^F,7),y=y+E|0,j=(0,e.rotl)(j^y,16),$=$+j|0,E=(0,e.rotl)(E^$,12),y=y+E|0,j=(0,e.rotl)(j^y,8),$=$+j|0,E=(0,e.rotl)(E^$,7),v=v+S|0,L=(0,e.rotl)(L^v,16),U=U+L|0,S=(0,e.rotl)(S^U,12),v=v+S|0,L=(0,e.rotl)(L^v,8),U=U+L|0,S=(0,e.rotl)(S^U,7),m=m+O|0,I=(0,e.rotl)(I^m,16),B=B+I|0,O=(0,e.rotl)(O^B,12),m=m+O|0,I=(0,e.rotl)(I^m,8),B=B+I|0,O=(0,e.rotl)(O^B,7),g=g+E|0,I=(0,e.rotl)(I^g,16),U=U+I|0,E=(0,e.rotl)(E^U,12),g=g+E|0,I=(0,e.rotl)(I^g,8),U=U+I|0,E=(0,e.rotl)(E^U,7),y=y+S|0,Y=(0,e.rotl)(Y^y,16),B=B+Y|0,S=(0,e.rotl)(S^B,12),y=y+S|0,Y=(0,e.rotl)(Y^y,8),B=B+Y|0,S=(0,e.rotl)(S^B,7),v=v+O|0,j=(0,e.rotl)(j^v,16),F=F+j|0,O=(0,e.rotl)(O^F,12),v=v+O|0,j=(0,e.rotl)(j^v,8),F=F+j|0,O=(0,e.rotl)(O^F,7),m=m+w|0,L=(0,e.rotl)(L^m,16),$=$+L|0,w=(0,e.rotl)(w^$,12),m=m+w|0,L=(0,e.rotl)(L^m,8),$=$+L|0,w=(0,e.rotl)(w^$,7);let x=0;p[x++]=g,p[x++]=y,p[x++]=v,p[x++]=m,p[x++]=Y,p[x++]=j,p[x++]=L,p[x++]=I}t.chacha20orig=(0,e.createCipher)(o,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(o,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(o,{counterRight:!1,counterLength:8,extendNonceFn:s,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(o,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(o,{counterRight:!1,counterLength:4,rounds:12});const a=new Uint8Array(16),c=(f,d)=>{f.update(d);const h=d.length%16;h&&f.update(a.subarray(h))},l=new Uint8Array(32);function u(f,d,h,p,g){const y=f(d,h,l),v=r.poly1305.create(y);g&&c(v,g),c(v,p);const m=new Uint8Array(16),w=(0,i.createView)(m);(0,i.setBigUint64)(w,0,BigInt(g?g.length:0),!0),(0,i.setBigUint64)(w,8,BigInt(p.length),!0),v.update(m);const E=v.digest();return(0,i.clean)(y,m),E}t._poly1305_aead=f=>(d,h,p)=>((0,n.bytes)(d,32),(0,n.bytes)(h),{encrypt(y,v){const m=y.length,w=m+16;v?(0,n.bytes)(v,w):v=new Uint8Array(w),f(d,h,y,v,1);const E=u(f,d,h,v.subarray(0,-16),p);return v.set(E,m),(0,i.clean)(E),v},decrypt(y,v){const m=y.length,w=m-16;if(m<16)throw new Error("encrypted data must be at least 16 bytes");v?(0,n.bytes)(v,w):v=new Uint8Array(w);const E=y.subarray(0,-16),S=y.subarray(-16),O=u(f,d,h,E,p);if(!(0,i.equalBytes)(S,O))throw new Error("invalid tag");return f(d,h,E,v,1),(0,i.clean)(O),v}}),t.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))})(G3),Object.defineProperty(Od,"__esModule",{value:!0}),Od.xchacha20=void 0;var Ia,t2,zc,Ik=G3;Od.xchacha20=function(t,e,n){return(0,Ik.xchacha20poly1305)(t,e,n)},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=Mr,n=Jg,r=cc,i=Od,o=Wl,s=hn;t.symEncrypt=function(u,f,d){return a(c,u,f,d)};function a(u,f,d,h){var p=(0,o.symmetricAlgorithm)();if(p==="aes-256-gcm")return u(r.aes256gcm,f,d,(0,o.symmetricNonceLength)(),s.AEAD_TAG_LENGTH,h);if(p==="xchacha20")return u(i.xchacha20,f,d,s.XCHACHA20_NONCE_LENGTH,s.AEAD_TAG_LENGTH,h);if(p==="aes-256-cbc")return u(r.aes256cbc,f,d,16,0);throw new Error("Not implemented")}function c(u,f,d,h,p,g){var y=(0,n.randomBytes)(h),v=u(f,y,g).encrypt(d);if(p===0)return(0,e.concatBytes)(y,v);var m=v.length-p,w=v.subarray(0,m),E=v.subarray(m);return(0,e.concatBytes)(y,E,w)}function l(u,f,d,h,p,g){var y=d.subarray(0,h),v=u(f,Uint8Array.from(y),g),m=d.subarray(h);if(p===0)return v.decrypt(m);var w=m.subarray(0,p),E=m.subarray(p);return v.decrypt((0,e.concatBytes)(E,w))}t.symDecrypt=function(u,f,d){return a(l,u,f,d)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt})(Gw),Ia=Nh,t2=Wr&&Wr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),zc=Wr&&Wr.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||t2(e,t,n)},Object.defineProperty(Ia,"__esModule",{value:!0}),zc(X_,Ia),zc(P3,Ia),zc(w1,Ia),zc(Gw,Ia);var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.PublicKey=void 0;var n2=Mr,af=Nh,Tk=(function(){function t(e){this.data=(0,af.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,af.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return me.from((0,af.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return me.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,n2.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,i=e.multiply(this,n);return(0,af.getSharedKey)(r,i)},t.prototype.equals=function(e){return(0,n2.equalBytes)(this.data,e.data)},t})();Zl.PublicKey=Tk,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.PrivateKey=void 0;var r2=Mr,Ta=Nh,Ok=Zl,Rk=(function(){function t(e){if(e===void 0)this.data=(0,Ta.getValidSecret)();else{if(!(0,Ta.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new Ok.PublicKey((0,Ta.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,Ta.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return me.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,r2.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,n);return(0,Ta.getSharedKey)(r,i)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,Ta.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,r2.equalBytes)(this.data,e.data)},t})();Ad.PrivateKey=Rk,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=Ad;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=Zl;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})})(O0),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(a,c){var l=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),f=l.encapsulate(u,(0,n.isHkdfKeyCompressed)()),d=(0,n.isEphemeralKeyCompressed)()?l.publicKey.compressed:l.publicKey.uncompressed,h=(0,i.symEncrypt)(f,c);return me.from((0,e.concatBytes)(d,h))},t.decrypt=function(a,c){var l=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),f=new r.PublicKey(c.subarray(0,u)),d=c.subarray(u),h=f.decapsulate(l,(0,n.isHkdfKeyCompressed)());return me.from((0,i.symDecrypt)(h,d))};var e=Mr,n=Wl,r=O0,i=Nh,o=Wl;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return o.ECIES_CONFIG}});var s=O0;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return s.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}}),t.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}})(Ma);const Y3=ir("KeyExchange:Layer"),X3=ir("SocketService:Layer"),Z3=ir("Ecies:Layer"),Q3=ir("RemoteCommunication:Layer");Y3.color="##95c44e",X3.color="#f638d7",Z3.color="#465b9c",Q3.color="#47a2be";const fe={KeyExchange:Y3,SocketService:X3,Ecies:Z3,RemoteCommunication:Q3};let Wc,cf=[],G0=[];const Oo=(t,e)=>ye(void 0,void 0,void 0,(function*(){Wc=e,G0.push(t),(function(n){return ye(this,void 0,void 0,(function*(){if(!Wc||!n)return;(function(){const s=G0;G0=cf,cf=s})();const r=Wc.endsWith("/")?`${Wc}evt`:`${Wc}/evt`,i=Object.assign({},n);if(delete i.params,n.params)for(const[s,a]of Object.entries(n.params))i[s]=a;const o=JSON.stringify(i);fe.RemoteCommunication(`[sendBufferedEvents] Sending ${cf.length} analytics events to ${r}`);try{const s=yield w_(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:o}),a=yield s.text();fe.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),cf.length=0}catch{}}))})(t).catch((()=>{}))}));class z0{constructor(e){this.enabled=!0,e?.debug&&ir.enable("Ecies:Layer"),this.ecies=e?.privateKey?Ma.PrivateKey.fromHex(e.privateKey):new Ma.PrivateKey,fe.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),fe.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),fe.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new Ma.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{fe.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=me.from(e),o=Ma.encrypt(n,i);r=me.from(o).toString("base64")}catch(i){throw fe.Ecies("[ECIES: encrypt()] error encrypt:",i),fe.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),fe.Ecies("[ECIES: encrypt()] data: ",e),fe.Ecies("[ECIES: encrypt()] otherkey: ",n),i}return r}decrypt(e){let n=e;if(this.enabled)try{fe.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=me.from(e.toString(),"base64");n=Ma.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw fe.Ecies("[ECIES: decrypt()] error decrypt",r),fe.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),fe.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){fe.Ecies("[ECIES: toString()]",this.getKeyInfo())}}var As={version:"0.33.1"};const Sc="https://metamask-sdk.api.cx.metamask.io/",Pk=["websocket"],Ic=6048e5,Nk=3e3,Mn={METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_WATCHASSET:"wallet_watchAsset",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},kk=[Mn.METAMASK_CONNECTSIGN,Mn.METAMASK_CONNECTWITH,Mn.METAMASK_OPEN,Mn.METAMASK_BATCH,Mn.PERSONAL_SIGN,Mn.WALLET_REQUESTPERMISSIONS,Mn.WALLET_REVOKEPERMISSIONS,Mn.WALLET_WATCHASSET,Mn.ETH_SENDTRANSACTION,Mn.ETH_SIGNTYPEDDATA,Mn.ETH_SIGNTYPEDDATA_V3,Mn.ETH_SIGNTYPEDDATA_V4,Mn.ETH_SIGNTRANSACTION,Mn.ETH_SIGN,Mn.PERSONAL_EC_RECOVER];function Au(t){return kk.includes(t)}function J3(t){const{context:e}=t;fe.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var Rn,Ee,Rd,vt,Ht,Qt,Oa;(Oa=Rn||(Rn={})).DISCONNECTED="disconnected",Oa.WAITING="waiting",Oa.TIMEOUT="timeout",Oa.LINKED="linked",Oa.PAUSED="paused",Oa.TERMINATED="terminated",(function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"})(Ee||(Ee={})),(Rd||(Rd={})).KEY_EXCHANGE="key_exchange",(function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"})(vt||(vt={}));class Mk extends Ih.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:i,logging:o}){super(),this.keysExchanged=!1,this.step=vt.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,i?.privateKey&&n&&(fe.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new z0(Object.assign(Object.assign({},i),{debug:o?.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=o?.keyExchangeLayer===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(Rd.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(fe.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void fe.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&fe.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(Ee.KEY_INFO,r.type),r.type===vt.KEY_HANDSHAKE_SYN?(this.checkStep([vt.KEY_HANDSHAKE_NONE,vt.KEY_HANDSHAKE_ACK]),fe.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:vt.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch((i=>{fe.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",i)})),this.setStep(vt.KEY_HANDSHAKE_ACK)):r.type===vt.KEY_HANDSHAKE_SYNACK?(this.checkStep([vt.KEY_HANDSHAKE_SYNACK,vt.KEY_HANDSHAKE_ACK,vt.KEY_HANDSHAKE_NONE]),fe.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:vt.KEY_HANDSHAKE_ACK}).catch((i=>{fe.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",i)})),this.keysExchanged=!0,this.setStep(vt.KEY_HANDSHAKE_ACK),this.emit(Ee.KEYS_EXCHANGED)):r.type===vt.KEY_HANDSHAKE_ACK&&(fe.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([vt.KEY_HANDSHAKE_ACK,vt.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(vt.KEY_HANDSHAKE_ACK),this.emit(Ee.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new z0(e)}clean(){fe.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(vt.KEY_HANDSHAKE_NONE),this.emit(Ee.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state,o=i>=2;r?fe.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(fe.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==vt.KEY_HANDSHAKE_NONE&&this.step!==vt.KEY_HANDSHAKE_SYNACK)||n?(fe.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(vt.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:vt.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch((s=>{fe.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",s)}))):fe.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?fe.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):o?this.communicationLayer.sendMessage({type:vt.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch((s=>{fe.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",s)})):(this.communicationLayer.sendMessage({type:vt.KEY_HANDSHAKE_START}).catch((s=>{fe.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",s)})),this.clean()))}setStep(e){this.step=e,this.emit(Ee.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new z0({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){fe.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}}(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(Ht||(Ht={})),(function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"})(Qt||(Qt={}));const Bf=(t,e,n)=>ye(void 0,void 0,void 0,(function*(){var r,i,o,s,a,c;const{remote:l,state:u}=t,{channelId:f,isOriginator:d}=u;if(e==="error_terminated")return fe.SocketService(`handleJoinChannelResults: Channel ${f} terminated`),void t.emit(Ee.TERMINATE);if(!n)return void fe.SocketService(`handleJoinChannelResults: No result for channel ${f}`);const{persistence:h,walletKey:p,rejected:g}=n;if(fe.SocketService(`handleJoinChannelResults: Channel ${f} persistence=${h} walletKey=${p} rejected=${g}`),g)return fe.SocketService(`handleJoinChannelResults: Channel ${f} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(Ee.REJECTED,{channelId:f}),void t.remote.emitServiceStatusEvent();if(p&&!(!((r=l.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(p),(i=t.state.keyExchange)===null||i===void 0||i.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(Ee.AUTHORIZED);const{communicationLayer:y,storageManager:v}=l.state,m=Object.assign(Object.assign({},l.state.channelConfig),{channelId:(o=l.state.channelId)!==null&&o!==void 0?o:"",validUntil:Date.now()+Ic,localKey:y?.getKeyInfo().ecies.private,otherKey:p});t.sendMessage({type:vt.KEY_HANDSHAKE_ACK}).catch((w=>{})),(s=t.state.socket)===null||s===void 0||s.emit(Ht.PING,{id:f,clientType:d?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield v?.persistChannelConfig(m),l.emitServiceStatusEvent(),l.setConnectionStatus(Rn.LINKED)}h&&(t.emit(Ee.CHANNEL_PERSISTENCE),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(Ee.AUTHORIZED),Oo(Object.assign(Object.assign({id:f??"",event:d?Qt.CONNECTED:Qt.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:As.version,walletVersion:(c=t.remote.state.walletInfo)===null||c===void 0?void 0:c.version}),u.communicationServerUrl).catch((y=>{})))})),uc=t=>new Promise((e=>{setTimeout(e,t)})),i2=(t,e,...n)=>ye(void 0,[t,e,...n],void 0,(function*(r,i,o=200){let s;const a=Date.now();let c=!1;for(;!c;){if(c=Date.now()-a>3e5,s=i[r],s.elapsedTime!==void 0)return s;yield uc(o)}throw new Error(`RPC ${r} timed out`)})),A1=t=>ye(void 0,void 0,void 0,(function*(){const{state:e}=t,{socket:n,channelId:r,context:i,isOriginator:o,isReconnecting:s}=e;if(s)return fe.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return fe.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:a}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,fe.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(fe.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield uc(200),n.connected)return fe.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(Ht.PING,{id:r,clientType:o?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(Ee.SOCKET_RECONNECT);try{if(yield new Promise(((c,l)=>{n.emit(Ee.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:o?"dapp":"wallet"},((u,f)=>ye(void 0,void 0,void 0,(function*(){try{yield Bf(t,u,f),c()}catch(d){l(d)}}))))})),yield uc(100),n.connected)return fe.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(c){fe.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,c)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield uc(200))}return fe.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}}));function eC(t,e){return ye(this,void 0,void 0,(function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),i={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return fe.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,i),e.type===Ht.TERMINATE&&(t.state.manualDisconnect=!0),new Promise(((o,s)=>{var a;(a=t.state.socket)===null||a===void 0||a.emit(Ee.MESSAGE,i,((c,l)=>{var u;c&&(fe.SocketService(`[SocketService: encryptAndSendMessage()] error=${c}`),s(c)),fe.SocketService("[encryptAndSendMessage] response",l),o((u=l?.success)!==null&&u!==void 0&&u)}))}))}))}var Ga;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(Ga||(Ga={}));const tC=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map((t=>t.toLowerCase())),Dk=[{event:Ee.CLIENTS_CONNECTED,handler:function(t,e){return n=>ye(this,void 0,void 0,(function*(){var r,i,o,s,a,c,l,u,f,d,h;const p=(i=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&i!==void 0&&i;if(fe.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${p} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(Ee.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(fe.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(c=t.state.keyExchange)===null||c===void 0||c.start({isOriginator:(l=t.state.isOriginator)!==null&&l!==void 0&&l})),t.state.resumed=!1;else if(t.state.clientsPaused)fe.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const g=!p;fe.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${g} -- backward compatibility`),fe.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(f=t.state.keyExchange)===null||f===void 0?void 0:f.areKeysExchanged()} -- force=${g} -- backward compatibility`),(d=t.state.keyExchange)===null||d===void 0||d.start({isOriginator:(h=t.state.isOriginator)!==null&&h!==void 0&&h,force:g})}t.state.clientsConnected=!0,t.state.clientsPaused=!1}))}},{event:Ee.CHANNEL_CREATED,handler:function(t,e){return n=>{fe.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(Ee.CHANNEL_CREATED,n)}}},{event:Ee.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,fe.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?fe.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(Ee.CLIENTS_DISCONNECTED,e))}}},{event:Ee.CONFIG,handler:function(t,e){return n=>ye(this,void 0,void 0,(function*(){var r,i,o;fe.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:s,walletKey:a}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(fe.SocketService(`Setting wallet key ${a}`),t.remote.state.channelConfig.otherKey=a,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:vt.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:Ht.PING}),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig)),s!==!0||t.remote.state.channelConfig.relayPersistence||(fe.SocketService(`Setting relay persistence ${s}`),t.remote.state.channelConfig.relayPersistence=s,t.remote.state.relayPersistence=!0,t.remote.emit(Ee.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(Ee.AUTHORIZED),yield(o=t.remote.state.storageManager)===null||o===void 0?void 0:o.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(Ee.CHANNEL_PERSISTENCE))}))}},{event:Ee.MESSAGE,handler:function(t,e){return n=>{var r,i,o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E;const{ackId:S,message:O,error:F}=n,$=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(fe.SocketService(`[SocketService handleMessage()]  relayPersistence=${$}  context=${t.state.context} on 'message' ${e} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,n),F)throw fe.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${F}`),new Error(F);const U=typeof O=="string";if(!U&&O?.type===vt.KEY_HANDSHAKE_START)return $?void 0:(fe.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,O),void((o=t.state.keyExchange)===null||o===void 0||o.start({isOriginator:(s=t.state.isOriginator)!==null&&s!==void 0&&s,force:!0})));if(!U&&(!((a=O?.type)===null||a===void 0)&&a.startsWith("key_handshake")))return $?void 0:(fe.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,O),void t.emit(Rd.KEY_EXCHANGE,{message:O,context:t.state.context}));if(U&&!(!((c=t.state.keyExchange)===null||c===void 0)&&c.areKeysExchanged())){let j=!1;try{fe.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(l=t.state.keyExchange)===null||l===void 0||l.decryptMessage(O),j=!0}catch(L){fe.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,L)}if(!j)return t.state.isOriginator?(f=t.state.keyExchange)===null||f===void 0||f.start({isOriginator:(d=t.state.isOriginator)!==null&&d!==void 0&&d}):t.sendMessage({type:vt.KEY_HANDSHAKE_START}).catch((L=>{})),void fe.SocketService(`Message ignored because invalid key exchange status. step=${(h=t.state.keyExchange)===null||h===void 0?void 0:h.getKeyInfo().step}`,(p=t.state.keyExchange)===null||p===void 0?void 0:p.getKeyInfo(),O);fe.SocketService("Invalid key exchange status detected --- updating it."),(u=t.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!U&&O?.type)return void t.emit(Ee.MESSAGE,O);if(!U)return void t.emit(Ee.MESSAGE,O);const B=(g=t.state.keyExchange)===null||g===void 0?void 0:g.decryptMessage(O),Y=JSON.parse(B??"{}");if(S&&S?.length>0&&(fe.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${S} channelId=${e}`),(y=t.state.socket)===null||y===void 0||y.emit(Ee.MESSAGE_ACK,{ackId:S,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=Y?.type===Ht.PAUSE,t.state.isOriginator&&Y.data){const j=Y.data,L=t.state.rpcMethodTracker[j.id];if(L){const I=Date.now()-L.timestamp;fe.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${j.id} method=${L.method} responseTime=${I}`,Y),t.remote.state.analytics&&tC.includes(L.method.toLowerCase())&&Oo(Object.assign(Object.assign({id:(v=t.remote.state.channelId)!==null&&v!==void 0?v:"",event:Qt.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:As.version},t.remote.state.originatorInfo),{walletVersion:(m=t.remote.state.walletInfo)===null||m===void 0?void 0:m.version,params:{method:L.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch((P=>{})),Au(L.method)&&Xt.analytics.track(j.error?j.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:L.method});const x=Object.assign(Object.assign({},L),{result:j.result,error:j.error?{code:(w=j.error)===null||w===void 0?void 0:w.code,message:(E=j.error)===null||E===void 0?void 0:E.message}:void 0,elapsedTime:I});t.state.rpcMethodTracker[j.id]=x,t.emit(Ee.RPC_UPDATE,x)}}t.emit(Ee.MESSAGE,{message:Y})}}},{event:Ee.REJECTED,handler:function(t,e){return n=>ye(this,void 0,void 0,(function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(fe.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),Oo(Object.assign(Object.assign({id:e,event:Qt.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:As.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch((i=>{})),Xt.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(Ee.REJECTED,{channelId:e}),t.remote.setConnectionStatus(Rn.DISCONNECTED)):fe.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)}))}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{fe.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(Ee.CLIENTS_WAITING,n)}}}],Bk=[{event:Ee.KEY_INFO,handler:function(t){return e=>{fe.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(Ee.KEY_INFO,e)}}},{event:Ee.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;fe.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:i}=t.remote.state;if(i){const s=t.getKeyExchange().getKeyInfo().ecies;i.localKey=s.private,i.otherKey=s.otherPubKey,t.remote.state.channelConfig=i,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(i).catch((a=>{}))}t.emit(Ee.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const o={keyInfo:t.getKeyInfo()};t.emit(Ee.SERVICE_STATUS,o)}}}];function o2(t,e){fe.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n?.io.on("error",(i=>{fe.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,i)})),n?.io.on("reconnect",(i=>{fe.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,i),A1(t).catch((o=>{}))})),n?.io.on("reconnect_error",(i=>{fe.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,i)})),n?.io.on("reconnect_failed",(()=>{fe.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)}))),n?.on("disconnect",(i=>(fe.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${i}' begin recovery...`),(function(o){return s=>{fe.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${o.state.manualDisconnect}`,s),o.state.manualDisconnect||(o.emit(Ee.SOCKET_DISCONNECTED),A1(o).catch((a=>{})))}})(t)(i))))),Dk.forEach((({event:i,handler:o})=>{n?.on(`${i}-${e}`,o(t,e))})),Bk.forEach((({event:i,handler:o})=>{r?.on(i,o(t))})),t.state.setupChannelListeners=!0}class Lk extends Ih.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:i,context:o,remote:s,logging:a}=e;this.state.resumed=n,this.state.context=o,this.state.isOriginator=s.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=a?.serviceLayer===!0,this.remote=s,a?.serviceLayer===!0&&ir.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==Sc&&a?.plaintext===!0,fe.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:i}=this.options,o={autoConnect:!1,transports:Pk,withCredentials:!0},s=this.state.communicationServerUrl;fe.SocketService(`[SocketService: initSocket()] Socket IO url: ${s}`),this.state.socket=Nf(s,o),(function(c){if(typeof window<"u"&&typeof document<"u"&&(fe.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,c),!c.state.focusListenerAdded)){const l=()=>{fe.SocketService("Document has focus --- reconnecting socket"),A1(c).catch((u=>{}))};window.addEventListener("focus",l),c.state.focusListenerAdded=!0,c.state.removeFocusListener=()=>{window.removeEventListener("focus",l),c.state.focusListenerAdded=!1}}})(this);const a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:i};this.state.keyExchange=new Mk(a)}resetKeys(){return fe.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return ye(this,void 0,void 0,(function*(){return(function(e){return ye(this,void 0,void 0,(function*(){var n,r,i;if(fe.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const o=as();e.state.channelId=o,o2(e,o),yield new Promise(((a,c)=>{var l;(l=e.state.socket)===null||l===void 0||l.emit(Ee.JOIN_CHANNEL,{channelId:o,context:`${e.state.context}createChannel`,clientType:"dapp"},((u,f)=>ye(this,void 0,void 0,(function*(){try{yield Bf(e,u,f),a()}catch(d){c(d)}}))))}));const s=(i=e.state.keyExchange)===null||i===void 0?void 0:i.getKeyInfo();return{channelId:o,pubKey:s?.ecies.public||"",privKey:s?.ecies.private||""}}))})(this)}))}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return(function(i){return ye(this,arguments,void 0,(function*({options:o,instance:s}){const{channelId:a,authorized:c,withKeyExchange:l}=o,{state:u,remote:f}=s,{isOriginator:d=!1,socket:h,keyExchange:p}=u,{channelConfig:g}=f.state;if(h?.connected)throw new Error("socket already connected");if(d&&g?.relayPersistence){const{localKey:y,otherKey:v}=g;y&&v&&p?.setRelayPersistence({localKey:y,otherKey:v})}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:l,isOriginator:d,channelId:a}),h?.connect(),o2(s,a),!d&&c&&(p?.setKeysExchanged(!0),Object.assign(f.state,{ready:!0,authorized:!0})),new Promise((y=>{var v;const m=(v=p?.getKeyInfo())===null||v===void 0?void 0:v.ecies.public;h?.emit(Ee.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:d?"dapp":"wallet",publicKey:c&&!d?m:void 0},((w,E)=>ye(this,void 0,void 0,(function*(){yield Bf(s,w,E),y()}))))}))}))})({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(Ee.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:vt.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return ye(this,void 0,void 0,(function*(){return(function(n,r){return ye(this,void 0,void 0,(function*(){var i,o,s;if(!n.state.channelId)throw fe.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(fe.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(i=n.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,r),(o=r?.type)===null||o===void 0?void 0:o.startsWith("key_handshake"))return(function(c,l){var u;fe.SocketService(`[SocketService: handleKeyHandshake()] context=${c.state.context}`,l),(u=c.state.socket)===null||u===void 0||u.emit(Ee.MESSAGE,{id:c.state.channelId,context:c.state.context,clientType:c.state.isOriginator?"dapp":"wallet",message:l})})(n,r),!0;(function(c,l){var u;if(!(!((u=c.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!c.remote.state.relayPersistence)throw fe.SocketService(`[SocketService: validateKeyExchange()] context=${c.state.context} ERROR keys not exchanged`,l),new Error("Keys not exchanged BBB")})(n,r),(function(c,l){var u;const f=(u=l?.method)!==null&&u!==void 0?u:"",d=l?.id;c.state.isOriginator&&d&&(c.state.rpcMethodTracker[d]={id:d,timestamp:Date.now(),method:f},c.emit(Ee.RPC_UPDATE,c.state.rpcMethodTracker[d]))})(n,r);const a=yield eC(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&tC.includes(r.method.toLowerCase())&&Oo({id:(s=n.remote.state.channelId)!==null&&s!==void 0?s:"",event:Qt.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch((c=>{})),n.remote.state.isOriginator&&r.method&&Au(r.method)&&Xt.analytics.track("sdk_action_requested",{action:r.method}),(function(c,l){return ye(this,void 0,void 0,(function*(){var u;const f=l?.id,d=(u=l?.method)!==null&&u!==void 0?u:"";if(c.state.isOriginator&&f)try{const h=i2(f,c.state.rpcMethodTracker,200).then((y=>({type:Ga.RPC_CHECK,result:y}))),p=ye(this,void 0,void 0,(function*(){const y=yield(m=>ye(void 0,[m],void 0,(function*({rpcId:w,instance:E}){for(;E.state.lastRpcId===w||E.state.lastRpcId===void 0;)yield uc(200);return E.state.lastRpcId})))({instance:c,rpcId:f}),v=yield i2(y,c.state.rpcMethodTracker,200);return{type:Ga.SKIPPED_RPC,result:v}})),g=yield Promise.race([h,p]);if(g.type===Ga.RPC_CHECK){const y=g.result;fe.SocketService(`[SocketService:handleRpcReplies()] id=${l.id} ${d} ( ${y.elapsedTime} ms)`,y.result)}else{if(g.type!==Ga.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${f}`);{const y=Object.assign(Object.assign({},c.state.rpcMethodTracker[f]),{error:new Error("SDK_CONNECTION_ISSUE")});c.emit(Ee.RPC_UPDATE,y);const v={data:Object.assign(Object.assign({},y),{jsonrpc:"2.0"}),name:"metamask-provider"};c.emit(Ee.MESSAGE,{message:v})}}}catch(h){throw h}}))})(n,r).catch((c=>{})),a}))})(this,e)}))}ping(){return(function(e){return ye(this,void 0,void 0,(function*(){var n,r;fe.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(Ht.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})}))})(this)}pause(){return(function(e){return ye(this,void 0,void 0,(function*(){var n,r;fe.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:Ht.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()}))})(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return(function(e){return ye(this,void 0,void 0,(function*(){const{state:n,remote:r}=e,{socket:i,channelId:o,context:s,keyExchange:a,isOriginator:c}=n,{isOriginator:l}=r.state;if(fe.SocketService(`[SocketService: resume()] channelId=${o} context=${s} connected=${i?.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a?.areKeysExchanged()}`),!o)throw fe.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");i?.connected?(fe.SocketService("[SocketService: resume()] already connected."),i.emit(Ht.PING,{id:o,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a?.areKeysExchanged()||(c?yield e.sendMessage({type:Ht.READY}):a?.start({isOriginator:!1}))):(i?.connect(),fe.SocketService(`[SocketService: resume()] after connecting socket --> connected=${i?.connected}`),i?.emit(Ee.JOIN_CHANNEL,{channelId:o,context:`${s}_resume`,clientType:l?"dapp":"wallet"},((u,f)=>ye(this,void 0,void 0,(function*(){try{yield Bf(e,u,f)}catch{}}))))),n.manualDisconnect=!1,n.resumed=!0}))})(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return(function(n,r){var i,o,s,a,c;fe.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r?.terminate&&((o=(i=n.state).removeFocusListener)===null||o===void 0||o.call(i),n.state.channelId=r.channelId,(s=n.state.socket)===null||s===void 0||s.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(c=n.state.socket)===null||c===void 0||c.disconnect()})(this,e)}}var da,Un,s2;function Fk(t){return()=>ye(this,void 0,void 0,(function*(){var e,n,r;const{state:i}=t;if(i.authorized)return;yield ye(this,void 0,void 0,(function*(){for(;!i.walletInfo;)yield uc(500)}));const o="7.3".localeCompare(((e=i.walletInfo)===null||e===void 0?void 0:e.version)||"");if(fe.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=i.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${o}`),o!==1)return;const s=i.platformType===Un.MobileWeb||i.platformType===Un.ReactNative||i.platformType===Un.MetaMaskMobileWebview;fe.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${s} channel=${i.channelId} walletVersion=${(r=i.walletInfo)===null||r===void 0?void 0:r.version}`),s&&(i.authorized=!0,t.emit(Ee.AUTHORIZED))}))}function Uk(t){return e=>{const{state:n}=t;fe.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(Ee.CHANNEL_CREATED,e)}}function Hk(t,e){return()=>{var n,r,i,o;const{state:s}=t;fe.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${s.channelId} keysExchanged=${(r=(n=s.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),s.analytics&&Oo(Object.assign(Object.assign({id:(i=s.channelId)!==null&&i!==void 0?i:"",event:s.reconnection?Qt.RECONNECT:s.isOriginator?Qt.REQUEST:Qt.REQUEST_MOBILE},s.originatorInfo),{commLayer:e,sdkVersion:s.sdkVersion,walletVersion:(o=s.walletInfo)===null||o===void 0?void 0:o.version,commLayerVersion:As.version}),s.communicationServerUrl).catch((a=>{})),s.isOriginator&&!s.reconnection&&Xt.analytics.track("sdk_connection_established",{transport_type:"websocket"}),s.clientsConnected=!0,s.originatorInfoSent=!1,t.emit(Ee.CLIENTS_CONNECTED)}}function $k(t){return e=>{const{state:n}=t;fe.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(Ee.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(Rn.DISCONNECTED)}}function Vk(t){return e=>{var n;const{state:r}=t;if(fe.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(Rn.WAITING),t.emit(Ee.CLIENTS_WAITING,e),r.originatorConnectStarted){fe.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const i=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,o=setTimeout((()=>{fe.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(Rn.TIMEOUT),clearTimeout(o)}),i)}}}function jk(t,e){return n=>{var r,i,o,s,a,c,l,u;const{state:f}=t;if(fe.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${f.context} on commLayer.'keys_exchanged' channel=${f.channelId}`,n),(i=(r=f.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||i===void 0?void 0:i.keysExchanged){const d=Object.assign(Object.assign({},f.channelConfig),{channelId:(o=f.channelId)!==null&&o!==void 0?o:"",validUntil:((s=f.channelConfig)===null||s===void 0?void 0:s.validUntil)||Ic,localKey:f.communicationLayer.getKeyInfo().ecies.private,otherKey:f.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=f.storageManager)===null||a===void 0||a.persistChannelConfig(d).catch((h=>{})),t.setConnectionStatus(Rn.LINKED)}(function(d,h){var p,g,y,v,m,w,E,S;const{state:O}=d;fe.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${O.channelId}`,h);const F=Object.assign(Object.assign({},O.channelConfig),{channelId:(p=O.channelId)!==null&&p!==void 0?p:"",validUntil:(y=(g=O.channelConfig)===null||g===void 0?void 0:g.validUntil)!==null&&y!==void 0?y:0,relayPersistence:O.relayPersistence,localKey:(m=(v=O.communicationLayer)===null||v===void 0?void 0:v.state.keyExchange)===null||m===void 0?void 0:m.getKeyInfo().ecies.private,otherKey:(E=(w=O.communicationLayer)===null||w===void 0?void 0:w.state.keyExchange)===null||E===void 0?void 0:E.getKeyInfo().ecies.otherPubKey,lastActive:h.getTime()});(S=O.storageManager)===null||S===void 0||S.persistChannelConfig(F)})(t,new Date),f.analytics&&f.channelId&&Oo(Object.assign(Object.assign({id:f.channelId,event:n.isOriginator?Qt.CONNECTED:Qt.CONNECTED_MOBILE},f.originatorInfo),{sdkVersion:f.sdkVersion,commLayer:e,commLayerVersion:As.version,walletVersion:(c=f.walletInfo)===null||c===void 0?void 0:c.version}),f.communicationServerUrl).catch((d=>{})),f.isOriginator=n.isOriginator,n.isOriginator||((l=f.communicationLayer)===null||l===void 0||l.sendMessage({type:Ht.READY}),f.ready=!0,f.paused=!1),n.isOriginator&&!f.originatorInfoSent&&((u=f.communicationLayer)===null||u===void 0||u.sendMessage({type:Ht.ORIGINATOR_INFO,originatorInfo:f.originatorInfo,originator:f.originatorInfo}),f.originatorInfoSent=!0)}}function Kk(t){return e=>{let n=e;e.message&&(n=n.message),(function(r,i){const{state:o}=i;if(fe.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${o.context} on 'message' typeof=${typeof r}`,r),i.state.ready=!0,o.isOriginator||r.type!==Ht.ORIGINATOR_INFO)if(o.isOriginator&&r.type===Ht.WALLET_INFO)(function(s,a){const{state:c}=s;c.walletInfo=a.walletInfo,c.paused=!1})(i,r);else{if(o.isOriginator&&r.type===Ht.WALLET_INIT)(function(s,a){return ye(this,void 0,void 0,(function*(){var c,l,u;const{state:f}=s;if(f.isOriginator){const d=a.data||{};if(typeof d=="object"&&"accounts"in d&&"chainId"in d&&"walletKey"in d)try{const{channelConfig:h}=s.state;if(fe.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(h,null,2)),h){const p=d.accounts,g=d.chainId,y=d.walletKey;let v,m=!1;"deeplinkProtocol"in d&&(m=!!d.deeplinkProtocol,s.state.deeplinkProtocolAvailable=m),"walletVersion"in d&&(v=d.walletVersion),yield(c=s.state.storageManager)===null||c===void 0?void 0:c.persistChannelConfig(Object.assign(Object.assign({},h),{otherKey:y,walletVersion:v,deeplinkProtocolAvailable:m,relayPersistence:!0})),yield(l=s.state.storageManager)===null||l===void 0?void 0:l.persistAccounts(p),yield(u=s.state.storageManager)===null||u===void 0?void 0:u.persistChainId(g)}s.emit(Ee.WALLET_INIT,{accounts:d.accounts,chainId:d.chainId})}catch{}}}))})(i,r).catch((s=>{fe.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${s}`)}));else if(r.type===Ht.TERMINATE)(function(s){return ye(this,void 0,void 0,(function*(){const{state:a}=s;a.isOriginator&&(yield nC({options:{terminate:!0,sendMessage:!1},instance:s}),s.emit(Ee.TERMINATE))}))})(i).catch((s=>{fe.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${s}`)}));else if(r.type===Ht.PAUSE)(function(s){const{state:a}=s;a.paused=!0,s.setConnectionStatus(Rn.PAUSED)})(i);else if(r.type===Ht.READY&&o.isOriginator)(function(s){const{state:a}=s;s.setConnectionStatus(Rn.LINKED);const c=a.paused;a.paused=!1,s.emit(Ee.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),c&&(a.authorized=!0,s.emit(Ee.AUTHORIZED))})(i);else{if(r.type===Ht.OTP&&o.isOriginator)return void(function(s,a){var c;const{state:l}=s;s.emit(Ee.OTP,a.otpAnswer),"6.6".localeCompare(((c=l.walletInfo)===null||c===void 0?void 0:c.version)||"")===1&&s.emit(Ee.SDK_RPC_CALL,{method:Mn.ETH_REQUESTACCOUNTS,params:[]})})(i,r);r.type===Ht.AUTHORIZED&&o.isOriginator&&(function(s){const{state:a}=s;a.authorized=!0,s.emit(Ee.AUTHORIZED)})(i)}i.emit(Ee.MESSAGE,r)}else(function(s,a){var c;const{state:l}=s;(c=l.communicationLayer)===null||c===void 0||c.sendMessage({type:Ht.WALLET_INFO,walletInfo:l.walletInfo}),l.originatorInfo=a.originatorInfo||a.originator,s.emit(Ee.CLIENTS_READY,{isOriginator:l.isOriginator,originatorInfo:l.originatorInfo}),l.paused=!1})(i,r)})(n,t)}}function Gk(t){return()=>{const{state:e}=t;fe.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,J3(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function zk(t){return()=>{const{state:e}=t;fe.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function Wk(t){return()=>ye(this,void 0,void 0,(function*(){var e,n,r,i,o,s,a;const{state:c}=t;fe.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${c.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(Ee.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(Ee.AUTHORIZED),t.emit(Ee.CLIENTS_READY),t.emit(Ee.CHANNEL_PERSISTENCE);try{c.channelConfig=Object.assign(Object.assign({},c.channelConfig),{localKey:(n=c.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=c.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(i=c.channelId)!==null&&i!==void 0?i:"",validUntil:(s=(o=c.channelConfig)===null||o===void 0?void 0:o.validUntil)!==null&&s!==void 0?s:Ic,relayPersistence:!0}),yield(a=c.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(c.channelConfig)}catch{}}))}function a2({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:i=Sc,instance:o}){var s,a,c,l,u,f,d,h,p,g,y;const{state:v}=o;if(fe.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(v,null,2)),t!==da.SOCKET)throw new Error("Invalid communication protocol");v.communicationLayer=new Lk({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:v.transports,communicationServerUrl:i,context:v.context,ecies:r,logging:v.logging,remote:o});let m=typeof document<"u"&&document.URL||"",w=typeof document<"u"&&document.title||"";!((s=v.dappMetadata)===null||s===void 0)&&s.url&&(m=v.dappMetadata.url),!((a=v.dappMetadata)===null||a===void 0)&&a.name&&(w=v.dappMetadata.name);const E=(f=(l=(c=v.dappMetadata)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:(u=v.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&f!==void 0?f:"N/A",S=typeof window<"u"&&window.location!==void 0&&(d=window.location.hostname)!==null&&d!==void 0?d:E,O={url:m,title:w,source:(h=v.dappMetadata)===null||h===void 0?void 0:h.source,dappId:S,anonId:v.anonId,icon:((p=v.dappMetadata)===null||p===void 0?void 0:p.iconUrl)||((g=v.dappMetadata)===null||g===void 0?void 0:g.base64Icon),platform:v.platformType,apiVersion:As.version,connector:(y=v.dappMetadata)===null||y===void 0?void 0:y.connector};v.originatorInfo=O;const F={[Ee.AUTHORIZED]:Fk(o),[Ee.MESSAGE]:Kk(o),[Ee.CHANNEL_PERSISTENCE]:Wk(o),[Ee.CLIENTS_CONNECTED]:Hk(o,t),[Ee.KEYS_EXCHANGED]:jk(o,t),[Ee.SOCKET_DISCONNECTED]:zk(o),[Ee.SOCKET_RECONNECT]:Gk(o),[Ee.CLIENTS_DISCONNECTED]:$k(o),[Ee.KEY_INFO]:()=>{},[Ee.CHANNEL_CREATED]:Uk(o),[Ee.CLIENTS_WAITING]:Vk(o),[Ee.RPC_UPDATE]:$=>{o.emit(Ee.RPC_UPDATE,$)}};for(const[$,U]of Object.entries(F))try{v.communicationLayer.on($,U)}catch{}}function nC(t){return ye(this,arguments,void 0,(function*({options:e,instance:n}){const{state:r}=n;return fe.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise(((i,o)=>{var s,a,c,l,u,f;e?.terminate?(n.state.ready&&Oo({id:(s=n.state.channelId)!==null&&s!==void 0?s:"",event:Qt.TERMINATED},n.state.communicationServerUrl).catch((d=>{})),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((c=r.channelId)!==null&&c!==void 0?c:""),n.state.terminated=!0,e.sendMessage?!((l=r.communicationLayer)===null||l===void 0)&&l.getKeyInfo().keysExchanged&&n.state.communicationLayer&&eC(n.state.communicationLayer,{type:Ht.TERMINATE}).then((()=>{i(!0)})).catch((d=>{o(d)})):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=as(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(Rn.TERMINATED)):((f=r.communicationLayer)===null||f===void 0||f.disconnect(e),n.setConnectionStatus(Rn.DISCONNECTED),i(!0))}))}))}(da||(da={})).SOCKET="socket",(function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"})(Un||(Un={}));class qk extends Ih.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:Sc,context:"",persist:!1,clientsConnected:!1,sessionDuration:Ic,originatorConnectStarted:!1,debug:!1,_connectionStatus:Rn.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:i,otherPublicKey:o,reconnect:s,walletInfo:a,dappMetadata:c,protocolVersion:l,transports:u,context:f,relayPersistence:d,ecies:h,analytics:p=!1,storage:g,sdkVersion:y,communicationServerUrl:v=Sc,logging:m,autoConnect:w={timeout:Nk}}=e;this.state.anonId=n,this.state.otherPublicKey=o,this.state.dappMetadata=c,this.state.walletInfo=a,this.state.transports=u,this.state.platformType=r,this.state.analytics=p,this.state.protocolVersion=l??1,this.state.isOriginator=!o,this.state.relayPersistence=d,this.state.communicationServerUrl=v,this.state.context=f,this.state.terminated=!1,this.state.sdkVersion=y,this.setMaxListeners(50),this.setConnectionStatus(Rn.DISCONNECTED),g?.duration&&(this.state.sessionDuration=Ic),this.state.storageOptions=g,this.state.autoConnectOptions=w,this.state.debug=m?.remoteLayer===!0,m?.remoteLayer===!0&&ir.enable("RemoteCommunication:Layer"),m?.serviceLayer===!0&&ir.enable("SocketService:Layer"),m?.eciesLayer===!0&&ir.enable("ECIES:Layer"),m?.keyExchangeLayer===!0&&ir.enable("KeyExchange:Layer"),this.state.logging=m,g?.storageManager&&(this.state.storageManager=g.storageManager),fe.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${l} relayPersistence=${d} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${o} reconnect=${s}`),this.state.isOriginator||a2({communicationLayerPreference:i,otherPublicKey:o,reconnect:s,ecies:h,communicationServerUrl:v,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return ye(this,void 0,void 0,(function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(Rn.LINKED),yield this.connectToChannel({channelId:n.channelId})))}a2({communicationLayerPreference:da.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})}))}originatorSessionConnect(){return ye(this,void 0,void 0,(function*(){return yield(function(e){return ye(this,void 0,void 0,(function*(){var n;const{state:r}=e;if(!r.storageManager)return void fe.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const i=yield r.storageManager.getPersistedChannelConfig({});if(fe.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return fe.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=i?.channelId,r.reconnection=!0,i;fe.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1}))})(this)}))}generateChannelIdConnect(){return ye(this,void 0,void 0,(function*(){return(function(e){return ye(this,void 0,void 0,(function*(){var n,r,i,o,s,a;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(o=(i=e.communicationLayer)===null||i===void 0?void 0:i.getKeyInfo())===null||o===void 0?void 0:o.ecies.private,pubKey:(a=(s=e.communicationLayer)===null||s===void 0?void 0:s.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};fe.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const c=yield e.communicationLayer.createChannel();fe.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c);const l=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=c.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}}))})(this.state)}))}clean(){return J3(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return(function(i){return ye(this,arguments,void 0,(function*({channelId:o,withKeyExchange:s,authorized:a,state:c}){var l,u,f;if(!o1(o))throw fe.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} invalid channel channelId=${o}`),new Error(`Invalid channel ${o}`);if(fe.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} channelId=${o} withKeyExchange=${s}`),(l=c.communicationLayer)===null||l===void 0?void 0:l.isConnected())return void fe.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} already connected - interrupt connection.`);c.channelId=o,yield(u=c.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:o,authorized:a,withKeyExchange:s});const d=Object.assign(Object.assign({},c.channelConfig),{channelId:o,validUntil:Date.now()+c.sessionDuration});c.channelConfig=d,(f=c.storageManager)===null||f===void 0||f.persistChannelConfig(d)}))})({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return ye(this,void 0,void 0,(function*(){const n=this.state.isOriginator&&e.method&&Au(e.method);n&&Xt.analytics.track("sdk_action_requested",{action:e.method});try{return yield(function(r,i){return ye(this,void 0,void 0,(function*(){var o,s;const{state:a}=r;fe.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context} paused=${a.paused} ready=${a.ready} relayPersistence=${a.relayPersistence} authorized=${a.authorized} socket=${(o=a.communicationLayer)===null||o===void 0?void 0:o.isConnected()} clientsConnected=${a.clientsConnected} status=${a._connectionStatus}`,i),a.relayPersistence||a.ready&&(!((s=a.communicationLayer)===null||s===void 0)&&s.isConnected())&&a.clientsConnected||(fe.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise((c=>{r.once(Ee.CLIENTS_READY,c)})),fe.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  AFTER SKIP / READY -- sending pending message`));try{return yield(function(l,u){return ye(this,void 0,void 0,(function*(){return new Promise((f=>{var d;const{state:h}=l;fe.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context} ready=${h.ready} authorized=${h.authorized} method=${u.method}`),!h.isOriginator||h.authorized||h.relayPersistence?(d=h.communicationLayer)===null||d===void 0||d.sendMessage(u).then((p=>{f(p)})).catch((p=>{f(!1)})):l.once(Ee.AUTHORIZED,(()=>{var p;fe.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(p=h.communicationLayer)===null||p===void 0||p.sendMessage(u).then((g=>{f(g)})).catch((g=>{f(!1)}))}))}))}))})(r,i)}catch(c){throw c}}))})(this,e)}catch(r){throw n&&Xt.analytics.track("sdk_action_failed",{action:e.method}),r}}))}testStorage(){return ye(this,void 0,void 0,(function*(){return(function(e){return ye(this,void 0,void 0,(function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();fe.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)}))})(this.state)}))}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return ye(this,void 0,void 0,(function*(){var e;fe.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()}))}testLogger(){fe.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),fe.SocketService(`testLogger() channel=${this.state.channelId}`),fe.Ecies(`testLogger() channel=${this.state.channelId}`),fe.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;fe.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(Ee.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(Ee.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return ye(this,void 0,void 0,(function*(){var e;fe.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(Rn.PAUSED)}))}getVersion(){return As.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return ye(this,void 0,void 0,(function*(){return(function(e){return ye(this,void 0,void 0,(function*(){var n;const{state:r}=e;fe.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(Rn.LINKED)}))})(this)}))}encrypt(e){var n,r,i;const o=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),s=o?.getOtherPublicKey();if(!s)throw new Error("KeyExchange not completed");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.encrypt(e,s)}decrypt(e){var n,r,i;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return(function(n){return ye(this,arguments,void 0,(function*({channelId:r,state:i}){var o,s,a;if(!o1(r))throw fe.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(i.isOriginator)return void fe.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} isOriginator=${i.isOriginator} channelId=${r}`);const{socket:c}=(s=(o=i.communicationLayer)===null||o===void 0?void 0:o.state)!==null&&s!==void 0?s:{};c?.connected||(fe.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket already connected`),c?.connect()),Oo(Object.assign(Object.assign({id:r,event:Qt.REJECTED},i.originatorInfo),{sdkVersion:i.sdkVersion,commLayerVersion:As.version,walletVersion:(a=i.walletInfo)===null||a===void 0?void 0:a.version}),i.communicationServerUrl).catch((l=>{})),yield new Promise(((l,u)=>{c?.emit(Ee.REJECTED,{channelId:r},((f,d)=>{fe.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket=${c?.id}`,{error:f,response:d}),f?u(f):l(d)}))}))}))})({channelId:e,state:this.state})}disconnect(e){return ye(this,void 0,void 0,(function*(){return nC({options:e,instance:this})}))}}(function(t){t.RENEW="renew",t.LINK="link"})(s2||(s2={}));var Yk="ERC721",Xk="ERC1155",Gt={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function Zk(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[Yk,Xk].includes(n.params?.type||"")&&(t.warn(Gt.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(Gt.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(Gt.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),i()}}var rC=4294967295,c2=Math.floor(Math.random()*rC);function Qk(){return(t,e,n,r)=>{const i=t.id,o=c2=(c2+1)%rC;t.id=o,e.id=o,n((s=>{t.id=i,e.id=i,s()}))}}var cv=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},ls=(t,e,n)=>(cv(t,e,"read from private field"),n?n.call(t):e.get(t)),li=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},lf=(t,e,n,r)=>(cv(t,e,"write to private field"),e.set(t,n),n),Yn=(t,e,n)=>(cv(t,e,"access private method"),n),ns={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},l2={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function u2(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var Pd=(t,e)=>Object.hasOwnProperty.call(t,e);class Jk extends TypeError{constructor(e,n){let r;const{message:i,explanation:o,...s}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(o??c),o!=null&&(this.cause=c),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function _o(t){return typeof t=="object"&&t!=null}function zi(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function eM(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:o}=e,{type:s}=n,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${zi(r)}\``}=t;return{value:r,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...t,message:c}}function*f2(t,e,n,r){(function(i){return _o(i)&&typeof i[Symbol.iterator]=="function"})(t)||(t=[t]);for(const i of t){const o=eM(i,e,n,r);o&&(yield o)}}function*lv(t,e,n={}){const{path:r=[],branch:i=[t],coerce:o=!1,mask:s=!1}=n,a={path:r,branch:i};if(o&&(t=e.coercer(t,a),s&&e.type!=="type"&&_o(e.schema)&&_o(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,f]of e.entries(t,a)){const d=lv(u,f,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:o,mask:s,message:n.message});for(const h of d)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):o&&(u=h[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):_o(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}class bi{constructor(e){const{type:n,schema:r,validator:i,refiner:o,coercer:s=(c=>c),entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=s,this.validator=i?(c,l)=>f2(i(c,l),l,this,c):()=>[],this.refiner=o?(c,l)=>f2(o(c,l),l,this,c):()=>[]}assert(e,n){return iC(e,this,n)}create(e,n){return oC(e,this,n)}is(e){return Dc(e,this)}mask(e,n){return(function(r,i,o){const s=Ql(r,i,{coerce:!0,mask:!0,message:o});if(s[0])throw s[0];return s[1]})(e,this,n)}validate(e,n={}){return Ql(e,this,n)}}function iC(t,e,n){const r=Ql(t,e,{message:n});if(r[0])throw r[0]}function oC(t,e,n){const r=Ql(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Dc(t,e){return!Ql(t,e)[0]}function Ql(t,e,n={}){const r=lv(t,e,n),i=(function(o){const{done:s,value:a}=o.next();return s?void 0:a})(r);return i[0]?[new Jk(i[0],(function*(){for(const s of r)s[0]&&(yield s[0])})),void 0]:[void 0,i[1]]}function _s(t,e){return new bi({type:t,schema:null,validator:e})}function d2(t){let e;return new bi({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function sC(t){return new bi({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${zi(e)}`})}function aC(t){const e=zi(t),n=typeof t;return new bi({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${zi(r)}`})}function cC(){return _s("number",(t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${zi(t)}`))}function lC(t){const e=t?Object.keys(t):[],n=_s("never",(()=>!1));return new bi({type:"object",schema:t||null,*entries(r){if(t&&_o(r)){const i=new Set(Object.keys(r));for(const o of e)i.delete(o),yield[o,r[o],t[o]];for(const o of i)yield[o,r[o],n]}},validator:r=>_o(r)||`Expected an object, but received: ${zi(r)}`,coercer:r=>_o(r)?{...r}:r})}function h2(t){return new bi({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function uC(t,e){return new bi({type:"record",schema:null,*entries(n){if(_o(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:n=>_o(n)||`Expected an object, but received: ${zi(n)}`})}function Cs(){return _s("string",(t=>typeof t=="string"||`Expected a string, but received: ${zi(t)}`))}function kh(t){const e=t.map((n=>n.type)).join(" | ");return new bi({type:"union",schema:null,coercer(n){for(const r of t){const[i,o]=r.validate(n,{coerce:!0});if(!i)return o}return n},validator(n,r){const i=[];for(const o of t){const[...s]=lv(n,o,r),[a]=s;if(!a[0])return[];for(const[c]of s)c&&i.push(c)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${zi(n)}`,...i]}})}function tM(t){return(function(e){return(function(n){return typeof n=="object"&&n!==null&&"message"in n})(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)})(t).replace(/\.$/u,"")}function nM(t,e){return n=t,typeof n?.prototype?.constructor?.name=="string"?new t({message:e}):t({message:e});var n}var rM=class extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}};function fC(){throw new Error("setTimeout has not been defined")}function dC(){throw new Error("clearTimeout has not been defined")}var zo=fC,Wo=dC;function hC(t){if(zo===setTimeout)return setTimeout(t,0);if((zo===fC||!zo)&&setTimeout)return zo=setTimeout,setTimeout(t,0);try{return zo(t,0)}catch{try{return zo.call(null,t,0)}catch{return zo.call(this,t,0)}}}typeof or.setTimeout=="function"&&(zo=setTimeout),typeof or.clearTimeout=="function"&&(Wo=clearTimeout);var Js,bo=[],fc=!1,Lf=-1;function iM(){fc&&Js&&(fc=!1,Js.length?bo=Js.concat(bo):Lf=-1,bo.length&&pC())}function pC(){if(!fc){var t=hC(iM);fc=!0;for(var e=bo.length;e;){for(Js=bo,bo=[];++Lf<e;)Js&&Js[Lf].run();Lf=-1,e=bo.length}Js=null,fc=!1,(function(n){if(Wo===clearTimeout)return clearTimeout(n);if((Wo===dC||!Wo)&&clearTimeout)return Wo=clearTimeout,clearTimeout(n);try{return Wo(n)}catch{try{return Wo.call(null,n)}catch{return Wo.call(this,n)}}})(t)}}function gC(t,e){this.fun=t,this.array=e}gC.prototype.run=function(){this.fun.apply(null,this.array)};function va(){}var oM=va,sM=va,aM=va,cM=va,lM=va,uM=va,fM=va,Da=or.performance||{},dM=Da.now||Da.mozNow||Da.msNow||Da.oNow||Da.webkitNow||function(){return new Date().getTime()},hM=new Date,ot={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];bo.push(new gC(t,e)),bo.length!==1||fc||hC(pC)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:oM,addListener:sM,once:aM,off:cM,removeListener:lM,removeAllListeners:uM,emit:fM,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*dM.call(Da),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-hM)/1e3}},Jl=t=>lC(t);function p2({path:t,branch:e}){const n=t[t.length-1];return Pd(e[e.length-2],n)}function Nd(t){return new bi({...t,type:`optional ${t.type}`,validator:(e,n)=>!p2(n)||t.validator(e,n),refiner:(e,n)=>!p2(n)||t.refiner(e,n)})}var uf,g2,v2,kd=kh([aC(null),_s("boolean",(t=>typeof t=="boolean")),_s("finite number",(t=>Dc(t,cC())&&Number.isFinite(t))),Cs(),sC(d2((()=>kd))),uC(Cs(),d2((()=>kd)))]),eu=(uf=kd,g2=_s("any",(()=>!0)),v2=t=>((function(e,n,r="Assertion failed",i=rM){try{iC(e,n)}catch(o){throw nM(i,`${r}: ${tM(o)}.`)}})(t,kd),JSON.parse(JSON.stringify(t,((e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n})))),new bi({...uf,coercer:(t,e)=>Dc(t,g2)?uf.coercer(v2(t,e),e):uf.coercer(t,e)}));function _1(t){try{return(function(e){oC(e,eu)})(t),!0}catch{return!1}}var _l=aC("2.0"),Ff=(function(t){return new bi({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})})(kh([cC(),Cs()])),C1=Jl({code:_s("integer",(t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${zi(t)}`)),message:Cs(),data:Nd(eu),stack:Nd(Cs())}),vC=kh([uC(Cs(),eu),sC(eu)]),pM=Jl({id:Ff,jsonrpc:_l,method:Cs(),params:Nd(vC)}),gM=Jl({jsonrpc:_l,method:Cs(),params:Nd(vC)});function y2(t){return Dc(t,pM)}function m2(t){return Dc(t,C1)}lC({id:Ff,jsonrpc:_l,result:h2(_s("unknown",(()=>!0))),error:h2(C1)}),kh([Jl({id:Ff,jsonrpc:_l,result:eu}),Jl({id:Ff,jsonrpc:_l,error:C1})]);var w2=ns.internal,vM="Unspecified error message. This is a bug, please report it.",yM={code:w2,message:yC(w2)},mM="Unspecified server error.";function yC(t,e=vM){if((function(n){return Number.isInteger(n)})(t)){const n=t.toString();if(Pd(l2,n))return l2[n].message;if((function(r){return r>=-32099&&r<=-32e3})(t))return mM}return e}function b2(t,{fallbackError:e=yM,shouldIncludeStack:n=!0}={}){if(!m2(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=(function(i,o){if(i&&typeof i=="object"&&"serialize"in i&&typeof i.serialize=="function")return i.serialize();if(m2(i))return i;const s=mC(i);return{...o,data:{cause:s}}})(t,e);return n||delete r.stack,r}function mC(t){return Array.isArray(t)?t.map((e=>_1(e)?e:u2(e)?E2(e):null)):u2(t)?E2(t):_1(t)?t:null}function E2(t){return Object.getOwnPropertyNames(t).reduce(((e,n)=>{const r=t[n];return _1(r)&&(e[n]=r),e}),{})}var wC=sl;sl.default=sl,sl.stable=x2,sl.stableStringify=x2;var Md="[...]",bC="[Circular]",ha=[],ea=[];function EC(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function sl(t,e,n,r){var i;r===void 0&&(r=EC()),S1(t,"",0,[],void 0,0,r);try{i=ea.length===0?JSON.stringify(t,e,n):JSON.stringify(t,xC(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ha.length!==0;){var o=ha.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function dc(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),ha.push([r,n,e,i])):ea.push([e,n,t]):(r[n]=t,ha.push([r,n,e]))}function S1(t,e,n,r,i,o,s){var a;if(o+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void dc(bC,t,e,i);if(s.depthLimit!==void 0&&o>s.depthLimit||s.edgesLimit!==void 0&&n+1>s.edgesLimit)return void dc(Md,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)S1(t[a],a,a,r,t,o,s);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var l=c[a];S1(t[l],l,a,r,t,o,s)}}r.pop()}}function wM(t,e){return t<e?-1:t>e?1:0}function x2(t,e,n,r){r===void 0&&(r=EC());var i,o=I1(t,"",0,[],void 0,0,r)||t;try{i=ea.length===0?JSON.stringify(o,e,n):JSON.stringify(o,xC(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ha.length!==0;){var s=ha.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function I1(t,e,n,r,i,o,s){var a;if(o+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void dc(bC,t,e,i);try{if(typeof t.toJSON=="function")return}catch{return}if(s.depthLimit!==void 0&&o>s.depthLimit||s.edgesLimit!==void 0&&n+1>s.edgesLimit)return void dc(Md,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)I1(t[a],a,a,r,t,o,s);else{var c={},l=Object.keys(t).sort(wM);for(a=0;a<l.length;a++){var u=l[a];I1(t[u],u,a,r,t,o,s),c[u]=t[u]}if(i===void 0)return c;ha.push([i,e,t]),i[e]=c}r.pop()}}function xC(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(ea.length>0)for(var r=0;r<ea.length;r++){var i=ea[r];if(i[1]===e&&i[0]===n){n=i[2],ea.splice(r,1);break}}return t.call(this,e,n)}}var bM=Ph(wC),ao=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,(function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}})(this.data)&&(t.data.cause=mC(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return bM(this.serialize(),EM,2)}};function EM(t,e){if(e!=="[Circular]")return e}var Cl=t=>xM(ns.invalidRequest,t);function xM(t,e){const[n,r]=(function(i){if(i){if(typeof i=="string")return[i];if(typeof i=="object"&&!Array.isArray(i)){const{message:o,data:s}=i;if(o&&typeof o!="string")throw new Error("Must specify string message.");return[o??void 0,s]}}return[]})(e);return new ao(t,n??yC(t),r)}var AC={};function qo(){}function gt(){gt.init.call(this)}function _C(t){return t._maxListeners===void 0?gt.defaultMaxListeners:t._maxListeners}function A2(t,e,n,r){var i,o,s;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=new qo,t._eventsCount=0),s){if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=_C(t))&&i>0&&s.length>i){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,(function(c){typeof console.warn=="function"?console.warn(c):console.log(c)})(a)}}else s=o[e]=n,++t._eventsCount;return t}function _2(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function C2(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function qc(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}qo.prototype=Object.create(null),gt.EventEmitter=gt,gt.usingDomains=!1,gt.prototype.domain=void 0,gt.prototype._events=void 0,gt.prototype._maxListeners=void 0,gt.defaultMaxListeners=10,gt.init=function(){this.domain=null,gt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new qo,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},gt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},gt.prototype.getMaxListeners=function(){return _C(this)},gt.prototype.emit=function(t){var e,n,r,i,o,s,a,c=t==="error";if(s=this._events)c=c&&s.error==null;else if(!c)return!1;if(a=this.domain,c){if(e=arguments[1],!a){if(e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=s[t]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(f,d,h){if(d)f.call(h);else for(var p=f.length,g=qc(f,p),y=0;y<p;++y)g[y].call(h)})(n,u,this);break;case 2:(function(f,d,h,p){if(d)f.call(h,p);else for(var g=f.length,y=qc(f,g),v=0;v<g;++v)y[v].call(h,p)})(n,u,this,arguments[1]);break;case 3:(function(f,d,h,p,g){if(d)f.call(h,p,g);else for(var y=f.length,v=qc(f,y),m=0;m<y;++m)v[m].call(h,p,g)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(f,d,h,p,g,y){if(d)f.call(h,p,g,y);else for(var v=f.length,m=qc(f,v),w=0;w<v;++w)m[w].call(h,p,g,y)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];(function(f,d,h,p){if(d)f.apply(h,p);else for(var g=f.length,y=qc(f,g),v=0;v<g;++v)y[v].apply(h,p)})(n,u,this,i)}return!0},gt.prototype.addListener=function(t,e){return A2(this,t,e,!1)},gt.prototype.on=gt.prototype.addListener,gt.prototype.prependListener=function(t,e){return A2(this,t,e,!0)},gt.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,_2(this,t,e)),this},gt.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_2(this,t,e)),this},gt.prototype.removeListener=function(t,e){var n,r,i,o,s;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new qo:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new qo,this;delete r[t]}else(function(a,c){for(var l=c,u=l+1,f=a.length;u<f;l+=1,u+=1)a[l]=a[u];a.pop()})(n,i);r.removeListener&&this.emit("removeListener",t,s||e)}return this},gt.prototype.off=function(t,e){return this.removeListener(t,e)},gt.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new qo,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new qo:delete n[t]),this;if(arguments.length===0){for(var r,i=Object.keys(n),o=0;o<i.length;++o)(r=i[o])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new qo,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},gt.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:(function(i){for(var o=new Array(i.length),s=0;s<o.length;++s)o[s]=i[s].listener||i[s];return o})(e):[],n},gt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):C2.call(t,e)},gt.prototype.listenerCount=C2,gt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var uv=Eu(Object.freeze({__proto__:null,EventEmitter:gt,default:gt}));Object.defineProperty(AC,"__esModule",{value:!0});const AM=uv;function S2(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout((()=>{throw r}))}}let _M=class extends AM.EventEmitter{emit(t,...e){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){let o;if(e.length>0&&([o]=e),o instanceof Error)throw o;const s=new Error("Unhandled error."+(o?` (${o.message})`:""));throw s.context=o,s}const i=r[t];if(i===void 0)return!1;if(typeof i=="function")S2(i,this,e);else{const o=i.length,s=(function(a){const c=a.length,l=new Array(c);for(let u=0;u<c;u+=1)l[u]=a[u];return l})(i);for(let a=0;a<o;a+=1)S2(s[a],this,e)}return!0}};var Dd,rs,za,al,Uf,Hf,T1,$f,O1,W0,I2,Vf,R1,q0,T2,Sl,Bd,Y0,O2,CC=AC.default=_M,ri=class jf extends CC{constructor({notificationHandler:e}={}){super(),li(this,al),li(this,Hf),li(this,$f),li(this,Dd,!1),li(this,rs,void 0),li(this,za,void 0),lf(this,rs,[]),lf(this,za,e)}destroy(){ls(this,rs).forEach((e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()})),lf(this,rs,[]),lf(this,Dd,!0)}push(e){Yn(this,al,Uf).call(this),ls(this,rs).push(e)}handle(e,n){if(Yn(this,al,Uf).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?Yn(this,Hf,T1).call(this,e,n):Yn(this,Hf,T1).call(this,e):n?Yn(this,$f,O1).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return Yn(this,al,Uf).call(this),async(e,n,r,i)=>{var o,s;try{const[a,c,l]=await Yn(o=jf,Vf,R1).call(o,e,n,ls(this,rs));return c?(await Yn(s=jf,Sl,Bd).call(s,l),i(a)):r((async u=>{var f;try{await Yn(f=jf,Sl,Bd).call(f,l)}catch(d){return u(d)}return u()}))}catch(a){return i(a)}}}async _promiseHandle(e){return new Promise(((n,r)=>{Yn(this,$f,O1).call(this,e,((i,o)=>{i&&o===void 0?r(i):n(o)})).catch(r)}))}};Dd=new WeakMap,rs=new WeakMap,za=new WeakMap,al=new WeakSet,Uf=function(){if(ls(this,Dd))throw new Error("This engine is destroyed and can no longer be used.")},Hf=new WeakSet,T1=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new ao(ns.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter((r=>r!==void 0));return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},$f=new WeakSet,O1=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const s=new ao(ns.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(s,{id:null,jsonrpc:"2.0",error:s})}if(typeof t.method!="string"){const s=new ao(ns.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return ls(this,za)&&!y2(t)?e(null):e(s,{id:t.id??null,jsonrpc:"2.0",error:s})}if(ls(this,za)&&Dc(t,gM)&&!y2(t)){try{await ls(this,za).call(this,t)}catch(s){return e(s)}return e(null)}let r=null;const i={...t},o={id:i.id,jsonrpc:i.jsonrpc};try{await Yn(n=ri,W0,I2).call(n,i,o,ls(this,rs))}catch(s){r=s}return r&&(delete o.result,o.error||(o.error=b2(r))),e(r,o)},W0=new WeakSet,I2=async function(t,e,n){var r,i,o;const[s,a,c]=await Yn(r=ri,Vf,R1).call(r,t,e,n);if(Yn(i=ri,Y0,O2).call(i,t,e,a),await Yn(o=ri,Sl,Bd).call(o,c),s)throw s},Vf=new WeakSet,R1=async function(t,e,n){var r;const i=[];let o=null,s=!1;for(const a of n)if([o,s]=await Yn(r=ri,q0,T2).call(r,t,e,a,i),s)break;return[o,s,i.reverse()]},q0=new WeakSet,T2=async function(t,e,n,r){return new Promise((i=>{const o=a=>{const c=a||e.error;c&&(e.error=b2(c)),i([c,!0])},s=a=>{e.error?o(e.error):(a&&(typeof a!="function"&&o(new ao(ns.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${X0(t)}`,{request:t})),r.push(a)),i([null,!1]))};try{n(t,e,s,o)}catch(a){o(a)}}))},Sl=new WeakSet,Bd=async function(t){for(const e of t)await new Promise(((n,r)=>{e((i=>i?r(i):n()))}))},Y0=new WeakSet,O2=function(t,e,n){if(!Pd(e,"result")&&!Pd(e,"error"))throw new ao(ns.internal,`JsonRpcEngine: Response has no error or result for request:
${X0(t)}`,{request:t});if(!n)throw new ao(ns.internal,`JsonRpcEngine: Nothing ended request:
${X0(t)}`,{request:t})},li(ri,W0),li(ri,Vf),li(ri,q0),li(ri,Sl),li(ri,Y0);var CM=ri;function X0(t){return JSON.stringify(t,null,2)}var SC=Object.freeze(["eth_subscription"]),SM=(t=console)=>[Qk(),IM(t),Zk(t)];function IM(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=Cl({message:"The request 'method' must be a non-empty string.",data:e})),r((i=>{const{error:o}=n;return o&&t.error(`MetaMask - RPC Error: ${o.message}`,o),i()}))}}var Kf=(t,e,n=!0)=>(r,i)=>{r||i.error?e(r||i.error):!n||Array.isArray(i)?t(i):t(i.result)},IC=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),TC=()=>{};async function R2(t,e){try{const n=await(async function(){return{name:TM(window),icon:await OM(window)}})();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},TC)}catch(n){e.error({message:Gt.errors.sendSiteMetadata(),originalError:n})}}function TM(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function OM(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await RM(r.href))return r.href;return null}async function RM(t){return new Promise(((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}}))}var OC=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},ki=(t,e,n)=>(OC(t,e,"read from private field"),n?n.call(t):e.get(t)),P1=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},co=(t,e,n,r)=>(OC(t,e,"write to private field"),e.set(t,n),n);function P2(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout((()=>{throw r}))}}class PM extends gt{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let s;if(n.length>0&&([s]=n),s instanceof Error)throw s;const a=new Error("Unhandled error."+(s?` (${s.message})`:""));throw a.context=s,a}const o=i[e];if(o===void 0)return!1;if(typeof o=="function")P2(o,this,n);else{const s=o.length,a=(function(c){const l=c.length,u=new Array(l);for(let f=0;f<l;f+=1)u[f]=c[f];return u})(o);for(let c=0;c<s;c+=1)P2(a[c],this,n)}return!0}}var Yo,$s,NM=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;i--!=0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!=0;){var s=o[i];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n},kM=Ph(NM),RC=class PC extends PM{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),P1(this,Yo,void 0),P1(this,$s,void 0),this._log=e,this.setMaxListeners(n),this._state={...PC._defaultState},co(this,$s,null),co(this,Yo,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new CM;r.forEach((o=>i.push(o))),this._rpcEngine=i}get chainId(){return ki(this,Yo)}get selectedAddress(){return ki(this,$s)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw Cl({message:Gt.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw Cl({message:Gt.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw Cl({message:Gt.errors.invalidRequestParams(),data:e});const i=r==null?{method:n}:{method:n,params:r};return new Promise(((o,s)=>{this._rpcRequest(i,Kf(o,s))}))}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:i,networkVersion:o}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:o}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(i,o)=>{this._handleAccountsChanged(o.result??[],e.method==="eth_accounts"),n(i,o)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(Gt.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new ao(1013,n??Gt.errors.disconnected()),this._log.debug(r)):(r=new ao(1011,n??Gt.errors.permanentlyDisconnected()),this._log.error(r),co(this,Yo,null),this._state.accounts=null,co(this,$s,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){IC(e)?(this._handleConnect(e),e!==ki(this,Yo)&&(co(this,Yo,e),this._state.initialized&&this.emit("chainChanged",ki(this,Yo)))):this._log.error(Gt.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const i of e)if(typeof i!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!kM(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,ki(this,$s)!==r[0]&&co(this,$s,r[0]||null),this._state.initialized)){const i=[...r];this.emit("accountsChanged",i)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};Yo=new WeakMap,$s=new WeakMap,RC._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var fv,MM=RC,N1={exports:{}},NC=uv.EventEmitter,dv=Eu(YN);fv=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var kC=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},DM=/%[sdj%]/g;function Mh(t){if(!tu(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Hi(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(t).replace(DM,(function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}})),s=r[n];n<i;s=r[++n])_u(s)||!ya(s)?o+=" "+s:o+=" "+Hi(s);return o}function hv(t,e){if(Di(or.process))return function(){return hv(t,e).apply(this,arguments)};if(ot.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(ot.throwDeprecation)throw new Error(e);ot.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var Z0,ff={};function MC(t){return Di(Z0)&&(Z0=ot.env.NODE_DEBUG||""),t=t.toUpperCase(),!ff[t]&&(new RegExp("\\b"+t+"\\b","i").test(Z0)?ff[t]=function(){var e=Mh.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:ff[t]=function(){}),ff[t]}function Hi(t,e){var n={seen:[],stylize:LM};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Dh(e)?n.showHidden=e:e&&yv(n,e),Di(n.showHidden)&&(n.showHidden=!1),Di(n.depth)&&(n.depth=2),Di(n.colors)&&(n.colors=!1),Di(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=BM),Ld(n,t,n.depth)}function BM(t,e){var n=Hi.styles[e];return n?"\x1B["+Hi.colors[n][0]+"m"+t+"\x1B["+Hi.colors[n][1]+"m":t}function LM(t,e){return t}function Ld(t,e,n){if(t.customInspect&&e&&Ol(e.inspect)&&e.inspect!==Hi&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return tu(r)||(r=Ld(t,r,n)),r}var i=(function(d,h){if(Di(h))return d.stylize("undefined","undefined");if(tu(h)){var p="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return d.stylize(p,"string")}if(gv(h))return d.stylize(""+h,"number");if(Dh(h))return d.stylize(""+h,"boolean");if(_u(h))return d.stylize("null","null")})(t,e);if(i)return i;var o=Object.keys(e),s=(function(d){var h={};return d.forEach((function(p,g){h[p]=!0})),h})(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),Tl(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Q0(e);if(o.length===0){if(Ol(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(Il(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Fd(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Tl(e))return Q0(e)}var c,l="",u=!1,f=["{","}"];return pv(e)&&(u=!0,f=["[","]"]),Ol(e)&&(l=" [Function"+(e.name?": "+e.name:"")+"]"),Il(e)&&(l=" "+RegExp.prototype.toString.call(e)),Fd(e)&&(l=" "+Date.prototype.toUTCString.call(e)),Tl(e)&&(l=" "+Q0(e)),o.length!==0||u&&e.length!=0?n<0?Il(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=u?(function(d,h,p,g,y){for(var v=[],m=0,w=h.length;m<w;++m)HC(h,String(m))?v.push(J0(d,h,p,g,String(m),!0)):v.push("");return y.forEach((function(E){E.match(/^\d+$/)||v.push(J0(d,h,p,g,E,!0))})),v})(t,e,n,s,o):o.map((function(d){return J0(t,e,n,s,d,u)})),t.seen.pop(),(function(d,h,p){var g=d.reduce((function(y,v){return v.indexOf(`
`),y+v.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return g>60?p[0]+(h===""?"":h+`
 `)+" "+d.join(`,
  `)+" "+p[1]:p[0]+h+" "+d.join(", ")+" "+p[1]})(c,l,f)):f[0]+l+f[1]}function Q0(t){return"["+Error.prototype.toString.call(t)+"]"}function J0(t,e,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),HC(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=_u(n)?Ld(t,c.value,null):Ld(t,c.value,n-1)).indexOf(`
`)>-1&&(a=o?a.split(`
`).map((function(l){return"  "+l})).join(`
`).substr(2):`
`+a.split(`
`).map((function(l){return"   "+l})).join(`
`)):a=t.stylize("[Circular]","special")),Di(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function pv(t){return Array.isArray(t)}function Dh(t){return typeof t=="boolean"}function _u(t){return t===null}function DC(t){return t==null}function gv(t){return typeof t=="number"}function tu(t){return typeof t=="string"}function BC(t){return typeof t=="symbol"}function Di(t){return t===void 0}function Il(t){return ya(t)&&vv(t)==="[object RegExp]"}function ya(t){return typeof t=="object"&&t!==null}function Fd(t){return ya(t)&&vv(t)==="[object Date]"}function Tl(t){return ya(t)&&(vv(t)==="[object Error]"||t instanceof Error)}function Ol(t){return typeof t=="function"}function LC(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function FC(t){return me.isBuffer(t)}function vv(t){return Object.prototype.toString.call(t)}function ep(t){return t<10?"0"+t.toString(10):t.toString(10)}Hi.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Hi.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var FM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function UC(){var t,e;console.log("%s - %s",(t=new Date,e=[ep(t.getHours()),ep(t.getMinutes()),ep(t.getSeconds())].join(":"),[t.getDate(),FM[t.getMonth()],e].join(" ")),Mh.apply(null,arguments))}function yv(t,e){if(!e||!ya(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function HC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Vs=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function mv(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(Vs&&t[Vs]){var e;if(typeof(e=t[Vs])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,Vs,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,i=new Promise((function(a,c){n=a,r=c})),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push((function(a,c){a?r(a):n(c)}));try{t.apply(this,o)}catch(a){r(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Vs&&Object.defineProperty(e,Vs,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,kC(t))}function UM(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function $C(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(a){ot.nextTick(s.bind(null,null,a))}),(function(a){ot.nextTick(UM.bind(null,a,s))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,kC(t)),e}mv.custom=Vs;var tp,N2,HM={inherits:fv,_extend:yv,log:UC,isBuffer:FC,isPrimitive:LC,isFunction:Ol,isError:Tl,isDate:Fd,isObject:ya,isRegExp:Il,isUndefined:Di,isSymbol:BC,isString:tu,isNumber:gv,isNullOrUndefined:DC,isNull:_u,isBoolean:Dh,isArray:pv,inspect:Hi,deprecate:hv,format:Mh,debuglog:MC,promisify:mv,callbackify:$C},VC=Eu(Object.freeze({__proto__:null,_extend:yv,callbackify:$C,debuglog:MC,default:HM,deprecate:hv,format:Mh,inherits:fv,inspect:Hi,isArray:pv,isBoolean:Dh,isBuffer:FC,isDate:Fd,isError:Tl,isFunction:Ol,isNull:_u,isNullOrUndefined:DC,isNumber:gv,isObject:ya,isPrimitive:LC,isRegExp:Il,isString:tu,isSymbol:BC,isUndefined:Di,log:UC,promisify:mv}));function $M(){if(N2)return tp;function t(c,l){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);l&&(f=f.filter((function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable}))),u.push.apply(u,f)}return u}function e(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?t(Object(u),!0).forEach((function(f){n(c,f,u[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach((function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(u,f))}))}return c}function n(c,l,u){return(l=i(l))in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u,c}function r(c,l,u){return l&&(function(f,d){for(var h=0;h<d.length;h++){var p=d[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,i(p.key),p)}})(c.prototype,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function i(c){var l=(function(u,f){if(typeof u!="object"||u===null)return u;var d=u[Symbol.toPrimitive];if(d!==void 0){var h=d.call(u,f);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)})(c,"string");return typeof l=="symbol"?l:String(l)}N2=1;var o=dv.Buffer,s=VC.inspect,a=s&&s.custom||"inspect";return tp=(function(){function c(){(function(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return r(c,[{key:"push",value:function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var u=this.head,f=""+u.data;u=u.next;)f+=l+u.data;return f}},{key:"concat",value:function(l){if(this.length===0)return o.alloc(0);for(var u,f,d,h=o.allocUnsafe(l>>>0),p=this.head,g=0;p;)u=p.data,f=h,d=g,o.prototype.copy.call(u,f,d),g+=p.data.length,p=p.next;return h}},{key:"consume",value:function(l,u){var f;return l<this.head.data.length?(f=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):f=l===this.head.data.length?this.shift():u?this._getString(l):this._getBuffer(l),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var u=this.head,f=1,d=u.data;for(l-=d.length;u=u.next;){var h=u.data,p=l>h.length?h.length:l;if(p===h.length?d+=h:d+=h.slice(0,l),(l-=p)===0){p===h.length?(++f,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=h.slice(p));break}++f}return this.length-=f,d}},{key:"_getBuffer",value:function(l){var u=o.allocUnsafe(l),f=this.head,d=1;for(f.data.copy(u),l-=f.data.length;f=f.next;){var h=f.data,p=l>h.length?h.length:l;if(h.copy(u,u.length-l,0,p),(l-=p)===0){p===h.length?(++d,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=h.slice(p));break}++d}return this.length-=d,u}},{key:a,value:function(l,u){return s(this,e(e({},u),{},{depth:0,customInspect:!1}))}}]),c})(),tp}function k2(t,e){k1(t,e),Gf(t)}function Gf(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function k1(t,e){t.emit("error",e)}var jC={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ot.nextTick(k1,this,t)):ot.nextTick(k1,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(o){!e&&o?n._writableState?n._writableState.errorEmitted?ot.nextTick(Gf,n):(n._writableState.errorEmitted=!0,ot.nextTick(k2,n,o)):ot.nextTick(k2,n,o):e?(ot.nextTick(Gf,n),e(o)):ot.nextTick(Gf,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}},ma={},KC={};function Lr(t,e,n){n||(n=Error);var r=(function(i){var o,s;function a(c,l,u){return i.call(this,(function(f,d,h){return typeof e=="string"?e:e(f,d,h)})(c,l,u))||this}return s=i,(o=a).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,a})(n);r.prototype.name=n.name,r.prototype.code=t,KC[t]=r}function M2(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(r){return String(r)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}Lr("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),Lr("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,i,o;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",(function(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c})(t," argument"))o="The ".concat(t," ").concat(r," ").concat(M2(e,"type"));else{var s=(function(a,c,l){return typeof l!="number"&&(l=0),!(l+c.length>a.length)&&a.indexOf(c,l)!==-1})(t,".")?"property":"argument";o='The "'.concat(t,'" ').concat(s," ").concat(r," ").concat(M2(e,"type"))}return o+=". Received type ".concat(typeof n)}),TypeError),Lr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Lr("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),Lr("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Lr("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),Lr("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Lr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Lr("ERR_STREAM_WRITE_AFTER_END","write after end"),Lr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Lr("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),Lr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ma.codes=KC;var VM=ma.codes.ERR_INVALID_OPT_VALUE,np,D2,rp,B2,GC={getHighWaterMark:function(t,e,n,r){var i=(function(o,s,a){return o.highWaterMark!=null?o.highWaterMark:s?o[a]:null})(e,r,n);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new VM(r?n:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}},jM=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Cu=Eu(Object.freeze({__proto__:null,default:jM})),KM=function(t,e){if(ip("noDeprecation"))return t;var n=!1;return function(){if(!n){if(ip("throwDeprecation"))throw new Error(e);ip("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}};function ip(t){try{if(!Wr.localStorage)return!1}catch{return!1}var e=Wr.localStorage[t];return e!=null&&String(e).toLowerCase()==="true"}function zC(){if(D2)return np;function t(j){var L=this;this.next=null,this.entry=null,this.finish=function(){(function(I,x,P){var G=I.entry;for(I.entry=null;G;){var b=G.callback;x.pendingcb--,b(P),G=G.next}x.corkedRequestsFree.next=I})(L,j)}}var e;D2=1,np=S,S.WritableState=E;var n={deprecate:KM},r=NC,i=dv.Buffer,o=(Wr!==void 0?Wr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,a=jC,c=GC.getHighWaterMark,l=ma.codes,u=l.ERR_INVALID_ARG_TYPE,f=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,h=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,g=l.ERR_STREAM_NULL_VALUES,y=l.ERR_STREAM_WRITE_AFTER_END,v=l.ERR_UNKNOWN_ENCODING,m=a.errorOrDestroy;function w(){}function E(j,L,I){e=e||Tc(),j=j||{},typeof I!="boolean"&&(I=L instanceof e),this.objectMode=!!j.objectMode,I&&(this.objectMode=this.objectMode||!!j.writableObjectMode),this.highWaterMark=c(this,j,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var x=j.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(P){(function(G,b){var C=G._writableState,T=C.sync,k=C.writecb;if(typeof k!="function")throw new d;if((function(_){_.writing=!1,_.writecb=null,_.length-=_.writelen,_.writelen=0})(C),b)(function(_,R,D,H,N){--R.pendingcb,D?(ot.nextTick(N,H),ot.nextTick(Y,_,R),_._writableState.errorEmitted=!0,m(_,H)):(N(H),_._writableState.errorEmitted=!0,m(_,H),Y(_,R))})(G,C,T,b,k);else{var A=U(C)||G.destroyed;A||C.corked||C.bufferProcessing||!C.bufferedRequest||$(G,C),T?ot.nextTick(F,G,C,A,k):F(G,C,A,k)}})(L,P)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function S(j){var L=this instanceof(e=e||Tc());if(!L&&!s.call(S,this))return new S(j);this._writableState=new E(j,this,L),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final)),r.call(this)}function O(j,L,I,x,P,G,b){L.writelen=x,L.writecb=b,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new p("write")):I?j._writev(P,L.onwrite):j._write(P,G,L.onwrite),L.sync=!1}function F(j,L,I,x){I||(function(P,G){G.length===0&&G.needDrain&&(G.needDrain=!1,P.emit("drain"))})(j,L),L.pendingcb--,x(),Y(j,L)}function $(j,L){L.bufferProcessing=!0;var I=L.bufferedRequest;if(j._writev&&I&&I.next){var x=L.bufferedRequestCount,P=new Array(x),G=L.corkedRequestsFree;G.entry=I;for(var b=0,C=!0;I;)P[b]=I,I.isBuf||(C=!1),I=I.next,b+=1;P.allBuffers=C,O(j,L,!0,L.length,P,"",G.finish),L.pendingcb++,L.lastBufferedRequest=null,G.next?(L.corkedRequestsFree=G.next,G.next=null):L.corkedRequestsFree=new t(L),L.bufferedRequestCount=0}else{for(;I;){var T=I.chunk,k=I.encoding,A=I.callback;if(O(j,L,!1,L.objectMode?1:T.length,T,k,A),I=I.next,L.bufferedRequestCount--,L.writing)break}I===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=I,L.bufferProcessing=!1}function U(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function B(j,L){j._final((function(I){L.pendingcb--,I&&m(j,I),L.prefinished=!0,j.emit("prefinish"),Y(j,L)}))}function Y(j,L){var I=U(L);if(I&&((function(P,G){G.prefinished||G.finalCalled||(typeof P._final!="function"||G.destroyed?(G.prefinished=!0,P.emit("prefinish")):(G.pendingcb++,G.finalCalled=!0,ot.nextTick(B,P,G)))})(j,L),L.pendingcb===0&&(L.finished=!0,j.emit("finish"),L.autoDestroy))){var x=j._readableState;(!x||x.autoDestroy&&x.endEmitted)&&j.destroy()}return I}return Cu(S,r),E.prototype.getBuffer=function(){for(var j=this.bufferedRequest,L=[];j;)L.push(j),j=j.next;return L},(function(){try{Object.defineProperty(E.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(j){return!!s.call(this,j)||this===S&&j&&j._writableState instanceof E}})):s=function(j){return j instanceof this},S.prototype.pipe=function(){m(this,new h)},S.prototype.write=function(j,L,I){var x,P=this._writableState,G=!1,b=!P.objectMode&&(x=j,i.isBuffer(x)||x instanceof o);return b&&!i.isBuffer(j)&&(j=(function(C){return i.from(C)})(j)),typeof L=="function"&&(I=L,L=null),b?L="buffer":L||(L=P.defaultEncoding),typeof I!="function"&&(I=w),P.ending?(function(C,T){var k=new y;m(C,k),ot.nextTick(T,k)})(this,I):(b||(function(C,T,k,A){var _;return k===null?_=new g:typeof k=="string"||T.objectMode||(_=new u("chunk",["string","Buffer"],k)),!_||(m(C,_),ot.nextTick(A,_),!1)})(this,P,j,I))&&(P.pendingcb++,G=(function(C,T,k,A,_,R){if(!k){var D=(function(z,Z,oe){return z.objectMode||z.decodeStrings===!1||typeof Z!="string"||(Z=i.from(Z,oe)),Z})(T,A,_);A!==D&&(k=!0,_="buffer",A=D)}var H=T.objectMode?1:A.length;T.length+=H;var N=T.length<T.highWaterMark;if(N||(T.needDrain=!0),T.writing||T.corked){var K=T.lastBufferedRequest;T.lastBufferedRequest={chunk:A,encoding:_,isBuf:k,callback:R,next:null},K?K.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else O(C,T,!1,H,A,_,R);return N})(this,P,b,j,L,I)),G},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,j.writing||j.corked||j.bufferProcessing||!j.bufferedRequest||$(this,j))},S.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=j.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((j+"").toLowerCase())>-1))throw new v(j);return this._writableState.defaultEncoding=j,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(j,L,I){I(new f("_write()"))},S.prototype._writev=null,S.prototype.end=function(j,L,I){var x=this._writableState;return typeof j=="function"?(I=j,j=null,L=null):typeof L=="function"&&(I=L,L=null),j!=null&&this.write(j,L),x.corked&&(x.corked=1,this.uncork()),x.ending||(function(P,G,b){G.ending=!0,Y(P,G),b&&(G.finished?ot.nextTick(b):P.once("finish",b)),G.ended=!0,P.writable=!1})(this,x,I),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(j){this._writableState&&(this._writableState.destroyed=j)}}),S.prototype.destroy=a.destroy,S.prototype._undestroy=a.undestroy,S.prototype._destroy=function(j,L){L(j)},np}function Tc(){if(B2)return rp;B2=1;var t=Object.keys||function(l){var u=[];for(var f in l)u.push(f);return u};rp=s;var e=WC(),n=zC();Cu(s,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var o=r[i];s.prototype[o]||(s.prototype[o]=n.prototype[o])}function s(l){if(!(this instanceof s))return new s(l);e.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||ot.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),rp}var GM=me.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function zf(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),(function(e){if(e&&!GM(e))throw new Error("Unknown encoding: "+e)})(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=WM;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=qM;break;default:return void(this.write=zM)}this.charBuffer=new me(6),this.charReceived=0,this.charLength=0}function zM(t){return t.toString(this.encoding)}function WM(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function qM(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}zf.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(i=e.charCodeAt(r))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},zf.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},zf.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var L2=Eu(Object.freeze({__proto__:null,StringDecoder:zf})),F2=ma.codes.ERR_STREAM_PREMATURE_CLOSE;function YM(){}var op,U2,H2,$2,sp,V2,wv=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=(function(p){var g=!1;return function(){if(!g){g=!0;for(var y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];p.apply(this,v)}}})(r||YM);var i=n.readable||n.readable!==!1&&e.readable,o=n.writable||n.writable!==!1&&e.writable,s=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){o=!1,a=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,o||r.call(e)},f=function(p){r.call(e,p)},d=function(){var p;return i&&!l?(e._readableState&&e._readableState.ended||(p=new F2),r.call(e,p)):o&&!a?(e._writableState&&e._writableState.ended||(p=new F2),r.call(e,p)):void 0},h=function(){e.req.on("finish",c)};return(function(p){return p.setHeader&&typeof p.abort=="function"})(e)?(e.on("complete",c),e.on("abort",d),e.req?h():e.on("request",h)):o&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",u),e.on("finish",c),n.error!==!1&&e.on("error",f),e.on("close",d),function(){e.removeListener("complete",c),e.removeListener("abort",d),e.removeListener("request",h),e.req&&e.req.removeListener("finish",c),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",c),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",d)}};function XM(){if(U2)return op;var t;function e(g,y,v){return(y=(function(m){var w=(function(E,S){if(typeof E!="object"||E===null)return E;var O=E[Symbol.toPrimitive];if(O!==void 0){var F=O.call(E,S);if(typeof F!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(E)})(m,"string");return typeof w=="symbol"?w:String(w)})(y))in g?Object.defineProperty(g,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[y]=v,g}U2=1;var n=wv,r=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),s=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function u(g,y){return{value:g,done:y}}function f(g){var y=g[r];if(y!==null){var v=g[l].read();v!==null&&(g[a]=null,g[r]=null,g[i]=null,y(u(v,!1)))}}function d(g){ot.nextTick(f,g)}var h=Object.getPrototypeOf((function(){})),p=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var g=this,y=this[o];if(y!==null)return Promise.reject(y);if(this[s])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise((function(E,S){ot.nextTick((function(){g[o]?S(g[o]):E(u(void 0,!0))}))}));var v,m=this[a];if(m)v=new Promise((function(E,S){return function(O,F){E.then((function(){S[s]?O(u(void 0,!0)):S[c](O,F)}),F)}})(m,this));else{var w=this[l].read();if(w!==null)return Promise.resolve(u(w,!1));v=new Promise(this[c])}return this[a]=v,v}},Symbol.asyncIterator,(function(){return this})),e(t,"return",(function(){var g=this;return new Promise((function(y,v){g[l].destroy(null,(function(m){m?v(m):y(u(void 0,!0))}))}))})),t),h);return op=function(g){var y,v=Object.create(p,(e(y={},l,{value:g,writable:!0}),e(y,r,{value:null,writable:!0}),e(y,i,{value:null,writable:!0}),e(y,o,{value:null,writable:!0}),e(y,s,{value:g._readableState.endEmitted,writable:!0}),e(y,c,{value:function(m,w){var E=v[l].read();E?(v[a]=null,v[r]=null,v[i]=null,m(u(E,!1))):(v[r]=m,v[i]=w)},writable:!0}),y));return v[a]=null,n(g,(function(m){if(m&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=v[i];return w!==null&&(v[a]=null,v[r]=null,v[i]=null,w(m)),void(v[o]=m)}var E=v[r];E!==null&&(v[a]=null,v[r]=null,v[i]=null,E(u(void 0,!0))),v[s]=!0})),g.on("readable",d.bind(null,v)),v},op}function WC(){if(V2)return sp;var t;V2=1,sp=S,S.ReadableState=E,uv.EventEmitter;var e=function(A,_){return A.listeners(_).length},n=NC,r=dv.Buffer,i=(Wr!==void 0?Wr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,s=VC;o=s&&s.debuglog?s.debuglog("stream"):function(){};var a,c,l,u=$M(),f=jC,d=GC.getHighWaterMark,h=ma.codes,p=h.ERR_INVALID_ARG_TYPE,g=h.ERR_STREAM_PUSH_AFTER_EOF,y=h.ERR_METHOD_NOT_IMPLEMENTED,v=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Cu(S,n);var m=f.errorOrDestroy,w=["error","close","destroy","pause","resume"];function E(A,_,R){t=t||Tc(),A=A||{},typeof R!="boolean"&&(R=_ instanceof t),this.objectMode=!!A.objectMode,R&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=d(this,A,"readableHighWaterMark",R),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(a||(a=L2.StringDecoder),this.decoder=new a(A.encoding),this.encoding=A.encoding)}function S(A){if(t=t||Tc(),!(this instanceof S))return new S(A);var _=this instanceof t;this._readableState=new E(A,this,_),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),n.call(this)}function O(A,_,R,D,H){o("readableAddChunk",_);var N,K=A._readableState;if(_===null)K.reading=!1,(function(z,Z){if(o("onEofChunk"),!Z.ended){if(Z.decoder){var oe=Z.decoder.end();oe&&oe.length&&(Z.buffer.push(oe),Z.length+=Z.objectMode?1:oe.length)}Z.ended=!0,Z.sync?B(z):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,Y(z)))}})(A,K);else if(H||(N=(function(z,Z){var oe;M=Z,r.isBuffer(M)||M instanceof i||typeof Z=="string"||Z===void 0||z.objectMode||(oe=new p("chunk",["string","Buffer","Uint8Array"],Z));var M;return oe})(K,_)),N)m(A,N);else if(K.objectMode||_&&_.length>0)if(typeof _=="string"||K.objectMode||Object.getPrototypeOf(_)===r.prototype||(_=(function(z){return r.from(z)})(_)),D)K.endEmitted?m(A,new v):F(A,K,_,!0);else if(K.ended)m(A,new g);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!R?(_=K.decoder.write(_),K.objectMode||_.length!==0?F(A,K,_,!1):j(A,K)):F(A,K,_,!1)}else D||(K.reading=!1,j(A,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function F(A,_,R,D){_.flowing&&_.length===0&&!_.sync?(_.awaitDrain=0,A.emit("data",R)):(_.length+=_.objectMode?1:R.length,D?_.buffer.unshift(R):_.buffer.push(R),_.needReadable&&B(A)),j(A,_)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),S.prototype.destroy=f.destroy,S.prototype._undestroy=f.undestroy,S.prototype._destroy=function(A,_){_(A)},S.prototype.push=function(A,_){var R,D=this._readableState;return D.objectMode?R=!0:typeof A=="string"&&((_=_||D.defaultEncoding)!==D.encoding&&(A=r.from(A,_),_=""),R=!0),O(this,A,_,!1,R)},S.prototype.unshift=function(A){return O(this,A,null,!0,!1)},S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(A){a||(a=L2.StringDecoder);var _=new a(A);this._readableState.decoder=_,this._readableState.encoding=this._readableState.decoder.encoding;for(var R=this._readableState.buffer.head,D="";R!==null;)D+=_.write(R.data),R=R.next;return this._readableState.buffer.clear(),D!==""&&this._readableState.buffer.push(D),this._readableState.length=D.length,this};var $=1073741824;function U(A,_){return A<=0||_.length===0&&_.ended?0:_.objectMode?1:A!=A?_.flowing&&_.length?_.buffer.head.data.length:_.length:(A>_.highWaterMark&&(_.highWaterMark=(function(R){return R>=$?R=$:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R})(A)),A<=_.length?A:_.ended?_.length:(_.needReadable=!0,0))}function B(A){var _=A._readableState;o("emitReadable",_.needReadable,_.emittedReadable),_.needReadable=!1,_.emittedReadable||(o("emitReadable",_.flowing),_.emittedReadable=!0,ot.nextTick(Y,A))}function Y(A){var _=A._readableState;o("emitReadable_",_.destroyed,_.length,_.ended),_.destroyed||!_.length&&!_.ended||(A.emit("readable"),_.emittedReadable=!1),_.needReadable=!_.flowing&&!_.ended&&_.length<=_.highWaterMark,G(A)}function j(A,_){_.readingMore||(_.readingMore=!0,ot.nextTick(L,A,_))}function L(A,_){for(;!_.reading&&!_.ended&&(_.length<_.highWaterMark||_.flowing&&_.length===0);){var R=_.length;if(o("maybeReadMore read 0"),A.read(0),R===_.length)break}_.readingMore=!1}function I(A){var _=A._readableState;_.readableListening=A.listenerCount("readable")>0,_.resumeScheduled&&!_.paused?_.flowing=!0:A.listenerCount("data")>0&&A.resume()}function x(A){o("readable nexttick read 0"),A.read(0)}function P(A,_){o("resume",_.reading),_.reading||A.read(0),_.resumeScheduled=!1,A.emit("resume"),G(A),_.flowing&&!_.reading&&A.read(0)}function G(A){var _=A._readableState;for(o("flow",_.flowing);_.flowing&&A.read()!==null;);}function b(A,_){return _.length===0?null:(_.objectMode?R=_.buffer.shift():!A||A>=_.length?(R=_.decoder?_.buffer.join(""):_.buffer.length===1?_.buffer.first():_.buffer.concat(_.length),_.buffer.clear()):R=_.buffer.consume(A,_.decoder),R);var R}function C(A){var _=A._readableState;o("endReadable",_.endEmitted),_.endEmitted||(_.ended=!0,ot.nextTick(T,_,A))}function T(A,_){if(o("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,_.readable=!1,_.emit("end"),A.autoDestroy)){var R=_._writableState;(!R||R.autoDestroy&&R.finished)&&_.destroy()}}function k(A,_){for(var R=0,D=A.length;R<D;R++)if(A[R]===_)return R;return-1}return S.prototype.read=function(A){o("read",A),A=parseInt(A,10);var _=this._readableState,R=A;if(A!==0&&(_.emittedReadable=!1),A===0&&_.needReadable&&((_.highWaterMark!==0?_.length>=_.highWaterMark:_.length>0)||_.ended))return o("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?C(this):B(this),null;if((A=U(A,_))===0&&_.ended)return _.length===0&&C(this),null;var D,H=_.needReadable;return o("need readable",H),(_.length===0||_.length-A<_.highWaterMark)&&o("length less than watermark",H=!0),_.ended||_.reading?o("reading or ended",H=!1):H&&(o("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(A=U(R,_))),(D=A>0?b(A,_):null)===null?(_.needReadable=_.length<=_.highWaterMark,A=0):(_.length-=A,_.awaitDrain=0),_.length===0&&(_.ended||(_.needReadable=!0),R!==A&&_.ended&&C(this)),D!==null&&this.emit("data",D),D},S.prototype._read=function(A){m(this,new y("_read()"))},S.prototype.pipe=function(A,_){var R=this,D=this._readableState;switch(D.pipesCount){case 0:D.pipes=A;break;case 1:D.pipes=[D.pipes,A];break;default:D.pipes.push(A)}D.pipesCount+=1,o("pipe count=%d opts=%j",D.pipesCount,_);var H=(!_||_.end!==!1)&&A!==ot.stdout&&A!==ot.stderr?K:ie;function N(te,ne){o("onunpipe"),te===R&&ne&&ne.hasUnpiped===!1&&(ne.hasUnpiped=!0,o("cleanup"),A.removeListener("close",V),A.removeListener("finish",X),A.removeListener("drain",z),A.removeListener("error",M),A.removeListener("unpipe",N),R.removeListener("end",K),R.removeListener("end",ie),R.removeListener("data",oe),Z=!0,!D.awaitDrain||A._writableState&&!A._writableState.needDrain||z())}function K(){o("onend"),A.end()}D.endEmitted?ot.nextTick(H):R.once("end",H),A.on("unpipe",N);var z=(function(te){return function(){var ne=te._readableState;o("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&e(te,"data")&&(ne.flowing=!0,G(te))}})(R);A.on("drain",z);var Z=!1;function oe(te){o("ondata");var ne=A.write(te);o("dest.write",ne),ne===!1&&((D.pipesCount===1&&D.pipes===A||D.pipesCount>1&&k(D.pipes,A)!==-1)&&!Z&&(o("false write response, pause",D.awaitDrain),D.awaitDrain++),R.pause())}function M(te){o("onerror",te),ie(),A.removeListener("error",M),e(A,"error")===0&&m(A,te)}function V(){A.removeListener("finish",X),ie()}function X(){o("onfinish"),A.removeListener("close",V),ie()}function ie(){o("unpipe"),R.unpipe(A)}return R.on("data",oe),(function(te,ne,de){if(typeof te.prependListener=="function")return te.prependListener(ne,de);te._events&&te._events[ne]?Array.isArray(te._events[ne])?te._events[ne].unshift(de):te._events[ne]=[de,te._events[ne]]:te.on(ne,de)})(A,"error",M),A.once("close",V),A.once("finish",X),A.emit("pipe",R),D.flowing||(o("pipe resume"),R.resume()),A},S.prototype.unpipe=function(A){var _=this._readableState,R={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return A&&A!==_.pipes||(A||(A=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,A&&A.emit("unpipe",this,R)),this;if(!A){var D=_.pipes,H=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var N=0;N<H;N++)D[N].emit("unpipe",this,{hasUnpiped:!1});return this}var K=k(_.pipes,A);return K===-1||(_.pipes.splice(K,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),A.emit("unpipe",this,R)),this},S.prototype.on=function(A,_){var R=n.prototype.on.call(this,A,_),D=this._readableState;return A==="data"?(D.readableListening=this.listenerCount("readable")>0,D.flowing!==!1&&this.resume()):A==="readable"&&(D.endEmitted||D.readableListening||(D.readableListening=D.needReadable=!0,D.flowing=!1,D.emittedReadable=!1,o("on readable",D.length,D.reading),D.length?B(this):D.reading||ot.nextTick(x,this))),R},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(A,_){var R=n.prototype.removeListener.call(this,A,_);return A==="readable"&&ot.nextTick(I,this),R},S.prototype.removeAllListeners=function(A){var _=n.prototype.removeAllListeners.apply(this,arguments);return A!=="readable"&&A!==void 0||ot.nextTick(I,this),_},S.prototype.resume=function(){var A=this._readableState;return A.flowing||(o("resume"),A.flowing=!A.readableListening,(function(_,R){R.resumeScheduled||(R.resumeScheduled=!0,ot.nextTick(P,_,R))})(this,A)),A.paused=!1,this},S.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(A){var _=this,R=this._readableState,D=!1;for(var H in A.on("end",(function(){if(o("wrapped end"),R.decoder&&!R.ended){var K=R.decoder.end();K&&K.length&&_.push(K)}_.push(null)})),A.on("data",(function(K){o("wrapped data"),R.decoder&&(K=R.decoder.write(K)),R.objectMode&&K==null||(R.objectMode||K&&K.length)&&(_.push(K)||(D=!0,A.pause()))})),A)this[H]===void 0&&typeof A[H]=="function"&&(this[H]=(function(K){return function(){return A[K].apply(A,arguments)}})(H));for(var N=0;N<w.length;N++)A.on(w[N],this.emit.bind(this,w[N]));return this._read=function(K){o("wrapped _read",K),D&&(D=!1,A.resume())},this},typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=XM()),c(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),S._fromList=b,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(S.from=function(A,_){return l===void 0&&(l=$2?H2:($2=1,H2=function(){throw new Error("Readable.from is not available in the browser")})),l(S,A,_)}),sp}var qC=lo,Bh=ma.codes,ZM=Bh.ERR_METHOD_NOT_IMPLEMENTED,QM=Bh.ERR_MULTIPLE_CALLBACK,JM=Bh.ERR_TRANSFORM_ALREADY_TRANSFORMING,e9=Bh.ERR_TRANSFORM_WITH_LENGTH_0,Wf=Tc();function t9(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new QM);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function lo(t){if(!(this instanceof lo))return new lo(t);Wf.call(this,t),this._transformState={afterTransform:t9.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",n9)}function n9(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?j2(this,null,null):this._flush((function(e,n){j2(t,e,n)}))}function j2(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new e9;if(t._transformState.transforming)throw new JM;return t.push(null)}Cu(lo,Wf),lo.prototype.push=function(t,e){return this._transformState.needTransform=!1,Wf.prototype.push.call(this,t,e)},lo.prototype._transform=function(t,e,n){n(new ZM("_transform()"))},lo.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},lo.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},lo.prototype._destroy=function(t,e){Wf.prototype._destroy.call(this,t,(function(n){e(n)}))};var ap,r9=nu,YC=qC;function nu(t){if(!(this instanceof nu))return new nu(t);YC.call(this,t)}Cu(nu,YC),nu.prototype._transform=function(t,e,n){n(null,t)};var XC=ma.codes,i9=XC.ERR_MISSING_ARGS,o9=XC.ERR_STREAM_DESTROYED;function K2(t){if(t)throw t}function G2(t){t()}function s9(t,e){return t.pipe(e)}var a9=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=(function(s){return s.length?typeof s[s.length-1]!="function"?K2:s.pop():K2})(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new i9("streams");var o=e.map((function(s,a){var c=a<e.length-1;return(function(l,u,f,d){d=(function(g){var y=!1;return function(){y||(y=!0,g.apply(void 0,arguments))}})(d);var h=!1;l.on("close",(function(){h=!0})),ap===void 0&&(ap=wv),ap(l,{readable:u,writable:f},(function(g){if(g)return d(g);h=!0,d()}));var p=!1;return function(g){if(!h&&!p)return p=!0,(function(y){return y.setHeader&&typeof y.abort=="function"})(l)?l.abort():typeof l.destroy=="function"?l.destroy():void d(g||new o9("pipe"))}})(s,c,a>0,(function(l){r||(r=l),l&&o.forEach(G2),c||(o.forEach(G2),i(r))}))}));return e.reduce(s9)};(function(t,e){(e=N1.exports=WC()).Stream=e,e.Readable=e,e.Writable=zC(),e.Duplex=Tc(),e.Transform=qC,e.PassThrough=r9,e.finished=wv,e.pipeline=a9})(0,N1.exports);var Oc=N1.exports;function c9(t={}){const e={},n=new Oc.Duplex({objectMode:!0,read:()=>{},write:function(o,s,a){let c=null;try{o.id?(function(l){const{id:u}=l;if(u===null)return;const f=e[u];if(!f)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete e[u],Object.assign(f.res,l),setTimeout(f.end)})(o):(function(l){t?.retryOnMessage&&l.method===t.retryOnMessage&&Object.values(e).forEach((({req:u,retryCount:f=0})=>{if(!u.id)return;if(f>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);const d=e[u.id];d&&(d.retryCount=f+1),i(u)})),r.emit("notification",l)})(o)}catch(l){c=l}a(c)}}),r=new CC;return{events:r,middleware:(o,s,a,c)=>{e[o.id]={req:o,res:s,next:a,end:c},i(o)},stream:n};function i(o){n.push(o)}}var Ud={},M1={exports:{}},l9=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(i){r[i]=e[i]})),r;function r(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var s=e.apply(this,i),a=i[i.length-1];return typeof s=="function"&&s!==a&&Object.keys(a).forEach((function(c){s[c]=a[c]})),s}},z2=l9;function df(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function W2(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}M1.exports=z2(df),M1.exports.strict=z2(W2),df.proto=df((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return df(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return W2(this)},configurable:!0})}));var u9=M1.exports,Hd={};Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.Substream=void 0;const f9=Oc;class d9 extends f9.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}Hd.Substream=d9;var h9=Wr&&Wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.ObjectMultiplex=void 0;const cp=Oc,p9=h9(u9),g9=Hd,q2=Symbol("IGNORE_SUBSTREAM");let v9=class extends cp.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new g9.Substream({parent:this,name:t});return this._substreams[t]=e,(function(n,r){const i=(0,p9.default)(r);(0,cp.finished)(n,{readable:!1},i),(0,cp.finished)(n,{writable:!1},i)})(this,(n=>e.destroy(n||void 0))),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=q2}_read(){}_write(t,e,n){const{name:r,data:i}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const o=this._substreams[r];return o?(o!==q2&&o.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};Ud.ObjectMultiplex=v9;var y9=Ph(Ud.ObjectMultiplex);const _i=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";_i.writable=t=>_i(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",_i.readable=t=>_i(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",_i.duplex=t=>_i.writable(t)&&_i.readable(t),_i.transform=t=>_i.duplex(t)&&typeof t._transform=="function";var Ci,m9=_i,w9=class extends MM{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!m9.duplex(t))throw new Error(Gt.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const o=new y9;Oc.pipeline(t,o,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=c9({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),Oc.pipeline(this._jsonRpcConnection.stream,o.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",(s=>{const{method:a,params:c}=s;a==="metamask_accountsChanged"?this._handleAccountsChanged(c):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(c):a==="metamask_chainChanged"?this._handleChainChanged(c):SC.includes(a)?this.emit("message",{type:a,data:c}):a==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(Gt.errors.permanentlyDisconnected()))}))}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e?.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){IC(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(Gt.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},b9=class extends w9{constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:SM(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},P1(this,Ci,void 0),this._initializeStateAsync(),co(this,Ci,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",(o=>{const{method:s}=o;SC.includes(s)&&(this.emit("data",o),this.emit("notification",o.params.result))})),i)if(document.readyState==="complete")R2(this._rpcEngine,this._log);else{const o=()=>{R2(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",o)};window.addEventListener("DOMContentLoaded",o)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(Gt.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(Gt.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),ki(this,Ci)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(Gt.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),ki(this,Ci)&&!t&&co(this,Ci,null)}_warnOfDeprecation(t){this._sentWarnings?.events[t]===!1&&(this._log.warn(Gt.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(Gt.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise(((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},Kf(t,e))}catch(n){e(n)}}))}send(t,e){return this._sentWarnings.send||(this._log.warn(Gt.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise(((n,r)=>{try{this._rpcRequest({method:t,params:e},Kf(n,r,!1))}catch(i){r(i)}}))}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,TC),e=!0;break;case"net_version":e=ki(this,Ci)??null;break;default:throw new Error(Gt.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise((t=>{this.on("_initialized",(()=>t()))})),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw Cl({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise(((e,n)=>{this._rpcRequest(t,Kf(e,n))}))}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(Gt.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==ki(this,Ci)&&(co(this,Ci,e),this._state.initialized&&this.emit("networkChanged",ki(this,Ci)))}};Ci=new WeakMap;const he=ir("MM_SDK");let Y2;he.color="#FFAC1C";var ZC={},gs={};Object.defineProperty(gs,"__esModule",{value:!0}),gs.EthereumProviderError=gs.EthereumRpcError=void 0;const E9=wC;class QC extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return E9.default(this.serialize(),x9,2)}}gs.EthereumRpcError=QC;function x9(t,e){if(e!=="[Circular]")return e}gs.EthereumProviderError=class extends QC{constructor(t,e,n){if(!(function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999})(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var bv={},is={};Object.defineProperty(is,"__esModule",{value:!0}),is.errorValues=is.errorCodes=void 0,is.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},is.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=is,n=gs,r=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:r,message:s(r)};function s(f,d=i){if(Number.isInteger(f)){const h=f.toString();if(u(e.errorValues,h))return e.errorValues[h].message;if(c(f))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return d}function a(f){if(!Number.isInteger(f))return!1;const d=f.toString();return!!e.errorValues[d]||!!c(f)}function c(f){return f>=-32099&&f<=-32e3}function l(f){return f&&typeof f=="object"&&!Array.isArray(f)?Object.assign({},f):f}function u(f,d){return Object.prototype.hasOwnProperty.call(f,d)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=s,t.isValidCode=a,t.serializeError=function(f,{fallbackError:d=o,shouldIncludeStack:h=!1}={}){var p,g;if(!d||!Number.isInteger(d.code)||typeof d.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(f instanceof n.EthereumRpcError)return f.serialize();const y={};if(f&&typeof f=="object"&&!Array.isArray(f)&&u(f,"code")&&a(f.code)){const m=f;y.code=m.code,m.message&&typeof m.message=="string"?(y.message=m.message,u(m,"data")&&(y.data=m.data)):(y.message=s(y.code),y.data={originalError:l(f)})}else{y.code=d.code;const m=(p=f)===null||p===void 0?void 0:p.message;y.message=m&&typeof m=="string"?m:d.message,y.data={originalError:l(f)}}const v=(g=f)===null||g===void 0?void 0:g.stack;return h&&f&&v&&typeof v=="string"&&(y.stack=v),y}})(bv);var $d={};Object.defineProperty($d,"__esModule",{value:!0}),$d.ethErrors=void 0;const Ev=gs,JC=bv,kn=is;function Fr(t,e){const[n,r]=eS(e);return new Ev.EthereumRpcError(t,n||JC.getMessageFromCode(t),r)}function Yc(t,e){const[n,r]=eS(e);return new Ev.EthereumProviderError(t,n||JC.getMessageFromCode(t),r)}function eS(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}$d.ethErrors={rpc:{parse:t=>Fr(kn.errorCodes.rpc.parse,t),invalidRequest:t=>Fr(kn.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Fr(kn.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Fr(kn.errorCodes.rpc.methodNotFound,t),internal:t=>Fr(kn.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Fr(e,t)},invalidInput:t=>Fr(kn.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Fr(kn.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Fr(kn.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Fr(kn.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Fr(kn.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Fr(kn.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Yc(kn.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Yc(kn.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Yc(kn.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Yc(kn.errorCodes.provider.disconnected,t),chainDisconnected:t=>Yc(kn.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new Ev.EthereumProviderError(e,n,r)}}},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=gs;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=bv;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=$d;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=is;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(ZC);var tS={exports:{}};tS.exports=(function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(r,i,o){n.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:o})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,i){if(1&i&&(r=n(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var s in r)n.d(o,s,(function(a){return r[a]}).bind(null,s));return o},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=90)})({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),i=(function(){function o(){}return o.getFirstMatch=function(s,a){var c=a.match(s);return c&&c.length>0&&c[1]||""},o.getSecondMatch=function(s,a){var c=a.match(s);return c&&c.length>1&&c[2]||""},o.matchAndReturnConst=function(s,a,c){if(s.test(a))return c},o.getWindowsVersionName=function(s){switch(s){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},o.getMacOSVersionName=function(s){var a=s.split(".").splice(0,2).map((function(c){return parseInt(c,10)||0}));if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},o.getAndroidVersionName=function(s){var a=s.split(".").splice(0,2).map((function(c){return parseInt(c,10)||0}));if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},o.getVersionPrecision=function(s){return s.split(".").length},o.compareVersions=function(s,a,c){c===void 0&&(c=!1);var l=o.getVersionPrecision(s),u=o.getVersionPrecision(a),f=Math.max(l,u),d=0,h=o.map([s,a],(function(p){var g=f-o.getVersionPrecision(p),y=p+new Array(g+1).join(".0");return o.map(y.split("."),(function(v){return new Array(20-v.length).join("0")+v})).reverse()}));for(c&&(d=f-Math.min(l,u)),f-=1;f>=d;){if(h[0][f]>h[1][f])return 1;if(h[0][f]===h[1][f]){if(f===d)return 0;f-=1}else if(h[0][f]<h[1][f])return-1}},o.map=function(s,a){var c,l=[];if(Array.prototype.map)return Array.prototype.map.call(s,a);for(c=0;c<s.length;c+=1)l.push(a(s[c]));return l},o.find=function(s,a){var c,l;if(Array.prototype.find)return Array.prototype.find.call(s,a);for(c=0,l=s.length;c<l;c+=1){var u=s[c];if(a(u,c))return u}},o.assign=function(s){for(var a,c,l=s,u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];if(Object.assign)return Object.assign.apply(Object,[s].concat(f));var h=function(){var p=f[a];typeof p=="object"&&p!==null&&Object.keys(p).forEach((function(g){l[g]=p[g]}))};for(a=0,c=f.length;a<c;a+=1)h();return s},o.getBrowserAlias=function(s){return r.BROWSER_ALIASES_MAP[s]},o.getBrowserTypeByAlias=function(s){return r.BROWSER_MAP[s]||""},o})();e.default=i,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function s(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}var a=(function(){function c(){}var l,u,f;return c.getParser=function(d,h){if(h===void 0&&(h=!1),typeof d!="string")throw new Error("UserAgent should be a string");return new i.default(d,h)},c.parse=function(d){return new i.default(d).getResult()},l=c,f=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(u=null)&&s(l.prototype,u),f&&s(l,f),c})();e.default=a,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),s=c(n(95)),a=c(n(17));function c(u){return u&&u.__esModule?u:{default:u}}var l=(function(){function u(d,h){if(h===void 0&&(h=!1),d==null||d==="")throw new Error("UserAgent parameter can't be empty");this._ua=d,this.parsedResult={},h!==!0&&this.parse()}var f=u.prototype;return f.getUA=function(){return this._ua},f.test=function(d){return d.test(this._ua)},f.parseBrowser=function(){var d=this;this.parsedResult.browser={};var h=a.default.find(r.default,(function(p){if(typeof p.test=="function")return p.test(d);if(p.test instanceof Array)return p.test.some((function(g){return d.test(g)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},f.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},f.getBrowserName=function(d){return d?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},f.getBrowserVersion=function(){return this.getBrowser().version},f.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},f.parseOS=function(){var d=this;this.parsedResult.os={};var h=a.default.find(i.default,(function(p){if(typeof p.test=="function")return p.test(d);if(p.test instanceof Array)return p.test.some((function(g){return d.test(g)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},f.getOSName=function(d){var h=this.getOS().name;return d?String(h).toLowerCase()||"":h||""},f.getOSVersion=function(){return this.getOS().version},f.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},f.getPlatformType=function(d){d===void 0&&(d=!1);var h=this.getPlatform().type;return d?String(h).toLowerCase()||"":h||""},f.parsePlatform=function(){var d=this;this.parsedResult.platform={};var h=a.default.find(o.default,(function(p){if(typeof p.test=="function")return p.test(d);if(p.test instanceof Array)return p.test.some((function(g){return d.test(g)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},f.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},f.getEngineName=function(d){return d?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},f.parseEngine=function(){var d=this;this.parsedResult.engine={};var h=a.default.find(s.default,(function(p){if(typeof p.test=="function")return p.test(d);if(p.test instanceof Array)return p.test.some((function(g){return d.test(g)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},f.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},f.getResult=function(){return a.default.assign({},this.parsedResult)},f.satisfies=function(d){var h=this,p={},g=0,y={},v=0;if(Object.keys(d).forEach((function(U){var B=d[U];typeof B=="string"?(y[U]=B,v+=1):typeof B=="object"&&(p[U]=B,g+=1)})),g>0){var m=Object.keys(p),w=a.default.find(m,(function(U){return h.isOS(U)}));if(w){var E=this.satisfies(p[w]);if(E!==void 0)return E}var S=a.default.find(m,(function(U){return h.isPlatform(U)}));if(S){var O=this.satisfies(p[S]);if(O!==void 0)return O}}if(v>0){var F=Object.keys(y),$=a.default.find(F,(function(U){return h.isBrowser(U,!0)}));if($!==void 0)return this.compareVersion(y[$])}},f.isBrowser=function(d,h){h===void 0&&(h=!1);var p=this.getBrowserName().toLowerCase(),g=d.toLowerCase(),y=a.default.getBrowserTypeByAlias(g);return h&&y&&(g=y.toLowerCase()),g===p},f.compareVersion=function(d){var h=[0],p=d,g=!1,y=this.getBrowserVersion();if(typeof y=="string")return d[0]===">"||d[0]==="<"?(p=d.substr(1),d[1]==="="?(g=!0,p=d.substr(2)):h=[],d[0]===">"?h.push(1):h.push(-1)):d[0]==="="?p=d.substr(1):d[0]==="~"&&(g=!0,p=d.substr(1)),h.indexOf(a.default.compareVersions(y,p,g))>-1},f.isOS=function(d){return this.getOSName(!0)===String(d).toLowerCase()},f.isPlatform=function(d){return this.getPlatformType(!0)===String(d).toLowerCase()},f.isEngine=function(d){return this.getEngineName(!0)===String(d).toLowerCase()},f.is=function(d,h){return h===void 0&&(h=!1),this.isBrowser(d,h)||this.isOS(d)||this.isPlatform(d)},f.some=function(d){var h=this;return d===void 0&&(d=[]),d.some((function(p){return h.is(p)}))},u})();e.default=l,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(a){var c={name:"Googlebot"},l=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/opera/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opr\/|opios/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/SamsungBrowser/i],describe:function(a){var c={name:"Samsung Internet for Android"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Whale/i],describe:function(a){var c={name:"NAVER Whale Browser"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MZBrowser/i],describe:function(a){var c={name:"MZ Browser"},l=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/focus/i],describe:function(a){var c={name:"Focus"},l=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/swing/i],describe:function(a){var c={name:"Swing"},l=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/coast/i],describe:function(a){var c={name:"Opera Coast"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var c={name:"Opera Touch"},l=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/yabrowser/i],describe:function(a){var c={name:"Yandex Browser"},l=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/ucbrowser/i],describe:function(a){var c={name:"UC Browser"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Maxthon|mxios/i],describe:function(a){var c={name:"Maxthon"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/epiphany/i],describe:function(a){var c={name:"Epiphany"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/puffin/i],describe:function(a){var c={name:"Puffin"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sleipnir/i],describe:function(a){var c={name:"Sleipnir"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/k-meleon/i],describe:function(a){var c={name:"K-Meleon"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/micromessenger/i],describe:function(a){var c={name:"WeChat"},l=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/qqbrowser/i],describe:function(a){var c={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},l=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/msie|trident/i],describe:function(a){var c={name:"Internet Explorer"},l=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/\sedg\//i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/edg([ea]|ios)/i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/vivaldi/i],describe:function(a){var c={name:"Vivaldi"},l=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/seamonkey/i],describe:function(a){var c={name:"SeaMonkey"},l=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sailfish/i],describe:function(a){var c={name:"Sailfish"},l=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return l&&(c.version=l),c}},{test:[/silk/i],describe:function(a){var c={name:"Amazon Silk"},l=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/phantom/i],describe:function(a){var c={name:"PhantomJS"},l=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/slimerjs/i],describe:function(a){var c={name:"SlimerJS"},l=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c={name:"BlackBerry"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c={name:"WebOS Browser"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/bada/i],describe:function(a){var c={name:"Bada"},l=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/tizen/i],describe:function(a){var c={name:"Tizen"},l=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/qupzilla/i],describe:function(a){var c={name:"QupZilla"},l=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var c={name:"Firefox"},l=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/electron/i],describe:function(a){var c={name:"Electron"},l=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MiuiBrowser/i],describe:function(a){var c={name:"Miui"},l=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/chromium/i],describe:function(a){var c={name:"Chromium"},l=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/chrome|crios|crmo/i],describe:function(a){var c={name:"Chrome"},l=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/GSA/i],describe:function(a){var c={name:"Google Search"},l=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c={name:"Android Browser"},l=i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/playstation 4/i],describe:function(a){var c={name:"PlayStation 4"},l=i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/safari|applewebkit/i],describe:function(a){var c={name:"Safari"},l=i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/.*/i],describe:function(a){var c=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(c,a),version:i.default.getSecondMatch(c,a)}}}];e.default=s,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/Roku\/DVP/],describe:function(a){var c=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:o.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(a){var c=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:o.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(a){var c=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),l=i.default.getWindowsVersionName(c);return{name:o.OS_MAP.Windows,version:c,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var c={name:o.OS_MAP.iOS},l=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return l&&(c.version=l),c}},{test:[/macintosh/i],describe:function(a){var c=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),l=i.default.getMacOSVersionName(c),u={name:o.OS_MAP.MacOS,version:c};return l&&(u.versionName=l),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var c=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:c}}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),l=i.default.getAndroidVersionName(c),u={name:o.OS_MAP.Android,version:c};return l&&(u.versionName=l),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),l={name:o.OS_MAP.WebOS};return c&&c.length&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||i.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:o.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(a){var c=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:o.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(a){var c=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:o.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var c=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:o.OS_MAP.PlayStation4,version:c}}}];e.default=s,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var c=i.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",l={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(l.model=c),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(a){var c=a.test(/ipod|iphone/i),l=a.test(/like (ipod|iphone)/i);return c&&!l},describe:function(a){var c=i.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var c=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];e.default=s,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:o.ENGINE_MAP.Blink};var c=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:o.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(a){var c={name:o.ENGINE_MAP.Trident},l=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){return a.test(/presto/i)},describe:function(a){var c={name:o.ENGINE_MAP.Presto},l=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=a.test(/gecko/i),l=a.test(/like gecko/i);return c&&!l},describe:function(a){var c={name:o.ENGINE_MAP.Gecko},l=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var c={name:o.ENGINE_MAP.WebKit},l=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}}];e.default=s,t.exports=e.default}});var nS=Ph(tS.exports);const yr={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class yi{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:o}){const s=new A9({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),a=new Proxy(s,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=o,e&&typeof window<"u")try{c=s,window.ethereum=c,window.dispatchEvent(new Event("ethereum#initialized"))}catch(l){he("[Ethereum] Unable to set global provider - window.ethereum may be read-only",l)}var c;if(i&&typeof window<"u")try{(function(l,u=console){let f=!1,d=!1;if(!window.web3){const h="__isMetaMaskShim__";let p={currentProvider:l};Object.defineProperty(p,h,{value:!0,enumerable:!0,configurable:!1,writable:!1}),p=new Proxy(p,{get:(g,y,...v)=>(y!=="currentProvider"||f?y==="currentProvider"||y===h||d||(d=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),l.request({method:"metamask_logWeb3ShimUsage"}).catch((m=>{u.debug("MetaMask: Failed to log web3 shim usage.",m)}))):(f=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(g,y,...v)),set:(...g)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...g))}),Object.defineProperty(window,"web3",{value:p,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(l){he("[Ethereum] Unable to shim web3 - window.web3 may be read-only",l)}this.provider.on("display_uri",(l=>{this.sdkInstance.emit(yr.DisplayURI,l)})),this.provider.on("_initialized",(()=>{const l={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(yr.Initialized,l),he("[Ethereum: constructor()] provider initialized",l)}))}static init(e){var n;return he("[Ethereum: init()] Initializing Ethereum service"),this.instance=new yi(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class ru{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return(function(i,o,s,a){const{state:c}=i;he(`[PlatfformManager: openDeeplink()] universalLink --> ${o}`),he(`[PlatfformManager: openDeeplink()] deepLink --> ${s}`);try{if(c.preferredOpenLink)return void c.preferredOpenLink(c.useDeeplink?s:o,a);if(he(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${c.useDeeplink} link=${c.useDeeplink?s:o}`),c.useDeeplink)typeof window<"u"&&(window.location.href=s);else if(typeof document<"u"){const l=document.createElement("a");l.href=o,l.target="_self",l.rel="noreferrer noopener",l.click()}}catch(l){console.log("[PlatfformManager: openDeeplink()] can't open link",l)}})(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&window?.navigator&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return(function(){const e=yi.getProvider()||window?.ethereum;return he(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e?.isMetaMask} isConnected=${e?.isConnected()}`),e?.isMetaMask&&e?.isConnected()})()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=nS.parse(window.navigator.userAgent);return((e=r?.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r?.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===Un.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!window?.navigator||or!==void 0&&((e=or?.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||navigator?.product==="ReactNative"}isNotBrowser(){return ru.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return ru.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return(function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?Un.ReactNative:e.isNotBrowser()?Un.NonBrowser:e.isMetaMaskMobileWebView()?Un.MetaMaskMobileWebview:e.isMobile()?Un.MobileWeb:Un.DesktopWeb})(this)}}const rS=t=>ye(void 0,void 0,void 0,(function*(){if(ru.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then((function(){return Q9}));return new n(t)}const e={persistChannelConfig:()=>ye(void 0,void 0,void 0,(function*(){})),getPersistedChannelConfig:()=>ye(void 0,void 0,void 0,(function*(){})),persistAccounts:()=>ye(void 0,void 0,void 0,(function*(){})),getCachedAccounts:()=>ye(void 0,void 0,void 0,(function*(){return[]})),persistChainId:()=>ye(void 0,void 0,void 0,(function*(){})),getCachedChainId:()=>ye(void 0,void 0,void 0,(function*(){})),terminate:()=>ye(void 0,void 0,void 0,(function*(){}))};return Promise.resolve(e)}));class A9 extends b9{constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},he(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return ye(this,void 0,void 0,(function*(){return he(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()}))}_setConnected(){he("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(he("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:i}=r;he(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",ZC.ethErrors.provider.disconnected()),i.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return ye(this,void 0,void 0,(function*(){return(function(e){var n,r;return ye(this,void 0,void 0,(function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:i}=e;let o;if(i.providerStateRequested)he("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let s;i.providerStateRequested=!0;let a=null,c=!1,l=!1;const u=yield rS({enabled:!0});if(u){const f=yield u.getPersistedChannelConfig({});c=(n=f?.relayPersistence)!==null&&n!==void 0&&n,s=yield u.getCachedChainId();const d=yield u.getCachedAccounts();d.length>0&&(a=d[0])}if(he(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:s,cachedSelectedAddress:a}),c)if(s&&a)o={accounts:[a],chainId:s,isUnlocked:!1},l=!0;else try{o=yield e.request({method:"metamask_getProviderState"})}catch(f){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",f),void(i.providerStateRequested=!1)}if(((r=o?.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())o.accounts=[e.getSelectedAddress()];else{he("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const f=yield e.request({method:"eth_requestAccounts",params:[]});o.accounts=f}e._initializeState(o),i.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:o?.chainId}))}}))})(this)}))}_initializeState(e){return he("[SDKProvider: _initializeState()]",e),(function(n,r,i){return he("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(i)})(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,(function({instance:r,chainId:i,networkVersion:o,superHandleChainChanged:s}){he(`[SDKProvider: handleChainChanged()] chainId=${i} networkVersion=${o}`);let a=o;o||(he("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),i!==Y2&&(Xt.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(i??"0x1",16)}`}),Y2=i),r._state.isConnected=!0,r.emit("connect",{chainId:i}),s({chainId:i,networkVersion:a})})({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var iu,wa={name:"@metamask/sdk",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})(iu||(iu={}));const X2="direct",ou="https://metamask.app.link/connect",su="metamask://connect",Z2={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},_9=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,De={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},au={[De.ETH_REQUESTACCOUNTS]:!0,[De.ETH_SENDTRANSACTION]:!0,[De.ETH_SIGNTRANSACTION]:!0,[De.ETH_SIGN]:!0,[De.PERSONAL_SIGN]:!0,[De.ETH_ACCOUNTS]:!1,[De.ETH_CHAINID]:!1,[De.PERSONAL_SIGN]:!0,[De.ETH_SIGNTYPEDDATA]:!0,[De.ETH_SIGNTYPEDDATA_V3]:!0,[De.ETH_SIGNTYPEDDATA_V4]:!0,[De.WALLET_REQUESTPERMISSIONS]:!0,[De.WALLET_GETPERMISSIONS]:!0,[De.WALLET_WATCHASSET]:!0,[De.WALLET_ADDETHEREUMCHAIN]:!0,[De.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[De.METAMASK_CONNECTSIGN]:!0,[De.METAMASK_CONNECTWITH]:!0,[De.PERSONAL_EC_RECOVER]:!0,[De.METAMASK_BATCH]:!0,[De.METAMASK_OPEN]:!0},C9=Object.keys(au).filter((t=>au[t]===!0)).map((t=>t.toLowerCase())),iS=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map((t=>t.toLowerCase())),lp=".sdk-comm",Vd="providerType",D1=".MMSDK_cached_address",B1=".MMSDK_cached_chainId",Ai={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},S9=1e6;var $i;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})($i||($i={}));const I9=typeof window<"u"&&window.localStorage;function T9({instance:t,msg:e}){return ye(this,void 0,void 0,(function*(){if(t._initialized||(he("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),he(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:(function(r){let i;if(me!==void 0)i=me.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const o=new TextEncoder().encode(r);i=Array.from(o).map((s=>s.toString(16).padStart(2,"0"))).join("")}else{if(typeof or!="object"||!("Buffer"in or))throw new Error("Unable to convert string to hex: No available method.");i=or.Buffer.from(r,"utf8").toString("hex")}return`0x${i}`})(e);return t.activeProvider.request({method:De.METAMASK_CONNECTWITH,params:[{method:De.PERSONAL_SIGN,params:[n]}]})}))}function Q2(t){var e,n;return ye(this,void 0,void 0,(function*(){he("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});he(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(Vd,"extension"),t.extensionActive=!0,t.emit(yr.ProviderUpdate,$i.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:Qt.SDK_USE_EXTENSION}))}))}function jd(t){let e;if(me!==void 0)e=me.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,((n,r)=>String.fromCharCode(parseInt(r,16)))));else{if(typeof or!="object"||!("Buffer"in or))throw new Error("Unable to base64 encode: No available method.");e=or.Buffer.from(t,"utf8").toString("base64")}return e}function O9(t,e,n,r){var i,o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E,S,O,F;return ye(this,void 0,void 0,(function*(){const $=(i=t.state.remote)===null||i===void 0?void 0:i.isReady(),U=(o=t.state.remote)===null||o===void 0?void 0:o.isConnected(),B=(s=t.state.remote)===null||s===void 0?void 0:s.isPaused(),Y=yi.getProvider(),j=(a=t.state.remote)===null||a===void 0?void 0:a.getChannelId(),L=(c=t.state.remote)===null||c===void 0?void 0:c.isAuthorized(),{deeplinkProtocol:I}=t.state,{method:x,data:P,triggeredInstaller:G}=(k=>{var A,_,R,D;let H;me.isBuffer(k)?(H=k.toJSON(),H._isBuffer=!0):H=k;const N=(A=H?.data)===null||A===void 0?void 0:A.method;let K=!1;return typeof((_=H?.data)===null||_===void 0?void 0:_.params)=="object"&&((D=(R=H?.data)===null||R===void 0?void 0:R.params)===null||D===void 0?void 0:D.__triggeredInstaller)===!0&&(K=!0,H.data.params=H.data.params.wrappedParams),{method:N,data:H,triggeredInstaller:K}})(e);if(he(`[RCPMS: write()] method='${x}' isRemoteReady=${$} channelId=${j} isSocketConnected=${U} isRemotePaused=${B} providerConnected=${Y.isConnected()}`,e),!j)return x!==De.METAMASK_GETPROVIDERSTATE&&he(`[RCPMS: write()] ${x} --> channelId is undefined`),r(new Error("disconnected"));he(`[RCPMS: write()] remote.isPaused()=${(l=t.state.remote)===null||l===void 0?void 0:l.isPaused()} authorized=${L} ready=${$} socketConnected=${U}`,e);const b=(u=t.state.platformManager)===null||u===void 0?void 0:u.isSecure(),C=(d=(f=t.state.platformManager)===null||f===void 0?void 0:f.isMobileWeb())!==null&&d!==void 0&&d,T=(p=(h=t.state.remote)===null||h===void 0?void 0:h.hasDeeplinkProtocol())!==null&&p!==void 0&&p&&C&&L;try{if(!G){const _=JSON.stringify(P?.data);if(_.length>S9)return r(new Error(`Message size ${_.length} exceeds maximum allowed size of 1000000 bytes`));(g=t.state.remote)===null||g===void 0||g.sendMessage(P?.data).then((()=>{he(`[RCPMS: _write()] ${x} sent successfully`)})).catch((R=>{he("[RCPMS: _write()] error sending message",R)}))}if(!b)return he(`[RCPMS: _write()] unsecure platform for method ${x} -- return callback`),r();if(G)return he("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const k=(m=(v=(y=t.state.remote)===null||y===void 0?void 0:y.getKeyInfo())===null||v===void 0?void 0:v.ecies.public)!==null&&m!==void 0?m:"";let A=encodeURI(`channelId=${j}&pubkey=${k}&comm=socket&t=d&v=2`);if(T){const _=JSON.stringify(P?.data),R=(w=t.state.remote)===null||w===void 0?void 0:w.encrypt(_);if(!R)return he("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));A+=`&scheme=${I}&rpc=${jd(R)}`}if(!(!((E=t.state.platformManager)===null||E===void 0)&&E.isMetaMaskInstalled()))return he("[RCPMS: _write()] prevent deeplink until installation is completed."),r();au[x]?(he(`[RCPMS: _write()] redirect link for '${x}' socketConnected=${U} connect?${A}`),(S=t.state.platformManager)===null||S===void 0||S.openDeeplink(`${ou}?${A}`,`${su}?${A}`,"_self")):!((O=t.state.remote)===null||O===void 0)&&O.isPaused()?(he(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${x}`),(F=t.state.platformManager)===null||F===void 0||F.openDeeplink(`${ou}?redirect=true&${A}`,`${su}?redirect=true&${A}`,"_self")):he(`[RCPMS: _write()] method ${x} doesn't need redirect.`)}catch(k){return he("[RCPMS: _write()] error sending message",k),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()}))}class R9 extends Oc.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(Ee.MESSAGE,this._onMessage)}_write(e,n,r){return ye(this,void 0,void 0,(function*(){return O9(this,e,0,r)}))}_read(){}_onMessage(e){return(function(n,r){try{if(he("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof r?.data!="object")return;if(!r?.name)return void he("[RCPMS: onMessage()] ignore message without name",r);if(r?.name!==iu.PROVIDER)return void he(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(me.isBuffer(r)){const i=me.from(r);n.push(i)}else n.push(r)}catch(i){he(`[RCPMS: onMessage()] ignore message error err=${i}`)}})(this,e)}start(){}}let J2=1;const oS=t=>new Promise((e=>{setTimeout((()=>{e(!0)}),t)})),P9=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:o,sdk:s,remoteConnection:a,debug:c})=>ye(void 0,void 0,void 0,(function*(){var l,u;const f=(({name:B,remoteConnection:Y})=>{if(!Y||!Y?.getConnector())throw new Error("Missing remote connection parameter");return new R9({name:B,remote:Y?.getConnector(),deeplinkProtocol:Y?.state.deeplinkProtocol,platformManager:Y?.getPlatformManager()})})({name:iu.INPAGE,target:iu.CONTENT_SCRIPT,remoteConnection:a}),d=i.getPlatformType(),h=s.options.dappMetadata,p=`Sdk/Javascript SdkVersion/${wa.version} Platform/${d} dApp/${(l=h.url)!==null&&l!==void 0?l:h.name} dAppTitle/${h.name}`;let g=null,y=null;const v=(u=s.options.storage)===null||u===void 0?void 0:u.storageManager;if(v){try{const B=yield v.getCachedAccounts();B.length>0&&(g=B[0])}catch(B){console.error(`[initializeMobileProvider] failed to get cached addresses: ${B}`)}try{const B=yield v.getCachedChainId();B&&(y=B)}catch(B){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${B}`)}}he(`[initializeMobileProvider] cachedAccountAddress: ${g}, cachedChainId: ${y}`);const m=!(!n||d===Un.NonBrowser||d===Un.ReactNative),w=yi.init({shouldSetOnWindow:m,connectionStream:f,shouldShimWeb3:r,sdkInstance:s});let E=!1;const S=B=>{E=B},O=()=>E,F=(B,Y,j,L)=>ye(void 0,void 0,void 0,(function*(){var I,x,P,G,b,C,T,k,A;const _=yi.getProvider();if(E){_.emit("display_uri",a?.state.qrcodeLink||""),a?.showActiveModal();let M=O();for(;M;){const V=O(),X=a?.isAuthorized();M=V&&!X,he(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${V} authorized: ${X}`),yield oS(1e3)}return he("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),j(...Y)}const R=i.isMetaMaskInstalled(),D=a?.isConnected();let H=null,N=null,K=null;if(H=(I=_.getSelectedAddress())!==null&&I!==void 0?I:g,K=_.getChainId()||y,H&&v&&H!==g&&v.persistAccounts([H]).catch((M=>{console.error(`[initializeMobileProvider] failed to persist account: ${M}`)})),K&&(y=K,v&&v.persistChainId(K).catch((M=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${M}`)}))),he("[initializeMobileProvider: sendRequest()]",{selectedAddress:H,chainId:K}),L&&he(`[initializeMobileProvider: sendRequest()] method=${B} ongoing=${E} selectedAddress=${H} isInstalled=${R} checkInstallationOnAllCalls=${t} socketConnected=${D}`),H&&B.toLowerCase()===De.ETH_ACCOUNTS.toLowerCase())return[H];if(K&&B.toLowerCase()===De.ETH_CHAINID.toLowerCase())return K;const z=[De.ETH_REQUESTACCOUNTS,De.WALLET_REQUESTPERMISSIONS,De.METAMASK_CONNECTSIGN,De.METAMASK_CONNECTWITH],Z=!au[B],oe=(x=s.options.readonlyRPCMap)===null||x===void 0?void 0:x[K];if(oe&&Z)try{const M=(P=Y?.[0])===null||P===void 0?void 0:P.params,V=yield(({rpcEndpoint:X,method:ie,sdkInfo:te,params:ne})=>ye(void 0,void 0,void 0,(function*(){const de=JSON.stringify({jsonrpc:"2.0",method:ie,params:ne,id:(J2+=1,J2)}),le={Accept:"application/json","Content-Type":"application/json"};let J;X.includes("infura")&&(le["Metamask-Sdk-Info"]=te);try{J=yield w_(X,{method:"POST",headers:le,body:de})}catch(ee){throw ee instanceof Error?new Error(`Failed to fetch from RPC: ${ee.message}`):new Error(`Failed to fetch from RPC: ${ee}`)}if(!J.ok)throw new Error(`Server responded with a status of ${J.status}`);return(yield J.json()).result})))({rpcEndpoint:oe,sdkInfo:p,method:B,params:M||[]});return L&&he(`initializeProvider::ReadOnlyRPCResponse ${V}`),V}catch(M){console.warn(`[initializeMobileProvider: sendRequest()] method=${B} readOnlyRPCRequest failed:`,M)}if((!R||R&&!D)&&B!==De.METAMASK_GETPROVIDERSTATE){const M=((G=Y?.[0])===null||G===void 0?void 0:G.params)||[];if(z.indexOf(B)!==-1||t){S(!0);const V=B===De.METAMASK_CONNECTWITH,X=`${Date.now()}`;try{yield o.start({wait:!1,connectWith:V?{method:B,id:X,params:M}:void 0}),yield new Promise(((ie,te)=>{a?.isAuthorized()&&(he("[initializeMobileProvider: sendRequest()] already authorized"),ie(!0)),a?.getConnector().once(Ee.AUTHORIZED,(()=>{ie(!0)})),s.once(Ee.PROVIDER_UPDATE,(ne=>{he(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${ne}`),ne===$i.EXTENSION?te(Ee.PROVIDER_UPDATE):te(new Error("Connection Terminated"))}))}))}catch(ie){if($i.EXTENSION===ie){if(he(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${B} on the active provider`),B.toLowerCase()===De.METAMASK_CONNECTSIGN.toLowerCase()){const te=yield(b=s.getProvider())===null||b===void 0?void 0:b.request({method:De.ETH_REQUESTACCOUNTS,params:[]});if(!te.length)throw new Error("SDK state invalid -- undefined accounts");const ne=yield(C=s.getProvider())===null||C===void 0?void 0:C.request({method:De.PERSONAL_SIGN,params:[M[0],te[0]]});return s.emit(yr.ConnectWithResponse,ne),ne}if(B.toLowerCase()===De.METAMASK_CONNECTWITH.toLowerCase()){const[te]=M,ne=yield(({method:de,sdk:le,params:J})=>ye(void 0,void 0,void 0,(function*(){var ee,ue,ae,ce;if(!le.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");he("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",de,J);const xe=yield(ee=le.getProvider())===null||ee===void 0?void 0:ee.request({method:De.ETH_REQUESTACCOUNTS,params:[]});if(!xe.length)throw new Error("SDK state invalid -- undefined accounts");if(de?.toLowerCase()===De.PERSONAL_SIGN.toLowerCase()){const Ce={method:de,params:[J[0],xe[0]]};return yield(ue=le.getProvider())===null||ue===void 0?void 0:ue.request(Ce)}if(de?.toLowerCase()===De.ETH_SENDTRANSACTION.toLowerCase()){const Ce={method:de,params:[Object.assign(Object.assign({},J[0]),{from:xe[0]})]};return yield(ae=le.getProvider())===null||ae===void 0?void 0:ae.request(Ce)}return iS.includes(de.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${de} -- not handled by the extension -- call separately`),xe):yield(ce=le.getProvider())===null||ce===void 0?void 0:ce.request({method:de,params:J})})))({method:te.method,sdk:s,params:te.params});return s.emit(yr.ConnectWithResponse,ne),ne}return he(`[initializeMobileProvider: sendRequest()] sending '${B}' on active provider`,M),yield(T=s.getProvider())===null||T===void 0?void 0:T.request({method:B,params:M})}throw ie===Ee.REJECTED?(a?.closeModal(),(k=s.getProvider())===null||k===void 0||k.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(he(`[initializeMobileProvider: sendRequest()] failed to start installer: ${ie}`),ie)}finally{S(!1)}if(B===De.ETH_REQUESTACCOUNTS)return N=yield new Promise((ie=>{const te=setInterval((()=>{const{accounts:ne}=_.getState();ne&&(clearInterval(te),ie(ne))}),100)})),he(`[initializeMobileProvider: sendRequest()] selectedAddress: ${H} --- SKIP rpc call`),N;if(B===De.METAMASK_CONNECTWITH)try{let ie=0;const te=5,ne=({resolve:ee,reject:ue})=>{ie+=1;const ae=a?.getConnector().getRPCMethodTracker(),ce=ae?.[X];return he(`TRACKER: update method ${X}`,ce),ce?.result?(he("[initializeMobileProvider: sendRequest()] found result",ce.result),s.emit(yr.ConnectWithResponse,ce.result),void ee(ce.result)):ce?.error?(he("[initializeMobileProvider: sendRequest()] found error",ce.error),void ue(ce.error)):ie>=te?(he("[initializeMobileProvider: sendRequest()] max message count reached without result"),void ue(new Error("Max message count reached without result"))):void he("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let de,le;const J=yield new Promise(((ee,ue)=>{const ae=a?.getConnector().getRPCMethodTracker();he(`TRACKER: method ${X}`,ae),ae?.[X].result?(he("[initializeMobileProvider: sendRequest()] found result",ae?.[X].result),ee(ae?.[X].result)):ae?.[X].error&&(he("[initializeMobileProvider: sendRequest()] found error",ae?.[X].error),ue(ae?.[X].error)),le=()=>ne({resolve:ee,reject:ue}),de=a?.getConnector().on(Ee.RPC_UPDATE,le)}));return le&&de?.off(Ee.RPC_UPDATE,le),he("TRACKER: result",J),J}catch(ie){throw he("[initializeMobileProvider: sendRequest()] error:",ie),ie}return Y[0]&&typeof Y[0]=="object"&&(Y[0].params={__triggeredInstaller:!0,wrappedParams:Y[0].params}),j(...Y)}if(i.isSecure()&&au[B])return j(...Y);if(s.isExtensionActive())return he(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${B}' to it`,Y,M),yield(A=s.getProvider())===null||A===void 0?void 0:A.request({method:B,params:M});throw he(`[initializeMobileProvider: sendRequest()] method=${B} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const M=yield j(...Y);if(he(`[initializeMobileProvider: sendRequest()] method=${B} rpcResponse`,M),B===De.WALLET_REQUESTPERMISSIONS){const V=M.reduce(((X,ie)=>{var te;if(ie.parentCapability==="eth_accounts"){const ne=(te=ie.caveats.find((de=>de.type==="restrictReturnedAccounts")))===null||te===void 0?void 0:te.value;ne&&X.push(...ne)}return X}),[]);he("[initializeMobileProvider: sendRequest()] accountsToPersist:",V),V.length>0&&(_.handleAccountsChanged(V,!1),v?.persistAccounts(V))}return M}catch(M){throw console.error("[initializeMobileProvider: sendRequest()] error:",M),M}})),{request:$}=w;w.request=(...B)=>ye(void 0,void 0,void 0,(function*(){return F(B?.[0].method,B,$,c)}));const{send:U}=w;return w.send=(...B)=>ye(void 0,void 0,void 0,(function*(){return F(B?.[0],B,U,c)})),he("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),f.start(),w}));function N9(t){var e,n,r,i;return ye(this,void 0,void 0,(function*(){const{options:o}=t,s={communicationLayerPreference:(e=o.communicationLayerPreference)!==null&&e!==void 0?e:da.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:o.checkInstallationOnAllCalls,injectProvider:(n=o.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=o.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(i=o.extensionOnly)===null||i===void 0||i,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},a=yield P9(s);t.activeProvider=a,(function(c){var l,u,f,d;(u=(l=c.remoteConnection)===null||l===void 0?void 0:l.getConnector())===null||u===void 0||u.on(yr.ConnectionStatus,(h=>{c.emit(yr.ConnectionStatus,h)})),(d=(f=c.remoteConnection)===null||f===void 0?void 0:f.getConnector())===null||d===void 0||d.on(yr.ServiceStatus,(h=>{c.emit(yr.ServiceStatus,h)}))})(t)}))}const k9="sdk";class M9{constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=Sc,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:k9,event:e,sdkVersion:wa.version},this.originatorInfo),{params:n});he(`[Analytics: send()] event: ${e}`,r),Oo(r,this.serverURL).catch((i=>{he(`[Analytics: send()] error: ${i}`)}))}}const D9=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},B9=163400;function eb(t){var e,n,r;const{dappMetadata:i}=t,o=(function({url:u,name:f}){var d;const h=u+f,p=jd(h);if(!localStorage)return"";let g=(d=localStorage.getItem(p))!==null&&d!==void 0?d:"";if(!g){g=as();try{localStorage.setItem(p,g)}catch{return""}}return g})({url:(e=i?.url)!==null&&e!==void 0?e:"no_url",name:(n=i?.name)!==null&&n!==void 0?n:"no_name"}),s=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=s===Un.DesktopWeb,c=s===Un.MetaMaskMobileWebview;let l="N/A";return a?l="extension":c&&(l="mobile"),{id:o,from:l}}const hf=(t,e,n)=>{if(Au(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||e?.error;r&&r.code===4001?Xt.analytics.track("sdk_action_rejected",{action:t}):Xt.analytics.track("sdk_action_failed",{action:t})}else Xt.analytics.track("sdk_action_succeeded",{action:t})},sS=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(i){var o,s;return ye(this,void 0,void 0,(function*(){he("[wrapExtensionProvider()] Overwriting request method",i);const{method:a,params:c}=i,l=C9.includes(a.toLowerCase()),{id:u,from:f}=eb(e);if(l&&((o=e.analytics)===null||o===void 0||o.send({event:Qt.SDK_RPC_REQUEST,params:{method:a,from:f,id:u}})),Au(a)&&Xt.analytics.track("sdk_action_requested",{action:a}),a===De.METAMASK_BATCH&&Array.isArray(c))return(({target:p,args:g,trackEvent:y,sdkInstance:v})=>ye(void 0,void 0,void 0,(function*(){var m,w;if(g.method!=="metamask_batch")throw new Error("Invalid usage");const E=[],S=(m=g?.params)!==null&&m!==void 0?m:[];for(const $ of S){const U=yield p?.request({method:$.method,params:$.params});E.push(U)}const{id:O,from:F}=eb(v);y&&((w=v.analytics)===null||w===void 0||w.send({event:Qt.SDK_RPC_REQUEST_DONE,params:{method:g.method,from:F,id:O}}));for(const $ of E)hf(g.method,$,null);return E})))({target:n,args:i,trackEvent:l,sdkInstance:e});if(a.toLowerCase()===De.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(c))return(({target:p,params:g})=>ye(void 0,void 0,void 0,(function*(){let y,v=null;try{const m=yield p.request({method:De.ETH_REQUESTACCOUNTS,params:[]});if(!m.length)throw new Error("SDK state invalid -- undefined accounts");return y=yield p.request({method:De.PERSONAL_SIGN,params:[g[0],m[0]]}),y}catch(m){throw v=m,m}finally{hf(De.PERSONAL_SIGN,y,v)}})))({target:n,params:c});if(a.toLowerCase()===De.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(c))return(({target:p,params:g})=>ye(void 0,void 0,void 0,(function*(){const[y]=g,v=y.method,m=y.params;let w,E=null;try{const S=yield p.request({method:De.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(S)||!S.length)throw new Error("SDK state invalid -- undefined accounts");return v?.toLowerCase()===De.PERSONAL_SIGN.toLowerCase()?(w=yield p.request({method:v,params:[m[0],S[0]]}),w):v?.toLowerCase()===De.ETH_SENDTRANSACTION.toLowerCase()?(w=yield p.request({method:v,params:[Object.assign(Object.assign({},m[0]),{from:S[0]})]}),w):iS.includes(v.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${v} -- not handled by the extension -- call separately`),w=S,w):(w=yield p.request({method:v,params:m}),w)}catch(S){throw E=S,S}finally{hf(v,w,E)}})))({target:n,params:c});let d,h=null;try{return d=yield n.request(i),d}catch(p){throw h=p,p}finally{l&&((s=e.analytics)===null||s===void 0||s.send({event:Qt.SDK_RPC_REQUEST_DONE,params:{method:a,from:f,id:u}})),hf(a,d,h)}}))}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var Kd;function L9({mustBeMetaMask:t,sdkInstance:e}){return ye(this,void 0,void 0,(function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise(((r,i)=>{const o=setTimeout((()=>{i(new Error("eip6963RequestProvider timed out"))}),500);window.addEventListener(Kd.Announce,(s=>{const a=s,{detail:{info:c,provider:l}={}}=a,{name:u,rdns:f,uuid:d}=c??{};_9.test(d)&&u.startsWith(Z2.NAME)&&Z2.RDNS.includes(f)&&(clearTimeout(o),r(l))})),window.dispatchEvent(new Event(Kd.Request))}));return sS({provider:n,sdkInstance:e})}catch{throw new Error("Provider not found")}}))}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(Kd||(Kd={}));const F9=t=>ye(void 0,void 0,void 0,(function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r})),U9=t=>ye(void 0,void 0,void 0,(function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{he("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}}));function H9(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(l){try{c(r.next(l))}catch(u){o(u)}}function a(l){try{c(r.throw(l))}catch(u){o(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n((function(f){f(u)}))).then(s,a)}c((r=r.apply(t,[])).next())}))}function $9(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return(function(u){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){s=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){s.label=u[1];break}if(u[0]===6&&s.label<i[1]){s.label=i[1],i=u;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(u);break}i[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(f){u=[6,f],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([c,l])}}}var tb="INSTALLED",nb="NOT_INSTALLED",rb="REGISTERED",ib="REGISTERING",ob="RELOADING",sb={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},pf="REGISTRATION_IN_PROGRESS",ab="FORWARDER_ID",V9=(function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,i=r===void 0?"https://fwd.metamask.io":r,o=n.forwarderMode,s=o===void 0?t.FORWARDER_MODE.INJECT:o;this.forwarderOrigin=i,this.forwarderMode=s,this.state=t.isMetaMaskInstalled()?tb:nb;var a=t._detectBrowser();this.downloadUrl=a?sb[a]:sb.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),s===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(pf)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return H9(this,0,void 0,(function(){return $9(this,(function(n){switch(n.label){case 0:switch(this.state){case ob:return[3,1];case nb:return[3,2];case tb:return[3,3];case ib:return[3,5];case rb:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=ob,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=ib,[4,t._register()];case 4:return n.sent(),this.state=rb,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}}))}))},t.prototype.startOnboarding=function(){sessionStorage.setItem(pf,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(pf)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(pf,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",ab),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(ab))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=nS.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t})();function j9(t,{wait:e=!1}){return ye(this,void 0,void 0,(function*(){return he(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield oS(1e3)),yield t.checkInstallation()}))}class K9{constructor({remote:e,preferDesktop:n,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return(function(){return ye(this,void 0,void 0,(function*(){he("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new V9().startOnboarding()}))})()}redirectToProperInstall(){return ye(this,void 0,void 0,(function*(){return(function(e){var n,r;return ye(this,void 0,void 0,(function*(){const{state:i}=e,o=(n=i.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(he(`[MetamaskInstaller: redirectToProperInstall()] platform=${o}`),o===Un.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield(r=i.remote)===null||r===void 0?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(s){throw i.isInstalling=!1,s}return!0}))})(this)}))}checkInstallation(){return ye(this,void 0,void 0,(function*(){return(function(e){var n;return ye(this,void 0,void 0,(function*(){const{state:r}=e,i=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return he(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())}))})(this)}))}start({wait:e=!1,connectWith:n}){return ye(this,void 0,void 0,(function*(){this.state.connectWith=n,he(`[MetaMaskInstaller: start()] wait=${e}`,n),yield j9(this,{wait:e})}))}}class aS{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return ye(this,void 0,void 0,(function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then((function(){return _7}));console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}}))}renderInstallModal(e){var n;return ye(this,void 0,void 0,(function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",(({detail:{shouldTerminate:i}})=>e.onClose(i))),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",(i=>{var o;return(o=e.onAnalyticsEvent)===null||o===void 0?void 0:o.call(e,i.detail)})),e.parentElement.appendChild(r)}))}renderSelectModal(e){var n;return ye(this,void 0,void 0,(function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",(({detail:{shouldTerminate:i}})=>e.onClose(i))),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout((()=>this.updateQRCode(e.link)),100)}))}renderPendingModal(e){var n;return ye(this,void 0,void 0,(function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",(({detail:{otpValue:i}})=>e.updateOTPValue(i))),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)}))}updateOTPValue(e){const n=()=>{var r;const i=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!i&&(i.otpCode=e,!0)};setTimeout((()=>{n()}),800)}updateQRCode(e){var n,r;const i=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(i)i.link=e;else{const o=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");o&&(o.link=e)}}unmount(){Object.entries(this.containers).forEach((([e,n])=>{var r;(r=n?.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0}))}}const G9=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:i,preferDesktop:o,onAnalyticsEvent:s})=>{let a=null,c=null;he("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),he(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),he(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),he(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),he(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const l=u=>{var f;he("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,c),c?.parentNode&&((f=c.parentNode)===null||f===void 0||f.removeChild(c)),c=null,a=null,u===!0&&r?.()};return{mount:u=>{if(he("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",c),c)return c.style.display="block",void(a==null||a.updateQRCode(u));a=new aS({debug:e,sdkVersion:wa.version}),c=document.createElement("div"),document.body.appendChild(c),window.extension?a.renderSelectModal({parentElement:c,connectWithExtension:()=>{l(),i?.()},onClose:l,link:t,preferDesktop:o!=null&&o}).catch((f=>{console.error(f)})):a.renderInstallModal({parentElement:c,preferDesktop:o!=null&&o,link:t,metaMaskInstaller:n,onClose:l,onAnalyticsEvent:s}).catch((f=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",f)}))},unmount:l}},z9=({onDisconnect:t,debug:e})=>{let n=null,r=null;const i=()=>{he("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n?.parentNode&&n.parentNode.removeChild(n),n=null,r=null},o=a=>{he("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},s=({displayOTP:a}={displayOTP:!0})=>{he("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new aS({debug:e,sdkVersion:wa.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:t,updateOTPValue:o,displayOTP:a}).catch((c=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",c)})))};return s(),{mount:s,unmount:i,updateOTPValue:o}};function cS(t,e){var n,r,i,o;t.connector||(he("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new qk({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:wa.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(he("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(o=(i=e.timer)===null||i===void 0?void 0:i.runBackgroundTimer)===null||o===void 0||o.call(i,(()=>!1),1e4)))}function L1(t){t.listeners.forEach((({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)})),t.listeners=[]}function W9(t,e,n){return ye(this,void 0,void 0,(function*(){const r=setTimeout((()=>{Xt.analytics.track("sdk_connection_failed",{transport_type:"websocket"})}),6e4);return new Promise(((i,o)=>{if(!t.connector)return void o(new Error("No connector available"));he("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const s=`${t.useDeeplink?su:ou}?${n}`;(function(a,c,l){var u,f,d,h;a.installModal=(f=(u=c.modals).install)===null||f===void 0?void 0:f.call(u,{link:l,preferDesktop:a.preferDesktop,installer:c.getMetaMaskInstaller(),terminate:()=>{he("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),c.sdk.terminate().catch((p=>{console.warn("[MMSDK] failed to terminate connection",p)}))},debug:a.developerMode,connectWithExtension:()=>{var p;return(p=c.connectWithExtensionProvider)===null||p===void 0||p.call(c),!1},onAnalyticsEvent:({event:p,params:g})=>{var y,v,m;const w=Object.assign(Object.assign({},g),{sdkVersion:c.sdk.getVersion(),dappId:(y=c.dappMetadata)===null||y===void 0?void 0:y.name,source:c._source,url:(v=c.dappMetadata)===null||v===void 0?void 0:v.url});(m=a.analytics)===null||m===void 0||m.send({event:p,params:w})}}),(h=(d=a.installModal)===null||d===void 0?void 0:d.mount)===null||h===void 0||h.call(d,l)})(t,e,s),e.sdk.once(Ee.PROVIDER_UPDATE,(a=>ye(this,void 0,void 0,(function*(){if(he("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),a===$i.TERMINATE){const c={code:4001,message:"User rejected the request."};return clearTimeout(r),void o(c)}o(a)})))),t.connector.once(Ee.AUTHORIZED,(()=>{clearTimeout(r),i()})),t.connector.once(Ee.REJECTED,(()=>{clearTimeout(r),o(Ee.REJECTED)})),t.connector.once(Ee.CLIENTS_READY,(()=>ye(this,void 0,void 0,(function*(){he("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))))}))}))}function lS(t,e){function n(r,i){var o;(o=t.connector)===null||o===void 0||o.on(r,i),t.listeners.push({event:r,handler:i})}t.connector&&(L1(t),n(Ee.WALLET_INIT,(({accounts:r,chainId:i})=>ye(this,void 0,void 0,(function*(){he(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${i}`);const o=yi.getProvider();o._setConnected();const s={accounts:r,chainId:i,isUnlocked:!1};o._initializeState(s),o.emit("chainChanged",i),o.emit("accountsChanged",r)})))),n(Ee.AUTHORIZED,(()=>ye(this,void 0,void 0,(function*(){var r,i,o,s;try{he("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const a=yi.getProvider();a._setConnected(),(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(s=(o=t.installModal)===null||o===void 0?void 0:o.unmount)===null||s===void 0||s.call(o,!1),t.otpAnswer=void 0,t.authorized=!0,he("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})))),n(Ee.TERMINATE,(()=>{var r,i,o,s,a;(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(s=(o=t.installModal)===null||o===void 0?void 0:o.unmount)===null||s===void 0||s.call(o,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(a=t.connector)===null||a===void 0||a.disconnect({terminate:!0}),t.authorized=!1,yi.getProvider().handleDisconnect({terminate:!0}),L1(t),he("[RemoteConnection: setupListeners()] All listeners cleaned up")})))}function q9(t,e,{initialCheck:n,connectWith:r}={}){var i,o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E,S,O;return ye(this,void 0,void 0,(function*(){try{if(cS(t,e),!t.connector)throw new Error("no connector defined");lS(t);const F=yi.getProvider();t.authorized=!1,F.emit("connecting");const $=yield(i=t.connector)===null||i===void 0?void 0:i.originatorSessionConnect();he(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,$);let U=(o=$?.channelId)!==null&&o!==void 0?o:"",B=(a=(s=t.connector.getKeyInfo())===null||s===void 0?void 0:s.ecies.public)!==null&&a!==void 0?a:"",Y=(l=(c=t.connector.getKeyInfo())===null||c===void 0?void 0:c.ecies.private)!==null&&l!==void 0?l:"";if(n&&!$)return Promise.resolve();if(!$&&!n){const D=yield t.connector.generateChannelIdConnect();U=(u=D.channelId)!==null&&u!==void 0?u:"",B=(f=D.pubKey)!==null&&f!==void 0?f:"",Y=(d=D.privKey)!==null&&d!==void 0?d:"";const H=Date.now();(h=t.connector.state.storageManager)===null||h===void 0||h.persistChannelConfig({channelId:U,localKey:Y,lastActive:H,validUntil:H+Ic})}if(n&&$?.channelId)return!((p=t.connector)===null||p===void 0)&&p.isConnected()||(he(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,$),yield(g=t.connector)===null||g===void 0?void 0:g.connectToChannel({channelId:U})),Promise.resolve();$&&!(!((y=t.connector)===null||y===void 0)&&y.isConnected())&&(he("[RemoteConnection: startConnection()] reconnecting to channel",$),yield(v=t.connector)===null||v===void 0?void 0:v.connectToChannel({channelId:U}));const j=!((m=t.platformManager)===null||m===void 0)&&m.isSecure()?"":"&t=q",L=wa.version,{iconUrl:I,name:x,url:P,scheme:G}=e.dappMetadata||{},b=(w=t.platformManager)===null||w===void 0?void 0:w.getPlatformType();let C="N/A";typeof window<"u"&&window.location&&window.location.hostname?C=window.location.hostname:x!==void 0?C=x:P!==void 0&&(C=P);const T={url:P??"",title:x??"",icon:I,scheme:G??"",apiVersion:L,dappId:C||P||"N/A",anonId:e.anonId,platform:b??"",source:(E=e._source)!==null&&E!==void 0?E:""},k=jd(JSON.stringify(T));let A=`channelId=${U}&v=2&comm=${(S=t.communicationLayerPreference)!==null&&S!==void 0?S:""}&pubkey=${B}${j}&originatorInfo=${k}`;if(r){A+=`&rpc=${jd(JSON.stringify(r))}`;const D=t.connector.getRPCMethodTracker();D&&(D[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const _=encodeURI(A),R=`${t.useDeeplink?su:ou}?${A}`;if(t.qrcodeLink=R,t.developerMode&&he(`[RemoteConnection: startConnection()] qrcodeLink=${_}`),F.emit("display_uri",R),Xt.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(O=t.platformManager)===null||O===void 0?void 0:O.isSecure()){const D=setTimeout((()=>{Xt.analytics.track("sdk_connection_failed",{transport_type:"websocket"})}),6e4);return yield(function(H,N){var K,z;return ye(this,void 0,void 0,(function*(){const Z=`${ou}?${N}`,oe=`${su}?${N}`;(z=(K=H.platformManager)===null||K===void 0?void 0:K.openDeeplink)===null||z===void 0||z.call(K,Z,oe,"_self")}))})(t,_),new Promise(((H,N)=>{var K,z,Z;if(!((K=t.connector)===null||K===void 0)&&K.isAuthorized())return clearTimeout(D),void H();(z=t.connector)===null||z===void 0||z.once(Ee.AUTHORIZED,(()=>{clearTimeout(D),H()})),(Z=t.connector)===null||Z===void 0||Z.once(Ee.REJECTED,(()=>{clearTimeout(D),N(Ee.REJECTED)}))}))}return W9(t,e,_)}catch(F){throw console.error("[startConnection] error",F),F}}))}class Y9{constructor(e){var n,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const o=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=o,this.state.analytics=e.analytics,this.state.preferDesktop=(i=e.preferDesktop)!==null&&i!==void 0&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=G9),e.modals.otp||(e.modals.otp=z9)}startConnection(e){return ye(this,void 0,void 0,(function*(){return q9(this.state,this.options,e)}))}initRemoteCommunication({sdkInstance:e}){var n,r,i;return ye(this,void 0,void 0,(function*(){const o=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const s={privateKey:o?.localKey};this.options.ecies=s}cS(this.state,this.options),yield(i=this.getConnector())===null||i===void 0?void 0:i.initFromDappStorage(),lS(this.state,this.options)}))}showActiveModal(){return(function(e){var n,r,i,o;e.authorized?he("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((o=(i=e.installModal).mount)===null||o===void 0||o.call(i,e.qrcodeLink||""))})(this.state)}closeModal(){var e,n,r,i;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(i=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,i;he("[RemoteConnection: disconnect()]",e),e?.terminate&&(yi.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(i=this.state.connector)===null||i===void 0||i.disconnect(e),(function(o){he("[RemoteConnection: cleanupConnector()] cleaning up connector"),o.connector&&(L1(o),o.connector.disconnect({terminate:!0}).catch((s=>{he("[RemoteConnection: cleanupConnector()] error disconnecting connector",s)})))})(this.state)}}function X9(t){var e,n,r,i,o,s,a,c,l,u,f;return ye(this,void 0,void 0,(function*(){const{options:d}=t;if(d.logging=(e=d.logging)!==null&&e!==void 0?e:{},d.communicationLayerPreference=(n=d.communicationLayerPreference)!==null&&n!==void 0?n:da.SOCKET,d.enableDebug!==void 0&&(ir.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),d.enableAnalytics=(r=d.enableAnalytics)===null||r===void 0||r,d.injectProvider=(i=d.injectProvider)===null||i===void 0||i,d.shouldShimWeb3=(o=d.shouldShimWeb3)===null||o===void 0||o,d.extensionOnly=(s=d.extensionOnly)===null||s===void 0||s,d.useDeeplink=(a=d.useDeeplink)===null||a===void 0||a,d.storage=(c=d.storage)!==null&&c!==void 0?c:{enabled:!0},d.headless){ir("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const m=()=>{},w={install:()=>({mount:m,unmount:m})},E={installer:m};d.modals=w,d.ui=E}const h=((l=d.logging)===null||l===void 0?void 0:l.developerMode)===!0;t.debug=((u=d.logging)===null||u===void 0?void 0:u.sdk)||h,he("[MetaMaskSDK: performSDKInitialization()] options",t.options);const p=Object.assign({},d.logging);h&&(p.sdk=!0,p.eciesLayer=!0,p.keyExchangeLayer=!0,p.remoteLayer=!0,p.serviceLayer=!0,p.plaintext=!0),yield(function(m){var w;return ye(this,void 0,void 0,(function*(){const{options:E}=m;m.platformManager=new ru({useDeepLink:(w=E.useDeeplink)!==null&&w!==void 0&&w,preferredOpenLink:E.openDeeplink,debug:m.debug})}))})(t),yield(function(m){var w,E,S,O,F;return ye(this,void 0,void 0,(function*(){const{options:$}=m,U=(w=m.platformManager)===null||w===void 0?void 0:w.getPlatformType();m.analytics=new M9({serverUrl:(E=$.communicationServerUrl)!==null&&E!==void 0?E:Sc,enabled:$.enableAnalytics,originatorInfo:{url:(S=$.dappMetadata.url)!==null&&S!==void 0?S:"",title:(O=$.dappMetadata.name)!==null&&O!==void 0?O:"",dappId:m.getDappId(),platform:U??"",source:(F=$._source)!==null&&F!==void 0?F:"",anonId:""}})}))})(t),yield(function(m){var w,E,S;return ye(this,void 0,void 0,(function*(){if(!m.options.enableAnalytics||!(!((w=m.platformManager)===null||w===void 0)&&w.isBrowser())&&!(!((E=m.platformManager)===null||E===void 0)&&E.isReactNative()))return;const O=m.getVersion(),F=m.getDappId(),$=yield m.getAnonId(),U=(S=m.platformManager)===null||S===void 0?void 0:S.getPlatformType(),B=m.options._source;Xt.analytics.setGlobalProperty("sdk_version",O),Xt.analytics.setGlobalProperty("dapp_id",F),Xt.analytics.setGlobalProperty("anon_id",$),Xt.analytics.setGlobalProperty("platform",U),Xt.analytics.setGlobalProperty("integration_type",B),Xt.analytics.enable(),Xt.analytics.track("sdk_initialized",{})}))})(t),yield(function(m){var w;return ye(this,void 0,void 0,(function*(){const{options:E}=m;((w=E.storage)===null||w===void 0?void 0:w.enabled)!==!0||E.storage.storageManager||(E.storage.storageManager=yield rS(E.storage))}))})(t),yield(function(m){return ye(this,void 0,void 0,(function*(){const{options:w}=m,E=/^(http|https):\/\/[^\s]*$/;if(w.dappMetadata){w.dappMetadata.iconUrl&&!E.test(w.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),w.dappMetadata.iconUrl=void 0),w.dappMetadata.base64Icon&&w.dappMetadata.base64Icon.length>B9&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),w.dappMetadata.base64Icon=void 0),w.dappMetadata.url&&!E.test(w.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const S=D9();if(S&&!w.dappMetadata.iconUrl&&!w.dappMetadata.base64Icon){const O=`${window.location.protocol}//${window.location.host}${S}`;w.dappMetadata.iconUrl=O}}m.dappMetadata=w.dappMetadata}))})(t),yield F9(t),yield U9(t);const{metamaskBrowserExtension:g,preferExtension:y,shouldReturn:v}=yield(function(m){var w,E,S,O;return ye(this,void 0,void 0,(function*(){const{options:F}=m;let $,U=!1,B=!1;if(typeof window<"u"&&window.ethereum&&!(!((w=m.platformManager)===null||w===void 0)&&w.isMetaMaskMobileWebView())){U=localStorage.getItem(Vd)==="extension";try{$=yield L9({mustBeMetaMask:!0,sdkInstance:m}),window.extension=$,$.on(Ai.CHAIN_CHANGED,(Y=>{he(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${Y}`),m.sdkProvider&&m.getMobileProvider().emit(Ai.CHAIN_CHANGED,Y)})),$.on(Ai.ACCOUNTS_CHANGED,(Y=>ye(this,void 0,void 0,(function*(){var j;he(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${Y}`);const L=!!m.sdkProvider,I=!!m.extensionActive;if(L&&m.getMobileProvider().emit(Ai.ACCOUNTS_CHANGED,Y),I&&Y?.length===0&&(yield(j=m.getProvider())===null||j===void 0?void 0:j.request({method:De.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield m.terminate()}catch(x){he("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",x)}})))),$.on(Ai.DISCONNECT,(Y=>{he(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${Y}`),m.sdkProvider&&m.getMobileProvider().emit(Ai.DISCONNECT,Y)})),$.on(Ai.CONNECT,(Y=>{he(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${Y}`),m.sdkProvider&&m.getMobileProvider().emit(Ai.CONNECT,Y)})),$.on(Ai.CONNECTED,(Y=>{he("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",Y),m.sdkProvider&&m.getMobileProvider().emit(Ai.CONNECTED,Y)}))}catch{window.extension=void 0}}else!((E=m.platformManager)===null||E===void 0)&&E.isMetaMaskMobileWebView()&&((S=m.analytics)===null||S===void 0||S.send({event:Qt.SDK_USE_INAPP_BROWSER}),m.activeProvider=sS({provider:window.ethereum,sdkInstance:m}),m._initialized=!0,B=!0);return $&&F.extensionOnly&&(he("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(O=m.analytics)===null||O===void 0||O.send({event:Qt.SDK_USE_EXTENSION}),m.activeProvider=$,m.extensionActive=!0,m.extension=$,m._initialized=!0,B=!0),{preferExtension:U,shouldReturn:B,metamaskBrowserExtension:$}}))})(t);if(v)he("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield(function(m,w){var E,S,O,F,$;return ye(this,void 0,void 0,(function*(){const{options:U}=m,B=Object.assign({},U.logging);m.remoteConnection=new Y9({anonId:yield m.getAnonId(),preferDesktop:(E=U.preferDesktop)!==null&&E!==void 0&&E,communicationLayerPreference:(S=U.communicationLayerPreference)!==null&&S!==void 0?S:da.SOCKET,analytics:m.analytics,dappMetadata:U.dappMetadata,_source:U._source,enableAnalytics:(O=U.enableAnalytics)===null||O===void 0||O,timer:U.timer,sdk:m,platformManager:m.platformManager,transports:U.transports,communicationServerUrl:U.communicationServerUrl,storage:(F=U.storage)!==null&&F!==void 0?F:{enabled:!0},getMetaMaskInstaller:()=>{if(!m.installer)throw new Error("Invalid SDK status -- installer not initialized");return m.installer},logging:B,connectWithExtensionProvider:w===void 0?void 0:()=>Q2(m),modals:Object.assign(Object.assign({},U.modals),{onPendingModalDisconnect:m.terminate.bind(m)})}),yield m.remoteConnection.initRemoteCommunication({sdkInstance:m}),m.installer=new K9({remote:m.remoteConnection,preferDesktop:($=U.preferDesktop)!==null&&$!==void 0&&$,platformManager:m.platformManager,debug:m.debug})}))})(t,g),yield N9(t),yield(function(m,w){var E,S;return ye(this,void 0,void 0,(function*(){const{options:O}=m;w?(he("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(E=m.analytics)===null||E===void 0||E.send({event:Qt.SDK_EXTENSION_UTILIZED}),Q2(m).catch((F=>{console.warn("Can't connect with MetaMask extension...",F),localStorage.removeItem(Vd)}))):O.checkInstallationImmediately&&(!((S=m.platformManager)===null||S===void 0)&&S.isDesktopWeb()?(he("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),m.connect().catch((F=>{he(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${F}`)}))):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),m._initialized=!0}))})(t,y);try{yield(f=t.remoteConnection)===null||f===void 0?void 0:f.startConnection({initialCheck:!0})}catch(m){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",m)}t.emit(yr.ProviderUpdate,$i.INITIALIZED)}}))}class Z9 extends kP{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:X2,i18nOptions:{enabled:!1}}){var n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",ir.disable();const o=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||o)&&ir.enable("MM_SDK"),he("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((i=e.dappMetadata)===null||i===void 0)&&i.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=X2),this.init().then((()=>{he("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)})).catch((s=>{console.error("[MetaMaskSDK: constructor()] error during initialization",s)}))}init(){return ye(this,void 0,void 0,(function*(){return(function(e){var n;return ye(this,void 0,void 0,(function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return he("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return he("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return he("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=X9(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise}))})(this)}))}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return ye(this,void 0,void 0,(function*(){return(function(e){return ye(this,void 0,void 0,(function*(){if(e._initialized||(he("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),he(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:De.ETH_REQUESTACCOUNTS,params:[]})}))})(this)}))}connectAndSign({msg:e}){return ye(this,void 0,void 0,(function*(){return T9({instance:this,msg:e})}))}connectWith(e){return ye(this,void 0,void 0,(function*(){return(function({instance:n,rpc:r}){return ye(this,void 0,void 0,(function*(){if(n._initialized||(he("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),he(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:De.METAMASK_CONNECTWITH,params:[r]})}))})({instance:this,rpc:e})}))}resume(){return(function(e){var n,r,i;return ye(this,void 0,void 0,(function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return he("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((i=e.remoteConnection)===null||i===void 0||i.startConnection());he("[MetaMaskSDK: resume()] channel is ready")}))})(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return(function(e){var n,r,i;return ye(this,void 0,void 0,(function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(I9&&(window.localStorage.removeItem(Vd),window.localStorage.removeItem(B1),window.localStorage.removeItem(D1)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:De.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(o){he("[MetaMaskSDK: terminate()] error revoking permissions",o)}return e.options.extensionOnly?(e.emit(yr.ProviderUpdate,$i.TERMINATE),void he("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(yr.ProviderUpdate,$i.TERMINATE))}e.emit(yr.ProviderUpdate,$i.TERMINATE),he(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(i=e.remoteConnection)===null||i===void 0||i.disconnect({terminate:!0,sendMessage:!0})}}))})(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return wa.version}getDappId(){var e,n,r,i;return typeof window>"u"||window.location===void 0?(i=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&i!==void 0?i:"N/A":window.location.hostname}getAnonId(){var e,n;return ye(this,void 0,void 0,(function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():as(),this._anonId=r,r}))}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=as();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),as()}}getReactNativeAnonId(){return ye(this,void 0,void 0,(function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const i=as();return yield n.setItem(e,i),i}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),as()}}))}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var Q9=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return ye(this,void 0,void 0,(function*(){const e=JSON.stringify(t);he(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(lp,e)}))}getPersistedChannelConfig(){return ye(this,void 0,void 0,(function*(){let t;try{if(he(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(lp),he("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return he("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}}))}persistAccounts(t){return ye(this,void 0,void 0,(function*(){he(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(D1,e)}))}getCachedAccounts(){return ye(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(D1);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}}))}persistChainId(t){return ye(this,void 0,void 0,(function*(){he(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(B1,t)}))}getCachedChainId(){return ye(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(B1);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}}))}terminate(){return ye(this,void 0,void 0,(function*(){he(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(lp)}))}}});const J9="hydrated",e7=!1,t7=!0;var n7=Object.defineProperty,xv=new WeakMap,fs=t=>xv.get(t),Av=(t,e)=>xv.set(e.$lazyInstance$=t,e),cb=(t,e)=>e in t,oa=(t,e)=>(0,console.error)(t,e),up=new Map,qf=new Map,uS="slot-fb{display:contents}slot-fb[hidden]{display:none}",Lh=typeof window<"u"?window:{},Bi=Lh.document||{head:{}},Sn={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},fS=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),F1=!1,lb=[],dS=[],r7=(t,e)=>n=>{t.push(n),F1||(F1=!0,4&Sn.$flags$?_v(U1):Sn.raf(U1))},ub=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){oa(n)}t.length=0},U1=()=>{ub(lb),ub(dS),(F1=lb.length>0)&&Sn.raf(U1)},_v=t=>(e=>Promise.resolve(e))().then(t),i7=r7(dS),fb={},Cv=t=>(t=typeof t)=="object"||t==="function";function hS(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)n7(t,n,{get:e[n],enumerable:!0})})({},{err:()=>pS,map:()=>o7,ok:()=>H1,unwrap:()=>s7,unwrapErr:()=>a7});var H1=t=>({isOk:!0,isErr:!1,value:t}),pS=t=>({isOk:!1,isErr:!0,value:t});function o7(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then((r=>H1(r))):H1(n)}if(t.isErr){const n=t.value;return pS(n)}throw"should never get here"}var Sv,s7=t=>{if(t.isOk)return t.value;throw t.value},a7=t=>{if(t.isErr)return t.value;throw t.value},pe=(t,e,...n)=>{let r=null,i=!1,o=!1;const s=[],a=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!Cv(r))&&(r=String(r)),i&&o?s[s.length-1].$text$+=r:s.push(i?Gd(null,r):r),o=i)};if(a(n),e){const l=e.className||e.class;l&&(e.class=typeof l!="object"?l:Object.keys(l).filter((u=>l[u])).join(" "))}if(typeof t=="function")return t(e===null?{}:e,s,l7);const c=Gd(t,null);return c.$attrs$=e,s.length>0&&(c.$children$=s),c},Gd=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),c7={},l7={forEach:(t,e)=>t.map(db).forEach(e),map:(t,e)=>t.map(db).map(e).map(u7)},db=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),u7=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),pe(t.vtag,n,...t.vchildren||[])}const e=Gd(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Fh=t=>fs(t).$hostElement$,vs=(t,e,n)=>{const r=Fh(t);return{emit:i=>gS(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:i})}},gS=(t,e,n)=>{const r=Sn.ce(e,n);return t.dispatchEvent(r),r},hb=new WeakMap,f7=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const i=((o,s,a)=>{var c;const l=vS(s),u=qf.get(l);if(o=o.nodeType===11?o:Bi,u)if(typeof u=="string"){o=o.head||o;let f,d=hb.get(o);if(d||hb.set(o,d=new Set),!d.has(l)){{f=Bi.createElement("style"),f.innerHTML=u;const h=(c=Sn.$nonce$)!=null?c:hS(Bi);if(h!=null&&f.setAttribute("nonce",h),!(1&s.$flags$))if(o.nodeName==="HEAD"){const p=o.querySelectorAll("link[rel=preconnect]"),g=p.length>0?p[p.length-1].nextSibling:o.querySelector("style");o.insertBefore(f,g)}else if("host"in o)if(fS){const p=new CSSStyleSheet;p.replaceSync(u),o.adoptedStyleSheets=[p,...o.adoptedStyleSheets]}else{const p=o.querySelector("style");p?p.innerHTML=u+p.innerHTML:o.prepend(f)}else o.append(f);1&s.$flags$&&o.nodeName!=="HEAD"&&o.insertBefore(f,null)}4&s.$flags$&&(f.innerHTML+=uS),d&&d.add(l)}}else o.adoptedStyleSheets.includes(u)||(o.adoptedStyleSheets=[...o.adoptedStyleSheets,u]);return l})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h"))},vS=(t,e)=>"sc-"+t.$tagName$,pb=(t,e,n,r,i,o)=>{if(n!==r){let s=cb(t,e),a=e.toLowerCase();if(e==="class"){const c=t.classList,l=gb(n),u=gb(r);c.remove(...l.filter((f=>f&&!u.includes(f)))),c.add(...u.filter((f=>f&&!l.includes(f))))}else if(e==="style"){for(const c in n)r&&r[c]!=null||(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)n&&r[c]===n[c]||(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(s||e[0]!=="o"||e[1]!=="n"){const c=Cv(r);if((s||c&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const l=r??"";e==="list"?s=!1:n!=null&&t[e]==l||(typeof t.__lookupSetter__(e)=="function"?t[e]=l:t.setAttribute(e,l))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!s||4&o||i)&&!c&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):cb(Lh,a)?a.slice(2):a[2]+e.slice(3),n||r){const c=e.endsWith(yS);e=e.replace(h7,""),n&&Sn.rel(t,e,n,c),r&&Sn.ael(t,e,r,c)}}},d7=/\s/,gb=t=>t?t.split(d7):[],yS="Capture",h7=new RegExp(yS+"$"),mS=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||fb,o=e.$attrs$||fb;for(const s of vb(Object.keys(i)))s in o||pb(r,s,i[s],void 0,n,e.$flags$);for(const s of vb(Object.keys(o)))pb(r,s,i[s],o[s],n,e.$flags$)};function vb(t){return t.includes("ref")?[...t.filter((e=>e!=="ref")),"ref"]:t}var Gr=!1,Iv=(t,e,n,r)=>{const i=e.$children$[n];let o,s,a=0;if(i.$text$!==null)o=i.$elm$=Bi.createTextNode(i.$text$);else{if(Gr||(Gr=i.$tag$==="svg"),o=i.$elm$=Bi.createElementNS(Gr?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.$tag$),Gr&&i.$tag$==="foreignObject"&&(Gr=!1),mS(null,i,Gr),o.getRootNode().querySelector("body"),i.$children$)for(a=0;a<i.$children$.length;++a)s=Iv(t,i,a),s&&o.appendChild(s);i.$tag$==="svg"?Gr=!1:o.tagName==="foreignObject"&&(Gr=!0)}return o["s-hn"]=Sv,o},yb=(t,e,n,r,i,o)=>{let s,a=t;for(a.shadowRoot&&a.tagName===Sv&&(a=a.shadowRoot);i<=o;++i)r[i]&&(s=Iv(null,n,i),s&&(r[i].$elm$=s,Yf(a,s,e)))},mb=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const o=i.$elm$;o&&o.remove()}}},gf=(t,e,n=!1)=>t.$tag$===e.$tag$,cl=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,o=e.$children$,s=e.$tag$,a=e.$text$;a===null?(mS(t,e,Gr=s==="svg"||s!=="foreignObject"&&Gr),i!==null&&o!==null?((c,l,u,f,d=!1)=>{let h,p=0,g=0,y=l.length-1,v=l[0],m=l[y],w=f.length-1,E=f[0],S=f[w];for(;p<=y&&g<=w;)v==null?v=l[++p]:m==null?m=l[--y]:E==null?E=f[++g]:S==null?S=f[--w]:gf(v,E,d)?(cl(v,E,d),v=l[++p],E=f[++g]):gf(m,S,d)?(cl(m,S,d),m=l[--y],S=f[--w]):gf(v,S,d)?(cl(v,S,d),Yf(c,v.$elm$,m.$elm$.nextSibling),v=l[++p],S=f[--w]):gf(m,E,d)?(cl(m,E,d),Yf(c,m.$elm$,v.$elm$),m=l[--y],E=f[++g]):(h=Iv(l&&l[g],u,g),E=f[++g],h&&Yf(v.$elm$.parentNode,h,v.$elm$));p>y?yb(c,f[w+1]==null?null:f[w+1].$elm$,u,f,g,w):g>w&&mb(l,p,y)})(r,i,e,o,n):o!==null?(t.$text$!==null&&(r.textContent=""),yb(r,null,e,o,0,o.length-1)):!n&&t7&&i!==null&&mb(i,0,i.length-1),Gr&&s==="svg"&&(Gr=!1)):t.$text$!==a&&(r.data=a)},Yf=(t,e,n)=>t?.insertBefore(e,n),p7=(t,e,n=!1)=>{const r=t.$hostElement$,i=t.$cmpMeta$,o=t.$vnode$||Gd(null,null),s=(a=e)&&a.$tag$===c7?e:pe(null,null,e);var a;if(Sv=r.tagName,n&&s.$attrs$)for(const c of Object.keys(s.$attrs$))r.hasAttribute(c)&&!["key","ref","style","class"].includes(c)&&(s.$attrs$[c]=r[c]);s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=o.$elm$=r.shadowRoot||r,r["s-sc"],1&i.$flags$,cl(o,s,n)},wS=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((n=>t.$onRenderResolve$=n)))},Tv=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(wS(t,t.$ancestorComponent$),i7((()=>g7(t,e))))),g7=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return v7(void 0,(()=>m7(t,r,e)))},v7=(t,e)=>y7(t)?t.then(e).catch((n=>{console.error(n),e()})):e(),y7=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",m7=async(t,e,n)=>{var r;const i=t.$hostElement$;t.$cmpMeta$.$tagName$;const o=i["s-rc"];n&&f7(t),t.$cmpMeta$.$tagName$,w7(t,e,i,n),o&&(o.map((s=>s())),i["s-rc"]=void 0);{const s=(r=i["s-p"])!=null?r:[],a=()=>b7(t);s.length===0?a():(Promise.all(s).then(a),t.$flags$|=4,s.length=0)}},w7=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,p7(t,e,r)}catch(i){oa(i,t.$hostElement$)}return null},b7=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,ES(e),Ov(r,"componentDidLoad"),t.$onReadyResolve$(e),i||bS()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&_v((()=>Tv(t,!1))),t.$flags$&=-517},bS=t=>{ES(Bi.documentElement),_v((()=>gS(Lh,"appload",{detail:{namespace:"sdk-install-modal-web"}})))},Ov=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){oa(r)}},ES=t=>{var e;return t.classList.add((e=J9)!=null?e:"hydrated")},E7=(t,e,n,r)=>{const i=fs(t);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const o=i.$hostElement$,s=i.$instanceValues$.get(e),a=i.$flags$,c=i.$lazyInstance$;var l,u;l=n,u=r.$members$[e][0],n=l==null||Cv(l)?l:4&u?l!=="false"&&(l===""||!!l):1&u?String(l):l;const f=Number.isNaN(s)&&Number.isNaN(n);if((!(8&a)||s===void 0)&&n!==s&&!f&&(i.$instanceValues$.set(e,n),c)){if(r.$watchers$&&128&a){const d=r.$watchers$[e];d&&d.map((h=>{try{c[h](n,s,e)}catch(p){oa(p,o)}}))}(18&a)==2&&Tv(i,!1)}},xS=(t,e,n)=>{var r,i;const o=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const s=Object.entries((r=e.$members$)!=null?r:{});if(s.map((([a,[c]])=>{(31&c||2&n&&32&c)&&Object.defineProperty(o,a,{get(){return l=a,fs(this).$instanceValues$.get(l);var l},set(l){E7(this,a,l,e)},configurable:!0,enumerable:!0})})),1&n){const a=new Map;o.attributeChangedCallback=function(c,l,u){Sn.jmp((()=>{var f;const d=a.get(c);if(this.hasOwnProperty(d))u=this[d],delete this[d];else{if(o.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==u)return;if(d==null){const h=fs(this),p=h?.$flags$;if(p&&!(8&p)&&128&p&&u!==l){const g=h.$lazyInstance$,y=(f=e.$watchers$)==null?void 0:f[c];y?.forEach((v=>{g[v]!=null&&g[v].call(g,u,l,c)}))}return}}this[d]=(u!==null||typeof this[d]!="boolean")&&u}))},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...s.filter((([c,l])=>15&l[0])).map((([c,l])=>{const u=l[1]||c;return a.set(u,c),u}))]))}}return t},x7=async(t,e,n,r)=>{let i;if((32&e.$flags$)==0){if(e.$flags$|=32,n.$lazyBundleId$){const a=((c,l,u)=>{const f=c.$tagName$.replace(/-/g,"_"),d=c.$lazyBundleId$;if(!d)return;const h=up.get(d);if(h)return h[f];{const p=g=>(up.set(d,g),g[f]);if(d==="mm-install-modal_3")return Promise.resolve().then((function(){return L7})).then(p,oa)}return to(()=>import(`./${d}.entry.js`),[]).then((p=>(up.set(d,p),p[f])),oa)})(n);if(a&&"then"in a?i=await a:i=a,!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,xS(i,n,2),i.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new i(e)}catch(c){oa(c)}e.$flags$&=-9,e.$flags$|=128,$1(e.$lazyInstance$)}else{i=t.constructor;const a=t.localName;customElements.whenDefined(a).then((()=>e.$flags$|=128))}if(i&&i.style){let a;typeof i.style=="string"&&(a=i.style);const c=vS(n);qf.has(c)||(n.$tagName$,((l,u,f)=>{let d=qf.get(l);fS&&f?(d=d||new CSSStyleSheet,typeof d=="string"?d=u:d.replaceSync(u)):d=u,qf.set(l,d)})(c,a,!!(1&n.$flags$)))}}const o=e.$ancestorComponent$,s=()=>Tv(e,!0);o&&o["s-rc"]?o["s-rc"].push(s):s()},$1=t=>{Ov(t,"connectedCallback")},wb=t=>{Ov(t,"disconnectedCallback")},A7=(t,e={})=>{var n;const r=[],i=e.exclude||[],o=Lh.customElements,s=Bi.head,a=s.querySelector("meta[charset]"),c=Bi.createElement("style"),l=[];let u,f=!0;Object.assign(Sn,e),Sn.$resourcesUrl$=new URL(e.resourcesUrl||"./",Bi.baseURI).href;let d=!1;if(t.map((h=>{h[1].map((p=>{var g;const y={$flags$:p[0],$tagName$:p[1],$members$:p[2],$listeners$:p[3]};4&y.$flags$&&(d=!0),y.$members$=p[2],y.$watchers$=(g=p[4])!=null?g:{};const v=y.$tagName$,m=class extends HTMLElement{constructor(w){if(super(w),this.hasRegisteredEventListeners=!1,((E,S)=>{const O={$flags$:0,$hostElement$:E,$cmpMeta$:S,$instanceValues$:new Map};O.$onReadyPromise$=new Promise((F=>O.$onReadyResolve$=F)),E["s-p"]=[],E["s-rc"]=[],xv.set(E,O)})(w=this,y),1&y.$flags$)if(w.shadowRoot){if(w.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${y.$tagName$}! Mode is set to ${w.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else w.attachShadow({mode:"open"})}connectedCallback(){fs(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),f?l.push(this):Sn.jmp((()=>(w=>{if((1&Sn.$flags$)==0){const E=fs(w),S=E.$cmpMeta$;if(S.$tagName$,1&E.$flags$)E?.$lazyInstance$?$1(E.$lazyInstance$):E?.$onReadyPromise$&&E.$onReadyPromise$.then((()=>$1(E.$lazyInstance$)));else{E.$flags$|=1;{let O=w;for(;O=O.parentNode||O.host;)if(O["s-p"]){wS(E,E.$ancestorComponent$=O);break}}S.$members$&&Object.entries(S.$members$).map((([O,[F]])=>{if(31&F&&w.hasOwnProperty(O)){const $=w[O];delete w[O],w[O]=$}})),x7(w,E,S)}}})(this)))}disconnectedCallback(){Sn.jmp((()=>(async w=>{if((1&Sn.$flags$)==0){const E=fs(w);E?.$lazyInstance$?wb(E.$lazyInstance$):E?.$onReadyPromise$&&E.$onReadyPromise$.then((()=>wb(E.$lazyInstance$)))}})(this)))}componentOnReady(){return fs(this).$onReadyPromise$}};y.$lazyBundleId$=h[0],i.includes(v)||o.get(v)||(r.push(v),o.define(v,xS(m,y,1)))}))})),r.length>0&&(d&&(c.textContent+=uS),c.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",c.innerHTML.length)){c.setAttribute("data-styles","");const h=(n=Sn.$nonce$)!=null?n:hS(Bi);h!=null&&c.setAttribute("nonce",h),s.insertBefore(c,a?a.nextSibling:s.firstChild)}f=!1,l.length?l.map((h=>h.connectedCallback())):Sn.jmp((()=>u=setTimeout(bS,30)))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var _7=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,A7([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>Sn.$nonce$=t});const C7={fontFamily:"Roboto, sans-serif"},Rv=({className:t},e)=>pe("div",{style:C7,class:t},e),fp=({Icon:t,text:e})=>pe("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},pe("div",{class:"flexItem1"},pe(t,null)),pe("div",{class:"flexItem11"},pe("span",{style:{lineHeight:"2",color:"black"}},e))),S7=()=>pe("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pe("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),pe("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),I7=()=>pe("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pe("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),T7=()=>pe("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pe("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),O7=()=>pe("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pe("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),pe("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),pe("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function Pv({version:t}){return pe("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const Nv=()=>pe("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pe("rect",{width:"16",height:"16",fill:"white"}),pe("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),kv=()=>pe("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},pe("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function Bs(t,e){return t.toString(2).padStart(e,"0")}function bb(t,e){const n=t%e;return n>=0?n:e+n}function Or(t,e){return new Array(t).fill(e)}function Eb(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function xb(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function Ab(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map((n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r}))},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map((n=>{if((function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)})(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]}))}}}class Ir{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,i=new Array(r);let o;for(const s of n){const a=s.split("").map((c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)}));if(o&&a.length!==o)throw new Error(`Bitmap.fromString different row sizes: width=${o} cur=${a.length}`);o=a.length,i.push(a)}return o||(o=0),new Ir({height:r,width:o},i)}constructor(e,n){const{height:r,width:i}=Ir.size(e);this.data=n||Array.from({length:r},(()=>Or(i,void 0))),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=bb(e.x,this.width),e.y=bb(e.y,this.height),e}rect(e,n,r){const{x:i,y:o}=this.xy(e),{height:s,width:a}=Ir.size(n,this.size({x:i,y:o}));for(let c=0;c<s;c++)for(let l=0;l<a;l++)this.data[o+c][i+l]=typeof r=="function"?r({x:l,y:c},this.data[o+c][i+l]):r;return this}rectRead(e,n,r){return this.rect(e,n,((i,o)=>(r(i,o),o)))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,o=Or(e,n),s=Array.from({length:e},(()=>Or(i,n)));return new Ir({height:r,width:i},[...s,...this.data.map((a=>[...o,...a,...o])),...s])}embed(e,n){return this.rect(e,n.size(),(({x:r,y:i})=>n.data[i][r]))}rectSlice(e,n=this.size()){const r=new Ir(Ir.size(n,this.size(this.xy(e))));return this.rect(e,n,(({x:i,y:o},s)=>r.data[o][i]=s)),r}inverse(){const{height:e,width:n}=this;return new Ir({height:n,width:e}).rect({x:0,y:0},1/0,(({x:r,y:i})=>this.data[r][i]))}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new Ir({height:e*n,width:e*r}).rect({x:0,y:0},1/0,(({x:i,y:o})=>this.data[Math.floor(o/e)][Math.floor(i/e)]))}clone(){return new Ir(this.size()).rect({x:0,y:0},this.size(),(({x:e,y:n})=>this.data[n][e]))}assertDrawn(){this.rectRead(0,1/0,((e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)}))}toString(){return this.data.map((e=>e.map((n=>n===void 0?"?":n?"X":" ")).join(""))).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let o=0;o<e;o+=2){for(let s=0;s<n;s++){const a=r[o][s],c=o+1>=e||r[o+1][s];a||c?!a&&c?i+="":a&&!c?i+="":a&&c&&(i+=" "):i+=""}i+=`
`}return i}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map((i=>i.map((o=>o?r:n)).join(""))).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,(({x:n,y:r},i)=>{i&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)})),e+="</svg>",e}toGIF(){const e=a=>[255&a,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,((a,c)=>r.push(+(c===!0))));const i=126,o=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...Or(381,0),44,0,0,0,0,...n,0,7],s=Math.floor(r.length/i);for(let a=0;a<s;a++)o.push(127,128,...r.slice(i*a,i*(a+1)).map((c=>+c)));return o.push(r.length%i+1,128,...r.slice(s*i).map((a=>+a))),o.push(1,129,0,59),new Uint8Array(o)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let o=0;for(let s=0;s<n;s++)for(let a=0;a<r;a++){const c=this.data[s][a]?0:255;i[o++]=c,i[o++]=c,i[o++]=c,e||(i[o++]=255)}return{height:n,width:r,data:i}}}const _b=["low","medium","quartile","high"],Cb=["numeric","alphanumeric","byte","kanji","eci"],R7=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],P7={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},N7={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},$n={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=$n.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);const o=[6];for(let s=1;s<r;s++)o.push(e-(r-s)*i);return o.push(e),o},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=$n.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^$n.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:Ab("0123456789"),alphanumerc:Ab("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][$n.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=R7[t-1],r=P7[e][t-1],i=N7[e][t-1],o=Math.floor(n/i)-r,s=i-n%i;return{words:r,numBlocks:i,shortBlocks:s,blockLen:o,capacity:8*(n-r*i),total:(r+o)*i+i-s}}},V1=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],Oe={tables:(t=>{const e=Or(256,0),n=Or(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,256&i&&(i^=285);return{exp:e,log:n}})(),exp:t=>Oe.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return Oe.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:Oe.tables.exp[(Oe.tables.log[t]+Oe.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>Oe.tables.exp[Oe.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return Oe.tables.exp[255-Oe.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=Or(t+1,0);return n[0]=e,Oe.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[Oe.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=Or(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=Oe.add(n[r+i],Oe.mul(t[r],e[i]));return Oe.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=Or(t.length,0);for(let r=0;r<t.length;r++)n[r]=Oe.mul(t[r],e);return Oe.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=Or(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=Oe.mul(t[i],n);return Oe.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=Or(r.length,0),o=r.length-n.length,s=r.slice(0,o);for(let a=0;a<s.length;a++)i[a]=s[a];for(let a=o;a<r.length;a++)i[a]=Oe.add(n[a-o],r[a]);return Oe.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let o=1;o<e.length;o++)e[o]!==0&&(n[r+o]=Oe.add(n[r+o],Oe.mul(e[o],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=Oe.mulPoly(e,[1,Oe.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return Oe.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=Oe.add(Oe.mul(e,n),t[r]);return n},euclidian(t,e,n){Oe.degree(t)<Oe.degree(e)&&([t,e]=[e,t]);let r=t,i=e,o=[0],s=[1];for(;2*Oe.degree(i)>=n;){let l=r,u=o;if(r=i,o=s,r[0]===0)throw new Error("rLast[0] === 0");i=l;let f=[0];const d=Oe.inv(r[0]);for(;Oe.degree(i)>=Oe.degree(r)&&i[0]!==0;){const h=Oe.degree(i)-Oe.degree(r),p=Oe.mul(i[0],d);f=Oe.addPoly(f,Oe.monomial(h,p)),i=Oe.addPoly(i,Oe.mulPolyMonomial(r,h,p))}if(f=Oe.mulPoly(f,o),s=Oe.addPoly(f,u),Oe.degree(i)>=Oe.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=Oe.coefficient(s,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=Oe.inv(a);return[Oe.mulPolyScalar(s,c),Oe.mulPolyScalar(i,c)]}};function k7(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:o,total:s}=$n.capacity(t,e),a=(c=n,{encode(l){const u=Oe.divisorPoly(c),f=Array.from(l);return f.push(...u.slice(0,-1).fill(0)),Uint8Array.from(Oe.remainderPoly(f,u))},decode(l){const u=l.slice(),f=Oe.polynomial(Array.from(l));let d=Or(c,0),h=!1;for(let w=0;w<c;w++){const E=Oe.evalPoly(f,Oe.exp(w));d[d.length-1-w]=E,E!==0&&(h=!0)}if(!h)return u;d=Oe.polynomial(d);const p=Oe.monomial(c,1),[g,y]=Oe.euclidian(p,d,c),v=Or(Oe.degree(g),0);let m=0;for(let w=1;w<256&&m<v.length;w++)Oe.evalPoly(g,w)===0&&(v[m++]=Oe.inv(w));if(m!==v.length)throw new Error("RS.decode: wrong errors number");for(let w=0;w<v.length;w++){const E=u.length-1-Oe.log(v[w]);if(E<0)throw new Error("RS.decode: wrong error location");const S=Oe.inv(v[w]);let O=1;for(let F=0;F<v.length;F++)w!==F&&(O=Oe.mul(O,Oe.add(1,Oe.mul(v[F],S))));u[E]=Oe.add(u[E],Oe.mul(Oe.evalPoly(y,S),Oe.inv(O)))}return u}});var c;return{encode(l){const u=[],f=[];for(let g=0;g<i;g++){const y=o+(g<r?0:1);u.push(l.subarray(0,y)),f.push(a.encode(l.subarray(0,y))),l=l.subarray(y)}const d=Eb(...u),h=Eb(...f),p=new Uint8Array(d.length+h.length);return p.set(d),p.set(h,d.length),p},decode(l){if(l.length!==s)throw new Error(`interleave.decode: len(data)=${l.length}, total=${s}`);const u=[];for(let h=0;h<i;h++){const p=h<r;u.push(new Uint8Array(n+o+(p?0:1)))}let f=0;for(let h=0;h<o;h++)for(let p=0;p<i;p++)u[p][h]=l[f++];for(let h=r;h<i;h++)u[h][o]=l[f++];for(let h=o;h<o+n;h++)for(let p=0;p<i;p++){const g=p<r;u[p][h+(g?0:1)]=l[f++]}const d=[];for(const h of u)d.push(...Array.from(a.decode(h)).slice(0,-n));return Uint8Array.from(d)}}}function Sb(t,e,n,r){let i="",o=n.length;if(r==="numeric"){const f=$n.alphabet.numeric.decode(n.split("")),d=f.length;for(let h=0;h<d-2;h+=3)i+=Bs(100*f[h]+10*f[h+1]+f[h+2],10);d%3==1?i+=Bs(f[d-1],4):d%3==2&&(i+=Bs(10*f[d-2]+f[d-1],7))}else if(r==="alphanumeric"){const f=$n.alphabet.alphanumerc.decode(n.split("")),d=f.length;for(let h=0;h<d-1;h+=2)i+=Bs(45*f[h]+f[h+1],11);d%2==1&&(i+=Bs(f[d-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const f=(function(d){if(typeof d!="string")throw new Error("utf8ToBytes expected string, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))})(n);o=f.length,i=Array.from(f).map((d=>Bs(d,8))).join("")}}const{capacity:s}=$n.capacity(t,e),a=Bs(o,$n.lengthBits(t,r));let c=$n.modeBits[r]+a+i;if(c.length>s)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,s-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let f=0;c.length!==s;f++)c+=l[f%16];const u=Uint8Array.from(c.match(/(.{8})/g).map((f=>+`0b${f}`)));return k7(t,e).encode(u)}function Ib(t,e,n,r,i=!1){const o=(function(c,l,u,f=!1){const d=$n.size.encode(c);let h=new Ir(d+2);const p=new Ir(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);h=h.embed(0,p).embed({x:-p.width,y:0},p).embed({x:0,y:-p.height},p),h=h.rectSlice(1,d);const g=new Ir(1).rect(0,1,!0).border(1,!1).border(1,!0),y=$n.alignmentPatterns(c);for(const v of y)for(const m of y)h.data[v][m]===void 0&&h.embed({x:m-2,y:v-2},g);h=h.hLine({x:0,y:6},1/0,(({x:v},m)=>m===void 0?v%2==0:m)).vLine({x:6,y:0},1/0,(({y:v},m)=>m===void 0?v%2==0:m));{const v=$n.formatBits(l,u),m=w=>!f&&(v>>w&1)==1;for(let w=0;w<6;w++)h.data[w][8]=m(w);for(let w=6;w<8;w++)h.data[w+1][8]=m(w);for(let w=8;w<15;w++)h.data[d-15+w][8]=m(w);for(let w=0;w<8;w++)h.data[8][d-w-1]=m(w);for(let w=8;w<9;w++)h.data[8][15-w-1+1]=m(w);for(let w=9;w<15;w++)h.data[8][15-w-1]=m(w);h.data[d-8][8]=!f}if(c>=7){const v=$n.versionBits(c);for(let m=0;m<18;m+=1){const w=!f&&(v>>m&1)==1,E=Math.floor(m/3),S=m%3+d-8-3;h.data[E][S]=w,h.data[S][E]=w}}return h})(t,e,r,i);let s=0;const a=8*n.length;if((function(c,l,u){const f=c.height,d=V1[l];let h=-1,p=f-1;for(let g=f-1;g>0;g-=2){for(g==6&&(g=5);;p+=h){for(let y=0;y<2;y+=1){const v=g-y;c.data[p][v]===void 0&&u(v,p,d(v,p))}if(p+h<0||p+h>=f)break}h=-h}})(o,r,((c,l,u)=>{let f=!1;s<a&&(f=(n[s>>>3]>>(7-s&7)&1)!=0,s++),o.data[l][c]=f!==u})),s!==a)throw new Error("QR: bytes left after draw");return o}function M7(t){const e=t.inverse(),n=h=>{let p=0;for(let g,y=0,v=1;y<h.length;y++)g===h[y]&&(v++,y!==h.length-1)||(v>=5&&(p+=v-5+3),g=h[y],v=1);return p};let r=0;t.data.forEach((h=>r+=n(h))),e.data.forEach((h=>r+=n(h)));let i=0,o=t.data;const s=t.width-1,a=t.height-1;for(let h=0;h<s;h++)for(let p=0;p<a;p++){const g=h+1,y=p+1;o[h][p]===o[g][p]&&o[g][p]===o[h][y]&&o[g][p]===o[g][y]&&(i+=3)}const c=h=>{const p=[!0,!1,!0,!0,!0,!1,!0],g=[!1,!1,!1,!1],y=[...p,...g],v=[...g,...p];let m=0;for(let w=0;w<h.length;w++)xb(h,y,w)&&(m+=40),xb(h,v,w)&&(m+=40);return m};let l=0;for(const h of t.data)l+=c(h);for(const h of e.data)l+=c(h);let u=0;t.rectRead(0,1/0,((h,p)=>u+=p?1:0));const f=u/(t.height*t.width)*100,d=10*Math.floor(Math.abs(f-50)/5);return r+i+l+d}function AS(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!_b.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${_b}`)})(r);const i=n.encoding!==void 0?n.encoding:(function(u){let f="numeric";for(let d of u)if(!$n.alphabet.numeric.has(d)&&(f="alphanumeric",!$n.alphabet.alphanumerc.has(d)))return"byte";return f})(t);(function(u){if(!Cb.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${Cb}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(i),n.mask!==void 0&&(function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!V1[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)})(n.mask);let o,s=n.version,a=new Error("Unknown error");if(s!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(s),o=Sb(s,r,t,i);else for(let u=1;u<=40;u++)try{o=Sb(u,r,t,i),s=u;break}catch(f){a=f}if(!s||!o)throw a;let c=(function(u,f,d,h){if(h===void 0){const p=(function(){let g,y=1/0;return{add(v,m){v>=y||(g=m,y=v)},get:()=>g,score:()=>y}})();for(let g=0;g<V1.length;g++)p.add(M7(Ib(u,f,d,g,!0)),g);h=p.get()}if(h===void 0)throw new Error("Cannot find mask");return Ib(u,f,d,h)})(s,r,o,n.mask);c.assertDrawn();const l=n.border===void 0?2:n.border;if(!Number.isSafeInteger(l))throw new Error("Wrong border type="+typeof l);if(c=c.border(l,!1),n.scale!==void 0&&(c=c.scale(n.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG();if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}const dp={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class Mv{constructor(e){var n;this.translations=dp,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e?.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some((n=>n.toLowerCase().startsWith("en"))))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);this.translations=await i.json()}catch(r){console.warn(` Failed to load ${n} translations, falling back to English:`,r),this.translations=dp}else this.translations=dp}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let i=n;for(const o of r){if(typeof i!="object")return"";i=i[o]}return typeof i=="string"?i:""}}var Rl;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(Rl||(Rl={}));const _S=class{constructor(t){Av(this,t),this.close=vs(this,"close"),this.startDesktopOnboarding=vs(this,"startDesktopOnboarding"),this.trackAnalytics=vs(this,"trackAnalytics"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new Mv}componentDidLoad(){this.trackAnalytics.emit({event:Rl.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:Rl.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:Rl.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=AS(this.link,"svg",{ecc:"medium",scale:2});return pe(Rv,{className:"install-model"},pe("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),pe("div",{class:"modal"},pe("div",{class:"closeButtonContainer"},pe("div",{class:"right"},pe("span",{class:"closeButton",onClick:()=>this.onClose(!0)},pe(Nv,null)))),pe("div",{class:"logoContainer"},pe(kv,null)),pe("div",null,pe("div",{class:"tabcontainer"},pe("div",{class:"flexContainer"},pe("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),pe("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),pe("div",{style:{display:e===1?"none":"block"}},pe("div",{class:"flexContainer"},pe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&pe("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),pe("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",pe("br",null),pe("span",{class:"blue"},pe("b",null,t("META_MASK_MOBILE_APP"))))))),pe("div",{style:{display:e===2?"none":"block"}},pe("div",{class:"item"},pe(fp,{Icon:I7,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),pe("div",{class:"item"},pe(fp,{Icon:S7,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),pe("div",{class:"item"},pe(fp,{Icon:T7,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),pe("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},pe(O7,null),pe("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),pe(Pv,{version:this.sdkVersion})))}get el(){return Fh(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};_S.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const CS=class{constructor(t){Av(this,t),this.close=vs(this,"close"),this.disconnect=vs(this,"disconnect"),this.updateOTPValue=vs(this,"updateOTPValue"),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new Mv}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=i=>this.i18nInstance.t(i);return pe(Rv,{className:"pending-modal"},pe("div",{class:"backdrop",onClick:()=>this.onClose()}),pe("div",{class:"modal"},pe("div",{class:"closeButtonContainer"},pe("div",{class:"right"},pe("span",{class:"closeButton",onClick:()=>this.onClose()},pe(Nv,null)))),pe("div",{class:"logoContainer"},pe(kv,null)),pe("div",null,pe("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},pe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),pe("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&pe("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),pe("div",{style:{marginTop:"20px"}},pe("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),pe(Pv,{version:n})))}get el(){return Fh(this)}};CS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const D7=()=>pe("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pe("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),B7=()=>pe("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pe("rect",{width:"400",height:"300",fill:"white"}),pe("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),pe("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),pe("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),pe("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),pe("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),pe("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),pe("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),pe("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),pe("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),pe("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),pe("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),pe("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),pe("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),pe("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),pe("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),pe("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),pe("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),pe("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),pe("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),pe("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),pe("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),pe("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),SS=class{constructor(t){Av(this,t),this.close=vs(this,"close"),this.connectWithExtension=vs(this,"connectWithExtension"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new Mv,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=i=>this.i18nInstance.t(i),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=AS(this.link,"svg",{ecc:"medium",scale:2});return pe(Rv,{className:"select-modal"},pe("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),pe("div",{class:"modal"},pe("div",{class:"closeButtonContainer"},pe("div",{class:"right"},pe("span",{class:"closeButton",onClick:()=>this.onClose(!0)},pe(Nv,null)))),pe("div",{class:"logoContainer"},pe(kv,null)),pe("div",null,pe("div",{class:"tabcontainer"},pe("div",{class:"flexContainer"},pe("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),pe("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),pe("div",{style:{display:n===1?"none":"block"}},pe("div",{class:"flexContainer"},pe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},pe("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),pe("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),pe("br",null),pe("span",{class:"blue"},pe("b",null,t("META_MASK_MOBILE_APP"))))))),pe("div",{style:{display:n===2?"none":"block"}},pe("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},pe(B7,null)),pe("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),pe("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},pe(D7,null),pe("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),pe(Pv,{version:e})))}get el(){return Fh(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};SS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var L7=Object.freeze({__proto__:null,mm_install_modal:_S,mm_pending_modal:CS,mm_select_modal:SS});const zd=Pe(null),IS=Pe(null);let hp=null,Xc=null;function F7(){if(typeof window>"u")return null;const t=window.ethereum;return t?Array.isArray(t.providers)?t.providers.find(e=>e?.isMetaMask)||null:t.isMetaMask?t:null:null}function TS(){if(Xc=F7(),Xc||(Xc=new Z9({dappMetadata:{name:"NFT Ticketing",url:window.location.origin},checkInstallationImmediately:!1}).getProvider()),!Xc)throw new Error("MetaMask tidak terdeteksi.");return Xc}async function OS(){const t=TS(),e=await t.request({method:"eth_requestAccounts"});hp=new Rr(t);const n=await hp.getNetwork();return zd.value=e?.[0]||null,IS.value=Number(n.chainId),t.on?.("accountsChanged",r=>{zd.value=r?.[0]||null}),t.on?.("chainChanged",()=>window.location.reload()),{provider:hp}}async function cu(t="amoy"){const e=TS(),r=String(t||"polygon").toLowerCase()==="amoy"?{chainId:"0x13882",add:{chainId:"0x13882",chainName:"Polygon Amoy",rpcUrls:["https://rpc-amoy.polygon.technology"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://amoy.polygonscan.com"]}}:{chainId:"0x89",add:{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-bor-rpc.publicnode.com"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://polygonscan.com"]}};if((await e.request({method:"eth_chainId"}))?.toLowerCase()===r.chainId.toLowerCase())return!0;try{return await e.request({method:"wallet_switchEthereumChain",params:[{chainId:r.chainId}]}),!0}catch(o){if(o?.code===4902)return await e.request({method:"wallet_addEthereumChain",params:[r.add]}),!0;throw o}}async function U7(){return cu("polygon")}async function H7(){return cu("amoy")}function RS(){return{connect:OS,ensureChain:cu,switchToPolygonMainnet:U7,switchToPolygonAmoy:H7,account:zd,chainId:IS}}const Ba=["function owner() view returns (address)","function feeRecipient() view returns (address)","function events(uint256 id) view returns (address promoter,uint256 tokenId,uint256 priceWei,uint256 maxSupply,uint256 sold,bool active,uint64 eventTime,string metadataURI)","function isPromoter(address account) view returns (bool)","function nextEventId() view returns (uint256)","function promoterBalances(uint256 eventId) view returns (uint256)","function feeBalances(uint256 eventId) view returns (uint256)","function createEvent(uint256 priceWei,uint256 maxSupply,uint64 eventTime,string metadataURI) external returns (uint256)","function updateEvent(uint256 eventId,uint256 newPriceWei,uint256 additionalSupply,bool active,uint64 newEventTime,string newMetadataURI) external","function buyTicket(uint256 eventId,uint256 quantity) external payable","function setPromoter(address account,bool active) external","function withdrawPromoter(uint256 eventId) external","function withdrawFees(uint256 eventId) external","event EventCreated(uint256 indexed eventId,address indexed promoter,uint256 tokenId,uint256 priceWei,uint256 maxSupply,uint64 eventTime,string metadataURI)","event TicketPurchased(uint256 indexed eventId,address indexed buyer,uint256 quantity,uint256 totalPaidWei,uint256 feeWei,uint256 promoterShareWei)","event PromoterWithdraw(uint256 indexed eventId,address indexed promoter,uint256 amount)","event FeeWithdraw(uint256 indexed eventId,address indexed admin,uint256 amount)"],$7={class:"topbar"},V7={class:"container"},j7={class:"hero"},K7={class:"hero-title"},G7={key:0,class:"alert error"},z7={class:"cards"},W7={class:"img-wrap"},q7={class:"title"},Y7={key:0,class:"adm-tools"},X7=["onClick"],Z7=["onClick","title"],Q7=["onClick"],J7={class:"meta"},eD={class:"v"},tD={class:"v"},nD={class:"desc"},rD=["onClick"],iD={class:"modal-card"},oD={class:"scroll"},sD=["min"],aD={class:"file"},cD={key:1,class:"mt-2"},lD=["src"],uD={class:"mb-4"},fD={class:"relative"},dD=["value"],hD={class:"mt-1 text-xs text-gray-300 flex items-center gap-2"},pD={key:0},gD={key:1},vD={key:2},yD={class:"opacity-70 ml-1"},mD={class:"chk"},wD={class:"actions-bar"},bD=["disabled"],ED={class:"modal-card"},xD={class:"scroll"},AD=["min"],_D={class:"file"},CD=["value"],SD={class:"chk"},ID={class:"actions-bar"},TD=["disabled"],OD=7,RD={__name:"HomeView",setup(t){const e=fh(),n=xg(),r=Pe(!1),i=()=>r.value=!r.value;vr(()=>e.fullPath,()=>r.value=!1);const{account:o,ensureChain:s}=RS(),a="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15",c=je(()=>({"--hero-img":"url(/Background.png)"})),u="http://localhost:3001,https://asiqtix-main-production.up.railway.app/".replace(/\/+$/,"").replace(/\/api$/i,""),f=()=>(o.value||localStorage.getItem("walletAddress")||"").toString();function d(ve){const Q=f();return Q?ve+(ve.includes("?")?"&":"?")+"wallet="+encodeURIComponent(Q):ve}async function h(ve,Q={}){const _e=ve.startsWith("/api")?ve:`/api${ve.startsWith("/")?ve:`/${ve}`}`,lt=String(Q?.method||"GET").toUpperCase();let Os=`${u}${_e}`;lt==="GET"&&(Os=d(Os));const Rs=await fetch(Os,{...Q,headers:{"content-type":"application/json",...Q.headers||{},"x-wallet-address":f()}}),ba=await Rs.json().catch(()=>({}));if(!Rs.ok)throw new Error(ba?.error||ba?.message||`HTTP ${Rs.status}`);return ba}async function p(ve){const Q=new FormData;Q.append("file",ve);const _e=await fetch(`${u}/api/upload`,{method:"POST",headers:{"x-wallet-address":f()},body:Q}),lt=await _e.json().catch(()=>({}));if(!_e.ok)throw new Error(lt?.error||lt?.message||`HTTP ${_e.status}`);if(!lt?.url||!/^https?:\/\//i.test(lt.url))throw new Error("Upload gagal: URL tidak valid");return lt.url}async function g(ve){const Q=JSON.stringify(ve),_e=new Blob([Q],{type:"application/json"}),lt=new File([_e],"metadata.json",{type:"application/json"});return await p(lt)}const y=Pe(null),v=Pe(!1),m=Pe("");async function w(){try{v.value=!0,m.value="";const ve=await h("/api/price/pol"),Q=Number(ve?.price_idr||0);if(!Q)throw new Error("Harga tidak valid");y.value=Q}catch(ve){console.error(ve),m.value="Gagal mengambil harga POL/IDR"}finally{v.value=!1}}async function E(ve){const Q=await h("/api/price/idr-to-wei",{method:"POST",body:JSON.stringify({amount_idr:ve})});if(!Q||!Q.price_wei)throw new Error("Gagal konversi");return Q.idr_per_pol&&(y.value=Number(Q.idr_per_pol)),BigInt(Q.price_wei)}const S=Pe("customer"),O=je(()=>S.value==="admin"),F=je(()=>S.value==="promoter"),$=je(()=>O.value||F.value?"CREATE A NEW EVENT":"UPCOMING CONCERT"),U=je(()=>(f()||"").toLowerCase());function B(ve){return O.value?!0:F.value?(ve.promoter_wallet||"").toLowerCase()===U.value:!1}async function Y(){if(!o.value&&window?.ethereum)try{const ve=await window.ethereum.request({method:"eth_accounts"});ve?.[0]&&(o.value=ve[0])}catch{}}async function j(){if(!f()){S.value="customer";return}try{const Q=await h("/api/me");S.value=Q?.role||"customer"}catch{S.value="customer"}}const L=Pe(!1),I=Pe(""),x=Pe([]);async function P(){L.value=!0,I.value="";try{const ve=O.value||F.value?"?all=1&include_unlisted=1":"",Q=await h(`/api/events${ve}`);x.value=Array.isArray(Q?.items)?Q.items:[]}catch(ve){I.value=String(ve.message||ve)}finally{L.value=!1}}function G(ve){o.value=ve?.[0]||"",j(),P()}du(async()=>{await Y(),window?.ethereum?.on&&window.ethereum.on("accountsChanged",G),await j(),await P()}),pg(()=>{window?.ethereum?.removeListener&&window.ethereum.removeListener("accountsChanged",G),oe.value&&URL.revokeObjectURL(oe.value),X.value&&URL.revokeObjectURL(X.value),Ce.value&&URL.revokeObjectURL(Ce.value)}),vr(o,async()=>{await j(),await P()});const b=Pe(""),C=je(()=>{const ve=b.value.trim().toLowerCase();return ve?x.value.filter(Q=>[Q.title,Q.venue,Q.description].some(_e=>String(_e||"").toLowerCase().includes(ve))):x.value});function T(ve){n.push({name:"event",params:{id:ve.id}})}function k(ve=new Date){const Q=new Date(ve);return Q.setHours(0,0,0,0),Q}function A(ve=new Date){const Q=k(ve);return Q.setDate(Q.getDate()+OD),Q}function _(ve){const Q=_e=>String(_e).padStart(2,"0");return`${ve.getFullYear()}-${Q(ve.getMonth()+1)}-${Q(ve.getDate())}T${Q(ve.getHours())}:${Q(ve.getMinutes())}`}function R(){return _(A(new Date))}function D(ve){if(!ve)throw new Error("Tanggal wajib diisi");const Q=new Date(ve);if(Number.isNaN(Q.getTime()))throw new Error("Tanggal tidak valid");const _e=A(new Date);if(Q.getTime()<_e.getTime()){const lt=_e.toLocaleString("id-ID",{year:"numeric",month:"long",day:"2-digit",hour:"2-digit",minute:"2-digit"});throw new Error(`Tanggal event minimal ${lt}`)}}function H(ve){if(!ve)return"";const Q=new Date(ve);if(Number.isNaN(Q.getTime()))throw new Error("Tanggal tidak valid");return Q.toISOString()}const N=Pe(!1),K=Pe(!1),z=hc({title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),Z=Pe(null),oe=Pe(""),M=Pe(!1),V=Pe(null),X=Pe(""),ie=Pe(""),te=Pe("");function ne(ve){return ve?String(ve).replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function de(ve){let Q=ve.target.value||"";if(Q=Q.replace(/[^\d]/g,""),!Q){z.price_idr=0,te.value="";return}const _e=Number(Q);z.price_idr=_e,te.value=ne(_e)}vr(()=>z.price_idr,ve=>{te.value=ve?ne(ve):""});function le(ve){const Q=ve?.target?.files?.[0];Z.value=Q||null,oe.value&&URL.revokeObjectURL(oe.value),oe.value=Q?URL.createObjectURL(Q):""}function J(ve){const Q=ve.target.files?.[0];if(!Q){V.value=null,X.value&&URL.revokeObjectURL(X.value),X.value="",ie.value="";return}V.value=Q,X.value&&URL.revokeObjectURL(X.value),X.value=URL.createObjectURL(Q)}const ee=je(()=>{if(!y.value)return null;const ve=Number(z.price_idr||0);if(!ve)return null;const Q=ve/y.value;return isFinite(Q)?Q:null});vr(N,ve=>{if(!ve)return;w();const Q=R(),_e=new Date(Q),lt=z.date_iso?new Date(z.date_iso):null;(!lt||Number.isNaN(lt.getTime())||lt.getTime()<_e.getTime())&&(z.date_iso=Q)});async function ue(){try{if(!z.title||!z.date_iso||!z.venue)throw new Error("Title, Date, Venue wajib diisi");D(z.date_iso);const ve=Number(z.price_idr);if(!ve||ve<=0)throw new Error("Harga tiket (IDR) wajib > 0");if(Z.value&&!z.image_url){M.value=!0;const Dr=await p(Z.value);z.image_url=Dr}if(V.value&&!ie.value){M.value=!0;const Dr=await p(V.value);ie.value=Dr}const Q=ie.value||z.image_url||"";let _e="";if(Q){const Dr={name:z.title||"AsiqTiX Ticket",description:z.description||`Ticket for ${z.title||"AsiqTiX Event"}`,image:Q,external_url:window.location.origin,attributes:[{trait_type:"Platform",value:"AsiqTiX"},{trait_type:"Venue",value:z.venue||""},{trait_type:"Date",value:z.date_iso||""}]};M.value=!0,_e=await g(Dr)}else _e="";await s("amoy");const Os=await new Rr(window.ethereum).getSigner(),Rs=new fi(a,Ba,Os),ba=await E(ve),Vh=BigInt(Math.floor(Number(z.total_tickets)||0));if(Vh<=0n)throw new Error("Total tiket harus > 0");const jv=new Date(z.date_iso);if(Number.isNaN(jv.getTime()))throw new Error("Tanggal event tidak valid");const Kv=BigInt(Math.floor(jv.getTime()/1e3));try{await Rs.createEvent.staticCall(ba,Vh,Kv,_e)}catch(Dr){console.error("callStatic createEvent REVERT:",Dr),alert(Dr?.reason||Dr?.error?.message||Dr?.message||"Create event gagal (revert dari smart contract)");return}const Gv=await(await Rs.createEvent(ba,Vh,Kv,_e)).wait();if(!Gv.status)throw new Error("Transaksi createEvent gagal di blockchain");let Tu=null;for(const Dr of Gv.logs)try{const zv=Rs.interface.parseLog(Dr);if(zv?.name==="EventCreated"){Tu=Number(zv.args.eventId.toString());break}}catch{}if(Tu==null)throw new Error("Tidak bisa menemukan eventId dari log EventCreated");const XS={title:z.title,date_iso:H(z.date_iso),venue:z.venue,description:z.description||"",image_url:z.image_url||null,price_idr:ve,total_tickets:Number(z.total_tickets)||0,listed:!!z.listed,chain_event_id:Tu};await h("/api/events",{method:"POST",body:JSON.stringify(XS)}),Object.assign(z,{title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),te.value="",Z.value=null,oe.value&&URL.revokeObjectURL(oe.value),oe.value="",V.value=null,X.value&&URL.revokeObjectURL(X.value),X.value="",ie.value="",N.value=!1,await P(),alert(`Event berhasil dibuat. ID on chain: ${Tu}`)}catch(ve){console.error(ve),alert(`Create event gagal: ${ve?.message||ve}`)}finally{M.value=!1}}const ae=Pe(null),ce=hc({title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),xe=Pe(null),Ce=Pe("");function $e(ve){const Q=ve?.target?.files?.[0];xe.value=Q||null,Ce.value&&URL.revokeObjectURL(Ce.value),Ce.value=Q?URL.createObjectURL(Q):""}function Ue(ve){ae.value=ve.id,ce.title=ve.title||"";try{const Q=new Date(ve.date_iso),_e=lt=>String(lt).padStart(2,"0");ce.date_iso=`${Q.getFullYear()}-${_e(Q.getMonth()+1)}-${_e(Q.getDate())}T${_e(Q.getHours())}:${_e(Q.getMinutes())}`}catch{ce.date_iso=""}ce.venue=ve.venue||"",ce.description=ve.description||"",ce.image_url=ve.image_url||"",ce.price_idr=Number(ve.price_idr||0),ce.total_tickets=Number(ve.total_tickets||0),ce.listed=!!ve.listed,xe.value=null,Ce.value&&URL.revokeObjectURL(Ce.value),Ce.value="",K.value=!0}function ht(){K.value=!1,ae.value=null,xe.value=null,Ce.value&&URL.revokeObjectURL(Ce.value),Ce.value=""}async function At(){try{D(ce.date_iso);let ve=null;xe.value&&(M.value=!0,ve=await p(xe.value));const Q={title:ce.title,date_iso:H(ce.date_iso),venue:ce.venue,description:ce.description,total_tickets:Number(ce.total_tickets)||0,listed:!!ce.listed};ve&&(Q.image_url=ve,ce.image_url=ve),await h(`/api/events/${ae.value}`,{method:"PUT",body:JSON.stringify(Q)}),K.value=!1,ae.value=null,xe.value=null,Ce.value&&URL.revokeObjectURL(Ce.value),Ce.value="",await P(),alert("Event updated.")}catch(ve){alert(`Update failed: ${ve.message}`)}finally{M.value=!1}}async function rn(ve){if(confirm("Delete this event?"))try{await h(`/api/events/${ve}`,{method:"DELETE"}),await P(),alert("Deleted.")}catch(Q){alert(`Delete failed: ${Q.message}`)}}async function Nn(ve){try{await h(`/api/events/${ve.id}/list`,{method:"PATCH",body:JSON.stringify({listed:!ve.listed})}),await P()}catch(Q){alert(`List or Delist failed: ${Q.message}`)}}function Jr(ve){return ve.image_url&&ve.image_url.length>0?ve.image_url:"/Background.png"}function qi(){return Ce.value||ce.image_url||"/Background.png"}return(ve,Q)=>(Se(),Ie("div",{class:"home-page",style:go(c.value)},[q("header",$7,[Q[24]||(Q[24]=q("div",{class:"brand"},[q("img",{src:Ag,alt:"Tickety"})],-1)),q("form",{class:"search search--top",onSubmit:Q[1]||(Q[1]=io(()=>{},["prevent"]))},[ur(q("input",{class:"search-input","onUpdate:modelValue":Q[0]||(Q[0]=_e=>b.value=_e),type:"search",placeholder:"Search concerts, venues"},null,512),[[ei,b.value]]),Q[22]||(Q[22]=q("button",{class:"search-btn",type:"submit"},"",-1))],32),q("button",{class:"hamburger",onClick:io(i,["stop"]),"aria-label":"Toggle Sidebar"},[...Q[23]||(Q[23]=[q("span",null,null,-1),q("span",null,null,-1),q("span",null,null,-1)])])]),Bt(_g,{modelValue:r.value,"onUpdate:modelValue":Q[2]||(Q[2]=_e=>r.value=_e)},null,8,["modelValue"]),q("main",V7,[q("section",j7,[Q[25]||(Q[25]=q("div",{class:"hero-bg","aria-hidden":"true"},null,-1)),q("h2",K7,ke($.value),1)]),I.value?(Se(),Ie("div",G7,ke(I.value),1)):Qe("",!0),q("section",z7,[(Se(!0),Ie(hr,null,vg(C.value,_e=>(Se(),Ie("article",{key:_e.id,class:"card"},[q("div",W7,[q("div",{class:"img",style:go({backgroundImage:`url(${Jr(_e)})`})},null,4),Q[26]||(Q[26]=q("div",{class:"img-overlay"},null,-1)),q("div",q7,ke(_e.title),1),B(_e)?(Se(),Ie("div",Y7,[q("button",{class:"adm-btn",onClick:lt=>Ue(_e),title:"Edit"},"",8,X7),q("button",{class:"adm-btn",onClick:lt=>Nn(_e),title:_e.listed?"Delist":"List"},ke(_e.listed?"":""),9,Z7),q("button",{class:"adm-btn danger",onClick:lt=>rn(_e.id),title:"Delete"},"",8,Q7)])):Qe("",!0)]),q("div",J7,[q("div",null,[Q[27]||(Q[27]=q("span",{class:"k"},"Location:",-1)),Q[28]||(Q[28]=at()),q("span",eD,ke(_e.venue),1)]),q("div",null,[Q[29]||(Q[29]=q("span",{class:"k"},"Date:",-1)),Q[30]||(Q[30]=at()),q("span",tD,ke(new Date(_e.date_iso).toLocaleString("id-ID")),1)])]),q("p",nD,ke(_e.description||"(Blank Text)"),1),q("button",{class:"buy",onClick:lt=>T(_e)},"BUY TICKET",8,rD)]))),128))])]),O.value||F.value?(Se(),Ie("button",{key:0,class:"fab",title:"Add event","aria-label":"Create new event",onClick:Q[3]||(Q[3]=_e=>N.value=!0)},[...Q[31]||(Q[31]=[at(" ",-1),q("span",{class:"sr-only"},"Create new event",-1)])])):Qe("",!0),N.value?(Se(),Ie("div",{key:1,class:"modal",onClick:Q[12]||(Q[12]=io(_e=>N.value=!1,["self"]))},[q("div",iD,[q("button",{class:"modal-x","aria-label":"Close",onClick:Q[4]||(Q[4]=_e=>N.value=!1)},""),Q[44]||(Q[44]=q("h3",null,"Create Event",-1)),q("form",{class:"form",onSubmit:io(ue,["prevent"])},[q("div",oD,[q("label",null,[Q[32]||(Q[32]=at("Title ",-1)),ur(q("input",{"onUpdate:modelValue":Q[5]||(Q[5]=_e=>z.title=_e)},null,512),[[ei,z.title]])]),q("label",null,[Q[33]||(Q[33]=at(" Date (Local) ",-1)),ur(q("input",{type:"datetime-local",step:"60","onUpdate:modelValue":Q[6]||(Q[6]=_e=>z.date_iso=_e),min:R()},null,8,sD),[[ei,z.date_iso]])]),q("label",null,[Q[34]||(Q[34]=at("Venue ",-1)),ur(q("input",{"onUpdate:modelValue":Q[7]||(Q[7]=_e=>z.venue=_e)},null,512),[[ei,z.venue]])]),q("label",aD,[Q[35]||(Q[35]=q("span",null,"Image",-1)),q("input",{type:"file",accept:"image/*",onChange:le},null,32)]),oe.value||z.image_url?(Se(),Ie("div",{key:0,class:"img-preview",style:go({backgroundImage:`url(${oe.value||z.image_url})`})},null,4)):Qe("",!0),Q[42]||(Q[42]=q("label",{class:"block text-sm font-medium mb-1"},"NFT Image (optional)",-1)),q("input",{type:"file",accept:"image/*",onChange:J},null,32),Q[43]||(Q[43]=q("p",{class:"mt-1 text-xs text-gray-400"},"Jika tidak diisi, NFT akan memakai gambar banner event.",-1)),X.value?(Se(),Ie("div",cD,[Q[36]||(Q[36]=q("span",{class:"text-xs text-gray-300"},"Preview NFT:",-1)),q("img",{src:X.value,alt:"NFT preview",class:"mt-1 h-24 rounded object-cover"},null,8,lD)])):Qe("",!0),q("div",uD,[Q[38]||(Q[38]=q("label",{class:"block text-sm font-medium mb-1"},"Price (IDR)",-1)),q("div",fD,[Q[37]||(Q[37]=q("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-sm text-gray-400"},"Rp",-1)),q("input",{type:"text",value:te.value,onInput:de,inputmode:"numeric",class:"w-full rounded border px-3 py-2 pl-10",placeholder:"contoh: 150.000"},null,40,dD)]),q("div",hD,[v.value?(Se(),Ie("span",pD,"Mengambil harga POL/IDR...")):m.value?(Se(),Ie("span",gD,[at(ke(m.value)+" ",1),q("button",{type:"button",class:"underline ml-1",onClick:w},"coba lagi")])):ee.value!==null?(Se(),Ie("span",vD,[at("  "+ke(ee.value.toFixed(4))+" POL ",1),q("span",yD,"(1 POL  "+ke(y.value?.toLocaleString("id-ID"))+" IDR)",1),q("button",{type:"button",class:"text-[10px] px-2 py-1 border rounded ml-2 opacity-70 hover:opacity-100",onClick:w}," Refresh ")])):Qe("",!0)])]),q("label",null,[Q[39]||(Q[39]=at("Total Tickets ",-1)),ur(q("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":Q[8]||(Q[8]=_e=>z.total_tickets=_e)},null,512),[[ei,z.total_tickets,void 0,{number:!0}]])]),q("label",mD,[ur(q("input",{type:"checkbox","onUpdate:modelValue":Q[9]||(Q[9]=_e=>z.listed=_e)},null,512),[[xy,z.listed]]),Q[40]||(Q[40]=at(" Listed",-1))]),q("label",null,[Q[41]||(Q[41]=at("Description ",-1)),ur(q("textarea",{rows:"3","onUpdate:modelValue":Q[10]||(Q[10]=_e=>z.description=_e)},null,512),[[ei,z.description]])])]),q("div",wD,[q("button",{type:"button",class:"btn ghost",onClick:Q[11]||(Q[11]=_e=>N.value=!1)},"Cancel"),q("button",{type:"submit",class:"btn primary",disabled:M.value},ke(M.value?"Uploading":"Create"),9,bD)])],32)])])):Qe("",!0),K.value?(Se(),Ie("div",{key:2,class:"modal",onClick:Q[21]||(Q[21]=io(_e=>ht(),["self"]))},[q("div",ED,[q("button",{class:"modal-x","aria-label":"Close",onClick:Q[13]||(Q[13]=_e=>ht())},""),Q[54]||(Q[54]=q("h3",null,"Edit Event",-1)),q("form",{class:"form",onSubmit:io(At,["prevent"])},[q("div",xD,[q("label",null,[Q[45]||(Q[45]=at("Title ",-1)),ur(q("input",{"onUpdate:modelValue":Q[14]||(Q[14]=_e=>ce.title=_e)},null,512),[[ei,ce.title]])]),q("label",null,[Q[46]||(Q[46]=at(" Date (Local) ",-1)),ur(q("input",{type:"datetime-local",step:"60","onUpdate:modelValue":Q[15]||(Q[15]=_e=>ce.date_iso=_e),min:R()},null,8,AD),[[ei,ce.date_iso]])]),q("label",null,[Q[47]||(Q[47]=at("Venue ",-1)),ur(q("input",{"onUpdate:modelValue":Q[16]||(Q[16]=_e=>ce.venue=_e)},null,512),[[ei,ce.venue]])]),q("label",_D,[Q[48]||(Q[48]=q("span",null,"Image (optional)",-1)),q("input",{type:"file",accept:"image/*",onChange:$e},null,32)]),q("div",{class:"img-preview",style:go({backgroundImage:`url(${qi()})`})},null,4),Q[53]||(Q[53]=q("p",{class:"mt-1 text-xs text-gray-500"}," Jika tidak upload gambar baru, image event tidak akan berubah. ",-1)),q("label",null,[Q[49]||(Q[49]=at(" Price (IDR) ",-1)),q("input",{type:"text",value:Number(ce.price_idr||0).toLocaleString("id-ID"),readonly:"",disabled:""},null,8,CD)]),q("label",null,[Q[50]||(Q[50]=at("Total Tickets ",-1)),ur(q("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":Q[17]||(Q[17]=_e=>ce.total_tickets=_e)},null,512),[[ei,ce.total_tickets,void 0,{number:!0}]])]),q("label",SD,[ur(q("input",{type:"checkbox","onUpdate:modelValue":Q[18]||(Q[18]=_e=>ce.listed=_e)},null,512),[[xy,ce.listed]]),Q[51]||(Q[51]=at(" Listed",-1))]),q("label",null,[Q[52]||(Q[52]=at("Description ",-1)),ur(q("textarea",{rows:"3","onUpdate:modelValue":Q[19]||(Q[19]=_e=>ce.description=_e)},null,512),[[ei,ce.description]])])]),q("div",ID,[q("button",{type:"button",class:"btn ghost",onClick:Q[20]||(Q[20]=_e=>ht())},"Cancel"),q("button",{type:"submit",class:"btn primary",disabled:M.value},ke(M.value?"Uploading":"Save"),9,TD)])],32)])])):Qe("",!0)],4))}},PD=Is(RD,[["__scopeId","data-v-a16558d2"]]),Tb="/assets/MetaMask-eUUnB-vT.png",ND={class:"login-page"},kD={class:"login-container"},MD={key:0,class:"hint"},DD={key:2,class:"wallet-info"},BD={class:"wallet-label"},LD=["src"],FD={class:"wallet-address"},UD=["disabled"],HD=["src"],$D=["disabled"],VD={key:0},jD={key:1},KD={key:5,class:"metamask-warning"},GD={__name:"Login",setup(t){const e=xg(),n=Pe(!1),r=Pe(!1),i=Pe(""),o=Pe(""),s=Pe(!0),a=Pe("");vr(zd,p=>{a.value=p||""});function c(p,g){i.value=p,o.value=g,setTimeout(()=>{i.value="",o.value=""},5e3)}function l(p){return p?`${p.slice(0,6)}...${p.slice(-4)}`:""}const u="http://localhost:3001,https://asiqtix-main-production.up.railway.app/".replace(/\/+$/,"");async function f(p,g){if(typeof p!="string")throw new Error("Path harus string");const y=[];p.startsWith("/api")&&u&&y.push(`${u}${p}`),y.push(p);const v={method:g?.method||"GET",headers:g?.headers||{},body:g?.body,credentials:g?.credentials||"omit"},m=12e3;let w;for(const E of y){const S=new AbortController,O=setTimeout(()=>S.abort(),m);try{const F=await fetch(E,{...v,signal:S.signal});clearTimeout(O);const $=await F.text().catch(()=>"");let U={};if($&&$.trim())try{U=JSON.parse($)}catch{U={message:$}}if(!F.ok){const B=(U?.message||`${F.status} ${F.statusText||""}`).trim();throw new Error(`Request gagal (${B}) ke ${E}`)}return U}catch(F){if(clearTimeout(O),w=F,!(F?.name==="AbortError"||F instanceof TypeError))break}}throw new Error(String(w?.message||w||"Failed to fetch"))}async function d(){n.value=!0;try{await OS(),await cu("amoy"),c("Wallet berhasil terhubung!","success")}catch(p){const g=String(p?.message||p);g.toLowerCase().includes("tidak terdeteksi")&&(s.value=!1),console.error(p),c(g,"error")}finally{n.value=!1}}async function h(){if(!a.value){c("Silakan hubungkan wallet terlebih dahulu!","error");return}let p;try{p=dt(a.value)}catch{c("Alamat wallet tidak valid.","error");return}r.value=!0;try{await cu("amoy");const g=p.toLowerCase(),{nonce:y}=await f(`/api/nonce?address=${encodeURIComponent(g)}`),v=await window.ethereum.request({method:"eth_chainId"}),m=parseInt(v,16),w=window.location.host,E=window.location.origin,S=new Date().toISOString(),F=`${w} wants you to sign in with your Ethereum account:
${p}

Sign in to AsiqTIX

URI: ${E}
Version: 1
Chain ID: ${m}
Nonce: ${y}
Issued At: ${S}`,$=await window.ethereum.request({method:"personal_sign",params:[F,p]}),U=await f("/api/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:F,signature:$})});localStorage.setItem("walletAddress",p),U?.token&&localStorage.setItem("auth_token",U.token),c(" Autentikasi berhasil!","success"),e.push({name:"home"})}catch(g){console.error(g),c(String(g?.message||g),"error")}finally{r.value=!1}}return(p,g)=>(Se(),Ie("div",ND,[q("div",kD,[g[3]||(g[3]=q("img",{src:Ag,alt:"Logo",class:"logo"},null,-1)),g[4]||(g[4]=q("h1",null,"Selamat Datang!",-1)),s.value?Qe("",!0):(Se(),Ie("p",MD," Pastikan Anda telah memasang ekstensi MetaMask pada browser Anda atau aplikasi MetaMask pada perangkat seluler Anda. ")),g[5]||(g[5]=q("p",{class:"subtitle"},"Hubungkan wallet MetaMask untuk mendaftar",-1)),i.value?(Se(),Ie("div",{key:1,class:aa(["status-message",o.value])},ke(i.value),3)):Qe("",!0),a.value?(Se(),Ie("div",DD,[q("div",BD,[q("img",{src:yn(Tb),class:"mm-ico",alt:"MetaMask"},null,8,LD),g[0]||(g[0]=q("span",null,"Wallet Terhubung",-1))]),q("div",FD,ke(l(a.value)),1)])):Qe("",!0),a.value?(Se(),Ie("button",{key:4,onClick:h,disabled:r.value,class:"btn-login"},[r.value?(Se(),Ie("span",VD," Mendaftarkan...")):(Se(),Ie("span",jD,"Masuk"))],8,$D)):(Se(),Ie("button",{key:3,onClick:d,disabled:n.value,class:"btn-metamask"},[n.value?(Se(),Ie(hr,{key:0},[at("  Menghubungkan... ")],64)):(Se(),Ie(hr,{key:1},[q("img",{src:yn(Tb),class:"mm-ico mm-ico--btn",alt:"MetaMask"},null,8,HD),g[1]||(g[1]=q("span",{class:"btn-label"},"Hubungkan MetaMask",-1))],64))],8,UD)),s.value?Qe("",!0):(Se(),Ie("div",KD,[...g[2]||(g[2]=[q("p",null," MetaMask tidak terdeteksi!",-1),q("a",{href:"https://metamask.io/download/",target:"_blank",class:"install-link"}," Install MetaMask ",-1)])]))])]))}},zD=Is(GD,[["__scopeId","data-v-cbb3456e"]]),WD={key:0,class:"modal-backdrop"},qD={class:"modal"},YD={class:"receipt"},XD={class:"receipt-body"},ZD={class:"row"},QD={class:"value"},JD={class:"row"},eB={class:"value"},tB={class:"row"},nB={class:"value"},rB={class:"row"},iB={class:"value"},oB={class:"row"},sB={class:"value"},aB={class:"row total"},cB={class:"value"},lB={key:0,class:"row hash"},uB={class:"value mono"},fB={class:"receipt-footer"},dB={__name:"Purchase_Success_Dialog",props:{open:{type:Boolean,default:!1},eventTitle:{type:String,default:""},venue:{type:String,default:""},dateText:{type:String,default:""},quantity:{type:Number,default:1},pricePerTicketPol:{type:Number,default:0},totalPol:{type:Number,default:0},txHash:{type:String,default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=e;function i(){r("close")}function o(){if(!n.txHash)return;const s=`https://amoy.polygonscan.com/tx/${n.txHash}`;window.open(s,"_blank","noopener")}return(s,a)=>t.open?(Se(),Ie("div",WD,[q("div",qD,[q("div",YD,[a[9]||(a[9]=q("header",{class:"receipt-header"},[q("h2",null,"Tiket Berhasil Dibeli"),q("p",null,"Terima kasih! Berikut struk pembelian Anda.")],-1)),q("div",XD,[q("div",ZD,[a[0]||(a[0]=q("span",{class:"label"},"Event",-1)),q("span",QD,ke(t.eventTitle||"-"),1)]),q("div",JD,[a[1]||(a[1]=q("span",{class:"label"},"Lokasi",-1)),q("span",eB,ke(t.venue||"-"),1)]),q("div",tB,[a[2]||(a[2]=q("span",{class:"label"},"Tanggal",-1)),q("span",nB,ke(t.dateText||"-"),1)]),a[7]||(a[7]=q("hr",{class:"divider"},null,-1)),q("div",rB,[a[3]||(a[3]=q("span",{class:"label"},"Qty",-1)),q("span",iB,ke(t.quantity),1)]),q("div",oB,[a[4]||(a[4]=q("span",{class:"label"},"Harga / Tiket",-1)),q("span",sB,ke(t.pricePerTicketPol.toFixed(4))+" POL",1)]),q("div",aB,[a[5]||(a[5]=q("span",{class:"label"},"Total",-1)),q("span",cB,ke(t.totalPol.toFixed(4))+" POL",1)]),a[8]||(a[8]=q("hr",{class:"divider"},null,-1)),t.txHash?(Se(),Ie("div",lB,[a[6]||(a[6]=q("span",{class:"label"},"Tx Hash",-1)),q("span",uB,ke(t.txHash.slice(0,10))+""+ke(t.txHash.slice(-8)),1)])):Qe("",!0)]),q("footer",fB,[q("button",{class:"btn ghost",type:"button",onClick:i}," Tutup "),t.txHash?(Se(),Ie("button",{key:0,class:"btn primary",type:"button",onClick:o}," Lihat di Polygonscan ")):Qe("",!0)])])])])):Qe("",!0)}},hB=Is(dB,[["__scopeId","data-v-a7e5c061"]]),pB={key:0,class:"modal-backdrop"},gB={class:"modal"},vB={class:"card"},yB={class:"msg"},mB={__name:"Purchase_Error_Dialog",props:{open:{type:Boolean,default:!1},message:{type:String,default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,i=()=>r("close");return(o,s)=>n.open?(Se(),Ie("div",pB,[q("div",gB,[q("div",vB,[s[0]||(s[0]=q("h2",null,"Pembelian Gagal",-1)),q("p",yB,ke(t.message||"Terjadi kesalahan saat memproses transaksi."),1),q("div",{class:"actions"},[q("button",{class:"btn",type:"button",onClick:i},"Tutup")])])])])):Qe("",!0)}},wB=Is(mB,[["__scopeId","data-v-ce2e238f"]]),bB={class:"modal"},EB={class:"card"},xB={class:"head"},AB={class:"body"},_B={class:"qty-row"},CB=["disabled"],SB=["max","value","onKeydown"],IB=["disabled"],TB={class:"hint"},OB={__name:"BuyQuantityDialog",props:{open:{type:Boolean,default:!1},max:{type:Number,default:20},initial:{type:Number,default:1},title:{type:String,default:"Pilih jumlah tiket"}},emits:["close","confirm"],setup(t,{emit:e}){const n=t,r=e,i=je(()=>Math.max(1,Number(n.max||1)));function o(p){const g=Number.parseInt(String(p),10);return Number.isFinite(g)?Math.min(Math.max(1,g),i.value):1}const s=Pe(1);vr(()=>n.open,p=>{p&&(s.value=o(n.initial))}),vr(()=>n.max,()=>{s.value=o(s.value)});const a=je(()=>s.value>1),c=je(()=>s.value<i.value);function l(){a.value&&(s.value-=1)}function u(){c.value&&(s.value+=1)}function f(p){s.value=o(p.target.value)}function d(){r("close")}function h(){r("confirm",s.value)}return(p,g)=>t.open?(Se(),Ie("div",{key:0,class:"modal-backdrop",onClick:io(d,["self"])},[q("div",bB,[q("div",EB,[q("header",xB,[q("h2",null,ke(t.title),1),g[0]||(g[0]=q("p",{class:"sub"},"Masukkan jumlah tiket yang ingin dibeli.",-1))]),q("div",AB,[q("div",_B,[q("button",{class:"step",type:"button",disabled:!a.value,onClick:l},"",8,CB),q("input",{class:"qty",type:"number",inputmode:"numeric",min:"1",max:i.value,value:s.value,onInput:f,onKeydown:gI(io(h,["prevent"]),["enter"])},null,40,SB),q("button",{class:"step",type:"button",disabled:!c.value,onClick:u},"+",8,IB)]),q("p",TB,[g[1]||(g[1]=at("Maksimum: ",-1)),q("strong",null,ke(i.value),1),g[2]||(g[2]=at(" tiket per transaksi.",-1))])]),q("footer",{class:"foot"},[q("button",{class:"btn ghost",type:"button",onClick:d},"Batal"),q("button",{class:"btn primary",type:"button",onClick:h},"Lanjutkan")])])])])):Qe("",!0)}},RB=Is(OB,[["__scopeId","data-v-11960b2b"]]),PB={class:"event-page"},NB={key:0,class:"alert error"},kB={key:1,class:"loading"},MB={class:"hero-inner"},DB={class:"poster"},BB={class:"info"},LB={class:"event-title"},FB={class:"meta"},UB={class:"row"},HB={class:"v"},$B={class:"row"},VB={class:"v"},jB={class:"desc"},KB={class:"pricebox"},GB={class:"price"},zB={key:0,class:"stock"},WB={key:0},qB={key:1,class:"sold-out"},YB=["disabled"],XB={key:0},ZB={key:1},QB={key:2},JB={key:3},eL={key:1,class:"buy-msg"},tL={key:2,class:"buy-msg"},nL={key:3,class:"buy-msg"},rL={key:4,class:"promoter-tools"},iL={class:"promoter-balance"},oL={key:0,class:"hint"},sL={key:1,class:"buy-msg"},aL={key:2,class:"buy-msg"},cL=["href"],lL=["disabled"],uL={key:0},fL={key:1},dL={key:2},hL={key:3},pL={key:5,class:"promoter-tools",style:{"margin-top":"1.5rem"}},gL={class:"promoter-balance"},vL={key:0,class:"buy-msg"},yL=["disabled"],mL={key:0},wL={key:1},bL={key:2},EL={__name:"EventDetailView",setup(t){const e=fh(),n=xg(),{ensureChain:r}=RS(),i="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15",o=Pe(!1),s=()=>o.value=!o.value;vr(()=>e.fullPath,()=>o.value=!1);const c="http://localhost:3001,https://asiqtix-main-production.up.railway.app/".replace(/\/+$/,"").replace(/\/api$/i,""),l=()=>(localStorage.getItem("walletAddress")||"").toString();async function u(J,ee={}){const ue=J.startsWith("/api")?J:`/api${J.startsWith("/")?J:`/${J}`}`,ae=await fetch(`${c}${ue}`,{...ee,headers:{"content-type":"application/json",...ee.headers||{},"x-wallet-address":l()}}),ce=await ae.json().catch(()=>({}));if(!ae.ok)throw new Error(ce?.error||ce?.message||`HTTP ${ae.status}`);return ce}const f=Pe(null),d=Pe(!0),h=Pe(""),p=Pe(!1),g=Pe(""),y=Pe(!1),v=Pe(!1),m=Pe(null),w=Pe(""),E=Pe(!1),S=je(()=>{if(!f.value)return 1;const J=Number(f.value.total_tickets??0),ee=Number(f.value.sold_tickets??0);if(J>0){const ue=Math.max(0,J-ee);return Math.max(1,ue)}return 20});function O(){if(p.value)return;if(b.value){g.value="Tiket tidak bisa dibeli karena event sudah memasuki hari event / selesai.";return}const J=Number(f.value?.total_tickets??0),ee=Number(f.value?.sold_tickets??0),ue=J>0?Math.max(0,J-ee):1;J>0&&ue<=0||(g.value="",E.value=!0)}async function F(J){E.value=!1,await k(J)}const $=Pe("customer"),U=je(()=>$.value==="admin"),B=je(()=>(l()||"").toLowerCase()),Y=je(()=>{if(!f.value)return!1;const J=(f.value.promoter_wallet||"").toLowerCase();return J&&B.value&&J===B.value}),j=Pe(0n),L=je(()=>{try{return Aa(j.value||0n)}catch{return"0.0"}}),I=je(()=>j.value>0n),x=Pe(!1),P=Pe(""),G=Pe(""),b=je(()=>{if(!f.value?.date_iso)return!1;const J=new Date(f.value.date_iso);if(Number.isNaN(J.getTime()))return!1;const ee=new Date(J.getFullYear(),J.getMonth(),J.getDate(),0,0,0,0).getTime();return Date.now()>=ee}),C=je(()=>U.value||Y.value),T=je(()=>C.value&&b.value&&I.value);async function k(J=1){if(!f.value)return;if(b.value){g.value="Tiket tidak bisa dibeli karena event sudah memasuki hari event / selesai.";return}if(!l()){g.value="Wallet belum terhubung.";return}const ee=Number(f.value.chain_event_id||0);if(!ee){g.value="Event ini belum di-link ke kontrak (chain_event_id kosong).";return}const ue=Number.parseInt(String(J),10);if(!Number.isFinite(ue)||ue<1){g.value="Jumlah tiket tidak valid.";return}if(f.value?.total_tickets>0){const ae=Number(f.value.total_tickets??0),ce=Number(f.value.sold_tickets??0),xe=Math.max(0,ae-ce);if(ue>xe){g.value="Jumlah melebihi sisa tiket.";return}}try{p.value=!0,g.value="",await r("amoy");const ce=await new Rr(window.ethereum).getSigner(),xe=new fi(i,Ba,ce),Ce=BigInt(ue),$e=await xe.events(ee);if($e.maxSupply>0n){const qi=$e.maxSupply-$e.sold;if(qi<=0n)throw new Error("Tiket on-chain sudah habis");if(Ce>qi)throw new Error("Jumlah melebihi sisa tiket on-chain")}const Ue=$e.priceWei;if(Ue<=0n)throw new Error("Harga tiket on-chain tidak valid");if(!$e.active)throw new Error("Event ini tidak aktif lagi");const ht=Ue*Ce;console.log("[DEBUG BUY] chainEventId",ee),console.log("[DEBUG BUY] on-chain event:",{promoter:$e.promoter,priceWei:$e.priceWei.toString(),maxSupply:$e.maxSupply.toString(),sold:$e.sold.toString(),active:$e.active}),console.log("[DEBUG BUY] quantity",Ce.toString()),console.log("[DEBUG BUY] totalPriceWei (value yg dikirim)",ht.toString());const At=await xe.buyTicket(ee,Ce,{value:ht});if(!(await At.wait()).status)throw new Error("Transaksi di blockchain gagal");await u("/purchase",{method:"POST",body:JSON.stringify({amount:(Number(f.value.price_idr||0)||0)*ue,quantity:ue,ref_id:f.value.id,description:"On-chain purchase",tx_hash:At.hash})}),f.value.sold_tickets=Number(f.value.sold_tickets??0)+ue;const Nn=Number(Aa(Ue)),Jr=Number(Aa(ht));m.value={eventTitle:f.value.title,venue:f.value.venue,dateText:V.value,quantity:ue,pricePerTicketPol:Nn,totalPol:Jr,txHash:At.hash},g.value="Tiket berhasil dibeli! NFT tiket tersimpan di wallet kamu.",y.value=!0}catch(ae){console.error("[BUY ERROR RAW]",ae);const ce=ae?.info?.error||ae?.error||ae,xe=ae?.reason||ae?.shortMessage||ce?.data?.message||ce?.message||ae?.message||"Unknown error";g.value=`Gagal membeli tiket: ${xe}`,w.value=g.value,v.value=!0}finally{p.value=!1}}async function A(){if(!l()){$.value="customer";return}try{const J=await u("/api/me");$.value=J?.role||"customer"}catch{$.value="customer"}}async function _(){if(j.value=0n,P.value="",!!l()&&f.value?.chain_event_id)try{await r("amoy");const ee=await new Rr(window.ethereum).getSigner(),ue=new fi(i,Ba,ee),ae=Number(f.value.chain_event_id||0);if(!ae)return;const ce=await ue.promoterBalances(ae),xe=typeof ce=="bigint"?ce:BigInt(ce.toString());j.value=xe}catch(J){console.error("[promoterBalance] gagal load",J),P.value="Gagal memuat saldo promotor."}}async function R(){if(P.value="",!C.value){P.value="Anda tidak berhak menarik dana event ini.";return}if(!f.value?.chain_event_id){P.value="Event ini belum di-link ke kontrak.";return}try{x.value=!0,await r("amoy");const ee=await new Rr(window.ethereum).getSigner(),ue=new fi(i,Ba,ee),ae=Number(f.value.chain_event_id||0);if(!ae){P.value="Event belum punya ID on-chain.";return}const ce=j.value||0n,xe=Number(Aa(ce));try{await ue.withdrawPromoter.staticCall(ae)}catch(Ue){console.error("[withdrawPromoter staticCall]",Ue);const ht=Ue?.info?.error||Ue?.error||Ue;let At=Ue?.reason||Ue?.shortMessage||ht?.data?.message||ht?.message||Ue?.message||"Unknown error";At.includes("EVENT_NOT_FINISHED")?P.value="Event belum selesai di blockchain. Dana baru bisa ditarik setelah waktu event terlewati.":At.includes("NO_BALANCE")?P.value="Tidak ada saldo yang bisa ditarik untuk event ini.":At.includes("NOT_EVENT_PROMOTER")?P.value="Wallet ini bukan promotor event ini (atau Anda bukan owner kontrak).":At.includes("EVENT_NOT_FOUND")?P.value="Event dengan ID tersebut tidak ditemukan di kontrak.":P.value=`Gagal menarik dana: ${At}`;return}const Ce=await ue.withdrawPromoter(ae);if(!(await Ce.wait()).status)throw new Error("Transaksi withdraw gagal di blockchain");G.value=Ce.hash;try{await u("/withdraw-log",{method:"POST",body:JSON.stringify({amount:xe,ref_id:f.value.id,description:`Withdraw hasil penjualan event ${f.value.title||f.value.id}`,tx_hash:Ce.hash})})}catch(Ue){console.error("[withdraw-log] gagal simpan ke backend",Ue)}P.value="Penarikan dana berhasil dikirim ke wallet.",await _()}catch(J){console.error("[withdrawPromoter]",J);const ee=J?.info?.error||J?.error||J;let ue=J?.reason||J?.shortMessage||ee?.data?.message||ee?.message||J?.message||"Unknown error";P.value=`Gagal menarik dana: ${ue}`}finally{x.value=!1}}const D=Pe(0n),H=je(()=>{try{return Aa(D.value||0n)}catch{return"0.0"}}),N=Pe(!1),K=Pe(""),z=je(()=>D.value>0n),Z=je(()=>U.value&&z.value);async function oe(){if(D.value=0n,K.value="",!!l()&&f.value?.chain_event_id)try{await r("amoy");const ee=await new Rr(window.ethereum).getSigner(),ue=new fi(i,Ba,ee),ae=Number(f.value.chain_event_id||0);if(!ae)return;const ce=await ue.feeBalances(ae),xe=typeof ce=="bigint"?ce:BigInt(ce.toString());D.value=xe}catch(J){console.error("[adminFeeBalance] gagal load",J),K.value="Gagal memuat saldo admin."}}async function M(){if(K.value="",!!Z.value)try{N.value=!0,await r("amoy");const ee=await new Rr(window.ethereum).getSigner(),ue=new fi(i,Ba,ee),ae=Number(f.value.chain_event_id||0),ce=await ue.feeBalances(ae),xe=typeof ce=="bigint"?ce:BigInt(ce.toString()),Ce=Number(Aa(xe||0n)),$e=await ue.withdrawFees(ae);if(!(await $e.wait()).status)throw new Error("Transaksi gagal di blockchain");try{await u("/withdraw-log",{method:"POST",body:JSON.stringify({amount:Ce,ref_id:f.value.id,description:`Withdraw fee admin event ${f.value.title||f.value.id}`,tx_hash:$e.hash})})}catch(ht){console.error("[withdraw-log admin] gagal simpan ke backend",ht)}K.value="Fee admin berhasil ditarik ke wallet.",await oe()}catch(J){console.error("[withdrawAdminFee] error",J);let ee=String(J?.reason||J?.message||J||"");ee.includes("NO_FEE")&&(ee="Tidak ada fee yang bisa ditarik."),ee.includes("NOT_ADMIN")&&(ee="Wallet ini bukan admin/feeRecipient di kontrak."),K.value=ee}finally{N.value=!1}}const V=je(()=>{const J=f.value?.date_iso?new Date(f.value.date_iso):null;if(!J)return"-";const ee=J.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit"}),ue=J.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${ee}, ${ue.replaceAll(".",":")}`.replace(/:/g,".")}),X=je(()=>{const J=Number(f.value?.price_idr||0);return J?`Rp ${J.toLocaleString("id-ID")}`:"-"}),ie=je(()=>{if(!f.value)return null;const J=Number(f.value.total_tickets??0),ee=Number(f.value.sold_tickets??0),ue=J-ee;return!Number.isFinite(ue)||ue<0?0:ue}),te=je(()=>Number(f.value?.total_tickets??0)>0&&ie.value===0),ne=je(()=>"url(/Background.png)"),de=je(()=>`url(${f.value?.image_url||"/poster_fallback.jpg"})`);function le(){n.push({name:"home"})}return du(async()=>{try{d.value=!0;const J=String(e.params.id||"");f.value=await u(`/api/events/${J}`),await Promise.all([A(),_(),oe()])}catch(J){h.value=String(J.message||J)}finally{d.value=!1}}),(J,ee)=>(Se(),Ie("div",PB,[q("header",{class:"topbar"},[q("button",{class:"back",onClick:le}," Back"),ee[5]||(ee[5]=q("div",{class:"brand"},[q("img",{src:Ag,alt:"Tickety"})],-1)),ee[6]||(ee[6]=q("h1",{class:"title"},"Event",-1)),q("button",{class:"hamburger","aria-label":"Toggle menu",onClick:s},[...ee[4]||(ee[4]=[q("span",null,null,-1),q("span",null,null,-1),q("span",null,null,-1)])])]),Bt(_g,{modelValue:o.value,"onUpdate:modelValue":ee[0]||(ee[0]=ue=>o.value=ue),extraClass:"sb-topright"},null,8,["modelValue"]),q("main",null,[h.value?(Se(),Ie("div",NB,ke(h.value),1)):d.value?(Se(),Ie("div",kB,"Loading")):(Se(),Ie("section",{key:2,class:"hero",style:go({"--hero":ne.value})},[q("div",MB,[q("div",DB,[q("div",{class:"poster-img",style:go({backgroundImage:de.value})},null,4),ee[7]||(ee[7]=q("div",{class:"poster-grad"},null,-1))]),q("div",BB,[q("h2",LB,ke(f.value.title),1),q("div",FB,[q("div",UB,[ee[8]||(ee[8]=q("span",{class:"k"},"Location:",-1)),q("span",HB,ke(f.value.venue),1)]),q("div",$B,[ee[9]||(ee[9]=q("span",{class:"k"},"Date:",-1)),q("span",VB,ke(V.value),1)])]),q("p",jB,ke(f.value.description||"No description."),1)]),q("aside",KB,[ee[14]||(ee[14]=q("div",{class:"label"},"Price",-1)),q("div",GB,ke(X.value),1),f.value.total_tickets>0?(Se(),Ie("div",zB,[te.value?(Se(),Ie("span",qB,"Sold out")):(Se(),Ie("span",WB,"Tickets left: "+ke(ie.value),1))])):Qe("",!0),q("button",{class:"cta",disabled:te.value||p.value,onClick:O},[te.value?(Se(),Ie("span",XB,"SOLD OUT")):b.value?(Se(),Ie("span",ZB,"CLOSED")):p.value?(Se(),Ie("span",QB,"PROCESSING")):(Se(),Ie("span",JB,"BUY TICKET"))],8,YB),te.value?(Se(),Ie("p",eL," Tiket untuk event ini sudah habis terjual. ")):b.value?(Se(),Ie("p",tL," Tiket tidak bisa dibeli karena event sudah memasuki hari event / selesai. ")):g.value?(Se(),Ie("p",nL,ke(g.value),1)):Qe("",!0),C.value?(Se(),Ie("div",rL,[ee[10]||(ee[10]=q("h3",null,"Promoter Tools",-1)),ee[11]||(ee[11]=q("p",null,"Saldo dapat ditarik:",-1)),q("p",iL,[q("strong",null,ke(L.value)+" POL",1)]),b.value?Qe("",!0):(Se(),Ie("p",oL," Dana baru bisa ditarik setelah waktu event terlewati. ")),P.value?(Se(),Ie("p",sL,ke(P.value),1)):Qe("",!0),G.value?(Se(),Ie("p",aL,[q("a",{href:`https://amoy.polygonscan.com/tx/${G.value}`,target:"_blank",rel:"noopener noreferrer"}," Lihat transaksi di PolygonScan Amoy ",8,cL)])):Qe("",!0),q("button",{class:"cta secondary",disabled:x.value||!T.value,onClick:R},[x.value?(Se(),Ie("span",uL,"WITHDRAWING")):I.value?b.value?(Se(),Ie("span",hL,"WITHDRAW TO WALLET")):(Se(),Ie("span",dL,"WAIT EVENT FINISH")):(Se(),Ie("span",fL,"NO FUNDS"))],8,lL)])):Qe("",!0),U.value?(Se(),Ie("div",pL,[ee[12]||(ee[12]=q("h3",null,"Admin Fee",-1)),ee[13]||(ee[13]=q("p",null,"Saldo fee admin yang bisa ditarik:",-1)),q("p",gL,[q("strong",null,ke(H.value)+" POL",1)]),K.value?(Se(),Ie("p",vL,ke(K.value),1)):Qe("",!0),q("button",{class:"cta secondary",disabled:N.value||!Z.value,onClick:M},[N.value?(Se(),Ie("span",mL,"WITHDRAWING")):z.value?(Se(),Ie("span",bL,"WITHDRAW ADMIN FEE")):(Se(),Ie("span",wL,"NO FEE"))],8,yL)])):Qe("",!0)])])],4))]),Bt(RB,{open:E.value,max:S.value,initial:1,onClose:ee[1]||(ee[1]=ue=>E.value=!1),onConfirm:F},null,8,["open","max"]),y.value&&m.value?(Se(),nc(hB,{key:0,open:y.value,"event-title":m.value.eventTitle,venue:m.value.venue,"date-text":m.value.dateText,quantity:m.value.quantity,"price-per-ticket-pol":m.value.pricePerTicketPol,"total-pol":m.value.totalPol,"tx-hash":m.value.txHash,onClose:ee[2]||(ee[2]=ue=>y.value=!1)},null,8,["open","event-title","venue","date-text","quantity","price-per-ticket-pol","total-pol","tx-hash"])):Qe("",!0),v.value?(Se(),nc(wB,{key:1,open:v.value,message:w.value||g.value,onClose:ee[3]||(ee[3]=ue=>v.value=!1)},null,8,["open","message"])):Qe("",!0)]))}},xL=Is(EL,[["__scopeId","data-v-df8b5a37"]]);function AL(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function _L(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var CL=(function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),SL=(function(t){CL(e,t);function e(n,r){var i=this.constructor,o=t.call(this,n,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),AL(o,i.prototype),_L(o),o}return e})(Error),IL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),br=(function(t){IL(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e})(SL),TL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),qt=(function(t){TL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(br),OL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Le=(function(t){OL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(br),PS=(function(){function t(e){if(this.binarizer=e,e===null)throw new Le("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var o=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),RL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),en=(function(t){RL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(br),PL=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),Nt=(function(){function t(){}return t.arraycopy=function(e,n,r,i,o){for(;o--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t})(),NL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Dv=(function(t){NL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(br),kL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ob=(function(t){kL(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Dv),ML=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ln=(function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var o=n;o<r;o++)e[o]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new Le("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new Ob(n);if(r>e)throw new Ob(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var o=ML(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,o=new Int32Array(i);return Nt.arraycopy(e,n,o,0,i),o},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(n,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},t.numberComparator=function(e,n){return e-n},t})(),Ze=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),En=(function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);Nt.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=r[i]}var a=i*32+Ze.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=~r[i]}var a=i*32+Ze.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new Le;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,c=s<i?31:n&31,l=(2<<c)-(1<<a);o[s]|=l}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new Le;if(n===e)return!0;n--;for(var i=Math.floor(e/32),o=Math.floor(n/32),s=this.bits,a=i;a<=o;a++){var c=a>i?0:e&31,l=a<o?31:n&31,u=(2<<l)-(1<<c)&4294967295;if((s[a]&u)!==(r?u:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new Le("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Le("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;n[r+o]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[n-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,c=e[0]>>>a,o=1;o<r;o++){var l=e[o];c|=l<<32-a,e[o-1]=c,c=l>>>a}e[r-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&ln.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+ln.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t})(),j1;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(j1||(j1={}));const kt=j1;var DL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ae=(function(t){DL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(br),BL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Et;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Et||(Et={}));var cn=(function(){function t(e,n,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var c=this.values,l=0,u=c.length;l!==u;l++){var f=c[l];t.VALUES_TO_ECI.set(f,this)}try{for(var d=BL(s),h=d.next();!h.done;h=d.next()){var p=h.value;t.NAME_TO_ECI.set(p,this)}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Ae("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new Ae("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new Ae("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Et.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Et.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Et.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Et.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Et.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Et.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Et.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Et.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Et.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Et.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Et.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Et.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Et.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Et.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Et.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Et.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Et.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Et.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Et.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Et.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Et.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Et.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Et.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Et.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Et.Big5,28,"Big5"),t.GB18030=new t(Et.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Et.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),LL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Xf=(function(t){LL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(br),Xr=(function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof cn?e:cn.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(cn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Xf("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(cn.UTF8)||e.equals(cn.ISO8859_1)||e.equals(cn.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},t})(),rt=(function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return Xr.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(kt.CHARACTER_SET)!==void 0)return n.get(kt.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,c=0,l=0,u=0,f=0,d=0,h=0,p=0,g=0,y=0,v=0,m=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,w=0;w<r&&(i||o||s);w++){var E=e[w]&255;s&&(a>0?(E&128)===0?s=!1:a--:(E&128)!==0&&((E&64)===0?s=!1:(a++,(E&32)===0?c++:(a++,(E&16)===0?l++:(a++,(E&8)===0?u++:s=!1))))),i&&(E>127&&E<160?i=!1:E>159&&(E<192||E===215||E===247)&&v++),o&&(f>0?E<64||E===127||E>252?o=!1:f--:E===128||E===160||E>239?o=!1:E>160&&E<224?(d++,p=0,h++,h>g&&(g=h)):E>127?(f++,h=0,p++,p>y&&(y=p)):(h=0,p=0))}return s&&a>0&&(s=!1),o&&f>0&&(o=!1),s&&(m||c+l+u>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||g>=3||y>=3)?t.SHIFT_JIS:i&&o?g===2&&d===2||v*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function o(a,c,l,u,f,d){if(a==="%%")return"%";if(n[++i]!==void 0){a=u?parseInt(u.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,p;switch(d){case"s":p=n[i];break;case"c":p=n[i][0];break;case"f":p=parseFloat(n[i]).toFixed(a);break;case"p":p=parseFloat(n[i]).toPrecision(a);break;case"e":p=parseFloat(n[i]).toExponential(a);break;case"x":p=parseInt(n[i]).toString(h||16);break;case"d":p=parseFloat(parseInt(n[i],h||10).toPrecision(a)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var g=parseInt(l),y=l&&l[0]+""=="0"?"0":" ";p.length<g;)p=c!==void 0?p+y:y+p;return p}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},t.getBytes=function(e,n){return Xr.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=cn.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=cn.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=cn.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),Ye=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=rt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t})(),Wi=(function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new Le("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),o=0;o<n;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},t.parseFromString=function(e,n,r){if(e===null)throw new Le("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,c=0,l=0;l<e.length;)if(e.charAt(l)===`
`||e.charAt(l)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Le("row lengths do not match");s=o,c++}l++}else if(e.substring(l,l+n.length)===n)l+=n.length,i[o]=!0,o++;else if(e.substring(l,l+r.length)===r)l+=r.length,i[o]=!1,o++;else throw new Le("illegal character encountered: "+e.substring(l));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Le("row lengths do not match");c++}for(var u=new t(a,c),f=0;f<o;f++)i[f]&&u.set(Math.floor(f%a),Math.floor(f/a));return u},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Le("input matrix dimensions do not match");for(var n=new En(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,c=e.getRow(o,n).getBitArray(),l=0;l<r;l++)i[a+l]^=c[l]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new Le("Left and top must be nonnegative");if(i<1||r<1)throw new Le("Height and width must be at least 1");var o=e+r,s=n+i;if(s>this.height||o>this.width)throw new Le("The region must fit inside the matrix");for(var a=this.rowSize,c=this.bits,l=n;l<s;l++)for(var u=l*a,f=e;f<o;f++)c[u+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new En(this.width):n.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)n.setBulk(s*32,i[o+s]);return n},t.prototype.setRow=function(e,n){Nt.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new En(e),i=new En(e),o=0,s=Math.floor((n+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(n-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(n-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,o=e,s=n,a=-1,c=-1,l=0;l<n;l++)for(var u=0;u<r;u++){var f=i[l*r+u];if(f!==0){if(l<s&&(s=l),l>c&&(c=l),u*32<o){for(var d=0;(f<<31-d&4294967295)===0;)d++;u*32+d<o&&(o=u*32+d)}if(u*32+31>a){for(var d=31;!(f>>>d);)d--;u*32+d>a&&(a=u*32+d)}}}return a<o||c<s?null:Int32Array.from([o,s,a-o+1,c-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,o=r%e*32,s=n[r],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=n[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&ln.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ln.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new Ye,o=0,s=this.height;o<s;o++){for(var a=0,c=this.width;a<c;a++)i.append(this.get(a,o)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),FL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),ge=(function(t){FL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(br),UL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),HL=(function(t){UL(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new En(o):r.clear(),this.initArrays(o);for(var s=i.getRow(n,this.luminances),a=this.buckets,c=0;c<o;c++)a[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var l=e.estimateBlackPoint(a);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<l&&r.set(c);else for(var u=s[0]&255,f=s[1]&255,c=1;c<o-1;c++){var d=s[c+1]&255;(f*4-u-d)/2<l&&r.set(c),u=f,f=d}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),o=new Wi(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var c=Math.floor(i*a/5),l=n.getRow(c,this.luminances),u=Math.floor(r*4/5),f=Math.floor(r/5);f<u;f++){var d=l[f]&255;s[d>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(s),p=n.getMatrix(),a=0;a<i;a++)for(var g=a*r,f=0;f<r;f++){var d=p[g+f]&255;d<h&&o.set(f,a)}return o},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,o=0,s=0,a=0;a<r;a++)n[a]>s&&(o=a,s=n[a]),n[a]>i&&(i=n[a]);for(var c=0,l=0,a=0;a<r;a++){var u=a-o,f=n[a]*u*u;f>l&&(c=a,l=f)}if(o>c){var d=o;o=c,c=d}if(c-o<=r/16)throw new ge;for(var h=c-1,p=-1,a=c-1;a>o;a--){var g=a-o,f=g*g*(c-a)*(i-n[a]);f>p&&(h=a,p=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(PL),$L=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),NS=(function(t){$L(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=n.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var c=e.calculateBlackPoints(o,s,a,r,i),l=new Wi(r,i);e.calculateThresholdForBlock(o,s,a,r,i,c,l),this.matrix=l}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,o,s,a,c){for(var l=s-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,f=0;f<i;f++){var d=f<<e.BLOCK_SIZE_POWER;d>l&&(d=l);for(var h=e.cap(f,2,i-3),p=0;p<r;p++){var g=p<<e.BLOCK_SIZE_POWER;g>u&&(g=u);for(var y=e.cap(p,2,r-3),v=0,m=-2;m<=2;m++){var w=a[h+m];v+=w[y-2]+w[y-1]+w[y]+w[y+1]+w[y+2]}var E=v/25;e.thresholdBlock(n,g,d,E,o,c)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,o,s,a){for(var c=0,l=i*s+r;c<e.BLOCK_SIZE;c++,l+=s)for(var u=0;u<e.BLOCK_SIZE;u++)(n[l+u]&255)<=o&&a.set(r+u,i+c)},e.calculateBlackPoints=function(n,r,i,o,s){for(var a=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,l=new Array(i),u=0;u<i;u++){l[u]=new Int32Array(r);var f=u<<e.BLOCK_SIZE_POWER;f>a&&(f=a);for(var d=0;d<r;d++){var h=d<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var p=0,g=255,y=0,v=0,m=f*o+h;v<e.BLOCK_SIZE;v++,m+=o){for(var w=0;w<e.BLOCK_SIZE;w++){var E=n[m+w]&255;p+=E,E<g&&(g=E),E>y&&(y=E)}if(y-g>e.MIN_DYNAMIC_RANGE)for(v++,m+=o;v<e.BLOCK_SIZE;v++,m+=o)for(var w=0;w<e.BLOCK_SIZE;w++)p+=n[m+w]&255}var S=p>>e.BLOCK_SIZE_POWER*2;if(y-g<=e.MIN_DYNAMIC_RANGE&&(S=g/2,u>0&&d>0)){var O=(l[u-1][d]+2*l[u][d-1]+l[u-1][d-1])/4;g<O&&(S=O)}l[u][d]=S}}return l},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(HL),Su=(function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new Xf("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Xf("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Xf("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new Ye,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",n.append(a)}n.append(`
`)}return n.toString()},t})(),VL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Uh=(function(t){VL(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(n[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,o){return new e(this.delegate.crop(n,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Su),jL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),KL=(function(t){jL(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,c=0,l=n.length;a<l;a+=4,c++){var u=void 0,f=n[a+3];if(f===0)u=255;else{var d=n[a],h=n[a+1],p=n[a+2];u=306*d+601*h+117*p+512>>10}s[c]=u}else for(var a=0,c=0,g=n.length;a<g;a+=4,c++){var u=void 0,f=n[a+3];if(f===0)u=255;else{var d=n[a],h=n[a+1],p=n[a+2];u=306*d+601*h+117*p+512>>10}s[c]=255-u}return s},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new Le("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=n*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),l=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=c,r.height=l,i.translate(c/2,l/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Uh(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Su),GL=(function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),Gn=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},zn=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},zL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bc=(function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Gn(this,void 0,void 0,function(){var e,n,r,i,o,s,a,c,l,u,f,d;return zn(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),n=[];try{for(r=zL(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device "+(n.length+1),l=o.groupId,u={deviceId:a,label:c,kind:s,groupId:l},n.push(u))}catch(p){f={error:p}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(f)throw f.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return Gn(this,void 0,void 0,function(){var e;return zn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new GL(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return Gn(this,void 0,void 0,function(){var n;return zn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return Gn(this,void 0,void 0,function(){return zn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Gn(this,void 0,void 0,function(){var r,i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Gn(this,void 0,void 0,function(){var r;return zn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Gn(this,void 0,void 0,function(){var r,i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return Gn(this,void 0,void 0,function(){return zn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Gn(this,void 0,void 0,function(){var i,o;return zn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Gn(this,void 0,void 0,function(){var i;return zn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return Gn(this,void 0,void 0,function(){var i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return Gn(this,void 0,void 0,function(){var r;return zn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Gn(this,void 0,void 0,function(){return zn(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new qt("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new qt("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new qt("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new qt("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new qt("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new qt("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new qt("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new qt("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new qt("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new qt("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Gn(this,void 0,void 0,function(){return zn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return Gn(this,void 0,void 0,function(){return zn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new ge("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(d){var l=n&&d instanceof ge,u=d instanceof en||d instanceof Ae,f=u&&r;if(l||f)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(d)}};return new Promise(function(s,a){return o(s,a)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);n(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){n(null,c);var s=c instanceof en||c instanceof Ae,a=c instanceof ge;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new KL(r,n),o=new NS(i);return new PS(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),Kn=(function(){function t(e,n,r,i,o,s){r===void 0&&(r=n==null?0:8*n.length),s===void 0&&(s=Nt.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=Nt.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);Nt.arraycopy(n,0,r,0,n.length),Nt.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),K1;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(K1||(K1={}));const Be=K1;var G1;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(G1||(G1={}));const Pn=G1;var Hh=(function(){function t(e,n,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),ll=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Le;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t})(),ys=(function(){function t(e,n){if(n.length===0)throw new Le;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Nt.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,o=n.length;i!==o;i++){var s=n[i];r=ll.addOrSubtract(r,s)}return r}r=n[0];for(var a=n.length,c=this.field,i=1;i<a;i++)r=ll.addOrSubtract(c.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;Nt.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=ll.addOrSubtract(n[a-s],r[a]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,c=0;c<r;c++)for(var l=n[c],u=0;u<o;u++)s[c+u]=ll.addOrSubtract(s[c+u],a.multiply(l,i[u]));return new t(a,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),o=this.coefficients,s=0;s<n;s++)i[s]=r.multiply(o[s],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new Le;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],n);return new t(s,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Le("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=n.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),c=n.multiply(i.getCoefficient(i.getDegree()),s),l=e.multiplyByMonomial(a,c),u=n.buildMonomial(a,c);r=r.addOrSubtract(u),i=i.addOrSubtract(l)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t})(),WL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),kS=(function(t){WL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(br),qL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),gr=(function(t){qL(e,t);function e(n,r,i){var o=t.call(this)||this;o.primitive=n,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,c=0;c<r;c++)s[c]=a,a*=2,a>=r&&(a^=n,a&=r-1);o.expTable=s;for(var l=new Int32Array(r),c=0;c<r-1;c++)l[s[c]]=c;return o.logTable=l,o.zero=new ys(o,Int32Array.from([0])),o.one=new ys(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new Le;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new ys(this,i)},e.prototype.inverse=function(n){if(n===0)throw new kS;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ze.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(ll),YL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),vf=(function(t){YL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(br),XL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Iu=(function(t){XL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(br),$h=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new ys(r,e),o=new Int32Array(n),s=!0,a=0;a<n;a++){var c=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=c,c!==0&&(s=!1)}if(!s)for(var l=new ys(r,o),u=this.runEuclideanAlgorithm(r.buildMonomial(n,1),l,n),f=u[0],d=u[1],h=this.findErrorLocations(f),p=this.findErrorMagnitudes(d,h),a=0;a<h.length;a++){var g=e.length-1-r.log(h[a]);if(g<0)throw new vf("Bad error location");e[g]=gr.addOrSubtract(e[g],p[a])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=this.field,s=e,a=n,c=o.getZero(),l=o.getOne();a.getDegree()>=(r/2|0);){var u=s,f=c;if(s=a,c=l,s.isZero())throw new vf("r_{i-1} was zero");a=u;for(var d=o.getZero(),h=s.getCoefficient(s.getDegree()),p=o.inverse(h);a.getDegree()>=s.getDegree()&&!a.isZero();){var g=a.getDegree()-s.getDegree(),y=o.multiply(a.getCoefficient(a.getDegree()),p);d=d.addOrSubtract(o.buildMonomial(g,y)),a=a.addOrSubtract(s.multiplyByMonomial(g,y))}if(l=d.multiply(c).addOrSubtract(f),a.getDegree()>=s.getDegree())throw new Iu("Division algorithm failed to reduce polynomial?")}var v=l.getCoefficient(0);if(v===0)throw new vf("sigmaTilde(0) was zero");var m=o.inverse(v),w=l.multiplyScalar(m),E=a.multiplyScalar(m);return[w,E]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,o=this.field,s=1;s<o.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==n)throw new vf("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(n[s]),c=1,l=0;l<r;l++)if(s!==l){var u=o.multiply(n[l],a),f=(u&1)===0?u|1:u&-2;c=o.multiply(c,f)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},t})(),_n;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(_n||(_n={}));var Rb=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),a=new Hh(o,s,null,null);return a.setNumBits(i.length),a},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=_n.UPPER,i=_n.UPPER,o="",s=0;s<n;)if(i===_n.BINARY){if(n-s<5)break;var a=t.readCode(e,s,5);if(s+=5,a===0){if(n-s<11)break;a=t.readCode(e,s,11)+31,s+=11}for(var c=0;c<a;c++){if(n-s<8){s=n;break}var l=t.readCode(e,s,8);o+=rt.castAsNonUtf8Char(l),s+=8}i=r}else{var u=i===_n.DIGIT?4:5;if(n-s<u)break;var l=t.readCode(e,s,u);s+=u;var f=t.getCharacter(i,l);f.startsWith("CTRL_")?(r=i,i=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(o+=f,i=r)}return o},t.getTable=function(e){switch(e){case"L":return _n.LOWER;case"P":return _n.PUNCT;case"M":return _n.MIXED;case"D":return _n.DIGIT;case"B":return _n.BINARY;case"U":default:return _n.UPPER}},t.getCharacter=function(e,n){switch(e){case _n.UPPER:return t.UPPER_TABLE[n];case _n.LOWER:return t.LOWER_TABLE[n];case _n.MIXED:return t.MIXED_TABLE[n];case _n.PUNCT:return t.PUNCT_TABLE[n];case _n.DIGIT:return t.DIGIT_TABLE[n];default:throw new Iu("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=gr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=gr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=gr.AZTEC_DATA_10):(r=12,n=gr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new Ae;for(var s=e.length%r,a=new Int32Array(o),c=0;c<o;c++,s+=r)a[c]=t.readCode(e,s,r);try{var l=new $h(n);l.decode(a,o-i)}catch(y){throw new Ae(y)}for(var u=(1<<r)-1,f=0,c=0;c<i;c++){var d=a[c];if(d===0||d===u)throw new Ae;(d===1||d===u-1)&&f++}for(var h=new Array(i*r-f),p=0,c=0;c<i;c++){var d=a[c];if(d===1||d===u-1)h.fill(d>1,p,p+r-1),p+=r-1;else for(var g=r-1;g>=0;--g)h[p++]=(d&1<<g)!==0}return h},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(var a=0;a<o.length;a++)o[a]=a;else for(var c=i+1+2*Ze.truncDivision(Ze.truncDivision(i,2)-1,15),l=i/2,u=Ze.truncDivision(c,2),a=0;a<l;a++){var f=a+Ze.truncDivision(a,15);o[l-a-1]=u-f-1,o[l+a]=u+f+1}for(var a=0,d=0;a<r;a++){for(var h=(r-a)*4+(n?9:12),p=a*2,g=i-1-p,y=0;y<h;y++)for(var v=y*2,m=0;m<2;m++)s[d+v+m]=e.get(o[p+m],o[p+y]),s[d+2*h+v+m]=e.get(o[p+y],o[g-m]),s[d+4*h+v+m]=e.get(o[g-m],o[g-y]),s[d+6*h+v+m]=e.get(o[g-y],o[p+m]);d+=h*8}return s},t.readCode=function(e,n,r){for(var i=0,o=n;o<n+r;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),ct=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var o=e-r,s=n-i;return Math.sqrt(o*o+s*s)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var o=e[r];n+=o}return n},t})(),z1=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),Me=(function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*z1.floatToIntBits(this.x)+z1.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=n&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=n?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var c=o;o=a,a=c}e[0]=o,e[1]=s,e[2]=a},t.distance=function(e,n){return ct.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,o=n.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},t})(),Bv=(function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),ZL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),QL=(function(t){ZL(e,t);function e(n,r,i,o,s){var a=t.call(this,n,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Bv),W1=(function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ge}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,l=!1,u=!1,f=!1,d=this.width,h=this.height;s;){s=!1;for(var p=!0;(p||!c)&&n<d;)p=this.containsBlackPoint(r,i,n,!1),p?(n++,s=!0,c=!0):c||n++;if(n>=d){o=!0;break}for(var g=!0;(g||!l)&&i<h;)g=this.containsBlackPoint(e,n,i,!0),g?(i++,s=!0,l=!0):l||i++;if(i>=h){o=!0;break}for(var y=!0;(y||!u)&&e>=0;)y=this.containsBlackPoint(r,i,e,!1),y?(e--,s=!0,u=!0):u||e--;if(e<0){o=!0;break}for(var v=!0;(v||!f)&&r>=0;)v=this.containsBlackPoint(e,n,r,!0),v?(r--,s=!0,f=!0):f||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var m=n-e,w=null,E=1;w===null&&E<m;E++)w=this.getBlackPointOnSegment(e,i-E,e+E,i);if(w==null)throw new ge;for(var S=null,E=1;S===null&&E<m;E++)S=this.getBlackPointOnSegment(e,r+E,e+E,r);if(S==null)throw new ge;for(var O=null,E=1;O===null&&E<m;E++)O=this.getBlackPointOnSegment(n,r+E,n-E,r);if(O==null)throw new ge;for(var F=null,E=1;F===null&&E<m;E++)F=this.getBlackPointOnSegment(n,i-E,n-E,i);if(F==null)throw new ge;return this.centerEdges(F,w,O,S)}else throw new ge},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var o=ct.round(ct.distance(e,n,r,i)),s=(r-e)/o,a=(i-n)/o,c=this.image,l=0;l<o;l++){var u=ct.round(e+l*s),f=ct.round(n+l*a);if(c.get(u,f))return new Me(u,f)}return null},t.prototype.centerEdges=function(e,n,r,i){var o=e.getX(),s=e.getY(),a=n.getX(),c=n.getY(),l=r.getX(),u=r.getY(),f=i.getX(),d=i.getY(),h=t.CORR;return o<this.width/2?[new Me(f-h,d+h),new Me(a+h,c+h),new Me(l-h,u-h),new Me(o+h,s-h)]:[new Me(f+h,d+h),new Me(a+h,c-h),new Me(l-h,u+h),new Me(o-h,s-h)]},t.prototype.containsBlackPoint=function(e,n,r,i){var o=this.image;if(i){for(var s=e;s<=n;s++)if(o.get(s,r))return!0}else for(var a=e;a<=n;a++)if(o.get(r,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),Pb=(function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<n.length&&o;s+=2){var a=Math.floor(n[s]),c=Math.floor(n[s+1]);if(a<-1||a>r||c<-1||c>i)throw new ge;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),c===-1?(n[s+1]=0,o=!0):c===i&&(n[s+1]=i-1,o=!0)}o=!0;for(var s=n.length-2;s>=0&&o;s-=2){var a=Math.floor(n[s]),c=Math.floor(n[s+1]);if(a<-1||a>r||c<-1||c>i)throw new ge;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),c===-1?(n[s+1]=0,o=!0):c===i&&(n[s+1]=i-1,o=!0)}},t})(),MS=(function(){function t(e,n,r,i,o,s,a,c,l){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=c,this.a33=l}return t.quadrilateralToQuadrilateral=function(e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y){var v=t.quadrilateralToSquare(e,n,r,i,o,s,a,c),m=t.squareToQuadrilateral(l,u,f,d,h,p,g,y);return m.times(v)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,l=this.a31,u=this.a32,f=this.a33,d=0;d<n;d+=2){var h=e[d],p=e[d+1],g=o*h+c*p+f;e[d]=(r*h+s*p+l)/g,e[d+1]=(i*h+a*p+u)/g}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,l=this.a31,u=this.a32,f=this.a33,d=e.length,h=0;h<d;h++){var p=e[h],g=n[h],y=o*p+c*g+f;e[h]=(r*p+s*g+l)/y,n[h]=(i*p+a*g+u)/y}},t.squareToQuadrilateral=function(e,n,r,i,o,s,a,c){var l=e-r+o-a,u=n-i+s-c;if(l===0&&u===0)return new t(r-e,o-r,e,i-n,s-i,n,0,0,1);var f=r-o,d=a-o,h=i-s,p=c-s,g=f*p-d*h,y=(l*p-d*u)/g,v=(f*u-l*h)/g;return new t(r-e+y*r,a-e+v*a,e,i-n+y*i,c-n+v*c,n,y,v,1)},t.quadrilateralToSquare=function(e,n,r,i,o,s,a,c){return t.squareToQuadrilateral(e,n,r,i,o,s,a,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),JL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),eF=(function(t){JL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E){var S=MS.quadrilateralToQuadrilateral(o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E);return this.sampleGridWithTransform(n,r,i,S)},e.prototype.sampleGridWithTransform=function(n,r,i,o){if(r<=0||i<=0)throw new ge;for(var s=new Wi(r,i),a=new Float32Array(2*r),c=0;c<i;c++){for(var l=a.length,u=c+.5,f=0;f<l;f+=2)a[f]=f/2+.5,a[f+1]=u;o.transformPoints(a),Pb.checkAndNudgePoints(n,a);try{for(var f=0;f<l;f+=2)n.get(Math.floor(a[f]),Math.floor(a[f+1]))&&s.set(f/2,c)}catch{throw new ge}}return s},e})(Pb),Lv=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new eF,t})(),lr=(function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new Me(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),tF=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new QL(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ge;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(o,s,a){var c=(o>>n-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ze.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ge},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var c=new $h(gr.AZTEC_PARAM);c.decode(s,o)}catch{throw new ge}for(var l=0,a=0;a<i;a++)l=(l<<4)+s[a];return l},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(n,s,1,-1),c=this.getFirstDifferent(r,s,1,1),l=this.getFirstDifferent(i,s,-1,1),u=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(u,a)*this.nbCenterLayers/(this.distancePoint(o,n)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(a,c,l,u))break}n=a,r=c,i=l,o=u,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ge;this.compact=this.nbCenterLayers===5;var d=new Me(n.getX()+.5,n.getY()-.5),h=new Me(r.getX()+.5,r.getY()+.5),p=new Me(i.getX()-.5,i.getY()+.5),g=new Me(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,h,p,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var o=new W1(this.image).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new lr(s+7,a-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new lr(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new lr(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new lr(s-7,a-7),!1,-1,-1).toResultPoint()}var c=ct.round((e.getX()+i.getX()+n.getX()+r.getX())/4),l=ct.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var o=new W1(this.image,15,c,l).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new lr(c+7,l-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new lr(c+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new lr(c-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new lr(c-7,l-7),!1,-1,-1).toResultPoint()}return c=ct.round((e.getX()+i.getX()+n.getX()+r.getX())/4),l=ct.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new lr(c,l)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,o){var s=Lv.getInstance(),a=this.getDimension(),c=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,c,c,l,c,l,l,c,l,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,o=this.distanceResultPoint(e,n),s=o/r,a=e.getX(),c=e.getY(),l=s*(n.getX()-e.getX())/o,u=s*(n.getY()-e.getY())/o,f=0;f<r;f++)this.image.get(ct.round(a+f*l),ct.round(c+f*u))&&(i|=1<<r-f-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var o=3;e=new lr(e.getX()-o,e.getY()+o),n=new lr(n.getX()-o,n.getY()-o),r=new lr(r.getX()+o,r.getY()-o),i=new lr(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,n);return a!==s||(a=this.getColor(n,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,o=(n.getY()-e.getY())/r,s=0,a=e.getX(),c=e.getY(),l=this.image.get(e.getX(),e.getY()),u=Math.ceil(r),f=0;f<u;f++)a+=i,c+=o,this.image.get(ct.round(a),ct.round(c))!==l&&s++;var d=s/r;return d>.1&&d<.9?0:d<=.1===l?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===n;)s+=i;return s-=i,new lr(o,s)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,l=new Me(a+i*o,c+i*s),u=new Me(a-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Me(a+i*o,c+i*s),d=new Me(a-i*o,c-i*s),h=[l,f,u,d];return h},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=ct.round(e.getX()),r=ct.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return ct.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return ct.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ze.truncDivision(this.nbLayers-4,8)+1)+15},t})(),Wd=(function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new tF(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(n,o),s=new Rb().decode(a)}catch(f){r=f}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(n,o),s=new Rb().decode(a)}catch(f){throw r??f}var c=new Kn(s.getText(),s.getRawBytes(),s.getNumBits(),o,Be.AZTEC,Nt.currentTimeMillis()),l=s.getByteSegments();l!=null&&c.putMetadata(Pn.BYTE_SEGMENTS,l);var u=s.getECLevel();return u!=null&&c.putMetadata(Pn.ERROR_CORRECTION_LEVEL,u),c},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(kt.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t})(),nF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){nF(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Wd,n)||this}return e})(Bc);var fn=(function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(kt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,n),s=o.getResultMetadata(),a=270;s!==null&&s.get(Pn.ORIENTATION)===!0&&(a=a+s.get(Pn.ORIENTATION)%360),o.putMetadata(Pn.ORIENTATION,a);var c=o.getResultPoints();if(c!==null)for(var l=i.getHeight(),u=0;u<c.length;u++)c[u]=new Me(l-c[u].getY()-1,c[u].getX());return o}else throw new ge}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),o=new En(r),s=n&&n.get(kt.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var l=Math.trunc(i/2),u=0;u<c;u++){var f=Math.trunc((u+1)/2),d=(u&1)===0,h=l+a*(d?f:-f);if(h<0||h>=i)break;try{o=e.getBlackRow(h,o)}catch{continue}for(var p=function(m){if(m===1&&(o.reverse(),n&&n.get(kt.NEED_RESULT_POINT_CALLBACK)===!0)){var w=new Map;n.forEach(function(O,F){return w.set(F,O)}),w.delete(kt.NEED_RESULT_POINT_CALLBACK),n=w}try{var E=g.decodeRow(h,o,n);if(m===1){E.putMetadata(Pn.ORIENTATION,180);var S=E.getResultPoints();S!==null&&(S[0]=new Me(r-S[0].getX()-1,S[0].getY()),S[1]=new Me(r-S[1].getX()-1,S[1].getY()))}return{value:E}}catch{}},g=this,y=0;y<2;y++){var v=p(y);if(typeof v=="object")return v.value}}throw new ge},t.recordPattern=function(e,n,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(n>=s)throw new ge;for(var a=!e.get(n),c=0,l=n;l<s;){if(e.get(l)!==a)r[c]++;else{if(++c===i)break;r[c]=1,a=!a}l++}if(!(c===i||c===i-1&&l===s))throw new ge},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,o=e.get(n);n>0&&i>=0;)e.get(--n)!==o&&(i--,o=!o);if(i>=0)throw new ge;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var l=0,u=0;u<i;u++){var f=e[u],d=n[u]*c,h=f>d?f-d:d-f;if(h>r)return Number.POSITIVE_INFINITY;l+=h}return l/o},t})(),rF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Nb=(function(t){rF(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,c=!1,l=6,u=i;u<r;u++)if(n.get(u)!==c)s[o]++;else{if(o===l-1){for(var f=e.MAX_AVG_VARIANCE,d=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var p=fn.patternMatchVariance(s,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);p<f&&(f=p,d=h)}if(d>=0&&n.isRange(Math.max(0,a-(u-a)/2),a,!1))return Int32Array.from([a,u,d]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new ge},e.decodeCode=function(n,r,i){fn.recordPattern(n,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var c=e.CODE_PATTERNS[a],l=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,s=a)}if(s>=0)return s;throw new ge},e.prototype.decodeRow=function(n,r,i){var o=i&&i.get(kt.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],c=0,l=new Uint8Array(20);l[c++]=a;var u;switch(a){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new Ae}for(var f=!1,d=!1,h="",p=s[0],g=s[1],y=Int32Array.from([0,0,0,0,0,0]),v=0,m=0,w=a,E=0,S=!0,O=!1,F=!1;!f;){var $=d;switch(d=!1,v=m,m=e.decodeCode(r,y,g),l[c++]=m,m!==e.CODE_STOP&&(S=!0),m!==e.CODE_STOP&&(E++,w+=E*m),p=g,g+=y.reduce(function(G,b){return G+b},0),m){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Ae}switch(u){case e.CODE_CODE_A:if(m<64)F===O?h+=String.fromCharCode(32+m):h+=String.fromCharCode(32+m+128),F=!1;else if(m<96)F===O?h+=String.fromCharCode(m-64):h+=String.fromCharCode(m+64),F=!1;else switch(m!==e.CODE_STOP&&(S=!1),m){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!O&&F?(O=!0,F=!1):O&&F?(O=!1,F=!1):F=!0;break;case e.CODE_SHIFT:d=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(m<96)F===O?h+=String.fromCharCode(32+m):h+=String.fromCharCode(32+m+128),F=!1;else switch(m!==e.CODE_STOP&&(S=!1),m){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!O&&F?(O=!0,F=!1):O&&F?(O=!1,F=!1):F=!0;break;case e.CODE_SHIFT:d=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(m<100)m<10&&(h+="0"),h+=m;else switch(m!==e.CODE_STOP&&(S=!1),m){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}$&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var U=g-p;if(g=r.getNextUnset(g),!r.isRange(g,Math.min(r.getSize(),g+(g-p)/2),!1))throw new ge;if(w-=E*v,w%103!==v)throw new en;var B=h.length;if(B===0)throw new ge;B>0&&S&&(u===e.CODE_CODE_C?h=h.substring(0,B-2):h=h.substring(0,B-1));for(var Y=(s[1]+s[0])/2,j=p+U/2,L=l.length,I=new Uint8Array(L),x=0;x<L;x++)I[x]=l[x];var P=[new Me(Y,n),new Me(j,n)];return new Kn(h,I,0,P,Be.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(fn),iF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),pp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kb=(function(t){iF(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var o,s,a,c,l=this.counters;l.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(r,l),f=r.getNextSet(u[1]),d=r.getSize(),h,p;do{e.recordPattern(r,f,l);var g=e.toNarrowWidePattern(l);if(g<0)throw new ge;h=e.patternToChar(g),this.decodeRowResult+=h,p=f;try{for(var y=(o=void 0,pp(l)),v=y.next();!v.done;v=y.next()){var m=v.value;f+=m}}catch(L){o={error:L}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var E=pp(l),S=E.next();!S.done;S=E.next()){var m=S.value;w+=m}}catch(L){a={error:L}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}var O=f-p-w;if(f!==d&&O*2<w)throw new ge;if(this.usingCheckDigit){for(var F=this.decodeRowResult.length-1,$=0,U=0;U<F;U++)$+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(U));if(this.decodeRowResult.charAt(F)!==e.ALPHABET_STRING.charAt($%43))throw new en;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new ge;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var Y=(u[1]+u[0])/2,j=p+w/2;return new Kn(B,null,0,[new Me(Y,n),new Me(j,n)],Be.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),o=n.getNextSet(0),s=0,a=o,c=!1,l=r.length,u=o;u<i;u++)if(n.get(u)!==c)r[s]++;else{if(s===l-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,a-Math.floor((u-a)/2)),a,!1))return[a,u];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new ge},e.toNarrowWidePattern=function(n){var r,i,o=n.length,s=0,a;do{var c=2147483647;try{for(var l=(r=void 0,pp(n)),u=l.next();!u.done;u=l.next()){var f=u.value;f<c&&f>s&&(c=f)}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}s=c,a=0;for(var d=0,h=0,p=0;p<o;p++){var f=n[p];f>s&&(h|=1<<o-1-p,a++,d+=f)}if(a===3){for(var p=0;p<o&&a>0;p++){var f=n[p];if(f>s&&(a--,f*2>=d))return-1}return h}}while(a>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new ge},e.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=n.charAt(o+1),c="\0";switch(s){case"+":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new Ae;break;case"$":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new Ae;break;case"%":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a==="X"||a==="Y"||a==="Z")c="";else throw new Ae;break;case"/":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new Ae;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(fn),oF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),gp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mb=(function(t){oF(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var o,s,a,c,l=this.findAsteriskPattern(r),u=r.getNextSet(l[1]),f=r.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var h,p;do{e.recordPattern(r,u,d);var g=this.toPattern(d);if(g<0)throw new ge;h=this.patternToChar(g),this.decodeRowResult+=h,p=u;try{for(var y=(o=void 0,gp(d)),v=y.next();!v.done;v=y.next()){var m=v.value;u+=m}}catch(U){o={error:U}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}u=r.getNextSet(u)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var E=gp(d),S=E.next();!S.done;S=E.next()){var m=S.value;w+=m}}catch(U){a={error:U}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}if(u===f||!r.get(u))throw new ge;if(this.decodeRowResult.length<2)throw new ge;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var O=this.decodeExtended(this.decodeRowResult),F=(l[1]+l[0])/2,$=p+w/2;return new Kn(O,null,0,[new Me(F,n),new Me($,n)],Be.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,c=o.length,l=0,u=i;u<r;u++)if(n.get(u)!==a)o[l]++;else{if(l===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,u]);s+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,a=!a}throw new ge},e.prototype.toPattern=function(n){var r,i,o=0;try{for(var s=gp(n),a=s.next();!a.done;a=s.next()){var c=a.value;o+=c}}catch(p){r={error:p}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var l=0,u=n.length,f=0;f<u;f++){var d=Math.round(n[f]*9/o);if(d<1||d>4)return-1;if((f&1)===0)for(var h=0;h<d;h++)l=l<<1|1;else l<<=d}return l},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new ge},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new Ae;var a=n.charAt(o+1),c="\0";switch(s){case"d":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new Ae;break;case"a":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new Ae;break;case"b":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a>="X"&&a<="Z")c="";else throw new Ae;break;case"c":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new Ae;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(n.charAt(a)),++o>i&&(o=1);if(n.charAt(r)!==e.ALPHABET_STRING[s%47])throw new en},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(fn),sF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),aF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Db=(function(t){sF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var o,s,a=this.decodeStart(r),c=this.decodeEnd(r),l=new Ye;e.decodeMiddle(r,a[1],c[0],l);var u=l.toString(),f=null;i!=null&&(f=i.get(kt.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var d=u.length,h=!1,p=0;try{for(var g=aF(f),y=g.next();!y.done;y=g.next()){var v=y.value;if(d===v){h=!0;break}v>p&&(p=v)}}catch(E){o={error:E}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}if(!h&&d>p&&(h=!0),!h)throw new Ae;var m=[new Me(a[1],n),new Me(c[0],n)],w=new Kn(u,null,0,m,Be.ITF,new Date().getTime());return w},e.decodeMiddle=function(n,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),a.fill(0),c.fill(0);r<i;){fn.recordPattern(n,r,s);for(var l=0;l<5;l++){var u=2*l;a[l]=s[u],c[l]=s[u+1]}var f=e.decodeDigit(a);o.append(f.toString()),f=this.decodeDigit(c),o.append(f.toString()),s.forEach(function(d){r+=d})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!n.get(o);o--)i--;if(i!==0)throw new ge},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new ge;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof ge&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var o=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-o,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var o=i.length,s=new Int32Array(o),a=n.getSize(),c=!1,l=0,u=r;s.fill(0);for(var f=r;f<a;f++)if(n.get(f)!==c)s[l]++;else{if(l===o-1){if(fn.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,f];u+=s[0]+s[1],Nt.arraycopy(s,2,s,0,l-1),s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,c=!c}throw new ge},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],c=fn.patternMatchVariance(n,a,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new ge},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(fn),cF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Rc=(function(t){cF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var c=a-(o-a);c>=0&&(r=n.isRange(c,a,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Ae;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Ae;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,o){return this.findGuardPattern(n,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(n,r,i,o,s){var a=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var c=0,l=r,u=o.length,f=i,d=r;d<a;d++)if(n.get(d)!==f)s[c]++;else{if(c===u-1){if(fn.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([l,d]);l+=s[0]+s[1];for(var h=s.slice(2,s.length),p=0;p<c-1;p++)s[p]=h[p];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,f=!f}throw new ge},e.decodeDigit=function(n,r,i,o){this.recordPattern(n,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,c=o.length,l=0;l<c;l++){var u=o[l],f=fn.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);f<s&&(s=f,a=l)}if(a>=0)return a;throw new ge},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(fn),lF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uF=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),c=[new Me((r[0]+r[1])/2,e),new Me(o,e)],l=new Kn(s,null,0,c,Be.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=n[1],l=0,u=0;u<5&&c<a;u++){var f=Rc.decodeDigit(e,s,c,Rc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,lF(s)),h=d.next();!h.done;h=d.next()){var p=h.value;c+=p}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}f>=10&&(l|=1<<4-u),u!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new ge;var g=this.determineCheckDigit(l);if(t.extensionChecksum(r.toString())!==g)throw new ge;return c},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new ge},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[Pn.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return n+i+"."+s},t})(),fF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dF=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),c=[new Me((r[0]+r[1])/2,e),new Me(o,e)],l=new Kn(s,null,0,c,Be.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=n[1],l=0,u=0;u<2&&c<a;u++){var f=Rc.decodeDigit(e,s,c,Rc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,fF(s)),h=d.next();!h.done;h=d.next()){var p=h.value;c+=p}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}f>=10&&(l|=1<<1-u),u!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new ge;if(parseInt(r.toString())%4!==l)throw new ge;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Pn.ISSUE_NUMBER,parseInt(e)]])},t})(),hF=(function(){function t(){}return t.decodeRow=function(e,n,r){var i=Rc.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new uF;return o.decodeRow(e,n,i)}catch{var s=new dF;return s.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),pF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),an=(function(t){pF(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return n}return e.prototype.decodeRow=function(n,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(kt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new Me((o[0]+o[1])/2,n);s.foundPossibleResultPoint(a)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),l=c.rowOffset,u=c.resultString;if(s!=null){var f=new Me(l,n);s.foundPossibleResultPoint(f)}var d=e.decodeEnd(r,l);if(s!=null){var h=new Me((d[0]+d[1])/2,n);s.foundPossibleResultPoint(h)}var p=d[1],g=p+(p-d[0]);if(g>=r.getSize()||!r.isRange(p,g,!1))throw new ge;var y=u.toString();if(y.length<8)throw new Ae;if(!e.checkChecksum(y))throw new en;var v=(o[1]+o[0])/2,m=(d[1]+d[0])/2,w=this.getBarcodeFormat(),E=[new Me(v,n),new Me(m,n)],S=new Kn(y,null,0,E,w,new Date().getTime()),O=0;try{var F=hF.decodeRow(n,r,d[1]);S.putMetadata(Pn.UPC_EAN_EXTENSION,F.getText()),S.putAllMetadata(F.getResultMetadata()),S.addResultPoints(F.getResultPoints()),O=F.getText().length}catch{}var $=i==null?null:i.get(kt.ALLOWED_EAN_EXTENSIONS);if($!=null){var U=!1;for(var B in $)if(O.toString()===B){U=!0;break}if(!U)throw new ge}return w===Be.EAN_13||Be.UPC_A,S},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Ae;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Ae;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Rc),gF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Bb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q1=(function(t){gF(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a,c,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var u=n.getSize(),f=r[1],d=0,h=0;h<6&&f<u;h++){var p=an.decodeDigit(n,l,f,an.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var g=(o=void 0,Bb(l)),y=g.next();!y.done;y=g.next()){var v=y.value;f+=v}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}p>=10&&(d|=1<<5-h)}i=e.determineFirstDigit(i,d);var m=an.findGuardPattern(n,f,!0,an.MIDDLE_PATTERN,new Int32Array(an.MIDDLE_PATTERN.length).fill(0));f=m[1];for(var h=0;h<6&&f<u;h++){var p=an.decodeDigit(n,l,f,an.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var w=(a=void 0,Bb(l)),E=w.next();!E.done;E=w.next()){var v=E.value;f+=v}}catch(F){a={error:F}}finally{try{E&&!E.done&&(c=w.return)&&c.call(w)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return Be.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n,n;throw new ge},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(an),vF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Lb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fb=(function(t){vF(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a,c,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var u=n.getSize(),f=r[1],d=0;d<4&&f<u;d++){var h=an.decodeDigit(n,l,f,an.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var p=(o=void 0,Lb(l)),g=p.next();!g.done;g=p.next()){var y=g.value;f+=y}}catch(E){o={error:E}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}}var v=an.findGuardPattern(n,f,!0,an.MIDDLE_PATTERN,new Int32Array(an.MIDDLE_PATTERN.length).fill(0));f=v[1];for(var d=0;d<4&&f<u;d++){var h=an.decodeDigit(n,l,f,an.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var m=(a=void 0,Lb(l)),w=m.next();!w.done;w=m.next()){var y=w.value;f+=y}}catch(O){a={error:O}}finally{try{w&&!w.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return Be.EAN_8},e})(an),yF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ub=(function(t){yF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new q1,n}return e.prototype.getBarcodeFormat=function(){return Be.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new Kn(r.substring(1),null,null,n.getResultPoints(),Be.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new ge},e.prototype.reset=function(){this.ean13Reader.reset()},e})(an),mF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),wF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hb=(function(t){mF(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a=this.decodeMiddleCounters.map(function(y){return y});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=n.getSize(),l=r[1],u=0,f=0;f<6&&l<c;f++){var d=e.decodeDigit(n,a,l,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var h=(o=void 0,wF(a)),p=h.next();!p.done;p=h.next()){var g=p.value;l+=g}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}d>=10&&(u|=1<<5-f)}return e.determineNumSysAndCheckDigit(new Ye(i),u),l},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return an.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){n.insert(0,"0"+i),n.append("0"+o);return}throw ge.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Be.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Ye;i.append(n.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(an),bF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),$b=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vp=(function(t){bF(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(kt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Be.EAN_13)>-1&&o.push(new q1),i.indexOf(Be.UPC_A)>-1&&o.push(new Ub),i.indexOf(Be.EAN_8)>-1&&o.push(new Fb),i.indexOf(Be.UPC_E)>-1&&o.push(new Hb)),o.length===0&&(o.push(new q1),o.push(new Ub),o.push(new Fb),o.push(new Hb)),r.readers=o,r}return e.prototype.decodeRow=function(n,r,i){var o,s;try{for(var a=$b(this.readers),c=a.next();!c.done;c=a.next()){var l=c.value;try{var u=l.decodeRow(n,r,i),f=u.getBarcodeFormat()===Be.EAN_13&&u.getText().charAt(0)==="0",d=i==null?null:i.get(kt.POSSIBLE_FORMATS),h=d==null||d.includes(Be.UPC_A);if(f&&h){var p=u.getRawBytes(),g=new Kn(u.getText().substring(1),p,p?p.length:null,u.getResultPoints(),Be.UPC_A);return g.putAllMetadata(u.getResultMetadata()),g}return u}catch{}}}catch(y){o={error:y}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new ge},e.prototype.reset=function(){var n,r;try{for(var i=$b(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e})(fn),EF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),xF=(function(t){EF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var o=this.getValidRowData(r);if(!o)throw new ge;var s=this.codaBarDecodeRow(o.row);if(!s)throw new ge;return new Kn(s,null,0,[new Me(o.left,n),new Me(o.right,n)],Be.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],c=1,l=1;l<r.length;l++)r[l]===a?c++:(a=r[l],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(c,l){return(c+l)/2},0));n.length>0;){var o=n.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e})(fn),AF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),_F=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},js=(function(t){AF(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(fn.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ge},e.count=function(n){return ct.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]>o&&(o=r[s],i=s);n[i]++},e.decrement=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]<o&&(o=r[s],i=s);n[i]--},e.isFinderPattern=function(n){var r,i,o=n[0]+n[1],s=o+n[2]+n[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;try{for(var u=_F(n),f=u.next();!f.done;f=u.next()){var d=f.value;d>l&&(l=d),d<c&&(c=d)}}catch(h){r={error:h}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return l<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(fn),qd=(function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),DS=(function(){function t(e,n,r,i,o){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Me(r,o)),this.resultPoints.push(new Me(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t})(),CF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wa=(function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,o,s=0;try{for(var a=CF(e),c=a.next();!c.done;c=a.next()){var l=c.value;s+=l}}catch(m){i={error:m}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var u=0,f=0,d=e.length,h=0;h<d-1;h++){var p=void 0;for(p=1,f|=1<<h;p<e[h];p++,f&=~(1<<h)){var g=t.combins(s-p-1,d-h-2);if(r&&f===0&&s-p-(d-h-1)>=d-h-1&&(g-=t.combins(s-p-(d-h),d-h-2)),d-h-1>1){for(var y=0,v=s-p-(d-h-2);v>n;v--)y+=t.combins(s-p-v-1,d-h-3);g-=y*(d-1-h)}else s-p>n&&g--;u+=g}s-=p}return u},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},t})(),SF=(function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new En(r),o=0,s=e[0],a=s.getRightChar().getValue(),c=11;c>=0;--c)(a&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var l=e[c],u=l.getLeftChar().getValue(),f=11;f>=0;--f)(u&1<<f)!==0&&i.set(o),o++;if(l.getRightChar()!==null)for(var d=l.getRightChar().getValue(),f=11;f>=0;--f)(d&1<<f)!==0&&i.set(o),o++}return i},t})(),Ls=(function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),Fv=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),IF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),ni=(function(t){IF(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Fv),TF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Fs=(function(t){TF(e,t);function e(n,r,i){var o=t.call(this,n)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Fv),OF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ra=(function(t){OF(e,t);function e(n,r,i){var o=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new Ae;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Fv),yf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RF=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,o,s,a,c,l;if(!e)return null;if(e.length<2)throw new ge;var u=e.substring(0,2);try{for(var f=yf(t.TWO_DIGIT_DATA_LENGTH),d=f.next();!d.done;d=f.next()){var h=d.value;if(h[0]===u)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(O){n={error:O}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(e.length<3)throw new ge;var p=e.substring(0,3);try{for(var g=yf(t.THREE_DIGIT_DATA_LENGTH),y=g.next();!y.done;y=g.next()){var h=y.value;if(h[0]===p)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(O){i={error:O}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}try{for(var v=yf(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),m=v.next();!m.done;m=v.next()){var h=m.value;if(h[0]===p)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(O){s={error:O}}finally{try{m&&!m.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}if(e.length<4)throw new ge;var w=e.substring(0,4);try{for(var E=yf(t.FOUR_DIGIT_DATA_LENGTH),S=E.next();!S.done;S=E.next()){var h=S.value;if(h[0]===w)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(O){c={error:O}}finally{try{S&&!S.done&&(l=E.return)&&l.call(E)}finally{if(c)throw c.error}}throw new ge},t.processFixedAI=function(e,n,r){if(r.length<e)throw new ge;var i=r.substring(0,e);if(r.length<e+n)throw new ge;var o=r.substring(e,e+n),s=r.substring(e+n),a="("+i+")"+o,c=t.parseFieldsInGeneralPurpose(s);return c==null?a:a+c},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),o;r.length<e+n?o=r.length:o=e+n;var s=r.substring(e,o),a=r.substring(o),c="("+i+")"+s,l=t.parseFieldsInGeneralPurpose(a);return l==null?c:c+l},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),Zf=(function(){function t(e){this.buffer=new Ye,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=RF.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new Ra(this.information.getSize(),Ra.FNC1,Ra.FNC1):new Ra(this.information.getSize(),n-1,Ra.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new Ra(e+7,i,o)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,o=0;o<r;++o)e.get(n+o)&&(i|=1<<r-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Fs(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Fs(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new Fs(this.current.getPosition(),this.buffer.toString()):n=new Fs(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ls(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new Fs(this.current.getPosition(),this.buffer.toString());return new Ls(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ls(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Fs(this.current.getPosition(),this.buffer.toString());return new Ls(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ls(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Fs(this.current.getPosition(),this.buffer.toString());return new Ls(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ls(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new ni(e+5,ni.FNC1);if(n>=5&&n<15)return new ni(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ni(e+7,""+(r+1));if(r>=90&&r<116)return new ni(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new Ae}return new ni(e+8,o)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new ni(e+5,ni.FNC1);if(n>=5&&n<15)return new ni(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ni(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Iu("Decoding invalid alphanumeric value: "+r)}return new ni(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t})(),BS=(function(){function t(e){this.information=e,this.generalDecoder=new Zf(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),PF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hi=(function(t){PF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&n.append("0"),s/10===0&&n.append("0"),n.append(s)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,o=0;o<13;o++){var s=n.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e})(BS),NF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),kF=(function(t){NF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new Ye;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(hi),MF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),DF=(function(t){MF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new Ye;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(BS),BF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Qf=(function(t){BF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,o);for(var s=this.checkWeight(o),a=1e5,c=0;c<5;++c)s/a===0&&n.append("0"),a/=10;n.append(s)},e})(hi),LF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),LS=(function(t){LF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Qf.GTIN_SIZE+e.WEIGHT_SIZE)throw new ge;var n=new Ye;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+Qf.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Qf),FF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),UF=(function(t){FF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e})(LS),HF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),$F=(function(t){HF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e})(LS),VF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),jF=(function(t){VF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+hi.GTIN_SIZE)throw new ge;var n=new Ye;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+hi.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+hi.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(hi),KF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),GF=(function(t){KF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+hi.GTIN_SIZE)throw new ge;var n=new Ye;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+hi.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+hi.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+hi.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(o.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(hi),zF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),jo=(function(t){zF(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ge;var n=new Ye;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&n.append("0"),n.append(a),s/10===0&&n.append("0"),n.append(s),o/10===0&&n.append("0"),n.append(o)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Qf);function WF(t){try{if(t.get(1))return new kF(t);if(!t.get(2))return new DF(t);var e=Zf.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new UF(t);case 5:return new $F(t)}var n=Zf.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new jF(t);case 13:return new GF(t)}var r=Zf.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new jo(t,"310","11");case 57:return new jo(t,"320","11");case 58:return new jo(t,"310","13");case 59:return new jo(t,"320","13");case 60:return new jo(t,"310","15");case 61:return new jo(t,"320","15");case 62:return new jo(t,"310","17");case 63:return new jo(t,"320","17")}}catch(i){throw console.log(i),new Iu("unknown decoder: "+t)}}var Vb=(function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),qF=(function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,o){n.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},t})(),YF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ko=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XF=(function(t){YF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(a){if(a instanceof ge){if(!this.pairs.length)throw new ge;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(n,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ge},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,Ko(n)),l=c.next();!l.done;l=c.next()){var u=l.value;this.pairs.push(u.getPairs())}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(n);f.push(a);try{return this.checkRows(f,s+1)}catch(d){console.log(d)}}}throw new ge},e.isValidSequence=function(n){var r,i;try{for(var o=Ko(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(n.length>a.length)){for(var c=!0,l=0;l<n.length;l++)if(n[l].getFinderPattern().getValue()!==a[l]){c=!1;break}if(c)return!0}}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>n){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new qF(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,o,s,a,c,l;try{for(var u=Ko(r),f=u.next();!f.done;f=u.next()){var d=f.value;if(d.getPairs().length!==n.length){var h=!0;try{for(var p=(s=void 0,Ko(d.getPairs())),g=p.next();!g.done;g=p.next()){var y=g.value,v=!1;try{for(var m=(c=void 0,Ko(n)),w=m.next();!w.done;w=m.next()){var E=w.value;if(Vb.equals(y,E)){v=!0;break}}}catch(S){c={error:S}}finally{try{w&&!w.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}v||(h=!1)}}catch(S){s={error:S}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}}}}catch(S){i={error:S}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,o,s,a,c,l;try{for(var u=Ko(r),f=u.next();!f.done;f=u.next()){var d=f.value,h=!0;try{for(var p=(s=void 0,Ko(n)),g=p.next();!g.done;g=p.next()){var y=g.value,v=!1;try{for(var m=(c=void 0,Ko(d.getPairs())),w=m.next();!w.done;w=m.next()){var E=w.value;if(y.equals(E)){v=!0;break}}}catch(S){c={error:S}}finally{try{w&&!w.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}if(!v){h=!1;break}}}catch(S){s={error:S}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}if(h)return!0}}catch(S){i={error:S}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=SF.buildBitArray(n),i=WF(r),o=i.parseInformation(),s=n[0].getFinderPattern().getResultPoints(),a=n[n.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],a[0],a[1]];return new Kn(o,null,null,c,Be.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var c=this.pairs.get(a);o+=c.getLeftChar().getChecksumPortion(),s++;var l=c.getRightChar();l!=null&&(o+=l.getChecksumPortion(),s++)}o%=211;var u=211*(s-4)+o;return u===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,c=-1;do this.findNextPair(n,r,c),s=this.parseFoundFinderPattern(n,i,o),s===null?c=e.getNextSecondBar(n,this.startEnd[0]):a=!1;while(a);var l=this.decodeDataCharacter(n,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ge;var u;try{u=this.decodeDataCharacter(n,s,o,!1)}catch(f){u=null,console.log(f)}return new Vb(l,u,s,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=n.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var c=r[r.length-1];a=c.getFinderPattern().getStartEnd()[1]}var l=r.length%2!==0;this.startFromEven&&(l=!l);for(var u=!1;a<s&&(u=!n.get(a),!!u);)a++;for(var f=0,d=a,h=a;h<s;h++)if(n.get(h)!==u)o[f]++;else{if(f===3){if(l&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=d,this.startEnd[1]=h;return}l&&e.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,u=!u}throw new ge},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var o=n[i];n[i]=n[r-i-1],n[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(n,r,i){var o,s,a;if(i){for(var c=this.startEnd[0]-1;c>=0&&!n.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,a=this.startEnd[1]}else s=this.startEnd[0],a=n.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var l=this.getDecodeFinderCounters();Nt.arraycopy(l,0,l,1,l.length-1),l[0]=o;var u;try{u=this.parseFinderValue(l,e.FINDER_PATTERNS)}catch{return null}return new DS(u,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(n,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(n,r.getStartEnd()[0],s);else{e.recordPattern(n,r.getStartEnd()[1],s);for(var c=0,l=s.length-1;c<l;c++,l--){var u=s[c];s[c]=s[l],s[l]=u}}var f=17,d=ct.sum(new Int32Array(s))/f,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new ge;for(var p=this.getOddCounts(),g=this.getEvenCounts(),y=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var m=1*s[c]/d,w=m+.5;if(w<1){if(m<.3)throw new ge;w=1}else if(w>8){if(m>8.7)throw new ge;w=8}var E=c/2;(c&1)===0?(p[E]=w,y[E]=m-w):(g[E]=w,v[E]=m-w)}this.adjustOddEvenCounts(f);for(var S=4*r.getValue()+(i?0:2)+(o?0:1)-1,O=0,F=0,c=p.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var $=e.WEIGHTS[S][2*c];F+=p[c]*$}O+=p[c]}for(var U=0,c=g.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var $=e.WEIGHTS[S][2*c+1];U+=g[c]*$}var B=F+U;if((O&1)!==0||O>13||O<4)throw new ge;var Y=(13-O)/2,j=e.SYMBOL_WIDEST[Y],L=9-j,I=Wa.getRSSvalue(p,j,!0),x=Wa.getRSSvalue(g,L,!1),P=e.EVEN_TOTAL_SUBSET[Y],G=e.GSUM[Y],b=I*P+x+G;return new qd(b,B)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=ct.sum(new Int32Array(this.getOddCounts())),i=ct.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);var l=r+i-n,u=(r&1)===1,f=(i&1)===0;if(l===1)if(u){if(f)throw new ge;s=!0}else{if(!f)throw new ge;c=!0}else if(l===-1)if(u){if(f)throw new ge;o=!0}else{if(!f)throw new ge;a=!0}else if(l===0){if(u){if(!f)throw new ge;r<i?(o=!0,c=!0):(s=!0,a=!0)}else if(f)throw new ge}else throw new ge;if(o){if(s)throw new ge;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(c)throw new ge;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(js),ZF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),QF=(function(t){ZF(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(qd),JF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),yp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jb=(function(t){JF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var o,s,a,c,l=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,l),r.reverse();var u=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,u),r.reverse();try{for(var f=yp(this.possibleLeftPairs),d=f.next();!d.done;d=f.next()){var h=d.value;if(h.getCount()>1)try{for(var p=(a=void 0,yp(this.possibleRightPairs)),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1&&e.checkChecksum(h,y))return e.constructResult(h,y)}}catch(v){a={error:v}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(a)throw a.error}}}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}throw new ge},e.addOrTally=function(n,r){var i,o;if(r!=null){var s=!1;try{for(var a=yp(n),c=a.next();!c.done;c=a.next()){var l=c.value;if(l.getValue()===r.getValue()){l.incrementCount(),s=!0;break}}}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),o=new String(i).toString(),s=new Ye,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var c=0,a=0;a<13;a++){var l=s.charAt(a).charCodeAt(0)-48;c+=(a&1)===0?3*l:l}c=10-c%10,c===10&&(c=0),s.append(c.toString());var u=n.getFinderPattern().getResultPoints(),f=r.getFinderPattern().getResultPoints();return new Kn(s.toString(),null,0,[u[0],u[1],f[0],f[1]],Be.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(n,r,i,o){try{var s=this.findFinderPattern(n,r),a=this.parseFoundFinderPattern(n,i,r,s),c=o==null?null:o.get(kt.NEED_RESULT_POINT_CALLBACK);if(c!=null){var l=(s[0]+s[1])/2;r&&(l=n.getSize()-1-l),c.foundPossibleResultPoint(new Me(l,i))}var u=this.decodeDataCharacter(n,a,!0),f=this.decodeDataCharacter(n,a,!1);return new QF(1597*u.getValue()+f.getValue(),u.getChecksumPortion()+4*f.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)fn.recordPatternInReverse(n,r.getStartEnd()[0],o);else{fn.recordPattern(n,r.getStartEnd()[1]+1,o);for(var a=0,c=o.length-1;a<c;a++,c--){var l=o[a];o[a]=o[c],o[c]=l}}for(var u=i?16:15,f=ct.sum(new Int32Array(o))/u,d=this.getOddCounts(),h=this.getEvenCounts(),p=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var y=o[a]/f,v=Math.floor(y+.5);v<1?v=1:v>8&&(v=8);var m=Math.floor(a/2);(a&1)===0?(d[m]=v,p[m]=y-v):(h[m]=v,g[m]=y-v)}this.adjustOddEvenCounts(i,u);for(var w=0,E=0,a=d.length-1;a>=0;a--)E*=9,E+=d[a],w+=d[a];for(var S=0,O=0,a=h.length-1;a>=0;a--)S*=9,S+=h[a],O+=h[a];var F=E+3*S;if(i){if((w&1)!==0||w>12||w<4)throw new ge;var $=(12-w)/2,U=e.OUTSIDE_ODD_WIDEST[$],B=9-U,Y=Wa.getRSSvalue(d,U,!1),j=Wa.getRSSvalue(h,B,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[$],I=e.OUTSIDE_GSUM[$];return new qd(Y*L+j+I,F)}else{if((O&1)!==0||O>10||O<4)throw new ge;var $=(10-O)/2,U=e.INSIDE_ODD_WIDEST[$],B=9-U,Y=Wa.getRSSvalue(d,U,!0),j=Wa.getRSSvalue(h,B,!1),x=e.INSIDE_ODD_TOTAL_SUBSET[$],I=e.INSIDE_GSUM[$];return new qd(j*x+Y+I,F)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=n.getSize(),s=!1,a=0;a<o&&(s=!n.get(a),r!==s);)a++;for(var c=0,l=a,u=a;u<o;u++)if(n.get(u)!==s)i[c]++;else{if(c===3){if(js.isFinderPattern(i))return[l,u];l+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new ge},e.prototype.parseFoundFinderPattern=function(n,r,i,o){for(var s=n.get(o[0]),a=o[0]-1;a>=0&&s!==n.get(a);)a--;a++;var c=o[0]-a,l=this.getDecodeFinderCounters(),u=new Int32Array(l.length);Nt.arraycopy(l,0,u,1,l.length-1),u[0]=c;var f=this.parseFinderValue(u,e.FINDER_PATTERNS),d=a,h=o[1];return i&&(d=n.getSize()-1-d,h=n.getSize()-1-h),new DS(f,[a,o[1]],d,h,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=ct.sum(new Int32Array(this.getOddCounts())),o=ct.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,c=!1,l=!1;n?(i>12?a=!0:i<4&&(s=!0),o>12?l=!0:o<4&&(c=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?l=!0:o<4&&(c=!0));var u=i+o-r,f=(i&1)===(n?1:0),d=(o&1)===1;if(u===1)if(f){if(d)throw new ge;a=!0}else{if(!d)throw new ge;l=!0}else if(u===-1)if(f){if(d)throw new ge;s=!0}else{if(!d)throw new ge;c=!0}else if(u===0){if(f){if(!d)throw new ge;i<o?(s=!0,l=!0):(a=!0,c=!0)}else if(d)throw new ge}else throw new ge;if(s){if(a)throw new ge;js.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&js.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(l)throw new ge;js.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&js.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(js),eU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),qa=(function(t){eU(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(kt.POSSIBLE_FORMATS):null,o=n&&n.get(kt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=n&&n.get(kt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Be.EAN_13)||i.includes(Be.UPC_A)||i.includes(Be.EAN_8)||i.includes(Be.UPC_E))&&r.readers.push(new vp(n)),i.includes(Be.CODE_39)&&r.readers.push(new kb(o,s)),i.includes(Be.CODE_93)&&r.readers.push(new Mb),i.includes(Be.CODE_128)&&r.readers.push(new Nb),i.includes(Be.ITF)&&r.readers.push(new Db),i.includes(Be.CODABAR)&&r.readers.push(new xF),i.includes(Be.RSS_14)&&r.readers.push(new jb),i.includes(Be.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new XF))),r.readers.length===0&&(r.readers.push(new vp(n)),r.readers.push(new kb),r.readers.push(new Mb),r.readers.push(new vp(n)),r.readers.push(new Nb),r.readers.push(new Db),r.readers.push(new jb)),r}return e.prototype.decodeRow=function(n,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(n,r,i)}catch{}throw new ge},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e})(fn),tU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){tU(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new qa(r),n,r)||this}return e})(Bc);var Kb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt=(function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),ut=(function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),nU=(function(){function t(e,n,r,i,o,s){var a,c;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var l=0,u=s.getECCodewords(),f=s.getECBlocks();try{for(var d=Kb(f),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p.getCount()*(p.getDataCodewords()+u)}}catch(g){a={error:g}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if((e&1)!==0||(n&1)!==0)throw new Ae;try{for(var o=Kb(t.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===n)return a}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new Ae},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new pt(5,new ut(1,3))),new t(2,12,12,10,10,new pt(7,new ut(1,5))),new t(3,14,14,12,12,new pt(10,new ut(1,8))),new t(4,16,16,14,14,new pt(12,new ut(1,12))),new t(5,18,18,16,16,new pt(14,new ut(1,18))),new t(6,20,20,18,18,new pt(18,new ut(1,22))),new t(7,22,22,20,20,new pt(20,new ut(1,30))),new t(8,24,24,22,22,new pt(24,new ut(1,36))),new t(9,26,26,24,24,new pt(28,new ut(1,44))),new t(10,32,32,14,14,new pt(36,new ut(1,62))),new t(11,36,36,16,16,new pt(42,new ut(1,86))),new t(12,40,40,18,18,new pt(48,new ut(1,114))),new t(13,44,44,20,20,new pt(56,new ut(1,144))),new t(14,48,48,22,22,new pt(68,new ut(1,174))),new t(15,52,52,24,24,new pt(42,new ut(2,102))),new t(16,64,64,14,14,new pt(56,new ut(2,140))),new t(17,72,72,16,16,new pt(36,new ut(4,92))),new t(18,80,80,18,18,new pt(48,new ut(4,114))),new t(19,88,88,20,20,new pt(56,new ut(4,144))),new t(20,96,96,22,22,new pt(68,new ut(4,174))),new t(21,104,104,24,24,new pt(56,new ut(6,136))),new t(22,120,120,18,18,new pt(68,new ut(6,175))),new t(23,132,132,20,20,new pt(62,new ut(8,163))),new t(24,144,144,22,22,new pt(62,new ut(8,156),new ut(2,155))),new t(25,8,18,6,16,new pt(7,new ut(1,5))),new t(26,8,32,6,14,new pt(11,new ut(1,10))),new t(27,12,26,10,24,new pt(14,new ut(1,16))),new t(28,12,36,10,16,new pt(18,new ut(1,22))),new t(29,16,36,14,16,new pt(24,new ut(1,32))),new t(30,16,48,14,22,new pt(28,new ut(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),rU=(function(){function t(e){var n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new Ae;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Wi(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return nU.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,c=!1,l=!1,u=!1;do if(r===o&&i===0&&!a)e[n++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[n++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!l)e[n++]=this.readCorner3(o,s)&255,r-=2,i+=2,l=!0;else if(r===o-2&&i===0&&(s&7)===4&&!u)e[n++]=this.readCorner4(o,s)&255,r-=2,i+=2,u=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(n!==this.version.getTotalCodewords())throw new Ae;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var o=0;return this.readModule(e-2,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n,r,i)&&(o|=1),o<<=1,this.readModule(e,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e,n,r,i)&&(o|=1),o},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new Le("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=n/i|0,a=r/o|0,c=s*i,l=a*o,u=new Wi(l,c),f=0;f<s;++f)for(var d=f*i,h=0;h<a;++h)for(var p=h*o,g=0;g<i;++g)for(var y=f*(i+2)+1+g,v=d+g,m=0;m<o;++m){var w=h*(o+2)+1+m;if(e.get(w,y)){var E=p+m;u.set(E,v)}}return u},t})(),Gb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iU=(function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,o,s,a=n.getECBlocks(),c=0,l=a.getECBlocks();try{for(var u=Gb(l),f=u.next();!f.done;f=u.next()){var d=f.value;c+=d.getCount()}}catch(I){r={error:I}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}var h=new Array(c),p=0;try{for(var g=Gb(l),y=g.next();!y.done;y=g.next())for(var d=y.value,v=0;v<d.getCount();v++){var m=d.getDataCodewords(),w=a.getECCodewords()+m;h[p++]=new t(m,new Uint8Array(w))}}catch(I){o={error:I}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}for(var E=h[0].codewords.length,S=E-a.getECCodewords(),O=S-1,F=0,v=0;v<O;v++)for(var $=0;$<p;$++)h[$].codewords[v]=e[F++];for(var U=n.getVersionNumber()===24,B=U?8:p,$=0;$<B;$++)h[$].codewords[S-1]=e[F++];for(var Y=h[0].codewords.length,v=S;v<Y;v++)for(var $=0;$<p;$++){var j=U?($+8)%p:$,L=U&&j>7?v-1:v;h[j].codewords[L]=e[F++]}if(F!==e.length)throw new Le;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),FS=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Le(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,c=s-a,l=255>>8-a<<c;n=(o[i]&l)>>c,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,l=255>>c<<c;n=n<<e|(o[i]&l)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),on;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(on||(on={}));var oU=(function(){function t(){}return t.decode=function(e){var n=new FS(e),r=new Ye,i=new Ye,o=new Array,s=on.ASCII_ENCODE;do if(s===on.ASCII_ENCODE)s=this.decodeAsciiSegment(n,r,i);else{switch(s){case on.C40_ENCODE:this.decodeC40Segment(n,r);break;case on.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case on.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case on.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case on.BASE256_ENCODE:this.decodeBase256Segment(n,r,o);break;default:throw new Ae}s=on.ASCII_ENCODE}while(s!==on.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new Hh(e,r.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new Ae;if(o<=128)return i&&(o+=128),n.append(String.fromCharCode(o-1)),on.ASCII_ENCODE;if(o===129)return on.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&n.append("0"),n.append(""+s)}else switch(o){case 230:return on.C40_ENCODE;case 231:return on.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return on.ANSIX12_ENCODE;case 239:return on.TEXT_ENCODE;case 240:return on.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new Ae;break}}while(e.available()>0);return on.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var l=this.C40_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}else throw new Ae;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var l=this.C40_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new Ae}o=0;break;case 3:r?(n.append(String.fromCharCode(c+224)),r=!1):n.append(String.fromCharCode(c+96)),o=0;break;default:throw new Ae}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var l=this.TEXT_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}else throw new Ae;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var l=this.TEXT_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new Ae}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var l=this.TEXT_SHIFT3_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l),o=0}else throw new Ae;break;default:throw new Ae}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(s<14)n.append(String.fromCharCode(s+44));else if(s<40)n.append(String.fromCharCode(s+51));else throw new Ae;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new Ae;for(var a=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new Ae;a[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{n.append(Xr.decode(a,rt.ISO88591))}catch(l){throw new Iu("Platform does not support required encoding: "+l.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),sU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aU=(function(){function t(){this.rsDecoder=new $h(gr.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new rU(e),o=i.getVersion(),s=i.readCodewords(),a=iU.getDataBlocks(s,o),c=0;try{for(var l=sU(a),u=l.next();!u.done;u=l.next()){var f=u.value;c+=f.getNumDataCodewords()}}catch(w){n={error:w}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}for(var d=new Uint8Array(c),h=a.length,p=0;p<h;p++){var g=a[p],y=g.getCodewords(),v=g.getNumDataCodewords();this.correctErrors(y,v);for(var m=0;m<v;m++)d[m*h+p]=y[m]}return oU.decode(d)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new en}for(var i=0;i<n;i++)e[i]=r[i]},t})(),cU=(function(){function t(e){this.image=e,this.rectangleDetector=new W1(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new ge;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],o=n[2],s=n[3],a=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(c&1)===1&&(c+=1),4*a<7*c&&4*c<7*a&&(a=c=Math.max(a,c));var l=t.sampleGrid(this.image,r,i,o,s,a,c);return new Bv(l,[r,i,o,s])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),o=(n.getY()-e.getY())/(r+1);return new Me(e.getX()+i,e.getY()+o)},t.moveAway=function(e,n,r){var i=e.getX(),o=e.getY();return i<n?i-=1:i+=1,o<r?o-=1:o+=1,new Me(i,o)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),l=this.transitionsBetween(o,n),u=s,f=[o,n,r,i];return u>a&&(u=a,f[0]=n,f[1]=r,f[2]=i,f[3]=o),u>c&&(u=c,f[0]=r,f[1]=i,f[2]=o,f[3]=n),u>l&&(f[0]=i,f[1]=o,f[2]=n,f[3]=r),f},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=t.shiftPoint(r,i,(s+1)*4),c=t.shiftPoint(i,r,(s+1)*4),l=this.transitionsBetween(a,n),u=this.transitionsBetween(c,o);return l<u?(e[0]=n,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=this.transitionsBetween(r,o),c=t.shiftPoint(n,r,(a+1)*4),l=t.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),a=this.transitionsBetween(l,o);var u=new Me(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),f=new Me(o.getX()+(n.getX()-r.getX())/(a+1),o.getY()+(n.getY()-r.getY())/(a+1));if(!this.isValid(u))return this.isValid(f)?f:null;if(!this.isValid(f))return u;var d=this.transitionsBetween(c,u)+this.transitionsBetween(l,u),h=this.transitionsBetween(c,f)+this.transitionsBetween(l,f);return d>h?u:f},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1,c=t.shiftPoint(n,r,a*4),l=t.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,a=this.transitionsBetween(l,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var u=(n.getX()+r.getX()+i.getX()+o.getX())/4,f=(n.getY()+r.getY()+i.getY()+o.getY())/4;n=t.moveAway(n,u,f),r=t.moveAway(r,u,f),i=t.moveAway(i,u,f),o=t.moveAway(o,u,f);var d,h;return c=t.shiftPoint(n,r,a*4),c=t.shiftPoint(c,o,s*4),d=t.shiftPoint(r,n,a*4),d=t.shiftPoint(d,i,s*4),l=t.shiftPoint(i,o,a*4),l=t.shiftPoint(l,r,s*4),h=t.shiftPoint(o,i,a*4),h=t.shiftPoint(h,n,s*4),[c,d,l,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,o,s,a){var c=Lv.getInstance();return c.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,n.getX(),n.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(n.getX()),s=Math.trunc(n.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var c=r;r=i,i=c,c=o,o=s,s=c}for(var l=Math.abs(o-r),u=Math.abs(s-i),f=-l/2,d=i<s?1:-1,h=r<o?1:-1,p=0,g=this.image.get(a?i:r,a?r:i),y=r,v=i;y!==o;y+=h){var m=this.image.get(a?v:y,a?y:v);if(m!==g&&(p++,g=m),f+=u,f>0){if(v===s)break;v+=d,f-=l}}return p},t})(),Yd=(function(){function t(){this.decoder=new aU}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(kt.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=t.NO_POINTS}else{var s=new cU(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),c=new Kn(r.getText(),a,8*a.length,i,Be.DATA_MATRIX,Nt.currentTimeMillis()),l=r.getByteSegments();l!=null&&c.putMetadata(Pn.BYTE_SEGMENTS,l);var u=r.getECLevel();return u!=null&&c.putMetadata(Pn.ERROR_CORRECTION_LEVEL,u),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new ge;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],c=r[0],l=(c-a+1)/i,u=(s-o+1)/i;if(l<=0||u<=0)throw new ge;var f=i/2;o+=f,a+=f;for(var d=new Wi(l,u),h=0;h<u;h++)for(var p=o+h*i,g=0;g<l;g++)e.get(a+g*i,p)&&d.set(g,h);return d},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],o=e[1];i<r&&n.get(i,o);)i++;if(i===r)throw new ge;var s=i-e[0];if(s===0)throw new ge;return s},t.NO_POINTS=[],t})(),lU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){lU(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Yd,n)||this}return e})(Bc);var Ya;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Ya||(Ya={}));var uU=(function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new qt(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Le;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Ya.L,"L",1),t.M=new t(Ya.M,"M",0),t.Q=new t(Ya.Q,"Q",3),t.H=new t(Ya.H,"H",2),t})(),fU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},US=(function(){function t(e){this.errorCorrectionLevel=uU.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return Ze.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=fU(t.FORMAT_INFO_DECODE_LOOKUP),c=a.next();!c.done;c=a.next()){var l=c.value,u=l[0];if(u===e||u===n)return new t(l[1]);var f=t.numBitsDiffering(e,u);f<o&&(s=l[1],o=f),e!==n&&(f=t.numBitsDiffering(n,u),f<o&&(s=l[1],o=f))}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),dU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},se=(function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var o=dU(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),W=(function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),hU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sa=(function(){function t(e,n){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=o;var a=0,c=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var u=hU(l),f=u.next();!f.done;f=u.next()){var d=f.value;a+=d.getCount()*(d.getDataCodewords()+c)}}catch(h){r={error:h}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Ae;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Ae}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Le;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var s=US.numBitsDiffering(e,o);s<n&&(r=i+7,n=s)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new Wi(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||n.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new se(7,new W(1,19)),new se(10,new W(1,16)),new se(13,new W(1,13)),new se(17,new W(1,9))),new t(2,Int32Array.from([6,18]),new se(10,new W(1,34)),new se(16,new W(1,28)),new se(22,new W(1,22)),new se(28,new W(1,16))),new t(3,Int32Array.from([6,22]),new se(15,new W(1,55)),new se(26,new W(1,44)),new se(18,new W(2,17)),new se(22,new W(2,13))),new t(4,Int32Array.from([6,26]),new se(20,new W(1,80)),new se(18,new W(2,32)),new se(26,new W(2,24)),new se(16,new W(4,9))),new t(5,Int32Array.from([6,30]),new se(26,new W(1,108)),new se(24,new W(2,43)),new se(18,new W(2,15),new W(2,16)),new se(22,new W(2,11),new W(2,12))),new t(6,Int32Array.from([6,34]),new se(18,new W(2,68)),new se(16,new W(4,27)),new se(24,new W(4,19)),new se(28,new W(4,15))),new t(7,Int32Array.from([6,22,38]),new se(20,new W(2,78)),new se(18,new W(4,31)),new se(18,new W(2,14),new W(4,15)),new se(26,new W(4,13),new W(1,14))),new t(8,Int32Array.from([6,24,42]),new se(24,new W(2,97)),new se(22,new W(2,38),new W(2,39)),new se(22,new W(4,18),new W(2,19)),new se(26,new W(4,14),new W(2,15))),new t(9,Int32Array.from([6,26,46]),new se(30,new W(2,116)),new se(22,new W(3,36),new W(2,37)),new se(20,new W(4,16),new W(4,17)),new se(24,new W(4,12),new W(4,13))),new t(10,Int32Array.from([6,28,50]),new se(18,new W(2,68),new W(2,69)),new se(26,new W(4,43),new W(1,44)),new se(24,new W(6,19),new W(2,20)),new se(28,new W(6,15),new W(2,16))),new t(11,Int32Array.from([6,30,54]),new se(20,new W(4,81)),new se(30,new W(1,50),new W(4,51)),new se(28,new W(4,22),new W(4,23)),new se(24,new W(3,12),new W(8,13))),new t(12,Int32Array.from([6,32,58]),new se(24,new W(2,92),new W(2,93)),new se(22,new W(6,36),new W(2,37)),new se(26,new W(4,20),new W(6,21)),new se(28,new W(7,14),new W(4,15))),new t(13,Int32Array.from([6,34,62]),new se(26,new W(4,107)),new se(22,new W(8,37),new W(1,38)),new se(24,new W(8,20),new W(4,21)),new se(22,new W(12,11),new W(4,12))),new t(14,Int32Array.from([6,26,46,66]),new se(30,new W(3,115),new W(1,116)),new se(24,new W(4,40),new W(5,41)),new se(20,new W(11,16),new W(5,17)),new se(24,new W(11,12),new W(5,13))),new t(15,Int32Array.from([6,26,48,70]),new se(22,new W(5,87),new W(1,88)),new se(24,new W(5,41),new W(5,42)),new se(30,new W(5,24),new W(7,25)),new se(24,new W(11,12),new W(7,13))),new t(16,Int32Array.from([6,26,50,74]),new se(24,new W(5,98),new W(1,99)),new se(28,new W(7,45),new W(3,46)),new se(24,new W(15,19),new W(2,20)),new se(30,new W(3,15),new W(13,16))),new t(17,Int32Array.from([6,30,54,78]),new se(28,new W(1,107),new W(5,108)),new se(28,new W(10,46),new W(1,47)),new se(28,new W(1,22),new W(15,23)),new se(28,new W(2,14),new W(17,15))),new t(18,Int32Array.from([6,30,56,82]),new se(30,new W(5,120),new W(1,121)),new se(26,new W(9,43),new W(4,44)),new se(28,new W(17,22),new W(1,23)),new se(28,new W(2,14),new W(19,15))),new t(19,Int32Array.from([6,30,58,86]),new se(28,new W(3,113),new W(4,114)),new se(26,new W(3,44),new W(11,45)),new se(26,new W(17,21),new W(4,22)),new se(26,new W(9,13),new W(16,14))),new t(20,Int32Array.from([6,34,62,90]),new se(28,new W(3,107),new W(5,108)),new se(26,new W(3,41),new W(13,42)),new se(30,new W(15,24),new W(5,25)),new se(28,new W(15,15),new W(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new se(28,new W(4,116),new W(4,117)),new se(26,new W(17,42)),new se(28,new W(17,22),new W(6,23)),new se(30,new W(19,16),new W(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new se(28,new W(2,111),new W(7,112)),new se(28,new W(17,46)),new se(30,new W(7,24),new W(16,25)),new se(24,new W(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new se(30,new W(4,121),new W(5,122)),new se(28,new W(4,47),new W(14,48)),new se(30,new W(11,24),new W(14,25)),new se(30,new W(16,15),new W(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new se(30,new W(6,117),new W(4,118)),new se(28,new W(6,45),new W(14,46)),new se(30,new W(11,24),new W(16,25)),new se(30,new W(30,16),new W(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new se(26,new W(8,106),new W(4,107)),new se(28,new W(8,47),new W(13,48)),new se(30,new W(7,24),new W(22,25)),new se(30,new W(22,15),new W(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new se(28,new W(10,114),new W(2,115)),new se(28,new W(19,46),new W(4,47)),new se(28,new W(28,22),new W(6,23)),new se(30,new W(33,16),new W(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new se(30,new W(8,122),new W(4,123)),new se(28,new W(22,45),new W(3,46)),new se(30,new W(8,23),new W(26,24)),new se(30,new W(12,15),new W(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new W(3,117),new W(10,118)),new se(28,new W(3,45),new W(23,46)),new se(30,new W(4,24),new W(31,25)),new se(30,new W(11,15),new W(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new W(7,116),new W(7,117)),new se(28,new W(21,45),new W(7,46)),new se(30,new W(1,23),new W(37,24)),new se(30,new W(19,15),new W(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new W(5,115),new W(10,116)),new se(28,new W(19,47),new W(10,48)),new se(30,new W(15,24),new W(25,25)),new se(30,new W(23,15),new W(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new W(13,115),new W(3,116)),new se(28,new W(2,46),new W(29,47)),new se(30,new W(42,24),new W(1,25)),new se(30,new W(23,15),new W(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new W(17,115)),new se(28,new W(10,46),new W(23,47)),new se(30,new W(10,24),new W(35,25)),new se(30,new W(19,15),new W(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new W(17,115),new W(1,116)),new se(28,new W(14,46),new W(21,47)),new se(30,new W(29,24),new W(19,25)),new se(30,new W(11,15),new W(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new W(13,115),new W(6,116)),new se(28,new W(14,46),new W(23,47)),new se(30,new W(44,24),new W(7,25)),new se(30,new W(59,16),new W(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new W(12,121),new W(7,122)),new se(28,new W(12,47),new W(26,48)),new se(30,new W(39,24),new W(14,25)),new se(30,new W(22,15),new W(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new W(6,121),new W(14,122)),new se(28,new W(6,47),new W(34,48)),new se(30,new W(46,24),new W(10,25)),new se(30,new W(2,15),new W(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new W(17,122),new W(4,123)),new se(28,new W(29,46),new W(14,47)),new se(30,new W(49,24),new W(10,25)),new se(30,new W(24,15),new W(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new W(4,122),new W(18,123)),new se(28,new W(13,46),new W(32,47)),new se(30,new W(48,24),new W(14,25)),new se(30,new W(42,15),new W(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new W(20,117),new W(4,118)),new se(28,new W(40,47),new W(7,48)),new se(30,new W(43,24),new W(22,25)),new se(30,new W(10,15),new W(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new W(19,118),new W(6,119)),new se(28,new W(18,47),new W(31,48)),new se(30,new W(34,24),new W(34,25)),new se(30,new W(20,15),new W(61,16)))],t})(),pn;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(pn||(pn={}));var zb=(function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[pn.DATA_MASK_000,new t(pn.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[pn.DATA_MASK_001,new t(pn.DATA_MASK_001,function(e,n){return(e&1)===0})],[pn.DATA_MASK_010,new t(pn.DATA_MASK_010,function(e,n){return n%3===0})],[pn.DATA_MASK_011,new t(pn.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[pn.DATA_MASK_100,new t(pn.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[pn.DATA_MASK_101,new t(pn.DATA_MASK_101,function(e,n){return e*n%6===0})],[pn.DATA_MASK_110,new t(pn.DATA_MASK_110,function(e,n){return e*n%6<3})],[pn.DATA_MASK_111,new t(pn.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t})(),pU=(function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new Ae;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var n=i-8;n<i;n++)o=this.copyBit(n,8,o);if(this.parsedFormatInfo=US.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Ae},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return sa.getVersionForNumber(n);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=sa.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=sa.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new Ae},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=zb.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=n.buildFunctionPattern(),s=!0,a=new Uint8Array(n.getTotalCodewords()),c=0,l=0,u=0,f=i-1;f>0;f-=2){f===6&&f--;for(var d=0;d<i;d++)for(var h=s?i-1-d:d,p=0;p<2;p++)o.get(f-p,h)||(u++,l<<=1,this.bitMatrix.get(f-p,h)&&(l|=1),u===8&&(a[c++]=l,u=0,l=0));s=!s}if(c!==n.getTotalCodewords())throw new Ae;return a},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=zb.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,o=e.getHeight();i<o;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t})(),Wb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gU=(function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,o,s,a;if(e.length!==n.getTotalCodewords())throw new Le;var c=n.getECBlocksForLevel(r),l=0,u=c.getECBlocks();try{for(var f=Wb(u),d=f.next();!d.done;d=f.next()){var h=d.value;l+=h.getCount()}}catch(L){i={error:L}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var p=new Array(l),g=0;try{for(var y=Wb(u),v=y.next();!v.done;v=y.next())for(var h=v.value,m=0;m<h.getCount();m++){var w=h.getDataCodewords(),E=c.getECCodewordsPerBlock()+w;p[g++]=new t(w,new Uint8Array(E))}}catch(L){s={error:L}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}for(var S=p[0].codewords.length,O=p.length-1;O>=0;){var F=p[O].codewords.length;if(F===S)break;O--}O++;for(var $=S-c.getECCodewordsPerBlock(),U=0,m=0;m<$;m++)for(var B=0;B<g;B++)p[B].codewords[m]=e[U++];for(var B=O;B<g;B++)p[B].codewords[$]=e[U++];for(var Y=p[0].codewords.length,m=$;m<Y;m++)for(var B=0;B<g;B++){var j=B<O?m:m+1;p[B].codewords[j]=e[U++]}return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),$r;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})($r||($r={}));var Dt=(function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new Le;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t($r.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t($r.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t($r.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t($r.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t($r.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t($r.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t($r.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t($r.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t($r.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t($r.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),vU=(function(){function t(){}return t.decode=function(e,n,r,i){var o=new FS(e),s=new Ye,a=new Array,c=-1,l=-1;try{var u=null,f=!1,d=void 0;do{if(o.available()<4)d=Dt.TERMINATOR;else{var h=o.readBits(4);d=Dt.forBits(h)}switch(d){case Dt.TERMINATOR:break;case Dt.FNC1_FIRST_POSITION:case Dt.FNC1_SECOND_POSITION:f=!0;break;case Dt.STRUCTURED_APPEND:if(o.available()<16)throw new Ae;c=o.readBits(8),l=o.readBits(8);break;case Dt.ECI:var p=t.parseECIValue(o);if(u=cn.getCharacterSetECIByValue(p),u===null)throw new Ae;break;case Dt.HANZI:var g=o.readBits(4),y=o.readBits(d.getCharacterCountBits(n));g===t.GB2312_SUBSET&&t.decodeHanziSegment(o,s,y);break;default:var v=o.readBits(d.getCharacterCountBits(n));switch(d){case Dt.NUMERIC:t.decodeNumericSegment(o,s,v);break;case Dt.ALPHANUMERIC:t.decodeAlphanumericSegment(o,s,v,f);break;case Dt.BYTE:t.decodeByteSegment(o,s,v,u,a,i);break;case Dt.KANJI:t.decodeKanjiSegment(o,s,v);break;default:throw new Ae}break}}while(d!==Dt.TERMINATOR)}catch{throw new Ae}return new Hh(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),c,l)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new Ae;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{n.append(Xr.decode(i,rt.GB2312))}catch(c){throw new Ae(c)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new Ae;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{n.append(Xr.decode(i,rt.SHIFT_JIS))}catch(c){throw new Ae(c)}},t.decodeByteSegment=function(e,n,r,i,o,s){if(8*r>e.available())throw new Ae;for(var a=new Uint8Array(r),c=0;c<r;c++)a[c]=e.readBits(8);var l;i===null?l=rt.guessEncoding(a,s):l=i.getName();try{n.append(Xr.decode(a,l))}catch(u){throw new Ae(u)}o.push(a)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Ae;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var o=n.length();r>1;){if(e.available()<11)throw new Ae;var s=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(s/45))),n.append(t.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new Ae;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<n.length();a++)n.charAt(a)==="%"&&(a<n.length()-1&&n.charAt(a+1)==="%"?n.deleteCharAt(a+1):n.setCharAt(a,""))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new Ae;var i=e.readBits(10);if(i>=1e3)throw new Ae;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new Ae;var o=e.readBits(7);if(o>=100)throw new Ae;n.append(t.toAlphaNumericChar(Math.floor(o/10))),n.append(t.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new Ae;var s=e.readBits(4);if(s>=10)throw new Ae;n.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new Ae},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),HS=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t})(),qb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yU=(function(){function t(){this.rsDecoder=new $h(gr.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(Wi.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new pU(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,n);return o.setOther(new HS(!0)),o}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,o,s,a=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),u=gU.getDataBlocks(l,a,c),f=0;try{for(var d=qb(u),h=d.next();!h.done;h=d.next()){var p=h.value;f+=p.getNumDataCodewords()}}catch(O){r={error:O}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var g=new Uint8Array(f),y=0;try{for(var v=qb(u),m=v.next();!m.done;m=v.next()){var p=m.value,w=p.getCodewords(),E=p.getNumDataCodewords();this.correctErrors(w,E);for(var S=0;S<E;S++)g[y++]=w[S]}}catch(O){o={error:O}}finally{try{m&&!m.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}return vU.decode(g,a,c,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new en}for(var i=0;i<n;i++)e[i]=r[i]},t})(),mU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),wU=(function(t){mU(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=(this.getX()+r)/2,s=(this.getY()+n)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e})(Me),bU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EU=(function(){function t(e,n,r,i,o,s,a){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,o=this.startY+n/2,s=new Int32Array(3),a=this.image,c=0;c<n;c++){var l=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var u=e;u<i&&!a.get(u,l);)u++;for(var f=0;u<i;){if(a.get(u,l))if(f===1)s[1]++;else if(f===2){if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,l,u);if(d!==null)return d}s[0]=s[2],s[1]=1,s[2]=0,f=1}else s[++f]++;else f===1&&f++,s[f]++;u++}if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,l,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ge},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var c=e;c>=0&&o.get(n,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&!o.get(n,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(n,c)&&a[1]<=r;)a[1]++,c++;if(c===s||a[1]>r)return NaN;for(;c<s&&!o.get(n,c)&&a[2]<=r;)a[2]++,c++;if(a[2]>r)return NaN;var l=a[0]+a[1]+a[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,o,s=e[0]+e[1]+e[2],a=t.centerFromEnd(e,r),c=this.crossCheckVertical(n,a,2*e[1],s);if(!isNaN(c)){var l=(e[0]+e[1]+e[2])/3;try{for(var u=bU(this.possibleCenters),f=u.next();!f.done;f=u.next()){var d=f.value;if(d.aboutEquals(l,c,a))return d.combineEstimate(c,a,l)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}var h=new wU(a,c,l);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t})(),xU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),AU=(function(t){xU(e,t);function e(n,r,i,o){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+n)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,c,o)},e})(Me),_U=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),Zc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CU=(function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e!=null&&e.get(kt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*t.MAX_MODULES));(a<t.MIN_SKIP||n)&&(a=t.MIN_SKIP);for(var c=!1,l=new Int32Array(5),u=a-1;u<o&&!c;u+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var f=0,d=0;d<s;d++)if(i.get(d,u))(f&1)===1&&f++,l[f]++;else if((f&1)===0)if(f===4)if(t.foundPatternCross(l)){var h=this.handlePossibleCenter(l,u,d,r);if(h===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>l[2]&&(u+=p-l[2]-a,d=s-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,f=3;continue}f=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,f=3;else l[++f]++;else l[f]++;if(t.foundPatternCross(l)){var h=this.handlePossibleCenter(l,u,s,r);h===!0&&(a=l[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return Me.orderBestPatterns(g),new _U(g)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var o=n/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&n>=s&&a.get(n-s,e-s);)o[2]++,s++;if(e<s||n<s)return!1;for(;e>=s&&n>=s&&!a.get(n-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||n<s||o[1]>r)return!1;for(;e>=s&&n>=s&&a.get(n-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=a.getHeight(),l=a.getWidth();for(s=1;e+s<c&&n+s<l&&a.get(n+s,e+s);)o[2]++,s++;if(e+s>=c||n+s>=l)return!1;for(;e+s<c&&n+s<l&&!a.get(n+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||n+s>=l||o[3]>=r)return!1;for(;e+s<c&&n+s<l&&a.get(n+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var u=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(u-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(n,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(n,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(n,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(n,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(n,c)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(n,c)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=2*i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,c):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,n);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,n)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(c,n)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,n);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,n)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(c,n)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,r),a=this.crossCheckVertical(n,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var c=o/7,l=!1,u=this.possibleCenters,f=0,d=u.length;f<d;f++){var h=u[f];if(h.aboutEquals(c,a,s)){u[f]=h.combineEstimate(a,s,c),l=!0;break}}if(!l){var p=new AU(s,a,c);u.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=Zc(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=t.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var c=Zc(this.possibleCenters),l=c.next();!l.done;l=c.next()){var u=l.value;u.getCount()>=t.CENTER_QUORUM&&(o++,s+=u.getEstimatedModuleSize())}}catch(g){e={error:g}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var f=s/a,d=0;try{for(var h=Zc(this.possibleCenters),p=h.next();!p.done;p=h.next()){var u=p.value;d+=Math.abs(u.getEstimatedModuleSize()-f)}}catch(g){r={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return d<=.05*s},t.prototype.selectBestPatterns=function(){var e,n,r,i,o=this.possibleCenters.length;if(o<3)throw new ge;var s=this.possibleCenters,a;if(o>3){var c=0,l=0;try{for(var u=Zc(this.possibleCenters),f=u.next();!f.done;f=u.next()){var d=f.value,h=d.getEstimatedModuleSize();c+=h,l+=h*h}}catch(S){e={error:S}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}a=c/o;var p=Math.sqrt(l/o-a*a);s.sort(function(S,O){var F=Math.abs(O.getEstimatedModuleSize()-a),$=Math.abs(S.getEstimatedModuleSize()-a);return F<$?-1:F>$?1:0});for(var g=Math.max(.2*a,p),y=0;y<s.length&&s.length>3;y++){var v=s[y];Math.abs(v.getEstimatedModuleSize()-a)>g&&(s.splice(y,1),y--)}}if(s.length>3){var c=0;try{for(var m=Zc(s),w=m.next();!w.done;w=m.next()){var E=w.value;c+=E.getEstimatedModuleSize()}}catch(O){r={error:O}}finally{try{w&&!w.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}a=c/s.length,s.sort(function(O,F){if(F.getCount()===O.getCount()){var $=Math.abs(F.getEstimatedModuleSize()-a),U=Math.abs(O.getEstimatedModuleSize()-a);return $<U?1:$>U?-1:0}else return F.getCount()-O.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),SU=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(kt.NEED_RESULT_POINT_CALLBACK);var n=new CU(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(n,r,i);if(o<1)throw new ge("No pattern found in proccess finder.");var s=t.computeDimension(n,r,i,o),a=sa.getProvisionalVersionForDimension(s),c=a.getDimensionForVersion()-7,l=null;if(a.getAlignmentPatternCenters().length>0)for(var u=r.getX()-n.getX()+i.getX(),f=r.getY()-n.getY()+i.getY(),d=1-3/c,h=Math.floor(n.getX()+d*(u-n.getX())),p=Math.floor(n.getY()+d*(f-n.getY())),g=4;g<=16;g<<=1)try{l=this.findAlignmentInRegion(o,h,p,g);break}catch(w){if(!(w instanceof ge))throw w}var y=t.createTransform(n,r,i,l,s),v=t.sampleGrid(this.image,y,s),m;return l===null?m=[i,n,r]:m=[i,n,r,l],new Bv(v,m)},t.createTransform=function(e,n,r,i,o){var s=o-3.5,a,c,l,u;return i!==null?(a=i.getX(),c=i.getY(),l=s-3,u=l):(a=n.getX()-e.getX()+r.getX(),c=n.getY()-e.getY()+r.getY(),l=s,u=s),MS.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,u,3.5,s,e.getX(),e.getY(),n.getX(),n.getY(),a,c,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=Lv.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var o=ct.round(Me.distance(e,n)/i),s=ct.round(Me.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new ge("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,n,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var c=Math.floor(n-(i-n)*s);return s=1,c<0?(s=n/(n-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-n)/(c-n),c=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,n,a,c),o-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var o=Math.abs(i-n)>Math.abs(r-e);if(o){var s=e;e=n,n=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),c=Math.abs(i-n),l=-a/2,u=e<r?1:-1,f=n<i?1:-1,d=0,h=r+u,p=e,g=n;p!==h;p+=u){var y=o?g:p,v=o?p:g;if(d===1===this.image.get(y,v)){if(d===2)return ct.distance(p,g,e,n);d++}if(l+=c,l>0){if(g===i)break;g+=f,l-=a}}return d===2?ct.distance(r+u,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var o=Math.floor(i*e),s=Math.max(0,n-o),a=Math.min(this.image.getWidth()-1,n+o);if(a-s<e*3)throw new ge("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),l=Math.min(this.image.getHeight()-1,r+o);if(l-c<e*3)throw new ge("Alignment bottom exceeds estimated module size.");var u=new EU(this.image,s,c,a-s,l-c,e,this.resultPointCallback);return u.find()},t})(),Xd=(function(){function t(){this.decoder=new yU}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(kt.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,n),i=t.NO_POINTS}else{var s=new SU(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(s.getBits(),n),i=s.getPoints()}r.getOther()instanceof HS&&r.getOther().applyMirroredCorrection(i);var a=new Kn(r.getText(),r.getRawBytes(),void 0,i,Be.QR_CODE,void 0),c=r.getByteSegments();c!==null&&a.putMetadata(Pn.BYTE_SEGMENTS,c);var l=r.getECLevel();return l!==null&&a.putMetadata(Pn.ERROR_CORRECTION_LEVEL,l),r.hasStructuredAppend()&&(a.putMetadata(Pn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Pn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new ge;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],c=r[0];if(a>=c||o>=s)throw new ge;if(s-o!==c-a&&(c=a+(s-o),c>=e.getWidth()))throw new ge;var l=Math.round((c-a+1)/i),u=Math.round((s-o+1)/i);if(l<=0||u<=0)throw new ge;if(u!==l)throw new ge;var f=Math.floor(i/2);o+=f,a+=f;var d=a+Math.floor((l-1)*i)-c;if(d>0){if(d>f)throw new ge;a-=d}var h=o+Math.floor((u-1)*i)-s;if(h>0){if(h>f)throw new ge;o-=h}for(var p=new Wi(l,u),g=0;g<u;g++)for(var y=o+Math.floor(g*i),v=0;v<l;v++)e.get(a+Math.floor(v*i),y)&&p.set(v,g);return p},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),o=e[0],s=e[1],a=!0,c=0;o<i&&s<r;){if(a!==n.get(o,s)){if(++c===5)break;a=!a}o++,s++}if(o===i||s===r)throw new ge;return(o-e[0])/7},t.NO_POINTS=new Array,t})(),IU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},it=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ct.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=IU(e),a=s.next();!a.done;a=s.next()){var c=a.value;i[o++]=c}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=ln.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),TU=(function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),OU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RU=(function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),o=t.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=t.detect(r,i)),new TU(i,o)},t.detect=function(e,n){for(var r,i,o=new Array,s=0,a=0,c=!1;s<n.getHeight();){var l=t.findVertices(n,s,a);if(l[0]==null&&l[3]==null){if(!c)break;c=!1,a=0;try{for(var u=(r=void 0,OU(o)),f=u.next();!f.done;f=u.next()){var d=f.value;d[1]!=null&&(s=Math.trunc(Math.max(s,d[1].getY()))),d[3]!=null&&(s=Math.max(s,Math.trunc(d[3].getY())))}}catch(h){r={error:h}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s+=t.ROW_STEP;continue}if(c=!0,o.push(l),!e)break;l[2]!=null?(a=Math.trunc(l[2].getX()),s=Math.trunc(l[2].getY())):(a=Math.trunc(l[4].getX()),s=Math.trunc(l[4].getY()))}return o},t.findVertices=function(e,n,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,o,s){for(var a=new Array(4),c=!1,l=new Int32Array(s.length);i<n;i+=t.ROW_STEP){var u=t.findGuardPattern(e,o,i,r,!1,s,l);if(u!=null){for(;i>0;){var f=t.findGuardPattern(e,o,--i,r,!1,s,l);if(f!=null)u=f;else{i++;break}}a[0]=new Me(u[0],i),a[1]=new Me(u[1],i),c=!0;break}}var d=i+1;if(c){for(var h=0,f=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);d<n;d++){var u=t.findGuardPattern(e,f[0],d,r,!1,s,l);if(u!=null&&Math.abs(f[0]-u[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-u[1])<t.MAX_PATTERN_DRIFT)f=u,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}d-=h+1,a[2]=new Me(f[0],d),a[3]=new Me(f[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&ln.fill(a,null),a},t.findGuardPattern=function(e,n,r,i,o,s,a){ln.fillWithin(a,0,a.length,0);for(var c=n,l=0;e.get(c,r)&&c>0&&l++<t.MAX_PIXEL_DRIFT;)c--;for(var u=c,f=0,d=s.length,h=o;u<i;u++){var p=e.get(u,r);if(p!==h)a[f]++;else{if(f===d-1){if(t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,u]);c+=a[0]+a[1],Nt.arraycopy(a,2,a,0,f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,h=!h}}return f===d-1&&t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,u-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return 1/0;var c=o/s;r*=c;for(var l=0,u=0;u<i;u++){var f=e[u],d=n[u]*c,h=f>d?f-d:d-f;if(h>r)return 1/0;l+=h}return l/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),PU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ta=(function(){function t(e,n){if(n.length===0)throw new Le;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Nt.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=PU(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(f){n={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}for(var c=this.coefficients[0],l=this.coefficients.length,u=1;u<l;u++)c=this.field.add(this.field.multiply(e,c),this.coefficients[u]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;Nt.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(n[a-s],r[a]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var c=n[a],l=0;l<o;l++)s[a+l]=this.field.add(s[a+l],this.field.multiply(c,i[l]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new Le;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new Ye,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t})(),NU=(function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Le;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new kS;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),kU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),MU=(function(t){kU(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var o=1,s=0;s<n;s++)i.expTable[s]=o,o=o*r%n;for(var s=0;s<n-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new ta(i,new Int32Array([0])),i.one=new ta(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new Le;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new ta(this,i)},e.PDF417_GF=new e(it.NUMBER_OF_CODEWORDS,3),e})(NU),DU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BU=(function(){function t(){this.field=MU.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,o,s=new ta(this.field,e),a=new Int32Array(n),c=!1,l=n;l>0;l--){var u=s.evaluateAt(this.field.exp(l));a[n-l]=u,u!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(r!=null)try{for(var d=DU(r),h=d.next();!h.done;h=d.next()){var p=h.value,g=this.field.exp(e.length-1-p),y=new ta(this.field,new Int32Array([this.field.subtract(0,g),1]));f=f.multiply(y)}}catch($){i={error:$}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var v=new ta(this.field,a),m=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),v,n),w=m[0],E=m[1],S=this.findErrorLocations(w),O=this.findErrorMagnitudes(E,w,S),l=0;l<S.length;l++){var F=e.length-1-this.field.log(S[l]);if(F<0)throw en.getChecksumInstance();e[F]=this.field.subtract(e[F],O[l])}return S.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=e,s=n,a=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var l=o,u=a;if(o=s,a=c,o.isZero())throw en.getChecksumInstance();s=l;for(var f=this.field.getZero(),d=o.getCoefficient(o.getDegree()),h=this.field.inverse(d);s.getDegree()>=o.getDegree()&&!s.isZero();){var p=s.getDegree()-o.getDegree(),g=this.field.multiply(s.getCoefficient(s.getDegree()),h);f=f.add(this.field.buildMonomial(p,g)),s=s.subtract(o.multiplyByMonomial(p,g))}c=f.multiply(a).subtract(u).negative()}var y=c.getCoefficient(0);if(y===0)throw en.getChecksumInstance();var v=this.field.inverse(y),m=c.multiply(v),w=s.multiply(v);return[m,w]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,o=1;o<this.field.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==n)throw en.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,n.getCoefficient(s));for(var a=new ta(this.field,o),c=r.length,l=new Int32Array(c),s=0;s<c;s++){var u=this.field.inverse(r[s]),f=this.field.subtract(0,e.evaluateAt(u)),d=this.field.inverse(a.evaluateAt(u));l[s]=this.field.multiply(f,d)}return l},t})(),Y1=(function(){function t(e,n,r,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,o)}return t.prototype.constructor_1=function(e,n,r,i,o){var s=n==null||r==null,a=i==null||o==null;if(s&&a)throw new ge;s?(n=new Me(0,i.getY()),r=new Me(0,o.getY())):a&&(i=new Me(e.getWidth()-1,n.getY()),o=new Me(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,l=Math.trunc(c.getY()-e);l<0&&(l=0);var u=new Me(c.getX(),l);r?i=u:s=u}if(n>0){var f=r?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+n);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var h=new Me(f.getX(),d);r?o=h:a=h}return new t(this.image,i,o,s,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),LU=(function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),Uv=(function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(s,a,c,l,u,f){if(s==="%%")return"%";if(n[++r]!==void 0){s=l?parseInt(l.substr(1)):void 0;var d=u?parseInt(u.substr(1)):void 0,h;switch(f){case"s":h=n[r];break;case"c":h=n[r][0];break;case"f":h=parseFloat(n[r]).toFixed(s);break;case"p":h=parseFloat(n[r]).toPrecision(s);break;case"e":h=parseFloat(n[r]).toExponential(s);break;case"x":h=parseInt(n[r]).toString(d||16);break;case"d":h=parseFloat(parseInt(n[r],d||10).toPrecision(s)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(d);for(var p=parseInt(c),g=c&&c[0]+""=="0"?"0":" ";h.length<p;)h=a!==void 0?h+g:g+h;return h}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t})(),FU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$S=(function(){function t(e){this.boundingBox=new Y1(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new Uv,i=0;try{for(var o=FU(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),UU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HU=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},ul=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,o=function(f,d){var h={getKey:function(){return f},getValue:function(){return d}};h.getValue()>r?(r=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===r&&i.push(h.getKey())};try{for(var s=UU(this.values.entries()),a=s.next();!a.done;a=s.next()){var c=HU(a.value,2),l=c[0],u=c[1];o(l,u)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return it.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),$U=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),mp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yb=(function(t){$U(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=mp(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=-1,u=1,f=0,d=a;d<c;d++)if(r[d]!=null){var h=r[d],p=h.getRowNumber()-l;if(p===0)f++;else if(p===1)u=Math.max(u,f),f=1,l=h.getRowNumber();else if(p<0||h.getRowNumber()>=n.getRowCount()||p>d)r[d]=null;else{var g=void 0;u>2?g=(u-2)*p:g=p;for(var y=g>=d,v=1;v<=g&&!y;v++)y=r[d-v]!=null;y?r[d]=null:(l=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=mp(this.getCodewords()),a=s.next();!a.done;a=s.next()){var c=a.value;if(c!=null){var l=c.getRowNumber();if(l>=o.length)continue;o[l]++}}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),l=-1,u=s;u<a;u++)if(c[u]!=null){var f=c[u];f.setRowNumberAsRowIndicatorColumn();var d=f.getRowNumber()-l;d===0||(d===1?l=f.getRowNumber():f.getRowNumber()>=n.getRowCount()?c[u]=null:l=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),o=new ul,s=new ul,a=new ul,c=new ul;try{for(var l=mp(i),u=l.next();!u.done;u=l.next()){var f=u.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var d=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:s.setValue(d*3+1);break;case 1:c.setValue(d/3),a.setValue(d%3);break;case 2:o.setValue(d+1);break}}}}catch(g){n={error:g}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<it.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>it.MAX_ROWS_IN_BARCODE)return null;var p=new LU(o.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,p),p},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var o=n[i];if(n[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:s+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})($S),VU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jU=(function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=it.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[n],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var l=new Array(14);l[2]=a[n],l[3]=c[n],n>0&&(l[0]=r[n-1],l[4]=a[n-1],l[5]=c[n-1]),n>1&&(l[8]=r[n-2],l[10]=a[n-2],l[11]=c[n-2]),n<r.length-1&&(l[1]=r[n+1],l[6]=a[n+1],l[7]=c[n+1]),n<r.length-2&&(l[9]=r[n+2],l[12]=a[n+2],l[13]=c[n+2]);try{for(var u=VU(l),f=u.next();!f.done;f=u.next()){var d=f.value;if(t.adjustRowNumber(s,d))return}}catch(h){i={error:h}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new Uv,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){n.format("    |   ");continue}n.format(" %3d|%3d",o.getRowNumber(),o.getValue())}n.format("%n")}return n.toString()},t})(),KU=(function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),GU=(function(){function t(){}return t.initialize=function(){for(var e=0;e<it.SYMBOL_TABLE.length;e++)for(var n=it.SYMBOL_TABLE[e],r=n&1,i=0;i<it.BARS_IN_MODULE;i++){for(var o=0;(n&1)===r;)o+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(it.BARS_IN_MODULE)),t.RATIOS_TABLE[e][it.BARS_IN_MODULE-i-1]=Math.fround(o/it.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=ct.sum(e),r=new Int32Array(it.BARS_IN_MODULE),i=0,o=0,s=0;s<it.MODULES_IN_CODEWORD;s++){var a=n/(2*it.MODULES_IN_CODEWORD)+s*n/it.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return it.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=ct.sum(e),r=new Array(it.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var o=z1.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var c=0,l=t.RATIOS_TABLE[a],u=0;u<it.BARS_IN_MODULE;u++){var f=Math.fround(l[u]-r[u]);if(c+=Math.fround(f*f),c>=o)break}c<o&&(o=c,s=it.SYMBOL_TABLE[a])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(it.SYMBOL_TABLE.length).map(function(e){return new Array(it.BARS_IN_MODULE)}),t})(),zU=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),Xb=(function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t})(),WU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),qU=(function(t){WU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(br),YU=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new qU;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new Dv;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),XU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),ZU=(function(t){XU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(br),QU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),JU=(function(t){QU(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new Le("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new ZU;i=Ze.MAX_VALUE}this.buf=ln.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new Dv;this.ensureCapacity(this.count+i),Nt.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ln.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e})(YU),_t;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(_t||(_t={}));function VS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var mf;function os(t){if(typeof mf>"u"&&(mf=VS()),mf===null)throw new Error("BigInt is not supported!");return mf(t)}function eH(){var t=[];t[0]=os(1);var e=os(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var tH=(function(){function t(){}return t.decode=function(e,n){var r=new Ye(""),i=cn.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new zU;o<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(s,e,i,o,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,r);break;case t.ECI_CHARSET:cn.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Ae;default:o--,o=t.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw Ae.getFormatInstance()}if(r.length()===0)throw Ae.getFormatInstance();var c=new Hh(null,r.toString(),null,n);return c.setOther(a),c},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Ae.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,n++)i[o]=e[n];r.setSegmentIndex(Ze.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Ye;n=t.textCompaction(e,n,s),r.setFileId(s.toString());var a=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Ye;n=t.textCompaction(e,n+1,c),r.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new Ye;n=t.textCompaction(e,n+1,l),r.setSender(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new Ye;n=t.textCompaction(e,n+1,u),r.setAddressee(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new Ye;n=t.numericCompaction(e,n+1,f),r.setSegmentCount(Ze.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new Ye;n=t.numericCompaction(e,n+1,d),r.setTimestamp(Xb.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Ye;n=t.numericCompaction(e,n+1,h),r.setChecksum(Ze.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new Ye;n=t.numericCompaction(e,n+1,p),r.setFileSize(Xb.parseLong(p.toString()));break;default:throw Ae.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw Ae.getFormatInstance()}if(a!==-1){var g=n-a;r.isLastSegment()&&g--,r.setOptionalData(ln.copyOfRange(e,a,a+g))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),o=new Int32Array((e[0]-n)*2),s=0,a=!1;n<e[0]&&!a;){var c=e[n++];if(c<t.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[n++],o[s]=c,s++;break}}return t.decodeTextCompaction(i,o,s,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var o=_t.ALPHA,s=_t.ALPHA,a=0;a<r;){var c=e[a],l="";switch(o){case _t.ALPHA:if(c<26)l=String.fromCharCode(65+c);else switch(c){case 26:l=" ";break;case t.LL:o=_t.LOWER;break;case t.ML:o=_t.MIXED;break;case t.PS:s=o,o=_t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=_t.ALPHA;break}break;case _t.LOWER:if(c<26)l=String.fromCharCode(97+c);else switch(c){case 26:l=" ";break;case t.AS:s=o,o=_t.ALPHA_SHIFT;break;case t.ML:o=_t.MIXED;break;case t.PS:s=o,o=_t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=_t.ALPHA;break}break;case _t.MIXED:if(c<t.PL)l=t.MIXED_CHARS[c];else switch(c){case t.PL:o=_t.PUNCT;break;case 26:l=" ";break;case t.LL:o=_t.LOWER;break;case t.AL:o=_t.ALPHA;break;case t.PS:s=o,o=_t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=_t.ALPHA;break}break;case _t.PUNCT:if(c<t.PAL)l=t.PUNCT_CHARS[c];else switch(c){case t.PAL:o=_t.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=_t.ALPHA;break}break;case _t.ALPHA_SHIFT:if(o=s,c<26)l=String.fromCharCode(65+c);else switch(c){case 26:l=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=_t.ALPHA;break}break;case _t.PUNCT_SHIFT:if(o=s,c<t.PAL)l=t.PUNCT_CHARS[c];else switch(c){case t.PAL:o=_t.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=_t.ALPHA;break}break}l!==""&&i.append(l),a++}},t.byteCompaction=function(e,n,r,i,o){var s=new JU,a=0,c=0,l=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),f=n[i++];i<n[0]&&!l;)switch(u[a++]=f,c=900*c+f,f=n[i++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(os(c)>>os(8*(5-d))));c=0,a=0}break}i===n[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(u[a++]=f);for(var h=0;h<a;h++)s.write(u[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!l;){var p=n[i++];if(p<t.TEXT_COMPACTION_MODE_LATCH)a++,c=900*c+p;else switch(p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break}if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(os(c)>>os(8*(5-d))));c=0,a=0}}break}return o.append(Xr.decode(s.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,o=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!o;){var a=e[n++];if(n===e[0]&&(o=!0),a<t.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||a===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(t.decodeBase900toBase10(s,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=os(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*os(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new Ae;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=VS()?eH():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),Qc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nH=(function(){function t(){}return t.decode=function(e,n,r,i,o,s,a){for(var c=new Y1(e,n,r,i,o),l=null,u=null,f,d=!0;;d=!1){if(n!=null&&(l=t.getRowIndicatorColumn(e,c,n,!0,s,a)),i!=null&&(u=t.getRowIndicatorColumn(e,c,i,!1,s,a)),f=t.merge(l,u),f==null)throw ge.getNotFoundInstance();var h=f.getBoundingBox();if(d&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}f.setBoundingBox(c);var p=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,l),f.setDetectionResultColumn(p,u);for(var g=l!=null,y=1;y<=p;y++){var v=g?y:p-y;if(f.getDetectionResultColumn(v)===void 0){var m=void 0;v===0||v===p?m=new Yb(c,v===0):m=new $S(c),f.setDetectionResultColumn(v,m);for(var w=-1,E=w,S=c.getMinY();S<=c.getMaxY();S++){if(w=t.getStartColumn(f,v,S,g),w<0||w>c.getMaxX()){if(E===-1)continue;w=E}var O=t.detectCodeword(e,c.getMinX(),c.getMaxX(),g,w,S,s,a);O!=null&&(m.setCodeword(S,O),E=w,s=Math.min(s,O.getWidth()),a=Math.max(a,O.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=Y1.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new jU(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),s=0;try{for(var a=Qc(i),c=a.next();!c.done;c=a.next()){var l=c.value;if(s+=o-l,l>0)break}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var u=e.getCodewords(),f=0;s>0&&u[f]==null;f++)s--;for(var d=0,f=i.length-1;f>=0&&(d+=o-i[f],!(i[f]>0));f--);for(var f=u.length-1;d>0&&u[f]==null;f--)d--;return e.getBoundingBox().addMissingRows(s,d,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var o=Qc(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,o,s){for(var a=new Yb(n,i),c=0;c<2;c++)for(var l=c===0?1:-1,u=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=n.getMaxY()&&f>=n.getMinY();f+=l){var d=t.detectCodeword(e,0,e.getWidth(),i,u,f,o,s);d!=null&&(a.setCodeword(f,d),i?u=d.getStartX():u=d.getEndX())}return a},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>it.MAX_CODEWORDS_IN_BARCODE)throw ge.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var c=0;c<e.getBarcodeColumnCount();c++){var l=n[a][c+1].getValue(),u=a*e.getBarcodeColumnCount()+c;l.length===0?r.push(u):l.length===1?i[u]=l[0]:(s.push(u),o.push(l))}for(var f=new Array(o.length),d=0;d<f.length;d++)f[d]=o[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,it.toIntArray(r),it.toIntArray(s),f)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var c=0;c<s.length;c++)n[i[c]]=o[c][s[c]];try{return t.decodeCodewords(n,e,r)}catch(u){var l=u instanceof en;if(!l)throw u}if(s.length===0)throw en.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw en.getChecksumInstance()}throw en.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var c=0;c<s[a].length;c++)s[a][c]=new ul;var l=0;try{for(var u=Qc(e.getDetectionResultColumns()),f=u.next();!f.done;f=u.next()){var d=f.value;if(d!=null)try{for(var h=(i=void 0,Qc(d.getCodewords())),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null){var y=g.getRowNumber();if(y>=0){if(y>=s.length)continue;s[y][l].setValue(g.getValue())}}}}catch(v){i={error:v}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}l++}}catch(v){n={error:v}}finally{try{f&&!f.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return s},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var o,s,a=i?1:-1,c=null;if(t.isValidBarcodeColumn(e,n-a)&&(c=e.getDetectionResultColumn(n-a).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,n-a)&&(c=e.getDetectionResultColumn(n-a).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var l=0;t.isValidBarcodeColumn(e,n-a);){n-=a;try{for(var u=(o=void 0,Qc(e.getDetectionResultColumn(n).getCodewords())),f=u.next();!f.done;f=u.next()){var d=f.value;if(d!=null)return(i?d.getEndX():d.getStartX())+a*l*(d.getEndX()-d.getStartX())}}catch(h){o={error:h}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}l++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,o,s,a,c){o=t.adjustCodewordStartColumn(e,n,r,i,o,s);var l=t.getModuleBitCount(e,n,r,i,o,s);if(l==null)return null;var u,f=ct.sum(l);if(i)u=o+f;else{for(var d=0;d<l.length/2;d++){var h=l[d];l[d]=l[l.length-1-d],l[l.length-1-d]=h}u=o,o=u-f}if(!t.checkCodewordSkew(f,a,c))return null;var p=GU.getDecodedValue(l),g=it.getCodeword(p);return g===-1?null:new KU(o,u,t.getCodewordBucketNumber(p),g)},t.getModuleBitCount=function(e,n,r,i,o,s){for(var a=o,c=new Int32Array(8),l=0,u=i?1:-1,f=i;(i?a<r:a>=n)&&l<c.length;)e.get(a,s)===f?(c[l]++,a+=u):(l++,f=!f);return l===c.length||a===(i?r:n)&&l===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,o,s){for(var a=o,c=i?-1:1,l=0;l<2;l++){for(;(i?a>=n:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>t.CODEWORD_SKEW_SIZE)return o;a+=c}c=-c,i=!i}return a},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw Ae.getFormatInstance();var i=1<<n+1,o=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var s=tH.decode(e,""+n);return s.setErrorsCorrected(o),s.setErasures(r.length),s},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw en.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw Ae.getFormatInstance();var r=e[0];if(r>e.length)throw Ae.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw Ae.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new Uv,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new BU,t})(),rH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zd=(function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw ge.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof Ae||r instanceof en?ge.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,o,s=new Array,a=RU.detectMultiple(e,n,r);try{for(var c=rH(a.getPoints()),l=c.next();!l.done;l=c.next()){var u=l.value,f=nH.decode(a.getBits(),u[4],u[5],u[6],u[7],t.getMinCodewordWidth(u),t.getMaxCodewordWidth(u)),d=new Kn(f.getText(),f.getRawBytes(),void 0,u,Be.PDF_417);d.putMetadata(Pn.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&d.putMetadata(Pn.PDF417_EXTRA_METADATA,h),s.push(d)}}catch(p){i={error:p}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(p){return p})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?Ze.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),iH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Zb=(function(t){iH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(br),Qb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jS=(function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e==null?null:e.get(kt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===Be.UPC_A||s===Be.UPC_E||s===Be.EAN_13||s===Be.EAN_8||s===Be.CODABAR||s===Be.CODE_39||s===Be.CODE_93||s===Be.CODE_128||s===Be.ITF||s===Be.RSS_14||s===Be.RSS_EXPANDED});o&&!n&&i.push(new qa(e)),r.includes(Be.QR_CODE)&&i.push(new Xd),r.includes(Be.DATA_MATRIX)&&i.push(new Yd),r.includes(Be.AZTEC)&&i.push(new Wd),r.includes(Be.PDF_417)&&i.push(new Zd),o&&n&&i.push(new qa(e))}i.length===0&&(n||i.push(new qa(e)),i.push(new Xd),i.push(new Yd),i.push(new Wd),i.push(new Zd),n&&i.push(new qa(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=Qb(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new Zb("No readers where selected, nothing can be read.");try{for(var i=Qb(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof Zb)continue}}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new ge("No MultiFormat Readers were able to detect the code.")},t})(),oH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){oH(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,o=new jS;return o.setHints(n),i=t.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e})(Bc);var sH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){sH(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Zd,n)||this}return e})(Bc);var aH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){aH(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Xd,n)||this}return e})(Bc);var X1;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(X1||(X1={}));const wf=X1;var KS=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ys(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,o=n.length;o<=e;o++){var s=r.multiply(new ys(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));n.push(s),r=s}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new Le("No error correction bytes");var r=e.length-n;if(r<=0)throw new Le("No data bytes provided");var i=this.buildGenerator(n),o=new Int32Array(r);Nt.arraycopy(e,0,o,0,r);var s=new ys(this.field,o);s=s.multiplyByMonomial(n,1);for(var a=s.divide(i)[1],c=a.getCoefficients(),l=n-c.length,u=0;u<l;u++)e[r+u]=0;Nt.arraycopy(c,0,e,r+l,c.length)},t})(),fl=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],c=0;c<i-1;c++){var l=a[c];l===a[c+1]&&l===r[s+1][c]&&l===r[s+1][c+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var c=r[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(t.isWhiteHorizontal(c,a-4,a)||t.isWhiteHorizontal(c,a+7,a+11))&&n++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(t.isWhiteVertical(r,a,s-4,s)||t.isWhiteVertical(r,a,s+7,s+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],c=0;c<i;c++)a[c]===1&&n++;var l=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(n*2-l)*10/l);return u*t.N4},t.getDataMaskBit=function(e,n,r){var i,o;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:o=r*n,i=(o&1)+o%3;break;case 6:o=r*n,i=(o&1)+o%3&1;break;case 7:o=r*n,i=o%3+(r+n&1)&1;break;default:throw new Le("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),o=n?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var c=0,l=-1,u=0;u<o;u++){var f=n?s[a][u]:s[u][a];f===l?c++:(c>=5&&(r+=t.N1+(c-5)),c=1,l=f)}c>=5&&(r+=t.N1+(c-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),cH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lH=(function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=cH(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;ln.fill(s,e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=n.bytes[r],a=0,c=this.width;a<c;++a)if(o[a]!==s[a])return!1;return!0},t.prototype.toString=function(){for(var e=new Ye,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),Z1=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Ye;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),uH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Mt=(function(t){uH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(br),Jb=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,o){t.clearMatrix(o),t.embedBasicPatterns(r,o),t.embedTypeInfo(n,i,o),t.maybeEmbedVersionInfo(r,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new En;t.makeTypeInfoBits(e,n,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),c=t.TYPE_INFO_COORDINATES[o],l=c[0],u=c[1];if(r.setBoolean(l,u,a),o<8){var f=r.getWidth()-o-1,d=8;r.setBoolean(f,d,a)}else{var f=8,d=r.getHeight()-7+(o-8);r.setBoolean(f,d,a)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new En;t.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,n.setBoolean(o,n.getHeight()-11+s,a),n.setBoolean(n.getHeight()-11+s,o,a)}}},t.embedDataBits=function(e,n,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var c=0;c<2;++c){var l=s-c;if(t.isEmpty(r.get(l,a))){var u=void 0;i<e.getSize()?(u=e.get(i),++i):u=!1,n!==255&&fl.getDataMaskBit(n,l,a)&&(u=!u),r.setBoolean(l,a,u)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new Mt("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Ze.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new Le("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!Z1.isValidMaskPattern(n))throw new Mt("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(o,10);var s=new En;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Mt("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Mt("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Mt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new Mt;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new Mt;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var c=0;c!==s;c++){var l=i[c];l>=0&&t.isEmpty(n.get(l,a))&&t.embedPositionAdjustmentPattern(l-2,a-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),fH=(function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),eE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return fl.applyMaskPenaltyRule1(e)+fl.applyMaskPenaltyRule2(e)+fl.applyMaskPenaltyRule3(e)+fl.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(wf.CHARACTER_SET)!==void 0;o&&(i=r.get(wf.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new En;if(s===Dt.BYTE&&(o||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=cn.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,a)}this.appendModeInfo(s,a);var l=new En;this.appendBytes(e,s,l,i);var u;if(r!==null&&r.get(wf.QR_VERSION)!==void 0){var f=Number.parseInt(r.get(wf.QR_VERSION).toString(),10);u=sa.getVersionForNumber(f);var d=this.calculateBitsNeeded(s,a,l,u);if(!this.willFit(d,u,n))throw new Mt("Data too big for requested version")}else u=this.recommendVersion(n,s,a,l);var h=new En;h.appendBitArray(a);var p=s===Dt.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(p,u,s,h),h.appendBitArray(l);var g=u.getECBlocksForLevel(n),y=u.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(y,h);var v=this.interleaveWithECBytes(h,u.getTotalCodewords(),y,g.getNumBlocks()),m=new Z1;m.setECLevel(n),m.setMode(s),m.setVersion(u);var w=u.getDimensionForVersion(),E=new lH(w,w),S=this.chooseMaskPattern(v,n,u,E);return m.setMaskPattern(S),Jb.buildMatrix(v,n,u,S,E),m.setMatrix(E),m},t.recommendVersion=function(e,n,r,i){var o=this.calculateBitsNeeded(n,r,i,sa.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(n,r,i,s);return this.chooseVersion(a,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),cn.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Dt.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(t.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return Dt.BYTE}return i?Dt.ALPHANUMERIC:r?Dt.NUMERIC:Dt.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=Xr.encode(e,cn.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=n[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<Z1.NUM_MASK_PATTERNS;a++){Jb.buildMatrix(e,n,r,a,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=a)}return s},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=sa.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new Mt("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),o=n.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,c=(e+7)/8;return a>=c},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new Mt("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var o=n.getSize()&7;if(o>0)for(var i=o;i<8;i++)n.appendBit(!1);for(var s=e-n.getSizeInBytes(),i=0;i<s;++i)n.appendBits((i&1)===0?236:17,8);if(n.getSize()!==r)throw new Mt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,o,s){if(i>=r)throw new Mt("Block ID too large");var a=e%r,c=r-a,l=Math.floor(e/r),u=l+1,f=Math.floor(n/r),d=f+1,h=l-f,p=u-d;if(h!==p)throw new Mt("EC bytes mismatch");if(r!==c+a)throw new Mt("RS blocks mismatch");if(e!==(f+h)*c+(d+p)*a)throw new Mt("Total bytes mismatch");i<c?(o[0]=f,s[0]=h):(o[0]=d,s[0]=p)},t.interleaveWithECBytes=function(e,n,r,i){var o,s,a,c;if(e.getSizeInBytes()!==r)throw new Mt("Number of bits and data bytes does not match");for(var l=0,u=0,f=0,d=new Array,h=0;h<i;++h){var p=new Int32Array(1),g=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,h,p,g);var y=p[0],v=new Uint8Array(y);e.toBytes(8*l,v,0,y);var m=t.generateECBytes(v,g[0]);d.push(new fH(v,m)),u=Math.max(u,y),f=Math.max(f,m.length),l+=p[0]}if(r!==l)throw new Mt("Data bytes does not match offset");for(var w=new En,h=0;h<u;++h)try{for(var E=(o=void 0,eE(d)),S=E.next();!S.done;S=E.next()){var O=S.value,v=O.getDataBytes();h<v.length&&w.appendBits(v[h],8)}}catch(B){o={error:B}}finally{try{S&&!S.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}for(var h=0;h<f;++h)try{for(var F=(a=void 0,eE(d)),$=F.next();!$.done;$=F.next()){var O=$.value,m=O.getErrorCorrectionBytes();h<m.length&&w.appendBits(m[h],8)}}catch(B){a={error:B}}finally{try{$&&!$.done&&(c=F.return)&&c.call(F)}finally{if(a)throw a.error}}if(n!==w.getSizeInBytes())throw new Mt("Interleaving error: "+n+" and "+w.getSizeInBytes()+" differ.");return w},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),o=0;o<r;o++)i[o]=e[o]&255;new KS(gr.QR_CODE_FIELD_256).encode(i,n);for(var s=new Uint8Array(n),o=0;o<n;o++)s[o]=i[r+o];return s},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var o=r.getCharacterCountBits(n);if(e>=1<<o)throw new Mt(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},t.appendBytes=function(e,n,r,i){switch(n){case Dt.NUMERIC:t.appendNumericBytes(e,r);break;case Dt.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case Dt.BYTE:t.append8BitBytes(e,r,i);break;case Dt.KANJI:t.appendKanjiBytes(e,r);break;default:throw new Mt("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getDigit(e.charAt(i));if(i+2<r){var s=t.getDigit(e.charAt(i+1)),a=t.getDigit(e.charAt(i+2));n.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=t.getDigit(e.charAt(i+1));n.appendBits(o*10+s,7),i+=2}else n.appendBits(o,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Mt;if(i+1<r){var s=t.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Mt;n.appendBits(o*45+s,11),i+=2}else n.appendBits(o,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=Xr.encode(e,r)}catch(c){throw new Mt(c)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];n.appendBits(a,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=Xr.encode(e,cn.SJIS)}catch(f){throw new Mt(f)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,c=s<<8&4294967295|a,l=-1;if(c>=33088&&c<=40956?l=c-33088:c>=57408&&c<=60351&&(l=c-49472),l===-1)throw new Mt("Invalid byte sequence");var u=(l>>8)*192+(l&255);n.appendBits(u,13)}},t.appendECI=function(e,n){n.appendBits(Dt.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=cn.UTF8.getName(),t})();var dH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){dH(e,t);function e(n,r,i,o,s,a,c,l){var u=t.call(this,a,c)||this;if(u.yuvData=n,u.dataWidth=r,u.dataHeight=i,u.left=o,u.top=s,o+a>r||s+c>i)throw new Le("Crop rectangle does not fit within image data.");return l&&u.reverseHorizontal(a,c),u}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new Le("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return Nt.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Nt.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*n;Nt.arraycopy(this.yuvData,s,o,c,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var c=a*n,l=0;l<n;l++){var u=o[s+l*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+l]=4278190080|u*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+n/2,c=s,l=s+n-1;c<a;c++,l--){var u=i[c];i[c]=i[l],i[l]=u}},e.prototype.invert=function(){return new Uh(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Su);var hH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){hH(e,t);function e(n,r,i,o,s,a,c){var l=t.call(this,r,i)||this;if(l.dataWidth=o,l.dataHeight=s,l.left=a,l.top=c,n.BYTES_PER_ELEMENT===4){for(var u=r*i,f=new Uint8ClampedArray(u),d=0;d<u;d++){var h=n[d],p=h>>16&255,g=h>>7&510,y=h&255;f[d]=(p+g+y)/4&255}l.luminances=f}else l.luminances=n;if(o===void 0&&(l.dataWidth=r),s===void 0&&(l.dataHeight=i),a===void 0&&(l.left=0),c===void 0&&(l.top=0),l.left+r>l.dataWidth||l.top+i>l.dataHeight)throw new Le("Crop rectangle does not fit within image data.");return l}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new Le("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return Nt.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Nt.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*n;Nt.arraycopy(this.luminances,s,o,c,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new Uh(this)},e})(Su);var pH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),gH=(function(t){pH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e})(cn),vH=(function(){function t(){}return t.ISO_8859_1=cn.ISO8859_1,t})(),Q1,yH=301,mH=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=yH);return{LOG:t,ALOG:e}};Q1=mH([],[]),Q1.LOG;Q1.ALOG;var tE;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(tE||(tE={}));var nE=129,GS=230,wH=231,bH=235,EH=236,xH=237,AH=238,_H=239,CH=240,wp=254,SH=254,rE="[)>05",iE="[)>06",oE="",xt=0,Cn=1,qn=2,sn=3,gn=4,Dn=5,IH=(function(){function t(){}return t.prototype.getEncodingMode=function(){return xt},t.prototype.encode=function(e){var n=pi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=pi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Dn:e.writeCodeword(wH),e.signalEncoderChange(Dn);return;case Cn:e.writeCodeword(GS),e.signalEncoderChange(Cn);return;case sn:e.writeCodeword(AH),e.signalEncoderChange(sn);break;case qn:e.writeCodeword(_H),e.signalEncoderChange(qn);break;case gn:e.writeCodeword(CH),e.signalEncoderChange(gn);break;default:throw new Error("Illegal mode: "+i)}else pi.isExtendedASCII(r)?(e.writeCodeword(bH),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(pi.isDigit(e)&&pi.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t})(),TH=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Dn},t.prototype.encode=function(e){var n=new Ye;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=pi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(xt);break}}var o=n.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var c=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||c)if(o<=249)n.setCharAt(0,rt.getCharAt(o));else if(o<=1555)n.setCharAt(0,rt.getCharAt(Math.floor(o/250)+249)),n.insert(1,rt.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var l=0,r=n.length();l<r;l++)e.writeCodeword(this.randomize255State(n.charAt(l).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t})(),Hv=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Cn},t.prototype.encodeMaximal=function(e){for(var n=new Ye,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,n),n.length()%3===0&&(i=e.pos,o=n.length())}if(o!==n.length()){var a=Math.floor(n.length()/3*2),c=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(c);var l=e.getSymbolInfo().getDataCapacity()-c,u=Math.floor(n.length()%3);(u===2&&l!==2||u===1&&(r>3||l!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(GS),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new Ye;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),o=Math.floor(n.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new Ye;for(n.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,n,c,i));n.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,n,c,i);break}var l=n.length();if(l%3===0){var u=pi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(xt);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var o=n.length(),s=n.toString().substring(0,o-i);n.setLengthToZero(),n.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(wp)}else if(s===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(wp),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(s>0||e.hasMoreCharacters())&&e.writeCodeword(wp)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(xt)},t.prototype.encodeChar=function(e,n){if(e===32)return n.append(3),1;if(e>=48&&e<=57)return n.append(e-48+4),1;if(e>=65&&e<=90)return n.append(e-65+14),1;if(e<32)return n.append(0),n.append(e),2;if(e<=47)return n.append(1),n.append(e-33),2;if(e<=64)return n.append(1),n.append(e-58+15),2;if(e<=95)return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,o=new Ye;return o.append(r),o.append(i),o.toString()},t})(),OH=(function(){function t(){}return t.prototype.getEncodingMode=function(){return gn},t.prototype.encode=function(e){for(var n=new Ye;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var o=n.toString().substring(4);n.setLengthToZero(),n.append(o);var s=pi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(xt);break}}}n.append(rt.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(n.toString()),c=!e.hasMoreCharacters(),l=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(l=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}l?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(xt)}},t.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(rt.getCharAt(e-64)):pi.illegalCharacter(rt.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,o=n>=3?e.charAt(2).charCodeAt(0):0,s=n>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,c=a>>16&255,l=a>>8&255,u=a&255,f=new Ye;return f.append(c),n>=2&&f.append(l),n>=3&&f.append(u),f.toString()},t})(),RH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),PH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ft=(function(){function t(e,n,r,i,o,s,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=c}return t.lookup=function(e,n,r,i,o){var s,a;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=PH(kH),l=c.next();!l.done;l=c.next()){var u=l.value;if(!(n===1&&u.rectangular)&&!(n===2&&!u.rectangular)&&!(r!=null&&(u.getSymbolWidth()<r.getWidth()||u.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(u.getSymbolWidth()>i.getWidth()||u.getSymbolHeight()>i.getHeight()))&&e<=u.dataCapacity)return u}}catch(f){s={error:f}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t})(),NH=(function(t){RH(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e})(ft),kH=[new ft(!1,3,5,8,8,1),new ft(!1,5,7,10,10,1),new ft(!0,5,7,16,6,1),new ft(!1,8,10,12,12,1),new ft(!0,10,11,14,6,2),new ft(!1,12,12,14,14,1),new ft(!0,16,14,24,10,1),new ft(!1,18,14,16,16,1),new ft(!1,22,18,18,18,1),new ft(!0,22,18,16,10,2),new ft(!1,30,20,20,20,1),new ft(!0,32,24,16,14,2),new ft(!1,36,24,22,22,1),new ft(!1,44,28,24,24,1),new ft(!0,49,28,22,14,2),new ft(!1,62,36,14,14,4),new ft(!1,86,42,16,16,4),new ft(!1,114,48,18,18,4),new ft(!1,144,56,20,20,4),new ft(!1,174,68,22,22,4),new ft(!1,204,84,24,24,4,102,42),new ft(!1,280,112,14,14,16,140,56),new ft(!1,368,144,16,16,16,92,36),new ft(!1,456,192,18,18,16,114,48),new ft(!1,576,224,20,20,16,144,56),new ft(!1,696,272,22,22,16,174,68),new ft(!1,816,336,24,24,16,136,56),new ft(!1,1050,408,18,18,36,175,68),new ft(!1,1304,496,20,20,36,163,62),new NH],MH=(function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(a){return a.charCodeAt(0)}),r=new Ye,i=0,o=n.length;i<o;i++){var s=String.fromCharCode(n[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Ye,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ft.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t})(),DH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),BH=(function(t){DH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return sn},e.prototype.encode=function(n){for(var r=new Ye;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(n,r);var s=pi.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){n.signalEncoderChange(xt);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:n>=48&&n<=57?r.append(n-48+4):n>=65&&n<=90?r.append(n-65+14):pi.illegalCharacter(rt.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),o=r.length();n.pos-=o,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(SH),n.getNewEncoding()<0&&n.signalEncoderChange(xt)},e})(Hv),LH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),FH=(function(t){LH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return qn},e.prototype.encodeChar=function(n,r){if(n===32)return r.append(3),1;if(n>=48&&n<=57)return r.append(n-48+4),1;if(n>=97&&n<=122)return r.append(n-97+14),1;if(n<32)return r.append(0),r.append(n),2;if(n<=47)return r.append(1),r.append(n-33),2;if(n<=64)return r.append(1),r.append(n-58+15),2;if(n>=91&&n<=95)return r.append(1),r.append(n-91+22),2;if(n===96)return r.append(2),r.append(0),2;if(n<=90)return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e})(Hv),pi=(function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=nE+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,o){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Hv,a=[new IH,s,new FH,new BH,new OH,new TH],c=new MH(e);c.setSymbolShape(n),c.setSizeConstraints(r,i),e.startsWith(rE)&&e.endsWith(oE)?(c.writeCodeword(EH),c.setSkipAtEnd(2),c.pos+=rE.length):e.startsWith(iE)&&e.endsWith(oE)&&(c.writeCodeword(xH),c.setSkipAtEnd(2),c.pos+=iE.length);var l=xt;for(o&&(s.encodeMaximal(c),l=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)a[l].encode(c),c.getNewEncoding()>=0&&(l=c.getNewEncoding(),c.resetEncoderSignal());var u=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();u<f&&l!==xt&&l!==Dn&&l!==gn&&c.writeCodeword("");var d=c.getCodewords();for(d.length()<f&&d.append(nE);d.length()<f;)d.append(this.randomize253State(d.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===sn&&i===sn){for(var o=Math.min(n+3,e.length),s=n;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return xt}else if(r===gn&&i===gn){for(var o=Math.min(n+4,e.length),s=n;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return xt}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===xt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(n+o===e.length){ln.fill(s,0),ln.fill(a,0);var c=this.findMinimums(i,a,Ze.MAX_VALUE,s),l=this.getMinimumCount(s);if(a[xt]===c)return xt;if(l===1){if(s[Dn]>0)return Dn;if(s[gn]>0)return gn;if(s[qn]>0)return qn;if(s[sn]>0)return sn}return Cn}var u=e.charCodeAt(n+o);if(o++,this.isDigit(u)?i[xt]+=.5:this.isExtendedASCII(u)?(i[xt]=Math.ceil(i[xt]),i[xt]+=2):(i[xt]=Math.ceil(i[xt]),i[xt]++),this.isNativeC40(u)?i[Cn]+=2/3:this.isExtendedASCII(u)?i[Cn]+=8/3:i[Cn]+=4/3,this.isNativeText(u)?i[qn]+=2/3:this.isExtendedASCII(u)?i[qn]+=8/3:i[qn]+=4/3,this.isNativeX12(u)?i[sn]+=2/3:this.isExtendedASCII(u)?i[sn]+=13/3:i[sn]+=10/3,this.isNativeEDIFACT(u)?i[gn]+=3/4:this.isExtendedASCII(u)?i[gn]+=17/4:i[gn]+=13/4,this.isSpecialB256(u)?i[Dn]+=4:i[Dn]++,o>=4){if(ln.fill(s,0),ln.fill(a,0),this.findMinimums(i,a,Ze.MAX_VALUE,s),a[xt]<this.min(a[Dn],a[Cn],a[qn],a[sn],a[gn]))return xt;if(a[Dn]<a[xt]||a[Dn]+1<this.min(a[Cn],a[qn],a[sn],a[gn]))return Dn;if(a[gn]+1<this.min(a[Dn],a[Cn],a[qn],a[sn],a[xt]))return gn;if(a[qn]+1<this.min(a[Dn],a[Cn],a[gn],a[sn],a[xt]))return qn;if(a[sn]+1<this.min(a[Dn],a[Cn],a[gn],a[qn],a[xt]))return sn;if(a[Cn]+1<this.min(a[xt],a[Dn],a[gn],a[qn])){if(a[Cn]<a[sn])return Cn;if(a[Cn]===a[sn]){for(var f=n+o+1;f<e.length;){var d=e.charCodeAt(f);if(this.isX12TermSep(d))return sn;if(!this.isNativeX12(d))break;f++}return Cn}}}}},t.min=function(e,n,r,i,o){var s=Math.min(e,Math.min(n,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},t.findMinimums=function(e,n,r,i){for(var o=0;o<6;o++){var s=n[o]=Math.ceil(e[o]);r>s&&(r=s,ln.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=Ze.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t})(),bp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sE=(function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Xr.encode(e,this.charset)!=null}catch{return!1}},t})(),UH=(function(){function t(e,n,r){var i,o,s,a,c,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(U){return new sE(gH.forName(U))}),this.encoders=[];var u=[];u.push(new sE(vH.ISO_8859_1));for(var f=n!=null&&n.name.startsWith("UTF"),d=0;d<e.length;d++){var h=!1;try{for(var p=(i=void 0,bp(u)),g=p.next();!g.done;g=p.next()){var y=g.value,v=e.charAt(d),m=v.charCodeAt(0);if(m===r||y.canEncode(v)){h=!0;break}}}catch(U){i={error:U}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}if(!h)try{for(var w=(s=void 0,bp(this.ENCODERS)),E=w.next();!E.done;E=w.next()){var y=E.value;if(y.canEncode(e.charAt(d))){u.push(y),h=!0;break}}}catch(U){s={error:U}}finally{try{E&&!E.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}h||(f=!0)}if(u.length===1&&!f)this.encoders=[u[0]];else{this.encoders=[];var S=0;try{for(var O=bp(u),F=O.next();!F.done;F=O.next()){var y=F.value;this.encoders[S++]=y}}catch(U){c={error:U}}finally{try{F&&!F.done&&(l=O.return)&&l.call(O)}finally{if(c)throw c.error}}}var $=-1;if(n!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&n.name===this.encoders[d].name){$=d;break}}this.priorityEncoderIndex=$}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Xr.encode(rt.getCharAt(e),this.encoders[n].name)},t})(),HH=3,$H=(function(){function t(e,n,r){this.fnc1=r;var i=new UH(e,n,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new Ye,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,o,s){var a=e.charAt(i).charCodeAt(0),c=0,l=n.length();n.getPriorityEncoderIndex()>=0&&(a===s||n.canEncode(a,n.getPriorityEncoderIndex()))&&(c=n.getPriorityEncoderIndex(),l=c+1);for(var u=c;u<l;u++)(a===s||n.canEncode(a,u))&&this.addEdge(r,i+1,new aE(a,n,u,o,s))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,o=new aE[i+1][n.length()];this.addEdges(e,n,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<n.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,n,o,s,o[s][a],r);for(var a=0;a<n.length();a++)o[s-1][a]=null}for(var c=-1,l=Ze.MAX_VALUE,a=0;a<n.length();a++)if(o[i][a]!=null){var u=o[i][a];u.cachedTotalSize<l&&(l=u.cachedTotalSize,c=a)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],d=o[i][c];d!=null;){if(d.isFNC1())f.unshift(1e3);else for(var h=n.encode(d.c,d.encoderIndex),s=h.length-1;s>=0;s--)f.unshift(h[s]&255);var p=d.previous===null?0:d.previous.encoderIndex;p!==d.encoderIndex&&f.unshift(256+n.getECIValue(d.encoderIndex)),d=d.previous}for(var g=[],s=0;s<g.length;s++)g[s]=f[s];return g},t})(),aE=(function(){function t(e,n,r,i,o){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:n.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=HH),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t})(),VH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();var cE;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(cE||(cE={}));(function(t){VH(e,t);function e(n,r,i,o,s){var a=t.call(this,n,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})($H);var jH=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),lE=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t})(),KH=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),GH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),$v=(function(t){GH(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+Ze.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e})(KH),zH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),WH=(function(t){zH(e,t);function e(n,r,i){var o=t.call(this,n,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})($v);function qH(t,e,n){return new WH(t,e,n)}function Jc(t,e,n){return new $v(t,e,n)}var YH=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ms=0,Qd=1,qr=2,zS=3,Li=4,XH=new $v(null,0,0),Ep=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],ZH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function QH(t){var e,n;try{for(var r=ZH(t),i=r.next();!i.done;i=r.next()){var o=i.value;ln.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[ms][Li]=0,t[Qd][Li]=0,t[Qd][ms]=28,t[zS][Li]=0,t[qr][Li]=0,t[qr][ms]=15,t}var WS=QH(ln.createInt32Array(6,6)),JH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e$=(function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=Ep[this.mode][e];i=Jc(i,o&65535,o>>16),r+=o>>16}var s=e===qr?4:5;return i=Jc(i,n,s),new t(i,e,0,r+s)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===qr?4:5;return r=Jc(r,WS[this.mode][e],i),r=Jc(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===Li||this.mode===qr){var o=Ep[r][ms];n=Jc(n,o&65535,o>>16),i+=o>>16,r=ms}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new t(n,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=qH(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(Ep[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new En;try{for(var a=JH(i),c=a.next();!c.done;c=a.next()){var l=c.value;l.appendTo(s,e)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s},t.prototype.toString=function(){return rt.format("%s bits=%d bytes=%d",YH[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(XH,ms,0,0),t})();function t$(t){var e=rt.getCharCode(" "),n=rt.getCharCode("."),r=rt.getCharCode(",");t[ms][e]=1;for(var i=rt.getCharCode("Z"),o=rt.getCharCode("A"),s=o;s<=i;s++)t[ms][s]=s-o+2;t[Qd][e]=1;for(var a=rt.getCharCode("z"),c=rt.getCharCode("a"),s=c;s<=a;s++)t[Qd][s]=s-c+2;t[qr][e]=1;for(var l=rt.getCharCode("9"),u=rt.getCharCode("0"),s=u;s<=l;s++)t[qr][s]=s-u+2;t[qr][r]=12,t[qr][n]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<f.length;d++)t[zS][rt.getCharCode(f[d])]=d;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<h.length;d++)rt.getCharCode(h[d])>0&&(t[Li][rt.getCharCode(h[d])]=d);return t}var xp=t$(ln.createInt32Array(5,256)),bf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n$=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=rt.getCharCode(" "),n=rt.getCharCode(`
`),r=lE.singletonList(e$.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case rt.getCharCode("\r"):o=s===n?2:0;break;case rt.getCharCode("."):o=s===e?3:0;break;case rt.getCharCode(","):o=s===e?4:0;break;case rt.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=t.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=lE.min(r,function(c,l){return c.getBitCount()-l.getBitCount()});return a.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,o=[];try{for(var s=bf(e),a=s.next();!a.done;a=s.next()){var c=a.value;this.updateStateForChar(c,n,o)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return t.simplifyStates(o)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,o=xp[e.getMode()][i]>0,s=null,a=0;a<=Li;a++){var c=xp[a][i];if(c>0){if(s==null&&(s=e.endBinaryShift(n)),!o||a===e.getMode()||a===qr){var l=s.latchAndAppend(a,c);r.push(l)}if(!o&&WS[e.getMode()][a]>=0){var u=s.shiftAndAppend(a,c);r.push(u)}}}if(e.getBinaryShiftByteCount()>0||xp[e.getMode()][i]===0){var f=e.addBinaryShiftChar(n);r.push(f)}},t.updateStateListForPair=function(e,n,r){var i,o,s=[];try{for(var a=bf(e),c=a.next();!c.done;c=a.next()){var l=c.value;this.updateStateForPair(l,n,r,s)}}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,n,r,i){var o=e.endBinaryShift(n);if(i.push(o.latchAndAppend(Li,r)),e.getMode()!==Li&&i.push(o.shiftAndAppend(Li,r)),r===3||r===4){var s=o.latchAndAppend(qr,16-r).latchAndAppend(qr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(a)}},t.simplifyStates=function(e){var n,r,i,o,s=[];try{for(var a=bf(e),c=a.next();!c.done;c=a.next()){var l=c.value,u=!0,f=function(y){if(y.isBetterThanOrEqualTo(l))return u=!1,"break";l.isBetterThanOrEqualTo(y)&&(s=s.filter(function(v){return v!==y}))};try{for(var d=(i=void 0,bf(s)),h=d.next();!h.done;h=d.next()){var p=h.value,g=f(p);if(g==="break")break}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}u&&s.push(l)}}catch(y){n={error:y}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s},t})(),r$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new n$(e).encode(),o=Ze.truncDivision(i.getSize()*n,100)+11,s=i.getSize()+o,a,c,l,u,f;if(r!==t.DEFAULT_AZTEC_LAYERS){if(a=r<0,c=Math.abs(r),c>(a?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Le(rt.format("Illegal value %s for layers",r));l=t.totalBitsInLayer(c,a),u=t.WORD_SIZE[c];var d=l-l%u;if(f=t.stuffBits(i,u),f.getSize()+o>d)throw new Le("Data to large for user specified layer");if(a&&f.getSize()>u*64)throw new Le("Data to large for user specified layer")}else{u=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new Le("Data too large for an Aztec code");if(a=h<=3,c=a?h+1:h,l=t.totalBitsInLayer(c,a),!(s>l)){(f==null||u!==t.WORD_SIZE[c])&&(u=t.WORD_SIZE[c],f=t.stuffBits(i,u));var d=l-l%u;if(!(a&&f.getSize()>u*64)&&f.getSize()+o<=d)break}}}var p=t.generateCheckWords(f,l,u),g=f.getSize()/u,y=t.generateModeMessage(a,c,g),v=(a?11:14)+c*4,m=new Int32Array(v),w;if(a){w=v;for(var h=0;h<m.length;h++)m[h]=h}else{w=v+1+2*Ze.truncDivision(Ze.truncDivision(v,2)-1,15);for(var E=Ze.truncDivision(v,2),S=Ze.truncDivision(w,2),h=0;h<E;h++){var O=h+Ze.truncDivision(h,15);m[E-h-1]=S-O-1,m[E+h]=S+O+1}}for(var F=new Wi(w),h=0,$=0;h<c;h++){for(var U=(c-h)*4+(a?9:12),B=0;B<U;B++)for(var Y=B*2,j=0;j<2;j++)p.get($+Y+j)&&F.set(m[h*2+j],m[h*2+B]),p.get($+U*2+Y+j)&&F.set(m[h*2+B],m[v-1-h*2-j]),p.get($+U*4+Y+j)&&F.set(m[v-1-h*2-j],m[v-1-h*2-B]),p.get($+U*6+Y+j)&&F.set(m[v-1-h*2-B],m[h*2+j]);$+=U*8}if(t.drawModeMessage(F,a,w,y),a)t.drawBullsEye(F,Ze.truncDivision(w,2),5);else{t.drawBullsEye(F,Ze.truncDivision(w,2),7);for(var h=0,B=0;h<Ze.truncDivision(v,2)-1;h+=15,B+=16)for(var j=Ze.truncDivision(w,2)&1;j<w;j+=2)F.set(Ze.truncDivision(w,2)-B,j),F.set(Ze.truncDivision(w,2)+B,j),F.set(j,Ze.truncDivision(w,2)-B),F.set(j,Ze.truncDivision(w,2)+B)}var L=new jH;return L.setCompact(a),L.setSize(w),L.setLayers(c),L.setCodeWords(g),L.setMatrix(F),L},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var o=n-i;o<=n+i;o++)e.set(o,n-i),e.set(o,n+i),e.set(n-i,o),e.set(n+i,o);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new En;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var o=Ze.truncDivision(r,2);if(n)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+Ze.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},t.generateCheckWords=function(e,n,r){var i,o,s=e.getSize()/r,a=new KS(t.getGF(r)),c=Ze.truncDivision(n,r),l=t.bitsToWords(e,r,c);a.encode(l,c-s);var u=n%r,f=new En;f.appendBits(0,u);try{for(var d=r$(Array.from(l)),h=d.next();!h.done;h=d.next()){var p=h.value;f.appendBits(p,r)}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return f},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/n;o<s;o++){for(var a=0,c=0;c<n;c++)a|=e.get(o*n+c)?1<<n-c-1:0;i[o]=a}return i},t.getGF=function(e){switch(e){case 4:return gr.AZTEC_PARAM;case 6:return gr.AZTEC_DATA_6;case 8:return gr.AZTEC_DATA_8;case 10:return gr.AZTEC_DATA_10;case 12:return gr.AZTEC_DATA_12;default:throw new Le("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new En,i=e.getSize(),o=(1<<n)-2,s=0;s<i;s+=n){for(var a=0,c=0;c<n;c++)(s+c>=i||e.get(s+c))&&(a|=1<<n-1-c);(a&o)===o?(r.appendBits(a&o,n),s--):(a&o)===0?(r.appendBits(a|1,n),s--):r.appendBits(a,n)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var i$=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),o$=(function(t){i$(e,t);function e(n){var r=t.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(n),r}return e.makeBufferFromCanvasImageData=function(n){var r;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,r,i){for(var o=new Uint8ClampedArray(r*i),s=0,a=0,c=n.length;s<c;s+=4,a++){var l=void 0,u=n[s+3];if(u===0)l=255;else{var f=n[s],d=n[s+1],h=n[s+2];l=306*f+601*d+117*h+512>>10}o[a]=l}return o},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new Le("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Uh(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=n*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);r.width=a,r.height=c;var l=r.getContext("2d");if(!l)throw new Error("Could not create a Canvas Context element.");return l.translate(a/2,c/2),l.rotate(i),l.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Su);function qS(){return typeof navigator<"u"}function s$(){return qS()&&!!navigator.mediaDevices}function a$(){return!!(s$()&&navigator.mediaDevices.enumerateDevices)}var Xa=function(){return Xa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xa.apply(this,arguments)},Ft=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},Ut=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ap=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c$={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Lc=(function(){function t(e,n,r){n===void 0&&(n=new Map),r===void 0&&(r={}),this.reader=e,this.hints=n,this.options=Xa(Xa({},c$),r)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(kt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,n){try{e.srcObject=n}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,n){return Ft(this,void 0,void 0,function(){return Ut(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:n?"flash":"off",torch:!!n}]})];case 1:return r.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var n,r,i=e.getVideoTracks();try{for(var o=Ap(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(t.mediaStreamIsTorchCompatibleTrack(a))return!0}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var n=e.getCapabilities();return"torch"in n}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new qt("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new qt("element with id '".concat(e,"' must be an ").concat(n," element"));return r},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var n=t.createVideoElement(e);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var n=new o$(e),r=new NS(n);return new PS(r)},t.drawImageOnCanvas=function(e,n){e.drawImage(n,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new qt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var n=document.createElement("canvas"),r=t.getMediaElementDimensions(e),i=r.width,o=r.height;return n.style.width=i+"px",n.style.height=o+"px",n.width=i,n.height=o,n},t.tryPlayVideo=function(e){return Ft(this,void 0,void 0,function(){var n;return Ut(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return n=r.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var n=t.createCaptureCanvas(e),r=n.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(r,e),n},t.createBinaryBitmapFromMediaElem=function(e){var n=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(n)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Ft(this,void 0,void 0,function(){var e,n,r,i,o,s,a,c,l,u,f,d;return Ut(this,function(h){switch(h.label){case 0:if(!qS())throw new Error("Can't enumerate devices, navigator is not present.");if(!a$())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),n=[];try{for(r=Ap(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device ".concat(n.length+1),l=o.groupId,u={deviceId:a,label:c,kind:s,groupId:l},n.push(u))}catch(p){f={error:p}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(f)throw f.error}}return[2,n]}})})},t.findDeviceById=function(e){return Ft(this,void 0,void 0,function(){var n;return Ut(this,function(r){switch(r.label){case 0:return[4,t.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(n){return n.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,n){return Ft(this,void 0,void 0,function(){var r;return Ut(this,function(i){switch(i.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(o,s){var a=setTimeout(function(){t.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",c))},n),c=function(){t.tryPlayVideo(e).then(function(l){clearTimeout(a),e.removeEventListener("canplay",c),o(l)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,n,r){return r===void 0&&(r=5e3),Ft(this,void 0,void 0,function(){var i;return Ut(this,function(o){switch(o.label){case 0:return i=t.prepareVideoElement(n),t.addVideoSource(i,e),[4,t.playVideoOnLoadAsync(i,r)];case 1:return o.sent(),[2,i]}})})},t._waitImageLoad=function(e){return new Promise(function(n,r){var i=1e4,o=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(o),e.removeEventListener("load",s),n()};e.addEventListener("load",s)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new qt("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(n){return n.stop()}),e=void 0},t.prototype.decode=function(e){var n=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(n)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var n=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(n)},t.prototype.decodeFromImageElement=function(e){return Ft(this,void 0,void 0,function(){var n;return Ut(this,function(r){switch(r.label){case 0:if(!e)throw new qt("An image element must be provided.");return n=t.prepareImageElement(e),[4,this._decodeOnLoadImage(n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Ft(this,void 0,void 0,function(){var n;return Ut(this,function(r){switch(r.label){case 0:if(!e)throw new qt("An URL must be provided.");n=t.prepareImageElement(),n.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,r.sent()];case 3:return t.destroyImageElement(n),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Ft(this,void 0,void 0,function(){var i,o;return Ut(this,function(s){switch(s.label){case 0:return t.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,n,r)];case 3:return[2,s.sent()];case 4:throw o=s.sent(),t.disposeMediaStream(i),o;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,n,r){return Ft(this,void 0,void 0,function(){var i,o,s,a,c,l,u,f,d,h=this;return Ut(this,function(p){switch(p.label){case 0:return t.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,n,i)];case 1:return o=p.sent(),s=function(){t.disposeMediaStream(e),t.cleanVideoSource(o)},a=this.scan(o,r,s),c=e.getVideoTracks(),l=Xa(Xa({},a),{stop:function(){a.stop()},streamVideoConstraintsApply:function(g,y){return Ft(this,void 0,void 0,function(){var v,m,w,E,S,O,F;return Ut(this,function($){switch($.label){case 0:v=y?c.filter(y):c,$.label=1;case 1:$.trys.push([1,6,7,8]),m=Ap(v),w=m.next(),$.label=2;case 2:return w.done?[3,5]:(E=w.value,[4,E.applyConstraints(g)]);case 3:$.sent(),$.label=4;case 4:return w=m.next(),[3,2];case 5:return[3,8];case 6:return S=$.sent(),O={error:S},[3,8];case 7:try{w&&!w.done&&(F=m.return)&&F.call(m)}finally{if(O)throw O.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(g){return c.find(g).getConstraints()},streamVideoSettingsGet:function(g){return c.find(g).getSettings()},streamVideoCapabilitiesGet:function(g){return c.find(g).getCapabilities()}}),u=t.mediaStreamIsTorchCompatible(e),u&&(f=c?.find(function(g){return t.mediaStreamIsTorchCompatibleTrack(g)}),d=function(g){return Ft(h,void 0,void 0,function(){return Ut(this,function(y){switch(y.label){case 0:return[4,t.mediaStreamSetTorch(f,g)];case 1:return y.sent(),[2]}})})},l.switchTorch=d,l.stop=function(){return Ft(h,void 0,void 0,function(){return Ut(this,function(g){switch(g.label){case 0:return a.stop(),[4,d(!1)];case 1:return g.sent(),[2]}})})}),[2,l]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Ft(this,void 0,void 0,function(){var i,o;return Ut(this,function(s){switch(s.label){case 0:return t.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,n){return Ft(this,void 0,void 0,function(){var r,i;return Ut(this,function(o){switch(o.label){case 0:if(t.checkCallbackFnOrThrow(n),!e)throw new qt("A video element must be provided.");return r=t.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,i)];case 1:return o.sent(),[2,this.scan(r,n)]}})})},t.prototype.decodeFromVideoUrl=function(e,n){return Ft(this,void 0,void 0,function(){var r,i,o,s;return Ut(this,function(a){switch(a.label){case 0:if(t.checkCallbackFnOrThrow(n),!e)throw new qt("An URL must be provided.");return r=t.prepareVideoElement(),r.src=e,i=function(){t.cleanVideoSource(r)},o=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),s=this.scan(r,n,i),[2,s]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Ft(this,void 0,void 0,function(){var r;return Ut(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Ft(this,void 0,void 0,function(){var r,i,o;return Ut(this,function(s){switch(s.label){case 0:return r=!!n,[4,t.attachStreamToVideo(e,n)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=s.sent(),[2,o];case 4:return r||t.cleanVideoSource(i),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Ft(this,void 0,void 0,function(){var r,i;return Ut(this,function(o){switch(o.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Ft(this,void 0,void 0,function(){var n,r;return Ut(this,function(i){switch(i.label){case 0:if(!e)throw new qt("A video element must be provided.");return n=t.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,r)];case 1:return i.sent(),[4,this.scanOneResult(n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Ft(this,void 0,void 0,function(){var n,r;return Ut(this,function(i){switch(i.label){case 0:if(!e)throw new qt("An URL must be provided.");n=t.prepareVideoElement(),n.src=e,r=this.decodeOnceFromVideoElement(n),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return t.cleanVideoSource(n),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,n,r,i){var o=this;return n===void 0&&(n=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,a){o.scan(e,function(c,l,u){if(c){s(c),u.stop();return}if(l){if(l instanceof ge&&n||l instanceof en&&r||l instanceof Ae&&i)return;u.stop(),a(l)}})})},t.prototype.scan=function(e,n,r){var i=this;t.checkCallbackFnOrThrow(n);var o=t.createCaptureCanvas(e),s;try{s=o.getContext("2d",{willReadFrequently:!0})}catch{s=o.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var a=function(){s=void 0,o=void 0},c=!1,l,u=function(){c=!0,clearTimeout(l),a(),r&&r()},f={stop:u},d=function(){if(!c)try{t.drawImageOnCanvas(s,e);var h=i.decodeFromCanvas(o);n(h,void 0,f),l=setTimeout(d,i.options.delayBetweenScanSuccess)}catch(v){n(void 0,v,f);var p=v instanceof en,g=v instanceof Ae,y=v instanceof ge;if(p||g||y){l=setTimeout(d,i.options.delayBetweenScanAttempts);return}a(),r&&r(v)}};return d(),f},t.prototype._decodeOnLoadImage=function(e){return Ft(this,void 0,void 0,function(){var n;return Ut(this,function(r){switch(r.label){case 0:return n=t.isImageLoaded(e),n?[3,2]:[4,t._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Ft(this,void 0,void 0,function(){var n;return Ut(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),t.streamTracker.push(n),[2,n]}})})},t.streamTracker=[],t})(),l$=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){l$(e,t);function e(n,r){return t.call(this,new Wd,n,r)||this}return e})(Lc);var u$=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){u$(e,t);function e(n,r){return t.call(this,new qa(n),n,r)||this}return e})(Lc);var f$=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){f$(e,t);function e(n,r){return t.call(this,new Yd,n,r)||this}return e})(Lc);var d$=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){d$(e,t);function e(n,r){var i=this,o=new jS;return o.setHints(n),i=t.call(this,o,n,r)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(n){this.hints.set(kt.POSSIBLE_FORMATS,n),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e.prototype.setHints=function(n){this.hints=n,this.reader.setHints(this.hints)},e})(Lc);var h$=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){h$(e,t);function e(n,r){return t.call(this,new Zd,n,r)||this}return e})(Lc);var p$=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),uE=(function(t){p$(e,t);function e(n,r){return t.call(this,new Xd,n,r)||this}return e})(Lc);const g$={class:"layout"},v$={class:"page"},y$={class:"content"},m$={class:"panel"},w$={class:"panel-head"},b$={class:"camera-controls"},E$=["disabled"],x$=["value"],A$=["disabled"],_$={class:"video-wrap"},C$={key:0,class:"overlay"},S$={class:"reticle","aria-hidden":"true"},I$={key:0,class:"scanline"},T$={key:0},O$={key:1},R$={key:2},P$={class:"action-buttons"},N$=["disabled"],k$=["disabled"],M$={class:"panel"},D$={class:"panel-head"},B$=["disabled"],L$={key:0,class:"alert error"},F$={key:1,class:"alert info"},U$={class:"summary"},H$={class:"kv"},$$={class:"v"},V$={class:"kv"},j$={class:"v mono"},K$={class:"kv"},G$={class:"v mono"},z$={key:2,class:"card"},W$={class:"grid"},q$={class:"v2 mono"},Y$={class:"v2"},X$={class:"v2"},Z$={class:"v2 mono"},Q$={class:"v2"},J$={class:"v2"},eV={class:"v2 mono"},tV={key:3,class:"card"},nV={class:"grid"},rV={class:"v2"},iV={class:"v2"},oV={class:"v2"},sV={class:"v2 mono"},aV={__name:"ScanQR",setup(t){const n=`${"http://localhost:3001,https://asiqtix-main-production.up.railway.app/".replace(/\/+$/,"")}/api`,r=Pe(null),i=Pe(!1),o=Pe(!1),s=Pe([]),a=Pe(""),c=Pe(""),l=Pe(""),u=Pe(""),f=Pe(null),d=Pe(null),h=Pe(""),p=Pe(""),g=Pe(!1);function y(){g.value=!g.value}const v=je(()=>u.value==="valid"?"VALID":u.value==="used"?"SUDAH DIPAKAI":u.value==="invalid"?"INVALID":""),m=je(()=>u.value==="valid"?"ok":u.value==="used"?"warn":u.value==="invalid"?"bad":""),w=new uE;let E=null;function S(){return(localStorage.getItem("walletAddress")||"").toString().toLowerCase().trim()}function O(L){return!Array.isArray(L)||L.length===0?"":(L.find(x=>/back|rear|environment/i.test(x.label||""))||L[0]).deviceId}async function F(){h.value="",p.value="";try{const L=await uE.listVideoInputDevices();s.value=L||[],a.value&&s.value.some(x=>x.deviceId===a.value)||(a.value=O(s.value))}catch{h.value="Gagal membaca daftar kamera. Pastikan izin kamera diaktifkan."}}function $(L){const I=String(L||"").trim();if(!I)return"";try{if(/^https?:\/\//i.test(I)){const G=new URL(I).searchParams.get("tx");if(G)return G.trim()}}catch{}return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(I),I}async function U(L){f.value=null,d.value=null,u.value="",h.value="",p.value="Memproses scan tiket",o.value=!0;const I=S();if(!I){u.value="invalid",p.value="",h.value="Wallet tidak ditemukan. Login/koneksikan MetaMask dulu.",o.value=!1;return}try{const x=await fetch(`${n}/tickets/scan`,{method:"POST",headers:{"content-type":"application/json","x-wallet-address":I},body:JSON.stringify({tx_id:L})}),P=await x.json().catch(()=>null);if(x.status===409){u.value="used",p.value="",h.value=P?.message||"Tiket ini sudah di-scan dan tidak valid lagi.",f.value=P?.tx||null,d.value=P?.event||null;return}if(!x.ok){u.value="invalid",p.value="",h.value=P?.error||P?.message||"Scan gagal.";return}u.value="valid",p.value=P?.message||"Tiket valid. Scan berhasil.",f.value=P?.tx||null,d.value=P?.event||null}catch{u.value="invalid",p.value="",h.value="Gagal scan. Cek koneksi atau endpoint backend."}finally{o.value=!1}}async function B(){if(!(i.value||o.value)){if(h.value="",p.value="",c.value="",l.value="",u.value="",f.value=null,d.value=null,!r.value){h.value="Elemen video tidak tersedia.";return}a.value||await F(),i.value=!0,p.value="Arahkan kamera ke QR code";try{E=await w.decodeFromVideoDevice(a.value||void 0,r.value,async L=>{if(!L||!i.value)return;const I=L.getText();c.value=I;const x=$(I);l.value=x,Y(),x?await U(x):(u.value="invalid",p.value="",h.value="QR terbaca, tapi tidak ada Transaction ID yang valid.")})}catch{i.value=!1,p.value="",h.value="Gagal memulai kamera. Pastikan izin kamera sudah diberikan."}}}function Y(){if(E){try{E.stop()}catch{}E=null}i.value=!1}function j(){c.value="",l.value="",u.value="",f.value=null,d.value=null,h.value="",p.value=""}return du(async()=>{await F()}),gg(()=>{Y()}),(L,I)=>(Se(),Ie("div",g$,[Bt(_g,{modelValue:g.value,"onUpdate:modelValue":I[0]||(I[0]=x=>g.value=x)},null,8,["modelValue"]),q("div",v$,[q("header",{class:"topbar"},[I[3]||(I[3]=q("h1",{class:"title"},"Scan Ticket QR",-1)),q("button",{class:"hamburger",type:"button","aria-label":"Toggle menu",onClick:y},[...I[2]||(I[2]=[q("span",null,null,-1),q("span",null,null,-1),q("span",null,null,-1)])])]),q("main",y$,[q("section",m$,[q("div",w$,[I[4]||(I[4]=q("h2",null,"Camera",-1)),q("div",b$,[ur(q("select",{class:"select","onUpdate:modelValue":I[1]||(I[1]=x=>a.value=x),disabled:i.value||s.value.length===0},[(Se(!0),Ie(hr,null,vg(s.value,x=>(Se(),Ie("option",{key:x.deviceId,value:x.deviceId},ke(x.label||`Camera ${x.deviceId.slice(0,6)}`),9,x$))),128))],8,E$),[[fI,a.value]]),q("button",{class:"btn secondary",disabled:i.value||o.value,onClick:F}," Refresh ",8,A$)])]),q("div",_$,[q("video",{ref_key:"videoEl",ref:r,class:"video",autoplay:"",playsinline:"",muted:""},null,512),!i.value&&!o.value?(Se(),Ie("div",C$,[...I[5]||(I[5]=[at(" Klik ",-1),q("strong",null,"Start",-1),at(" untuk mulai scan ",-1)])])):Qe("",!0),q("div",S$,[I[6]||(I[6]=q("span",{class:"corner tl"},null,-1)),I[7]||(I[7]=q("span",{class:"corner tr"},null,-1)),I[8]||(I[8]=q("span",{class:"corner bl"},null,-1)),I[9]||(I[9]=q("span",{class:"corner br"},null,-1)),i.value?(Se(),Ie("div",I$)):Qe("",!0)]),q("div",{class:aa(["badge",{on:i.value,busy:o.value}])},[o.value?(Se(),Ie("span",T$,"processing")):i.value?(Se(),Ie("span",O$,"scanning")):(Se(),Ie("span",R$,"idle"))],2)]),q("div",P$,[q("button",{class:"btn primary",disabled:i.value||o.value,onClick:B},ke(o.value?"Processing":i.value?"Scanning":"Start Scan"),9,N$),q("button",{class:"btn danger",disabled:!i.value,onClick:Y}," Stop Scan ",8,k$)]),I[10]||(I[10]=q("p",{class:"hint"},"Catatan: akses kamera umumnya hanya berjalan di HTTPS atau localhost.",-1))]),q("section",M$,[q("div",D$,[I[11]||(I[11]=q("h2",null,"Hasil",-1)),q("button",{class:"btn secondary",disabled:i.value||o.value,onClick:j},"Reset",8,B$)]),h.value?(Se(),Ie("div",L$,ke(h.value),1)):p.value?(Se(),Ie("div",F$,ke(p.value),1)):Qe("",!0),q("div",U$,[q("div",H$,[I[12]||(I[12]=q("div",{class:"k"},"Status",-1)),q("div",$$,[q("span",{class:aa(["pill",m.value])},ke(v.value),3)])]),q("div",V$,[I[13]||(I[13]=q("div",{class:"k"},"Transaction ID",-1)),q("div",j$,ke(l.value||""),1)]),q("div",K$,[I[14]||(I[14]=q("div",{class:"k"},"QR Text",-1)),q("div",G$,ke(c.value||""),1)])]),f.value?(Se(),Ie("div",z$,[I[22]||(I[22]=q("div",{class:"card-head"},[q("h3",null,"Detail Transaksi")],-1)),q("div",W$,[I[15]||(I[15]=q("div",{class:"k2"},"ID",-1)),q("div",q$,ke(f.value.id),1),I[16]||(I[16]=q("div",{class:"k2"},"Kind",-1)),q("div",Y$,ke(f.value.kind),1),I[17]||(I[17]=q("div",{class:"k2"},"Status",-1)),q("div",X$,ke(f.value.status),1),I[18]||(I[18]=q("div",{class:"k2"},"Wallet",-1)),q("div",Z$,ke(f.value.wallet),1),I[19]||(I[19]=q("div",{class:"k2"},"Amount",-1)),q("div",Q$,ke(f.value.amount),1),I[20]||(I[20]=q("div",{class:"k2"},"Created",-1)),q("div",J$,ke(f.value.created_at),1),I[21]||(I[21]=q("div",{class:"k2"},"Event Ref",-1)),q("div",eV,ke(f.value.ref_id||""),1)])])):Qe("",!0),d.value?(Se(),Ie("div",tV,[I[27]||(I[27]=q("div",{class:"card-head"},[q("h3",null,"Detail Event")],-1)),q("div",nV,[I[23]||(I[23]=q("div",{class:"k2"},"Title",-1)),q("div",rV,ke(d.value.title),1),I[24]||(I[24]=q("div",{class:"k2"},"Date",-1)),q("div",iV,ke(d.value.date_iso),1),I[25]||(I[25]=q("div",{class:"k2"},"Venue",-1)),q("div",oV,ke(d.value.venue),1),I[26]||(I[26]=q("div",{class:"k2"},"ID",-1)),q("div",sV,ke(d.value.id),1)])])):Qe("",!0)])])])]))}},cV=Is(aV,[["__scopeId","data-v-0a6c88b8"]]),YS=x6({history:JI("/"),routes:[{path:"/",name:"login",component:zD},{path:"/home",name:"home",component:PD,meta:{requiresWallet:!0}},{path:"/events/:id",name:"event",component:xL},{path:"/admin/dashboard",name:"admin-dashboard",component:()=>to(()=>import("./Admin_Dashboard-DAo40IpI.js"),__vite__mapDeps([0,1])),meta:{requiresWallet:!0}},{path:"/promoter/dashboard",name:"promoter-dashboard",component:()=>to(()=>import("./Promoter_Dashboard-BmulPgMa.js"),__vite__mapDeps([2,3])),meta:{requiresWallet:!0}},{path:"/profile",name:"profile",component:()=>to(()=>import("./Profile-CV15128M.js"),__vite__mapDeps([4,5])),meta:{requiresAuth:!0}},{path:"/logout",name:"logout",component:()=>to(()=>import("./LogoutConfirm-BlMcM1Qi.js"),__vite__mapDeps([6,7]))},{path:"/wallet",name:"wallet",component:()=>to(()=>import("./Wallet-gf85q0_k.js"),__vite__mapDeps([8,9]))},{path:"/history",name:"history",component:()=>to(()=>import("./History-CsAdnEDS.js"),__vite__mapDeps([10,11]))},{path:"/scan",name:"scan",component:cV,meta:{requiresAuth:!0}},{path:"/promoter/events/:id/transactions",name:"promoter-event-transactions",component:()=>to(()=>import("./Promoter_EventTransactions-YFkDxkxk.js"),__vite__mapDeps([12,13])),meta:{requiresWallet:!0}},{path:"/admin/events/:id/transactions",name:"admin-event-transactions",component:()=>to(()=>import("./Admin_EventTransactions-DZn5Yf80.js"),__vite__mapDeps([14,15])),meta:{requiresWallet:!0}},{path:"/:pathMatch(.*)*",redirect:{name:"login"}}]});YS.beforeEach(t=>{if(!t.meta.requiresWallet)return!0;const e=!!localStorage.getItem("auth_token"),n=!!localStorage.getItem("walletAddress");return e||n?!0:{name:"login"}});const Vv=mI(L6);Vv.use(xI());Vv.use(YS);Vv.mount("#app");export{Ba as A,Rr as B,fi as C,gg as D,Gg as E,hr as F,N4 as G,dV as J,_g as S,Is as _,Ie as a,q as b,je as c,Bt as d,Ag as e,io as f,Qe as g,vg as h,yn as i,at as j,ur as k,dt as l,fh as m,aa as n,du as o,xg as p,Se as q,Pe as r,pg as s,ke as t,RS as u,ei as v,vr as w,Ji as x,uV as y,Nf as z};

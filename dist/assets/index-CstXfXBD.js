const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Admin_Dashboard-Cq8NvvFq.js","assets/Admin_Dashboard-C8_yLsnS.css","assets/Promoter_Dashboard-Bsua2837.js","assets/Promoter_Dashboard-D_j-POJ4.css","assets/Profile-BtwTEVFM.js","assets/Profile-DiDHWdbE.css","assets/LogoutConfirm-jkfJKRiv.js","assets/LogoutConfirm-BnB5lI_g.css","assets/Wallet-BXsn65NG.js","assets/Wallet-BFXQozc4.css","assets/History-Bjj3c0XM.js","assets/History-DZMQk71l.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function q1(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const bt={},za=[],Bi=()=>{},nE=()=>!1,Yd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Y1=t=>t.startsWith("onUpdate:"),Vn=Object.assign,X1=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},$S=Object.prototype.hasOwnProperty,gt=(t,e)=>$S.call(t,e),Le=Array.isArray,Wa=t=>ou(t)==="[object Map]",Sc=t=>ou(t)==="[object Set]",Fv=t=>ou(t)==="[object Date]",He=t=>typeof t=="function",en=t=>typeof t=="string",Hi=t=>typeof t=="symbol",Et=t=>t!==null&&typeof t=="object",rE=t=>(Et(t)||He(t))&&He(t.then)&&He(t.catch),iE=Object.prototype.toString,ou=t=>iE.call(t),VS=t=>ou(t).slice(8,-1),oE=t=>ou(t)==="[object Object]",Z1=t=>en(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,cl=q1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xd=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},KS=/-\w/g,Xr=Xd(t=>t.replace(KS,e=>e.slice(1).toUpperCase())),jS=/\B([A-Z])/g,aa=Xd(t=>t.replace(jS,"-$1").toLowerCase()),Zd=Xd(t=>t.charAt(0).toUpperCase()+t.slice(1)),Fh=Xd(t=>t?`on${Zd(t)}`:""),ss=(t,e)=>!Object.is(t,e),yf=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},sE=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Yf=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Uv;const Qd=()=>Uv||(Uv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function as(t){if(Le(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=en(r)?qS(r):as(r);if(i)for(const o in i)e[o]=i[o]}return e}else if(en(t)||Et(t))return t}const GS=/;(?![^(]*\))/g,zS=/:([^]+)/,WS=/\/\*[^]*?\*\//g;function qS(t){const e={};return t.replace(WS,"").split(GS).forEach(n=>{if(n){const r=n.split(zS);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ea(t){let e="";if(en(t))e=t;else if(Le(t))for(let n=0;n<t.length;n++){const r=ea(t[n]);r&&(e+=r+" ")}else if(Et(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const YS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",XS=q1(YS);function aE(t){return!!t||t===""}function ZS(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=su(t[r],e[r]);return n}function su(t,e){if(t===e)return!0;let n=Fv(t),r=Fv(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Hi(t),r=Hi(e),n||r)return t===e;if(n=Le(t),r=Le(e),n||r)return n&&r?ZS(t,e):!1;if(n=Et(t),r=Et(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const s in t){const a=t.hasOwnProperty(s),c=e.hasOwnProperty(s);if(a&&!c||!a&&c||!su(t[s],e[s]))return!1}}return String(t)===String(e)}function Q1(t,e){return t.findIndex(n=>su(n,e))}const cE=t=>!!(t&&t.__v_isRef===!0),Ne=t=>en(t)?t:t==null?"":Le(t)||Et(t)&&(t.toString===iE||!He(t.toString))?cE(t)?Ne(t.value):JSON.stringify(t,lE,2):String(t),lE=(t,e)=>cE(e)?lE(t,e.value):Wa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],o)=>(n[Uh(r,o)+" =>"]=i,n),{})}:Sc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Uh(n))}:Hi(e)?Uh(e):Et(e)&&!Le(e)&&!oE(e)?String(e):e,Uh=(t,e="")=>{var n;return Hi(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let ur;class uE{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ur,!e&&ur&&(this.index=(ur.scopes||(ur.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ur;try{return ur=this,e()}finally{ur=n}}}on(){++this._on===1&&(this.prevScope=ur,ur=this)}off(){this._on>0&&--this._on===0&&(ur=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function QS(t){return new uE(t)}function JS(){return ur}let xt;const Hh=new WeakSet;class fE{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ur&&ur.active&&ur.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hh.has(this)&&(Hh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hE(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hv(this),pE(this);const e=xt,n=di;xt=this,di=!0;try{return this.fn()}finally{gE(this),xt=e,di=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)tg(e);this.deps=this.depsTail=void 0,Hv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wp(this)&&this.run()}get dirty(){return wp(this)}}let dE=0,ll,ul;function hE(t,e=!1){if(t.flags|=8,e){t.next=ul,ul=t;return}t.next=ll,ll=t}function J1(){dE++}function eg(){if(--dE>0)return;if(ul){let e=ul;for(ul=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ll;){let e=ll;for(ll=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function pE(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function gE(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),tg(r),e8(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function wp(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(vE(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function vE(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Il)||(t.globalVersion=Il,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!wp(t))))return;t.flags|=2;const e=t.dep,n=xt,r=di;xt=t,di=!0;try{pE(t);const i=t.fn(t._value);(e.version===0||ss(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{xt=n,di=r,gE(t),t.flags&=-3}}function tg(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)tg(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function e8(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let di=!0;const yE=[];function wo(){yE.push(di),di=!1}function bo(){const t=yE.pop();di=t===void 0?!0:t}function Hv(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=xt;xt=void 0;try{e()}finally{xt=n}}}let Il=0;class t8{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ng{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!xt||!di||xt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xt)n=this.activeLink=new t8(xt,this),xt.deps?(n.prevDep=xt.depsTail,xt.depsTail.nextDep=n,xt.depsTail=n):xt.deps=xt.depsTail=n,mE(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=xt.depsTail,n.nextDep=void 0,xt.depsTail.nextDep=n,xt.depsTail=n,xt.deps===n&&(xt.deps=r)}return n}trigger(e){this.version++,Il++,this.notify(e)}notify(e){J1();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{eg()}}}function mE(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)mE(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const bp=new WeakMap,Ys=Symbol(""),Ep=Symbol(""),Tl=Symbol("");function Ln(t,e,n){if(di&&xt){let r=bp.get(t);r||bp.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new ng),i.map=r,i.key=n),i.track()}}function oo(t,e,n,r,i,o){const s=bp.get(t);if(!s){Il++;return}const a=c=>{c&&c.trigger()};if(J1(),e==="clear")s.forEach(a);else{const c=Le(t),l=c&&Z1(n);if(c&&n==="length"){const u=Number(r);s.forEach((f,d)=>{(d==="length"||d===Tl||!Hi(d)&&d>=u)&&a(f)})}else switch((n!==void 0||s.has(void 0))&&a(s.get(n)),l&&a(s.get(Tl)),e){case"add":c?l&&a(s.get("length")):(a(s.get(Ys)),Wa(t)&&a(s.get(Ep)));break;case"delete":c||(a(s.get(Ys)),Wa(t)&&a(s.get(Ep)));break;case"set":Wa(t)&&a(s.get(Ys));break}}eg()}function va(t){const e=pt(t);return e===t?e:(Ln(e,"iterate",Tl),qr(t)?e:e.map(Sn))}function Jd(t){return Ln(t=pt(t),"iterate",Tl),t}const n8={__proto__:null,[Symbol.iterator](){return $h(this,Symbol.iterator,Sn)},concat(...t){return va(this).concat(...t.map(e=>Le(e)?va(e):e))},entries(){return $h(this,"entries",t=>(t[1]=Sn(t[1]),t))},every(t,e){return zi(this,"every",t,e,void 0,arguments)},filter(t,e){return zi(this,"filter",t,e,n=>n.map(Sn),arguments)},find(t,e){return zi(this,"find",t,e,Sn,arguments)},findIndex(t,e){return zi(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return zi(this,"findLast",t,e,Sn,arguments)},findLastIndex(t,e){return zi(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return zi(this,"forEach",t,e,void 0,arguments)},includes(...t){return Vh(this,"includes",t)},indexOf(...t){return Vh(this,"indexOf",t)},join(t){return va(this).join(t)},lastIndexOf(...t){return Vh(this,"lastIndexOf",t)},map(t,e){return zi(this,"map",t,e,void 0,arguments)},pop(){return Mc(this,"pop")},push(...t){return Mc(this,"push",t)},reduce(t,...e){return $v(this,"reduce",t,e)},reduceRight(t,...e){return $v(this,"reduceRight",t,e)},shift(){return Mc(this,"shift")},some(t,e){return zi(this,"some",t,e,void 0,arguments)},splice(...t){return Mc(this,"splice",t)},toReversed(){return va(this).toReversed()},toSorted(t){return va(this).toSorted(t)},toSpliced(...t){return va(this).toSpliced(...t)},unshift(...t){return Mc(this,"unshift",t)},values(){return $h(this,"values",Sn)}};function $h(t,e,n){const r=Jd(t),i=r[e]();return r!==t&&!qr(t)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.done||(o.value=n(o.value)),o}),i}const r8=Array.prototype;function zi(t,e,n,r,i,o){const s=Jd(t),a=s!==t&&!qr(t),c=s[e];if(c!==r8[e]){const f=c.apply(t,o);return a?Sn(f):f}let l=n;s!==t&&(a?l=function(f,d){return n.call(this,Sn(f),d,t)}:n.length>2&&(l=function(f,d){return n.call(this,f,d,t)}));const u=c.call(s,l,r);return a&&i?i(u):u}function $v(t,e,n,r){const i=Jd(t);let o=n;return i!==t&&(qr(t)?n.length>3&&(o=function(s,a,c){return n.call(this,s,a,c,t)}):o=function(s,a,c){return n.call(this,s,Sn(a),c,t)}),i[e](o,...r)}function Vh(t,e,n){const r=pt(t);Ln(r,"iterate",Tl);const i=r[e](...n);return(i===-1||i===!1)&&og(n[0])?(n[0]=pt(n[0]),r[e](...n)):i}function Mc(t,e,n=[]){wo(),J1();const r=pt(t)[e].apply(t,n);return eg(),bo(),r}const i8=q1("__proto__,__v_isRef,__isVue"),wE=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Hi));function o8(t){Hi(t)||(t=String(t));const e=pt(this);return Ln(e,"has",t),e.hasOwnProperty(t)}class bE{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?g8:_E:o?AE:xE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Le(e);if(!i){let c;if(s&&(c=n8[n]))return c;if(n==="hasOwnProperty")return o8}const a=Reflect.get(e,n,$n(e)?e:r);if((Hi(n)?wE.has(n):i8(n))||(i||Ln(e,"get",n),o))return a;if($n(a)){const c=s&&Z1(n)?a:a.value;return i&&Et(c)?Ap(c):c}return Et(a)?i?Ap(a):cc(a):a}}class EE extends bE{constructor(e=!1){super(!1,e)}set(e,n,r,i){let o=e[n];if(!this._isShallow){const c=ps(o);if(!qr(r)&&!ps(r)&&(o=pt(o),r=pt(r)),!Le(e)&&$n(o)&&!$n(r))return c||(o.value=r),!0}const s=Le(e)&&Z1(n)?Number(n)<e.length:gt(e,n),a=Reflect.set(e,n,r,$n(e)?e:i);return e===pt(i)&&(s?ss(r,o)&&oo(e,"set",n,r):oo(e,"add",n,r)),a}deleteProperty(e,n){const r=gt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&oo(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Hi(n)||!wE.has(n))&&Ln(e,"has",n),r}ownKeys(e){return Ln(e,"iterate",Le(e)?"length":Ys),Reflect.ownKeys(e)}}class s8 extends bE{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const a8=new EE,c8=new s8,l8=new EE(!0);const xp=t=>t,Cu=t=>Reflect.getPrototypeOf(t);function u8(t,e,n){return function(...r){const i=this.__v_raw,o=pt(i),s=Wa(o),a=t==="entries"||t===Symbol.iterator&&s,c=t==="keys"&&s,l=i[t](...r),u=n?xp:e?Xf:Sn;return!e&&Ln(o,"iterate",c?Ep:Ys),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:a?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function Su(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function f8(t,e){const n={get(i){const o=this.__v_raw,s=pt(o),a=pt(i);t||(ss(i,a)&&Ln(s,"get",i),Ln(s,"get",a));const{has:c}=Cu(s),l=e?xp:t?Xf:Sn;if(c.call(s,i))return l(o.get(i));if(c.call(s,a))return l(o.get(a));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!t&&Ln(pt(i),"iterate",Ys),i.size},has(i){const o=this.__v_raw,s=pt(o),a=pt(i);return t||(ss(i,a)&&Ln(s,"has",i),Ln(s,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const s=this,a=s.__v_raw,c=pt(a),l=e?xp:t?Xf:Sn;return!t&&Ln(c,"iterate",Ys),a.forEach((u,f)=>i.call(o,l(u),l(f),s))}};return Vn(n,t?{add:Su("add"),set:Su("set"),delete:Su("delete"),clear:Su("clear")}:{add(i){!e&&!qr(i)&&!ps(i)&&(i=pt(i));const o=pt(this);return Cu(o).has.call(o,i)||(o.add(i),oo(o,"add",i,i)),this},set(i,o){!e&&!qr(o)&&!ps(o)&&(o=pt(o));const s=pt(this),{has:a,get:c}=Cu(s);let l=a.call(s,i);l||(i=pt(i),l=a.call(s,i));const u=c.call(s,i);return s.set(i,o),l?ss(o,u)&&oo(s,"set",i,o):oo(s,"add",i,o),this},delete(i){const o=pt(this),{has:s,get:a}=Cu(o);let c=s.call(o,i);c||(i=pt(i),c=s.call(o,i)),a&&a.call(o,i);const l=o.delete(i);return c&&oo(o,"delete",i,void 0),l},clear(){const i=pt(this),o=i.size!==0,s=i.clear();return o&&oo(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=u8(i,t,e)}),n}function rg(t,e){const n=f8(t,e);return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(gt(n,i)&&i in r?n:r,i,o)}const d8={get:rg(!1,!1)},h8={get:rg(!1,!0)},p8={get:rg(!0,!1)};const xE=new WeakMap,AE=new WeakMap,_E=new WeakMap,g8=new WeakMap;function v8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function y8(t){return t.__v_skip||!Object.isExtensible(t)?0:v8(VS(t))}function cc(t){return ps(t)?t:ig(t,!1,a8,d8,xE)}function CE(t){return ig(t,!1,l8,h8,AE)}function Ap(t){return ig(t,!0,c8,p8,_E)}function ig(t,e,n,r,i){if(!Et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=y8(t);if(o===0)return t;const s=i.get(t);if(s)return s;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function qa(t){return ps(t)?qa(t.__v_raw):!!(t&&t.__v_isReactive)}function ps(t){return!!(t&&t.__v_isReadonly)}function qr(t){return!!(t&&t.__v_isShallow)}function og(t){return t?!!t.__v_raw:!1}function pt(t){const e=t&&t.__v_raw;return e?pt(e):t}function SE(t){return!gt(t,"__v_skip")&&Object.isExtensible(t)&&sE(t,"__v_skip",!0),t}const Sn=t=>Et(t)?cc(t):t,Xf=t=>Et(t)?Ap(t):t;function $n(t){return t?t.__v_isRef===!0:!1}function Re(t){return IE(t,!1)}function m8(t){return IE(t,!0)}function IE(t,e){return $n(t)?t:new w8(t,e)}class w8{constructor(e,n){this.dep=new ng,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:pt(e),this._value=n?e:Sn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||qr(e)||ps(e);e=r?e:pt(e),ss(e,n)&&(this._rawValue=e,this._value=r?e:Sn(e),this.dep.trigger())}}function vn(t){return $n(t)?t.value:t}const b8={get:(t,e,n)=>e==="__v_raw"?t:vn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return $n(i)&&!$n(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function TE(t){return qa(t)?t:new Proxy(t,b8)}class E8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ng(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Il-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return hE(this,!0),!0}get value(){const e=this.dep.track();return vE(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function x8(t,e,n=!1){let r,i;return He(t)?r=t:(r=t.get,i=t.set),new E8(r,i,n)}const Iu={},Zf=new WeakMap;let Rs;function A8(t,e=!1,n=Rs){if(n){let r=Zf.get(n);r||Zf.set(n,r=[]),r.push(t)}}function _8(t,e,n=bt){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:a,call:c}=n,l=E=>i?E:qr(E)||i===!1||i===0?so(E,1):so(E);let u,f,d,h,p=!1,g=!1;if($n(t)?(f=()=>t.value,p=qr(t)):qa(t)?(f=()=>l(t),p=!0):Le(t)?(g=!0,p=t.some(E=>qa(E)||qr(E)),f=()=>t.map(E=>{if($n(E))return E.value;if(qa(E))return l(E);if(He(E))return c?c(E,2):E()})):He(t)?e?f=c?()=>c(t,2):t:f=()=>{if(d){wo();try{d()}finally{bo()}}const E=Rs;Rs=u;try{return c?c(t,3,[h]):t(h)}finally{Rs=E}}:f=Bi,e&&i){const E=f,S=i===!0?1/0:i;f=()=>so(E(),S)}const y=JS(),v=()=>{u.stop(),y&&y.active&&X1(y.effects,u)};if(o&&e){const E=e;e=(...S)=>{E(...S),v()}}let m=g?new Array(t.length).fill(Iu):Iu;const w=E=>{if(!(!(u.flags&1)||!u.dirty&&!E))if(e){const S=u.run();if(i||p||(g?S.some((R,F)=>ss(R,m[F])):ss(S,m))){d&&d();const R=Rs;Rs=u;try{const F=[S,m===Iu?void 0:g&&m[0]===Iu?[]:m,h];m=S,c?c(e,3,F):e(...F)}finally{Rs=R}}}else u.run()};return a&&a(w),u=new fE(f),u.scheduler=s?()=>s(w,!1):w,h=E=>A8(E,!1,u),d=u.onStop=()=>{const E=Zf.get(u);if(E){if(c)c(E,4);else for(const S of E)S();Zf.delete(u)}},e?r?w(!0):m=u.run():s?s(w.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function so(t,e=1/0,n){if(e<=0||!Et(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,$n(t))so(t.value,e,n);else if(Le(t))for(let r=0;r<t.length;r++)so(t[r],e,n);else if(Sc(t)||Wa(t))t.forEach(r=>{so(r,e,n)});else if(oE(t)){for(const r in t)so(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&so(t[r],e,n)}return t}function au(t,e,n,r){try{return r?t(...r):t()}catch(i){eh(i,e,n)}}function $i(t,e,n,r){if(He(t)){const i=au(t,e,n,r);return i&&rE(i)&&i.catch(o=>{eh(o,e,n)}),i}if(Le(t)){const i=[];for(let o=0;o<t.length;o++)i.push($i(t[o],e,n,r));return i}}function eh(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||bt;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,c,l)===!1)return}a=a.parent}if(o){wo(),au(o,null,10,[t,c,l]),bo();return}}C8(t,n,i,r,s)}function C8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Qn=[];let _i=-1;const Ya=[];let jo=null,Sa=0;const OE=Promise.resolve();let Qf=null;function sg(t){const e=Qf||OE;return t?e.then(this?t.bind(this):t):e}function S8(t){let e=_i+1,n=Qn.length;for(;e<n;){const r=e+n>>>1,i=Qn[r],o=Ol(i);o<t||o===t&&i.flags&2?e=r+1:n=r}return e}function ag(t){if(!(t.flags&1)){const e=Ol(t),n=Qn[Qn.length-1];!n||!(t.flags&2)&&e>=Ol(n)?Qn.push(t):Qn.splice(S8(e),0,t),t.flags|=1,RE()}}function RE(){Qf||(Qf=OE.then(NE))}function I8(t){Le(t)?Ya.push(...t):jo&&t.id===-1?jo.splice(Sa+1,0,t):t.flags&1||(Ya.push(t),t.flags|=1),RE()}function Vv(t,e,n=_i+1){for(;n<Qn.length;n++){const r=Qn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Qn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function PE(t){if(Ya.length){const e=[...new Set(Ya)].sort((n,r)=>Ol(n)-Ol(r));if(Ya.length=0,jo){jo.push(...e);return}for(jo=e,Sa=0;Sa<jo.length;Sa++){const n=jo[Sa];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}jo=null,Sa=0}}const Ol=t=>t.id==null?t.flags&2?-1:1/0:t.id;function NE(t){try{for(_i=0;_i<Qn.length;_i++){const e=Qn[_i];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),au(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;_i<Qn.length;_i++){const e=Qn[_i];e&&(e.flags&=-2)}_i=-1,Qn.length=0,PE(),Qf=null,(Qn.length||Ya.length)&&NE()}}let Rr=null,kE=null;function Jf(t){const e=Rr;return Rr=t,kE=t&&t.type.__scopeId||null,e}function Xi(t,e=Rr,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&nd(-1);const o=Jf(e);let s;try{s=t(...i)}finally{Jf(o),r._d&&nd(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Nn(t,e){if(Rr===null)return t;const n=ih(Rr),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,a,c=bt]=e[i];o&&(He(o)&&(o={mounted:o,updated:o}),o.deep&&so(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:a,modifiers:c}))}return t}function xs(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let c=a.dir[r];c&&(wo(),$i(c,n,8,[t.el,a,t,e]),bo())}}const T8=Symbol("_vte"),O8=t=>t.__isTeleport,R8=Symbol("_leaveCb");function cg(t,e){t.shapeFlag&6&&t.component?(t.transition=e,cg(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ME(t,e){return He(t)?Vn({name:t.name},e,{setup:t}):t}function DE(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ed=new WeakMap;function fl(t,e,n,r,i=!1){if(Le(t)){t.forEach((p,g)=>fl(p,e&&(Le(e)?e[g]:e),n,r,i));return}if(dl(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&fl(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?ih(r.component):r.el,s=i?null:o,{i:a,r:c}=t,l=e&&e.r,u=a.refs===bt?a.refs={}:a.refs,f=a.setupState,d=pt(f),h=f===bt?nE:p=>gt(d,p);if(l!=null&&l!==c){if(Kv(e),en(l))u[l]=null,h(l)&&(f[l]=null);else if($n(l)){l.value=null;const p=e;p.k&&(u[p.k]=null)}}if(He(c))au(c,a,12,[s,u]);else{const p=en(c),g=$n(c);if(p||g){const y=()=>{if(t.f){const v=p?h(c)?f[c]:u[c]:c.value;if(i)Le(v)&&X1(v,o);else if(Le(v))v.includes(o)||v.push(o);else if(p)u[c]=[o],h(c)&&(f[c]=u[c]);else{const m=[o];c.value=m,t.k&&(u[t.k]=m)}}else p?(u[c]=s,h(c)&&(f[c]=s)):g&&(c.value=s,t.k&&(u[t.k]=s))};if(s){const v=()=>{y(),ed.delete(t)};v.id=-1,ed.set(t,v),xr(v,n)}else Kv(t),y()}}}function Kv(t){const e=ed.get(t);e&&(e.flags|=8,ed.delete(t))}Qd().requestIdleCallback;Qd().cancelIdleCallback;const dl=t=>!!t.type.__asyncLoader,BE=t=>t.type.__isKeepAlive;function P8(t,e){LE(t,"a",e)}function N8(t,e){LE(t,"da",e)}function LE(t,e,n=Un){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(th(e,r,n),n){let i=n.parent;for(;i&&i.parent;)BE(i.parent.vnode)&&k8(r,e,n,i),i=i.parent}}function k8(t,e,n,r){const i=th(e,t,r,!0);ug(()=>{X1(r[e],i)},n)}function th(t,e,n=Un,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{wo();const a=lu(n),c=$i(e,n,t,s);return a(),bo(),c});return r?i.unshift(o):i.push(o),o}}const _o=t=>(e,n=Un)=>{(!Pl||t==="sp")&&th(t,(...r)=>e(...r),n)},M8=_o("bm"),cu=_o("m"),D8=_o("bu"),B8=_o("u"),lg=_o("bum"),ug=_o("um"),L8=_o("sp"),F8=_o("rtg"),U8=_o("rtc");function H8(t,e=Un){th("ec",t,e)}const $8="components";function D$(t,e){return K8($8,t,!0,e)||t}const V8=Symbol.for("v-ndc");function K8(t,e,n=!0,r=!1){const i=Rr||Un;if(i){const o=i.type;{const a=N4(o,!1);if(a&&(a===e||a===Xr(e)||a===Zd(Xr(e))))return o}const s=jv(i[t]||o[t],e)||jv(i.appContext[t],e);return!s&&r?o:s}}function jv(t,e){return t&&(t[e]||t[Xr(e)]||t[Zd(Xr(e))])}function fg(t,e,n,r){let i;const o=n,s=Le(t);if(s||en(t)){const a=s&&qa(t);let c=!1,l=!1;a&&(c=!qr(t),l=ps(t),t=Jd(t)),i=new Array(t.length);for(let u=0,f=t.length;u<f;u++)i[u]=e(c?l?Xf(Sn(t[u])):Sn(t[u]):t[u],u,void 0,o)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,o)}else if(Et(t))if(t[Symbol.iterator])i=Array.from(t,(a,c)=>e(a,c,void 0,o));else{const a=Object.keys(t);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=e(t[u],u,c,o)}}else i=[];return i}const _p=t=>t?rx(t)?ih(t):_p(t.parent):null,hl=Vn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_p(t.parent),$root:t=>_p(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>UE(t),$forceUpdate:t=>t.f||(t.f=()=>{ag(t.update)}),$nextTick:t=>t.n||(t.n=sg.bind(t.proxy)),$watch:t=>u4.bind(t)}),Kh=(t,e)=>t!==bt&&!t.__isScriptSetup&&gt(t,e),j8={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const h=s[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(Kh(r,e))return s[e]=1,r[e];if(i!==bt&&gt(i,e))return s[e]=2,i[e];if((l=t.propsOptions[0])&&gt(l,e))return s[e]=3,o[e];if(n!==bt&&gt(n,e))return s[e]=4,n[e];Cp&&(s[e]=0)}}const u=hl[e];let f,d;if(u)return e==="$attrs"&&Ln(t.attrs,"get",""),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==bt&&gt(n,e))return s[e]=4,n[e];if(d=c.config.globalProperties,gt(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return Kh(i,e)?(i[e]=n,!0):r!==bt&&gt(r,e)?(r[e]=n,!0):gt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o,type:s}},a){let c,l;return!!(n[a]||t!==bt&&a[0]!=="$"&&gt(t,a)||Kh(e,a)||(c=o[0])&&gt(c,a)||gt(r,a)||gt(hl,a)||gt(i.config.globalProperties,a)||(l=s.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:gt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gv(t){return Le(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Cp=!0;function G8(t){const e=UE(t),n=t.proxy,r=t.ctx;Cp=!1,e.beforeCreate&&zv(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:p,activated:g,deactivated:y,beforeDestroy:v,beforeUnmount:m,destroyed:w,unmounted:E,render:S,renderTracked:R,renderTriggered:F,errorCaptured:$,serverPrefetch:U,expose:B,inheritAttrs:W,components:V,directives:L,filters:I}=e;if(l&&z8(l,r,null),s)for(const G in s){const b=s[G];He(b)&&(r[G]=b.bind(n))}if(i){const G=i.call(n,n);Et(G)&&(t.data=cc(G))}if(Cp=!0,o)for(const G in o){const b=o[G],C=He(b)?b.bind(n,n):He(b.get)?b.get.bind(n,n):Bi,T=!He(b)&&He(b.set)?b.set.bind(n):Bi,N=Ge({get:C,set:T});Object.defineProperty(r,G,{enumerable:!0,configurable:!0,get:()=>N.value,set:_=>N.value=_})}if(a)for(const G in a)FE(a[G],r,n,G);if(c){const G=He(c)?c.call(n):c;Reflect.ownKeys(G).forEach(b=>{mf(b,G[b])})}u&&zv(u,t,"c");function P(G,b){Le(b)?b.forEach(C=>G(C.bind(n))):b&&G(b.bind(n))}if(P(M8,f),P(cu,d),P(D8,h),P(B8,p),P(P8,g),P(N8,y),P(H8,$),P(U8,R),P(F8,F),P(lg,m),P(ug,E),P(L8,U),Le(B))if(B.length){const G=t.exposed||(t.exposed={});B.forEach(b=>{Object.defineProperty(G,b,{get:()=>n[b],set:C=>n[b]=C,enumerable:!0})})}else t.exposed||(t.exposed={});S&&t.render===Bi&&(t.render=S),W!=null&&(t.inheritAttrs=W),V&&(t.components=V),L&&(t.directives=L),U&&DE(t)}function z8(t,e,n=Bi){Le(t)&&(t=Sp(t));for(const r in t){const i=t[r];let o;Et(i)?"default"in i?o=hi(i.from||r,i.default,!0):o=hi(i.from||r):o=hi(i),$n(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[r]=o}}function zv(t,e,n){$i(Le(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function FE(t,e,n,r){let i=r.includes(".")?QE(n,r):()=>n[r];if(en(t)){const o=e[t];He(o)&&Gr(i,o)}else if(He(t))Gr(i,t.bind(n));else if(Et(t))if(Le(t))t.forEach(o=>FE(o,e,n,r));else{const o=He(t.handler)?t.handler.bind(n):e[t.handler];He(o)&&Gr(i,o,t)}}function UE(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let c;return a?c=a:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(l=>td(c,l,s,!0)),td(c,e,s)),Et(e)&&o.set(e,c),c}function td(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&td(t,o,n,!0),i&&i.forEach(s=>td(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const a=W8[s]||n&&n[s];t[s]=a?a(t[s],e[s]):e[s]}return t}const W8={data:Wv,props:qv,emits:qv,methods:Xc,computed:Xc,beforeCreate:Wn,created:Wn,beforeMount:Wn,mounted:Wn,beforeUpdate:Wn,updated:Wn,beforeDestroy:Wn,beforeUnmount:Wn,destroyed:Wn,unmounted:Wn,activated:Wn,deactivated:Wn,errorCaptured:Wn,serverPrefetch:Wn,components:Xc,directives:Xc,watch:Y8,provide:Wv,inject:q8};function Wv(t,e){return e?t?function(){return Vn(He(t)?t.call(this,this):t,He(e)?e.call(this,this):e)}:e:t}function q8(t,e){return Xc(Sp(t),Sp(e))}function Sp(t){if(Le(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Wn(t,e){return t?[...new Set([].concat(t,e))]:e}function Xc(t,e){return t?Vn(Object.create(null),t,e):e}function qv(t,e){return t?Le(t)&&Le(e)?[...new Set([...t,...e])]:Vn(Object.create(null),Gv(t),Gv(e??{})):e}function Y8(t,e){if(!t)return e;if(!e)return t;const n=Vn(Object.create(null),t);for(const r in e)n[r]=Wn(t[r],e[r]);return n}function HE(){return{app:null,config:{isNativeTag:nE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let X8=0;function Z8(t,e){return function(r,i=null){He(r)||(r=Vn({},r)),i!=null&&!Et(i)&&(i=null);const o=HE(),s=new WeakSet,a=[];let c=!1;const l=o.app={_uid:X8++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:M4,get config(){return o.config},set config(u){},use(u,...f){return s.has(u)||(u&&He(u.install)?(s.add(u),u.install(l,...f)):He(u)&&(s.add(u),u(l,...f))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,f){return f?(o.components[u]=f,l):o.components[u]},directive(u,f){return f?(o.directives[u]=f,l):o.directives[u]},mount(u,f,d){if(!c){const h=l._ceVNode||kt(r,i);return h.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),t(h,u,d),c=!0,l._container=u,u.__vue_app__=l,ih(h.component)}},onUnmount(u){a.push(u)},unmount(){c&&($i(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,f){return o.provides[u]=f,l},runWithContext(u){const f=Xa;Xa=l;try{return u()}finally{Xa=f}}};return l}}let Xa=null;function mf(t,e){if(Un){let n=Un.provides;const r=Un.parent&&Un.parent.provides;r===n&&(n=Un.provides=Object.create(r)),n[t]=e}}function hi(t,e,n=!1){const r=I4();if(r||Xa){let i=Xa?Xa._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&He(e)?e.call(r&&r.proxy):e}}const $E={},VE=()=>Object.create($E),KE=t=>Object.getPrototypeOf(t)===$E;function Q8(t,e,n,r=!1){const i={},o=VE();t.propsDefaults=Object.create(null),jE(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:CE(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function J8(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=pt(i),[c]=t.propsOptions;let l=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(nh(t.emitsOptions,d))continue;const h=e[d];if(c)if(gt(o,d))h!==o[d]&&(o[d]=h,l=!0);else{const p=Xr(d);i[p]=Ip(c,a,p,h,t,!1)}else h!==o[d]&&(o[d]=h,l=!0)}}}else{jE(t,e,i,o)&&(l=!0);let u;for(const f in a)(!e||!gt(e,f)&&((u=aa(f))===f||!gt(e,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=Ip(c,a,f,void 0,t,!0)):delete i[f]);if(o!==a)for(const f in o)(!e||!gt(e,f))&&(delete o[f],l=!0)}l&&oo(t.attrs,"set","")}function jE(t,e,n,r){const[i,o]=t.propsOptions;let s=!1,a;if(e)for(let c in e){if(cl(c))continue;const l=e[c];let u;i&&gt(i,u=Xr(c))?!o||!o.includes(u)?n[u]=l:(a||(a={}))[u]=l:nh(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,s=!0)}if(o){const c=pt(n),l=a||bt;for(let u=0;u<o.length;u++){const f=o[u];n[f]=Ip(i,c,f,l[f],t,!gt(l,f))}}return s}function Ip(t,e,n,r,i,o){const s=t[n];if(s!=null){const a=gt(s,"default");if(a&&r===void 0){const c=s.default;if(s.type!==Function&&!s.skipFactory&&He(c)){const{propsDefaults:l}=i;if(n in l)r=l[n];else{const u=lu(i);r=l[n]=c.call(null,e),u()}}else r=c;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!a?r=!1:s[1]&&(r===""||r===aa(n))&&(r=!0))}return r}const e4=new WeakMap;function GE(t,e,n=!1){const r=n?e4:e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let c=!1;if(!He(t)){const u=f=>{c=!0;const[d,h]=GE(f,e,!0);Vn(s,d),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!c)return Et(t)&&r.set(t,za),za;if(Le(o))for(let u=0;u<o.length;u++){const f=Xr(o[u]);Yv(f)&&(s[f]=bt)}else if(o)for(const u in o){const f=Xr(u);if(Yv(f)){const d=o[u],h=s[f]=Le(d)||He(d)?{type:d}:Vn({},d),p=h.type;let g=!1,y=!0;if(Le(p))for(let v=0;v<p.length;++v){const m=p[v],w=He(m)&&m.name;if(w==="Boolean"){g=!0;break}else w==="String"&&(y=!1)}else g=He(p)&&p.name==="Boolean";h[0]=g,h[1]=y,(g||gt(h,"default"))&&a.push(f)}}const l=[s,a];return Et(t)&&r.set(t,l),l}function Yv(t){return t[0]!=="$"&&!cl(t)}const dg=t=>t==="_"||t==="_ctx"||t==="$stable",hg=t=>Le(t)?t.map(Ci):[Ci(t)],t4=(t,e,n)=>{if(e._n)return e;const r=Xi((...i)=>hg(e(...i)),n);return r._c=!1,r},zE=(t,e,n)=>{const r=t._ctx;for(const i in t){if(dg(i))continue;const o=t[i];if(He(o))e[i]=t4(i,o,r);else if(o!=null){const s=hg(o);e[i]=()=>s}}},WE=(t,e)=>{const n=hg(e);t.slots.default=()=>n},qE=(t,e,n)=>{for(const r in e)(n||!dg(r))&&(t[r]=e[r])},n4=(t,e,n)=>{const r=t.slots=VE();if(t.vnode.shapeFlag&32){const i=e._;i?(qE(r,e,n),n&&sE(r,"_",i,!0)):zE(e,r)}else e&&WE(t,e)},r4=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=bt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?o=!1:qE(i,e,n):(o=!e.$stable,zE(e,i)),s=e}else e&&(WE(t,e),s={default:1});if(o)for(const a in i)!dg(a)&&s[a]==null&&delete i[a]},xr=m4;function i4(t){return o4(t)}function o4(t,e){const n=Qd();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=Bi,insertStaticContent:p}=t,g=(D,K,Z,re=null,Q=null,Y=null,te=void 0,ie=null,oe=!!K.dynamicChildren)=>{if(D===K)return;D&&!Dc(D,K)&&(re=k(D),_(D,Q,Y,!0),D=null),K.patchFlag===-2&&(oe=!1,K.dynamicChildren=null);const{type:le,ref:ve,shapeFlag:de}=K;switch(le){case rh:y(D,K,Z,re);break;case gs:v(D,K,Z,re);break;case wf:D==null&&m(K,Z,re,te);break;case dr:V(D,K,Z,re,Q,Y,te,ie,oe);break;default:de&1?S(D,K,Z,re,Q,Y,te,ie,oe):de&6?L(D,K,Z,re,Q,Y,te,ie,oe):(de&64||de&128)&&le.process(D,K,Z,re,Q,Y,te,ie,oe,ee)}ve!=null&&Q?fl(ve,D&&D.ref,Y,K||D,!K):ve==null&&D&&D.ref!=null&&fl(D.ref,null,Y,D,!0)},y=(D,K,Z,re)=>{if(D==null)r(K.el=a(K.children),Z,re);else{const Q=K.el=D.el;K.children!==D.children&&l(Q,K.children)}},v=(D,K,Z,re)=>{D==null?r(K.el=c(K.children||""),Z,re):K.el=D.el},m=(D,K,Z,re)=>{[D.el,D.anchor]=p(D.children,K,Z,re,D.el,D.anchor)},w=({el:D,anchor:K},Z,re)=>{let Q;for(;D&&D!==K;)Q=d(D),r(D,Z,re),D=Q;r(K,Z,re)},E=({el:D,anchor:K})=>{let Z;for(;D&&D!==K;)Z=d(D),i(D),D=Z;i(K)},S=(D,K,Z,re,Q,Y,te,ie,oe)=>{K.type==="svg"?te="svg":K.type==="math"&&(te="mathml"),D==null?R(K,Z,re,Q,Y,te,ie,oe):U(D,K,Q,Y,te,ie,oe)},R=(D,K,Z,re,Q,Y,te,ie)=>{let oe,le;const{props:ve,shapeFlag:de,transition:me,dirs:se}=D;if(oe=D.el=s(D.type,Y,ve&&ve.is,ve),de&8?u(oe,D.children):de&16&&$(D.children,oe,null,re,Q,jh(D,Y),te,ie),se&&xs(D,null,re,"created"),F(oe,D,D.scopeId,te,re),ve){for(const Ee in ve)Ee!=="value"&&!cl(Ee)&&o(oe,Ee,null,ve[Ee],Y,re);"value"in ve&&o(oe,"value",null,ve.value,Y),(le=ve.onVnodeBeforeMount)&&wi(le,re,D)}se&&xs(D,null,re,"beforeMount");const J=s4(Q,me);J&&me.beforeEnter(oe),r(oe,K,Z),((le=ve&&ve.onVnodeMounted)||J||se)&&xr(()=>{le&&wi(le,re,D),J&&me.enter(oe),se&&xs(D,null,re,"mounted")},Q)},F=(D,K,Z,re,Q)=>{if(Z&&h(D,Z),re)for(let Y=0;Y<re.length;Y++)h(D,re[Y]);if(Q){let Y=Q.subTree;if(K===Y||ex(Y.type)&&(Y.ssContent===K||Y.ssFallback===K)){const te=Q.vnode;F(D,te,te.scopeId,te.slotScopeIds,Q.parent)}}},$=(D,K,Z,re,Q,Y,te,ie,oe=0)=>{for(let le=oe;le<D.length;le++){const ve=D[le]=ie?Go(D[le]):Ci(D[le]);g(null,ve,K,Z,re,Q,Y,te,ie)}},U=(D,K,Z,re,Q,Y,te)=>{const ie=K.el=D.el;let{patchFlag:oe,dynamicChildren:le,dirs:ve}=K;oe|=D.patchFlag&16;const de=D.props||bt,me=K.props||bt;let se;if(Z&&As(Z,!1),(se=me.onVnodeBeforeUpdate)&&wi(se,Z,K,D),ve&&xs(K,D,Z,"beforeUpdate"),Z&&As(Z,!0),(de.innerHTML&&me.innerHTML==null||de.textContent&&me.textContent==null)&&u(ie,""),le?B(D.dynamicChildren,le,ie,Z,re,jh(K,Q),Y):te||b(D,K,ie,null,Z,re,jh(K,Q),Y,!1),oe>0){if(oe&16)W(ie,de,me,Z,Q);else if(oe&2&&de.class!==me.class&&o(ie,"class",null,me.class,Q),oe&4&&o(ie,"style",de.style,me.style,Q),oe&8){const J=K.dynamicProps;for(let Ee=0;Ee<J.length;Ee++){const Fe=J[Ee],Tt=de[Fe],Mt=me[Fe];(Mt!==Tt||Fe==="value")&&o(ie,Fe,Tt,Mt,Q,Z)}}oe&1&&D.children!==K.children&&u(ie,K.children)}else!te&&le==null&&W(ie,de,me,Z,Q);((se=me.onVnodeUpdated)||ve)&&xr(()=>{se&&wi(se,Z,K,D),ve&&xs(K,D,Z,"updated")},re)},B=(D,K,Z,re,Q,Y,te)=>{for(let ie=0;ie<K.length;ie++){const oe=D[ie],le=K[ie],ve=oe.el&&(oe.type===dr||!Dc(oe,le)||oe.shapeFlag&198)?f(oe.el):Z;g(oe,le,ve,null,re,Q,Y,te,!0)}},W=(D,K,Z,re,Q)=>{if(K!==Z){if(K!==bt)for(const Y in K)!cl(Y)&&!(Y in Z)&&o(D,Y,K[Y],null,Q,re);for(const Y in Z){if(cl(Y))continue;const te=Z[Y],ie=K[Y];te!==ie&&Y!=="value"&&o(D,Y,ie,te,Q,re)}"value"in Z&&o(D,"value",K.value,Z.value,Q)}},V=(D,K,Z,re,Q,Y,te,ie,oe)=>{const le=K.el=D?D.el:a(""),ve=K.anchor=D?D.anchor:a("");let{patchFlag:de,dynamicChildren:me,slotScopeIds:se}=K;se&&(ie=ie?ie.concat(se):se),D==null?(r(le,Z,re),r(ve,Z,re),$(K.children||[],Z,ve,Q,Y,te,ie,oe)):de>0&&de&64&&me&&D.dynamicChildren?(B(D.dynamicChildren,me,Z,Q,Y,te,ie),(K.key!=null||Q&&K===Q.subTree)&&YE(D,K,!0)):b(D,K,Z,ve,Q,Y,te,ie,oe)},L=(D,K,Z,re,Q,Y,te,ie,oe)=>{K.slotScopeIds=ie,D==null?K.shapeFlag&512?Q.ctx.activate(K,Z,re,te,oe):I(K,Z,re,Q,Y,te,oe):x(D,K,oe)},I=(D,K,Z,re,Q,Y,te)=>{const ie=D.component=S4(D,re,Q);if(BE(D)&&(ie.ctx.renderer=ee),T4(ie,!1,te),ie.asyncDep){if(Q&&Q.registerDep(ie,P,te),!D.el){const oe=ie.subTree=kt(gs);v(null,oe,K,Z),D.placeholder=oe.el}}else P(ie,D,K,Z,Q,Y,te)},x=(D,K,Z)=>{const re=K.component=D.component;if(v4(D,K,Z))if(re.asyncDep&&!re.asyncResolved){G(re,K,Z);return}else re.next=K,re.update();else K.el=D.el,re.vnode=K},P=(D,K,Z,re,Q,Y,te)=>{const ie=()=>{if(D.isMounted){let{next:de,bu:me,u:se,parent:J,vnode:Ee}=D;{const jn=XE(D);if(jn){de&&(de.el=Ee.el,G(D,de,te)),jn.asyncDep.then(()=>{D.isUnmounted||ie()});return}}let Fe=de,Tt;As(D,!1),de?(de.el=Ee.el,G(D,de,te)):de=Ee,me&&yf(me),(Tt=de.props&&de.props.onVnodeBeforeUpdate)&&wi(Tt,J,de,Ee),As(D,!0);const Mt=Zv(D),Pt=D.subTree;D.subTree=Mt,g(Pt,Mt,f(Pt.el),k(Pt),D,Q,Y),de.el=Mt.el,Fe===null&&y4(D,Mt.el),se&&xr(se,Q),(Tt=de.props&&de.props.onVnodeUpdated)&&xr(()=>wi(Tt,J,de,Ee),Q)}else{let de;const{el:me,props:se}=K,{bm:J,m:Ee,parent:Fe,root:Tt,type:Mt}=D,Pt=dl(K);As(D,!1),J&&yf(J),!Pt&&(de=se&&se.onVnodeBeforeMount)&&wi(de,Fe,K),As(D,!0);{Tt.ce&&Tt.ce._def.shadowRoot!==!1&&Tt.ce._injectChildStyle(Mt);const jn=D.subTree=Zv(D);g(null,jn,Z,re,D,Q,Y),K.el=jn.el}if(Ee&&xr(Ee,Q),!Pt&&(de=se&&se.onVnodeMounted)){const jn=K;xr(()=>wi(de,Fe,jn),Q)}(K.shapeFlag&256||Fe&&dl(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&D.a&&xr(D.a,Q),D.isMounted=!0,K=Z=re=null}};D.scope.on();const oe=D.effect=new fE(ie);D.scope.off();const le=D.update=oe.run.bind(oe),ve=D.job=oe.runIfDirty.bind(oe);ve.i=D,ve.id=D.uid,oe.scheduler=()=>ag(ve),As(D,!0),le()},G=(D,K,Z)=>{K.component=D;const re=D.vnode.props;D.vnode=K,D.next=null,J8(D,K.props,re,Z),r4(D,K.children,Z),wo(),Vv(D),bo()},b=(D,K,Z,re,Q,Y,te,ie,oe=!1)=>{const le=D&&D.children,ve=D?D.shapeFlag:0,de=K.children,{patchFlag:me,shapeFlag:se}=K;if(me>0){if(me&128){T(le,de,Z,re,Q,Y,te,ie,oe);return}else if(me&256){C(le,de,Z,re,Q,Y,te,ie,oe);return}}se&8?(ve&16&&H(le,Q,Y),de!==le&&u(Z,de)):ve&16?se&16?T(le,de,Z,re,Q,Y,te,ie,oe):H(le,Q,Y,!0):(ve&8&&u(Z,""),se&16&&$(de,Z,re,Q,Y,te,ie,oe))},C=(D,K,Z,re,Q,Y,te,ie,oe)=>{D=D||za,K=K||za;const le=D.length,ve=K.length,de=Math.min(le,ve);let me;for(me=0;me<de;me++){const se=K[me]=oe?Go(K[me]):Ci(K[me]);g(D[me],se,Z,null,Q,Y,te,ie,oe)}le>ve?H(D,Q,Y,!0,!1,de):$(K,Z,re,Q,Y,te,ie,oe,de)},T=(D,K,Z,re,Q,Y,te,ie,oe)=>{let le=0;const ve=K.length;let de=D.length-1,me=ve-1;for(;le<=de&&le<=me;){const se=D[le],J=K[le]=oe?Go(K[le]):Ci(K[le]);if(Dc(se,J))g(se,J,Z,null,Q,Y,te,ie,oe);else break;le++}for(;le<=de&&le<=me;){const se=D[de],J=K[me]=oe?Go(K[me]):Ci(K[me]);if(Dc(se,J))g(se,J,Z,null,Q,Y,te,ie,oe);else break;de--,me--}if(le>de){if(le<=me){const se=me+1,J=se<ve?K[se].el:re;for(;le<=me;)g(null,K[le]=oe?Go(K[le]):Ci(K[le]),Z,J,Q,Y,te,ie,oe),le++}}else if(le>me)for(;le<=de;)_(D[le],Q,Y,!0),le++;else{const se=le,J=le,Ee=new Map;for(le=J;le<=me;le++){const un=K[le]=oe?Go(K[le]):Ci(K[le]);un.key!=null&&Ee.set(un.key,le)}let Fe,Tt=0;const Mt=me-J+1;let Pt=!1,jn=0;const mi=new Array(Mt);for(le=0;le<Mt;le++)mi[le]=0;for(le=se;le<=de;le++){const un=D[le];if(Tt>=Mt){_(un,Q,Y,!0);continue}let tn;if(un.key!=null)tn=Ee.get(un.key);else for(Fe=J;Fe<=me;Fe++)if(mi[Fe-J]===0&&Dc(un,K[Fe])){tn=Fe;break}tn===void 0?_(un,Q,Y,!0):(mi[tn-J]=le+1,tn>=jn?jn=tn:Pt=!0,g(un,K[tn],Z,null,Q,Y,te,ie,oe),Tt++)}const kc=Pt?a4(mi):za;for(Fe=kc.length-1,le=Mt-1;le>=0;le--){const un=J+le,tn=K[un],ga=K[un+1],Dt=un+1<ve?ga.el||ga.placeholder:re;mi[le]===0?g(null,tn,Z,Dt,Q,Y,te,ie,oe):Pt&&(Fe<0||le!==kc[Fe]?N(tn,Z,Dt,2):Fe--)}}},N=(D,K,Z,re,Q=null)=>{const{el:Y,type:te,transition:ie,children:oe,shapeFlag:le}=D;if(le&6){N(D.component.subTree,K,Z,re);return}if(le&128){D.suspense.move(K,Z,re);return}if(le&64){te.move(D,K,Z,ee);return}if(te===dr){r(Y,K,Z);for(let de=0;de<oe.length;de++)N(oe[de],K,Z,re);r(D.anchor,K,Z);return}if(te===wf){w(D,K,Z);return}if(re!==2&&le&1&&ie)if(re===0)ie.beforeEnter(Y),r(Y,K,Z),xr(()=>ie.enter(Y),Q);else{const{leave:de,delayLeave:me,afterLeave:se}=ie,J=()=>{D.ctx.isUnmounted?i(Y):r(Y,K,Z)},Ee=()=>{Y._isLeaving&&Y[R8](!0),de(Y,()=>{J(),se&&se()})};me?me(Y,J,Ee):Ee()}else r(Y,K,Z)},_=(D,K,Z,re=!1,Q=!1)=>{const{type:Y,props:te,ref:ie,children:oe,dynamicChildren:le,shapeFlag:ve,patchFlag:de,dirs:me,cacheIndex:se}=D;if(de===-2&&(Q=!1),ie!=null&&(wo(),fl(ie,null,Z,D,!0),bo()),se!=null&&(K.renderCache[se]=void 0),ve&256){K.ctx.deactivate(D);return}const J=ve&1&&me,Ee=!dl(D);let Fe;if(Ee&&(Fe=te&&te.onVnodeBeforeUnmount)&&wi(Fe,K,D),ve&6)M(D.component,Z,re);else{if(ve&128){D.suspense.unmount(Z,re);return}J&&xs(D,null,K,"beforeUnmount"),ve&64?D.type.remove(D,K,Z,ee,re):le&&!le.hasOnce&&(Y!==dr||de>0&&de&64)?H(le,K,Z,!1,!0):(Y===dr&&de&384||!Q&&ve&16)&&H(oe,K,Z),re&&A(D)}(Ee&&(Fe=te&&te.onVnodeUnmounted)||J)&&xr(()=>{Fe&&wi(Fe,K,D),J&&xs(D,null,K,"unmounted")},Z)},A=D=>{const{type:K,el:Z,anchor:re,transition:Q}=D;if(K===dr){O(Z,re);return}if(K===wf){E(D);return}const Y=()=>{i(Z),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(D.shapeFlag&1&&Q&&!Q.persisted){const{leave:te,delayLeave:ie}=Q,oe=()=>te(Z,Y);ie?ie(D.el,Y,oe):oe()}else Y()},O=(D,K)=>{let Z;for(;D!==K;)Z=d(D),i(D),D=Z;i(K)},M=(D,K,Z)=>{const{bum:re,scope:Q,job:Y,subTree:te,um:ie,m:oe,a:le}=D;Xv(oe),Xv(le),re&&yf(re),Q.stop(),Y&&(Y.flags|=8,_(te,D,K,Z)),ie&&xr(ie,K),xr(()=>{D.isUnmounted=!0},K)},H=(D,K,Z,re=!1,Q=!1,Y=0)=>{for(let te=Y;te<D.length;te++)_(D[te],K,Z,re,Q)},k=D=>{if(D.shapeFlag&6)return k(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const K=d(D.anchor||D.el),Z=K&&K[T8];return Z?d(Z):K};let j=!1;const X=(D,K,Z)=>{D==null?K._vnode&&_(K._vnode,null,null,!0):g(K._vnode||null,D,K,null,null,null,Z),K._vnode=D,j||(j=!0,Vv(),PE(),j=!1)},ee={p:g,um:_,m:N,r:A,mt:I,mc:$,pc:b,pbc:B,n:k,o:t};return{render:X,hydrate:void 0,createApp:Z8(X)}}function jh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function As({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function s4(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function YE(t,e,n=!1){const r=t.children,i=e.children;if(Le(r)&&Le(i))for(let o=0;o<r.length;o++){const s=r[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Go(i[o]),a.el=s.el),!n&&a.patchFlag!==-2&&YE(s,a)),a.type===rh&&a.patchFlag!==-1&&(a.el=s.el),a.type===gs&&!a.el&&(a.el=s.el)}}function a4(t){const e=t.slice(),n=[0];let r,i,o,s,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<l?o=a+1:s=a;l<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=e[s];return n}function XE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:XE(e)}function Xv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const c4=Symbol.for("v-scx"),l4=()=>hi(c4);function Gr(t,e,n){return ZE(t,e,n)}function ZE(t,e,n=bt){const{immediate:r,deep:i,flush:o,once:s}=n,a=Vn({},n),c=e&&r||!e&&o!=="post";let l;if(Pl){if(o==="sync"){const h=l4();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=Bi,h.resume=Bi,h.pause=Bi,h}}const u=Un;a.call=(h,p,g)=>$i(h,u,p,g);let f=!1;o==="post"?a.scheduler=h=>{xr(h,u&&u.suspense)}:o!=="sync"&&(f=!0,a.scheduler=(h,p)=>{p?h():ag(h)}),a.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const d=_8(t,e,a);return Pl&&(l?l.push(d):c&&d()),d}function u4(t,e,n){const r=this.proxy,i=en(t)?t.includes(".")?QE(r,t):()=>r[t]:t.bind(r,r);let o;He(e)?o=e:(o=e.handler,n=e);const s=lu(this),a=ZE(i,o.bind(r),n);return s(),a}function QE(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const f4=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Xr(e)}Modifiers`]||t[`${aa(e)}Modifiers`];function d4(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||bt;let i=n;const o=e.startsWith("update:"),s=o&&f4(r,e.slice(7));s&&(s.trim&&(i=n.map(u=>en(u)?u.trim():u)),s.number&&(i=n.map(Yf)));let a,c=r[a=Fh(e)]||r[a=Fh(Xr(e))];!c&&o&&(c=r[a=Fh(aa(e))]),c&&$i(c,t,6,i);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,$i(l,t,6,i)}}const h4=new WeakMap;function JE(t,e,n=!1){const r=n?h4:e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let s={},a=!1;if(!He(t)){const c=l=>{const u=JE(l,e,!0);u&&(a=!0,Vn(s,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!o&&!a?(Et(t)&&r.set(t,null),null):(Le(o)?o.forEach(c=>s[c]=null):Vn(s,o),Et(t)&&r.set(t,s),s)}function nh(t,e){return!t||!Yd(e)?!1:(e=e.slice(2).replace(/Once$/,""),gt(t,e[0].toLowerCase()+e.slice(1))||gt(t,aa(e))||gt(t,e))}function Zv(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:a,emit:c,render:l,renderCache:u,props:f,data:d,setupState:h,ctx:p,inheritAttrs:g}=t,y=Jf(t);let v,m;try{if(n.shapeFlag&4){const E=i||r,S=E;v=Ci(l.call(S,E,u,f,h,d,p)),m=a}else{const E=e;v=Ci(E.length>1?E(f,{attrs:a,slots:s,emit:c}):E(f,null)),m=e.props?a:p4(a)}}catch(E){pl.length=0,eh(E,t,1),v=kt(gs)}let w=v;if(m&&g!==!1){const E=Object.keys(m),{shapeFlag:S}=w;E.length&&S&7&&(o&&E.some(Y1)&&(m=g4(m,o)),w=lc(w,m,!1,!0))}return n.dirs&&(w=lc(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&cg(w,n.transition),v=w,Jf(y),v}const p4=t=>{let e;for(const n in t)(n==="class"||n==="style"||Yd(n))&&((e||(e={}))[n]=t[n]);return e},g4=(t,e)=>{const n={};for(const r in t)(!Y1(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function v4(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:c}=e,l=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Qv(r,s,l):!!s;if(c&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(s[d]!==r[d]&&!nh(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?Qv(r,s,l):!0:!!s;return!1}function Qv(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!nh(n,o))return!0}return!1}function y4({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const ex=t=>t.__isSuspense;function m4(t,e){e&&e.pendingBranch?Le(t)?e.effects.push(...t):e.effects.push(t):I8(t)}const dr=Symbol.for("v-fgt"),rh=Symbol.for("v-txt"),gs=Symbol.for("v-cmt"),wf=Symbol.for("v-stc"),pl=[];let Pr=null;function _e(t=!1){pl.push(Pr=t?null:[])}function w4(){pl.pop(),Pr=pl[pl.length-1]||null}let Rl=1;function nd(t,e=!1){Rl+=t,t<0&&Pr&&e&&(Pr.hasOnce=!0)}function tx(t){return t.dynamicChildren=Rl>0?Pr||za:null,w4(),Rl>0&&Pr&&Pr.push(t),t}function Se(t,e,n,r,i,o){return tx(q(t,e,n,r,i,o,!0))}function Za(t,e,n,r,i){return tx(kt(t,e,n,r,i,!0))}function rd(t){return t?t.__v_isVNode===!0:!1}function Dc(t,e){return t.type===e.type&&t.key===e.key}const nx=({key:t})=>t??null,bf=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?en(t)||$n(t)||He(t)?{i:Rr,r:t,k:e,f:!!n}:t:null);function q(t,e=null,n=null,r=0,i=null,o=t===dr?0:1,s=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&nx(e),ref:e&&bf(e),scopeId:kE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Rr};return a?(pg(c,n),o&128&&t.normalize(c)):n&&(c.shapeFlag|=en(n)?8:16),Rl>0&&!s&&Pr&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&Pr.push(c),c}const kt=b4;function b4(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===V8)&&(t=gs),rd(t)){const a=lc(t,e,!0);return n&&pg(a,n),Rl>0&&!o&&Pr&&(a.shapeFlag&6?Pr[Pr.indexOf(t)]=a:Pr.push(a)),a.patchFlag=-2,a}if(k4(t)&&(t=t.__vccOpts),e){e=E4(e);let{class:a,style:c}=e;a&&!en(a)&&(e.class=ea(a)),Et(c)&&(og(c)&&!Le(c)&&(c=Vn({},c)),e.style=as(c))}const s=en(t)?1:ex(t)?128:O8(t)?64:Et(t)?4:He(t)?2:0;return q(t,e,n,r,i,s,o,!0)}function E4(t){return t?og(t)||KE(t)?Vn({},t):t:null}function lc(t,e,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:a,transition:c}=t,l=e?A4(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&nx(l),ref:e&&e.ref?n&&o?Le(o)?o.concat(bf(e)):[o,bf(e)]:bf(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==dr?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&lc(t.ssContent),ssFallback:t.ssFallback&&lc(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&cg(u,c.clone(u)),u}function tt(t=" ",e=0){return kt(rh,null,t,e)}function x4(t,e){const n=kt(wf,null,t);return n.staticCount=e,n}function Ye(t="",e=!1){return e?(_e(),Za(gs,null,t)):kt(gs,null,t)}function Ci(t){return t==null||typeof t=="boolean"?kt(gs):Le(t)?kt(dr,null,t.slice()):rd(t)?Go(t):kt(rh,null,String(t))}function Go(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:lc(t)}function pg(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Le(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),pg(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!KE(e)?e._ctx=Rr:i===3&&Rr&&(Rr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else He(e)?(e={default:e,_ctx:Rr},n=32):(e=String(e),r&64?(n=16,e=[tt(e)]):n=8);t.children=e,t.shapeFlag|=n}function A4(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=ea([e.class,r.class]));else if(i==="style")e.style=as([e.style,r.style]);else if(Yd(i)){const o=e[i],s=r[i];s&&o!==s&&!(Le(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function wi(t,e,n,r=null){$i(t,e,7,[n,r])}const _4=HE();let C4=0;function S4(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||_4,o={uid:C4++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new uE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:GE(r,i),emitsOptions:JE(r,i),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:r.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=d4.bind(null,o),t.ce&&t.ce(o),o}let Un=null;const I4=()=>Un||Rr;let id,Tp;{const t=Qd(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};id=e("__VUE_INSTANCE_SETTERS__",n=>Un=n),Tp=e("__VUE_SSR_SETTERS__",n=>Pl=n)}const lu=t=>{const e=Un;return id(t),t.scope.on(),()=>{t.scope.off(),id(e)}},Jv=()=>{Un&&Un.scope.off(),id(null)};function rx(t){return t.vnode.shapeFlag&4}let Pl=!1;function T4(t,e=!1,n=!1){e&&Tp(e);const{props:r,children:i}=t.vnode,o=rx(t);Q8(t,r,o,e),n4(t,i,n||e);const s=o?O4(t,e):void 0;return e&&Tp(!1),s}function O4(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,j8);const{setup:r}=n;if(r){wo();const i=t.setupContext=r.length>1?P4(t):null,o=lu(t),s=au(r,t,0,[t.props,i]),a=rE(s);if(bo(),o(),(a||t.sp)&&!dl(t)&&DE(t),a){if(s.then(Jv,Jv),e)return s.then(c=>{ey(t,c)}).catch(c=>{eh(c,t,0)});t.asyncDep=s}else ey(t,s)}else ix(t)}function ey(t,e,n){He(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Et(e)&&(t.setupState=TE(e)),ix(t)}function ix(t,e,n){const r=t.type;t.render||(t.render=r.render||Bi);{const i=lu(t);wo();try{G8(t)}finally{bo(),i()}}}const R4={get(t,e){return Ln(t,"get",""),t[e]}};function P4(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,R4),slots:t.slots,emit:t.emit,expose:e}}function ih(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(TE(SE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in hl)return hl[n](t)},has(e,n){return n in e||n in hl}})):t.proxy}function N4(t,e=!0){return He(t)?t.displayName||t.name:t.name||e&&t.__name}function k4(t){return He(t)&&"__vccOpts"in t}const Ge=(t,e)=>x8(t,e,Pl);function ox(t,e,n){try{nd(-1);const r=arguments.length;return r===2?Et(e)&&!Le(e)?rd(e)?kt(t,null,[e]):kt(t,e):kt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&rd(n)&&(n=[n]),kt(t,e,n))}finally{nd(1)}}const M4="3.5.22";let Op;const ty=typeof window<"u"&&window.trustedTypes;if(ty)try{Op=ty.createPolicy("vue",{createHTML:t=>t})}catch{}const sx=Op?t=>Op.createHTML(t):t=>t,D4="http://www.w3.org/2000/svg",B4="http://www.w3.org/1998/Math/MathML",Qi=typeof document<"u"?document:null,ny=Qi&&Qi.createElement("template"),L4={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Qi.createElementNS(D4,t):e==="mathml"?Qi.createElementNS(B4,t):n?Qi.createElement(t,{is:n}):Qi.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Qi.createTextNode(t),createComment:t=>Qi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{ny.innerHTML=sx(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=ny.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},F4=Symbol("_vtc");function U4(t,e,n){const r=t[F4];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ry=Symbol("_vod"),H4=Symbol("_vsh"),$4=Symbol(""),V4=/(?:^|;)\s*display\s*:/;function K4(t,e,n){const r=t.style,i=en(n);let o=!1;if(n&&!i){if(e)if(en(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();n[a]==null&&Ef(r,a,"")}else for(const s in e)n[s]==null&&Ef(r,s,"");for(const s in n)s==="display"&&(o=!0),Ef(r,s,n[s])}else if(i){if(e!==n){const s=r[$4];s&&(n+=";"+s),r.cssText=n,o=V4.test(n)}}else e&&t.removeAttribute("style");ry in t&&(t[ry]=o?r.display:"",t[H4]&&(r.display="none"))}const iy=/\s*!important$/;function Ef(t,e,n){if(Le(n))n.forEach(r=>Ef(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=j4(t,e);iy.test(n)?t.setProperty(aa(r),n.replace(iy,""),"important"):t[r]=n}}const oy=["Webkit","Moz","ms"],Gh={};function j4(t,e){const n=Gh[e];if(n)return n;let r=Xr(e);if(r!=="filter"&&r in t)return Gh[e]=r;r=Zd(r);for(let i=0;i<oy.length;i++){const o=oy[i]+r;if(o in t)return Gh[e]=o}return e}const sy="http://www.w3.org/1999/xlink";function ay(t,e,n,r,i,o=XS(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(sy,e.slice(6,e.length)):t.setAttributeNS(sy,e,n):n==null||o&&!aE(n)?t.removeAttribute(e):t.setAttribute(e,o?"":Hi(n)?String(n):n)}function cy(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?sx(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=aE(n):n==null&&a==="string"?(n="",s=!0):a==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(i||e)}function es(t,e,n,r){t.addEventListener(e,n,r)}function G4(t,e,n,r){t.removeEventListener(e,n,r)}const ly=Symbol("_vei");function z4(t,e,n,r,i=null){const o=t[ly]||(t[ly]={}),s=o[e];if(r&&s)s.value=r;else{const[a,c]=W4(e);if(r){const l=o[e]=X4(r,i);es(t,a,l,c)}else s&&(G4(t,a,s,c),o[e]=void 0)}}const uy=/(?:Once|Passive|Capture)$/;function W4(t){let e;if(uy.test(t)){e={};let r;for(;r=t.match(uy);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):aa(t.slice(2)),e]}let zh=0;const q4=Promise.resolve(),Y4=()=>zh||(q4.then(()=>zh=0),zh=Date.now());function X4(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$i(Z4(r,n.value),e,5,[r])};return n.value=t,n.attached=Y4(),n}function Z4(t,e){if(Le(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const fy=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Q4=(t,e,n,r,i,o)=>{const s=i==="svg";e==="class"?U4(t,r,s):e==="style"?K4(t,n,r):Yd(e)?Y1(e)||z4(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):J4(t,e,r,s))?(cy(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ay(t,e,r,s,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!en(r))?cy(t,Xr(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),ay(t,e,r,s))};function J4(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&fy(e)&&He(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return fy(e)&&en(n)?!1:e in t}const uc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Le(e)?n=>yf(e,n):e};function eI(t){t.target.composing=!0}function dy(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const go=Symbol("_assign"),wr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[go]=uc(i);const o=r||i.props&&i.props.type==="number";es(t,e?"change":"input",s=>{if(s.target.composing)return;let a=t.value;n&&(a=a.trim()),o&&(a=Yf(a)),t[go](a)}),n&&es(t,"change",()=>{t.value=t.value.trim()}),e||(es(t,"compositionstart",eI),es(t,"compositionend",dy),es(t,"change",dy))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(t[go]=uc(s),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?Yf(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===c)||(t.value=c))}},hy={deep:!0,created(t,e,n){t[go]=uc(n),es(t,"change",()=>{const r=t._modelValue,i=Nl(t),o=t.checked,s=t[go];if(Le(r)){const a=Q1(r,i),c=a!==-1;if(o&&!c)s(r.concat(i));else if(!o&&c){const l=[...r];l.splice(a,1),s(l)}}else if(Sc(r)){const a=new Set(r);o?a.add(i):a.delete(i),s(a)}else s(ax(t,o))})},mounted:py,beforeUpdate(t,e,n){t[go]=uc(n),py(t,e,n)}};function py(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Le(e))i=Q1(e,r.props.value)>-1;else if(Sc(e))i=e.has(r.props.value);else{if(e===n)return;i=su(e,ax(t,!0))}t.checked!==i&&(t.checked=i)}const tI={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Sc(e);es(t,"change",()=>{const o=Array.prototype.filter.call(t.options,s=>s.selected).map(s=>n?Yf(Nl(s)):Nl(s));t[go](t.multiple?i?new Set(o):o:o[0]),t._assigning=!0,sg(()=>{t._assigning=!1})}),t[go]=uc(r)},mounted(t,{value:e}){gy(t,e)},beforeUpdate(t,e,n){t[go]=uc(n)},updated(t,{value:e}){t._assigning||gy(t,e)}};function gy(t,e){const n=t.multiple,r=Le(e);if(!(n&&!r&&!Sc(e))){for(let i=0,o=t.options.length;i<o;i++){const s=t.options[i],a=Nl(s);if(n)if(r){const c=typeof a;c==="string"||c==="number"?s.selected=e.some(l=>String(l)===String(a)):s.selected=Q1(e,a)>-1}else s.selected=e.has(a);else if(su(Nl(s),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Nl(t){return"_value"in t?t._value:t.value}function ax(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const nI=["ctrl","shift","alt","meta"],rI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>nI.some(n=>t[`${n}Key`]&&!e.includes(n))},Ps=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((i,...o)=>{for(let s=0;s<e.length;s++){const a=rI[e[s]];if(a&&a(i,e))return}return t(i,...o)}))},iI=Vn({patchProp:Q4},L4);let vy;function oI(){return vy||(vy=i4(iI))}const sI=((...t)=>{const e=oI().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=cI(r);if(!i)return;const o=e._component;!He(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,aI(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e});function aI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function cI(t){return en(t)?document.querySelector(t):t}const lI=Symbol();var yy;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(yy||(yy={}));function uI(){const t=QS(!0),e=t.run(()=>Re({}));let n=[],r=[];const i=SE({install(o){i._a=o,o.provide(lI,i),o.config.globalProperties.$pinia=i,r.forEach(s=>n.push(s)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const Ia=typeof document<"u";function cx(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function fI(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&cx(t.default)}const ht=Object.assign;function Wh(t,e){const n={};for(const r in e){const i=e[r];n[r]=gi(i)?i.map(t):t(i)}return n}const gl=()=>{},gi=Array.isArray,lx=/#/g,dI=/&/g,hI=/\//g,pI=/=/g,gI=/\?/g,ux=/\+/g,vI=/%5B/g,yI=/%5D/g,fx=/%5E/g,mI=/%60/g,dx=/%7B/g,wI=/%7C/g,hx=/%7D/g,bI=/%20/g;function gg(t){return encodeURI(""+t).replace(wI,"|").replace(vI,"[").replace(yI,"]")}function EI(t){return gg(t).replace(dx,"{").replace(hx,"}").replace(fx,"^")}function Rp(t){return gg(t).replace(ux,"%2B").replace(bI,"+").replace(lx,"%23").replace(dI,"%26").replace(mI,"`").replace(dx,"{").replace(hx,"}").replace(fx,"^")}function xI(t){return Rp(t).replace(pI,"%3D")}function AI(t){return gg(t).replace(lx,"%23").replace(gI,"%3F")}function _I(t){return t==null?"":AI(t).replace(hI,"%2F")}function kl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const CI=/\/$/,SI=t=>t.replace(CI,"");function qh(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),o=e.slice(c+1,a>-1?a:e.length),i=t(o)),a>-1&&(r=r||e.slice(0,a),s=e.slice(a,e.length)),r=RI(r??e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:kl(s)}}function II(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function my(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function TI(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&fc(e.matched[r],n.matched[i])&&px(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function fc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function px(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!OI(t[n],e[n]))return!1;return!0}function OI(t,e){return gi(t)?wy(t,e):gi(e)?wy(e,t):t===e}function wy(t,e){return gi(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function RI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,s,a;for(s=0;s<r.length;s++)if(a=r[s],a!==".")if(a==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(s).join("/")}const Io={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ml;(function(t){t.pop="pop",t.push="push"})(Ml||(Ml={}));var vl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(vl||(vl={}));function PI(t){if(!t)if(Ia){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),SI(t)}const NI=/^[^#]+#/;function kI(t,e){return t.replace(NI,"#")+e}function MI(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const oh=()=>({left:window.scrollX,top:window.scrollY});function DI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=MI(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function by(t,e){return(history.state?history.state.position-e:-1)+t}const Pp=new Map;function BI(t,e){Pp.set(t,e)}function LI(t){const e=Pp.get(t);return Pp.delete(t),e}let FI=()=>location.protocol+"//"+location.host;function gx(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let a=i.includes(t.slice(o))?t.slice(o).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),my(c,"")}return my(n,t)+r+i}function UI(t,e,n,r){let i=[],o=[],s=null;const a=({state:d})=>{const h=gx(t,location),p=n.value,g=e.value;let y=0;if(d){if(n.value=h,e.value=d,s&&s===p){s=null;return}y=g?d.position-g.position:0}else r(h);i.forEach(v=>{v(n.value,p,{delta:y,type:Ml.pop,direction:y?y>0?vl.forward:vl.back:vl.unknown})})};function c(){s=n.value}function l(d){i.push(d);const h=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return o.push(h),h}function u(){const{history:d}=window;d.state&&d.replaceState(ht({},d.state,{scroll:oh()}),"")}function f(){for(const d of o)d();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function Ey(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?oh():null}}function HI(t){const{history:e,location:n}=window,r={value:gx(t,n)},i={value:e.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(c,l,u){const f=t.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:FI()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),i.value=l}catch(h){console.error(h),n[u?"replace":"assign"](d)}}function s(c,l){const u=ht({},e.state,Ey(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});o(c,u,!0),r.value=c}function a(c,l){const u=ht({},i.value,e.state,{forward:c,scroll:oh()});o(u.current,u,!0);const f=ht({},Ey(r.value,c,null),{position:u.position+1},l);o(c,f,!1),r.value=c}return{location:r,state:i,push:a,replace:s}}function $I(t){t=PI(t);const e=HI(t),n=UI(t,e.state,e.location,e.replace);function r(o,s=!0){s||n.pauseListeners(),history.go(o)}const i=ht({location:"",base:t,go:r,createHref:kI.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function VI(t){return typeof t=="string"||t&&typeof t=="object"}function vx(t){return typeof t=="string"||typeof t=="symbol"}const yx=Symbol("");var xy;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(xy||(xy={}));function dc(t,e){return ht(new Error,{type:t,[yx]:!0},e)}function Wi(t,e){return t instanceof Error&&yx in t&&(e==null||!!(t.type&e))}const Ay="[^/]+?",KI={sensitive:!1,strict:!1,start:!0,end:!0},jI=/[.+*?^${}()[\]/\\]/g;function GI(t,e){const n=ht({},KI,e),r=[];let i=n.start?"^":"";const o=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const d=l[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(jI,"\\$&"),h+=40;else if(d.type===1){const{value:p,repeatable:g,optional:y,regexp:v}=d;o.push({name:p,repeatable:g,optional:y});const m=v||Ay;if(m!==Ay){h+=10;try{new RegExp(`(${m})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${p}" (${m}): `+E.message)}}let w=g?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;f||(w=y&&l.length<2?`(?:/${w})`:"/"+w),y&&(w+="?"),i+=w,h+=20,y&&(h+=-8),g&&(h+=-20),m===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(s),f={};if(!u)return null;for(let d=1;d<u.length;d++){const h=u[d]||"",p=o[d-1];f[p.name]=h&&p.repeatable?h.split("/"):h}return f}function c(l){let u="",f=!1;for(const d of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of d)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:y}=h,v=p in l?l[p]:"";if(gi(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const m=gi(v)?v.join("/"):v;if(!m)if(y)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);u+=m}}return u||"/"}return{re:s,score:r,keys:o,parse:a,stringify:c}}function zI(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function mx(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const o=zI(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(_y(r))return 1;if(_y(i))return-1}return i.length-r.length}function _y(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const WI={type:0,value:""},qI=/[a-zA-Z0-9_]/;function YI(t){if(!t)return[[]];if(t==="/")return[[WI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a=0,c,l="",u="";function f(){l&&(n===0?o.push({type:0,value:l}):n===1||n===2||n===3?(o.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&f(),s()):c===":"?(f(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:qI.test(c)?d():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),s(),i}function XI(t,e,n){const r=GI(YI(t.path),n),i=ht(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function ZI(t,e){const n=[],r=new Map;e=Ty({strict:!1,end:!0,sensitive:!1},e);function i(f){return r.get(f)}function o(f,d,h){const p=!h,g=Sy(f);g.aliasOf=h&&h.record;const y=Ty(e,f),v=[g];if("alias"in f){const E=typeof f.alias=="string"?[f.alias]:f.alias;for(const S of E)v.push(Sy(ht({},g,{components:h?h.record.components:g.components,path:S,aliasOf:h?h.record:g})))}let m,w;for(const E of v){const{path:S}=E;if(d&&S[0]!=="/"){const R=d.record.path,F=R[R.length-1]==="/"?"":"/";E.path=d.record.path+(S&&F+S)}if(m=XI(E,d,y),h?h.alias.push(m):(w=w||m,w!==m&&w.alias.push(m),p&&f.name&&!Iy(m)&&s(f.name)),wx(m)&&c(m),g.children){const R=g.children;for(let F=0;F<R.length;F++)o(R[F],m,h&&h.children[F])}h=h||m}return w?()=>{s(w)}:gl}function s(f){if(vx(f)){const d=r.get(f);d&&(r.delete(f),n.splice(n.indexOf(d),1),d.children.forEach(s),d.alias.forEach(s))}else{const d=n.indexOf(f);d>-1&&(n.splice(d,1),f.record.name&&r.delete(f.record.name),f.children.forEach(s),f.alias.forEach(s))}}function a(){return n}function c(f){const d=e6(f,n);n.splice(d,0,f),f.record.name&&!Iy(f)&&r.set(f.record.name,f)}function l(f,d){let h,p={},g,y;if("name"in f&&f.name){if(h=r.get(f.name),!h)throw dc(1,{location:f});y=h.record.name,p=ht(Cy(d.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),f.params&&Cy(f.params,h.keys.map(w=>w.name))),g=h.stringify(p)}else if(f.path!=null)g=f.path,h=n.find(w=>w.re.test(g)),h&&(p=h.parse(g),y=h.record.name);else{if(h=d.name?r.get(d.name):n.find(w=>w.re.test(d.path)),!h)throw dc(1,{location:f,currentLocation:d});y=h.record.name,p=ht({},d.params,f.params),g=h.stringify(p)}const v=[];let m=h;for(;m;)v.unshift(m.record),m=m.parent;return{name:y,path:g,params:p,matched:v,meta:JI(v)}}t.forEach(f=>o(f));function u(){n.length=0,r.clear()}return{addRoute:o,resolve:l,removeRoute:s,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function Cy(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Sy(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:QI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function QI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Iy(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function JI(t){return t.reduce((e,n)=>ht(e,n.meta),{})}function Ty(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function e6(t,e){let n=0,r=e.length;for(;n!==r;){const o=n+r>>1;mx(t,e[o])<0?r=o:n=o+1}const i=t6(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function t6(t){let e=t;for(;e=e.parent;)if(wx(e)&&mx(t,e)===0)return e}function wx({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function n6(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(ux," "),s=o.indexOf("="),a=kl(s<0?o:o.slice(0,s)),c=s<0?null:kl(o.slice(s+1));if(a in e){let l=e[a];gi(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function Oy(t){let e="";for(let n in t){const r=t[n];if(n=xI(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(gi(r)?r.map(o=>o&&Rp(o)):[r&&Rp(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function r6(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=gi(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const i6=Symbol(""),Ry=Symbol(""),sh=Symbol(""),vg=Symbol(""),Np=Symbol("");function Bc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function zo(t,e,n,r,i,o=s=>s()){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=d=>{d===!1?c(dc(4,{from:n,to:e})):d instanceof Error?c(d):VI(d)?c(dc(2,{from:e,to:d})):(s&&r.enterCallbacks[i]===s&&typeof d=="function"&&s.push(d),a())},u=o(()=>t.call(r&&r.instances[i],e,n,l));let f=Promise.resolve(u);t.length<3&&(f=f.then(l)),f.catch(d=>c(d))})}function Yh(t,e,n,r,i=o=>o()){const o=[];for(const s of t)for(const a in s.components){let c=s.components[a];if(!(e!=="beforeRouteEnter"&&!s.instances[a]))if(cx(c)){const u=(c.__vccOpts||c)[e];u&&o.push(zo(u,n,r,s,a,i))}else{let l=c();o.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${s.path}"`);const f=fI(u)?u.default:u;s.mods[a]=u,s.components[a]=f;const h=(f.__vccOpts||f)[e];return h&&zo(h,n,r,s,a,i)()}))}}return o}function Py(t){const e=hi(sh),n=hi(vg),r=Ge(()=>{const c=vn(t.to);return e.resolve(c)}),i=Ge(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex(fc.bind(null,u));if(d>-1)return d;const h=Ny(c[l-2]);return l>1&&Ny(u)===h&&f[f.length-1].path!==h?f.findIndex(fc.bind(null,c[l-2])):d}),o=Ge(()=>i.value>-1&&c6(n.params,r.value.params)),s=Ge(()=>i.value>-1&&i.value===n.matched.length-1&&px(n.params,r.value.params));function a(c={}){if(a6(c)){const l=e[vn(t.replace)?"replace":"push"](vn(t.to)).catch(gl);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:Ge(()=>r.value.href),isActive:o,isExactActive:s,navigate:a}}function o6(t){return t.length===1?t[0]:t}const s6=ME({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Py,setup(t,{slots:e}){const n=cc(Py(t)),{options:r}=hi(sh),i=Ge(()=>({[ky(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ky(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&o6(e.default(n));return t.custom?o:ox("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Zi=s6;function a6(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function c6(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!gi(i)||i.length!==r.length||r.some((o,s)=>o!==i[s]))return!1}return!0}function Ny(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ky=(t,e,n)=>t??e??n,l6=ME({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=hi(Np),i=Ge(()=>t.route||r.value),o=hi(Ry,0),s=Ge(()=>{let l=vn(o);const{matched:u}=i.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=Ge(()=>i.value.matched[s.value]);mf(Ry,Ge(()=>s.value+1)),mf(i6,a),mf(Np,i);const c=Re();return Gr(()=>[c.value,a.value,t.name],([l,u,f],[d,h,p])=>{u&&(u.instances[f]=l,h&&h!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),l&&u&&(!h||!fc(u,h)||!d)&&(u.enterCallbacks[f]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,f=a.value,d=f&&f.components[u];if(!d)return My(n.default,{Component:d,route:l});const h=f.props[u],p=h?h===!0?l.params:typeof h=="function"?h(l):h:null,y=ox(d,ht({},p,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return My(n.default,{Component:y,route:l})||y}}});function My(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const bx=l6;function u6(t){const e=ZI(t.routes,t),n=t.parseQuery||n6,r=t.stringifyQuery||Oy,i=t.history,o=Bc(),s=Bc(),a=Bc(),c=m8(Io);let l=Io;Ia&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Wh.bind(null,k=>""+k),f=Wh.bind(null,_I),d=Wh.bind(null,kl);function h(k,j){let X,ee;return vx(k)?(X=e.getRecordMatcher(k),ee=j):ee=k,e.addRoute(ee,X)}function p(k){const j=e.getRecordMatcher(k);j&&e.removeRoute(j)}function g(){return e.getRoutes().map(k=>k.record)}function y(k){return!!e.getRecordMatcher(k)}function v(k,j){if(j=ht({},j||c.value),typeof k=="string"){const Z=qh(n,k,j.path),re=e.resolve({path:Z.path},j),Q=i.createHref(Z.fullPath);return ht(Z,re,{params:d(re.params),hash:kl(Z.hash),redirectedFrom:void 0,href:Q})}let X;if(k.path!=null)X=ht({},k,{path:qh(n,k.path,j.path).path});else{const Z=ht({},k.params);for(const re in Z)Z[re]==null&&delete Z[re];X=ht({},k,{params:f(Z)}),j.params=f(j.params)}const ee=e.resolve(X,j),ae=k.hash||"";ee.params=u(d(ee.params));const D=II(r,ht({},k,{hash:EI(ae),path:ee.path})),K=i.createHref(D);return ht({fullPath:D,hash:ae,query:r===Oy?r6(k.query):k.query||{}},ee,{redirectedFrom:void 0,href:K})}function m(k){return typeof k=="string"?qh(n,k,c.value.path):ht({},k)}function w(k,j){if(l!==k)return dc(8,{from:j,to:k})}function E(k){return F(k)}function S(k){return E(ht(m(k),{replace:!0}))}function R(k){const j=k.matched[k.matched.length-1];if(j&&j.redirect){const{redirect:X}=j;let ee=typeof X=="function"?X(k):X;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=m(ee):{path:ee},ee.params={}),ht({query:k.query,hash:k.hash,params:ee.path!=null?{}:k.params},ee)}}function F(k,j){const X=l=v(k),ee=c.value,ae=k.state,D=k.force,K=k.replace===!0,Z=R(X);if(Z)return F(ht(m(Z),{state:typeof Z=="object"?ht({},ae,Z.state):ae,force:D,replace:K}),j||X);const re=X;re.redirectedFrom=j;let Q;return!D&&TI(r,ee,X)&&(Q=dc(16,{to:re,from:ee}),N(ee,ee,!0,!1)),(Q?Promise.resolve(Q):B(re,ee)).catch(Y=>Wi(Y)?Wi(Y,2)?Y:T(Y):b(Y,re,ee)).then(Y=>{if(Y){if(Wi(Y,2))return F(ht({replace:K},m(Y.to),{state:typeof Y.to=="object"?ht({},ae,Y.to.state):ae,force:D}),j||re)}else Y=V(re,ee,!0,K,ae);return W(re,ee,Y),Y})}function $(k,j){const X=w(k,j);return X?Promise.reject(X):Promise.resolve()}function U(k){const j=O.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext(k):k()}function B(k,j){let X;const[ee,ae,D]=f6(k,j);X=Yh(ee.reverse(),"beforeRouteLeave",k,j);for(const Z of ee)Z.leaveGuards.forEach(re=>{X.push(zo(re,k,j))});const K=$.bind(null,k,j);return X.push(K),H(X).then(()=>{X=[];for(const Z of o.list())X.push(zo(Z,k,j));return X.push(K),H(X)}).then(()=>{X=Yh(ae,"beforeRouteUpdate",k,j);for(const Z of ae)Z.updateGuards.forEach(re=>{X.push(zo(re,k,j))});return X.push(K),H(X)}).then(()=>{X=[];for(const Z of D)if(Z.beforeEnter)if(gi(Z.beforeEnter))for(const re of Z.beforeEnter)X.push(zo(re,k,j));else X.push(zo(Z.beforeEnter,k,j));return X.push(K),H(X)}).then(()=>(k.matched.forEach(Z=>Z.enterCallbacks={}),X=Yh(D,"beforeRouteEnter",k,j,U),X.push(K),H(X))).then(()=>{X=[];for(const Z of s.list())X.push(zo(Z,k,j));return X.push(K),H(X)}).catch(Z=>Wi(Z,8)?Z:Promise.reject(Z))}function W(k,j,X){a.list().forEach(ee=>U(()=>ee(k,j,X)))}function V(k,j,X,ee,ae){const D=w(k,j);if(D)return D;const K=j===Io,Z=Ia?history.state:{};X&&(ee||K?i.replace(k.fullPath,ht({scroll:K&&Z&&Z.scroll},ae)):i.push(k.fullPath,ae)),c.value=k,N(k,j,X,K),T()}let L;function I(){L||(L=i.listen((k,j,X)=>{if(!M.listening)return;const ee=v(k),ae=R(ee);if(ae){F(ht(ae,{replace:!0,force:!0}),ee).catch(gl);return}l=ee;const D=c.value;Ia&&BI(by(D.fullPath,X.delta),oh()),B(ee,D).catch(K=>Wi(K,12)?K:Wi(K,2)?(F(ht(m(K.to),{force:!0}),ee).then(Z=>{Wi(Z,20)&&!X.delta&&X.type===Ml.pop&&i.go(-1,!1)}).catch(gl),Promise.reject()):(X.delta&&i.go(-X.delta,!1),b(K,ee,D))).then(K=>{K=K||V(ee,D,!1),K&&(X.delta&&!Wi(K,8)?i.go(-X.delta,!1):X.type===Ml.pop&&Wi(K,20)&&i.go(-1,!1)),W(ee,D,K)}).catch(gl)}))}let x=Bc(),P=Bc(),G;function b(k,j,X){T(k);const ee=P.list();return ee.length?ee.forEach(ae=>ae(k,j,X)):console.error(k),Promise.reject(k)}function C(){return G&&c.value!==Io?Promise.resolve():new Promise((k,j)=>{x.add([k,j])})}function T(k){return G||(G=!k,I(),x.list().forEach(([j,X])=>k?X(k):j()),x.reset()),k}function N(k,j,X,ee){const{scrollBehavior:ae}=t;if(!Ia||!ae)return Promise.resolve();const D=!X&&LI(by(k.fullPath,0))||(ee||!X)&&history.state&&history.state.scroll||null;return sg().then(()=>ae(k,j,D)).then(K=>K&&DI(K)).catch(K=>b(K,k,j))}const _=k=>i.go(k);let A;const O=new Set,M={currentRoute:c,listening:!0,addRoute:h,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:g,resolve:v,options:t,push:E,replace:S,go:_,back:()=>_(-1),forward:()=>_(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:P.add,isReady:C,install(k){const j=this;k.component("RouterLink",Zi),k.component("RouterView",bx),k.config.globalProperties.$router=j,Object.defineProperty(k.config.globalProperties,"$route",{enumerable:!0,get:()=>vn(c)}),Ia&&!A&&c.value===Io&&(A=!0,E(i.location).catch(ae=>{}));const X={};for(const ae in Io)Object.defineProperty(X,ae,{get:()=>c.value[ae],enumerable:!0});k.provide(sh,j),k.provide(vg,CE(X)),k.provide(Np,c);const ee=k.unmount;O.add(k),k.unmount=function(){O.delete(k),O.size<1&&(l=Io,L&&L(),L=null,c.value=Io,A=!1,G=!1),ee()}}};function H(k){return k.reduce((j,X)=>j.then(()=>U(X)),Promise.resolve())}return M}function f6(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const a=e.matched[s];a&&(t.matched.find(l=>fc(l,a))?r.push(a):n.push(a));const c=t.matched[s];c&&(e.matched.find(l=>fc(l,c))||i.push(c))}return[n,r,i]}function yg(){return hi(sh)}function ah(t){return hi(vg)}const d6={key:0,class:"site-footer",role:"contentinfo"},h6={class:"footer-inner"},p6={class:"brand-cell"},g6={class:"copy"},v6={class:"city"},y6=["href"],m6=["href"],w6={class:"addr"},b6={key:0},E6="AsiqIt",x6={__name:"AppFooter",setup(t){let e=null;try{e=ah()}catch{e=null}const n=Ge(()=>{const o=e?.path??"",s=e?.name??"";return o==="/"||o==="/scan"||o==="/login"||s==="login"}),r=new Date().getFullYear(),i=[{city:"BALIKPAPAN",email:"asiqtix.bpn@gmail.com",tel:"087879127524",telHref:"+6287879127524",addr1:"Jl. Jendral Sudirman No. 88,",addr2:"Klandasan Ilir, Balikpapan",addr3:"Kota 76113"}];return(o,s)=>n.value?Ye("",!0):(_e(),Se("footer",d6,[q("div",h6,[q("section",p6,[s[0]||(s[0]=x4('<h2 class="footer-title">Contact us</h2><nav class="socials" aria-label="social links"><a href="https://www.instagram.com/bagas.y0/" aria-label="Instagram" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2.2c3.2 0 3.6 0 4.9.1 1.2.1 1.9.2 2.4.4.6.2 1 .4 1.5.8.4.3.7.8.8 1.5.2.5.3 1.2.4 2.4.1 1.3.1 1.7.1 4.9s0 3.6-.1 4.9c-.1 1.2-.2 1.9-.4 2.4-.2.6-.4 1-.8 1.5-.3.4-.8.7-1.5.8-.5.2-1.2.3-2.4.4-1.3.1-1.7.1-4.9.1s-3.6 0-4.9-.1c-1.2-.1-1.9-.2-2.4-.4-.6-.2-1-.4-1.5-.8-.4-.3-.7-.8-.8-1.5-.2-.5-.3-1.2-.4-2.4C2.2 15.6 2.2 15.2 2.2 12s0-3.6.1-4.9c.1-1.2.2-1.9.4-2.4.2-.6.4-1 .8-1.5.3-.4.8-.7 1.5-.8.5-.2 1.2-.3 2.4-.4C8.4 2.2 8.8 2.2 12 2.2Zm0 1.8c-3.1 0-3.5 0-4.7.1-1.1.1-1.7.2-2.1.4-.5.2-.8.4-1.1.7-.3.3-.5.6-.7 1.1-.2.4-.3 1-.4 2.1-.1 1.2-.1 1.6-.1 4.7s0 3.5.1 4.7c.1 1.1.2 1.7.4 2.1.2.5.4.8.7 1.1.3.3.6.5 1.1.7.4.2 1 .3 2.1.4 1.2.1 1.6.1 4.7.1s3.5 0 4.7-.1c1.1-.1 1.7-.2 2.1-.4.5-.2.8-.4 1.1-.7.3-.3.5-.6.7-1.1.2-.4.3-1 .4-2.1.1-1.2.1-1.6.1-4.7s0-3.5-.1-4.7c-.1-1.1-.2-1.7-.4-2.1-.2-.5-.4-.8-.7-1.1-.3-.3-.6-.5-1.1-.7-.4-.2-1-.3-2.1-.4-1.2-.1-1.6-.1-4.7-.1Zm0 3.4a6.6 6.6 0 1 1 0 13.2 6.6 6.6 0 0 1 0-13.2Zm0 2a4.6 4.6 0 1 0 0 9.2 4.6 4.6 0 0 0 0-9.2Zm5-2.2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"></path></svg></a><a href="https://web.facebook.com/profile.php?id=100010487190698" aria-label="Facebook" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13.5 22v-8h2.7l.4-3h-3.1V8.6c0-.9.2-1.6 1.6-1.6h1.7V4.3c-.3 0-1.3-.1-2.5-.1-2.5 0-4.1 1.5-4.1 4.2V11H8.3v3h2.9v8h2.3Z"></path></svg></a><a href="https://www.tiktok.com/@bagaspp253" aria-label="Tiktok" class="ico"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12.67 2h2.53c.12 1.1.44 2.02 1.09 2.89.63.84 1.47 1.35 2.53 1.55v2.56c-.96-.02-1.86-.23-2.71-.65-.42-.2-.82-.45-1.22-.72l-.01 6.7c0 1.15-.23 2.22-.83 3.2a6.08 6.08 0 0 1-4.18 2.94c-.77.14-1.52.14-2.27-.05-1.65-.42-2.9-1.36-3.72-2.85-1.26-2.31-.98-5.2.69-7.22 1.28-1.52 2.93-2.24 4.93-2.21v2.66c-.52.02-1 .1-1.45.32-1.03.48-1.62 1.3-1.75 2.42-.18 1.5.67 2.86 2.03 3.3 1.72.56 3.59-.48 3.93-2.26.05-.26.07-.54.07-.81l.02-11.52Z"></path></svg></a></nav>',2)),q("small",g6," "+Ne(vn(r))+" "+Ne(E6)+". All rights reserved.",1)]),(_e(),Se(dr,null,fg(i,(a,c)=>q("section",{key:c,class:"office-cell"},[q("h3",v6,Ne(a.city),1),q("a",{class:"email",href:`mailto:${a.email}`},Ne(a.email),9,y6),q("a",{class:"tel",href:`tel:${a.telHref}`},Ne(a.tel),9,m6),q("address",w6,[q("span",null,Ne(a.addr1),1),q("span",null,Ne(a.addr2),1),a.addr3?(_e(),Se("span",b6,Ne(a.addr3),1)):Ye("",!0)])])),64))])]))}},A6={id:"app",class:"app-shell"},_6={class:"app-main"},C6={__name:"App",setup(t){return(e,n)=>(_e(),Se("div",A6,[q("main",_6,[kt(vn(bx))]),kt(x6)]))}},S6="modulepreload",I6=function(t){return"/"+t},Dy={},Ns=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");i=c(n.map(l=>{if(l=I6(l),l in Dy)return;Dy[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":S6,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},mg="/assets/logo_with_text-CUi1xsHR.png",ca=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},T6=["aria-hidden"],O6={class:"mini-nav","aria-label":"Main"},R6={key:0,class:"role-hint"},P6={__name:"SideNavSB",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=ah(),o=Ge({get:()=>n.modelValue,set:v=>r("update:modelValue",v)});function s(){o.value=!1}function a(v){v.key==="Escape"&&s()}const c=Re("customer"),l=Re(!1),f="http://localhost:3001".replace(/\/+$/,"").replace(/\/api\/?$/i,"");function d(){return(localStorage.getItem("walletAddress")||"").toString().trim().toLowerCase()}async function h(){if(typeof window>"u"||!window.ethereum?.request)return"";try{const v=await window.ethereum.request({method:"eth_accounts"}),m=Array.isArray(v)&&v[0]||"";return String(m||"").trim().toLowerCase()}catch{return""}}async function p(){const v=await h();return v||d()}async function g(){const v=await p();if(!v){c.value="customer";return}l.value=!0;try{const m=await fetch(`${f}/api/me`,{headers:{"x-wallet-address":v},credentials:"include"});if(!m.ok){c.value="customer";return}const w=await m.json().catch(()=>({}));c.value=w?.role||"customer"}catch(m){console.error("[DrawerNav] failed to load role",m),c.value="customer"}finally{l.value=!1}}function y(){g()}return cu(()=>{window.addEventListener("keydown",a),g(),typeof window<"u"&&window.ethereum?.on&&window.ethereum.on("accountsChanged",y)}),lg(()=>{window.removeEventListener("keydown",a),typeof window<"u"&&window.ethereum?.removeListener&&window.ethereum.removeListener("accountsChanged",y)}),Gr(()=>i.fullPath,s),Gr(o,v=>{v&&g()}),(v,m)=>(_e(),Se("div",{class:ea(["drawer",{"is-open":o.value}]),"aria-hidden":!o.value},[q("div",{class:"drawer-backdrop",onClick:s}),q("div",{class:"drawer-panel",role:"dialog","aria-modal":"true",onClick:m[0]||(m[0]=Ps(()=>{},["stop"]))},[q("nav",O6,[kt(vn(Zi),{class:"link","active-class":"active",to:"/home",onClick:s},{default:Xi(()=>[...m[1]||(m[1]=[tt("Home",-1)])]),_:1}),l.value?(_e(),Se("div",R6,"Loading role")):Ye("",!0),c.value==="admin"?(_e(),Za(vn(Zi),{key:1,class:"link","active-class":"active",to:"/admin/dashboard",onClick:s},{default:Xi(()=>[...m[2]||(m[2]=[tt(" Admin Dashboard ",-1)])]),_:1})):Ye("",!0),c.value==="promoter"?(_e(),Za(vn(Zi),{key:2,class:"link","active-class":"active",to:"/promoter/dashboard",onClick:s},{default:Xi(()=>[...m[3]||(m[3]=[tt(" Promoter Dashboard ",-1)])]),_:1})):Ye("",!0),c.value==="promoter"?(_e(),Za(vn(Zi),{key:3,class:"link","active-class":"active",to:"/scan",onClick:s},{default:Xi(()=>[...m[4]||(m[4]=[tt(" Scan Ticket ",-1)])]),_:1})):Ye("",!0),kt(vn(Zi),{class:"link","active-class":"active",to:"/profile",onClick:s},{default:Xi(()=>[...m[5]||(m[5]=[tt("Profile",-1)])]),_:1}),kt(vn(Zi),{class:"link","active-class":"active",to:"/wallet",onClick:s},{default:Xi(()=>[...m[6]||(m[6]=[tt("Wallet",-1)])]),_:1}),kt(vn(Zi),{class:"link","active-class":"active",to:"/history",onClick:s},{default:Xi(()=>[...m[7]||(m[7]=[tt("History",-1)])]),_:1}),kt(vn(Zi),{class:"link-btn",to:"/logout",onClick:s},{default:Xi(()=>[...m[8]||(m[8]=[tt("Log out",-1)])]),_:1})])])],10,T6))}},wg=ca(P6,[["__scopeId","data-v-b5b5ff09"]]),N6="6.15.0";function k6(t,e,n){const r=e.split("|").map(o=>o.trim());for(let o=0;o<r.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function Xn(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,o)=>(r[e[o]]=i,r),{})}function Be(t,e,n){for(let r in e){let i=e[r];const o=n?n[r]:null;o&&k6(i,o,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function Na(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Na(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Na(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Na(r,e)}: ${Na(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Tn(t,e){return t&&t.code===e}function bg(t){return Tn(t,"CALL_EXCEPTION")}function Nt(t,e,n){let r=t;{const o=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Na(n)}`);for(const s in n){if(s==="shortMessage")continue;const a=n[s];o.push(s+"="+Na(a))}}o.push(`code=${e}`),o.push(`version=${N6}`),o.length&&(t+=" ("+o.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Be(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Be(i,{shortMessage:r}),i}function we(t,e,n,r){if(!t)throw Nt(e,n,r)}function ne(t,e,n,r){we(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Ex(t,e,n){n==null&&(n=""),n&&(n=": "+n),we(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),we(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function uu(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),we(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function xx(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let o=0;o<r.length;o++)r[o]=parseInt(t.substring(i,i+2),16),i+=2;return r}ne(!1,"invalid BytesLike value",e||"value",t)}function We(t,e){return xx(t,e,!1)}function er(t,e){return xx(t,e,!0)}function Ct(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function Eg(t){return Ct(t,!0)||t instanceof Uint8Array}const By="0123456789abcdef";function Ce(t){const e=We(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=By[(i&240)>>4]+By[i&15]}return n}function Gt(t){return"0x"+t.map(e=>Ce(e).substring(2)).join("")}function Qa(t){return Ct(t,!0)?(t.length-2)/2:We(t).length}function $t(t,e,n){const r=We(t);return n!=null&&n>r.length&&we(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Ce(r.slice(e??0,n??r.length))}function Ax(t,e,n){const r=We(t);we(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),Ce(i)}function Eo(t,e){return Ax(t,e,!0)}function M6(t,e){return Ax(t,e,!1)}const ch=BigInt(0),ai=BigInt(1),ka=9007199254740991;function od(t,e){const n=lh(t,"value"),r=BigInt(Ke(e,"width"));if(we(n>>r===ch,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-ai){const i=(ai<<r)-ai;return-((~n&i)+ai)}return n}function _x(t,e){let n=Oe(t,"value");const r=BigInt(Ke(e,"width")),i=ai<<r-ai;if(n<ch){n=-n,we(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const o=(ai<<r)-ai;return(~n&o)+ai}else we(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Hs(t,e){const n=lh(t,"value"),r=BigInt(Ke(e,"bits"));return n&(ai<<r)-ai}function Oe(t,e){switch(typeof t){case"bigint":return t;case"number":return ne(Number.isInteger(t),"underflow",e||"value",t),ne(t>=-ka&&t<=ka,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){ne(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}ne(!1,"invalid BigNumberish value",e||"value",t)}function lh(t,e){const n=Oe(t,e);return we(n>=ch,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Ly="0123456789abcdef";function uh(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Ly[n>>4],e+=Ly[n&15];return BigInt(e)}return Oe(t)}function Ke(t,e){switch(typeof t){case"bigint":return ne(t>=-ka&&t<=ka,"overflow",e||"value",t),Number(t);case"number":return ne(Number.isInteger(t),"underflow",e||"value",t),ne(t>=-ka&&t<=ka,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Ke(BigInt(t),e)}catch(n){ne(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}ne(!1,"invalid numeric value",e||"value",t)}function D6(t){return Ke(uh(t))}function vs(t,e){let r=lh(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Ke(e,"width");for(we(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function cn(t){const e=lh(t,"value");if(e===ch)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const o=i*2;r[i]=parseInt(n.substring(o,o+2),16)}return r}function oi(t){let e=Ce(Eg(t)?t:cn(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Fy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Uy=BigInt(58);function B6(t){const e=We(t);let n=uh(e),r="";for(;n;)r=Fy[Number(n%Uy)]+r,n/=Uy;for(let i=0;i<e.length&&!e[i];i++)r=Fy[0]+r;return r}function L6(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return We(e)}function F6(t){const e=We(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}class Cx{filter;emitter;#e;constructor(e,n,r){this.#e=n,Be(this,{emitter:e,filter:r})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function U6(t,e,n,r,i){ne(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Sx(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let o=0;for(let s=e+1;s<n.length&&n[s]>>6===2;s++)o++;return o}return t==="OVERRUN"?n.length-e-1:0}function H6(t,e,n,r,i){return t==="OVERLONG"?(ne(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),Sx(t,e,n))}const $6=Object.freeze({error:U6,ignore:Sx,replace:H6});function V6(t,e){e==null&&(e=$6.error);const n=We(t,"bytes"),r=[];let i=0;for(;i<n.length;){const o=n[i++];if(o>>7===0){r.push(o);continue}let s=null,a=null;if((o&224)===192)s=1,a=127;else if((o&240)===224)s=2,a=2047;else if((o&248)===240)s=3,a=65535;else{(o&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+s>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let c=o&(1<<8-s-1)-1;for(let l=0;l<s;l++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),c=null;break}c=c<<6|u&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-s,n,r,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-s,n,r,c);continue}if(c<=a){i+=e("OVERLONG",i-1-s,n,r,c);continue}r.push(c)}}return r}function vo(t,e){ne(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const o=t.charCodeAt(r);ne(r<t.length&&(o&64512)===56320,"invalid surrogate pair","str",t);const s=65536+((i&1023)<<10)+(o&1023);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function K6(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function sd(t,e){return K6(V6(t,e))}function Ix(t){async function e(n,r){we(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();we(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),we(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let o=null;const s=new AbortController,a=setTimeout(()=>{o=Nt("request timeout","TIMEOUT"),s.abort()},n.timeout);r&&r.addListener(()=>{o=Nt("request cancelled","CANCELLED"),s.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:s.signal});let l;try{l=await fetch(n.url,c)}catch(h){throw clearTimeout(a),o||h}clearTimeout(a);const u={};l.headers.forEach((h,p)=>{u[p.toLowerCase()]=h});const f=await l.arrayBuffer(),d=f==null?null:new Uint8Array(f);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:d}}return e}const j6=12,G6=250;let Hy=Ix();const z6=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),W6=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Xh=!1;async function Tx(t,e){try{const n=t.match(z6);if(!n)throw new Error("invalid data");return new cs(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?L6(n[3]):Y6(n[3]))}catch{return new cs(599,"BAD REQUEST (invalid data: URI)",{},null,new Vi(t))}}function Ox(t){async function e(n,r){try{const i=n.match(W6);if(!i)throw new Error("invalid link");return new Vi(`${t}${i[2]}`)}catch{return new cs(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Vi(n))}}return e}const Tu={data:Tx,ipfs:Ox("https://gateway.ipfs.io/ipfs/")},Rx=new WeakMap;class q6{#e;#t;constructor(e){this.#e=[],this.#t=!1,Rx.set(e,()=>{if(!this.#t){this.#t=!0;for(const n of this.#e)setTimeout(()=>{n()},0);this.#e=[]}})}addListener(e){we(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){we(!this.cancelled,"cancelled","CANCELLED",{})}}function Ou(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class Vi{#e;#t;#n;#r;#i;#s;#o;#a;#f;#l;#p;#g;#c;#u;#d;get url(){return this.#s}set url(e){this.#s=String(e)}get body(){return this.#o==null?null:new Uint8Array(this.#o)}set body(e){if(e==null)this.#o=void 0,this.#a=void 0;else if(typeof e=="string")this.#o=vo(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#o=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#o=vo(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#o!=null}get method(){return this.#r?this.#r:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#r=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#n);return this.#f&&(e.authorization=`Basic ${F6(vo(this.#f))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){this.#n[String(e).toLowerCase()]=String(n)}clearHeaders(){this.#n={}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#f||null}setCredentials(e,n){ne(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#f=`${e}:${n}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#i}set timeout(e){ne(e>=0,"timeout must be non-zero","timeout",e),this.#i=e}get preflightFunc(){return this.#l||null}set preflightFunc(e){this.#l=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#d||Hy}set getUrlFunc(e){this.#d=e}constructor(e){this.#s=String(e),this.#e=!1,this.#t=!0,this.#n={},this.#r="",this.#i=3e5,this.#u={slotInterval:G6,maxAttempts:j6},this.#d=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#o?Ce(this.#o):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#h(e,n,r,i,o){if(e>=this.#u.maxAttempts)return o.makeServerError("exceeded maximum retry limit");we($y()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await X6(r);let s=this.clone();const a=(s.url.split(":")[0]||"").toLowerCase();if(a in Tu){const u=await Tu[a](s.url,Ou(i.#c));if(u instanceof cs){let f=u;if(this.processFunc){Ou(i.#c);try{f=await this.processFunc(s,f)}catch(d){(d.throttle==null||typeof d.stall!="number")&&f.makeServerError("error in post-processing function",d).assertOk()}}return f}s=u}this.preflightFunc&&(s=await this.preflightFunc(s));const c=await this.getUrlFunc(s,Ou(i.#c));let l=new cs(c.statusCode,c.statusMessage,c.headers,c.body,i);if(l.statusCode===301||l.statusCode===302){try{const u=l.headers.location||"";return s.redirect(u).#h(e+1,n,0,i,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(s,l,e))){const u=l.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof u=="string"&&u.match(/^[1-9][0-9]*$/)&&(f=parseInt(u)),s.clone().#h(e+1,n,f,i,l)}if(this.processFunc){Ou(i.#c);try{l=await this.processFunc(s,l)}catch(u){(u.throttle==null||typeof u.stall!="number")&&l.makeServerError("error in post-processing function",u).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return u.stall>=0&&(f=u.stall),s.clone().#h(e+1,n,f,i,l)}}return l}send(){return we(this.#c==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#c=new q6(this),this.#h(0,$y()+this.timeout,0,this,new cs(0,"",{},null,this))}cancel(){we(this.#c!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Rx.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();we(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Vi(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,i.#n=Object.assign({},this.#n),this.#o&&(i.#o=new Uint8Array(this.#o)),i.#a=this.#a,i}clone(){const e=new Vi(this.url);return e.#r=this.#r,this.#o&&(e.#o=this.#o),e.#a=this.#a,e.#n=Object.assign({},this.#n),e.#f=this.#f,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#l=this.#l,e.#p=this.#p,e.#g=this.#g,e.#u=Object.assign({},this.#u),e.#d=this.#d,e}static lockConfig(){Xh=!0}static getGateway(e){return Tu[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Xh)throw new Error("gateways locked");Tu[e]=n}static registerGetUrl(e){if(Xh)throw new Error("gateways locked");Hy=e}static createGetUrlFunc(e){return Ix(e)}static createDataGateway(){return Tx}static createIpfsGatewayFunc(e){return Ox(e)}}class cs{#e;#t;#n;#r;#i;#s;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#r?Ce(this.#r):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#n)}get body(){return this.#r==null?null:new Uint8Array(this.#r)}get bodyText(){try{return this.#r==null?"":sd(this.#r)}catch{we(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{we(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,n,r,i,o){this.#e=e,this.#t=n,this.#n=Object.keys(r).reduce((s,a)=>(s[a.toLowerCase()]=String(r[a]),s),{}),this.#r=i==null?null:new Uint8Array(i),this.#i=o||null,this.#s={message:""}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new cs(599,r,this.headers,this.body,this.#i||void 0);return i.#s={message:e,error:n},i}throwThrottleError(e,n){n==null?n=-1:ne(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Be(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#r!=null}get request(){return this.#i}ok(){return this.#s.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=this.#s;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{this.#r&&(i=sd(this.#r))}catch{}we(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function $y(){return new Date().getTime()}function Y6(t){return vo(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function X6(t){return new Promise(e=>setTimeout(e,t))}const Z6=BigInt(-1),ti=BigInt(0),Ma=BigInt(1),Q6=BigInt(5),ya={};let Ja="0000";for(;Ja.length<80;)Ja+=Ja;function _s(t){let e=Ja;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Lc(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Ma<<r-Ma;we(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>ti?t=od(Hs(t,r),r):t=-od(Hs(-t,r),r)}else{const i=Ma<<r;we(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Ma}return t}function Zh(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const o=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ne(o,"invalid fixed format","format",t),e=o[1]!=="u",n=parseInt(o[2]),r=parseInt(o[3])}}else if(t){const o=t,s=(a,c,l)=>o[a]==null?l:(ne(typeof o[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,o[a]),o[a]);e=s("signed","boolean",e),n=s("width","number",n),r=s("decimals","number",r)}ne(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),ne(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function J6(t,e){let n="";t<ti&&(n="-",t*=Z6);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Ja+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}class Wo{format;#e;#t;#n;_value;constructor(e,n,r){uu(e,ya,"FixedNumber"),this.#t=n,this.#e=r;const i=J6(n,r.decimals);Be(this,{format:r.name,_value:i}),this.#n=_s(r.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#r(e){ne(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#i(e,n){return e=Lc(e,this.#e,n),new Wo(ya,e,this.#e)}#s(e,n){return this.#r(e),this.#i(this.#t+e.#t,n)}addUnsafe(e){return this.#s(e)}add(e){return this.#s(e,"add")}#o(e,n){return this.#r(e),this.#i(this.#t-e.#t,n)}subUnsafe(e){return this.#o(e)}sub(e){return this.#o(e,"sub")}#a(e,n){return this.#r(e),this.#i(this.#t*e.#t/this.#n,n)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#r(e);const n=this.#t*e.#t;return we(n%this.#n===ti,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#i(n/this.#n,"mulSignal")}#f(e,n){return we(e.#t!==ti,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e),this.#i(this.#t*this.#n/e.#t,n)}divUnsafe(e){return this.#f(e)}div(e){return this.#f(e,"div")}divSignal(e){we(e.#t!==ti,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#r(e);const n=this.#t*this.#n;return we(n%e.#t===ti,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#i(n/e.#t,"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=_s(i):i<0&&(n*=_s(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<ti&&(e-=this.#n-Ma),e=this.#t/this.#n*this.#n,this.#i(e,"floor")}ceiling(){let e=this.#t;return this.#t>ti&&(e+=this.#n-Ma),e=this.#t/this.#n*this.#n,this.#i(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=Q6*_s(n-1);let i=this.value+r;const o=_s(n);return i=i/o*o,Lc(i,this.#e,"round"),new Wo(ya,i,this.#e)}isZero(){return this.#t===ti}isNegative(){return this.#t<ti}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Wo.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:Ke(n),o=Zh(r);let s=Oe(e,"value");const a=i-o.decimals;if(a>0){const c=_s(a);we(s%c===ti,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),s/=c}else a<0&&(s*=_s(-a));return Lc(s,o,"fromValue"),new Wo(ya,s,o)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ne(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=Zh(n);let o=r[2]||"0",s=r[3]||"";for(;s.length<i.decimals;)s+=Ja;we(s.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),s=s.substring(0,i.decimals);const a=BigInt(r[1]+o+s);return Lc(a,i,"fromString"),new Wo(ya,a,i)}static fromBytes(e,n){let r=uh(We(e,"value"));const i=Zh(n);return i.signed&&(r=od(r,i.width)),Lc(r,i,"fromBytes"),new Wo(ya,r,i)}}function eT(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Vy(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function Ky(t,e,n,r){const i=[];for(;n<e+1+r;){const o=Px(t,n);i.push(o.result),n+=o.consumed,we(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function Px(t,e){we(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{we(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=Vy(t,e+1,r);return n(e+1+r+i),Ky(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),Ky(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=Vy(t,e+1,r);n(e+1+r+i);const o=Ce(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:o}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=Ce(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:eT(t[e])}}function fu(t){const e=We(t,"data"),n=Px(e,0);return ne(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function jy(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Nx(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(o){r=r.concat(Nx(o))}),r.length<=55)return r.unshift(192+r.length),r;const i=jy(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(We(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=jy(e.length);return n.unshift(183+n.length),n.concat(e)}const Gy="0123456789abcdef";function ys(t){let e="0x";for(const n of Nx(t))e+=Gy[n>>4],e+=Gy[n&15];return e}function tT(t,e){let n=18;return n=Ke(e,"unit"),Wo.fromValue(t,n,{decimals:n,width:512}).toString()}function ma(t){return tT(t,18)}const tr=32,kp=new Uint8Array(tr),nT=["then"],Ru={},kx=new WeakMap;function Ls(t){return kx.get(t)}function zy(t,e){kx.set(t,e)}function Fc(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function Mp(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof ad?Mp(Ls(r),r,n):r):t.reduce((r,i,o)=>{let s=e.getValue(i);return i in r||(n&&s instanceof ad&&(s=Mp(Ls(s),s,n)),r[i]=s),r},{})}let ad=class Zc extends Array{#e;constructor(...e){const n=e[0];let r=e[1],i=(e[2]||[]).slice(),o=!0;n!==Ru&&(r=e,i=[],o=!1),super(r.length),r.forEach((c,l)=>{this[l]=c});const s=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(zy(this,Object.freeze(r.map((c,l)=>{const u=i[l];return u!=null&&s.get(u)===1?u:null}))),this.#e=[],this.#e==null&&this.#e,!o)return;Object.freeze(this);const a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const d=Ke(l,"%index");if(d<0||d>=this.length)throw new RangeError("out of result range");const h=c[d];return h instanceof Error&&Fc(`index ${d}`,h),h}if(nT.indexOf(l)>=0)return Reflect.get(c,l,u);const f=c[l];if(f instanceof Function)return function(...d){return f.apply(this===u?c:this,d)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return zy(a,Ls(this)),a}toArray(e){const n=[];return this.forEach((r,i)=>{r instanceof Error&&Fc(`index ${i}`,r),e&&r instanceof Zc&&(r=r.toArray(e)),n.push(r)}),n}toObject(e){const n=Ls(this);return n.reduce((r,i,o)=>(we(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Mp(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const r=Ls(this),i=[],o=[];for(let s=e;s<n;s++)i.push(this[s]),o.push(r[s]);return new Zc(Ru,i,o)}filter(e,n){const r=Ls(this),i=[],o=[];for(let s=0;s<this.length;s++){const a=this[s];a instanceof Error&&Fc(`index ${s}`,a),e.call(n,a,s,this)&&(i.push(a),o.push(r[s]))}return new Zc(Ru,i,o)}map(e,n){const r=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Fc(`index ${i}`,o),r.push(e.call(n,o,i,this))}return r}getValue(e){const n=Ls(this).indexOf(e);if(n===-1)return;const r=this[n];return r instanceof Error&&Fc(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,n){return new Zc(Ru,e,n)}};function Wy(t){let e=cn(t);return we(e.length<=tr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:tr,offset:e.length}),e.length!==tr&&(e=er(Gt([kp.slice(e.length%tr),e]))),e}class Co{name;type;localName;dynamic;constructor(e,n,r,i){Be(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){ne(!1,e,this.localName,n)}}class Dp{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return Gt(this.#e)}get length(){return this.#t}#n(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#n(er(e.data))}writeBytes(e){let n=er(e);const r=n.length%tr;return r&&(n=er(Gt([n,kp.slice(r)]))),this.#n(n)}writeValue(e){return this.#n(Wy(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(kp),this.#t+=tr,n=>{this.#e[e]=Wy(n)}}}class xg{allowLoose;#e;#t;#n;#r;#i;constructor(e,n,r){Be(this,{allowLoose:!!n}),this.#e=er(e),this.#n=0,this.#r=null,this.#i=r??1024,this.#t=0}get data(){return Ce(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#s(e){if(this.#r)return this.#r.#s(e);this.#n+=e,we(this.#i<1||this.#n<=this.#i*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#i} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:er(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#n,dataLength:this.dataLength}})}#o(e,n,r){let i=Math.ceil(n/tr)*tr;return this.#t+i>this.#e.length&&(this.allowLoose&&r&&this.#t+n<=this.#e.length?i=n:we(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:er(this.#e),length:this.#e.length,offset:this.#t+i})),this.#e.slice(this.#t,this.#t+i)}subReader(e){const n=new xg(this.#e.slice(this.#t+e),this.allowLoose,this.#i);return n.#r=this,n}readBytes(e,n){let r=this.#o(0,e,!!n);return this.#s(e),this.#t+=r.length,r.slice(0,e)}readValue(){return uh(this.readBytes(tr))}readIndex(){return D6(this.readBytes(tr))}}function cd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ag(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function rT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cd(t.outputLen),cd(t.blockLen)}function hc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mx(t,e){Ag(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Qh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const Dx=t=>t instanceof Uint8Array,iT=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Jh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),bi=(t,e)=>t<<32-e|t>>>e,oT=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!oT)throw new Error("Non little-endian hardware is not supported");function sT(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function fh(t){if(typeof t=="string"&&(t=sT(t)),!Dx(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function aT(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Dx(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class _g{clone(){return this._cloneInto()}}function Cg(t){const e=r=>t().update(fh(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cT(t=32){if(Qh&&typeof Qh.getRandomValues=="function")return Qh.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Bx extends _g{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,rT(e);const r=fh(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return hc(this),this.iHash.update(e),this}digestInto(e){hc(this),Ag(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Lx=(t,e,n)=>new Bx(t,e).update(n).digest();Lx.create=(t,e)=>new Bx(t,e);function lT(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,l=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+l,a,r)}class Fx extends _g{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Jh(this.buffer)}update(e){hc(this);const{view:n,buffer:r,blockLen:i}=this;e=fh(e);const o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const c=Jh(e);for(;i<=o-s;s+=i)this.process(c,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){hc(this),Mx(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let f=s;f<i;f++)n[f]=0;lT(r,i-8,BigInt(this.length*8),o),this.process(r,0);const a=Jh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%n&&e.buffer.set(r),e}}const uT=(t,e,n)=>t&e^~t&n,fT=(t,e,n)=>t&e^t&n^e&n,dT=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),To=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Oo=new Uint32Array(64);class hT extends Fx{constructor(){super(64,32,8,!1),this.A=To[0]|0,this.B=To[1]|0,this.C=To[2]|0,this.D=To[3]|0,this.E=To[4]|0,this.F=To[5]|0,this.G=To[6]|0,this.H=To[7]|0}get(){const{A:e,B:n,C:r,D:i,E:o,F:s,G:a,H:c}=this;return[e,n,r,i,o,s,a,c]}set(e,n,r,i,o,s,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,n){for(let f=0;f<16;f++,n+=4)Oo[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Oo[f-15],h=Oo[f-2],p=bi(d,7)^bi(d,18)^d>>>3,g=bi(h,17)^bi(h,19)^h>>>10;Oo[f]=g+Oo[f-7]+p+Oo[f-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=bi(a,6)^bi(a,11)^bi(a,25),h=u+d+uT(a,c,l)+dT[f]+Oo[f]|0,g=(bi(r,2)^bi(r,13)^bi(r,22))+fT(r,i,o)|0;u=l,l=c,c=a,a=s+h|0,s=o,o=i,i=r,r=h+g|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,o,s,a,c,l,u)}roundClean(){Oo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ux=Cg(()=>new hT),Pu=BigInt(2**32-1),Bp=BigInt(32);function Hx(t,e=!1){return e?{h:Number(t&Pu),l:Number(t>>Bp&Pu)}:{h:Number(t>>Bp&Pu)|0,l:Number(t&Pu)|0}}function $x(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=Hx(t[i],e);[n[i],r[i]]=[o,s]}return[n,r]}const pT=(t,e)=>BigInt(t>>>0)<<Bp|BigInt(e>>>0),gT=(t,e,n)=>t>>>n,vT=(t,e,n)=>t<<32-n|e>>>n,yT=(t,e,n)=>t>>>n|e<<32-n,mT=(t,e,n)=>t<<32-n|e>>>n,wT=(t,e,n)=>t<<64-n|e>>>n-32,bT=(t,e,n)=>t>>>n-32|e<<64-n,ET=(t,e)=>e,xT=(t,e)=>t,Vx=(t,e,n)=>t<<n|e>>>32-n,Kx=(t,e,n)=>e<<n|t>>>32-n,jx=(t,e,n)=>e<<n-32|t>>>64-n,Gx=(t,e,n)=>t<<n-32|e>>>64-n;function AT(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const _T=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),CT=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ST=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),IT=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,TT=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),OT=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0,$e={fromBig:Hx,split:$x,toBig:pT,shrSH:gT,shrSL:vT,rotrSH:yT,rotrSL:mT,rotrBH:wT,rotrBL:bT,rotr32H:ET,rotr32L:xT,rotlSH:Vx,rotlSL:Kx,rotlBH:jx,rotlBL:Gx,add:AT,add3L:_T,add3H:CT,add4L:ST,add4H:IT,add5H:OT,add5L:TT},[RT,PT]=$e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ro=new Uint32Array(80),Po=new Uint32Array(80);class NT extends Fx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:h,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y]}set(e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let w=0;w<16;w++,n+=4)Ro[w]=e.getUint32(n),Po[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const E=Ro[w-15]|0,S=Po[w-15]|0,R=$e.rotrSH(E,S,1)^$e.rotrSH(E,S,8)^$e.shrSH(E,S,7),F=$e.rotrSL(E,S,1)^$e.rotrSL(E,S,8)^$e.shrSL(E,S,7),$=Ro[w-2]|0,U=Po[w-2]|0,B=$e.rotrSH($,U,19)^$e.rotrBH($,U,61)^$e.shrSH($,U,6),W=$e.rotrSL($,U,19)^$e.rotrBL($,U,61)^$e.shrSL($,U,6),V=$e.add4L(F,W,Po[w-7],Po[w-16]),L=$e.add4H(V,R,B,Ro[w-7],Ro[w-16]);Ro[w]=L|0,Po[w]=V|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:h,Fl:p,Gh:g,Gl:y,Hh:v,Hl:m}=this;for(let w=0;w<80;w++){const E=$e.rotrSH(f,d,14)^$e.rotrSH(f,d,18)^$e.rotrBH(f,d,41),S=$e.rotrSL(f,d,14)^$e.rotrSL(f,d,18)^$e.rotrBL(f,d,41),R=f&h^~f&g,F=d&p^~d&y,$=$e.add5L(m,S,F,PT[w],Po[w]),U=$e.add5H($,v,E,R,RT[w],Ro[w]),B=$|0,W=$e.rotrSH(r,i,28)^$e.rotrBH(r,i,34)^$e.rotrBH(r,i,39),V=$e.rotrSL(r,i,28)^$e.rotrBL(r,i,34)^$e.rotrBL(r,i,39),L=r&o^r&a^o&a,I=i&s^i&c^s&c;v=g|0,m=y|0,g=h|0,y=p|0,h=f|0,p=d|0,{h:f,l:d}=$e.add(l|0,u|0,U|0,B|0),l=a|0,u=c|0,a=o|0,c=s|0,o=r|0,s=i|0;const x=$e.add3L(B,V,I);r=$e.add3H(x,U,W,L),i=x|0}({h:r,l:i}=$e.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=$e.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=$e.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=$e.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=$e.add(this.Eh|0,this.El|0,f|0,d|0),{h,l:p}=$e.add(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:y}=$e.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:v,l:m}=$e.add(this.Hh|0,this.Hl|0,v|0,m|0),this.set(r,i,o,s,a,c,l,u,f,d,h,p,g,y,v,m)}roundClean(){Ro.fill(0),Po.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const kT=Cg(()=>new NT);function MT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const qy=MT();qy.crypto||qy.msCrypto;function DT(t){switch(t){case"sha256":return Ux.create();case"sha512":return kT.create()}ne(!1,"invalid hashing algorithm name","algorithm",t)}const[zx,Wx,qx]=[[],[],[]],BT=BigInt(0),Uc=BigInt(1),LT=BigInt(2),FT=BigInt(7),UT=BigInt(256),HT=BigInt(113);for(let t=0,e=Uc,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],zx.push(2*(5*r+n)),Wx.push((t+1)*(t+2)/2%64);let i=BT;for(let o=0;o<7;o++)e=(e<<Uc^(e>>FT)*HT)%UT,e&LT&&(i^=Uc<<(Uc<<BigInt(o))-Uc);qx.push(i)}const[$T,VT]=$x(qx,!0),Yy=(t,e,n)=>n>32?jx(t,e,n):Vx(t,e,n),Xy=(t,e,n)=>n>32?Gx(t,e,n):Kx(t,e,n);function KT(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let s=0;s<10;s++)n[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const a=(s+8)%10,c=(s+2)%10,l=n[c],u=n[c+1],f=Yy(l,u,1)^n[a],d=Xy(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[s+h]^=f,t[s+h+1]^=d}let i=t[2],o=t[3];for(let s=0;s<24;s++){const a=Wx[s],c=Yy(i,o,a),l=Xy(i,o,a),u=zx[s];i=t[u],o=t[u+1],t[u]=c,t[u+1]=l}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)n[a]=t[s+a];for(let a=0;a<10;a++)t[s+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=$T[r],t[1]^=VT[r]}n.fill(0)}class Sg extends _g{constructor(e,n,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,cd(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=iT(this.state)}keccak(){KT(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){hc(this);const{blockLen:n,state:r}=this;e=fh(e);const i=e.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);for(let a=0;a<s;a++)r[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){hc(this,!1),Ag(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=e.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);e.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return cd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Mx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return e||(e=new Sg(n,r,i,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}const jT=(t,e,n)=>Cg(()=>new Sg(e,t,n)),GT=jT(1,136,256/8);let Yx=!1;const Xx=function(t){return GT(t)};let Zx=Xx;function Zt(t){const e=We(t,"data");return Ce(Zx(e))}Zt._=Xx;Zt.lock=function(){Yx=!0};Zt.register=function(t){if(Yx)throw new TypeError("keccak256 is locked");Zx=t};Object.freeze(Zt);const Qx=function(t){return DT("sha256").update(t).digest()};let Jx=Qx,eA=!1;function Ic(t){const e=We(t,"data");return Ce(Jx(e))}Ic._=Qx;Ic.lock=function(){eA=!0};Ic.register=function(t){if(eA)throw new Error("sha256 is locked");Jx=t};Object.freeze(Ic);Object.freeze(Ic);const tA=BigInt(0),dh=BigInt(1),zT=BigInt(2),hh=t=>t instanceof Uint8Array,WT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pc(t){if(!hh(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=WT[t[n]];return e}function nA(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Ig(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function gc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Xs(t){return Ig(pc(t))}function Tg(t){if(!hh(t))throw new Error("Uint8Array expected");return Ig(pc(Uint8Array.from(t).reverse()))}function vc(t,e){return gc(t.toString(16).padStart(e*2,"0"))}function Og(t,e){return vc(t,e).reverse()}function qT(t){return gc(nA(t))}function ni(t,e,n){let r;if(typeof e=="string")try{r=gc(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(hh(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Dl(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!hh(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function YT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function XT(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ZT(t){let e;for(e=0;t>tA;t>>=dh,e+=1);return e}function QT(t,e){return t>>BigInt(e)&dh}const JT=(t,e,n)=>t|(n?dh:tA)<<BigInt(e),Rg=t=>(zT<<BigInt(t-1))-dh,e0=t=>new Uint8Array(t),Zy=t=>Uint8Array.from(t);function rA(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=e0(t),i=e0(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...f)=>n(i,r,...f),c=(f=e0())=>{i=a(Zy([0]),f),r=a(),f.length!==0&&(i=a(Zy([1]),f),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=a();const h=r.slice();d.push(h),f+=r.length}return Dl(...d)};return(f,d)=>{s(),c(f);let h;for(;!(h=d(l()));)c();return s(),h}}const eO={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function du(t,e,n={}){const r=(i,o,s)=>{const a=eO[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=t[i];if(!(s&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(const[i,o]of Object.entries(e))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return t}const tO=Object.freeze(Object.defineProperty({__proto__:null,bitGet:QT,bitLen:ZT,bitMask:Rg,bitSet:JT,bytesToHex:pc,bytesToNumberBE:Xs,bytesToNumberLE:Tg,concatBytes:Dl,createHmacDrbg:rA,ensureBytes:ni,equalBytes:YT,hexToBytes:gc,hexToNumber:Ig,numberToBytesBE:vc,numberToBytesLE:Og,numberToHexUnpadded:nA,numberToVarBytesBE:qT,utf8ToBytes:XT,validateObject:du},Symbol.toStringTag,{value:"Module"}));const wn=BigInt(0),Yt=BigInt(1),Fs=BigInt(2),nO=BigInt(3),Lp=BigInt(4),Qy=BigInt(5),Jy=BigInt(8);BigInt(9);BigInt(16);function fr(t,e){const n=t%e;return n>=wn?n:e+n}function rO(t,e,n){if(n<=wn||e<wn)throw new Error("Expected power/modulo > 0");if(n===Yt)return wn;let r=Yt;for(;e>wn;)e&Yt&&(r=r*t%n),t=t*t%n,e>>=Yt;return r}function Mr(t,e,n){let r=t;for(;e-- >wn;)r*=r,r%=n;return r}function Fp(t,e){if(t===wn||e<=wn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=fr(t,e),r=e,i=wn,o=Yt;for(;n!==wn;){const a=r/n,c=r%n,l=i-o*a;r=n,n=c,i=o,o=l}if(r!==Yt)throw new Error("invert: does not exist");return fr(i,e)}function iO(t){const e=(t-Yt)/Fs;let n,r,i;for(n=t-Yt,r=0;n%Fs===wn;n/=Fs,r++);for(i=Fs;i<t&&rO(i,e,t)!==t-Yt;i++);if(r===1){const s=(t+Yt)/Lp;return function(c,l){const u=c.pow(l,s);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const o=(n+Yt)/Fs;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),f=a.pow(c,o),d=a.pow(c,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let g=a.sqr(d);h<l&&!a.eql(g,a.ONE);h++)g=a.sqr(g);const p=a.pow(u,Yt<<BigInt(l-h-1));u=a.sqr(p),f=a.mul(f,p),d=a.mul(d,u),l=h}return f}}function oO(t){if(t%Lp===nO){const e=(t+Yt)/Lp;return function(r,i){const o=r.pow(i,e);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%Jy===Qy){const e=(t-Qy)/Jy;return function(r,i){const o=r.mul(i,Fs),s=r.pow(o,e),a=r.mul(i,s),c=r.mul(r.mul(a,Fs),s),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return iO(t)}const sO=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function aO(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=sO.reduce((r,i)=>(r[i]="function",r),e);return du(t,n)}function cO(t,e,n){if(n<wn)throw new Error("Expected power > 0");if(n===wn)return t.ONE;if(n===Yt)return e;let r=t.ONE,i=e;for(;n>wn;)n&Yt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Yt;return r}function lO(t,e){const n=new Array(e.length),r=e.reduce((o,s,a)=>t.is0(s)?o:(n[a]=o,t.mul(o,s)),t.ONE),i=t.inv(r);return e.reduceRight((o,s,a)=>t.is0(s)?o:(n[a]=t.mul(o,n[a]),t.mul(o,s)),i),n}function iA(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function uO(t,e,n=!1,r={}){if(t<=wn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=iA(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=oO(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:Rg(i),ZERO:wn,ONE:Yt,create:c=>fr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return wn<=c&&c<t},is0:c=>c===wn,isOdd:c=>(c&Yt)===Yt,neg:c=>fr(-c,t),eql:(c,l)=>c===l,sqr:c=>fr(c*c,t),add:(c,l)=>fr(c+l,t),sub:(c,l)=>fr(c-l,t),mul:(c,l)=>fr(c*l,t),pow:(c,l)=>cO(a,c,l),div:(c,l)=>fr(c*Fp(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Fp(c,t),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>lO(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?Og(c,o):vc(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return n?Tg(c):Xs(c)}});return Object.freeze(a)}function oA(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function sA(t){const e=oA(t);return e+Math.ceil(e/2)}function fO(t,e,n=!1){const r=t.length,i=oA(e),o=sA(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=n?Xs(t):Tg(t),a=fr(s,e-Yt)+Yt;return n?Og(a,i):vc(a,i)}const dO=BigInt(0),t0=BigInt(1);function hO(t,e){const n=(i,o)=>{const s=o.negate();return i?s:o},r=i=>{const o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:n,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>dO;)o&t0&&(s=s.add(a)),a=a.double(),o>>=t0;return s},precomputeWindow(i,o){const{windows:s,windowSize:a}=r(o),c=[];let l=i,u=l;for(let f=0;f<s;f++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(i,o,s){const{windows:a,windowSize:c}=r(i);let l=t.ZERO,u=t.BASE;const f=BigInt(2**i-1),d=2**i,h=BigInt(i);for(let p=0;p<a;p++){const g=p*c;let y=Number(s&f);s>>=h,y>c&&(y-=d,s+=t0);const v=g,m=g+Math.abs(y)-1,w=p%2!==0,E=y<0;y===0?u=u.add(n(w,o[v])):l=l.add(n(E,o[m]))}return{p:l,f:u}},wNAFCached(i,o,s,a){const c=i._WINDOW_SIZE||1;let l=o.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&o.set(i,a(l))),this.wNAF(c,l,s)}}}function aA(t){return aO(t.Fp),du(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iA(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function pO(t){const e=aA(t);du(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:gO,hexToBytes:vO}=tO,$s={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=$s;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:gO(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=$s,n=typeof t=="string"?vO(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=$s._parseInt(n.subarray(2)),{d:s,l:a}=$s._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},ao=BigInt(0),$r=BigInt(1);BigInt(2);const em=BigInt(3);BigInt(4);function yO(t){const e=pO(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const v=g.toAffine();return Dl(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),i=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),v=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:v}});function o(p){const{a:g,b:y}=e,v=n.sqr(p),m=n.mul(v,p);return n.add(n.add(m,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&ao<p&&p<e.n}function a(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:v,n:m}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=pc(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let w;try{w=typeof p=="bigint"?p:Xs(ni("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return v&&(w=fr(w,m)),a(w),w}const l=new Map;function u(p){if(!(p instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(g,y,v){if(this.px=g,this.py=y,this.pz=v,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(v==null||!n.isValid(v))throw new Error("z required")}static fromAffine(g){const{x:y,y:v}=g||{};if(!g||!n.isValid(y)||!n.isValid(v))throw new Error("invalid affine point");if(g instanceof f)throw new Error("projective point not allowed");const m=w=>n.eql(w,n.ZERO);return m(y)&&m(v)?f.ZERO:new f(y,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(v=>v.pz));return g.map((v,m)=>v.toAffine(y[m])).map(f.fromAffine)}static fromHex(g){const y=f.fromAffine(i(ni("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return f.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const v=n.sqr(y),m=o(g);if(!n.eql(v,m))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:v,pz:m}=this,{px:w,py:E,pz:S}=g,R=n.eql(n.mul(y,S),n.mul(w,m)),F=n.eql(n.mul(v,S),n.mul(E,m));return R&&F}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,v=n.mul(y,em),{px:m,py:w,pz:E}=this;let S=n.ZERO,R=n.ZERO,F=n.ZERO,$=n.mul(m,m),U=n.mul(w,w),B=n.mul(E,E),W=n.mul(m,w);return W=n.add(W,W),F=n.mul(m,E),F=n.add(F,F),S=n.mul(g,F),R=n.mul(v,B),R=n.add(S,R),S=n.sub(U,R),R=n.add(U,R),R=n.mul(S,R),S=n.mul(W,S),F=n.mul(v,F),B=n.mul(g,B),W=n.sub($,B),W=n.mul(g,W),W=n.add(W,F),F=n.add($,$),$=n.add(F,$),$=n.add($,B),$=n.mul($,W),R=n.add(R,$),B=n.mul(w,E),B=n.add(B,B),$=n.mul(B,W),S=n.sub(S,$),F=n.mul(B,U),F=n.add(F,F),F=n.add(F,F),new f(S,R,F)}add(g){u(g);const{px:y,py:v,pz:m}=this,{px:w,py:E,pz:S}=g;let R=n.ZERO,F=n.ZERO,$=n.ZERO;const U=e.a,B=n.mul(e.b,em);let W=n.mul(y,w),V=n.mul(v,E),L=n.mul(m,S),I=n.add(y,v),x=n.add(w,E);I=n.mul(I,x),x=n.add(W,V),I=n.sub(I,x),x=n.add(y,m);let P=n.add(w,S);return x=n.mul(x,P),P=n.add(W,L),x=n.sub(x,P),P=n.add(v,m),R=n.add(E,S),P=n.mul(P,R),R=n.add(V,L),P=n.sub(P,R),$=n.mul(U,x),R=n.mul(B,L),$=n.add(R,$),R=n.sub(V,$),$=n.add(V,$),F=n.mul(R,$),V=n.add(W,W),V=n.add(V,W),L=n.mul(U,L),x=n.mul(B,x),V=n.add(V,L),L=n.sub(W,L),L=n.mul(U,L),x=n.add(x,L),W=n.mul(V,x),F=n.add(F,W),W=n.mul(P,x),R=n.mul(I,R),R=n.sub(R,W),W=n.mul(I,V),$=n.mul(P,$),$=n.add($,W),new f(R,F,$)}subtract(g){return this.add(g.negate())}is0(){return this.equals(f.ZERO)}wNAF(g){return h.wNAFCached(this,l,g,y=>{const v=n.invertBatch(y.map(m=>m.pz));return y.map((m,w)=>m.toAffine(v[w])).map(f.fromAffine)})}multiplyUnsafe(g){const y=f.ZERO;if(g===ao)return y;if(a(g),g===$r)return this;const{endo:v}=e;if(!v)return h.unsafeLadder(this,g);let{k1neg:m,k1:w,k2neg:E,k2:S}=v.splitScalar(g),R=y,F=y,$=this;for(;w>ao||S>ao;)w&$r&&(R=R.add($)),S&$r&&(F=F.add($)),$=$.double(),w>>=$r,S>>=$r;return m&&(R=R.negate()),E&&(F=F.negate()),F=new f(n.mul(F.px,v.beta),F.py,F.pz),R.add(F)}multiply(g){a(g);let y=g,v,m;const{endo:w}=e;if(w){const{k1neg:E,k1:S,k2neg:R,k2:F}=w.splitScalar(y);let{p:$,f:U}=this.wNAF(S),{p:B,f:W}=this.wNAF(F);$=h.constTimeNegate(E,$),B=h.constTimeNegate(R,B),B=new f(n.mul(B.px,w.beta),B.py,B.pz),v=$.add(B),m=U.add(W)}else{const{p:E,f:S}=this.wNAF(y);v=E,m=S}return f.normalizeZ([v,m])[0]}multiplyAndAddUnsafe(g,y,v){const m=f.BASE,w=(S,R)=>R===ao||R===$r||!S.equals(m)?S.multiplyUnsafe(R):S.multiply(R),E=w(this,y).add(w(g,v));return E.is0()?void 0:E}toAffine(g){const{px:y,py:v,pz:m}=this,w=this.is0();g==null&&(g=w?n.ONE:n.inv(m));const E=n.mul(y,g),S=n.mul(v,g),R=n.mul(m,g);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:E,y:S}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===$r)return!0;if(y)return y(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===$r?this:y?y(f,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(f,this,g)}toHex(g=!0){return pc(this.toRawBytes(g))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,h=hO(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function mO(t){const e=aA(t);return du(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function wO(t){const e=mO(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(x){return ao<x&&x<n.ORDER}function a(x){return fr(x,r)}function c(x){return Fp(x,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=yO({...e,toBytes(x,P,G){const b=P.toAffine(),C=n.toBytes(b.x),T=Dl;return G?T(Uint8Array.from([P.hasEvenY()?2:3]),C):T(Uint8Array.from([4]),C,n.toBytes(b.y))},fromBytes(x){const P=x.length,G=x[0],b=x.subarray(1);if(P===i&&(G===2||G===3)){const C=Xs(b);if(!s(C))throw new Error("Point is not on curve");const T=f(C);let N=n.sqrt(T);const _=(N&$r)===$r;return(G&1)===1!==_&&(N=n.neg(N)),{x:C,y:N}}else if(P===o&&G===4){const C=n.fromBytes(b.subarray(0,n.BYTES)),T=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:C,y:T}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),h=x=>pc(vc(x,e.nByteLength));function p(x){const P=r>>$r;return x>P}function g(x){return p(x)?a(-x):x}const y=(x,P,G)=>Xs(x.slice(P,G));class v{constructor(P,G,b){this.r=P,this.s=G,this.recovery=b,this.assertValidity()}static fromCompact(P){const G=e.nByteLength;return P=ni("compactSignature",P,G*2),new v(y(P,0,G),y(P,G,2*G))}static fromDER(P){const{r:G,s:b}=$s.toSig(ni("DER",P));return new v(G,b)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new v(this.r,this.s,P)}recoverPublicKey(P){const{r:G,s:b,recovery:C}=this,T=F(ni("msgHash",P));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");const N=C===2||C===3?G+e.n:G;if(N>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const _=(C&1)===0?"02":"03",A=l.fromHex(_+h(N)),O=c(N),M=a(-T*O),H=a(b*O),k=l.BASE.multiplyAndAddUnsafe(A,M,H);if(!k)throw new Error("point at infinify");return k.assertValidity(),k}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return gc(this.toDERHex())}toDERHex(){return $s.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gc(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(x){try{return u(x),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const x=sA(e.n);return fO(e.randomBytes(x),e.n)},precompute(x=8,P=l.BASE){return P._setWindowSize(x),P.multiply(BigInt(3)),P}};function w(x,P=!0){return l.fromPrivateKey(x).toRawBytes(P)}function E(x){const P=x instanceof Uint8Array,G=typeof x=="string",b=(P||G)&&x.length;return P?b===i||b===o:G?b===2*i||b===2*o:x instanceof l}function S(x,P,G=!0){if(E(x))throw new Error("first arg must be private key");if(!E(P))throw new Error("second arg must be public key");return l.fromHex(P).multiply(u(x)).toRawBytes(G)}const R=e.bits2int||function(x){const P=Xs(x),G=x.length*8-e.nBitLength;return G>0?P>>BigInt(G):P},F=e.bits2int_modN||function(x){return a(R(x))},$=Rg(e.nBitLength);function U(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(ao<=x&&x<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return vc(x,e.nByteLength)}function B(x,P,G=W){if(["recovered","canonical"].some(X=>X in G))throw new Error("sign() legacy options not supported");const{hash:b,randomBytes:C}=e;let{lowS:T,prehash:N,extraEntropy:_}=G;T==null&&(T=!0),x=ni("msgHash",x),N&&(x=ni("prehashed msgHash",b(x)));const A=F(x),O=u(P),M=[U(O),U(A)];if(_!=null){const X=_===!0?C(n.BYTES):_;M.push(ni("extraEntropy",X))}const H=Dl(...M),k=A;function j(X){const ee=R(X);if(!d(ee))return;const ae=c(ee),D=l.BASE.multiply(ee).toAffine(),K=a(D.x);if(K===ao)return;const Z=a(ae*a(k+K*O));if(Z===ao)return;let re=(D.x===K?0:2)|Number(D.y&$r),Q=Z;return T&&p(Z)&&(Q=g(Z),re^=1),new v(K,Q,re)}return{seed:H,k2sig:j}}const W={lowS:e.lowS,prehash:!1},V={lowS:e.lowS,prehash:!1};function L(x,P,G=W){const{seed:b,k2sig:C}=B(x,P,G),T=e;return rA(T.hash.outputLen,T.nByteLength,T.hmac)(b,C)}l.BASE._setWindowSize(8);function I(x,P,G,b=V){const C=x;if(P=ni("msgHash",P),G=ni("publicKey",G),"strict"in b)throw new Error("options.strict was renamed to lowS");const{lowS:T,prehash:N}=b;let _,A;try{if(typeof C=="string"||C instanceof Uint8Array)try{_=v.fromDER(C)}catch(D){if(!(D instanceof $s.Err))throw D;_=v.fromCompact(C)}else if(typeof C=="object"&&typeof C.r=="bigint"&&typeof C.s=="bigint"){const{r:D,s:K}=C;_=new v(D,K)}else throw new Error("PARSE");A=l.fromHex(G)}catch(D){if(D.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(T&&_.hasHighS())return!1;N&&(P=e.hash(P));const{r:O,s:M}=_,H=F(P),k=c(M),j=a(H*k),X=a(O*k),ee=l.BASE.multiplyAndAddUnsafe(A,j,X)?.toAffine();return ee?a(ee.x)===O:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:S,sign:L,verify:I,ProjectivePoint:l,Signature:v,utils:m}}function bO(t){return{hash:t,hmac:(e,...n)=>Lx(t,e,aT(...n)),randomBytes:cT}}function EO(t,e){const n=r=>wO({...t,...bO(r)});return Object.freeze({...n(e),create:n})}const cA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tm=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xO=BigInt(1),Up=BigInt(2),nm=(t,e)=>(t+e/Up)/e;function AO(t){const e=cA,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,f=Mr(u,n,e)*u%e,d=Mr(f,n,e)*u%e,h=Mr(d,Up,e)*l%e,p=Mr(h,i,e)*h%e,g=Mr(p,o,e)*p%e,y=Mr(g,a,e)*g%e,v=Mr(y,c,e)*y%e,m=Mr(v,a,e)*g%e,w=Mr(m,n,e)*u%e,E=Mr(w,s,e)*p%e,S=Mr(E,r,e)*l%e,R=Mr(S,Up,e);if(!Hp.eql(Hp.sqr(R),t))throw new Error("Cannot find square root");return R}const Hp=uO(cA,void 0,void 0,{sqrt:AO}),Uo=EO({a:BigInt(0),b:BigInt(7),Fp:Hp,n:tm,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=tm,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-xO*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=nm(o*t,e),c=nm(-r*t,e);let l=fr(t-a*n-c*i,e),u=fr(-a*r-c*o,e);const f=l>s,d=u>s;if(f&&(l=e-l),d&&(u=e-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},Ux);BigInt(0);Uo.ProjectivePoint;const Bl="0x0000000000000000000000000000000000000000",rm="0x0000000000000000000000000000000000000000000000000000000000000000",im=BigInt(0),om=BigInt(1),sm=BigInt(2),am=BigInt(27),cm=BigInt(28),Nu=BigInt(35),wa={};function lm(t){return Eo(cn(t),32)}class Vt{#e;#t;#n;#r;get r(){return this.#e}set r(e){ne(Qa(e)===32,"invalid r","value",e),this.#e=Ce(e)}get s(){return ne(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){ne(Qa(e)===32,"invalid s","value",e),this.#t=Ce(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#n}set v(e){const n=Ke(e,"value");ne(n===27||n===28,"invalid v","v",e),this.#n=n}get networkV(){return this.#r}get legacyChainId(){const e=this.networkV;return e==null?null:Vt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=We(this.s);return this.yParity&&(e[0]|=128),Ce(e)}get compactSerialized(){return Gt([this.r,this.yParityAndS])}get serialized(){return Gt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,n,r,i){uu(e,wa,"Signature"),this.#e=n,this.#t=r,this.#n=i,this.#r=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Vt(wa,this.r,this._s,this.v);return this.networkV&&(e.#r=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Oe(e,"v");return n==am||n==cm?im:(ne(n>=Nu,"invalid EIP-155 v","v",e),(n-Nu)/sm)}static getChainIdV(e,n){return Oe(e)*sm+BigInt(35+n-27)}static getNormalizedV(e){const n=Oe(e);return n===im||n===am?27:n===om||n===cm?28:(ne(n>=Nu,"invalid v","v",e),n&om?27:28)}static from(e){function n(l,u){ne(l,u,"signature",e)}if(e==null)return new Vt(wa,rm,rm,27);if(typeof e=="string"){const l=We(e,"signature");if(l.length===64){const u=Ce(l.slice(0,32)),f=l.slice(32,64),d=f[0]&128?28:27;return f[0]&=127,new Vt(wa,u,Ce(f),d)}if(l.length===65){const u=Ce(l.slice(0,32)),f=Ce(l.slice(32,64)),d=Vt.getNormalizedV(l[64]);return new Vt(wa,u,f,d)}n(!1,"invalid raw signature length")}if(e instanceof Vt)return e.clone();const r=e.r;n(r!=null,"missing r");const i=lm(r),o=(function(l,u){if(l!=null)return lm(l);if(u!=null){n(Ct(u,32),"invalid yParityAndS");const f=We(u);return f[0]&=127,Ce(f)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:s,v:a}=(function(l,u,f){if(l!=null){const d=Oe(l);return{networkV:d>=Nu?d:void 0,v:Vt.getNormalizedV(d)}}if(u!=null)return n(Ct(u,32),"invalid yParityAndS"),{v:We(u)[0]&128?28:27};if(f!=null){switch(Ke(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),c=new Vt(wa,i,o,a);return s&&(c.#r=s),n(e.yParity==null||Ke(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}class co{#e;constructor(e){ne(Qa(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=Ce(e)}get privateKey(){return this.#e}get publicKey(){return co.computePublicKey(this.#e)}get compressedPublicKey(){return co.computePublicKey(this.#e,!0)}sign(e){ne(Qa(e)===32,"invalid digest length","digest",e);const n=Uo.sign(er(e),er(this.#e),{lowS:!0});return Vt.from({r:vs(n.r,32),s:vs(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=co.computePublicKey(e);return Ce(Uo.getSharedSecret(er(this.#e),We(n),!1))}static computePublicKey(e,n){let r=We(e,"key");if(r.length===32){const o=Uo.getPublicKey(r,!!n);return Ce(o)}if(r.length===64){const o=new Uint8Array(65);o[0]=4,o.set(r,1),r=o}const i=Uo.ProjectivePoint.fromHex(r);return Ce(i.toRawBytes(n))}static recoverPublicKey(e,n){ne(Qa(e)===32,"invalid digest length","digest",e);const r=Vt.from(n);let i=Uo.Signature.fromCompact(er(Gt([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const o=i.recoverPublicKey(er(e));return ne(o!=null,"invalid signature for digest","signature",n),"0x"+o.toHex(!1)}static addPoints(e,n,r){const i=Uo.ProjectivePoint.fromHex(co.computePublicKey(e).substring(2)),o=Uo.ProjectivePoint.fromHex(co.computePublicKey(n).substring(2));return"0x"+i.add(o).toHex(!!r)}}const _O=BigInt(0),CO=BigInt(36);function um(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=We(Zt(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Pg={};for(let t=0;t<10;t++)Pg[String(t)]=String(t);for(let t=0;t<26;t++)Pg[String.fromCharCode(65+t)]=String(10+t);const fm=15;function SO(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>Pg[r]).join("");for(;e.length>=fm;){let r=e.substring(0,fm);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const IO=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function TO(t){t=t.toLowerCase();let e=_O;for(let n=0;n<t.length;n++)e=e*CO+IO[t[n]];return e}function ct(t){if(ne(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=um(t);return ne(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ne(t.substring(2,4)===SO(t),"bad icap checksum","address",t);let e=TO(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return um("0x"+e)}ne(!1,"invalid address","address",t)}function OO(t){const e=ct(t.from);let r=Oe(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,ct($t(Zt(ys([e,r])),12))}function lA(t){return t&&typeof t.getAddress=="function"}async function n0(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(we(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),ne(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),ct(n)}function nr(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?ct(t):(we(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),n0(t,e.resolveName(t)));if(lA(t))return n0(t,t.getAddress());if(t&&typeof t.then=="function")return n0(t,t);ne(!1,"unsupported addressable value","target",t)}const Ji={};function Te(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new jt(Ji,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function it(t,e){return new jt(Ji,`bytes${e||""}`,t,{size:e})}const dm=Symbol.for("_ethers_typed");class jt{type;value;#e;_typedSymbol;constructor(e,n,r,i){i==null&&(i=null),uu(Ji,e,"Typed"),Be(this,{_typedSymbol:dm,type:n,value:r}),this.#e=i,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,n){return new jt(Ji,e,n)}static uint8(e){return Te(e,8)}static uint16(e){return Te(e,16)}static uint24(e){return Te(e,24)}static uint32(e){return Te(e,32)}static uint40(e){return Te(e,40)}static uint48(e){return Te(e,48)}static uint56(e){return Te(e,56)}static uint64(e){return Te(e,64)}static uint72(e){return Te(e,72)}static uint80(e){return Te(e,80)}static uint88(e){return Te(e,88)}static uint96(e){return Te(e,96)}static uint104(e){return Te(e,104)}static uint112(e){return Te(e,112)}static uint120(e){return Te(e,120)}static uint128(e){return Te(e,128)}static uint136(e){return Te(e,136)}static uint144(e){return Te(e,144)}static uint152(e){return Te(e,152)}static uint160(e){return Te(e,160)}static uint168(e){return Te(e,168)}static uint176(e){return Te(e,176)}static uint184(e){return Te(e,184)}static uint192(e){return Te(e,192)}static uint200(e){return Te(e,200)}static uint208(e){return Te(e,208)}static uint216(e){return Te(e,216)}static uint224(e){return Te(e,224)}static uint232(e){return Te(e,232)}static uint240(e){return Te(e,240)}static uint248(e){return Te(e,248)}static uint256(e){return Te(e,256)}static uint(e){return Te(e,256)}static int8(e){return Te(e,-8)}static int16(e){return Te(e,-16)}static int24(e){return Te(e,-24)}static int32(e){return Te(e,-32)}static int40(e){return Te(e,-40)}static int48(e){return Te(e,-48)}static int56(e){return Te(e,-56)}static int64(e){return Te(e,-64)}static int72(e){return Te(e,-72)}static int80(e){return Te(e,-80)}static int88(e){return Te(e,-88)}static int96(e){return Te(e,-96)}static int104(e){return Te(e,-104)}static int112(e){return Te(e,-112)}static int120(e){return Te(e,-120)}static int128(e){return Te(e,-128)}static int136(e){return Te(e,-136)}static int144(e){return Te(e,-144)}static int152(e){return Te(e,-152)}static int160(e){return Te(e,-160)}static int168(e){return Te(e,-168)}static int176(e){return Te(e,-176)}static int184(e){return Te(e,-184)}static int192(e){return Te(e,-192)}static int200(e){return Te(e,-200)}static int208(e){return Te(e,-208)}static int216(e){return Te(e,-216)}static int224(e){return Te(e,-224)}static int232(e){return Te(e,-232)}static int240(e){return Te(e,-240)}static int248(e){return Te(e,-248)}static int256(e){return Te(e,-256)}static int(e){return Te(e,-256)}static bytes1(e){return it(e,1)}static bytes2(e){return it(e,2)}static bytes3(e){return it(e,3)}static bytes4(e){return it(e,4)}static bytes5(e){return it(e,5)}static bytes6(e){return it(e,6)}static bytes7(e){return it(e,7)}static bytes8(e){return it(e,8)}static bytes9(e){return it(e,9)}static bytes10(e){return it(e,10)}static bytes11(e){return it(e,11)}static bytes12(e){return it(e,12)}static bytes13(e){return it(e,13)}static bytes14(e){return it(e,14)}static bytes15(e){return it(e,15)}static bytes16(e){return it(e,16)}static bytes17(e){return it(e,17)}static bytes18(e){return it(e,18)}static bytes19(e){return it(e,19)}static bytes20(e){return it(e,20)}static bytes21(e){return it(e,21)}static bytes22(e){return it(e,22)}static bytes23(e){return it(e,23)}static bytes24(e){return it(e,24)}static bytes25(e){return it(e,25)}static bytes26(e){return it(e,26)}static bytes27(e){return it(e,27)}static bytes28(e){return it(e,28)}static bytes29(e){return it(e,29)}static bytes30(e){return it(e,30)}static bytes31(e){return it(e,31)}static bytes32(e){return it(e,32)}static address(e){return new jt(Ji,"address",e)}static bool(e){return new jt(Ji,"bool",!!e)}static bytes(e){return new jt(Ji,"bytes",e)}static string(e){return new jt(Ji,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new jt(Ji,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===dm}static dereference(e,n){if(jt.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}}class RO extends Co{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=jt.dereference(n,"string");try{r=ct(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return ct(vs(e.readValue(),20))}}class PO extends Co{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function uA(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return we(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),we(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else ne(!1,"invalid tuple value","tuple",n);ne(e.length===r.length,"types/value length mismatch","tuple",n);let i=new Dp,o=new Dp,s=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let f=o.length;c.encode(o,u);let d=i.writeUpdatableValue();s.push(h=>{d(h+f)})}else c.encode(i,u)}),s.forEach(c=>{c(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(o),a}function fA(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(o=>{let s=null;if(o.dynamic){let a=t.readIndex(),c=i.subReader(a);try{s=o.decode(c)}catch(l){if(Tn(l,"BUFFER_OVERRUN"))throw l;s=l,s.baseType=o.name,s.name=o.localName,s.type=o.type}}else try{s=o.decode(t)}catch(a){if(Tn(a,"BUFFER_OVERRUN"))throw a;s=a,s.baseType=o.name,s.name=o.localName,s.type=o.type}if(s==null)throw new Error("investigate");n.push(s),r.push(o.localName||null)}),ad.fromItems(n,r)}class NO extends Co{coder;length;constructor(e,n,r){const i=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",i,r,o),Be(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let r=0;r<this.length;r++)n.push(e);return n}encode(e,n){const r=jt.dereference(n,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),Ex(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let s=0;s<r.length;s++)o.push(this.coder);return uA(e,o,r)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),we(n*tr<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*tr,length:e.dataLength}));let r=[];for(let i=0;i<n;i++)r.push(new PO(this.coder));return fA(e,r)}}class kO extends Co{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=jt.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class dA extends Co{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=er(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class MO extends dA{constructor(e){super("bytes",e)}decode(e){return Ce(super.decode(e))}}class DO extends Co{size;constructor(e,n){let r="bytes"+String(e);super(r,r,n,!1),Be(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let r=er(jt.dereference(n,this.type));return r.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(r)}decode(e){return Ce(e.readBytes(this.size))}}const BO=new Uint8Array([]);class LO extends Co{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(BO)}decode(e){return e.readBytes(0),null}}const FO=BigInt(0),UO=BigInt(1),HO=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class $O extends Co{size;signed;constructor(e,n,r){const i=(n?"int":"uint")+e*8;super(i,i,r,!1),Be(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let r=Oe(jt.dereference(n,this.type)),i=Hs(HO,tr*8);if(this.signed){let o=Hs(i,this.size*8-1);(r>o||r<-(o+UO))&&this._throwError("value out-of-bounds",n),r=_x(r,8*tr)}else(r<FO||r>Hs(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(r)}decode(e){let n=Hs(e.readValue(),this.size*8);return this.signed&&(n=od(n,this.size*8)),n}}class VO extends dA{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,vo(jt.dereference(n,"string")))}decode(e){return sd(super.decode(e))}}class ku extends Co{coders;constructor(e,n){let r=!1;const i=[];e.forEach(s=>{s.dynamic&&(r=!0),i.push(s.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,r),Be(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const n=this.coders.reduce((r,i)=>{const o=i.localName;return o&&(r[o]||(r[o]=0),r[o]++),r},{});return this.coders.forEach((r,i)=>{let o=r.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,n){const r=jt.dereference(n,"tuple");return uA(e,this.coders,r)}decode(e){return fA(e,this.coders)}}function r0(t,e){return{address:ct(t),storageKeys:e.map((n,r)=>(ne(Ct(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function la(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(ne(n.length===2,"invalid slot set",`value[${r}]`,n),r0(n[0],n[1])):(ne(n!=null&&typeof n=="object","invalid address-slot set","value",t),r0(n.address,n.storageKeys)));ne(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,o)=>(i[o]=!0,i),{});return r0(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function hA(t){return{address:ct(t.address),nonce:Oe(t.nonce!=null?t.nonce:0),chainId:Oe(t.chainId!=null?t.chainId:0),signature:Vt.from(t.signature)}}function KO(t){let e;return typeof t=="string"?e=co.computePublicKey(t,!1):e=t.publicKey,ct(Zt("0x"+e.substring(4)).substring(26))}function jO(t,e){return KO(co.recoverPublicKey(t,e))}const yn=BigInt(0),GO=BigInt(2),zO=BigInt(27),WO=BigInt(28),qO=BigInt(35),YO=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),i0=4096*32;function XO(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return We(t.blobToKzgCommitment(Ce(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return We(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return We(t.blobToKZGCommitment(Ce(r)));ne(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return We(t.computeBlobProof(Ce(r),Ce(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return We(t.computeBlobKZGProof(Ce(r),Ce(i)));ne(!1,"unsupported KZG library","kzg",t)}}}function hm(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Ic(e).substring(4),"0x"+n}function Tc(t){return t==="0x"?null:ct(t)}function ph(t,e){try{return la(t)}catch(n){ne(!1,n.message,e,t)}}function ZO(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Tc(i[1]),nonce:wt(i[2],"nonce"),chainId:wt(i[0],"chainId"),signature:Vt.from({yParity:ua(i[3],"yParity"),r:Eo(i[4],32),s:Eo(i[5],32)})})}return n}catch(n){ne(!1,n.message,e,t)}}function ua(t,e){return t==="0x"?0:Ke(t,e)}function wt(t,e){if(t==="0x")return yn;const n=Oe(t,e);return ne(n<=YO,"value exceeds uint size",e,n),n}function Qe(t,e){const n=Oe(t,"value"),r=cn(n);return ne(r.length<=32,"value too large",`tx.${e}`,n),r}function gh(t){return la(t).map(e=>[e.address,e.storageKeys])}function QO(t){return t.map(e=>[Qe(e.chainId,"chainId"),e.address,Qe(e.nonce,"nonce"),Qe(e.signature.yParity,"yParity"),cn(e.signature.r),cn(e.signature.s)])}function JO(t,e){ne(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)ne(Ct(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function e5(t){const e=fu(t);ne(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:ua(e[0],"nonce"),gasPrice:wt(e[1],"gasPrice"),gasLimit:wt(e[2],"gasLimit"),to:Tc(e[3]),value:wt(e[4],"value"),data:Ce(e[5]),chainId:yn};if(e.length===6)return n;const r=wt(e[6],"v"),i=wt(e[7],"r"),o=wt(e[8],"s");if(i===yn&&o===yn)n.chainId=r;else{let s=(r-qO)/GO;s<yn&&(s=yn),n.chainId=s,ne(s!==yn||r===zO||r===WO,"non-canonical legacy v","v",e[6]),n.signature=Vt.from({r:Eo(e[7],32),s:Eo(e[8],32),v:r})}return n}function t5(t,e){const n=[Qe(t.nonce,"nonce"),Qe(t.gasPrice||0,"gasPrice"),Qe(t.gasLimit,"gasLimit"),t.to||"0x",Qe(t.value,"value"),t.data];let r=yn;if(t.chainId!=yn)r=Oe(t.chainId,"tx.chainId"),ne(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const o=t.signature.legacyChainId;o!=null&&(r=o)}if(!e)return r!==yn&&(n.push(cn(r)),n.push("0x"),n.push("0x")),ys(n);let i=BigInt(27+e.yParity);return r!==yn?i=Vt.getChainIdV(r,e.v):BigInt(e.v)!==i&&ne(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(cn(i)),n.push(cn(e.r)),n.push(cn(e.s)),ys(n)}function vh(t,e){let n;try{if(n=ua(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{ne(!1,"invalid yParity","yParity",e[0])}const r=Eo(e[1],32),i=Eo(e[2],32),o=Vt.from({r,s:i,yParity:n});t.signature=o}function n5(t){const e=fu(We(t).slice(1));ne(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ce(t));const n={type:2,chainId:wt(e[0],"chainId"),nonce:ua(e[1],"nonce"),maxPriorityFeePerGas:wt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:wt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:wt(e[4],"gasLimit"),to:Tc(e[5]),value:wt(e[6],"value"),data:Ce(e[7]),accessList:ph(e[8],"accessList")};return e.length===9||vh(n,e.slice(9)),n}function r5(t,e){const n=[Qe(t.chainId,"chainId"),Qe(t.nonce,"nonce"),Qe(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qe(t.maxFeePerGas||0,"maxFeePerGas"),Qe(t.gasLimit,"gasLimit"),t.to||"0x",Qe(t.value,"value"),t.data,gh(t.accessList||[])];return e&&(n.push(Qe(e.yParity,"yParity")),n.push(cn(e.r)),n.push(cn(e.s))),Gt(["0x02",ys(n)])}function i5(t){const e=fu(We(t).slice(1));ne(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ce(t));const n={type:1,chainId:wt(e[0],"chainId"),nonce:ua(e[1],"nonce"),gasPrice:wt(e[2],"gasPrice"),gasLimit:wt(e[3],"gasLimit"),to:Tc(e[4]),value:wt(e[5],"value"),data:Ce(e[6]),accessList:ph(e[7],"accessList")};return e.length===8||vh(n,e.slice(8)),n}function o5(t,e){const n=[Qe(t.chainId,"chainId"),Qe(t.nonce,"nonce"),Qe(t.gasPrice||0,"gasPrice"),Qe(t.gasLimit,"gasLimit"),t.to||"0x",Qe(t.value,"value"),t.data,gh(t.accessList||[])];return e&&(n.push(Qe(e.yParity,"recoveryParam")),n.push(cn(e.r)),n.push(cn(e.s))),Gt(["0x01",ys(n)])}function s5(t){let e=fu(We(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],s=e[2],a=e[3];ne(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),ne(Array.isArray(s),"invalid network format: commitments not an array","fields[2]",s),ne(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),ne(o.length===s.length,"invalid network format: blobs/commitments length mismatch","fields",e),ne(o.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:o[c],commitment:s[c],proof:a[c]});e=e[0]}ne(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Ce(t));const i={type:3,chainId:wt(e[0],"chainId"),nonce:ua(e[1],"nonce"),maxPriorityFeePerGas:wt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:wt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:wt(e[4],"gasLimit"),to:Tc(e[5]),value:wt(e[6],"value"),data:Ce(e[7]),accessList:ph(e[8],"accessList"),maxFeePerBlobGas:wt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),ne(i.to!=null,`invalid address for transaction type: ${n}`,"data",t),ne(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)ne(Ct(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||vh(i,e.slice(11)),i}function a5(t,e,n){const r=[Qe(t.chainId,"chainId"),Qe(t.nonce,"nonce"),Qe(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qe(t.maxFeePerGas||0,"maxFeePerGas"),Qe(t.gasLimit,"gasLimit"),t.to||Bl,Qe(t.value,"value"),t.data,gh(t.accessList||[]),Qe(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),JO(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Qe(e.yParity,"yParity")),r.push(cn(e.r)),r.push(cn(e.s)),n)?Gt(["0x03",ys([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):Gt(["0x03",ys(r)])}function c5(t){const e=fu(We(t).slice(1));ne(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ce(t));const n={type:4,chainId:wt(e[0],"chainId"),nonce:ua(e[1],"nonce"),maxPriorityFeePerGas:wt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:wt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:wt(e[4],"gasLimit"),to:Tc(e[5]),value:wt(e[6],"value"),data:Ce(e[7]),accessList:ph(e[8],"accessList"),authorizationList:ZO(e[9],"authorizationList")};return e.length===10||vh(n,e.slice(10)),n}function l5(t,e){const n=[Qe(t.chainId,"chainId"),Qe(t.nonce,"nonce"),Qe(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qe(t.maxFeePerGas||0,"maxFeePerGas"),Qe(t.gasLimit,"gasLimit"),t.to||"0x",Qe(t.value,"value"),t.data,gh(t.accessList||[]),QO(t.authorizationList||[])];return e&&(n.push(Qe(e.yParity,"yParity")),n.push(cn(e.r)),n.push(cn(e.s))),Gt(["0x04",ys(n)])}class ri{#e;#t;#n;#r;#i;#s;#o;#a;#f;#l;#p;#g;#c;#u;#d;#h;#y;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:ne(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?Bl:e}set to(e){this.#t=e==null?null:ct(e)}get nonce(){return this.#r}set nonce(e){this.#r=Ke(e,"value")}get gasLimit(){return this.#i}set gasLimit(e){this.#i=Oe(e)}get gasPrice(){const e=this.#s;return e==null&&(this.type===0||this.type===1)?yn:e}set gasPrice(e){this.#s=e==null?null:Oe(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#o;return e??(this.type===2||this.type===3?yn:null)}set maxPriorityFeePerGas(e){this.#o=e==null?null:Oe(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?yn:null)}set maxFeePerGas(e){this.#a=e==null?null:Oe(e,"maxFeePerGas")}get data(){return this.#n}set data(e){this.#n=Ce(e)}get value(){return this.#f}set value(e){this.#f=Oe(e,"value")}get chainId(){return this.#l}set chainId(e){this.#l=Oe(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:Vt.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:la(e)}get authorizationList(){const e=this.#y||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#y=e==null?null:e.map(n=>hA(n))}get maxFeePerBlobGas(){const e=this.#c;return e==null&&this.type===3?yn:e}set maxFeePerBlobGas(e){this.#c=e==null?null:Oe(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ne(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)ne(Ct(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}this.#u=e}get blobs(){return this.#h==null?null:this.#h.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#h=null;return}const n=[],r=[];for(let i=0;i<e.length;i++){const o=e[i];if(Eg(o)){we(this.#d,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let s=We(o);if(ne(s.length<=i0,"blob is too large",`blobs[${i}]`,o),s.length!==i0){const l=new Uint8Array(i0);l.set(s),s=l}const a=this.#d.blobToKzgCommitment(s),c=Ce(this.#d.computeBlobKzgProof(s,a));n.push({data:Ce(s),commitment:Ce(a),proof:c}),r.push(hm(1,a))}else{const s=Ce(o.commitment);n.push({data:Ce(o.data),commitment:s,proof:Ce(o.proof)}),r.push(hm(1,s))}}this.#h=n,this.#u=r}get kzg(){return this.#d}set kzg(e){e==null?this.#d=null:this.#d=XO(e)}constructor(){this.#e=null,this.#t=null,this.#r=0,this.#i=yn,this.#s=null,this.#o=null,this.#a=null,this.#n="0x",this.#f=yn,this.#l=yn,this.#p=null,this.#g=null,this.#c=null,this.#u=null,this.#d=null,this.#h=null,this.#y=null}get hash(){return this.signature==null?null:Zt(this.#v(!0,!1))}get unsignedHash(){return Zt(this.unsignedSerialized)}get from(){return this.signature==null?null:jO(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:co.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#v(e,n){we(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return t5(this,r);case 1:return o5(this,r);case 2:return r5(this,r);case 3:return a5(this,r,n?this.blobs:null);case 4:return l5(this,r)}we(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#v(!0,!0)}get unsignedSerialized(){return this.#v(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=this.#c!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&we(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),we(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),we(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const o=[];return this.type!=null?o.push(this.type):this.authorizationList&&this.authorizationList.length?o.push(4):n?o.push(2):e?(o.push(1),r||o.push(0)):r?(o.push(1),o.push(2)):(i&&this.to||(o.push(0),o.push(1),o.push(2)),o.push(3)),o.sort(),o}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ri.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new ri;if(typeof e=="string"){const r=We(e);if(r[0]>=127)return ri.from(e5(r));switch(r[0]){case 1:return ri.from(i5(r));case 2:return ri.from(n5(r));case 3:return ri.from(s5(r));case 4:return ri.from(c5(r))}we(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new ri;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Vt.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(ne(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ne(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ne(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ne(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}}function ta(t){return Zt(vo(t))}var u5="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const pm=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),gm=4;function f5(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,o=[0,1];for(let S=1;S<r;S++)o.push(i+=n());let s=n(),a=e;e+=s;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const f=31,d=2**f,h=d>>>1,p=h>>1,g=d-1;let y=0;for(let S=0;S<f;S++)y=y<<1|u();let v=[],m=0,w=d;for(;;){let S=Math.floor(((y-m+1)*i-1)/w),R=0,F=r;for(;F-R>1;){let B=R+F>>>1;S<o[B]?F=B:R=B}if(R==0)break;v.push(R);let $=m+Math.floor(w*o[R]/i),U=m+Math.floor(w*o[R+1]/i)-1;for(;(($^U)&h)==0;)y=y<<1&g|u(),$=$<<1&g,U=U<<1&g|1;for(;$&~U&p;)y=y&h|y<<1&g>>>1|u(),$=$<<1^h,U=(U^h)<<1|h|1;m=$,w=1+U-$}let E=r-4;return v.map(S=>{switch(S-E){case 3:return E+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return E+256+(t[a++]<<8|t[a++]);case 1:return E+t[a++];default:return S-1}})}function d5(t){let e=0;return()=>t[e++]}function pA(t){return d5(f5(h5(t)))}function h5(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,o)=>e[i.charCodeAt(0)]=o);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,o=0,s=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],s+=6,s>=8&&(r[o++]=a>>(s-=8));return r}function p5(t){return t&1?~t>>1:t>>1}function g5(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=p5(e());return n}function Ll(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let o=0;o<i;o++)n.push(e+o);e+=i+1}return n}function gA(t){return Fl(()=>{let e=Ll(t);if(e.length)return e})}function vA(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(v5(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(y5(n,t))}return e.flat()}function Fl(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function yA(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)g5(t,n).forEach((o,s)=>r[s].push(o));return r}function v5(t,e){let n=1+e(),r=e(),i=Fl(e);return yA(i.length,1+t,e).flatMap((s,a)=>{let[c,...l]=s;return Array(i[a]).fill().map((u,f)=>{let d=f*r;return[c+f*n,l.map(h=>h+d)]})})}function y5(t,e){let n=1+e();return yA(n,1+t,e).map(i=>[i[0],i.slice(1)])}function m5(t){let e=[],n=Ll(t);return i(r([]),[]),e;function r(o){let s=t(),a=Fl(()=>{let c=Ll(t).map(l=>n[l]);if(c.length)return r(c)});return{S:s,B:a,Q:o}}function i({S:o,B:s},a,c){if(!(o&4&&c===a[a.length-1])){o&2&&(c=a[a.length-1]),o&1&&e.push(a);for(let l of s)for(let u of l.Q)i(l,[...a,u],c)}}}function w5(t){return t.toString(16).toUpperCase().padStart(2,"0")}function mA(t){return`{${w5(t)}}`}function b5(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function yc(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function E5(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var x5="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Ul=44032,ld=4352,ud=4449,fd=4519,wA=19,bA=21,mc=28,dd=bA*mc,A5=wA*dd,_5=Ul+A5,C5=ld+wA,S5=ud+bA,I5=fd+mc;function Qc(t){return t>>24&255}function EA(t){return t&16777215}let $p,vm,Vp,xf;function T5(){let t=pA(x5);$p=new Map(gA(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),vm=new Set(Ll(t)),Vp=new Map,xf=new Map;for(let[e,n]of vA(t)){if(!vm.has(e)&&n.length==2){let[r,i]=n,o=xf.get(r);o||(o=new Map,xf.set(r,o)),o.set(i,e)}Vp.set(e,n.reverse())}}function xA(t){return t>=Ul&&t<_5}function O5(t,e){if(t>=ld&&t<C5&&e>=ud&&e<S5)return Ul+(t-ld)*dd+(e-ud)*mc;if(xA(t)&&e>fd&&e<I5&&(t-Ul)%mc==0)return t+(e-fd);{let n=xf.get(t);return n&&(n=n.get(e),n)?n:-1}}function AA(t){$p||T5();let e=[],n=[],r=!1;function i(o){let s=$p.get(o);s&&(r=!0,o|=s),e.push(o)}for(let o of t)for(;;){if(o<128)e.push(o);else if(xA(o)){let s=o-Ul,a=s/dd|0,c=s%dd/mc|0,l=s%mc;i(ld+a),i(ud+c),l>0&&i(fd+l)}else{let s=Vp.get(o);s?n.push(...s):i(o)}if(!n.length)break;o=n.pop()}if(r&&e.length>1){let o=Qc(e[0]);for(let s=1;s<e.length;s++){let a=Qc(e[s]);if(a==0||o<=a){o=a;continue}let c=s-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(o=Qc(e[--c]),o<=a))break}o=Qc(e[s])}}return e}function R5(t){let e=[],n=[],r=-1,i=0;for(let o of t){let s=Qc(o),a=EA(o);if(r==-1)s==0?r=a:e.push(a);else if(i>0&&i>=s)s==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=s;else{let c=O5(r,a);c>=0?r=c:i==0&&s==0?(e.push(r),r=a):(n.push(a),i=s)}}return r>=0&&e.push(r,...n),e}function _A(t){return AA(t).map(EA)}function P5(t){return R5(AA(t))}const ym=45,CA=".",SA=65039,IA=1,hd=t=>Array.from(t);function Hl(t,e){return t.P.has(e)||t.Q.has(e)}class N5 extends Array{get is_emoji(){return!0}}let Kp,TA,Vs,jp,OA,ec,o0,Ta,ks,mm,Gp;function Ng(){if(Kp)return;let t=pA(u5);const e=()=>Ll(t),n=()=>new Set(e()),r=(u,f)=>f.forEach(d=>u.add(d));Kp=new Map(vA(t)),TA=n(),Vs=e(),jp=new Set(e().map(u=>Vs[u])),Vs=new Set(Vs),OA=n(),n();let i=gA(t),o=t();const s=()=>{let u=new Set;return e().forEach(f=>r(u,i[f])),r(u,e()),u};ec=Fl(u=>{let f=Fl(t).map(d=>d+96);if(f.length){let d=u>=o;f[0]-=32,f=yc(f),d&&(f=`Restricted[${f}]`);let h=s(),p=s(),g=!t();return{N:f,P:h,Q:p,M:g,R:d}}}),o0=n(),Ta=new Map;let a=e().concat(hd(o0)).sort((u,f)=>u-f);a.forEach((u,f)=>{let d=t(),h=a[f]=d?a[f-d]:{V:[],M:new Map};h.V.push(u),o0.has(u)||Ta.set(u,h)});for(let{V:u,M:f}of new Set(Ta.values())){let d=[];for(let p of u){let g=ec.filter(v=>Hl(v,p)),y=d.find(({G:v})=>g.some(m=>v.has(m)));y||(y={G:new Set,V:[]},d.push(y)),y.V.push(p),r(y.G,g)}let h=d.flatMap(p=>hd(p.G));for(let{G:p,V:g}of d){let y=new Set(h.filter(v=>!p.has(v)));for(let v of g)f.set(v,y)}}ks=new Set;let c=new Set;const l=u=>ks.has(u)?c.add(u):ks.add(u);for(let u of ec){for(let f of u.P)l(f);for(let f of u.Q)l(f)}for(let u of ks)!Ta.has(u)&&!c.has(u)&&Ta.set(u,IA);r(ks,_A(ks)),mm=m5(t).map(u=>N5.from(u)).sort(E5),Gp=new Map;for(let u of mm){let f=[Gp];for(let d of u){let h=f.map(p=>{let g=p.get(d);return g||(g=new Map,p.set(d,g)),g});d===SA?f.push(...h):f=h}for(let d of f)d.V=u}}function kg(t){return(RA(t)?"":`${Mg(yh([t]))} `)+mA(t)}function Mg(t){return`"${t}"`}function k5(t){if(t.length>=4&&t[2]==ym&&t[3]==ym)throw new Error(`invalid label extension: "${yc(t.slice(0,4))}"`)}function M5(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function D5(t){let e=t[0],n=pm.get(e);if(n)throw yl(`leading ${n}`);let r=t.length,i=-1;for(let o=1;o<r;o++){e=t[o];let s=pm.get(e);if(s){if(i==o)throw yl(`${n} + ${s}`);i=o+1,n=s}}if(i==r)throw yl(`trailing ${n}`)}function yh(t,e=1/0,n=mA){let r=[];B5(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,o=t.length;for(let s=0;s<o;s++){let a=t[s];RA(a)&&(r.push(yc(t.slice(i,s))),r.push(n(a)),i=s+1)}return r.push(yc(t.slice(i,o))),r.join("")}function B5(t){return Ng(),Vs.has(t)}function RA(t){return Ng(),OA.has(t)}function L5(t){return $5(F5(t,P5,j5))}function F5(t,e,n){if(!t)return[];Ng();let r=0;return t.split(CA).map(i=>{let o=b5(i),s={input:o,offset:r};r+=o.length+1;try{let a=s.tokens=K5(o,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=s.output=a.flat();if(M5(u),!(s.emoji=c>1||a[0].is_emoji)&&u.every(d=>d<128))k5(u),l="ASCII";else{let d=a.flatMap(h=>h.is_emoji?[]:h);if(!d.length)l="Emoji";else{if(Vs.has(u[0]))throw yl("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&Vs.has(y[0]))throw yl(`emoji + combining mark: "${yc(a[g-1])} + ${yh([y[0]])}"`)}D5(u);let h=hd(new Set(d)),[p]=H5(h);V5(p,d),U5(p,h),l=p.N}}s.type=l}catch(a){s.error=a}return s})}function U5(t,e){let n,r=[];for(let i of e){let o=Ta.get(i);if(o===IA)return;if(o){let s=o.M.get(i);if(n=n?n.filter(a=>s.has(a)):hd(s),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(o=>Hl(i,o)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function H5(t){let e=ec;for(let n of t){let r=e.filter(i=>Hl(i,n));if(!r.length)throw ec.some(i=>Hl(i,n))?NA(e[0],n):PA(n);if(e=r,r.length==1)break}return e}function $5(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${Mg(yh(e,63))}: ${i}`)}return yc(r)}).join(CA)}function PA(t){return new Error(`disallowed character: ${kg(t)}`)}function NA(t,e){let n=kg(e),r=ec.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function yl(t){return new Error(`illegal placement: ${t}`)}function V5(t,e){for(let n of e)if(!Hl(t,n))throw NA(t,n);if(t.M){let n=_A(e);for(let r=1,i=n.length;r<i;r++)if(jp.has(n[r])){let o=r+1;for(let s;o<i&&jp.has(s=n[o]);o++)for(let a=r;a<o;a++)if(n[a]==s)throw new Error(`duplicate non-spacing marks: ${kg(s)}`);if(o-r>gm)throw new Error(`excessive non-spacing marks: ${Mg(yh(n.slice(r-1,o)))} (${o-r}/${gm})`);r=o}}}function K5(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let o=G5(t);if(o)i.length&&(r.push(e(i)),i=[]),r.push(n(o));else{let s=t.pop();if(ks.has(s))i.push(s);else{let a=Kp.get(s);if(a)i.push(...a);else if(!TA.has(s))throw PA(s)}}}return i.length&&r.push(e(i)),r}function j5(t){return t.filter(e=>e!=SA)}function G5(t,e){let n=Gp,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:o}=n;o&&(r=o,t.length=i)}return r}const kA=new Uint8Array(32);kA.fill(0);function wm(t){return ne(t.length!==0,"invalid ENS name; empty component","comp",t),t}function MA(t){const e=vo(z5(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(wm(e.slice(r,i))),r=i+1);return ne(r<e.length,"invalid ENS name; empty component","name",t),n.push(wm(e.slice(r))),n}function z5(t){try{if(t.length===0)throw new Error("empty label");return L5(t)}catch(e){ne(!1,`invalid ENS name (${e.message})`,"name",t)}}function zp(t){ne(typeof t=="string","invalid ENS name; not a string","name",t),ne(t.length,"invalid ENS name (empty label)","name",t);let e=kA;const n=MA(t);for(;n.length;)e=Zt(Gt([e,Zt(n.pop())]));return Ce(e)}function W5(t,e){const n=e;return ne(n<=255,"DNS encoded label cannot exceed 255","length",n),Ce(Gt(MA(t).map(r=>{ne(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const DA=new Uint8Array(32);DA.fill(0);const q5=BigInt(-1),BA=BigInt(0),LA=BigInt(1),Y5=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function X5(t){const e=We(t),n=e.length%32;return n?Gt([e,DA.slice(n)]):Ce(e)}const Z5=vs(LA,32),Q5=vs(BA,32),bm={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},s0=["name","version","chainId","verifyingContract","salt"];function Em(t){return function(e){return ne(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const J5={name:Em("name"),version:Em("version"),chainId:function(t){const e=Oe(t,"domain.chainId");return ne(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):oi(e)},verifyingContract:function(t){try{return ct(t).toLowerCase()}catch{}ne(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=We(t,"domain.salt");return ne(e.length===32,'invalid domain value "salt"',"domain.salt",t),Ce(e)}};function a0(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);ne(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=Hs(Y5,n?r-1:r),o=n?(i+LA)*q5:BA;return function(s){const a=Oe(s,"value");return ne(a>=o&&a<=i,`value out-of-bounds for ${t}`,"value",a),vs(n?_x(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return ne(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=We(r);return ne(i.length===n,`invalid length for ${t}`,"value",r),X5(r)}}}switch(t){case"address":return function(e){return Eo(ct(e),32)};case"bool":return function(e){return e?Z5:Q5};case"bytes":return function(e){return Zt(e)};case"string":return function(e){return ta(e)}}return null}function xm(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function Mu(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}class Ar{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#n;constructor(e){this.#t=new Map,this.#n=new Map;const n=new Map,r=new Map,i=new Map,o={};Object.keys(e).forEach(c=>{o[c]=e[c].map(({name:l,type:u})=>{let{base:f,index:d}=Mu(u);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:l,type:f+(d||"")}}),n.set(c,new Set),r.set(c,[]),i.set(c,new Set)}),this.#e=JSON.stringify(o);for(const c in o){const l=new Set;for(const u of o[c]){ne(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const f=Mu(u.type).base;ne(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",e),!a0(f)&&(ne(r.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),r.get(f).push(c),n.get(c).add(f))}}const s=Array.from(r.keys()).filter(c=>r.get(c).length===0);ne(s.length!==0,"missing primary type","types",e),ne(s.length===1,`ambiguous primary types or unused types: ${s.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Be(this,{primaryType:s[0]});function a(c,l){ne(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const f of l)i.get(f).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of i){const u=Array.from(l);u.sort(),this.#t.set(c,xm(c,o[c])+u.map(f=>xm(f,o[f])).join(""))}}getEncoder(e){let n=this.#n.get(e);return n||(n=this.#r(e),this.#n.set(e,n)),n}#r(e){{const i=a0(e);if(i)return i}const n=Mu(e).array;if(n){const i=n.prefix,o=this.getEncoder(i);return s=>{ne(n.count===-1||n.count===s.length,`array length mismatch; expected length ${n.count}`,"value",s);let a=s.map(o);return this.#t.has(i)&&(a=a.map(Zt)),Zt(Gt(a))}}const r=this.types[e];if(r){const i=ta(this.#t.get(e));return o=>{const s=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(o[a]);return this.#t.has(c)?Zt(l):l});return s.unshift(i),Gt(s)}}ne(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const n=this.#t.get(e);return ne(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Zt(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(a0(e))return r(e,n);const i=Mu(e).array;if(i)return ne(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(s=>this._visit(i.prefix,s,r));const o=this.types[e];if(o)return o.reduce((s,{name:a,type:c})=>(s[a]=this._visit(c,n[a],r),s),{});ne(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Ar(e)}static getPrimaryType(e){return Ar.from(e).primaryType}static hashStruct(e,n,r){return Ar.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=bm[r];ne(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>s0.indexOf(r.name)-s0.indexOf(i.name)),Ar.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Gt(["0x1901",Ar.hashDomain(e),Ar.from(n).hash(r)])}static hash(e,n,r){return Zt(Ar.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const o={};e.verifyingContract&&!Ct(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const s=Ar.from(n);s.visit(r,(a,c)=>(a==="address"&&!Ct(c,20)&&(o[c]="0x"),c));for(const a in o)o[a]=await i(a);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),r=s.visit(r,(a,c)=>a==="address"&&o[c]?o[c]:c),{domain:e,value:r}}static getPayload(e,n,r){Ar.hashDomain(e);const i={},o=[];s0.forEach(c=>{const l=e[c];l!=null&&(i[c]=J5[c](l),o.push({name:c,type:bm[c]}))});const s=Ar.from(n);n=s.types;const a=Object.assign({},n);return ne(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=o,s.encode(r),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Ce(We(l));if(c.match(/^u?int/))return Oe(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return ne(typeof l=="string","invalid string","value",l),l}ne(!1,"unsupported type","type",c)})}}}function rr(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const eR="external public payable override",tR=rr(eR.split(" ")),FA="constant external internal payable private public pure view override",nR=rr(FA.split(" ")),UA="constructor error event fallback function receive struct",HA=rr(UA.split(" ")),$A="calldata memory storage payable indexed",rR=rr($A.split(" ")),iR="tuple returns",oR=[UA,$A,iR,FA].join(" "),sR=rr(oR.split(" ")),aR={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},cR=new RegExp("^(\\s*)"),lR=new RegExp("^([0-9]+)"),uR=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),VA=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),KA=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Zr{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Zr(this.#t)}reset(){this.#e=0}#n(e=0,n=0){return new Zr(this.#t.slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;this.#e<e.match-1;){const r=this.peek().linkNext;n.push(this.#n(this.#e+1,r)),this.#e=r}return this.#e=e.match+1,n}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let n=this.#e;n<this.#t.length;n++){const r=this.#t[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function Es(t){const e=[],n=s=>{const a=o<t.length?JSON.stringify(t[o]):"$EOI";throw new Error(`invalid token ${a} at ${o}: ${s}`)};let r=[],i=[],o=0;for(;o<t.length;){let s=t.substring(o),a=s.match(cR);a&&(o+=a[1].length,s=t.substring(o));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};e.push(c);let l=aR[s[0]]||"";if(l){if(c.type=l,c.text=s[0],o++,l==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=Ke(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=s.match(uR),a){if(c.text=a[1],o+=c.text.length,sR.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(KA)){c.type="TYPE";continue}c.type="ID";continue}if(a=s.match(lR),a){c.text=a[1],c.type="NUMBER",o+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(s[0])} at position ${o}`)}return new Zr(e.map(s=>Object.freeze(s)))}function Am(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function mh(t,e){if(e.peekKeyword(HA)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function xo(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function jA(t){let e=xo(t,nR);return Am(e,rr("constant payable nonpayable".split(" "))),Am(e,rr("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function yo(t,e){return t.popParams().map(n=>At.from(n,e))}function GA(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Oe(t.pop().text);throw new Error("invalid gas")}return null}function na(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const fR=new RegExp(/^(.*)\[([0-9]*)\]$/);function _m(t){const e=t.match(KA);if(ne(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);ne(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);ne(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Ut={},yr=Symbol.for("_ethers_internal"),Cm="_ParamTypeInternal",Sm="_ErrorInternal",Im="_EventInternal",Tm="_ConstructorInternal",Om="_FallbackInternal",Rm="_FunctionInternal",Pm="_StructInternal";class At{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,n,r,i,o,s,a,c){if(uu(e,Ut,"ParamType"),Object.defineProperty(this,yr,{value:Cm}),s&&(s=Object.freeze(s.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(s==null)throw new Error("")}else if(s!=null)throw new Error("");Be(this,{name:n,type:r,baseType:i,indexed:o,components:s,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const o=JSON.parse(this.arrayChildren.format("json"));return o.name=r,o.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(o)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(o=>JSON.parse(o.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,o)=>r.components[o].walk(i,n))}return n(this.type,e)}#e(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{s.#e(e,c,r,u=>{a[l]=u})}),i(a);return}if(this.isTuple()){const s=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=s.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{s[l].#e(e,c,r,u=>{a[l]=u})}),i(a);return}const o=r(this.type,n);o.then?e.push((async function(){i(await o)})()):i(o)}async walkAsync(e,n){const r=[],i=[e];return this.#e(r,e,n,o=>{i[0]=o}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(At.isParamType(e))return e;if(typeof e=="string")try{return At.from(Es(e),n)}catch{ne(!1,"invalid param type","obj",e)}else if(e instanceof Zr){let a="",c="",l=null;xo(e,rr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>At.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=_m(e.popType("TYPE")),c=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new At(Ut,"",a,c,null,l,f,u),f=g.value,a+=g.text,c="array",l=null}let d=null;if(xo(e,rR).has("indexed")){if(!n)throw new Error("");d=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new At(Ut,p,a,c,d,l,f,u)}const r=e.name;ne(!r||typeof r=="string"&&r.match(VA),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(ne(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let o=e.type,s=o.match(fR);if(s){const a=parseInt(s[2]||"-1"),c=At.from({type:s[1],components:e.components});return new At(Ut,r||"",o,"array",i,null,a,c)}if(o==="tuple"||o.startsWith("tuple(")||o.startsWith("(")){const a=e.components!=null?e.components.map(l=>At.from(l)):null;return new At(Ut,r||"",o,"tuple",i,a,null,null)}return o=_m(e.type),new At(Ut,r||"",o,o,i,null,null,null)}static isParamType(e){return e&&e[yr]===Cm}}class ra{type;inputs;constructor(e,n,r){uu(e,Ut,"Fragment"),r=Object.freeze(r.slice()),Be(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{ra.from(JSON.parse(e))}catch{}return ra.from(Es(e))}if(e instanceof Zr)switch(e.peekKeyword(HA)){case"constructor":return lo.from(e);case"error":return hr.from(e);case"event":return Si.from(e);case"fallback":case"receive":return eo.from(e);case"function":return Ii.from(e);case"struct":return Zs.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return lo.from(e);case"error":return hr.from(e);case"event":return Si.from(e);case"fallback":case"receive":return eo.from(e);case"function":return Ii.from(e);case"struct":return Zs.from(e)}we(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ne(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return lo.isFragment(e)}static isError(e){return hr.isFragment(e)}static isEvent(e){return Si.isFragment(e)}static isFunction(e){return Ii.isFragment(e)}static isStruct(e){return Zs.isFragment(e)}}class wh extends ra{name;constructor(e,n,r,i){super(e,n,i),ne(typeof r=="string"&&r.match(VA),"invalid identifier","name",r),i=Object.freeze(i.slice()),Be(this,{name:r})}}function $l(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class hr extends wh{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,yr,{value:Sm})}get selector(){return ta(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+$l(e,this.inputs)),n.join(" ")}static from(e){if(hr.isFragment(e))return e;if(typeof e=="string")return hr.from(Es(e));if(e instanceof Zr){const n=mh("error",e),r=yo(e);return na(e),new hr(Ut,n,r)}return new hr(Ut,e.name,e.inputs?e.inputs.map(At.from):[])}static isFragment(e){return e&&e[yr]===Sm}}class Si extends wh{anonymous;constructor(e,n,r,i){super(e,"event",n,r),Object.defineProperty(this,yr,{value:Im}),Be(this,{anonymous:i})}get topicHash(){return ta(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+$l(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>At.from(i)),new Si(Ut,e,n,!1).topicHash}static from(e){if(Si.isFragment(e))return e;if(typeof e=="string")try{return Si.from(Es(e))}catch{ne(!1,"invalid event fragment","obj",e)}else if(e instanceof Zr){const n=mh("event",e),r=yo(e,!0),i=!!xo(e,rr(["anonymous"])).has("anonymous");return na(e),new Si(Ut,n,r,i)}return new Si(Ut,e.name,e.inputs?e.inputs.map(n=>At.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[yr]===Im}}class lo extends ra{payable;gas;constructor(e,n,r,i,o){super(e,n,r),Object.defineProperty(this,yr,{value:Tm}),Be(this,{payable:i,gas:o})}format(e){if(we(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[`constructor${$l(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(lo.isFragment(e))return e;if(typeof e=="string")try{return lo.from(Es(e))}catch{ne(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Zr){xo(e,rr(["constructor"]));const n=yo(e),r=!!xo(e,tR).has("payable"),i=GA(e);return na(e),new lo(Ut,"constructor",n,r,i)}return new lo(Ut,"constructor",e.inputs?e.inputs.map(At.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[yr]===Tm}}class eo extends ra{payable;constructor(e,n,r){super(e,"fallback",n),Object.defineProperty(this,yr,{value:Om}),Be(this,{payable:r})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:r})}return`${n}()${this.payable?" payable":""}`}static from(e){if(eo.isFragment(e))return e;if(typeof e=="string")try{return eo.from(Es(e))}catch{ne(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Zr){const n=e.toString(),r=e.peekKeyword(rr(["fallback","receive"]));if(ne(r,"type must be fallback or receive","obj",n),e.popKeyword(rr(["fallback","receive"]))==="receive"){const a=yo(e);return ne(a.length===0,"receive cannot have arguments","obj.inputs",a),xo(e,rr(["payable"])),na(e),new eo(Ut,[],!0)}let o=yo(e);o.length?ne(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(a=>a.format("minimal")).join(", ")):o=[At.from("bytes")];const s=jA(e);if(ne(s==="nonpayable"||s==="payable","fallback cannot be constants","obj.stateMutability",s),xo(e,rr(["returns"])).has("returns")){const a=yo(e);ne(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return na(e),new eo(Ut,o,s==="payable")}if(e.type==="receive")return new eo(Ut,[],!0);if(e.type==="fallback"){const n=[At.from("bytes")],r=e.stateMutability==="payable";return new eo(Ut,n,r)}ne(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[yr]===Om}}class Ii extends wh{constant;outputs;stateMutability;payable;gas;constructor(e,n,r,i,o,s){super(e,"function",n,i),Object.defineProperty(this,yr,{value:Rm}),o=Object.freeze(o.slice()),Be(this,{constant:r==="view"||r==="pure",gas:s,outputs:o,payable:r==="payable",stateMutability:r})}get selector(){return ta(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+$l(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push($l(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>At.from(i)),new Ii(Ut,e,"view",n,[],null).selector}static from(e){if(Ii.isFragment(e))return e;if(typeof e=="string")try{return Ii.from(Es(e))}catch{ne(!1,"invalid function fragment","obj",e)}else if(e instanceof Zr){const r=mh("function",e),i=yo(e),o=jA(e);let s=[];xo(e,rr(["returns"])).has("returns")&&(s=yo(e));const a=GA(e);return na(e),new Ii(Ut,r,o,i,s,a)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new Ii(Ut,e.name,n,e.inputs?e.inputs.map(At.from):[],e.outputs?e.outputs.map(At.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[yr]===Rm}}class Zs extends wh{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,yr,{value:Pm})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Zs.from(Es(e))}catch{ne(!1,"invalid struct fragment","obj",e)}else if(e instanceof Zr){const n=mh("struct",e),r=yo(e);return na(e),new Zs(Ut,n,r)}return new Zs(Ut,e.name,e.inputs?e.inputs.map(At.from):[])}static isFragment(e){return e&&e[yr]===Pm}}const vi=new Map;vi.set(0,"GENERIC_PANIC");vi.set(1,"ASSERT_FALSE");vi.set(17,"OVERFLOW");vi.set(18,"DIVIDE_BY_ZERO");vi.set(33,"ENUM_RANGE_ERROR");vi.set(34,"BAD_STORAGE_DATA");vi.set(49,"STACK_UNDERFLOW");vi.set(50,"ARRAY_RANGE_ERROR");vi.set(65,"OUT_OF_MEMORY");vi.set(81,"UNINITIALIZED_FUNCTION_CALL");const dR=new RegExp(/^bytes([0-9]*)$/),hR=new RegExp(/^(u?int)([0-9]*)$/);let c0=null,Nm=1024;function pR(t,e,n,r){let i="missing revert data",o=null;const s=null;let a=null;if(n){i="execution reverted";const l=We(n);if(n=Ce(n),l.length===0)i+=" (no data present; likely require(false) occurred",o="require(false)";else if(l.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Ce(l.slice(0,4))==="0x08c379a0")try{o=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[o]},i+=`: ${JSON.stringify(o)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Ce(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},o=`Panic due to ${vi.get(u)||"UNKNOWN"}(${u})`,i+=`: ${o}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?ct(e.to):null,data:e.data||"0x"};return e.from&&(c.from=ct(e.from)),Nt(i,"CALL_EXCEPTION",{action:t,data:n,reason:o,transaction:c,invocation:s,revert:a})}class wc{#e(e){if(e.isArray())return new NO(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new ku(e.components.map(r=>this.#e(r)),e.name);switch(e.baseType){case"address":return new RO(e.name);case"bool":return new kO(e.name);case"string":return new VO(e.name);case"bytes":return new MO(e.name);case"":return new LO(e.name)}let n=e.type.match(hR);if(n){let r=parseInt(n[2]||"256");return ne(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new $O(r/8,n[1]==="int",e.name)}if(n=e.type.match(dR),n){let r=parseInt(n[1]);return ne(r!==0&&r<=32,"invalid bytes length","param",e),new DO(r,e.name)}ne(!1,"invalid type","type",e.type)}getDefaultValue(e){const n=e.map(i=>this.#e(At.from(i)));return new ku(n,"_").defaultValue()}encode(e,n){Ex(n.length,e.length,"types/values length mismatch");const r=e.map(s=>this.#e(At.from(s))),i=new ku(r,"_"),o=new Dp;return i.encode(o,n),o.data}decode(e,n,r){const i=e.map(s=>this.#e(At.from(s)));return new ku(i,"_").decode(new xg(n,r,Nm))}static _setDefaultMaxInflation(e){ne(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Nm=e}static defaultAbiCoder(){return c0==null&&(c0=new wc),c0}static getBuiltinCallException(e,n,r){return pR(e,n,r,wc.defaultAbiCoder())}}class gR{fragment;name;signature;topic;args;constructor(e,n,r){const i=e.name,o=e.format();Be(this,{fragment:e,name:i,signature:o,topic:n,args:r})}}class vR{fragment;name;args;signature;selector;value;constructor(e,n,r,i){const o=e.name,s=e.format();Be(this,{fragment:e,name:o,args:r,signature:s,selector:n,value:i})}}class yR{fragment;name;args;signature;selector;constructor(e,n,r){const i=e.name,o=e.format();Be(this,{fragment:e,name:i,args:r,signature:o,selector:n})}}class km{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Be(this,{hash:e,_isIndexed:!0})}}const Mm={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Dm={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&Mm[t.toString()]&&(e=Mm[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class Us{fragments;deploy;fallback;receive;#e;#t;#n;#r;constructor(e){let n=[];typeof e=="string"?n=JSON.parse(e):n=e,this.#n=new Map,this.#e=new Map,this.#t=new Map;const r=[];for(const s of n)try{r.push(ra.from(s))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(s)}:`,a.message)}Be(this,{fragments:Object.freeze(r)});let i=null,o=!1;this.#r=this.getAbiCoder(),this.fragments.forEach((s,a)=>{let c;switch(s.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Be(this,{deploy:s});return;case"fallback":s.inputs.length===0?o=!0:(ne(!i||s.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,s),i=s,o=i.payable);return;case"function":c=this.#n;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}const l=s.format();c.has(l)||c.set(l,s)}),this.deploy||Be(this,{deploy:lo.from("constructor()")}),Be(this,{fallback:i,receive:o})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return wc.defaultAbiCoder()}#i(e,n,r){if(Ct(e)){const o=e.toLowerCase();for(const s of this.#n.values())if(o===s.selector)return s;return null}if(e.indexOf("(")===-1){const o=[];for(const[s,a]of this.#n)s.split("(")[0]===e&&o.push(a);if(n){const s=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;jt.isTyped(s)&&s.type==="overrides"&&(c=!1,a--);for(let l=o.length-1;l>=0;l--){const u=o[l].inputs.length;u!==a&&(!c||u!==a-1)&&o.splice(l,1)}for(let l=o.length-1;l>=0;l--){const u=o[l].inputs;for(let f=0;f<n.length;f++)if(jt.isTyped(n[f])){if(f>=u.length){if(n[f].type==="overrides")continue;o.splice(l,1);break}if(n[f].type!==u[f].baseType){o.splice(l,1);break}}}}if(o.length===1&&n&&n.length!==o[0].inputs.length){const s=n[n.length-1];(s==null||Array.isArray(s)||typeof s!="object")&&o.splice(0,1)}if(o.length===0)return null;if(o.length>1&&r){const s=o.map(a=>JSON.stringify(a.format())).join(", ");ne(!1,`ambiguous function description (i.e. matches ${s})`,"key",e)}return o[0]}const i=this.#n.get(Ii.from(e).format());return i||null}getFunctionName(e){const n=this.#i(e,null,!1);return ne(n,"no matching function","key",e),n.name}hasFunction(e){return!!this.#i(e,null,!1)}getFunction(e,n){return this.#i(e,n||null,!0)}forEachFunction(e){const n=Array.from(this.#n.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#n.get(i),r)}}#s(e,n,r){if(Ct(e)){const o=e.toLowerCase();for(const s of this.#t.values())if(o===s.topicHash)return s;return null}if(e.indexOf("(")===-1){const o=[];for(const[s,a]of this.#t)s.split("(")[0]===e&&o.push(a);if(n){for(let s=o.length-1;s>=0;s--)o[s].inputs.length<n.length&&o.splice(s,1);for(let s=o.length-1;s>=0;s--){const a=o[s].inputs;for(let c=0;c<n.length;c++)if(jt.isTyped(n[c])&&n[c].type!==a[c].baseType){o.splice(s,1);break}}}if(o.length===0)return null;if(o.length>1&&r){const s=o.map(a=>JSON.stringify(a.format())).join(", ");ne(!1,`ambiguous event description (i.e. matches ${s})`,"key",e)}return o[0]}const i=this.#t.get(Si.from(e).format());return i||null}getEventName(e){const n=this.#s(e,null,!1);return ne(n,"no matching event","key",e),n.name}hasEvent(e){return!!this.#s(e,null,!1)}getEvent(e,n){return this.#s(e,n||null,!0)}forEachEvent(e){const n=Array.from(this.#t.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#t.get(i),r)}}getError(e,n){if(Ct(e)){const i=e.toLowerCase();if(Dm[i])return hr.from(Dm[i].signature);for(const o of this.#e.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,s]of this.#e)o.split("(")[0]===e&&i.push(s);if(i.length===0)return e==="Error"?hr.from("error Error(string)"):e==="Panic"?hr.from("error Panic(uint256)"):null;if(i.length>1){const o=i.map(s=>JSON.stringify(s.format())).join(", ");ne(!1,`ambiguous error description (i.e. ${o})`,"name",e)}return i[0]}if(e=hr.from(e).format(),e==="Error(string)")return hr.from("error Error(string)");if(e==="Panic(uint256)")return hr.from("error Panic(uint256)");const r=this.#e.get(e);return r||null}forEachError(e){const n=Array.from(this.#e.keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(this.#e.get(i),r)}}_decodeParams(e,n){return this.#r.decode(e,n)}_encodeParams(e,n){return this.#r.encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ne(r,"unknown error","fragment",e),e=r}return ne($t(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,$t(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ne(r,"unknown error","fragment",e),e=r}return Gt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ne(r,"unknown function","fragment",e),e=r}return ne($t(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,$t(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ne(r,"unknown function","fragment",e),e=r}return Gt([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const o=this.getFunction(e);ne(o,"unknown function","fragment",e),e=o}let r="invalid length for result data";const i=er(n);if(i.length%32===0)try{return this.#r.decode(e.outputs,i)}catch{r="could not decode result data"}we(!1,r,"BAD_DATA",{value:Ce(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=We(e,"data"),i=wc.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=Ce(r.slice(0,4)),c=this.getError(a);if(c)try{const l=this.#r.decode(c.inputs,r.slice(4));i.revert={name:c.name,signature:c.format(),args:l},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(n);return s&&(i.invocation={method:s.name,signature:s.signature,args:s.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);ne(r,"unknown function","fragment",e),e=r}return Ce(this.#r.encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const o=this.getEvent(e);ne(o,"unknown event","eventFragment",e),e=o}we(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(o,s)=>o.type==="string"?ta(s):o.type==="bytes"?Zt(Ce(s)):(o.type==="bool"&&typeof s=="boolean"?s=s?"0x01":"0x00":o.type.match(/^u?int/)?s=vs(s):o.type.match(/^bytes/)?s=M6(s,32):o.type==="address"&&this.#r.encode(["address"],[s]),Eo(Ce(s),32));for(n.forEach((o,s)=>{const a=e.inputs[s];if(!a.indexed){ne(o==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,o);return}o==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?ne(!1,"filtering with tuples or arrays not supported","contract."+a.name,o):Array.isArray(o)?r.push(o.map(c=>i(a,c))):r.push(i(a,o))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const s=this.getEvent(e);ne(s,"unknown event","eventFragment",e),e=s}const r=[],i=[],o=[];return e.anonymous||r.push(e.topicHash),ne(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((s,a)=>{const c=n[a];if(s.indexed)if(s.type==="string")r.push(ta(c));else if(s.type==="bytes")r.push(Zt(c));else{if(s.baseType==="tuple"||s.baseType==="array")throw new Error("not implemented");r.push(this.#r.encode([s.type],[c]))}else i.push(s),o.push(c)}),{data:this.#r.encode(i,o),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const h=this.getEvent(e);ne(h,"unknown event","eventFragment",e),e=h}if(r!=null&&!e.anonymous){const h=e.topicHash;ne(Ct(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],o=[],s=[];e.inputs.forEach((h,p)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(At.from({type:"bytes32",name:h.name})),s.push(!0)):(i.push(h),s.push(!1)):(o.push(h),s.push(!1))});const a=r!=null?this.#r.decode(i,Gt(r)):null,c=this.#r.decode(o,n,!0),l=[],u=[];let f=0,d=0;return e.inputs.forEach((h,p)=>{let g=null;if(h.indexed)if(a==null)g=new km(null);else if(s[p])g=new km(a[d++]);else try{g=a[d++]}catch(y){g=y}else try{g=c[f++]}catch(y){g=y}l.push(g),u.push(h.name||null)}),ad.fromItems(l,u)}parseTransaction(e){const n=We(e.data,"tx.data"),r=Oe(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Ce(n.slice(0,4)));if(!i)return null;const o=this.#r.decode(i.inputs,n.slice(4));return new vR(i,i.selector,o,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new gR(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Ce(e),r=this.getError($t(n,0,4));if(!r)return null;const i=this.#r.decode(r.inputs,$t(n,4));return new yR(r,r.selector,i)}static from(e){return e instanceof Us?e:typeof e=="string"?new Us(JSON.parse(e)):typeof e.formatJson=="function"?new Us(e.formatJson()):typeof e.format=="function"?new Us(e.format("json")):new Us(e)}}const zA=BigInt(0);function tc(t){return t??null}function Wt(t){return t==null?null:t.toString()}class Bm{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,n,r){Be(this,{gasPrice:tc(e),maxFeePerGas:tc(n),maxPriorityFeePerGas:tc(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Wt(e),maxFeePerGas:Wt(n),maxPriorityFeePerGas:Wt(r)}}}function pd(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Ce(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=Oe(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=Ke(t[i],`request.${i}`));return t.accessList&&(e.accessList=la(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>Eg(i)?Ce(i):Object.assign({},i))),e}class mR{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,n){this.#e=e.transactions.map(r=>typeof r!="string"?new pu(r,n):r),Be(this,{provider:n,hash:tc(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:tc(e.prevRandao),extraData:e.extraData,baseFeePerGas:tc(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(we(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:o,hash:s,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,parentBeaconBlockRoot:d,stateRoot:h,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Wt(e),difficulty:Wt(n),extraData:r,gasLimit:Wt(i),gasUsed:Wt(o),blobGasUsed:Wt(this.blobGasUsed),excessBlobGas:Wt(this.excessBlobGas),hash:s,miner:a,prevRandao:c,nonce:l,number:u,parentHash:f,timestamp:g,parentBeaconBlockRoot:d,stateRoot:h,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=this.#e[e];else{const r=e.toLowerCase();for(const i of this.#e)if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;ne(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return wR(this)}}class hu{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,n){this.provider=n;const r=Object.freeze(e.topics.slice());Be(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:o,removed:s,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:o,removed:s,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return we(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return we(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return we(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return bR(this)}}class WA{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,n){this.#e=Object.freeze(e.logs.map(i=>new hu(i,n)));let r=zA;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Be(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:o,blockHash:s,blockNumber:a,logsBloom:c,logs:l,status:u,root:f}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:r,cumulativeGasUsed:Wt(this.cumulativeGasUsed),from:n,gasPrice:Wt(this.gasPrice),blobGasUsed:Wt(this.blobGasUsed),blobGasPrice:Wt(this.blobGasPrice),gasUsed:Wt(this.gasUsed),hash:i,index:o,logs:l,logsBloom:c,root:f,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return YA(this)}reorderedEvent(e){return we(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),qA(this,e)}}class pu{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,n){this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:o,to:s,from:a,nonce:c,data:l,signature:u,accessList:f,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:n,blobVersionedHashes:d,chainId:Wt(this.chainId),data:l,from:a,gasLimit:Wt(this.gasLimit),gasPrice:Wt(this.gasPrice),hash:i,maxFeePerGas:Wt(this.maxFeePerGas),maxPriorityFeePerGas:Wt(this.maxPriorityFeePerGas),maxFeePerBlobGas:Wt(this.maxFeePerBlobGas),nonce:c,signature:u,to:s,index:r,type:o,value:Wt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Xn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let o=this.#e,s=-1,a=o===-1;const c=async()=>{if(a)return null;const{blockNumber:d,nonce:h}=await Xn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){o=d;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(s===-1&&(s=o-3,s<this.#e&&(s=this.#e));s<=d;){if(a)return null;const g=await this.provider.getBlock(s,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const v=await g.getTransaction(y);if(v.from===this.from&&v.nonce===this.nonce){if(a)return null;const m=await this.provider.getTransactionReceipt(v.hash);if(m==null||d-m.blockNumber+1<r)return;let w="replaced";v.data===this.data&&v.to===this.to&&v.value===this.value?w="repriced":v.data==="0x"&&v.from===v.to&&v.value===zA&&(w="cancelled"),we(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:w==="replaced"||w==="cancelled",reason:w,replacement:v.replaceableTransaction(o),hash:v.hash,receipt:m})}}s++}},l=d=>{if(d==null||d.status!==0)return d;we(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((d,h)=>{const p=[],g=()=>{p.forEach(v=>v())};if(p.push(()=>{a=!0}),i>0){const v=setTimeout(()=>{g(),h(Nt("wait for transaction timeout","TIMEOUT"))},i);p.push(()=>{clearTimeout(v)})}const y=async v=>{if(await v.confirmations()>=r){g();try{d(l(v))}catch(m){h(m)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),o>=0){const v=async()=>{try{await c()}catch(m){if(Tn(m,"TRANSACTION_REPLACED")){g(),h(m);return}}a||this.provider.once("block",v)};p.push(()=>{this.provider.off("block",v)}),this.provider.once("block",v)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return we(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),YA(this)}reorderedEvent(e){return we(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),we(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),qA(this,e)}replaceableTransaction(e){ne(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new pu(this,this.provider);return n.#e=e,n}}function wR(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function qA(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function YA(t){return{orphan:"drop-transaction",tx:t}}function bR(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class Dg extends hu{interface;fragment;args;constructor(e,n,r){super(e,e.provider);const i=n.decodeEventLog(r,e.data,e.topics);Be(this,{args:i,fragment:r,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class XA extends hu{error;constructor(e,n){super(e,e.provider),Be(this,{error:n})}}class ER extends WA{#e;constructor(e,n,r){super(r,n),this.#e=e}get logs(){return super.logs.map(e=>{const n=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(n)try{return new Dg(e,this.#e,n)}catch(r){return new XA(e,r)}return e})}}class Bg extends pu{#e;constructor(e,n,r){super(r,n),this.#e=e}async wait(e,n){const r=await super.wait(e,n);return r==null?null:new ER(this.#e,this.provider,r)}}class ZA extends Cx{log;constructor(e,n,r,i){super(e,n,r),Be(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class xR extends ZA{constructor(e,n,r,i,o){super(e,n,r,new Dg(o,e.interface,i));const s=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Be(this,{args:s,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Lm=BigInt(0);function QA(t){return t&&typeof t.call=="function"}function JA(t){return t&&typeof t.estimateGas=="function"}function bh(t){return t&&typeof t.resolveName=="function"}function e_(t){return t&&typeof t.sendTransaction=="function"}function t_(t){if(t!=null){if(bh(t))return t;if(t.provider)return t.provider}}class AR{#e;fragment;constructor(e,n,r){if(Be(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=ia(e.runner,"resolveName"),o=bh(i)?i:null;this.#e=(async function(){const s=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,f)=>u==="address"?Array.isArray(f)?Promise.all(f.map(d=>nr(d,o))):nr(f,o):f)));return e.interface.encodeFilterTopics(n,s)})()}getTopicFilter(){return this.#e}}function ia(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Ks(t){return t==null?null:t.provider||null}async function n_(t,e){const n=jt.dereference(t,"overrides");ne(typeof n=="object","invalid overrides parameter","overrides",t);const r=pd(n);return ne(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ne(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function _R(t,e,n){const r=ia(t,"resolveName"),i=bh(r)?r:null;return await Promise.all(e.map((o,s)=>o.walkAsync(n[s],(a,c)=>(c=jt.dereference(c,a),a==="address"?nr(c,i):c))))}function CR(t){const e=async function(s){const a=await n_(s,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await nr(a.from,t_(t.runner)));const c=t.interface,l=Oe(a.value||Lm,"overrides.value")===Lm,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&ne(!1,"cannot send data to receive or send value to non-payable fallback","overrides",s),ne(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const f=c.receive||c.fallback&&c.fallback.payable;return ne(f||l,"cannot send value to non-payable fallback","overrides.value",a.value),ne(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(s){const a=ia(t.runner,"call");we(QA(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(s);try{return await a.call(c)}catch(l){throw bg(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(s){const a=t.runner;we(e_(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(s)),l=Ks(t.runner);return new Bg(t.interface,l,c)},i=async function(s){const a=ia(t.runner,"estimateGas");return we(JA(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(s))},o=async s=>await r(s);return Be(o,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),o}function SR(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return we(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let f={};if(u.inputs.length+1===l.length&&(f=await n_(l.pop()),f.from&&(f.from=await nr(f.from,t_(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await _R(t.runner,u.inputs,l);return Object.assign({},f,await Xn({to:t.getAddress(),data:t.interface.encodeFunctionData(u,d)}))},i=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},o=async function(...l){const u=t.runner;we(e_(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await u.sendTransaction(await r(...l)),d=Ks(t.runner);return new Bg(t.interface,d,f)},s=async function(...l){const u=ia(t.runner,"estimateGas");return we(JA(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=ia(t.runner,"call");we(QA(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await r(...l);let d="0x";try{d=await u.call(f)}catch(p){throw bg(p)&&p.data?t.interface.makeError(p.data,f):p}const h=n(...l);return t.interface.decodeFunctionResult(h,d)},c=async(...l)=>n(...l).constant?await i(...l):await o(...l);return Be(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:s,populateTransaction:r,send:o,staticCall:i,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return we(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function IR(t,e){const n=function(...i){const o=t.interface.getEvent(e,i);return we(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),o},r=function(...i){return new AR(t,n(...i),i)};return Be(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return we(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const gd=Symbol.for("_ethersInternal_contract"),r_=new WeakMap;function TR(t,e){r_.set(t[gd],e)}function _r(t){return r_.get(t[gd])}function OR(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function Lg(t,e){let n,r=null;if(Array.isArray(e)){const o=function(s){if(Ct(s,32))return s;const a=t.interface.getEvent(s);return ne(a,"unknown fragment","name",s),a.topicHash};n=e.map(s=>s==null?null:Array.isArray(s)?s.map(o):o(s))}else e==="*"?n=[null]:typeof e=="string"?Ct(e,32)?n=[e]:(r=t.interface.getEvent(e),ne(r,"unknown fragment","event",e),n=[r.topicHash]):OR(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):ne(!1,"unknown event name","event",e);n=n.map(o=>{if(o==null)return null;if(Array.isArray(o)){const s=Array.from(new Set(o.map(a=>a.toLowerCase())).values());return s.length===1?s[0]:(s.sort(),s)}return o.toLowerCase()});const i=n.map(o=>o==null?"null":Array.isArray(o)?o.join("|"):o).join("&");return{fragment:r,tag:i,topics:n}}async function Jc(t,e){const{subs:n}=_r(t);return n.get((await Lg(t,e)).tag)||null}async function Fm(t,e,n){const r=Ks(t.runner);we(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:o,topics:s}=await Lg(t,n),{addr:a,subs:c}=_r(t);let l=c.get(o);if(!l){const f={address:a||t,topics:s},d=y=>{let v=i;if(v==null)try{v=t.interface.getEvent(y.topics[0])}catch{}if(v){const m=v,w=i?t.interface.decodeEventLog(i,y.data,y.topics):[];qp(t,n,w,E=>new xR(t,E,n,m,y))}else qp(t,n,[],m=>new ZA(t,m,n,y))};let h=[];l={tag:o,listeners:[],start:()=>{h.length||h.push(r.on(f,d))},stop:async()=>{if(h.length==0)return;let y=h;h=[],await Promise.all(y),r.off(f,d)}},c.set(o,l)}return l}let Wp=Promise.resolve();async function RR(t,e,n,r){await Wp;const i=await Jc(t,e);if(!i)return!1;const o=i.listeners.length;return i.listeners=i.listeners.filter(({listener:s,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:s));try{s.call(t,...c)}catch{}return!a}),i.listeners.length===0&&(i.stop(),_r(t).subs.delete(i.tag)),o>0}async function qp(t,e,n,r){try{await Wp}catch{}const i=RR(t,e,n,r);return Wp=i,await i}const Du=["then"];class ml{target;interface;runner;filters;[gd];fallback;constructor(e,n,r,i){ne(typeof e=="string"||lA(e),"invalid value for Contract target","target",e),r==null&&(r=null);const o=Us.from(n);Be(this,{target:e,runner:r,interface:o}),Object.defineProperty(this,gd,{value:{}});let s,a=null,c=null;if(i){const f=Ks(r);c=new Bg(this.interface,f,i)}let l=new Map;if(typeof e=="string")if(Ct(e))a=e,s=Promise.resolve(e);else{const f=ia(r,"resolveName");if(!bh(f))throw Nt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});s=f.resolveName(e).then(d=>{if(d==null)throw Nt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return _r(this).addr=d,d})}else s=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return _r(this).addr=f,f});TR(this,{addrPromise:s,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(f,d,h)=>{if(typeof d=="symbol"||Du.indexOf(d)>=0)return Reflect.get(f,d,h);try{return this.getEvent(d)}catch(p){if(!Tn(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(f,d)=>Du.indexOf(d)>=0?Reflect.has(f,d):Reflect.has(f,d)||this.interface.hasEvent(String(d))});return Be(this,{filters:u}),Be(this,{fallback:o.receive||o.fallback?CR(this):null}),new Proxy(this,{get:(f,d,h)=>{if(typeof d=="symbol"||d in f||Du.indexOf(d)>=0)return Reflect.get(f,d,h);try{return f.getFunction(d)}catch(p){if(!Tn(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(f,d)=>typeof d=="symbol"||d in f||Du.indexOf(d)>=0?Reflect.has(f,d):f.interface.hasFunction(d)})}connect(e){return new ml(this.target,this.interface,e)}attach(e){return new ml(e,this.interface,this.runner)}async getAddress(){return await _r(this).addrPromise}async getDeployedCode(){const e=Ks(this.runner);we(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ks(this.runner);return we(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,o)=>{const s=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",s)}catch(a){o(a)}};s()})}deploymentTransaction(){return _r(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),SR(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),IR(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:o}=_r(this),s=i||await o,{fragment:a,topics:c}=await Lg(this,e),l={address:s,topics:c,fromBlock:n,toBlock:r},u=Ks(this.runner);return we(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(f=>{let d=a;if(d==null)try{d=this.interface.getEvent(f.topics[0])}catch{}if(d)try{return new Dg(f,this.interface,d)}catch(h){return new XA(f,h)}return new hu(f,u)})}async on(e,n){const r=await Fm(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await Fm(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await qp(this,e,n,null)}async listenerCount(e){if(e){const i=await Jc(this,e);return i?i.listeners.length:0}const{subs:n}=_r(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Jc(this,e);return i?i.listeners.map(({listener:o})=>o):[]}const{subs:n}=_r(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:o})=>o));return r}async off(e,n){const r=await Jc(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:o})=>o).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),_r(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Jc(this,e);if(!n)return this;n.stop(),_r(this).subs.delete(n.tag)}else{const{subs:n}=_r(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends ml{constructor(i,o=null){super(i,e,o)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}}function PR(){return ml}class ci extends PR(){}function l0(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):ne(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class NR{name;constructor(e){Be(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const i_=new RegExp("^(ipfs)://(.*)$","i"),Um=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),i_,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class nc{provider;address;name;#e;#t;constructor(e,n,r){Be(this,{provider:e,address:n,name:r}),this.#e=null,this.#t=new ci(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(Tn(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#n(e,n){n=(n||[]).slice();const r=this.#t.interface;n.unshift(zp(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),we(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[W5(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const o=await this.#t[e](...n);return i?r.decodeFunctionResult(i,o)[0]:o}catch(o){if(!Tn(o,"CALL_EXCEPTION"))throw o}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const o=await this.#n("addr(bytes32)");return o==null||o===Bl?null:o}catch(o){if(Tn(o,"CALL_EXCEPTION"))return null;throw o}if(e>=0&&e<2147483648){let o=e+2147483648;const s=await this.#n("addr(bytes32,uint)",[o]);if(Ct(s,20))return ct(s)}let n=null;for(const o of this.provider.plugins)if(o instanceof NR&&o.supportsCoinType(e)){n=o;break}if(n==null)return null;const r=await this.#n("addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;we(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await this.#n("text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await this.#n("contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",o=parseInt(n[4],16);if(n[5].length===o*2)return`${i}://${B6("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;we(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<Um.length;r++){const i=n.match(Um[r]);if(i==null)continue;const o=i[1].toLowerCase();switch(o){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const s=l0(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:s}),{linkage:e,url:s}}case"erc721":case"erc1155":{const s=o==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:o,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${o}caip`,value:i[2]||""}),{url:null,linkage:e};const l=c[1],u=new ci(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(o==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(o==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let f=await u[s](l);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),o==="erc1155"&&(f=f.replace("{id}",vs(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=l0(f)),e.push({type:"metadata-url",value:f});let d={};const h=await new Vi(f).send();h.assertOk();try{d=h.bodyJson}catch{try{e.push({type:"!metadata",value:h.bodyText})}catch{const v=h.body;return v&&e.push({type:"!metadata",value:Ce(v)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let p=d.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(i_)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=l0(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return we(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async#r(e,n){const r=await nc.getEnsAddress(e);try{const o=await new ci(r,["function resolver(bytes32) view returns (address)"],e).resolver(zp(n),{enableCcipRead:!0});return o===Bl?null:o}catch(i){throw i}return null}static async fromName(e,n){let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await nc.#r(e,r);if(i!=null){const o=new nc(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}}const Hm=BigInt(0);function Xe(t,e){return(function(n){return n==null?e:t(n)})}function Vl(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function gu(t,e){return(n=>{const r={};for(const i in t){let o=i;if(e&&i in e&&!(o in n)){for(const s of e[i])if(s in n){o=s;break}}try{const s=t[i](n[o]);s!==void 0&&(r[i]=s)}catch(s){const a=s instanceof Error?s.message:"not-an-error";we(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function kR(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}ne(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function bc(t){return ne(Ct(t,!0),"invalid data","value",t),t}function In(t){return ne(Ct(t,32),"invalid hash","value",t),t}const MR=gu({address:ct,blockHash:In,blockNumber:Ke,data:bc,index:Ke,removed:Xe(kR,!1),topics:Vl(In),transactionHash:In,transactionIndex:Ke},{index:["logIndex"]});function DR(t){return MR(t)}const BR=gu({hash:Xe(In),parentHash:In,parentBeaconBlockRoot:Xe(In,null),number:Ke,timestamp:Ke,nonce:Xe(bc),difficulty:Oe,gasLimit:Oe,gasUsed:Oe,stateRoot:Xe(In,null),receiptsRoot:Xe(In,null),blobGasUsed:Xe(Oe,null),excessBlobGas:Xe(Oe,null),miner:Xe(ct),prevRandao:Xe(In,null),extraData:bc,baseFeePerGas:Xe(Oe)},{prevRandao:["mixHash"]});function LR(t){const e=BR(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:o_(n)),e}const FR=gu({transactionIndex:Ke,blockNumber:Ke,transactionHash:In,address:ct,topics:Vl(In),data:bc,index:Ke,blockHash:In},{index:["logIndex"]});function UR(t){return FR(t)}const HR=gu({to:Xe(ct,null),from:Xe(ct,null),contractAddress:Xe(ct,null),index:Ke,root:Xe(Ce),gasUsed:Oe,blobGasUsed:Xe(Oe,null),logsBloom:Xe(bc),blockHash:In,hash:In,logs:Vl(UR),blockNumber:Ke,cumulativeGasUsed:Oe,effectiveGasPrice:Xe(Oe),blobGasPrice:Xe(Oe,null),status:Xe(Ke),type:Xe(Ke,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function $R(t){return HR(t)}function o_(t){t.to&&Oe(t.to)===Hm&&(t.to="0x0000000000000000000000000000000000000000");const e=gu({hash:In,index:Xe(Ke,void 0),type:n=>n==="0x"||n==null?0:Ke(n),accessList:Xe(la,null),blobVersionedHashes:Xe(Vl(In,!0),null),authorizationList:Xe(Vl(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:ct(n.address),chainId:Oe(n.chainId),nonce:Oe(n.nonce),signature:Vt.from(r)}},!1),null),blockHash:Xe(In,null),blockNumber:Xe(Ke,null),transactionIndex:Xe(Ke,null),from:ct,gasPrice:Xe(Oe),maxPriorityFeePerGas:Xe(Oe),maxFeePerGas:Xe(Oe),maxFeePerBlobGas:Xe(Oe,null),gasLimit:Oe,to:Xe(ct,null),value:Oe,nonce:Ke,data:bc,creates:Xe(ct,null),chainId:Xe(Oe,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=OO(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Vt.from(t.signature):e.signature=Vt.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Oe(e.blockHash)===Hm&&(e.blockHash=null),e}const VR="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class vu{name;constructor(e){Be(this,{name:e})}clone(){return new vu(this.name)}}class Eh extends vu{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,n){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const r={effectiveBlock:e};function i(o,s){let a=(n||{})[o];a==null&&(a=s),ne(typeof a=="number",`invalud value for ${o}`,"costs",n),r[o]=a}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Be(this,r)}clone(){return new Eh(this.effectiveBlock,this)}}class xh extends vu{address;targetNetwork;constructor(e,n){super("org.ethers.plugins.network.Ens"),Be(this,{address:e||VR,targetNetwork:n??1})}clone(){return new xh(this.address,this.targetNetwork)}}class KR extends vu{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=n}clone(){return this}}const u0=new Map;class Nr{#e;#t;#n;constructor(e,n){this.#e=e,this.#t=Oe(n),this.#n=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=Oe(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Oe(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Oe(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Oe(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#n.values())}attachPlugin(e){if(this.#n.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#n.set(e.name,e.clone()),this}getPlugin(e){return this.#n.get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Nr(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new Eh;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=la(e.accessList);for(const o in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[o].storageKeys.length}return r}static from(e){if(jR(),e==null)return Nr.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=u0.get(e);if(n)return n();if(typeof e=="bigint")return new Nr("unknown",e);ne(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){ne(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Nr(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new xh(e.ensAddress,e.ensNetwork)),n}ne(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=u0.get(e);r&&ne(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),u0.set(e,n)}}function $m(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function Vm(t){return new KR(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[o,s]=await Promise.all([r.send(),e()]);i=o;const a=i.bodyJson.standard;return{gasPrice:s.gasPrice,maxFeePerGas:$m(a.maxFee,9),maxPriorityFeePerGas:$m(a.maxPriorityFee,9)}}catch(o){we(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:o})}})}let Km=!1;function jR(){if(Km)return;Km=!0;function t(e,n,r){const i=function(){const o=new Nr(e,n);return r.ensNetwork!=null&&o.attachPlugin(new xh(null,r.ensNetwork)),o.attachPlugin(new Eh),(r.plugins||[]).forEach(s=>{o.attachPlugin(s)}),o};Nr.register(e,i),Nr.register(n,i),r.altNames&&r.altNames.forEach(o=>{Nr.register(o,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[Vm("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Vm("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function Yp(t){return JSON.parse(JSON.stringify(t))}class GR{#e;#t;#n;#r;constructor(e){this.#e=e,this.#t=null,this.#n=4e3,this.#r=-2}get pollingInterval(){return this.#n}set pollingInterval(e){this.#n=e}async#i(){try{const e=await this.#e.getBlockNumber();if(this.#r===-2){this.#r=e;return}if(e!==this.#r){for(let n=this.#r+1;n<=e;n++){if(this.#t==null)return;await this.#e.emit("block",n)}this.#r=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#n))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#n),this.#i())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}class Fg{#e;#t;#n;constructor(e){this.#e=e,this.#n=!1,this.#t=n=>{this._poll(n,this.#e)}}async _poll(e,n){throw new Error("sub-classes must override this")}start(){this.#n||(this.#n=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class zR extends Fg{#e;#t;constructor(e,n){super(e),this.#e=n,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,n){const r=await n.getBlock(this.#e);r!=null&&(this.#t===-2?this.#t=r.number:r.number>this.#t&&(n.emit(this.#e,r.number),this.#t=r.number))}}class WR extends Fg{#e;constructor(e,n){super(e),this.#e=Yp(n)}async _poll(e,n){throw new Error("@TODO")}}class qR extends Fg{#e;constructor(e,n){super(e),this.#e=n}async _poll(e,n){const r=await n.getTransactionReceipt(this.#e);r&&n.emit(this.#e,r)}}class Ug{#e;#t;#n;#r;#i;constructor(e,n){this.#e=e,this.#t=Yp(n),this.#n=this.#s.bind(this),this.#r=!1,this.#i=-2}async#s(e){if(this.#i===-2)return;const n=Yp(this.#t);n.fromBlock=this.#i+1,n.toBlock=e;const r=await this.#e.getLogs(n);if(r.length===0){this.#i<e-60&&(this.#i=e-60);return}for(const i of r)this.#e.emit(this.#t,i),this.#i=i.blockNumber}start(){this.#r||(this.#r=!0,this.#i===-2&&this.#e.getBlockNumber().then(e=>{this.#i=e}),this.#e.on("block",this.#n))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#n))}pause(e){this.stop(),e&&(this.#i=-2)}resume(){this.start()}}const YR=BigInt(2),XR=10;function Bu(t){return t&&typeof t.then=="function"}function Af(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((o,s)=>(o[s]=r[s],o),{})}return r})}class s_{name;constructor(e){Be(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function ZR(t){return JSON.parse(JSON.stringify(t))}function Xp(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function f0(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Ct(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:Af("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:Af("orphan",n),filter:ZR(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?Xp(i.map(o=>o.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],o=[],s=a=>{Ct(a)?i.push(a):o.push((async()=>{i.push(await nr(a,e))})())};Array.isArray(n.address)?n.address.forEach(s):s(n.address),o.length&&await Promise.all(o),r.address=Xp(i.map(a=>a.toLowerCase()))}return{filter:r,tag:Af("event",r),type:"event"}}ne(!1,"unknown ProviderEvent","event",t)}function d0(){return new Date().getTime()}const QR={cacheTimeout:250,pollingInterval:4e3};class JR{#e;#t;#n;#r;#i;#s;#o;#a;#f;#l;#p;#g;constructor(e,n){if(this.#g=Object.assign({},QR,n||{}),e==="any")this.#s=!0,this.#i=null;else if(e){const r=Nr.from(e);this.#s=!1,this.#i=Promise.resolve(r),setTimeout(()=>{this.emit("network",r,null)},0)}else this.#s=!1,this.#i=null;this.#a=-1,this.#o=new Map,this.#e=new Map,this.#t=new Map,this.#n=null,this.#r=!1,this.#f=1,this.#l=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#c(e){const n=this.#g.cacheTimeout;if(n<0)return await this._perform(e);const r=Af(e.method,e);let i=this.#o.get(r);return i||(i=this._perform(e),this.#o.set(r,i),setTimeout(()=>{this.#o.get(r)===i&&this.#o.delete(r)},n)),await i}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),o=n.toLowerCase(),s=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",i).replace("{data}",o),u=new Vi(l);c.indexOf("{data}")===-1&&(u.body={data:o,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let f="unknown error",d;try{d=await u.send()}catch(h){s.push(h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:h}});continue}try{const h=d.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:h}),h.data;h.message&&(f=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:h})}catch{}we(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:f}}),s.push(f)}we(!1,`error encountered during CCIP fetch: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:s}})}_wrapBlock(e,n){return new mR(LR(e),this)}_wrapLog(e,n){return new hu(DR(e),this)}_wrapTransactionReceipt(e,n){return new WA($R(e),this)}_wrapTransactionResponse(e,n){return new pu(o_(e),this)}_detectNetwork(){we(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){we(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ke(await this.#c({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return nr(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Ct(e))return Ct(e,32)?e:oi(e);if(typeof e=="bigint"&&(e=Ke(e,"blockTag")),typeof e=="number")return e>=0?oi(e):this.#a>=0?oi(this.#a+e):this.getBlockNumber().then(n=>oi(n+e));ne(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?Xp(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(c,l,u)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const d={};return f&&(d.address=f),n.length&&(d.topics=n),l&&(d.fromBlock=l),u&&(d.toBlock=u),r&&(d.blockHash=r),d};let o=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)o.push(this._getAddress(c));else o.push(this._getAddress(e.address));let s;"fromBlock"in e&&(s=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),o.filter(c=>typeof c!="string").length||s!=null&&typeof s!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(o),s,a]).then(c=>i(c[0],c[1],c[2])):i(o,s,a)}_getTransactionRequest(e){const n=pd(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const o=nr(n[i],this);Bu(o)?r.push((async function(){n[i]=await o})()):n[i]=o}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);Bu(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(this.#i==null){const i=(async()=>{try{const o=await this._detectNetwork();return this.emit("network",o,null),o}catch(o){throw this.#i===i&&(this.#i=null),o}})();return this.#i=i,(await i).clone()}const e=this.#i,[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(this.#s?(this.emit("network",r,n),this.#i===e&&(this.#i=Promise.resolve(r))):we(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:o,priorityFee:s}=await Xn({_block:this.#y("latest",!1),gasPrice:(async()=>{try{const u=await this.#c({method:"getGasPrice"});return Oe(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await this.#c({method:"getPriorityFee"});return Oe(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(i,e);return l&&l.baseFeePerGas&&(c=s??BigInt("1000000000"),a=l.baseFeePerGas*YR+c),new Bm(o,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Vi(r.url),o=await r.processFunc(n,this,i);return new Bm(o.gasPrice,o.maxFeePerGas,o.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return Bu(n)&&(n=await n),Oe(await this.#c({method:"estimateGas",transaction:n}),"%response")}async#u(e,n,r){we(r<XR,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=pd(e);try{return Ce(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(o){if(!this.disableCcipRead&&bg(o)&&o.data&&r>=0&&n==="latest"&&i.to!=null&&$t(o.data,0,4)==="0x556f1830"){const s=o.data,a=await nr(i.to,this);let c;try{c=iP($t(o.data,4))}catch(f){we(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:s}})}we(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(i,c.calldata,c.urls);we(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:o.data,errorArgs:c.errorArgs}});const u={to:a,data:Gt([c.selector,rP([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const f=await this.#u(u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:f}),f}}throw o}}async#d(e){const{value:n}=await Xn({network:this.getNetwork(),value:e});return n}async call(e){const{tx:n,blockTag:r}=await Xn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#d(this.#u(n,r,e.enableCcipRead?0:-1))}async#h(e,n,r){let i=this._getAddress(n),o=this._getBlockTag(r);return(typeof i!="string"||typeof o!="string")&&([i,o]=await Promise.all([i,o])),await this.#d(this.#c(Object.assign(e,{address:i,blockTag:o})))}async getBalance(e,n){return Oe(await this.#h({method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Ke(await this.#h({method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Ce(await this.#h({method:"getCode"},e,n))}async getStorage(e,n,r){const i=Oe(n,"position");return Ce(await this.#h({method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await Xn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),o=ri.from(e);if(o.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(o,i).replaceableTransaction(n)}async#y(e,n){if(Ct(e,32))return await this.#c({method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await this.#c({method:"getBlock",blockTag:r,includeTransactions:n})}async getBlock(e,n){const{network:r,params:i}=await Xn({network:this.getNetwork(),params:this.#y(e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await Xn({network:this.getNetwork(),params:this.#c({method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Xn({network:this.getNetwork(),params:this.#c({method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await this.#c({method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Xn({network:this.getNetwork(),result:this.#c({method:"getTransactionResult",hash:e})});return n==null?null:Ce(n)}async getLogs(e){let n=this._getFilter(e);Bu(n)&&(n=await n);const{network:r,params:i}=await Xn({network:this.getNetwork(),params:this.#c({method:"getLogs",filter:n})});return i.map(o=>this._wrapLog(o,r))}_getProvider(e){we(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await nc.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=ct(e);const n=zp(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await nc.getEnsAddress(this),o=await new ci(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(o==null||o===Bl)return null;const a=await new ci(o,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Tn(r,"BAD_DATA")&&r.value==="0x"||Tn(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(o,s)=>{let a=null;const c=(async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=i){o(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),s(Nt("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){we(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=this.#l.get(e);n&&(n.timer&&clearTimeout(n.timer),this.#l.delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=this.#f++,i=()=>{this.#l.delete(r),e()};if(this.paused)this.#l.set(r,{timer:null,func:i,time:n});else{const o=setTimeout(i,n);this.#l.set(r,{timer:o,func:i,time:d0()})}return r}_forEachSubscriber(e){for(const n of this.#e.values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new s_(e.type);case"block":{const n=new GR(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new zR(this,e.type);case"event":return new Ug(this,e.filter);case"transaction":return new qR(this,e.hash);case"orphan":return new WR(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of this.#e.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),this.#n!=null&&n.pause(this.#n);break}}async#v(e,n){let r=await f0(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await f0({orphan:"drop-log",log:n[0]},this)),this.#e.get(r.tag)||null}async#m(e){const n=await f0(e,this),r=n.tag;let i=this.#e.get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(r,i)),i}async on(e,n){const r=await this.#m(e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async once(e,n){const r=await this.#m(e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,this.#n!=null&&r.subscriber.pause(this.#n)),this}async emit(e,...n){const r=await this.#v(e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:s})=>{const a=new Cx(this,s?null:o,e);try{o.call(this,...n,a)}catch{}return!s}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await this.#v(e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of this.#e.values())n+=r.length;return n}async listeners(e){if(e){const r=await this.#v(e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of this.#e.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await this.#v(e);if(!r)return this;if(n){const i=r.listeners.map(({listener:o})=>o).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),this.#e.delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await this.#m(e);r&&i.stop(),this.#e.delete(n)}else for(const[n,{started:r,subscriber:i}]of this.#e)r&&i.stop(),this.#e.delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return this.#r}destroy(){this.removeAllListeners();for(const e of this.#l.keys())this._clearTimeout(e);this.#r=!0}get paused(){return this.#n!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#n!=null){if(this.#n==!!e)return;we(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),this.#n=!!e;for(const n of this.#l.values())n.timer&&clearTimeout(n.timer),n.time=d0()-n.time}resume(){if(this.#n!=null){this._forEachSubscriber(e=>e.resume()),this.#n=null;for(const e of this.#l.values()){let n=e.time;n<0&&(n=0),e.time=d0(),setTimeout(e.func,n)}}}}function eP(t,e){try{const n=Zp(t,e);if(n)return sd(n)}catch{}return null}function Zp(t,e){if(t==="0x")return null;try{const n=Ke($t(t,e,e+32)),r=Ke($t(t,n,n+32));return $t(t,n+32,n+32+r)}catch{}return null}function jm(t){const e=cn(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function tP(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const nP=new Uint8Array([]);function rP(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(nP),n+=32;for(let r=0;r<t.length;r++){const i=We(t[r]);e[r]=jm(n),e.push(jm(i.length)),e.push(tP(i)),n+=32+Math.ceil(i.length/32)*32}return Gt(e)}const Gm="0x0000000000000000000000000000000000000000000000000000000000000000";function iP(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};we(Qa(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=$t(t,0,32);we($t(n,0,12)===$t(Gm,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=$t(n,12);try{const r=[],i=Ke($t(t,32,64)),o=Ke($t(t,i,i+32)),s=$t(t,i+32);for(let a=0;a<o;a++){const c=eP(s,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{we(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Zp(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{we(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}we($t(t,100,128)===$t(Gm,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=$t(t,96,100);try{const r=Zp(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{we(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Cs(t,e){if(t.provider)return t.provider;we(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function zm(t,e){let n=pd(e);if(n.to!=null&&(n.to=nr(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),nr(r,t)]).then(([i,o])=>(ne(i.toLowerCase()===o.toLowerCase(),"transaction from mismatch","tx.from",o),i))}else n.from=t.getAddress();return await Xn(n)}class oP{provider;constructor(e){Be(this,{provider:e||null})}async getNonce(e){return Cs(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await zm(this,e)}async populateTransaction(e){const n=Cs(this,"populateTransaction"),r=await zm(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const s=Oe(r.chainId);ne(s===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const o=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||o)?ne(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&o&&ne(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const s=await n.getFeeData();we(s.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=s.gasPrice)}else{const s=await n.getFeeData();if(r.type==null)if(s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas);else s.gasPrice!=null?(we(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=s.gasPrice),r.type=0):we(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas))}return await Xn(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Cs(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Cs(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Cs(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Cs(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Cs(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=ri.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){we(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function sP(t){return JSON.parse(JSON.stringify(t))}class a_{#e;#t;#n;#r;#i;#s;constructor(e){this.#e=e,this.#t=null,this.#n=this.#o.bind(this),this.#r=!1,this.#i=null,this.#s=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#o(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let n=null;try{n=await this.#t}catch(o){if(!Tn(o,"UNSUPPORTED_OPERATION")||o.operation!=="eth_newFilter")throw o}if(n==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const r=await this.#e.getNetwork();if(this.#i||(this.#i=r),this.#i.chainId!==r.chainId)throw new Error("chaid changed");if(this.#s)return;const i=await this.#e.send("eth_getFilterChanges",[n]);await this._emitResults(this.#e,i)}catch(n){console.log("@TODO",n)}this.#e.once("block",this.#n)}#a(){const e=this.#t;e&&(this.#t=null,e.then(n=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[n])}))}start(){this.#r||(this.#r=!0,this.#o(-2))}stop(){this.#r&&(this.#r=!1,this.#s=!0,this.#a(),this.#e.off("block",this.#n))}pause(e){e&&this.#a(),this.#e.off("block",this.#n)}resume(){this.start()}}class aP extends a_{#e;constructor(e,n){super(e),this.#e=sP(n)}_recover(e){return new Ug(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,n){for(const r of n)e.emit(this.#e,e._wrapLog(r,e._network))}}class cP extends a_{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const lP="bigint,boolean,function,number,string,symbol".split(/,/g);function _f(t){if(t==null||lP.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(_f);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function uP(t){return new Promise(e=>{setTimeout(e,t)})}function ba(t){return t&&t.toLowerCase()}function Wm(t){return t&&typeof t.pollingInterval=="number"}const c_={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class h0 extends oP{address;constructor(e,n){super(e),n=ct(n),Be(this,{address:n})}connect(e){we(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=_f(e),r=[];if(n.from){const o=n.from;r.push((async()=>{const s=await nr(o,this.provider);ne(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=s})())}else n.from=this.address;if(n.gasLimit==null&&r.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;r.push((async()=>{n.to=await nr(o,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const s=[1e3,100];let a=0;const c=async()=>{try{const l=await this.provider.getTransaction(r);if(l!=null){i(l.replaceableTransaction(n));return}}catch(l){if(Tn(l,"CANCELLED")||Tn(l,"BAD_DATA")||Tn(l,"NETWORK_ERROR")||Tn(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=r,o(l);return}if(Tn(l,"INVALID_ARGUMENT")&&(a++,l.info==null&&(l.info={}),l.info.sendTransactionHash=r,a>10)){o(l);return}this.provider.emit("error",Nt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{c()},s.pop()||4e3)};c()})}async signTransaction(e){const n=_f(e);if(n.from){const i=await nr(n.from,this.provider);ne(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const r=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const n=typeof e=="string"?vo(e):e;return await this.provider.send("personal_sign",[Ce(n),this.address.toLowerCase()])}async signTypedData(e,n,r){const i=_f(r),o=await Ar.resolveNames(e,n,i,async s=>{const a=await nr(s);return ne(a!=null,"TypedData does not support null address","value",s),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Ar.getPayload(o.domain,n,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?vo(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ce(n)])}}class fP extends JR{#e;#t;#n;#r;#i;#s;#o;#a(){if(this.#r)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#r=setTimeout(()=>{this.#r=null;const n=this.#n;for(this.#n=[];n.length;){const r=[n.shift()];for(;n.length&&r.length!==this.#e.batchMaxCount;)if(r.push(n.shift()),JSON.stringify(r.map(o=>o.payload)).length>this.#e.batchMaxSize){n.unshift(r.pop());break}(async()=>{const i=r.length===1?r[0].payload:r.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:s,reject:a,payload:c}of r){if(this.destroyed){a(Nt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const l=o.filter(u=>u.id===c.id)[0];if(l==null){const u=Nt("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",u),a(u);continue}if("error"in l){a(this.getRpcError(c,l));continue}s(l.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:s}of r)s(o)}})()}},e)}constructor(e,n){super(e,n),this.#t=1,this.#e=Object.assign({},c_,n||{}),this.#n=[],this.#r=null,this.#s=null,this.#o=null;{let i=null;const o=new Promise(s=>{i=s});this.#i={promise:o,resolve:i}}const r=this._getOption("staticNetwork");typeof r=="boolean"?(ne(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),r&&e!=null&&(this.#s=Nr.from(e))):r&&(ne(e==null||r.matches(e),"staticNetwork MUST match network object","options",n),this.#s=r)}_getOption(e){return this.#e[e]}get _network(){return we(this.#s,"network is not available yet","NETWORK_ERROR"),this.#s}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&Oe(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#s)return this.#s}else return e;return this.#o?await this.#o:this.ready?(this.#o=(async()=>{try{const n=Nr.from(Oe(await this.send("eth_chainId",[])));return this.#o=null,n}catch(n){throw this.#o=null,n}})(),await this.#o):(this.#o=(async()=>{const n={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let r;try{r=(await this._send(n))[0],this.#o=null}catch(i){throw this.#o=null,this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return Nr.from(Oe(r.result));throw this.getRpcError(n,r)})(),await this.#o)}_start(){this.#i==null||this.#i.resolve==null||(this.#i.resolve(),this.#i=null,(async()=>{for(;this.#s==null&&!this.destroyed;)try{this.#s=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Nt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await uP(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#i!=null)return await this.#i.promise}_getSubscriber(e){return e.type==="pending"?new cP(this):e.type==="event"?this._getOption("polling")?new Ug(this,e.filter):new aP(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new s_("orphan"):super._getSubscriber(e)}get ready(){return this.#i==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let i=r;r==="gasLimit"&&(i="gas"),n[i]=oi(Oe(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(n[r]=Ce(e[r]))}),e.accessList&&(n.accessList=la(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(r=>r.toLowerCase())),e.authorizationList&&(n.authorizationList=e.authorizationList.map(r=>{const i=hA(r);return{address:i.address,nonce:oi(i.nonce),chainId:oi(i.chainId),yParity:oi(i.signature.yParity),r:oi(i.signature.r),s:oi(i.signature.s)}})),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[ba(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[ba(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[ba(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[ba(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(ba):e.filter.address=ba(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:r}=e,{error:i}=n;if(r==="eth_estimateGas"&&i.message){const a=i.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return Nt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return Nt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if(r==="eth_call"||r==="eth_estimateGas"){const a=Qp(i),c=wc.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return c.info={error:i,payload:e},c}const o=JSON.stringify(dP(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Nt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const a=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Nt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Nt("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Nt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:i}});if(o.match(/only replay-protected/i))return Nt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:a,info:{error:i}}})}let s=!!o.match(/the method .* does not exist/i);return s||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(s=!0),s?Nt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):Nt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(Nt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=this.#t++,i=new Promise((o,s)=>{this.#n.push({resolve:o,reject:s,payload:{method:e,params:n,id:r,jsonrpc:"2.0"}})});return this.#a(),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new h0(this,i[e])}const{accounts:r}=await Xn({network:this.getNetwork(),accounts:n});e=ct(e);for(const i of r)if(ct(i)===e)return new h0(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new h0(this,n))}destroy(){this.#r&&(clearTimeout(this.#r),this.#r=null);for(const{payload:e,reject:n}of this.#n)n(Nt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#n=[],super.destroy()}}class l_ extends fP{#e;constructor(e,n){super(e,n);let r=this._getOption("pollingInterval");r==null&&(r=c_.pollingInterval),this.#e=r}_getSubscriber(e){const n=super._getSubscriber(e);return Wm(n)&&(n.pollingInterval=this.#e),n}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(n=>{Wm(n)&&(n.pollingInterval=this.#e)})}}class L$ extends l_{#e;constructor(e,n,r){e==null&&(e="http://localhost:8545"),super(n,r),typeof e=="string"?this.#e=new Vi(e):this.#e=e.clone()}_getConnection(){return this.#e.clone()}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){const n=this._getConnection();n.body=JSON.stringify(e),n.setHeader("content-type","application/json");const r=await n.send();r.assertOk();let i=r.bodyJson;return Array.isArray(i)||(i=[i]),i}}function Qp(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Ct(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=Qp(t[e]);if(n)return n}return null}if(typeof t=="string")try{return Qp(JSON.parse(t))}catch{}return null}function Jp(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)Jp(t[n],e);if(typeof t=="string")try{return Jp(JSON.parse(t),e)}catch{}}}function dP(t){const e=[];return Jp(t,e),e}class Or extends l_{#e;#t;constructor(e,n,r){const i=Object.assign({},r??{},{batchMaxCount:1});ne(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(n,i),this.#t=null,r&&r.providerInfo&&(this.#t=r.providerInfo),this.#e=async(o,s)=>{const a={method:o,params:s};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const c=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const l=new Error(c.message);throw l.code=c.code,l.data=c.data,l.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}}}get providerInfo(){return this.#t}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){ne(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await this.#e(e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(n){const r=n.payload;throw this.getRpcError(r,{id:r.id,error:n})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new Or(e.provider);const n=e.window?e.window:typeof window<"u"?window:null;if(n==null)return null;const r=e.anyProvider;if(r&&n.ethereum)return new Or(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const i=e.timeout?e.timeout:300;return i===0?null:await new Promise((o,s)=>{let a=[];const c=f=>{a.push(f.detail),r&&l()},l=()=>{if(clearTimeout(u),a.length)if(e&&e.filter){const f=e.filter(a.map(d=>Object.assign({},d.info)));if(f==null)o(null);else if(f instanceof Or)o(f);else{let d=null;if(f.uuid&&(d=a.filter(p=>f.uuid===p.info.uuid)[0]),d){const{provider:h,info:p}=d;o(new Or(h,void 0,{providerInfo:p}))}else s(Nt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:d}=a[0];o(new Or(f,void 0,{providerInfo:d}))}else o(null);n.removeEventListener("eip6963:announceProvider",c)},u=setTimeout(()=>{l()},i);n.addEventListener("eip6963:announceProvider",c),n.dispatchEvent(new Event("eip6963:requestProvider"))})}}var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fu={exports:{}},qm;function hP(){return qm||(qm=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Lu<"u"&&Lu,r=(function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o})();(function(o){(function(s){var a=typeof o<"u"&&o||typeof self<"u"&&self||typeof Lu<"u"&&Lu||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(x){return x&&DataView.prototype.isPrototypeOf(x)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(x){return x&&u.indexOf(Object.prototype.toString.call(x))>-1};function d(x){if(typeof x!="string"&&(x=String(x)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(x)||x==="")throw new TypeError('Invalid character in header field name: "'+x+'"');return x.toLowerCase()}function h(x){return typeof x!="string"&&(x=String(x)),x}function p(x){var P={next:function(){var G=x.shift();return{done:G===void 0,value:G}}};return c.iterable&&(P[Symbol.iterator]=function(){return P}),P}function g(x){this.map={},x instanceof g?x.forEach(function(P,G){this.append(G,P)},this):Array.isArray(x)?x.forEach(function(P){if(P.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+P.length);this.append(P[0],P[1])},this):x&&Object.getOwnPropertyNames(x).forEach(function(P){this.append(P,x[P])},this)}g.prototype.append=function(x,P){x=d(x),P=h(P);var G=this.map[x];this.map[x]=G?G+", "+P:P},g.prototype.delete=function(x){delete this.map[d(x)]},g.prototype.get=function(x){return x=d(x),this.has(x)?this.map[x]:null},g.prototype.has=function(x){return this.map.hasOwnProperty(d(x))},g.prototype.set=function(x,P){this.map[d(x)]=h(P)},g.prototype.forEach=function(x,P){for(var G in this.map)this.map.hasOwnProperty(G)&&x.call(P,this.map[G],G,this)},g.prototype.keys=function(){var x=[];return this.forEach(function(P,G){x.push(G)}),p(x)},g.prototype.values=function(){var x=[];return this.forEach(function(P){x.push(P)}),p(x)},g.prototype.entries=function(){var x=[];return this.forEach(function(P,G){x.push([G,P])}),p(x)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(x){if(!x._noBody){if(x.bodyUsed)return Promise.reject(new TypeError("Already read"));x.bodyUsed=!0}}function v(x){return new Promise(function(P,G){x.onload=function(){P(x.result)},x.onerror=function(){G(x.error)}})}function m(x){var P=new FileReader,G=v(P);return P.readAsArrayBuffer(x),G}function w(x){var P=new FileReader,G=v(P),b=/charset=([A-Za-z0-9_-]+)/.exec(x.type),C=b?b[1]:"utf-8";return P.readAsText(x,C),G}function E(x){for(var P=new Uint8Array(x),G=new Array(P.length),b=0;b<P.length;b++)G[b]=String.fromCharCode(P[b]);return G.join("")}function S(x){if(x.slice)return x.slice(0);var P=new Uint8Array(x.byteLength);return P.set(new Uint8Array(x)),P.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(x){this.bodyUsed=this.bodyUsed,this._bodyInit=x,x?typeof x=="string"?this._bodyText=x:c.blob&&Blob.prototype.isPrototypeOf(x)?this._bodyBlob=x:c.formData&&FormData.prototype.isPrototypeOf(x)?this._bodyFormData=x:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)?this._bodyText=x.toString():c.arrayBuffer&&c.blob&&l(x)?(this._bodyArrayBuffer=S(x.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(x)||f(x))?this._bodyArrayBuffer=S(x):this._bodyText=x=Object.prototype.toString.call(x):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof x=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var x=y(this);if(x)return x;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var x=y(this);return x||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var x=y(this);if(x)return x;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(x){var P=x.toUpperCase();return F.indexOf(P)>-1?P:x}function U(x,P){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var G=P.body;if(x instanceof U){if(x.bodyUsed)throw new TypeError("Already read");this.url=x.url,this.credentials=x.credentials,P.headers||(this.headers=new g(x.headers)),this.method=x.method,this.mode=x.mode,this.signal=x.signal,!G&&x._bodyInit!=null&&(G=x._bodyInit,x.bodyUsed=!0)}else this.url=String(x);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new g(P.headers)),this.method=$(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal||(function(){if("AbortController"in a){var T=new AbortController;return T.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var b=/([?&])_=[^&]*/;if(b.test(this.url))this.url=this.url.replace(b,"$1_="+new Date().getTime());else{var C=/\?/;this.url+=(C.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}U.prototype.clone=function(){return new U(this,{body:this._bodyInit})};function B(x){var P=new FormData;return x.trim().split("&").forEach(function(G){if(G){var b=G.split("="),C=b.shift().replace(/\+/g," "),T=b.join("=").replace(/\+/g," ");P.append(decodeURIComponent(C),decodeURIComponent(T))}}),P}function W(x){var P=new g,G=x.replace(/\r?\n[\t ]+/g," ");return G.split("\r").map(function(b){return b.indexOf(`
`)===0?b.substr(1,b.length):b}).forEach(function(b){var C=b.split(":"),T=C.shift().trim();if(T){var N=C.join(":").trim();try{P.append(T,N)}catch(_){console.warn("Response "+_.message)}}}),P}R.call(U.prototype);function V(x,P){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new g(P.headers),this.url=P.url||"",this._initBody(x)}R.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},V.error=function(){var x=new V(null,{status:200,statusText:""});return x.ok=!1,x.status=0,x.type="error",x};var L=[301,302,303,307,308];V.redirect=function(x,P){if(L.indexOf(P)===-1)throw new RangeError("Invalid status code");return new V(null,{status:P,headers:{location:x}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(P,G){this.message=P,this.name=G;var b=Error(P);this.stack=b.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function I(x,P){return new Promise(function(G,b){var C=new U(x,P);if(C.signal&&C.signal.aborted)return b(new s.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function N(){T.abort()}T.onload=function(){var O={statusText:T.statusText,headers:W(T.getAllResponseHeaders()||"")};C.url.indexOf("file://")===0&&(T.status<200||T.status>599)?O.status=200:O.status=T.status,O.url="responseURL"in T?T.responseURL:O.headers.get("X-Request-URL");var M="response"in T?T.response:T.responseText;setTimeout(function(){G(new V(M,O))},0)},T.onerror=function(){setTimeout(function(){b(new TypeError("Network request failed"))},0)},T.ontimeout=function(){setTimeout(function(){b(new TypeError("Network request timed out"))},0)},T.onabort=function(){setTimeout(function(){b(new s.DOMException("Aborted","AbortError"))},0)};function _(O){try{return O===""&&a.location.href?a.location.href:O}catch{return O}}if(T.open(C.method,_(C.url),!0),C.credentials==="include"?T.withCredentials=!0:C.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&(c.blob?T.responseType="blob":c.arrayBuffer&&(T.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof g||a.Headers&&P.headers instanceof a.Headers)){var A=[];Object.getOwnPropertyNames(P.headers).forEach(function(O){A.push(d(O)),T.setRequestHeader(O,h(P.headers[O]))}),C.headers.forEach(function(O,M){A.indexOf(M)===-1&&T.setRequestHeader(M,O)})}else C.headers.forEach(function(O,M){T.setRequestHeader(M,O)});C.signal&&(C.signal.addEventListener("abort",N),T.onreadystatechange=function(){T.readyState===4&&C.signal.removeEventListener("abort",N)}),T.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return I.polyfill=!0,a.fetch||(a.fetch=I,a.Headers=g,a.Request=U,a.Response=V),s.Headers=g,s.Request=U,s.Response=V,s.fetch=I,s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(Fu,Fu.exports)),Fu.exports}var pP=hP();const u_=Hg(pP);var Uu={exports:{}},p0,Ym;function gP(){if(Ym)return p0;Ym=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,o=r*365.25;p0=function(u,f){f=f||{};var d=typeof u;if(d==="string"&&u.length>0)return s(u);if(d==="number"&&isFinite(u))return f.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var d=parseFloat(f[1]),h=(f[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return d*o;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*r;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*e;case"seconds":case"second":case"secs":case"sec":case"s":return d*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=n?Math.round(u/n)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var f=Math.abs(u);return f>=r?l(u,f,r,"day"):f>=n?l(u,f,n,"hour"):f>=e?l(u,f,e,"minute"):f>=t?l(u,f,t,"second"):u+" ms"}function l(u,f,d,h){var p=f>=d*1.5;return Math.round(u/d)+" "+h+(p?"s":"")}return p0}var g0,Xm;function vP(){if(Xm)return g0;Xm=1;function t(e){r.debug=r,r.default=r,r.coerce=l,r.disable=s,r.enable=o,r.enabled=a,r.humanize=gP(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let d=0;for(let h=0;h<f.length;h++)d=(d<<5)-d+f.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=n;function r(f){let d,h=null,p,g;function y(...v){if(!y.enabled)return;const m=y,w=Number(new Date),E=w-(d||w);m.diff=E,m.prev=d,m.curr=w,d=w,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let S=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(F,$)=>{if(F==="%%")return"%";S++;const U=r.formatters[$];if(typeof U=="function"){const B=v[S];F=U.call(m,B),v.splice(S,1),S--}return F}),r.formatArgs.call(m,v),(m.log||r.log).apply(m,v)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,g=r.enabled(f)),g),set:v=>{h=v}}),typeof r.init=="function"&&r.init(y),y}function i(f,d){const h=r(this.namespace+(typeof d>"u"?":":d)+f);return h.log=this.log,h}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d;const h=(typeof f=="string"?f:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(f=h[d].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){const f=[...r.names.map(c),...r.skips.map(c).map(d=>"-"+d)].join(",");return r.enable(""),f}function a(f){if(f[f.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(f))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return g0=t,g0}var Zm;function yP(){return Zm||(Zm=1,(function(t,e){var n={};e.formatArgs=i,e.save=o,e.load=s,e.useColors=r,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let f=0,d=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(f++,h==="%c"&&(d=f))}),l.splice(d,0,u)}e.log=console.debug||console.log||(()=>{});function o(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=n.DEBUG),l}function a(){try{return localStorage}catch{}}t.exports=vP()(e);const{formatters:c}=t.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Uu,Uu.exports)),Uu.exports}var mP=yP();const ir=Hg(mP);var v0,Qm;function wP(){if(Qm)return v0;Qm=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i=(U,B)=>{for(var W in B)t(U,W,{get:B[W],enumerable:!0})},o=(U,B,W,V)=>{if(B&&typeof B=="object"||typeof B=="function")for(let L of n(B))!r.call(U,L)&&L!==W&&t(U,L,{get:()=>B[L],enumerable:!(V=e(B,L))||V.enumerable});return U},s=U=>o(t({},"__esModule",{value:!0}),U),a={};i(a,{createFinalURL:()=>R,createPathBasedClient:()=>g,createQuerySerializer:()=>w,default:()=>f,defaultBodySerializer:()=>S,defaultPathSerializer:()=>E,mergeHeaders:()=>F,randomID:()=>u,removeTrailingSlash:()=>$,serializeArrayParam:()=>m,serializeObjectParam:()=>v,serializePrimitiveParam:()=>y,wrapAsPathBasedClient:()=>p}),v0=s(a);var c=/\{[^{}]+\}/g,l=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function u(){return Math.random().toString(36).slice(2,11)}function f(U){let{baseUrl:B="",Request:W=globalThis.Request,fetch:V=globalThis.fetch,querySerializer:L,bodySerializer:I,headers:x,requestInitExt:P=void 0,...G}={...U};P=l()?P:void 0,B=$(B);const b=[];async function C(T,N){const{baseUrl:_,fetch:A=V,Request:O=W,headers:M,params:H={},parseAs:k="json",querySerializer:j,bodySerializer:X=I??S,body:ee,...ae}=N||{};let D=B;_&&(D=$(_)??B);let K=typeof L=="function"?L:w(L);j&&(K=typeof j=="function"?j:w({...typeof L=="object"?L:{},...j}));const Z=ee===void 0?void 0:X(ee,F(x,M,H.header)),re=F(Z===void 0||Z instanceof FormData?{}:{"Content-Type":"application/json"},x,M,H.header),Q={redirect:"follow",...G,...ae,body:Z,headers:re};let Y,te,ie=new W(R(T,{baseUrl:D,params:H,querySerializer:K}),Q),oe;for(const ve in ae)ve in ie||(ie[ve]=ae[ve]);if(b.length){Y=u(),te=Object.freeze({baseUrl:D,fetch:A,parseAs:k,querySerializer:K,bodySerializer:X});for(const ve of b)if(ve&&typeof ve=="object"&&typeof ve.onRequest=="function"){const de=await ve.onRequest({request:ie,schemaPath:T,params:H,options:te,id:Y});if(de)if(de instanceof W)ie=de;else if(de instanceof Response){oe=de;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!oe){try{oe=await A(ie,P)}catch(ve){let de=ve;if(b.length)for(let me=b.length-1;me>=0;me--){const se=b[me];if(se&&typeof se=="object"&&typeof se.onError=="function"){const J=await se.onError({request:ie,error:de,schemaPath:T,params:H,options:te,id:Y});if(J){if(J instanceof Response){de=void 0,oe=J;break}if(J instanceof Error){de=J;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(de)throw de}if(b.length)for(let ve=b.length-1;ve>=0;ve--){const de=b[ve];if(de&&typeof de=="object"&&typeof de.onResponse=="function"){const me=await de.onResponse({request:ie,response:oe,schemaPath:T,params:H,options:te,id:Y});if(me){if(!(me instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");oe=me}}}}if(oe.status===204||ie.method==="HEAD"||oe.headers.get("Content-Length")==="0")return oe.ok?{data:void 0,response:oe}:{error:void 0,response:oe};if(oe.ok)return k==="stream"?{data:oe.body,response:oe}:{data:await oe[k](),response:oe};let le=await oe.text();try{le=JSON.parse(le)}catch{}return{error:le,response:oe}}return{request(T,N,_){return C(N,{..._,method:T.toUpperCase()})},GET(T,N){return C(T,{...N,method:"GET"})},PUT(T,N){return C(T,{...N,method:"PUT"})},POST(T,N){return C(T,{...N,method:"POST"})},DELETE(T,N){return C(T,{...N,method:"DELETE"})},OPTIONS(T,N){return C(T,{...N,method:"OPTIONS"})},HEAD(T,N){return C(T,{...N,method:"HEAD"})},PATCH(T,N){return C(T,{...N,method:"PATCH"})},TRACE(T,N){return C(T,{...N,method:"TRACE"})},use(...T){for(const N of T)if(N){if(typeof N!="object"||!("onRequest"in N||"onResponse"in N||"onError"in N))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");b.push(N)}},eject(...T){for(const N of T){const _=b.indexOf(N);_!==-1&&b.splice(_,1)}}}}var d=class{constructor(U,B){this.client=U,this.url=B}GET=U=>this.client.GET(this.url,U);PUT=U=>this.client.PUT(this.url,U);POST=U=>this.client.POST(this.url,U);DELETE=U=>this.client.DELETE(this.url,U);OPTIONS=U=>this.client.OPTIONS(this.url,U);HEAD=U=>this.client.HEAD(this.url,U);PATCH=U=>this.client.PATCH(this.url,U);TRACE=U=>this.client.TRACE(this.url,U)},h=class{constructor(){this.client=null}get(U,B){const W=new d(U,B);return this.client[B]=W,W}};function p(U){const B=new h,W=new Proxy(U,B);function V(){}V.prototype=W;const L=new V;return B.client=L,L}function g(U){return p(f(U))}function y(U,B,W){if(B==null)return"";if(typeof B=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${U}=${W?.allowReserved===!0?B:encodeURIComponent(B)}`}function v(U,B,W){if(!B||typeof B!="object")return"";const V=[],L={simple:",",label:".",matrix:";"}[W.style]||"&";if(W.style!=="deepObject"&&W.explode===!1){for(const P in B)V.push(P,W.allowReserved===!0?B[P]:encodeURIComponent(B[P]));const x=V.join(",");switch(W.style){case"form":return`${U}=${x}`;case"label":return`.${x}`;case"matrix":return`;${U}=${x}`;default:return x}}for(const x in B){const P=W.style==="deepObject"?`${U}[${x}]`:x;V.push(y(P,B[x],W))}const I=V.join(L);return W.style==="label"||W.style==="matrix"?`${L}${I}`:I}function m(U,B,W){if(!Array.isArray(B))return"";if(W.explode===!1){const I={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[W.style]||",",x=(W.allowReserved===!0?B:B.map(P=>encodeURIComponent(P))).join(I);switch(W.style){case"simple":return x;case"label":return`.${x}`;case"matrix":return`;${U}=${x}`;default:return`${U}=${x}`}}const V={simple:",",label:".",matrix:";"}[W.style]||"&",L=[];for(const I of B)W.style==="simple"||W.style==="label"?L.push(W.allowReserved===!0?I:encodeURIComponent(I)):L.push(y(U,I,W));return W.style==="label"||W.style==="matrix"?`${V}${L.join(V)}`:L.join(V)}function w(U){return function(W){const V=[];if(W&&typeof W=="object")for(const L in W){const I=W[L];if(I!=null){if(Array.isArray(I)){if(I.length===0)continue;V.push(m(L,I,{style:"form",explode:!0,...U?.array,allowReserved:U?.allowReserved||!1}));continue}if(typeof I=="object"){V.push(v(L,I,{style:"deepObject",explode:!0,...U?.object,allowReserved:U?.allowReserved||!1}));continue}V.push(y(L,I,U))}}return V.join("&")}}function E(U,B){let W=U;for(const V of U.match(c)??[]){let L=V.substring(1,V.length-1),I=!1,x="simple";if(L.endsWith("*")&&(I=!0,L=L.substring(0,L.length-1)),L.startsWith(".")?(x="label",L=L.substring(1)):L.startsWith(";")&&(x="matrix",L=L.substring(1)),!B||B[L]===void 0||B[L]===null)continue;const P=B[L];if(Array.isArray(P)){W=W.replace(V,m(L,P,{style:x,explode:I}));continue}if(typeof P=="object"){W=W.replace(V,v(L,P,{style:x,explode:I}));continue}if(x==="matrix"){W=W.replace(V,`;${y(L,P)}`);continue}W=W.replace(V,x==="label"?`.${encodeURIComponent(P)}`:encodeURIComponent(P))}return W}function S(U,B){return U instanceof FormData?U:B&&(B.get instanceof Function?B.get("Content-Type")??B.get("content-type"):B["Content-Type"]??B["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(U).toString():JSON.stringify(U)}function R(U,B){let W=`${B.baseUrl}${U}`;B.params?.path&&(W=E(W,B.params.path));let V=B.querySerializer(B.params.query??{});return V.startsWith("?")&&(V=V.substring(1)),V&&(W+=`?${V}`),W}function F(...U){const B=new Headers;for(const W of U){if(!W||typeof W!="object")continue;const V=W instanceof Headers?W.entries():Object.entries(W);for(const[L,I]of V)if(I===null)B.delete(L);else if(Array.isArray(I))for(const x of I)B.append(L,x);else I!==void 0&&B.set(L,I)}return B}function $(U){return U.endsWith("/")?U.substring(0,U.length-1):U}return v0}var y0,Jm;function bP(){if(Jm)return y0;Jm=1;var t={},e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,a=(R,F)=>{for(var $ in F)n(R,$,{get:F[$],enumerable:!0})},c=(R,F,$,U)=>{if(F&&typeof F=="object"||typeof F=="function")for(let B of i(F))!s.call(R,B)&&B!==$&&n(R,B,{get:()=>F[B],enumerable:!(U=r(F,B))||U.enumerable});return R},l=(R,F,$)=>($=R!=null?e(o(R)):{},c(!R||!R.__esModule?n($,"default",{value:R,enumerable:!0}):$,R)),u=R=>c(n({},"__esModule",{value:!0}),R),f={};a(f,{analytics:()=>S}),y0=u(f);var d=l(wP()),h=class{constructor(R){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=R.batchSize,this.baseTimeoutMs=R.baseTimeoutMs,this.currentTimeoutMs=R.baseTimeoutMs,this.sendFn=R.sendFn}enqueue(R){this.batch.push(R),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const R=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(R),this.currentTimeoutMs=this.baseTimeoutMs}catch(F){console.error("Sender: Failed to send batch",F),this.batch=[...R,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},p=h,g=class{constructor(R){this.enabled=!1,this.properties={};const F=(0,d.default)({baseUrl:R}),$=async U=>{const B=await F.POST("/v1/events",{body:U});if(B.response.status!==200)throw new Error(B.error)};this.sender=new p({batchSize:100,baseTimeoutMs:200,sendFn:$})}enable(){this.enabled=!0}setGlobalProperty(R,F){this.properties[R]=F}track(R,F){if(!this.enabled)return;const $={name:R,...this.properties,...F};this.sender.enqueue($)}},y=g,v,m;typeof process<"u"&&t&&(v=(m=t.METAMASK_ANALYTICS_ENDPOINT)!=null?m:t.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var w=v??"https://mm-sdk-analytics.api.cx.metamask.io/",E=new y(w),S=E;return y0}var qt=bP(),m0={exports:{}};var e2;function EP(){return e2||(e2=1,(function(t,e){(function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(C){return Object.prototype.toString.call(C)==="[object Array]"},o=10,s=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",c=typeof Reflect=="object",l=typeof setImmediate=="function",u=l?setImmediate:setTimeout,f=a?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(b){var C=Object.getOwnPropertyNames(b);return C.push.apply(C,Object.getOwnPropertySymbols(b)),C}:Object.keys;function d(){this._events={},this._conf&&h.call(this,this._conf)}function h(b){b&&(this._conf=b,b.delimiter&&(this.delimiter=b.delimiter),b.maxListeners!==n&&(this._maxListeners=b.maxListeners),b.wildcard&&(this.wildcard=b.wildcard),b.newListener&&(this._newListener=b.newListener),b.removeListener&&(this._removeListener=b.removeListener),b.verboseMemoryLeak&&(this.verboseMemoryLeak=b.verboseMemoryLeak),b.ignoreErrors&&(this.ignoreErrors=b.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(b,C){var T="(node) warning: possible EventEmitter memory leak detected. "+b+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(T+=" Event name: "+C+"."),typeof process<"u"&&process.emitWarning){var N=new Error(T);N.name="MaxListenersExceededWarning",N.emitter=this,N.count=b,process.emitWarning(N)}else console.error(T),console.trace&&console.trace()}var g=function(b,C,T){var N=arguments.length;switch(N){case 0:return[];case 1:return[b];case 2:return[b,C];case 3:return[b,C,T];default:for(var _=new Array(N);N--;)_[N]=arguments[N];return _}};function y(b,C){for(var T={},N,_=b.length,A=0,O=0;O<_;O++)N=b[O],T[N]=O<A?C[O]:n;return T}function v(b,C,T){this._emitter=b,this._target=C,this._listeners={},this._listenersCount=0;var N,_;if((T.on||T.off)&&(N=T.on,_=T.off),C.addEventListener?(N=C.addEventListener,_=C.removeEventListener):C.addListener?(N=C.addListener,_=C.removeListener):C.on&&(N=C.on,_=C.off),!N&&!_)throw Error("target does not implement any known event API");if(typeof N!="function")throw TypeError("on method must be a function");if(typeof _!="function")throw TypeError("off method must be a function");this._on=N,this._off=_;var A=b._observers;A?A.push(this):b._observers=[this]}Object.assign(v.prototype,{subscribe:function(b,C,T){var N=this,_=this._target,A=this._emitter,O=this._listeners,M=function(){var H=g.apply(null,arguments),k={data:H,name:C,original:b};if(T){var j=T.call(_,k);j!==!1&&A.emit.apply(A,[k.name].concat(H));return}A.emit.apply(A,[C].concat(H))};if(O[b])throw Error("Event '"+b+"' is already listening");this._listenersCount++,A._newListener&&A._removeListener&&!N._onNewListener?(this._onNewListener=function(H){H===C&&O[b]===null&&(O[b]=M,N._on.call(_,b,M))},A.on("newListener",this._onNewListener),this._onRemoveListener=function(H){H===C&&!A.hasListeners(H)&&O[b]&&(O[b]=null,N._off.call(_,b,M))},O[b]=null,A.on("removeListener",this._onRemoveListener)):(O[b]=M,N._on.call(_,b,M))},unsubscribe:function(b){var C=this,T=this._listeners,N=this._emitter,_,A,O=this._off,M=this._target,H;if(b&&typeof b!="string")throw TypeError("event must be a string");function k(){C._onNewListener&&(N.off("newListener",C._onNewListener),N.off("removeListener",C._onRemoveListener),C._onNewListener=null,C._onRemoveListener=null);var j=$.call(N,C);N._observers.splice(j,1)}if(b){if(_=T[b],!_)return;O.call(M,b,_),delete T[b],--this._listenersCount||k()}else{for(A=f(T),H=A.length;H-- >0;)b=A[H],O.call(M,b,T[b]);this._listeners={},this._listenersCount=0,k()}}});function m(b,C,T,N){var _=Object.assign({},C);if(!b)return _;if(typeof b!="object")throw TypeError("options must be an object");var A=Object.keys(b),O=A.length,M,H,k;function j(ee){throw Error('Invalid "'+M+'" option value'+(ee?". Reason: "+ee:""))}for(var X=0;X<O;X++){if(M=A[X],!r.call(C,M))throw Error('Unknown "'+M+'" option');H=b[M],H!==n&&(k=T[M],_[M]=k?k(H,j):H)}return _}function w(b,C){return(typeof b!="function"||!b.hasOwnProperty("prototype"))&&C("value must be a constructor"),b}function E(b){var C="value must be type of "+b.join("|"),T=b.length,N=b[0],_=b[1];return T===1?function(A,O){if(typeof A===N)return A;O(C)}:T===2?function(A,O){var M=typeof A;if(M===N||M===_)return A;O(C)}:function(A,O){for(var M=typeof A,H=T;H-- >0;)if(M===b[H])return A;O(C)}}var S=E(["function"]),R=E(["object","function"]);function F(b,C,T){var N,_,A=0,O,M=new b(function(H,k,j){T=m(T,{timeout:0,overload:!1},{timeout:function(D,K){return D*=1,(typeof D!="number"||D<0||!Number.isFinite(D))&&K("timeout must be a positive number"),D}}),N=!T.overload&&typeof b.prototype.cancel=="function"&&typeof j=="function";function X(){_&&(_=null),A&&(clearTimeout(A),A=0)}var ee=function(D){X(),H(D)},ae=function(D){X(),k(D)};N?C(ee,ae,j):(_=[function(D){ae(D||Error("canceled"))}],C(ee,ae,function(D){if(O)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof D!="function")throw TypeError("onCancel callback must be a function");_.push(D)}),O=!0),T.timeout>0&&(A=setTimeout(function(){var D=Error("timeout");D.code="ETIMEDOUT",A=0,M.cancel(D),k(D)},T.timeout))});return N||(M.cancel=function(H){if(_){for(var k=_.length,j=1;j<k;j++)_[j](H);_[0](H),_=null}}),M}function $(b){var C=this._observers;if(!C)return-1;for(var T=C.length,N=0;N<T;N++)if(C[N]._target===b)return N;return-1}function U(b,C,T,N,_){if(!T)return null;if(N===0){var A=typeof C;if(A==="string"){var O,M,H=0,k=0,j=this.delimiter,X=j.length;if((M=C.indexOf(j))!==-1){O=new Array(5);do O[H++]=C.slice(k,M),k=M+X;while((M=C.indexOf(j,k))!==-1);O[H++]=C.slice(k),C=O,_=H}else C=[C],_=1}else A==="object"?_=C.length:(C=[C],_=1)}var ee=null,ae,D,K,Z,re,Q=C[N],Y=C[N+1],te,ie;if(N===_)T._listeners&&(typeof T._listeners=="function"?(b&&b.push(T._listeners),ee=[T]):(b&&b.push.apply(b,T._listeners),ee=[T]));else if(Q==="*"){for(te=f(T),M=te.length;M-- >0;)ae=te[M],ae!=="_listeners"&&(ie=U(b,C,T[ae],N+1,_),ie&&(ee?ee.push.apply(ee,ie):ee=ie));return ee}else if(Q==="**"){for(re=N+1===_||N+2===_&&Y==="*",re&&T._listeners&&(ee=U(b,C,T,_,_)),te=f(T),M=te.length;M-- >0;)ae=te[M],ae!=="_listeners"&&(ae==="*"||ae==="**"?(T[ae]._listeners&&!re&&(ie=U(b,C,T[ae],_,_),ie&&(ee?ee.push.apply(ee,ie):ee=ie)),ie=U(b,C,T[ae],N,_)):ae===Y?ie=U(b,C,T[ae],N+2,_):ie=U(b,C,T[ae],N,_),ie&&(ee?ee.push.apply(ee,ie):ee=ie));return ee}else T[Q]&&(ee=U(b,C,T[Q],N+1,_));if(D=T["*"],D&&U(b,C,D,N+1,_),K=T["**"],K)if(N<_)for(K._listeners&&U(b,C,K,_,_),te=f(K),M=te.length;M-- >0;)ae=te[M],ae!=="_listeners"&&(ae===Y?U(b,C,K[ae],N+2,_):ae===Q?U(b,C,K[ae],N+1,_):(Z={},Z[ae]=K[ae],U(b,C,{"**":Z},N+1,_)));else K._listeners?U(b,C,K,_,_):K["*"]&&K["*"]._listeners&&U(b,C,K["*"],_,_);return ee}function B(b,C,T){var N=0,_=0,A,O=this.delimiter,M=O.length,H;if(typeof b=="string")if((A=b.indexOf(O))!==-1){H=new Array(5);do H[N++]=b.slice(_,A),_=A+M;while((A=b.indexOf(O,_))!==-1);H[N++]=b.slice(_)}else H=[b],N=1;else H=b,N=b.length;if(N>1){for(A=0;A+1<N;A++)if(H[A]==="**"&&H[A+1]==="**")return}var k=this.listenerTree,j;for(A=0;A<N;A++)if(j=H[A],k=k[j]||(k[j]={}),A===N-1)return k._listeners?(typeof k._listeners=="function"&&(k._listeners=[k._listeners]),T?k._listeners.unshift(C):k._listeners.push(C),!k._listeners.warned&&this._maxListeners>0&&k._listeners.length>this._maxListeners&&(k._listeners.warned=!0,p.call(this,k._listeners.length,j))):k._listeners=C,!0;return!0}function W(b,C,T,N){for(var _=f(b),A=_.length,O,M,H,k=b._listeners,j;A-- >0;)M=_[A],O=b[M],M==="_listeners"?H=T:H=T?T.concat(M):[M],j=N||typeof M=="symbol",k&&C.push(j?H:H.join(this.delimiter)),typeof O=="object"&&W.call(this,O,C,H,j);return C}function V(b){for(var C=f(b),T=C.length,N,_,A;T-- >0;)_=C[T],N=b[_],N&&(A=!0,_!=="_listeners"&&!V(N)&&delete b[_]);return A}function L(b,C,T){this.emitter=b,this.event=C,this.listener=T}L.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function I(b,C,T){if(T===!0)_=!0;else if(T===!1)N=!0;else{if(!T||typeof T!="object")throw TypeError("options should be an object or true");var N=T.async,_=T.promisify,A=T.nextTick,O=T.objectify}if(N||A||_){var M=C,H=C._origin||C;if(A&&!s)throw Error("process.nextTick is not supported");_===n&&(_=C.constructor.name==="AsyncFunction"),C=function(){var k=arguments,j=this,X=this.event;return _?A?Promise.resolve():new Promise(function(ee){u(ee)}).then(function(){return j.event=X,M.apply(j,k)}):(A?process.nextTick:u)(function(){j.event=X,M.apply(j,k)})},C._async=!0,C._origin=H}return[C,O?new L(this,b,C):this]}function x(b){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,b)}x.EventEmitter2=x,x.prototype.listenTo=function(b,C,T){if(typeof b!="object")throw TypeError("target musts be an object");var N=this;T=m(T,{on:n,off:n,reducers:n},{on:S,off:S,reducers:R});function _(A){if(typeof A!="object")throw TypeError("events must be an object");var O=T.reducers,M=$.call(N,b),H;M===-1?H=new v(N,b,T):H=N._observers[M];for(var k=f(A),j=k.length,X,ee=typeof O=="function",ae=0;ae<j;ae++)X=k[ae],H.subscribe(X,A[X]||X,ee?O:O&&O[X])}return i(C)?_(y(C)):_(typeof C=="string"?y(C.split(/\s+/)):C),this},x.prototype.stopListeningTo=function(b,C){var T=this._observers;if(!T)return!1;var N=T.length,_,A=!1;if(b&&typeof b!="object")throw TypeError("target should be an object");for(;N-- >0;)_=T[N],(!b||_._target===b)&&(_.unsubscribe(C),A=!0);return A},x.prototype.delimiter=".",x.prototype.setMaxListeners=function(b){b!==n&&(this._maxListeners=b,this._conf||(this._conf={}),this._conf.maxListeners=b)},x.prototype.getMaxListeners=function(){return this._maxListeners},x.prototype.event="",x.prototype.once=function(b,C,T){return this._once(b,C,!1,T)},x.prototype.prependOnceListener=function(b,C,T){return this._once(b,C,!0,T)},x.prototype._once=function(b,C,T,N){return this._many(b,1,C,T,N)},x.prototype.many=function(b,C,T,N){return this._many(b,C,T,!1,N)},x.prototype.prependMany=function(b,C,T,N){return this._many(b,C,T,!0,N)},x.prototype._many=function(b,C,T,N,_){var A=this;if(typeof T!="function")throw new Error("many only accepts instances of Function");function O(){return--C===0&&A.off(b,O),T.apply(this,arguments)}return O._origin=T,this._on(b,O,N,_)},x.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var b=arguments[0],C,T=this.wildcard,N,_,A,O,M;if(b==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(T&&(C=b,b!=="newListener"&&b!=="removeListener"&&typeof b=="object")){if(_=b.length,a){for(A=0;A<_;A++)if(typeof b[A]=="symbol"){M=!0;break}}M||(b=b.join(this.delimiter))}var H=arguments.length,k;if(this._all&&this._all.length)for(k=this._all.slice(),A=0,_=k.length;A<_;A++)switch(this.event=b,H){case 1:k[A].call(this,b);break;case 2:k[A].call(this,b,arguments[1]);break;case 3:k[A].call(this,b,arguments[1],arguments[2]);break;default:k[A].apply(this,arguments)}if(T)k=[],U.call(this,k,C,this.listenerTree,0,_);else if(k=this._events[b],typeof k=="function"){switch(this.event=b,H){case 1:k.call(this);break;case 2:k.call(this,arguments[1]);break;case 3:k.call(this,arguments[1],arguments[2]);break;default:for(N=new Array(H-1),O=1;O<H;O++)N[O-1]=arguments[O];k.apply(this,N)}return!0}else k&&(k=k.slice());if(k&&k.length){if(H>3)for(N=new Array(H-1),O=1;O<H;O++)N[O-1]=arguments[O];for(A=0,_=k.length;A<_;A++)switch(this.event=b,H){case 1:k[A].call(this);break;case 2:k[A].call(this,arguments[1]);break;case 3:k[A].call(this,arguments[1],arguments[2]);break;default:k[A].apply(this,N)}return!0}else if(!this.ignoreErrors&&!this._all&&b==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},x.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var b=arguments[0],C=this.wildcard,T,N,_,A,O,M;if(b==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(C&&(T=b,b!=="newListener"&&b!=="removeListener"&&typeof b=="object")){if(A=b.length,a){for(O=0;O<A;O++)if(typeof b[O]=="symbol"){N=!0;break}}N||(b=b.join(this.delimiter))}var H=[],k=arguments.length,j;if(this._all)for(O=0,A=this._all.length;O<A;O++)switch(this.event=b,k){case 1:H.push(this._all[O].call(this,b));break;case 2:H.push(this._all[O].call(this,b,arguments[1]));break;case 3:H.push(this._all[O].call(this,b,arguments[1],arguments[2]));break;default:H.push(this._all[O].apply(this,arguments))}if(C?(j=[],U.call(this,j,T,this.listenerTree,0)):j=this._events[b],typeof j=="function")switch(this.event=b,k){case 1:H.push(j.call(this));break;case 2:H.push(j.call(this,arguments[1]));break;case 3:H.push(j.call(this,arguments[1],arguments[2]));break;default:for(_=new Array(k-1),M=1;M<k;M++)_[M-1]=arguments[M];H.push(j.apply(this,_))}else if(j&&j.length){if(j=j.slice(),k>3)for(_=new Array(k-1),M=1;M<k;M++)_[M-1]=arguments[M];for(O=0,A=j.length;O<A;O++)switch(this.event=b,k){case 1:H.push(j[O].call(this));break;case 2:H.push(j[O].call(this,arguments[1]));break;case 3:H.push(j[O].call(this,arguments[1],arguments[2]));break;default:H.push(j[O].apply(this,_))}}else if(!this.ignoreErrors&&!this._all&&b==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(H)},x.prototype.on=function(b,C,T){return this._on(b,C,!1,T)},x.prototype.prependListener=function(b,C,T){return this._on(b,C,!0,T)},x.prototype.onAny=function(b){return this._onAny(b,!1)},x.prototype.prependAny=function(b){return this._onAny(b,!0)},x.prototype.addListener=x.prototype.on,x.prototype._onAny=function(b,C){if(typeof b!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),C?this._all.unshift(b):this._all.push(b),this},x.prototype._on=function(b,C,T,N){if(typeof b=="function")return this._onAny(b,C),this;if(typeof C!="function")throw new Error("on only accepts instances of Function");this._events||d.call(this);var _=this,A;return N!==n&&(A=I.call(this,b,C,N),C=A[0],_=A[1]),this._newListener&&this.emit("newListener",b,C),this.wildcard?(B.call(this,b,C,T),_):(this._events[b]?(typeof this._events[b]=="function"&&(this._events[b]=[this._events[b]]),T?this._events[b].unshift(C):this._events[b].push(C),!this._events[b].warned&&this._maxListeners>0&&this._events[b].length>this._maxListeners&&(this._events[b].warned=!0,p.call(this,this._events[b].length,b))):this._events[b]=C,_)},x.prototype.off=function(b,C){if(typeof C!="function")throw new Error("removeListener only takes instances of Function");var T,N=[];if(this.wildcard){var _=typeof b=="string"?b.split(this.delimiter):b.slice();if(N=U.call(this,null,_,this.listenerTree,0),!N)return this}else{if(!this._events[b])return this;T=this._events[b],N.push({_listeners:T})}for(var A=0;A<N.length;A++){var O=N[A];if(T=O._listeners,i(T)){for(var M=-1,H=0,k=T.length;H<k;H++)if(T[H]===C||T[H].listener&&T[H].listener===C||T[H]._origin&&T[H]._origin===C){M=H;break}if(M<0)continue;return this.wildcard?O._listeners.splice(M,1):this._events[b].splice(M,1),T.length===0&&(this.wildcard?delete O._listeners:delete this._events[b]),this._removeListener&&this.emit("removeListener",b,C),this}else(T===C||T.listener&&T.listener===C||T._origin&&T._origin===C)&&(this.wildcard?delete O._listeners:delete this._events[b],this._removeListener&&this.emit("removeListener",b,C))}return this.listenerTree&&V(this.listenerTree),this},x.prototype.offAny=function(b){var C=0,T=0,N;if(b&&this._all&&this._all.length>0){for(N=this._all,C=0,T=N.length;C<T;C++)if(b===N[C])return N.splice(C,1),this._removeListener&&this.emit("removeListenerAny",b),this}else{if(N=this._all,this._removeListener)for(C=0,T=N.length;C<T;C++)this.emit("removeListenerAny",N[C]);this._all=[]}return this},x.prototype.removeListener=x.prototype.off,x.prototype.removeAllListeners=function(b){if(b===n)return!this._events||d.call(this),this;if(this.wildcard){var C=U.call(this,null,b,this.listenerTree,0),T,N;if(!C)return this;for(N=0;N<C.length;N++)T=C[N],T._listeners=null;this.listenerTree&&V(this.listenerTree)}else this._events&&(this._events[b]=null);return this},x.prototype.listeners=function(b){var C=this._events,T,N,_,A,O;if(b===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!C)return[];for(T=f(C),A=T.length,_=[];A-- >0;)N=C[T[A]],typeof N=="function"?_.push(N):_.push.apply(_,N);return _}else{if(this.wildcard){if(O=this.listenerTree,!O)return[];var M=[],H=typeof b=="string"?b.split(this.delimiter):b.slice();return U.call(this,M,H,O,0),M}return C?(N=C[b],N?typeof N=="function"?[N]:N:[]):[]}},x.prototype.eventNames=function(b){var C=this._events;return this.wildcard?W.call(this,this.listenerTree,[],null,b):C?f(C):[]},x.prototype.listenerCount=function(b){return this.listeners(b).length},x.prototype.hasListeners=function(b){if(this.wildcard){var C=[],T=typeof b=="string"?b.split(this.delimiter):b.slice();return U.call(this,C,T,this.listenerTree,0),C.length>0}var N=this._events,_=this._all;return!!(_&&_.length||N&&(b===n?f(N).length:N[b]))},x.prototype.listenersAny=function(){return this._all?this._all:[]},x.prototype.waitFor=function(b,C){var T=this,N=typeof C;return N==="number"?C={timeout:C}:N==="function"&&(C={filter:C}),C=m(C,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:S,Promise:w}),F(C.Promise,function(_,A,O){function M(){var H=C.filter;if(!(H&&!H.apply(T,arguments)))if(T.off(b,M),C.handleError){var k=arguments[0];k?A(k):_(g.apply(null,arguments).slice(1))}else _(g.apply(null,arguments))}O(function(){T.off(b,M)}),T._on(b,M,!1)},{timeout:C.timeout,overload:C.overload})};function P(b,C,T){T=m(T,{Promise,timeout:0,overload:!1},{Promise:w});var N=T.Promise;return F(N,function(_,A,O){var M;if(typeof b.addEventListener=="function"){M=function(){_(g.apply(null,arguments))},O(function(){b.removeEventListener(C,M)}),b.addEventListener(C,M,{once:!0});return}var H=function(){k&&b.removeListener("error",k),_(g.apply(null,arguments))},k;C!=="error"&&(k=function(j){b.removeListener(C,H),A(j)},b.once("error",k)),O(function(){k&&b.removeListener("error",k),b.removeListener(C,H)}),b.once(C,H)},{timeout:T.timeout,overload:T.overload})}var G=x.prototype;Object.defineProperties(x,{defaultMaxListeners:{get:function(){return G._maxListeners},set:function(b){if(typeof b!="number"||b<0||Number.isNaN(b))throw TypeError("n must be a non-negative number");G._maxListeners=b},enumerable:!0},once:{value:P,writable:!0,configurable:!0}}),Object.defineProperties(G,{_maxListeners:{value:o,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=x})()})(m0)),m0.exports}var Ah=EP();const xP=Hg(Ah);var Hu,AP=new Uint8Array(16);function _P(){if(!Hu&&(Hu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Hu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hu(AP)}const CP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function e1(t){return typeof t=="string"&&CP.test(t)}var xn=[];for(var w0=0;w0<256;++w0)xn.push((w0+256).toString(16).substr(1));function SP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(xn[t[e+0]]+xn[t[e+1]]+xn[t[e+2]]+xn[t[e+3]]+"-"+xn[t[e+4]]+xn[t[e+5]]+"-"+xn[t[e+6]]+xn[t[e+7]]+"-"+xn[t[e+8]]+xn[t[e+9]]+"-"+xn[t[e+10]]+xn[t[e+11]]+xn[t[e+12]]+xn[t[e+13]]+xn[t[e+14]]+xn[t[e+15]]).toLowerCase();if(!e1(n))throw TypeError("Stringified UUID is invalid");return n}function ts(t,e,n){t=t||{};var r=t.random||(t.rng||_P)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,SP(r)}const Ki=Object.create(null);Ki.open="0";Ki.close="1";Ki.ping="2";Ki.pong="3";Ki.message="4";Ki.upgrade="5";Ki.noop="6";const Cf=Object.create(null);Object.keys(Ki).forEach(t=>{Cf[Ki[t]]=t});const t1={type:"error",data:"parser error"},f_=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",d_=typeof ArrayBuffer=="function",h_=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,$g=({type:t,data:e},n,r)=>f_&&e instanceof Blob?n?r(e):t2(e,r):d_&&(e instanceof ArrayBuffer||h_(e))?n?r(e):t2(new Blob([e]),r):r(Ki[t]+(e||"")),t2=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function n2(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let b0;function IP(t,e){if(f_&&t.data instanceof Blob)return t.data.arrayBuffer().then(n2).then(e);if(d_&&(t.data instanceof ArrayBuffer||h_(t.data)))return e(n2(t.data));$g(t,!1,n=>{b0||(b0=new TextEncoder),e(b0.encode(n))})}const r2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",el=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<r2.length;t++)el[r2.charCodeAt(t)]=t;const TP=t=>{let e=t.length*.75,n=t.length,r,i=0,o,s,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)o=el[t.charCodeAt(r)],s=el[t.charCodeAt(r+1)],a=el[t.charCodeAt(r+2)],c=el[t.charCodeAt(r+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},OP=typeof ArrayBuffer=="function",Vg=(t,e)=>{if(typeof t!="string")return{type:"message",data:p_(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:RP(t.substring(1),e)}:Cf[n]?t.length>1?{type:Cf[n],data:t.substring(1)}:{type:Cf[n]}:t1},RP=(t,e)=>{if(OP){const n=TP(t);return p_(n,e)}else return{base64:!0,data:t}},p_=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},g_="",PP=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((o,s)=>{$g(o,!1,a=>{r[s]=a,++i===n&&e(r.join(g_))})})},NP=(t,e)=>{const n=t.split(g_),r=[];for(let i=0;i<n.length;i++){const o=Vg(n[i],e);if(r.push(o),o.type==="error")break}return r};function kP(){return new TransformStream({transform(t,e){IP(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let E0;function $u(t){return t.reduce((e,n)=>e+n.length,0)}function Vu(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function MP(t,e){E0||(E0=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(r===0){if($u(n)<1)break;const c=Vu(n,1);o=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if($u(n)<2)break;const c=Vu(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if($u(n)<8)break;const c=Vu(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(t1);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if($u(n)<i)break;const c=Vu(n,i);a.enqueue(Vg(o?c:E0.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(t1);break}}}})}const v_=4;function Jt(t){if(t)return DP(t)}function DP(t){for(var e in Jt.prototype)t[e]=Jt.prototype[e];return t}Jt.prototype.on=Jt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Jt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Jt.prototype.off=Jt.prototype.removeListener=Jt.prototype.removeAllListeners=Jt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Jt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Jt.prototype.emitReserved=Jt.prototype.emit;Jt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Jt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const _h=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),jr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),BP="arraybuffer";function y_(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const LP=jr.setTimeout,FP=jr.clearTimeout;function Ch(t,e){e.useNativeTimers?(t.setTimeoutFn=LP.bind(jr),t.clearTimeoutFn=FP.bind(jr)):(t.setTimeoutFn=jr.setTimeout.bind(jr),t.clearTimeoutFn=jr.clearTimeout.bind(jr))}const UP=1.33;function HP(t){return typeof t=="string"?$P(t):Math.ceil((t.byteLength||t.size)*UP)}function $P(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function m_(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function VP(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function KP(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class jP extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Kg extends Jt{constructor(e){super(),this.writable=!1,Ch(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new jP(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Vg(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=VP(e);return n.length?"?"+n:""}}class GP extends Kg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};NP(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,PP(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=m_()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let w_=!1;try{w_=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const zP=w_;function WP(){}class qP extends GP{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Li extends Jt{constructor(e,n,r){super(),this.createRequest=e,Ch(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=y_(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Li.requestsCount++,Li.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=WP,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Li.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Li.requestsCount=0;Li.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",i2);else if(typeof addEventListener=="function"){const t="onpagehide"in jr?"pagehide":"unload";addEventListener(t,i2,!1)}}function i2(){for(let t in Li.requests)Li.requests.hasOwnProperty(t)&&Li.requests[t].abort()}const YP=(function(){const t=b_({xdomain:!1});return t&&t.responseType!==null})();class XP extends qP{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=YP&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Li(b_,this.uri(),e)}}function b_(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||zP))return new XMLHttpRequest}catch{}if(!e)try{return new jr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const E_=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ZP extends Kg{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=E_?{}:y_(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;$g(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}i&&_h(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=m_()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const x0=jr.WebSocket||jr.MozWebSocket;class QP extends ZP{createSocket(e,n,r){return E_?new x0(e,n,r):n?new x0(e,n):new x0(e)}doWrite(e,n){this.ws.send(n)}}class JP extends Kg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=MP(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=kP();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),o())}).catch(a=>{})};o();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&_h(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const eN={websocket:QP,webtransport:JP,polling:XP},tN=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function n1(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=tN.exec(t||""),o={},s=14;for(;s--;)o[nN[s]]=i[s]||"";return n!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=rN(o,o.path),o.queryKey=iN(o,o.query),o}function rN(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function iN(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}const r1=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sf=[];r1&&addEventListener("offline",()=>{Sf.forEach(t=>t())},!1);class ls extends Jt{constructor(e,n){if(super(),this.binaryType=BP,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=n1(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=n1(n.host).host);Ch(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=KP(this.opts.query)),r1&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=v_,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ls.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ls.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=HP(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,_h(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ls.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),r1&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Sf.indexOf(this._offlineEventListener);r!==-1&&Sf.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ls.protocol=v_;class oN extends ls{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ls.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ls.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function o(){r||(r=!0,u(),n.close(),n=null)}const s=f=>{const d=new Error("probe error: "+f);d.transport=n.name,o(),this.emitReserved("upgradeError",d)};function a(){s("transport closed")}function c(){s("socket closed")}function l(f){n&&f.name!==n.name&&o()}const u=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",s),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let sN=class extends oN{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>eN[i]).filter(i=>!!i)),super(e,r)}};function aN(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=n1(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const cN=typeof ArrayBuffer=="function",lN=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,x_=Object.prototype.toString,uN=typeof Blob=="function"||typeof Blob<"u"&&x_.call(Blob)==="[object BlobConstructor]",fN=typeof File=="function"||typeof File<"u"&&x_.call(File)==="[object FileConstructor]";function jg(t){return cN&&(t instanceof ArrayBuffer||lN(t))||uN&&t instanceof Blob||fN&&t instanceof File}function If(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(If(t[n]))return!0;return!1}if(jg(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return If(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&If(t[n]))return!0;return!1}function dN(t){const e=[],n=t.data,r=t;return r.data=i1(n,e),r.attachments=e.length,{packet:r,buffers:e}}function i1(t,e){if(!t)return t;if(jg(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=i1(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=i1(t[r],e));return n}return t}function hN(t,e){return t.data=o1(t.data,e),delete t.attachments,t}function o1(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=o1(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=o1(t[n],e));return t}const pN=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],gN=5;var Ze;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ze||(Ze={}));class vN{constructor(e){this.replacer=e}encode(e){return(e.type===Ze.EVENT||e.type===Ze.ACK)&&If(e)?this.encodeAsBinary({type:e.type===Ze.EVENT?Ze.BINARY_EVENT:Ze.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Ze.BINARY_EVENT||e.type===Ze.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=dN(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function o2(t){return Object.prototype.toString.call(t)==="[object Object]"}let yN=class A_ extends Jt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Ze.BINARY_EVENT;r||n.type===Ze.BINARY_ACK?(n.type=r?Ze.EVENT:Ze.ACK,this.reconstructor=new mN(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(jg(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Ze[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ze.BINARY_EVENT||r.type===Ze.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(o,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(o,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(A_.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Ze.CONNECT:return o2(n);case Ze.DISCONNECT:return n===void 0;case Ze.CONNECT_ERROR:return typeof n=="string"||o2(n);case Ze.EVENT:case Ze.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&pN.indexOf(n[0])===-1);case Ze.ACK:case Ze.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class mN{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=hN(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wN=Object.freeze(Object.defineProperty({__proto__:null,Decoder:yN,Encoder:vN,get PacketType(){return Ze},protocol:gN},Symbol.toStringTag,{value:"Module"}));function ii(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const bN=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class __ extends Jt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ii(e,"open",this.onopen.bind(this)),ii(e,"packet",this.onpacket.bind(this)),ii(e,"error",this.onerror.bind(this)),ii(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,o;if(bN.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:Ze.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,f=n.pop();this._registerAckCallback(u,f),s.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),s=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,i)=>{const o=(s,a)=>s?i(s):r(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ze.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ze.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ze.EVENT:case Ze.BINARY_EVENT:this.onevent(e);break;case Ze.ACK:case Ze.BINARY_ACK:this.onack(e);break;case Ze.DISCONNECT:this.ondisconnect();break;case Ze.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Ze.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ze.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Oc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Oc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Oc.prototype.reset=function(){this.attempts=0};Oc.prototype.setMin=function(t){this.ms=t};Oc.prototype.setMax=function(t){this.max=t};Oc.prototype.setJitter=function(t){this.jitter=t};class s1 extends Jt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Ch(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Oc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||wN;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new sN(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=ii(n,"open",function(){r.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=ii(n,"error",o);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ii(e,"ping",this.onping.bind(this)),ii(e,"data",this.ondata.bind(this)),ii(e,"error",this.onerror.bind(this)),ii(e,"close",this.onclose.bind(this)),ii(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){_h(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new __(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Hc={};function Tf(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=aN(t,e.path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=Hc[i]&&o in Hc[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let c;return a?c=new s1(r,e):(Hc[i]||(Hc[i]=new s1(r,e)),c=Hc[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Tf,{Manager:s1,Socket:__,io:Tf,connect:Tf});function ge(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(l){try{c(r.next(l))}catch(u){o(u)}}function a(l){try{c(r.throw(l))}catch(u){o(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n((function(f){f(u)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}var or=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Ti=[],Hr=[],EN=typeof Uint8Array<"u"?Uint8Array:Array,Gg=!1;function C_(){Gg=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)Ti[e]=t[e],Hr[t.charCodeAt(e)]=e;Hr[45]=62,Hr[95]=63}function xN(t,e,n){for(var r,i,o=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(Ti[(i=r)>>18&63]+Ti[i>>12&63]+Ti[i>>6&63]+Ti[63&i]);return o.join("")}function s2(t){var e;Gg||C_();for(var n=t.length,r=n%3,i="",o=[],s=16383,a=0,c=n-r;a<c;a+=s)o.push(xN(t,a,a+s>c?c:a+s));return r===1?(e=t[n-1],i+=Ti[e>>2],i+=Ti[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Ti[e>>10],i+=Ti[e>>4&63],i+=Ti[e<<2&63],i+="="),o.push(i),o.join("")}function Ku(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,o=h&(1<<-u)-1,h>>=-u,u+=a;u>0;o=256*o+t[e+f],f+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+f],f+=d,u-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=l}return(h?-1:1)*s*Math.pow(2,o-r)}function S_(t,e,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(e*c-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+h]=255&s,h+=p,s/=256,l-=8);t[n+h-p]|=128*g}var AN={}.toString,I_=Array.isArray||function(t){return AN.call(t)=="[object Array]"};ye.TYPED_ARRAY_SUPPORT=or.TYPED_ARRAY_SUPPORT===void 0||or.TYPED_ARRAY_SUPPORT;var _N=vd();function vd(){return ye.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function uo(t,e){if(vd()<e)throw new RangeError("Invalid typed array length");return ye.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ye.prototype:(t===null&&(t=new ye(e)),t.length=e),t}function ye(t,e,n){if(!(ye.TYPED_ARRAY_SUPPORT||this instanceof ye))return new ye(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return a1(this,t)}return T_(this,t,e,n)}function T_(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?(function(i,o,s,a){if(o.byteLength,s<0||o.byteLength<s)throw new RangeError("'offset' is out of bounds");if(o.byteLength<s+(a||0))throw new RangeError("'length' is out of bounds");return o=s===void 0&&a===void 0?new Uint8Array(o):a===void 0?new Uint8Array(o,s):new Uint8Array(o,s,a),ye.TYPED_ARRAY_SUPPORT?(i=o).__proto__=ye.prototype:i=A0(i,o),i})(t,e,n,r):typeof e=="string"?(function(i,o,s){if(typeof s=="string"&&s!==""||(s="utf8"),!ye.isEncoding(s))throw new TypeError('"encoding" must be a valid string encoding');var a=0|R_(o,s);i=uo(i,a);var c=i.write(o,s);return c!==a&&(i=i.slice(0,c)),i})(t,e,n):(function(i,o){if(Oi(o)){var s=0|zg(o.length);return(i=uo(i,s)).length===0||o.copy(i,0,0,s),i}if(o){if(typeof ArrayBuffer<"u"&&o.buffer instanceof ArrayBuffer||"length"in o)return typeof o.length!="number"||(a=o.length)!=a?uo(i,0):A0(i,o);if(o.type==="Buffer"&&I_(o.data))return A0(i,o.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")})(t,e)}function O_(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a1(t,e){if(O_(e),t=uo(t,e<0?0:0|zg(e)),!ye.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function A0(t,e){var n=e.length<0?0:0|zg(e.length);t=uo(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function zg(t){if(t>=vd())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+vd().toString(16)+" bytes");return 0|t}function Oi(t){return!(t==null||!t._isBuffer)}function R_(t,e){if(Oi(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return yd(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return M_(t).length;default:if(r)return yd(t).length;e=(""+e).toLowerCase(),r=!0}}function CN(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return MN(this,e,n);case"utf8":case"utf-8":return N_(this,e,n);case"ascii":return NN(this,e,n);case"latin1":case"binary":return kN(this,e,n);case"base64":return PN(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return DN(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Ss(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function a2(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(typeof e=="string"&&(e=ye.from(e,r)),Oi(e))return e.length===0?-1:c2(t,e,n,r,i);if(typeof e=="number")return e&=255,ye.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):c2(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function c2(t,e,n,r,i){var o,s=1,a=t.length,c=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(h,p){return s===1?h[p]:h.readUInt16BE(p*s)}if(i){var u=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,u===-1?0:o-u)){if(u===-1&&(u=o),o-u+1===c)return u*s}else u!==-1&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var f=!0,d=0;d<c;d++)if(l(t,o+d)!==l(e,d)){f=!1;break}if(f)return o}return-1}function SN(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function IN(t,e,n,r){return Sh(yd(e,t.length-n),t,n,r)}function P_(t,e,n,r){return Sh((function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o})(e),t,n,r)}function TN(t,e,n,r){return P_(t,e,n,r)}function ON(t,e,n,r){return Sh(M_(e),t,n,r)}function RN(t,e,n,r){return Sh((function(i,o){for(var s,a,c,l=[],u=0;u<i.length&&!((o-=2)<0);++u)a=(s=i.charCodeAt(u))>>8,c=s%256,l.push(c),l.push(a);return l})(e,t.length-n),t,n,r)}function PN(t,e,n){return e===0&&n===t.length?s2(t):s2(t.slice(e,n))}function N_(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,c,l=t[i],u=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(u=l);break;case 2:(192&(o=t[i+1]))==128&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=t[i+1],s=t[i+2],(192&o)==128&&(192&s)==128&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}u===null?(u=65533,f=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=f}return(function(d){var h=d.length;if(h<=l2)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<h;)p+=String.fromCharCode.apply(String,d.slice(g,g+=l2));return p})(r)}ye.poolSize=8192,ye._augment=function(t){return t.__proto__=ye.prototype,t},ye.from=function(t,e,n){return T_(null,t,e,n)},ye.TYPED_ARRAY_SUPPORT&&(ye.prototype.__proto__=Uint8Array.prototype,ye.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&ye[Symbol.species]),ye.alloc=function(t,e,n){return(function(r,i,o,s){return O_(i),i<=0?uo(r,i):o!==void 0?typeof s=="string"?uo(r,i).fill(o,s):uo(r,i).fill(o):uo(r,i)})(null,t,e,n)},ye.allocUnsafe=function(t){return a1(null,t)},ye.allocUnsafeSlow=function(t){return a1(null,t)},ye.isBuffer=D_,ye.compare=function(t,e){if(!Oi(t)||!Oi(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},ye.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ye.concat=function(t,e){if(!I_(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ye.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=ye.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!Oi(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},ye.byteLength=R_,ye.prototype._isBuffer=!0,ye.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ss(this,e,e+1);return this},ye.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ss(this,e,e+3),Ss(this,e+1,e+2);return this},ye.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ss(this,e,e+7),Ss(this,e+1,e+6),Ss(this,e+2,e+5),Ss(this,e+3,e+4);return this},ye.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?N_(this,0,t):CN.apply(this,arguments)},ye.prototype.equals=function(t){if(!Oi(t))throw new TypeError("Argument must be a Buffer");return this===t||ye.compare(this,t)===0},ye.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ye.prototype.compare=function(t,e,n,r,i){if(!Oi(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),u=0;u<a;++u)if(c[u]!==l[u]){o=c[u],s=l[u];break}return o<s?-1:s<o?1:0},ye.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},ye.prototype.indexOf=function(t,e,n){return a2(this,t,e,n,!0)},ye.prototype.lastIndexOf=function(t,e,n){return a2(this,t,e,n,!1)},ye.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return SN(this,t,e,n);case"utf8":case"utf-8":return IN(this,t,e,n);case"ascii":return P_(this,t,e,n);case"latin1":case"binary":return TN(this,t,e,n);case"base64":return ON(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return RN(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var l2=4096;function NN(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function kN(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function MN(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=LN(t[o]);return i}function DN(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function fn(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function sr(t,e,n,r,i,o){if(!Oi(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function ju(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Gu(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function k_(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function u2(t,e,n,r,i){return i||k_(t,0,n,4),S_(t,e,n,r,23,4),n+4}function f2(t,e,n,r,i){return i||k_(t,0,n,8),S_(t,e,n,r,52,8),n+8}ye.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ye.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=ye.prototype;else{var i=e-t;n=new ye(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},ye.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||fn(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},ye.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||fn(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},ye.prototype.readUInt8=function(t,e){return e||fn(t,1,this.length),this[t]},ye.prototype.readUInt16LE=function(t,e){return e||fn(t,2,this.length),this[t]|this[t+1]<<8},ye.prototype.readUInt16BE=function(t,e){return e||fn(t,2,this.length),this[t]<<8|this[t+1]},ye.prototype.readUInt32LE=function(t,e){return e||fn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ye.prototype.readUInt32BE=function(t,e){return e||fn(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ye.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||fn(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},ye.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||fn(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},ye.prototype.readInt8=function(t,e){return e||fn(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ye.prototype.readInt16LE=function(t,e){e||fn(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},ye.prototype.readInt16BE=function(t,e){e||fn(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},ye.prototype.readInt32LE=function(t,e){return e||fn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ye.prototype.readInt32BE=function(t,e){return e||fn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ye.prototype.readFloatLE=function(t,e){return e||fn(t,4,this.length),Ku(this,t,!0,23,4)},ye.prototype.readFloatBE=function(t,e){return e||fn(t,4,this.length),Ku(this,t,!1,23,4)},ye.prototype.readDoubleLE=function(t,e){return e||fn(t,8,this.length),Ku(this,t,!0,52,8)},ye.prototype.readDoubleBE=function(t,e){return e||fn(t,8,this.length),Ku(this,t,!1,52,8)},ye.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||sr(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},ye.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||sr(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},ye.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,1,255,0),ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ye.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,2,65535,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):ju(this,t,e,!0),e+2},ye.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,2,65535,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):ju(this,t,e,!1),e+2},ye.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,4,4294967295,0),ye.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Gu(this,t,e,!0),e+4},ye.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,4,4294967295,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Gu(this,t,e,!1),e+4},ye.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);sr(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&a===0&&this[e+o-1]!==0&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},ye.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);sr(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&a===0&&this[e+o+1]!==0&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},ye.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,1,127,-128),ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ye.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,2,32767,-32768),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):ju(this,t,e,!0),e+2},ye.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,2,32767,-32768),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):ju(this,t,e,!1),e+2},ye.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,4,2147483647,-2147483648),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Gu(this,t,e,!0),e+4},ye.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||sr(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Gu(this,t,e,!1),e+4},ye.prototype.writeFloatLE=function(t,e,n){return u2(this,t,e,!0,n)},ye.prototype.writeFloatBE=function(t,e,n){return u2(this,t,e,!1,n)},ye.prototype.writeDoubleLE=function(t,e,n){return f2(this,t,e,!0,n)},ye.prototype.writeDoubleBE=function(t,e,n){return f2(this,t,e,!1,n)},ye.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!ye.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},ye.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!ye.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(o=e;o<n;++o)this[o]=t;else{var s=Oi(t)?t:yd(new ye(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var BN=/[^+\/0-9A-Za-z-_]/g;function LN(t){return t<16?"0"+t.toString(16):t.toString(16)}function yd(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function M_(t){return(function(e){var n,r,i,o,s,a;Gg||C_();var c=e.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=e[c-2]==="="?2:e[c-1]==="="?1:0,a=new EN(3*c/4-s),i=s>0?c-4:c;var l=0;for(n=0,r=0;n<i;n+=4,r+=3)o=Hr[e.charCodeAt(n)]<<18|Hr[e.charCodeAt(n+1)]<<12|Hr[e.charCodeAt(n+2)]<<6|Hr[e.charCodeAt(n+3)],a[l++]=o>>16&255,a[l++]=o>>8&255,a[l++]=255&o;return s===2?(o=Hr[e.charCodeAt(n)]<<2|Hr[e.charCodeAt(n+1)]>>4,a[l++]=255&o):s===1&&(o=Hr[e.charCodeAt(n)]<<10|Hr[e.charCodeAt(n+1)]<<4|Hr[e.charCodeAt(n+2)]>>2,a[l++]=o>>8&255,a[l++]=255&o),a})((function(e){if((e=(function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")})(e).replace(BN,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e})(t))}function Sh(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function D_(t){return t!=null&&(!!t._isBuffer||d2(t)||(function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&d2(e.slice(0,0))})(t))}function d2(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var FN=Object.freeze({__proto__:null,Buffer:ye,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),ye.alloc(+t)},isBuffer:D_,kMaxLength:_N}),zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ih(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yu(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})})),n}var Oa={},kr={},Bn={};function md(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function B_(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function L_(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Wg(t,...e){if(!L_(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function F_(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");md(t.outputLen),md(t.blockLen)}function U_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function H_(t,e){Wg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.isBytes=L_,Bn.number=md,Bn.bool=B_,Bn.bytes=Wg,Bn.hash=F_,Bn.exists=U_,Bn.output=H_;const UN={number:md,bool:B_,bytes:Wg,hash:F_,exists:U_,output:H_};Bn.default=UN,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=s,t.hexToNumber=a,t.bytesToNumberBE=function(f){return a(r(f))},t.numberToBytesBE=function(f,d){return s(f.toString(16).padStart(2*d,"0"))},t.asyncLoop=async function(f,d,h){let p=Date.now();for(let g=0;g<f;g++){h(g);const y=Date.now()-p;y>=0&&y<d||(await(0,t.nextTick)(),p+=y)}},t.utf8ToBytes=c,t.bytesToUtf8=function(f){return new TextDecoder().decode(f)},t.toBytes=function(f){if(typeof f=="string")f=c(f);else{if(!(0,e.isBytes)(f))throw new Error("Uint8Array expected, got "+typeof f);f=u(f)}return f},t.concatBytes=function(...f){let d=0;for(let p=0;p<f.length;p++){const g=f[p];(0,e.bytes)(g),d+=g.length}const h=new Uint8Array(d);for(let p=0,g=0;p<f.length;p++){const y=f[p];h.set(y,g),g+=y.length}return h},t.checkOpts=function(f,d){if(d==null||typeof d!="object")throw new Error("options must be defined");return Object.assign(f,d)},t.equalBytes=function(f,d){if(f.length!==d.length)return!1;let h=0;for(let p=0;p<f.length;p++)h|=f[p]^d[p];return h===0},t.setBigUint64=l,t.u64Lengths=function(f,d){const h=new Uint8Array(16),p=(0,t.createView)(h);return l(p,0,BigInt(d?d.length:0),!0),l(p,8,BigInt(f.length),!0),h},t.isAligned32=function(f){return f.byteOffset%4==0},t.copyBytes=u,t.clean=function(...f){for(let d=0;d<f.length;d++)f[d].fill(0)};const e=Bn;if(t.u8=f=>new Uint8Array(f.buffer,f.byteOffset,f.byteLength),t.u16=f=>new Uint16Array(f.buffer,f.byteOffset,Math.floor(f.byteLength/2)),t.u32=f=>new Uint32Array(f.buffer,f.byteOffset,Math.floor(f.byteLength/4)),t.createView=f=>new DataView(f.buffer,f.byteOffset,f.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},((f,d)=>d.toString(16).padStart(2,"0")));function r(f){(0,e.bytes)(f);let d="";for(let h=0;h<f.length;h++)d+=n[f[h]];return d}const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(f){return f>=i._0&&f<=i._9?f-i._0:f>=i._A&&f<=i._F?f-(i._A-10):f>=i._a&&f<=i._f?f-(i._a-10):void 0}function s(f){if(typeof f!="string")throw new Error("hex string expected, got "+typeof f);const d=f.length,h=d/2;if(d%2)throw new Error("padded hex string expected, got unpadded hex of length "+d);const p=new Uint8Array(h);for(let g=0,y=0;g<h;g++,y+=2){const v=o(f.charCodeAt(y)),m=o(f.charCodeAt(y+1));if(v===void 0||m===void 0){const w=f[y]+f[y+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+y)}p[g]=16*v+m}return p}function a(f){if(typeof f!="string")throw new Error("hex string expected, got "+typeof f);return BigInt(f===""?"0":`0x${f}`)}function c(f){if(typeof f!="string")throw new Error("string expected, got "+typeof f);return new Uint8Array(new TextEncoder().encode(f))}t.nextTick=async()=>{},t.Hash=class{};function l(f,d,h,p){if(typeof f.setBigUint64=="function")return f.setBigUint64(d,h,p);const g=BigInt(32),y=BigInt(4294967295),v=Number(h>>g&y),m=Number(h&y),w=p?4:0,E=p?0:4;f.setUint32(d+w,v,p),f.setUint32(d+E,m,p)}function u(f){return Uint8Array.from(f)}t.wrapCipher=(f,d)=>(Object.assign(d,f),d)})(kr);var Kl={},dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.AEAD_TAG_LENGTH=dn.XCHACHA20_NONCE_LENGTH=dn.CURVE25519_PUBLIC_KEY_SIZE=dn.ETH_PUBLIC_KEY_SIZE=dn.UNCOMPRESSED_PUBLIC_KEY_SIZE=dn.COMPRESSED_PUBLIC_KEY_SIZE=dn.SECRET_KEY_LENGTH=void 0,dn.SECRET_KEY_LENGTH=32,dn.COMPRESSED_PUBLIC_KEY_SIZE=33,dn.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,dn.ETH_PUBLIC_KEY_SIZE=64,dn.CURVE25519_PUBLIC_KEY_SIZE=32,dn.XCHACHA20_NONCE_LENGTH=24,dn.AEAD_TAG_LENGTH=16,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=dn,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}})(Kl);var _0={},wd={},Th={},$_={},qg={},zu={};Object.defineProperty(zu,"__esModule",{value:!0}),zu.crypto=void 0,zu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=i,t.getWebcryptoSubtle=o,t.managedNonce=function(c){return(0,n.number)(c.nonceLength),(l,...u)=>({encrypt(f,...d){const{nonceLength:h}=c,p=i(h),g=c(l,p,...u).encrypt(f,...d),y=(0,r.concatBytes)(p,g);return g.fill(0),y},decrypt(f,...d){const{nonceLength:h}=c,p=f.subarray(0,h),g=f.subarray(h);return c(l,p,...u).decrypt(g,...d)}})};const e=zu,n=Bn,r=kr;function i(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")}function o(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(c,l,u,f){const d=o(),h=await d.importKey("raw",c,l,!0,["encrypt"]),p=await d.encrypt(u,h,f);return new Uint8Array(p)},async decrypt(c,l,u,f){const d=o(),h=await d.importKey("raw",c,l,!0,["decrypt"]),p=await d.decrypt(u,h,f);return new Uint8Array(p)}};const s={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(c){return(l,u,f)=>{(0,n.bytes)(l),(0,n.bytes)(u);const d={name:c,length:8*l.length},h=(function(p,g,y){if(p===s.CBC)return{name:s.CBC,iv:g};if(p===s.CTR)return{name:s.CTR,counter:g,length:64};if(p===s.GCM)return y?{name:s.GCM,iv:g,additionalData:y}:{name:s.GCM,iv:g};throw new Error("unknown aes block mode")})(c,u,f);return{encrypt:p=>((0,n.bytes)(p),t.utils.encrypt(l,d,h,p)),decrypt:p=>((0,n.bytes)(p),t.utils.decrypt(l,d,h,p))}}}t.cbc=a(s.CBC),t.ctr=a(s.CTR),t.gcm=a(s.GCM)})(qg);var V_={},gn={},fo={},Ir={};function bd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function K_(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function j_(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Yg(t,...e){if(!j_(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function G_(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");bd(t.outputLen),bd(t.blockLen)}function z_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function W_(t,e){Yg(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.isBytes=j_,Ir.number=bd,Ir.bool=K_,Ir.bytes=Yg,Ir.hash=G_,Ir.exists=z_,Ir.output=W_;const HN={number:bd,bool:K_,bytes:Yg,hash:G_,exists:z_,output:W_};Ir.default=HN;var So={},Wu={};Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.crypto=void 0,Wu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"},t.byteSwap32=function(l){for(let u=0;u<l.length;u++)l[u]=(0,t.byteSwap)(l[u])},t.bytesToHex=function(l){(0,n.bytes)(l);let u="";for(let f=0;f<l.length;f++)u+=r[l[f]];return u},t.hexToBytes=function(l){if(typeof l!="string")throw new Error("hex string expected, got "+typeof l);const u=l.length,f=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);const d=new Uint8Array(f);for(let h=0,p=0;h<f;h++,p+=2){const g=o(l.charCodeAt(p)),y=o(l.charCodeAt(p+1));if(g===void 0||y===void 0){const v=l[p]+l[p+1];throw new Error('hex string expected, got non-hex character "'+v+'" at index '+p)}d[h]=16*g+y}return d},t.asyncLoop=async function(l,u,f){let d=Date.now();for(let h=0;h<l;h++){f(h);const p=Date.now()-d;p>=0&&p<u||(await(0,t.nextTick)(),d+=p)}},t.utf8ToBytes=s,t.toBytes=a,t.concatBytes=function(...l){let u=0;for(let d=0;d<l.length;d++){const h=l[d];(0,n.bytes)(h),u+=h.length}const f=new Uint8Array(u);for(let d=0,h=0;d<l.length;d++){const p=l[d];f.set(p,h),h+=p.length}return f},t.checkOpts=function(l,u){if(u!==void 0&&c.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(l,u)},t.wrapConstructor=function(l){const u=d=>l().update(a(d)).digest(),f=l();return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=()=>l(),u},t.wrapConstructorWithOpts=function(l){const u=(d,h)=>l(h).update(a(d)).digest(),f=l({});return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=d=>l(d),u},t.wrapXOFConstructorWithOpts=function(l){const u=(d,h)=>l(h).update(a(d)).digest(),f=l({});return u.outputLen=f.outputLen,u.blockLen=f.blockLen,u.create=d=>l(d),u},t.randomBytes=function(l=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(l));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")};const e=Wu,n=Ir;t.u8=l=>new Uint8Array(l.buffer,l.byteOffset,l.byteLength),t.u32=l=>new Uint32Array(l.buffer,l.byteOffset,Math.floor(l.byteLength/4)),t.createView=l=>new DataView(l.buffer,l.byteOffset,l.byteLength),t.rotr=(l,u)=>l<<32-u|l>>>u,t.rotl=(l,u)=>l<<u|l>>>32-u>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=l=>l<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255,t.byteSwapIfBE=t.isLE?l=>l:l=>(0,t.byteSwap)(l);const r=Array.from({length:256},((l,u)=>u.toString(16).padStart(2,"0"))),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(l){return l>=i._0&&l<=i._9?l-i._0:l>=i._A&&l<=i._F?l-(i._A-10):l>=i._a&&l<=i._f?l-(i._a-10):void 0}function s(l){if(typeof l!="string")throw new Error("utf8ToBytes expected string, got "+typeof l);return new Uint8Array(new TextEncoder().encode(l))}function a(l){return typeof l=="string"&&(l=s(l)),(0,n.bytes)(l),l}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString})(So),Object.defineProperty(fo,"__esModule",{value:!0}),fo.HashMD=fo.Maj=fo.Chi=void 0;const C0=Ir,$c=So;fo.Chi=(t,e,n)=>t&e^~t&n;fo.Maj=(t,e,n)=>t&e^t&n^e&n;fo.HashMD=class extends $c.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,$c.createView)(this.buffer)}update(t){(0,C0.exists)(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=(0,$c.toBytes)(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const a=(0,$c.createView)(t);for(;r<=i-o;o+=r)this.process(a,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,C0.exists)(this),(0,C0.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let u=o;u<r;u++)e[u]=0;(function(u,f,d,h){if(typeof u.setBigUint64=="function")return u.setBigUint64(f,d,h);const p=BigInt(32),g=BigInt(4294967295),y=Number(d>>p&g),v=Number(d&g),m=h?4:0,w=h?0:4;u.setUint32(f+m,y,h),u.setUint32(f+w,v,h)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=(0,$c.createView)(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)s.setUint32(4*u,l[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}};var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.add5L=Ue.add5H=Ue.add4H=Ue.add4L=Ue.add3H=Ue.add3L=Ue.rotlBL=Ue.rotlBH=Ue.rotlSL=Ue.rotlSH=Ue.rotr32L=Ue.rotr32H=Ue.rotrBL=Ue.rotrBH=Ue.rotrSL=Ue.rotrSH=Ue.shrSL=Ue.shrSH=Ue.toBig=void 0,Ue.fromBig=Xg,Ue.split=q_,Ue.add=c3;const qu=BigInt(2**32-1),c1=BigInt(32);function Xg(t,e=!1){return e?{h:Number(t&qu),l:Number(t>>c1&qu)}:{h:0|Number(t>>c1&qu),l:0|Number(t&qu)}}function q_(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=Xg(t[i],e);[n[i],r[i]]=[o,s]}return[n,r]}const Y_=(t,e)=>BigInt(t>>>0)<<c1|BigInt(e>>>0);Ue.toBig=Y_;const X_=(t,e,n)=>t>>>n;Ue.shrSH=X_;const Z_=(t,e,n)=>t<<32-n|e>>>n;Ue.shrSL=Z_;const Q_=(t,e,n)=>t>>>n|e<<32-n;Ue.rotrSH=Q_;const J_=(t,e,n)=>t<<32-n|e>>>n;Ue.rotrSL=J_;const e3=(t,e,n)=>t<<64-n|e>>>n-32;Ue.rotrBH=e3;const t3=(t,e,n)=>t>>>n-32|e<<64-n;Ue.rotrBL=t3;const n3=(t,e)=>e;Ue.rotr32H=n3;const r3=(t,e)=>t;Ue.rotr32L=r3;const i3=(t,e,n)=>t<<n|e>>>32-n;Ue.rotlSH=i3;const o3=(t,e,n)=>e<<n|t>>>32-n;Ue.rotlSL=o3;const s3=(t,e,n)=>e<<n-32|t>>>64-n;Ue.rotlBH=s3;const a3=(t,e,n)=>t<<n-32|e>>>64-n;function c3(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}Ue.rotlBL=a3;const l3=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Ue.add3L=l3;const u3=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Ue.add3H=u3;const f3=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Ue.add4L=f3;const d3=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;Ue.add4H=d3;const h3=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);Ue.add5L=h3;const p3=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0;Ue.add5H=p3;const $N={fromBig:Xg,split:q_,toBig:Y_,shrSH:X_,shrSL:Z_,rotrSH:Q_,rotrSL:J_,rotrBH:e3,rotrBL:t3,rotr32H:n3,rotr32L:r3,rotlSH:i3,rotlSL:o3,rotlBH:s3,rotlBL:a3,add:c3,add3L:l3,add3H:u3,add4L:f3,add4H:d3,add5H:p3,add5L:h3};Ue.default=$N,Object.defineProperty(gn,"__esModule",{value:!0}),gn.sha384=gn.sha512_256=gn.sha512_224=gn.sha512=gn.SHA384=gn.SHA512_256=gn.SHA512_224=gn.SHA512=void 0;const VN=fo,Ve=Ue,Yu=So,[KN,jN]=Ve.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),No=new Uint32Array(80),ko=new Uint32Array(80);class mu extends VN.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:h,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y]}set(e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|i,this.Ch=0|o,this.Cl=0|s,this.Dh=0|a,this.Dl=0|c,this.Eh=0|l,this.El=0|u,this.Fh=0|f,this.Fl=0|d,this.Gh=0|h,this.Gl=0|p,this.Hh=0|g,this.Hl=0|y}process(e,n){for(let w=0;w<16;w++,n+=4)No[w]=e.getUint32(n),ko[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const E=0|No[w-15],S=0|ko[w-15],R=Ve.default.rotrSH(E,S,1)^Ve.default.rotrSH(E,S,8)^Ve.default.shrSH(E,S,7),F=Ve.default.rotrSL(E,S,1)^Ve.default.rotrSL(E,S,8)^Ve.default.shrSL(E,S,7),$=0|No[w-2],U=0|ko[w-2],B=Ve.default.rotrSH($,U,19)^Ve.default.rotrBH($,U,61)^Ve.default.shrSH($,U,6),W=Ve.default.rotrSL($,U,19)^Ve.default.rotrBL($,U,61)^Ve.default.shrSL($,U,6),V=Ve.default.add4L(F,W,ko[w-7],ko[w-16]),L=Ve.default.add4H(V,R,B,No[w-7],No[w-16]);No[w]=0|L,ko[w]=0|V}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:h,Fl:p,Gh:g,Gl:y,Hh:v,Hl:m}=this;for(let w=0;w<80;w++){const E=Ve.default.rotrSH(f,d,14)^Ve.default.rotrSH(f,d,18)^Ve.default.rotrBH(f,d,41),S=Ve.default.rotrSL(f,d,14)^Ve.default.rotrSL(f,d,18)^Ve.default.rotrBL(f,d,41),R=f&h^~f&g,F=d&p^~d&y,$=Ve.default.add5L(m,S,F,jN[w],ko[w]),U=Ve.default.add5H($,v,E,R,KN[w],No[w]),B=0|$,W=Ve.default.rotrSH(r,i,28)^Ve.default.rotrBH(r,i,34)^Ve.default.rotrBH(r,i,39),V=Ve.default.rotrSL(r,i,28)^Ve.default.rotrBL(r,i,34)^Ve.default.rotrBL(r,i,39),L=r&o^r&a^o&a,I=i&s^i&c^s&c;v=0|g,m=0|y,g=0|h,y=0|p,h=0|f,p=0|d,{h:f,l:d}=Ve.default.add(0|l,0|u,0|U,0|B),l=0|a,u=0|c,a=0|o,c=0|s,o=0|r,s=0|i;const x=Ve.default.add3L(B,V,I);r=Ve.default.add3H(x,U,W,L),i=0|x}({h:r,l:i}=Ve.default.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:o,l:s}=Ve.default.add(0|this.Bh,0|this.Bl,0|o,0|s),{h:a,l:c}=Ve.default.add(0|this.Ch,0|this.Cl,0|a,0|c),{h:l,l:u}=Ve.default.add(0|this.Dh,0|this.Dl,0|l,0|u),{h:f,l:d}=Ve.default.add(0|this.Eh,0|this.El,0|f,0|d),{h,l:p}=Ve.default.add(0|this.Fh,0|this.Fl,0|h,0|p),{h:g,l:y}=Ve.default.add(0|this.Gh,0|this.Gl,0|g,0|y),{h:v,l:m}=Ve.default.add(0|this.Hh,0|this.Hl,0|v,0|m),this.set(r,i,o,s,a,c,l,u,f,d,h,p,g,y,v,m)}roundClean(){No.fill(0),ko.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}gn.SHA512=mu;class g3 extends mu{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}gn.SHA512_224=g3;class v3 extends mu{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}gn.SHA512_256=v3;class h2 extends mu{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}gn.SHA384=h2,gn.sha512=(0,Yu.wrapConstructor)((()=>new mu)),gn.sha512_224=(0,Yu.wrapConstructor)((()=>new g3)),gn.sha512_256=(0,Yu.wrapConstructor)((()=>new v3)),gn.sha384=(0,Yu.wrapConstructor)((()=>new h2));var l1={},Da={},dt={},je={};Object.defineProperty(je,"__esModule",{value:!0}),je.notImplemented=je.bitMask=void 0,je.isBytes=Ed,je.abytes=xd,je.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},je.bytesToHex=S0,je.numberToHexUnpadded=p2,je.hexToNumber=I0,je.hexToBytes=Rf,je.bytesToNumberBE=function(t){return I0(S0(t))},je.bytesToNumberLE=function(t){return xd(t),I0(S0(Uint8Array.from(t).reverse()))},je.numberToBytesBE=v2,je.numberToBytesLE=function(t,e){return v2(t,e).reverse()},je.numberToVarBytesBE=function(t){return Rf(p2(t))},je.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=Rf(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else{if(!Ed(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r},je.concatBytes=y2,je.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},je.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},je.inRange=m2,je.aInRange=function(t,e,n,r){if(!m2(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},je.bitLen=function(t){let e;for(e=0;t>u1;t>>=Of,e+=1);return e},je.bitGet=function(t,e){return t>>BigInt(e)&Of},je.bitSet=function(t,e,n){return t|(n?Of:u1)<<BigInt(e)},je.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=O0(t),i=O0(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...u)=>n(i,r,...u),c=(u=O0())=>{i=a(w2([0]),u),r=a(),u.length!==0&&(i=a(w2([1]),u),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const f=[];for(;u<e;){r=a();const d=r.slice();f.push(d),u+=r.length}return y2(...f)};return(u,f)=>{let d;for(s(),c(u);!(d=f(l()));)c();return s(),d}},je.validateObject=function(t,e,n={}){const r=(i,o,s)=>{const a=WN[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=t[i];if(!(s&&c===void 0||a(c,t)))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(const[i,o]of Object.entries(e))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return t},je.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const o=t(n,...r);return e.set(n,o),o}};const u1=BigInt(0),Of=BigInt(1),GN=BigInt(2);function Ed(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function xd(t){if(!Ed(t))throw new Error("Uint8Array expected")}const zN=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function S0(t){xd(t);let e="";for(let n=0;n<t.length;n++)e+=zN[t[n]];return e}function p2(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function I0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const qi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function g2(t){return t>=qi._0&&t<=qi._9?t-qi._0:t>=qi._A&&t<=qi._F?t-(qi._A-10):t>=qi._a&&t<=qi._f?t-(qi._a-10):void 0}function Rf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=g2(t.charCodeAt(o)),a=g2(t.charCodeAt(o+1));if(s===void 0||a===void 0){const c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[i]=16*s+a}return r}function v2(t,e){return Rf(t.toString(16).padStart(2*e,"0"))}function y2(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];xd(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const o=t[r];n.set(o,i),i+=o.length}return n}const T0=t=>typeof t=="bigint"&&u1<=t;function m2(t,e,n){return T0(t)&&T0(e)&&T0(n)&&e<=t&&t<n}je.bitMask=t=>(GN<<BigInt(t-1))-Of;const O0=t=>new Uint8Array(t),w2=t=>Uint8Array.from(t),WN={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ed(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};je.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(dt,"__esModule",{value:!0}),dt.isNegativeLE=void 0,dt.mod=Cr,dt.pow=y3,dt.pow2=function(t,e,n){let r=t;for(;e-- >mn;)r*=r,r%=n;return r},dt.invert=Xu,dt.tonelliShanks=m3,dt.FpSqrt=x2,dt.validateField=function(t){const e=YN.reduce(((n,r)=>(n[r]="function",n)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,br.validateObject)(t,e)},dt.FpPow=A2,dt.FpInvertBatch=_2,dt.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?Xu(n,t.ORDER):t.inv(n))},dt.FpLegendre=C2,dt.FpIsSquare=function(t){const e=C2(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},dt.nLength=R0,dt.Field=function(t,e,n=!1,r={}){if(t<=mn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=R0(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=x2(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:(0,br.bitMask)(i),ZERO:mn,ONE:_t,create:c=>Cr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return mn<=c&&c<t},is0:c=>c===mn,isOdd:c=>(c&_t)===_t,neg:c=>Cr(-c,t),eql:(c,l)=>c===l,sqr:c=>Cr(c*c,t),add:(c,l)=>Cr(c+l,t),sub:(c,l)=>Cr(c-l,t),mul:(c,l)=>Cr(c*l,t),pow:(c,l)=>A2(a,c,l),div:(c,l)=>Cr(c*Xu(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Xu(c,t),sqrt:r.sqrt||(c=>s(a,c)),invertBatch:c=>_2(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?(0,br.numberToBytesLE)(c,o):(0,br.numberToBytesBE)(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return n?(0,br.bytesToNumberLE)(c):(0,br.bytesToNumberBE)(c)}});return Object.freeze(a)},dt.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},dt.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},dt.hashToPrivateScalar=function(t,e,n=!1){t=(0,br.ensureBytes)("privateHash",t);const r=t.length,i=R0(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const o=n?(0,br.bytesToNumberLE)(t):(0,br.bytesToNumberBE)(t);return Cr(o,e-_t)+_t},dt.getFieldBytesLength=d1,dt.getMinHashLength=S2,dt.mapHashToField=function(t,e,n=!1){const r=t.length,i=d1(e),o=S2(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=Cr(n?(0,br.bytesToNumberBE)(t):(0,br.bytesToNumberLE)(t),e-_t)+_t;return n?(0,br.numberToBytesLE)(s,i):(0,br.numberToBytesBE)(s,i)};const br=je,mn=BigInt(0),_t=BigInt(1),ns=BigInt(2),qN=BigInt(3),f1=BigInt(4),b2=BigInt(5),E2=BigInt(8);function Cr(t,e){const n=t%e;return n>=mn?n:e+n}function y3(t,e,n){if(n<=mn||e<mn)throw new Error("Expected power/modulo > 0");if(n===_t)return mn;let r=_t;for(;e>mn;)e&_t&&(r=r*t%n),t=t*t%n,e>>=_t;return r}function Xu(t,e){if(t===mn||e<=mn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Cr(t,e),r=e,i=mn,o=_t;for(;n!==mn;){const s=r%n,a=i-o*(r/n);r=n,n=s,i=o,o=a}if(r!==_t)throw new Error("invert: does not exist");return Cr(i,e)}function m3(t){const e=(t-_t)/ns;let n,r,i;for(n=t-_t,r=0;n%ns===mn;n/=ns,r++);for(i=ns;i<t&&y3(i,e,t)!==t-_t;i++);if(r===1){const s=(t+_t)/f1;return function(a,c){const l=a.pow(c,s);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const o=(n+_t)/ns;return function(s,a){if(s.pow(a,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,l=s.pow(s.mul(s.ONE,i),n),u=s.pow(a,o),f=s.pow(a,n);for(;!s.eql(f,s.ONE);){if(s.eql(f,s.ZERO))return s.ZERO;let d=1;for(let p=s.sqr(f);d<c&&!s.eql(p,s.ONE);d++)p=s.sqr(p);const h=s.pow(l,_t<<BigInt(c-d-1));l=s.sqr(h),u=s.mul(u,h),f=s.mul(f,l),c=d}return u}}function x2(t){if(t%f1===qN){const e=(t+_t)/f1;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%E2===b2){const e=(t-b2)/E2;return function(n,r){const i=n.mul(r,ns),o=n.pow(i,e),s=n.mul(r,o),a=n.mul(n.mul(s,ns),o),c=n.mul(s,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return m3(t)}BigInt(9),BigInt(16);dt.isNegativeLE=(t,e)=>(Cr(t,e)&_t)===_t;const YN=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function A2(t,e,n){if(n<mn)throw new Error("Expected power > 0");if(n===mn)return t.ONE;if(n===_t)return e;let r=t.ONE,i=e;for(;n>mn;)n&_t&&(r=t.mul(r,i)),i=t.sqr(i),n>>=_t;return r}function _2(t,e){const n=new Array(e.length),r=e.reduce(((o,s,a)=>t.is0(s)?o:(n[a]=o,t.mul(o,s))),t.ONE),i=t.inv(r);return e.reduceRight(((o,s,a)=>t.is0(s)?o:(n[a]=t.mul(o,n[a]),t.mul(o,s))),i),n}function C2(t){const e=(t-_t)/ns;return(n,r)=>n.pow(r,e)}function R0(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function d1(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function S2(t){const e=d1(t);return e+Math.ceil(e/2)}Object.defineProperty(Da,"__esModule",{value:!0}),Da.wNAF=function(t,e){const n=(o,s)=>{const a=s.negate();return o?a:s},r=o=>{if(!Number.isSafeInteger(o)||o<=0||o>e)throw new Error(`Wrong window size=${o}, should be [1..${e}]`)},i=o=>(r(o),{windows:Math.ceil(e/o)+1,windowSize:2**(o-1)});return{constTimeNegate:n,unsafeLadder(o,s){let a=t.ZERO,c=o;for(;s>XN;)s&P0&&(a=a.add(c)),c=c.double(),s>>=P0;return a},precomputeWindow(o,s){const{windows:a,windowSize:c}=i(s),l=[];let u=o,f=u;for(let d=0;d<a;d++){f=u,l.push(f);for(let h=1;h<c;h++)f=f.add(u),l.push(f);u=f.double()}return l},wNAF(o,s,a){const{windows:c,windowSize:l}=i(o);let u=t.ZERO,f=t.BASE;const d=BigInt(2**o-1),h=2**o,p=BigInt(o);for(let g=0;g<c;g++){const y=g*l;let v=Number(a&d);a>>=p,v>l&&(v-=h,a+=P0);const m=y,w=y+Math.abs(v)-1,E=g%2!=0,S=v<0;v===0?f=f.add(n(E,s[m])):u=u.add(n(S,s[w]))}return{p:u,f}},wNAFCached(o,s,a){const c=O2.get(o)||1;let l=N0.get(o);return l||(l=this.precomputeWindow(o,c),c!==1&&N0.set(o,a(l))),this.wNAF(c,l,s)},setWindowSize(o,s){r(s),O2.set(o,s),N0.delete(o)}}},Da.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((u,f)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${f}`)})),n.forEach(((u,f)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${f}`)}));const i=(0,T2.bitLen)(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,s=(1<<o)-1,a=new Array(s+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/o)*o;let l=t.ZERO;for(let u=c;u>=0;u-=o){a.fill(t.ZERO);for(let d=0;d<r.length;d++){const h=r[d],p=Number(h>>BigInt(u)&BigInt(s));a[p]=a[p].add(n[d])}let f=t.ZERO;for(let d=a.length-1,h=t.ZERO;d>0;d--)h=h.add(a[d]),f=f.add(h);if(l=l.add(f),u!==0)for(let d=0;d<o;d++)l=l.double()}return l},Da.validateBasic=function(t){return(0,I2.validateField)(t.Fp),(0,T2.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,I2.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const I2=dt,T2=je,XN=BigInt(0),P0=BigInt(1),N0=new WeakMap,O2=new WeakMap;Object.defineProperty(l1,"__esModule",{value:!0}),l1.twistedEdwards=function(t){const e=(function(L){const I=(0,k0.validateBasic)(L);return ar.validateObject(L,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...I})})(t),{Fp:n,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=e,l=Zu<<BigInt(8*a)-cr,u=n.create,f=(0,R2.Field)(e.n,e.nBitLength),d=e.uvRatio||((L,I)=>{try{return{isValid:!0,value:n.sqrt(L*n.inv(I))}}catch{return{isValid:!1,value:Qr}}}),h=e.adjustScalarBytes||(L=>L),p=e.domain||((L,I,x)=>{if((0,Er.abool)("phflag",x),I.length||x)throw new Error("Contexts/pre-hash are not supported");return L});function g(L,I){ar.aInRange("coordinate "+L,I,Qr,l)}function y(L){if(!(L instanceof w))throw new Error("ExtendedPoint expected")}const v=(0,Er.memoized)(((L,I)=>{const{ex:x,ey:P,ez:G}=L,b=L.is0();I==null&&(I=b?ZN:n.inv(G));const C=u(x*I),T=u(P*I),N=u(G*I);if(b)return{x:Qr,y:cr};if(N!==cr)throw new Error("invZ was invalid");return{x:C,y:T}})),m=(0,Er.memoized)((L=>{const{a:I,d:x}=e;if(L.is0())throw new Error("bad point: ZERO");const{ex:P,ey:G,ez:b,et:C}=L,T=u(P*P),N=u(G*G),_=u(b*b),A=u(_*_),O=u(T*I);if(u(_*u(O+N))!==u(A+u(x*u(T*N))))throw new Error("bad point: equation left != right (1)");if(u(P*G)!==u(b*C))throw new Error("bad point: equation left != right (2)");return!0}));class w{constructor(I,x,P,G){this.ex=I,this.ey=x,this.ez=P,this.et=G,g("x",I),g("y",x),g("z",P),g("t",G),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof w)throw new Error("extended point not allowed");const{x,y:P}=I||{};return g("x",x),g("y",P),new w(x,P,cr,u(x*P))}static normalizeZ(I){const x=n.invertBatch(I.map((P=>P.ez)));return I.map(((P,G)=>P.toAffine(x[G]))).map(w.fromAffine)}static msm(I,x){return(0,k0.pippenger)(w,f,I,x)}_setWindowSize(I){R.setWindowSize(this,I)}assertValidity(){m(this)}equals(I){y(I);const{ex:x,ey:P,ez:G}=this,{ex:b,ey:C,ez:T}=I,N=u(x*T),_=u(b*G),A=u(P*T),O=u(C*G);return N===_&&A===O}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:I}=e,{ex:x,ey:P,ez:G}=this,b=u(x*x),C=u(P*P),T=u(Zu*u(G*G)),N=u(I*b),_=x+P,A=u(u(_*_)-b-C),O=N+C,M=O-T,H=N-C,k=u(A*M),j=u(O*H),X=u(A*H),ee=u(M*O);return new w(k,j,ee,X)}add(I){y(I);const{a:x,d:P}=e,{ex:G,ey:b,ez:C,et:T}=this,{ex:N,ey:_,ez:A,et:O}=I;if(x===BigInt(-1)){const Y=u((b-G)*(_+N)),te=u((b+G)*(_-N)),ie=u(te-Y);if(ie===Qr)return this.double();const oe=u(C*Zu*O),le=u(T*Zu*A),ve=le+oe,de=te+Y,me=le-oe,se=u(ve*ie),J=u(de*me),Ee=u(ve*me),Fe=u(ie*de);return new w(se,J,Fe,Ee)}const M=u(G*N),H=u(b*_),k=u(T*P*O),j=u(C*A),X=u((G+b)*(N+_)-M-H),ee=j-k,ae=j+k,D=u(H-x*M),K=u(X*ee),Z=u(ae*D),re=u(X*D),Q=u(ee*ae);return new w(K,Z,Q,re)}subtract(I){return this.add(I.negate())}wNAF(I){return R.wNAFCached(this,I,w.normalizeZ)}multiply(I){const x=I;ar.aInRange("scalar",x,cr,r);const{p:P,f:G}=this.wNAF(x);return w.normalizeZ([P,G])[0]}multiplyUnsafe(I){const x=I;return ar.aInRange("scalar",x,Qr,r),x===Qr?S:this.equals(S)||x===cr?this:this.equals(E)?this.wNAF(x).p:R.unsafeLadder(this,x)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return R.unsafeLadder(this,r).is0()}toAffine(I){return v(this,I)}clearCofactor(){const{h:I}=e;return I===cr?this:this.multiplyUnsafe(I)}static fromHex(I,x=!1){const{d:P,a:G}=e,b=n.BYTES;I=(0,Er.ensureBytes)("pointHex",I,b),(0,Er.abool)("zip215",x);const C=I.slice(),T=I[b-1];C[b-1]=-129&T;const N=ar.bytesToNumberLE(C),_=x?l:n.ORDER;ar.aInRange("pointHex.y",N,Qr,_);const A=u(N*N),O=u(A-cr),M=u(P*A-G);let{isValid:H,value:k}=d(O,M);if(!H)throw new Error("Point.fromHex: invalid y coordinate");const j=(k&cr)===cr,X=(128&T)!=0;if(!x&&k===Qr&&X)throw new Error("Point.fromHex: x=0 and x_0=1");return X!==j&&(k=u(-k)),w.fromAffine({x:k,y:N})}static fromPrivateKey(I){return U(I).point}toRawBytes(){const{x:I,y:x}=this.toAffine(),P=ar.numberToBytesLE(x,n.BYTES);return P[P.length-1]|=I&cr?128:0,P}toHex(){return ar.bytesToHex(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,cr,u(e.Gx*e.Gy)),w.ZERO=new w(Qr,cr,cr,Qr);const{BASE:E,ZERO:S}=w,R=(0,k0.wNAF)(w,8*a);function F(L){return(0,R2.mod)(L,r)}function $(L){return F(ar.bytesToNumberLE(L))}function U(L){const I=a;L=(0,Er.ensureBytes)("private key",L,I);const x=(0,Er.ensureBytes)("hashed private key",o(L),2*I),P=h(x.slice(0,I)),G=x.slice(I,2*I),b=$(P),C=E.multiply(b),T=C.toRawBytes();return{head:P,prefix:G,scalar:b,point:C,pointBytes:T}}function B(L=new Uint8Array,...I){const x=ar.concatBytes(...I);return $(o(p(x,(0,Er.ensureBytes)("context",L),!!i)))}const W=QN;return E._setWindowSize(8),{CURVE:e,getPublicKey:function(L){return U(L).pointBytes},sign:function(L,I,x={}){L=(0,Er.ensureBytes)("message",L),i&&(L=i(L));const{prefix:P,scalar:G,pointBytes:b}=U(I),C=B(x.context,P,L),T=E.multiply(C).toRawBytes(),N=F(C+B(x.context,T,b,L)*G);ar.aInRange("signature.s",N,Qr,r);const _=ar.concatBytes(T,ar.numberToBytesLE(N,n.BYTES));return(0,Er.ensureBytes)("result",_,2*a)},verify:function(L,I,x,P=W){const{context:G,zip215:b}=P,C=n.BYTES;L=(0,Er.ensureBytes)("signature",L,2*C),I=(0,Er.ensureBytes)("message",I),b!==void 0&&(0,Er.abool)("zip215",b),i&&(I=i(I));const T=ar.bytesToNumberLE(L.slice(C,2*C));let N,_,A;try{N=w.fromHex(x,b),_=w.fromHex(L.slice(0,C),b),A=E.multiplyUnsafe(T)}catch{return!1}if(!b&&N.isSmallOrder())return!1;const O=B(G,_.toRawBytes(),N.toRawBytes(),I);return _.add(N.multiplyUnsafe(O)).subtract(A).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:U,randomPrivateKey:()=>s(n.BYTES),precompute:(L=8,I=w.BASE)=>(I._setWindowSize(L),I.multiply(BigInt(3)),I)}}};const k0=Da,R2=dt,ar=je,Er=je,Qr=BigInt(0),cr=BigInt(1),Zu=BigInt(2),ZN=BigInt(8),QN={zip215:!0};var qo={};Object.defineProperty(qo,"__esModule",{value:!0}),qo.expand_message_xmd=w3,qo.expand_message_xof=b3,qo.hash_to_field=M0,qo.isogenyMap=function(t,e){const n=e.map((r=>Array.from(r).reverse()));return(r,i)=>{const[o,s,a,c]=n.map((l=>l.reduce(((u,f)=>t.add(t.mul(u,r),f)))));return r=t.div(o,s),i=t.mul(i,t.div(a,c)),{x:r,y:i}}},qo.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const o=M0(r,2,{...n,DST:n.DST,...i}),s=t.fromAffine(e(o[0])),a=t.fromAffine(e(o[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const o=M0(r,1,{...n,DST:n.encodeDST,...i}),s=t.fromAffine(e(o[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const o of r)if(typeof o!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${o} in array`);const i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};const JN=dt,Dn=je,ek=Dn.bytesToNumberBE;function Yo(t,e){if(jl(t),jl(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function tk(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function jl(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function w3(t,e,n,r){(0,Dn.abytes)(t),(0,Dn.abytes)(e),jl(n),e.length>255&&(e=r((0,Dn.concatBytes)((0,Dn.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:o}=r,s=Math.ceil(n/i);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,Dn.concatBytes)(e,Yo(e.length,1)),c=Yo(0,o),l=Yo(n,2),u=new Array(s),f=r((0,Dn.concatBytes)(c,t,l,Yo(0,1),a));u[0]=r((0,Dn.concatBytes)(f,Yo(1,1),a));for(let d=1;d<=s;d++){const h=[tk(f,u[d-1]),Yo(d+1,1),a];u[d]=r((0,Dn.concatBytes)(...h))}return(0,Dn.concatBytes)(...u).slice(0,n)}function b3(t,e,n,r,i){if((0,Dn.abytes)(t),(0,Dn.abytes)(e),jl(n),e.length>255){const o=Math.ceil(2*r/8);e=i.create({dkLen:o}).update((0,Dn.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(Yo(n,2)).update(e).update(Yo(e.length,1)).digest()}function M0(t,e,n){(0,Dn.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:o,hash:s,expand:a,DST:c}=n;(0,Dn.abytes)(t),jl(e);const l=typeof c=="string"?(0,Dn.utf8ToBytes)(c):c,u=r.toString(2).length,f=Math.ceil((u+i)/8),d=e*o*f;let h;if(a==="xmd")h=w3(t,l,d,s);else if(a==="xof")h=b3(t,l,d,i,s);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');h=t}const p=new Array(e);for(let g=0;g<e;g++){const y=new Array(o);for(let v=0;v<o;v++){const m=f*(v+g*o),w=h.subarray(m,m+f);y[v]=(0,JN.mod)(ek(w),r)}p[g]=y}return p}var h1={};Object.defineProperty(h1,"__esModule",{value:!0}),h1.montgomery=function(t){const e=(function(g){return(0,Mo.validateObject)(g,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...g})})(t),{P:n}=e,r=g=>(0,P2.mod)(g,n),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,a=e.adjustScalarBytes||(g=>g),c=e.powPminus2||(g=>(0,P2.pow)(g,n-BigInt(2),n));function l(g,y,v){const m=r(g*(y-v));return[y=r(y-m),v=r(v+m)]}const u=(e.a-BigInt(2))/BigInt(4);function f(g){return(0,Mo.numberToBytesLE)(r(g),o)}function d(g,y){const v=(function(E){const S=(0,Mo.ensureBytes)("u coordinate",E,o);return s===32&&(S[31]&=127),(0,Mo.bytesToNumberLE)(S)})(y),m=(function(E){const S=(0,Mo.ensureBytes)("scalar",E),R=S.length;if(R!==o&&R!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${R}`);return(0,Mo.bytesToNumberLE)(a(S))})(g),w=(function(E,S){(0,Mo.aInRange)("u",E,Ea,n),(0,Mo.aInRange)("scalar",S,Ea,n);const R=S,F=E;let $,U=D0,B=Ea,W=E,V=D0,L=Ea;for(let x=BigInt(i-1);x>=Ea;x--){const P=R>>x&D0;L^=P,$=l(L,U,W),U=$[0],W=$[1],$=l(L,B,V),B=$[0],V=$[1],L=P;const G=U+B,b=r(G*G),C=U-B,T=r(C*C),N=b-T,_=W+V,A=r((W-V)*G),O=r(_*C),M=A+O,H=A-O;W=r(M*M),V=r(F*r(H*H)),U=r(b*T),B=r(N*(b+r(u*N)))}$=l(L,U,W),U=$[0],W=$[1],$=l(L,B,V),B=$[0],V=$[1];const I=c(B);return r(U*I)})(v,m);if(w===Ea)throw new Error("Invalid private or public key received");return f(w)}const h=f(e.Gu);function p(g){return d(g,h)}return{scalarMult:d,scalarMultBase:p,getSharedSecret:(g,y)=>d(g,y),getPublicKey:g=>p(g),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:h}};const P2=dt,Mo=je,Ea=BigInt(0),D0=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=R,t.edwardsToMontgomeryPriv=function(O){const M=E.hash(O.subarray(0,32));return E.adjustScalarBytes(M).subarray(0,32)};const e=gn,n=So,r=l1,i=qo,o=dt,s=h1,a=je,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),f=BigInt(1),d=BigInt(2),h=BigInt(3),p=BigInt(5),g=BigInt(8);function y(O){const M=BigInt(10),H=BigInt(20),k=BigInt(40),j=BigInt(80),X=c,ee=O*O%X*O%X,ae=(0,o.pow2)(ee,d,X)*ee%X,D=(0,o.pow2)(ae,f,X)*O%X,K=(0,o.pow2)(D,p,X)*D%X,Z=(0,o.pow2)(K,M,X)*K%X,re=(0,o.pow2)(Z,H,X)*Z%X,Q=(0,o.pow2)(re,k,X)*re%X,Y=(0,o.pow2)(Q,j,X)*Q%X,te=(0,o.pow2)(Y,j,X)*Q%X,ie=(0,o.pow2)(te,M,X)*K%X;return{pow_p_5_8:(0,o.pow2)(ie,d,X)*O%X,b2:ee}}function v(O){return O[0]&=248,O[31]&=127,O[31]|=64,O}function m(O,M){const H=c,k=(0,o.mod)(M*M*M,H),j=y(O*(0,o.mod)(k*k*M,H)).pow_p_5_8;let X=(0,o.mod)(O*k*j,H);const ee=(0,o.mod)(M*X*X,H),ae=X,D=(0,o.mod)(X*l,H),K=ee===O,Z=ee===(0,o.mod)(-O,H),re=ee===(0,o.mod)(-O*l,H);return K&&(X=ae),(Z||re)&&(X=D),(0,o.isNegativeLE)(X,H)&&(X=(0,o.mod)(-X,H)),{isValid:K||Z,value:X}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const w=(0,o.Field)(c,void 0,!0),E={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:w,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:g,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:v,uvRatio:m};function S(O,M,H){if(M.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([H?1:0,M.length]),M,O)}function R(O){const{y:M}=t.ed25519.ExtendedPoint.fromHex(O),H=BigInt(1);return w.toBytes(w.create((H+M)*w.inv(H-M)))}t.ed25519=(0,r.twistedEdwards)(E),t.ed25519ctx=(0,r.twistedEdwards)({...E,domain:S}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},E,{domain:S,prehash:e.sha512})),t.x25519=(0,s.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:O=>{const M=c,{pow_p_5_8:H,b2:k}=y(O);return(0,o.mod)((0,o.pow2)(H,h,M)*k,M)},adjustScalarBytes:v,randomBytes:n.randomBytes}),t.edwardsToMontgomery=R;const F=(w.ORDER+h)/g,$=w.pow(d,F),U=w.sqrt(w.neg(w.ONE)),B=(0,o.FpSqrtEven)(w,w.neg(BigInt(486664)));function W(O){const{xMn:M,xMd:H,yMn:k,yMd:j}=(function(Q){const Y=(w.ORDER-p)/g,te=BigInt(486662);let ie=w.sqr(Q);ie=w.mul(ie,d);let oe=w.add(ie,w.ONE),le=w.neg(te),ve=w.sqr(oe),de=w.mul(ve,oe),me=w.mul(ie,te);me=w.mul(me,le),me=w.add(me,ve),me=w.mul(me,le);let se=w.sqr(de);ve=w.sqr(se),se=w.mul(se,de),se=w.mul(se,me),ve=w.mul(ve,se);let J=w.pow(ve,Y);J=w.mul(J,se);let Ee=w.mul(J,U);ve=w.sqr(J),ve=w.mul(ve,de);let Fe=w.eql(ve,me),Tt=w.cmov(Ee,J,Fe),Mt=w.mul(le,ie),Pt=w.mul(J,Q);Pt=w.mul(Pt,$);let jn=w.mul(Pt,U),mi=w.mul(me,ie);ve=w.sqr(Pt),ve=w.mul(ve,de);let kc=w.eql(ve,mi),un=w.cmov(jn,Pt,kc);ve=w.sqr(Tt),ve=w.mul(ve,de);let tn=w.eql(ve,me),ga=w.cmov(Mt,le,tn),Dt=w.cmov(un,Tt,tn),_u=w.isOdd(Dt);return Dt=w.cmov(Dt,w.neg(Dt),tn!==_u),{xMn:ga,xMd:oe,yMn:Dt,yMd:f}})(O);let X=w.mul(M,j);X=w.mul(X,B);let ee=w.mul(H,k),ae=w.sub(M,H),D=w.add(M,H),K=w.mul(ee,D),Z=w.eql(K,w.ZERO);X=w.cmov(X,w.ZERO,Z),ee=w.cmov(ee,w.ONE,Z),ae=w.cmov(ae,w.ONE,Z),D=w.cmov(D,w.ONE,Z);const re=w.invertBatch([ee,D]);return{x:w.mul(X,re[0]),y:w.mul(ae,re[1])}}const V=(0,i.createHasher)(t.ed25519.ExtendedPoint,(O=>W(O[0])),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:w.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});function L(O){if(!(O instanceof A))throw new Error("RistrettoPoint expected")}t.hashToCurve=V.hashToCurve,t.encodeToCurve=V.encodeToCurve;const I=l,x=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),P=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),G=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),b=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),C=O=>m(f,O),T=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),N=O=>t.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(O)&T);function _(O){const{d:M}=t.ed25519.CURVE,H=t.ed25519.CURVE.Fp.ORDER,k=t.ed25519.CURVE.Fp.create,j=k(I*O*O),X=k((j+f)*G);let ee=BigInt(-1);const ae=k((ee-M*j)*k(j+M));let{isValid:D,value:K}=m(X,ae),Z=k(K*O);(0,o.isNegativeLE)(Z,H)||(Z=k(-Z)),D||(K=Z),D||(ee=j);const re=k(ee*(j-f)*b-ae),Q=K*K,Y=k((K+K)*ae),te=k(re*x),ie=k(f-Q),oe=k(f+Q);return new t.ed25519.ExtendedPoint(k(Y*oe),k(ie*te),k(te*oe),k(Y*ie))}class A{constructor(M){this.ep=M}static fromAffine(M){return new A(t.ed25519.ExtendedPoint.fromAffine(M))}static hashToCurve(M){M=(0,a.ensureBytes)("ristrettoHash",M,64);const H=_(N(M.slice(0,32))),k=_(N(M.slice(32,64)));return new A(H.add(k))}static fromHex(M){M=(0,a.ensureBytes)("ristrettoHex",M,32);const{a:H,d:k}=t.ed25519.CURVE,j=t.ed25519.CURVE.Fp.ORDER,X=t.ed25519.CURVE.Fp.create,ee="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",ae=N(M);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(ae,32),M)||(0,o.isNegativeLE)(ae,j))throw new Error(ee);const D=X(ae*ae),K=X(f+H*D),Z=X(f-H*D),re=X(K*K),Q=X(Z*Z),Y=X(H*k*re-Q),{isValid:te,value:ie}=C(X(Y*Q)),oe=X(ie*Z),le=X(ie*oe*Y);let ve=X((ae+ae)*oe);(0,o.isNegativeLE)(ve,j)&&(ve=X(-ve));const de=X(K*le),me=X(ve*de);if(!te||(0,o.isNegativeLE)(me,j)||de===u)throw new Error(ee);return new A(new t.ed25519.ExtendedPoint(ve,de,f,me))}toRawBytes(){let{ex:M,ey:H,ez:k,et:j}=this.ep;const X=t.ed25519.CURVE.Fp.ORDER,ee=t.ed25519.CURVE.Fp.create,ae=ee(ee(k+H)*ee(k-H)),D=ee(M*H),K=ee(D*D),{value:Z}=C(ee(ae*K)),re=ee(Z*ae),Q=ee(Z*D),Y=ee(re*Q*j);let te;if((0,o.isNegativeLE)(j*Y,X)){let oe=ee(H*I),le=ee(M*I);M=oe,H=le,te=ee(re*P)}else te=Q;(0,o.isNegativeLE)(M*Y,X)&&(H=ee(-H));let ie=ee((k-H)*te);return(0,o.isNegativeLE)(ie,X)&&(ie=ee(-ie)),(0,a.numberToBytesLE)(ie,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(M){L(M);const{ex:H,ey:k}=this.ep,{ex:j,ey:X}=M.ep,ee=t.ed25519.CURVE.Fp.create,ae=ee(H*X)===ee(k*j),D=ee(k*X)===ee(H*j);return ae||D}add(M){return L(M),new A(this.ep.add(M.ep))}subtract(M){return L(M),new A(this.ep.subtract(M.ep))}multiply(M){return new A(this.ep.multiply(M))}multiplyUnsafe(M){return new A(this.ep.multiplyUnsafe(M))}double(){return new A(this.ep.double())}negate(){return new A(this.ep.negate())}}t.RistrettoPoint=(A.BASE||(A.BASE=new A(t.ed25519.ExtendedPoint.BASE)),A.ZERO||(A.ZERO=new A(t.ed25519.ExtendedPoint.ZERO)),A),t.hashToRistretto255=(O,M)=>{const H=M.DST,k=typeof H=="string"?(0,n.utf8ToBytes)(H):H,j=(0,i.expand_message_xmd)(O,k,64,e.sha512);return A.hashToCurve(j)},t.hash_to_ristretto255=t.hashToRistretto255})(V_);var E3={},ho={};Object.defineProperty(ho,"__esModule",{value:!0}),ho.sha224=ho.sha256=ho.SHA256=void 0;const B0=fo,Lr=So,nk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Do=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bo=new Uint32Array(64);class Zg extends B0.HashMD{constructor(){super(64,32,8,!1),this.A=0|Do[0],this.B=0|Do[1],this.C=0|Do[2],this.D=0|Do[3],this.E=0|Do[4],this.F=0|Do[5],this.G=0|Do[6],this.H=0|Do[7]}get(){const{A:e,B:n,C:r,D:i,E:o,F:s,G:a,H:c}=this;return[e,n,r,i,o,s,a,c]}set(e,n,r,i,o,s,a,c){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|i,this.E=0|o,this.F=0|s,this.G=0|a,this.H=0|c}process(e,n){for(let f=0;f<16;f++,n+=4)Bo[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const d=Bo[f-15],h=Bo[f-2],p=(0,Lr.rotr)(d,7)^(0,Lr.rotr)(d,18)^d>>>3,g=(0,Lr.rotr)(h,17)^(0,Lr.rotr)(h,19)^h>>>10;Bo[f]=g+Bo[f-7]+p+Bo[f-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=u+((0,Lr.rotr)(a,6)^(0,Lr.rotr)(a,11)^(0,Lr.rotr)(a,25))+(0,B0.Chi)(a,c,l)+nk[f]+Bo[f]|0,h=((0,Lr.rotr)(r,2)^(0,Lr.rotr)(r,13)^(0,Lr.rotr)(r,22))+(0,B0.Maj)(r,i,o)|0;u=l,l=c,c=a,a=s+d|0,s=o,o=i,i=r,r=d+h|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,o,s,a,c,l,u)}roundClean(){Bo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}ho.SHA256=Zg;class rk extends Zg{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}ho.sha256=(0,Lr.wrapConstructor)((()=>new Zg)),ho.sha224=(0,Lr.wrapConstructor)((()=>new rk));var Pf={},Qg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Ir,n=So;class r extends n.Hash{constructor(o,s){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(o);const a=(0,n.toBytes)(s);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,l=new Uint8Array(c);l.set(a.length>c?o.create().update(a).digest():a);for(let u=0;u<l.length;u++)l[u]^=54;this.iHash.update(l),this.oHash=o.create();for(let u=0;u<l.length;u++)l[u]^=106;this.oHash.update(l),l.fill(0)}update(o){return(0,e.exists)(this),this.iHash.update(o),this}digestInto(o){(0,e.exists)(this),(0,e.bytes)(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:a,finished:c,destroyed:l,blockLen:u,outputLen:f}=this;return o.finished=c,o.destroyed=l,o.blockLen=u,o.outputLen=f,o.oHash=s._cloneInto(o.oHash),o.iHash=a._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(i,o,s)=>new r(i,o).update(s).digest(),t.hmac.create=(i,o)=>new r(i,o)})(Qg);var Jg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=h,t.weierstrass=function(g){const y=(function(O){const M=(0,e.validateBasic)(O);return r.validateObject(M,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...M})})(g),{Fp:v,n:m}=y,w=v.BYTES+1,E=2*v.BYTES+1;function S(O){return n.mod(O,m)}function R(O){return n.invert(O,m)}const{ProjectivePoint:F,normPrivateKeyToScalar:$,weierstrassEquation:U,isWithinCurveOrder:B}=h({...y,toBytes(O,M,H){const k=M.toAffine(),j=v.toBytes(k.x),X=r.concatBytes;return(0,i.abool)("isCompressed",H),H?X(Uint8Array.from([M.hasEvenY()?2:3]),j):X(Uint8Array.from([4]),j,v.toBytes(k.y))},fromBytes(O){const M=O.length,H=O[0],k=O.subarray(1);if(M!==w||H!==2&&H!==3){if(M===E&&H===4)return{x:v.fromBytes(k.subarray(0,v.BYTES)),y:v.fromBytes(k.subarray(v.BYTES,2*v.BYTES))};throw new Error(`Point of length ${M} was invalid. Expected ${w} compressed bytes or ${E} uncompressed bytes`)}{const j=r.bytesToNumberBE(k);if(!r.inRange(j,l,v.ORDER))throw new Error("Point is not on curve");const X=U(j);let ee;try{ee=v.sqrt(X)}catch(ae){const D=ae instanceof Error?": "+ae.message:"";throw new Error("Point is not on curve"+D)}return(1&H)==1!=((ee&l)===l)&&(ee=v.neg(ee)),{x:j,y:ee}}}}),W=O=>r.bytesToHex(r.numberToBytesBE(O,y.nByteLength));function V(O){return O>m>>l}const L=(O,M,H)=>r.bytesToNumberBE(O.slice(M,H));class I{constructor(M,H,k){this.r=M,this.s=H,this.recovery=k,this.assertValidity()}static fromCompact(M){const H=y.nByteLength;return M=(0,i.ensureBytes)("compactSignature",M,2*H),new I(L(M,0,H),L(M,H,2*H))}static fromDER(M){const{r:H,s:k}=t.DER.toSig((0,i.ensureBytes)("DER",M));return new I(H,k)}assertValidity(){r.aInRange("r",this.r,l,m),r.aInRange("s",this.s,l,m)}addRecoveryBit(M){return new I(this.r,this.s,M)}recoverPublicKey(M){const{r:H,s:k,recovery:j}=this,X=b((0,i.ensureBytes)("msgHash",M));if(j==null||![0,1,2,3].includes(j))throw new Error("recovery id invalid");const ee=j===2||j===3?H+y.n:H;if(ee>=v.ORDER)throw new Error("recovery id 2 or 3 invalid");const ae=(1&j)==0?"02":"03",D=F.fromHex(ae+W(ee)),K=R(ee),Z=S(-X*K),re=S(k*K),Q=F.BASE.multiplyAndAddUnsafe(D,Z,re);if(!Q)throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return V(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,S(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return W(this.r)+W(this.s)}}const x={isValidPrivateKey(O){try{return $(O),!0}catch{return!1}},normPrivateKeyToScalar:$,randomPrivateKey:()=>{const O=n.getMinHashLength(y.n);return n.mapHashToField(y.randomBytes(O),y.n)},precompute:(O=8,M=F.BASE)=>(M._setWindowSize(O),M.multiply(BigInt(3)),M)};function P(O){const M=r.isBytes(O),H=typeof O=="string",k=(M||H)&&O.length;return M?k===w||k===E:H?k===2*w||k===2*E:O instanceof F}const G=y.bits2int||function(O){const M=r.bytesToNumberBE(O),H=8*O.length-y.nBitLength;return H>0?M>>BigInt(H):M},b=y.bits2int_modN||function(O){return S(G(O))},C=r.bitMask(y.nBitLength);function T(O){return r.aInRange(`num < 2^${y.nBitLength}`,O,c,C),r.numberToBytesBE(O,y.nByteLength)}function N(O,M,H=_){if(["recovered","canonical"].some((Y=>Y in H)))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:j}=y;let{lowS:X,prehash:ee,extraEntropy:ae}=H;X==null&&(X=!0),O=(0,i.ensureBytes)("msgHash",O),o(H),ee&&(O=(0,i.ensureBytes)("prehashed msgHash",k(O)));const D=b(O),K=$(M),Z=[T(K),T(D)];if(ae!=null&&ae!==!1){const Y=ae===!0?j(v.BYTES):ae;Z.push((0,i.ensureBytes)("extraEntropy",Y))}const re=r.concatBytes(...Z),Q=D;return{seed:re,k2sig:function(Y){const te=G(Y);if(!B(te))return;const ie=R(te),oe=F.BASE.multiply(te).toAffine(),le=S(oe.x);if(le===c)return;const ve=S(ie*S(Q+le*K));if(ve===c)return;let de=(oe.x===le?0:2)|Number(oe.y&l),me=ve;return X&&V(ve)&&(me=(function(se){return V(se)?S(-se):se})(ve),de^=1),new I(le,me,de)}}}const _={lowS:y.lowS,prehash:!1},A={lowS:y.lowS,prehash:!1};return F.BASE._setWindowSize(8),{CURVE:y,getPublicKey:function(O,M=!0){return F.fromPrivateKey(O).toRawBytes(M)},getSharedSecret:function(O,M,H=!0){if(P(O))throw new Error("first arg must be private key");if(!P(M))throw new Error("second arg must be public key");return F.fromHex(M).multiply($(O)).toRawBytes(H)},sign:function(O,M,H=_){const{seed:k,k2sig:j}=N(O,M,H),X=y;return r.createHmacDrbg(X.hash.outputLen,X.nByteLength,X.hmac)(k,j)},verify:function(O,M,H,k=A){const j=O;if(M=(0,i.ensureBytes)("msgHash",M),H=(0,i.ensureBytes)("publicKey",H),"strict"in k)throw new Error("options.strict was renamed to lowS");o(k);const{lowS:X,prehash:ee}=k;let ae,D;try{if(typeof j=="string"||r.isBytes(j))try{ae=I.fromDER(j)}catch(le){if(!(le instanceof t.DER.Err))throw le;ae=I.fromCompact(j)}else{if(typeof j!="object"||typeof j.r!="bigint"||typeof j.s!="bigint")throw new Error("PARSE");{const{r:le,s:ve}=j;ae=new I(le,ve)}}D=F.fromHex(H)}catch(le){if(le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(X&&ae.hasHighS())return!1;ee&&(M=y.hash(M));const{r:K,s:Z}=ae,re=b(M),Q=R(Z),Y=S(re*Q),te=S(K*Q),ie=F.BASE.multiplyAndAddUnsafe(D,Y,te)?.toAffine();return ie?S(ie.x)===K:!1},ProjectivePoint:F,Signature:I,utils:x}},t.SWUFpSqrtRatio=p,t.mapToCurveSimpleSWU=function(g,y){if(n.validateField(g),!g.isValid(y.A)||!g.isValid(y.B)||!g.isValid(y.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const v=p(g,y.Z);if(!g.isOdd)throw new Error("Fp.isOdd is not implemented!");return m=>{let w,E,S,R,F,$,U,B;w=g.sqr(m),w=g.mul(w,y.Z),E=g.sqr(w),E=g.add(E,w),S=g.add(E,g.ONE),S=g.mul(S,y.B),R=g.cmov(y.Z,g.neg(E),!g.eql(E,g.ZERO)),R=g.mul(R,y.A),E=g.sqr(S),$=g.sqr(R),F=g.mul($,y.A),E=g.add(E,F),E=g.mul(E,S),$=g.mul($,R),F=g.mul($,y.B),E=g.add(E,F),U=g.mul(w,S);const{isValid:W,value:V}=v(E,$);B=g.mul(w,m),B=g.mul(B,V),U=g.cmov(U,S,W),B=g.cmov(B,V,W);const L=g.isOdd(m)===g.isOdd(B);return B=g.cmov(g.neg(B),B,L),U=g.div(U,R),{x:U,y:B}}};const e=Da,n=dt,r=je,i=je;function o(g){g.lowS!==void 0&&(0,i.abool)("lowS",g.lowS),g.prehash!==void 0&&(0,i.abool)("prehash",g.prehash)}const{bytesToNumberBE:s,hexToBytes:a}=r;t.DER={Err:class extends Error{constructor(g=""){super(g)}},_tlv:{encode:(g,y)=>{const{Err:v}=t.DER;if(g<0||g>256)throw new v("tlv.encode: wrong tag");if(1&y.length)throw new v("tlv.encode: unpadded data");const m=y.length/2,w=r.numberToHexUnpadded(m);if(w.length/2&128)throw new v("tlv.encode: long form length too big");const E=m>127?r.numberToHexUnpadded(w.length/2|128):"";return`${r.numberToHexUnpadded(g)}${E}${w}${y}`},decode(g,y){const{Err:v}=t.DER;let m=0;if(g<0||g>256)throw new v("tlv.encode: wrong tag");if(y.length<2||y[m++]!==g)throw new v("tlv.decode: wrong tlv");const w=y[m++];let E=0;if(128&w){const R=127&w;if(!R)throw new v("tlv.decode(long): indefinite length not supported");if(R>4)throw new v("tlv.decode(long): byte length is too big");const F=y.subarray(m,m+R);if(F.length!==R)throw new v("tlv.decode: length bytes not complete");if(F[0]===0)throw new v("tlv.decode(long): zero leftmost byte");for(const $ of F)E=E<<8|$;if(m+=R,E<128)throw new v("tlv.decode(long): not minimal encoding")}else E=w;const S=y.subarray(m,m+E);if(S.length!==E)throw new v("tlv.decode: wrong value length");return{v:S,l:y.subarray(m+E)}}},_int:{encode(g){const{Err:y}=t.DER;if(g<c)throw new y("integer: negative integers are not allowed");let v=r.numberToHexUnpadded(g);if(8&Number.parseInt(v[0],16)&&(v="00"+v),1&v.length)throw new y("unexpected assertion");return v},decode(g){const{Err:y}=t.DER;if(128&g[0])throw new y("Invalid signature integer: negative");if(g[0]===0&&!(128&g[1]))throw new y("Invalid signature integer: unnecessary leading zero");return s(g)}},toSig(g){const{Err:y,_int:v,_tlv:m}=t.DER,w=typeof g=="string"?a(g):g;r.abytes(w);const{v:E,l:S}=m.decode(48,w);if(S.length)throw new y("Invalid signature: left bytes after parsing");const{v:R,l:F}=m.decode(2,E),{v:$,l:U}=m.decode(2,F);if(U.length)throw new y("Invalid signature: left bytes after parsing");return{r:v.decode(R),s:v.decode($)}},hexFromSig(g){const{_tlv:y,_int:v}=t.DER,m=`${y.encode(2,v.encode(g.r))}${y.encode(2,v.encode(g.s))}`;return y.encode(48,m)}};const c=BigInt(0),l=BigInt(1),u=BigInt(2),f=BigInt(3),d=BigInt(4);function h(g){const y=(function(L){const I=(0,e.validateBasic)(L);r.validateObject(I,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:x,Fp:P,a:G}=I;if(x){if(!P.eql(G,P.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof x!="object"||typeof x.beta!="bigint"||typeof x.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...I})})(g),{Fp:v}=y,m=n.Field(y.n,y.nBitLength),w=y.toBytes||((L,I,x)=>{const P=I.toAffine();return r.concatBytes(Uint8Array.from([4]),v.toBytes(P.x),v.toBytes(P.y))}),E=y.fromBytes||(L=>{const I=L.subarray(1);return{x:v.fromBytes(I.subarray(0,v.BYTES)),y:v.fromBytes(I.subarray(v.BYTES,2*v.BYTES))}});function S(L){const{a:I,b:x}=y,P=v.sqr(L),G=v.mul(P,L);return v.add(v.add(G,v.mul(L,I)),x)}if(!v.eql(v.sqr(y.Gy),S(y.Gx)))throw new Error("bad generator point: equation left != right");function R(L){const{allowedPrivateKeyLengths:I,nByteLength:x,wrapPrivateKey:P,n:G}=y;if(I&&typeof L!="bigint"){if(r.isBytes(L)&&(L=r.bytesToHex(L)),typeof L!="string"||!I.includes(L.length))throw new Error("Invalid key");L=L.padStart(2*x,"0")}let b;try{b=typeof L=="bigint"?L:r.bytesToNumberBE((0,i.ensureBytes)("private key",L,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof L}`)}return P&&(b=n.mod(b,G)),r.aInRange("private key",b,l,G),b}function F(L){if(!(L instanceof B))throw new Error("ProjectivePoint expected")}const $=(0,i.memoized)(((L,I)=>{const{px:x,py:P,pz:G}=L;if(v.eql(G,v.ONE))return{x,y:P};const b=L.is0();I==null&&(I=b?v.ONE:v.inv(G));const C=v.mul(x,I),T=v.mul(P,I),N=v.mul(G,I);if(b)return{x:v.ZERO,y:v.ZERO};if(!v.eql(N,v.ONE))throw new Error("invZ was invalid");return{x:C,y:T}})),U=(0,i.memoized)((L=>{if(L.is0()){if(y.allowInfinityPoint&&!v.is0(L.py))return;throw new Error("bad point: ZERO")}const{x:I,y:x}=L.toAffine();if(!v.isValid(I)||!v.isValid(x))throw new Error("bad point: x or y not FE");const P=v.sqr(x),G=S(I);if(!v.eql(P,G))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class B{constructor(I,x,P){if(this.px=I,this.py=x,this.pz=P,I==null||!v.isValid(I))throw new Error("x required");if(x==null||!v.isValid(x))throw new Error("y required");if(P==null||!v.isValid(P))throw new Error("z required");Object.freeze(this)}static fromAffine(I){const{x,y:P}=I||{};if(!I||!v.isValid(x)||!v.isValid(P))throw new Error("invalid affine point");if(I instanceof B)throw new Error("projective point not allowed");const G=b=>v.eql(b,v.ZERO);return G(x)&&G(P)?B.ZERO:new B(x,P,v.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const x=v.invertBatch(I.map((P=>P.pz)));return I.map(((P,G)=>P.toAffine(x[G]))).map(B.fromAffine)}static fromHex(I){const x=B.fromAffine(E((0,i.ensureBytes)("pointHex",I)));return x.assertValidity(),x}static fromPrivateKey(I){return B.BASE.multiply(R(I))}static msm(I,x){return(0,e.pippenger)(B,m,I,x)}_setWindowSize(I){V.setWindowSize(this,I)}assertValidity(){U(this)}hasEvenY(){const{y:I}=this.toAffine();if(v.isOdd)return!v.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){F(I);const{px:x,py:P,pz:G}=this,{px:b,py:C,pz:T}=I,N=v.eql(v.mul(x,T),v.mul(b,G)),_=v.eql(v.mul(P,T),v.mul(C,G));return N&&_}negate(){return new B(this.px,v.neg(this.py),this.pz)}double(){const{a:I,b:x}=y,P=v.mul(x,f),{px:G,py:b,pz:C}=this;let T=v.ZERO,N=v.ZERO,_=v.ZERO,A=v.mul(G,G),O=v.mul(b,b),M=v.mul(C,C),H=v.mul(G,b);return H=v.add(H,H),_=v.mul(G,C),_=v.add(_,_),T=v.mul(I,_),N=v.mul(P,M),N=v.add(T,N),T=v.sub(O,N),N=v.add(O,N),N=v.mul(T,N),T=v.mul(H,T),_=v.mul(P,_),M=v.mul(I,M),H=v.sub(A,M),H=v.mul(I,H),H=v.add(H,_),_=v.add(A,A),A=v.add(_,A),A=v.add(A,M),A=v.mul(A,H),N=v.add(N,A),M=v.mul(b,C),M=v.add(M,M),A=v.mul(M,H),T=v.sub(T,A),_=v.mul(M,O),_=v.add(_,_),_=v.add(_,_),new B(T,N,_)}add(I){F(I);const{px:x,py:P,pz:G}=this,{px:b,py:C,pz:T}=I;let N=v.ZERO,_=v.ZERO,A=v.ZERO;const O=y.a,M=v.mul(y.b,f);let H=v.mul(x,b),k=v.mul(P,C),j=v.mul(G,T),X=v.add(x,P),ee=v.add(b,C);X=v.mul(X,ee),ee=v.add(H,k),X=v.sub(X,ee),ee=v.add(x,G);let ae=v.add(b,T);return ee=v.mul(ee,ae),ae=v.add(H,j),ee=v.sub(ee,ae),ae=v.add(P,G),N=v.add(C,T),ae=v.mul(ae,N),N=v.add(k,j),ae=v.sub(ae,N),A=v.mul(O,ee),N=v.mul(M,j),A=v.add(N,A),N=v.sub(k,A),A=v.add(k,A),_=v.mul(N,A),k=v.add(H,H),k=v.add(k,H),j=v.mul(O,j),ee=v.mul(M,ee),k=v.add(k,j),j=v.sub(H,j),j=v.mul(O,j),ee=v.add(ee,j),H=v.mul(k,ee),_=v.add(_,H),H=v.mul(ae,ee),N=v.mul(X,N),N=v.sub(N,H),H=v.mul(X,k),A=v.mul(ae,A),A=v.add(A,H),new B(N,_,A)}subtract(I){return this.add(I.negate())}is0(){return this.equals(B.ZERO)}wNAF(I){return V.wNAFCached(this,I,B.normalizeZ)}multiplyUnsafe(I){r.aInRange("scalar",I,c,y.n);const x=B.ZERO;if(I===c)return x;if(I===l)return this;const{endo:P}=y;if(!P)return V.unsafeLadder(this,I);let{k1neg:G,k1:b,k2neg:C,k2:T}=P.splitScalar(I),N=x,_=x,A=this;for(;b>c||T>c;)b&l&&(N=N.add(A)),T&l&&(_=_.add(A)),A=A.double(),b>>=l,T>>=l;return G&&(N=N.negate()),C&&(_=_.negate()),_=new B(v.mul(_.px,P.beta),_.py,_.pz),N.add(_)}multiply(I){const{endo:x,n:P}=y;let G,b;if(r.aInRange("scalar",I,l,P),x){const{k1neg:C,k1:T,k2neg:N,k2:_}=x.splitScalar(I);let{p:A,f:O}=this.wNAF(T),{p:M,f:H}=this.wNAF(_);A=V.constTimeNegate(C,A),M=V.constTimeNegate(N,M),M=new B(v.mul(M.px,x.beta),M.py,M.pz),G=A.add(M),b=O.add(H)}else{const{p:C,f:T}=this.wNAF(I);G=C,b=T}return B.normalizeZ([G,b])[0]}multiplyAndAddUnsafe(I,x,P){const G=B.BASE,b=(T,N)=>N!==c&&N!==l&&T.equals(G)?T.multiply(N):T.multiplyUnsafe(N),C=b(this,x).add(b(I,P));return C.is0()?void 0:C}toAffine(I){return $(this,I)}isTorsionFree(){const{h:I,isTorsionFree:x}=y;if(I===l)return!0;if(x)return x(B,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:x}=y;return I===l?this:x?x(B,this):this.multiplyUnsafe(y.h)}toRawBytes(I=!0){return(0,i.abool)("isCompressed",I),this.assertValidity(),w(B,this,I)}toHex(I=!0){return(0,i.abool)("isCompressed",I),r.bytesToHex(this.toRawBytes(I))}}B.BASE=new B(y.Gx,y.Gy,v.ONE),B.ZERO=new B(v.ZERO,v.ONE,v.ZERO);const W=y.nBitLength,V=(0,e.wNAF)(B,y.endo?Math.ceil(W/2):W);return{CURVE:y,ProjectivePoint:B,normPrivateKeyToScalar:R,weierstrassEquation:S,isWithinCurveOrder:function(L){return r.inRange(L,l,y.n)}}}function p(g,y){const v=g.ORDER;let m=c;for(let L=v-l;L%u===c;L/=u)m+=l;const w=m,E=u<<w-l-l,S=E*u,R=(v-l)/S,F=(R-l)/u,$=S-l,U=E,B=g.pow(y,R),W=g.pow(y,(R+l)/u);let V=(L,I)=>{let x=B,P=g.pow(I,$),G=g.sqr(P);G=g.mul(G,I);let b=g.mul(L,G);b=g.pow(b,F),b=g.mul(b,P),P=g.mul(b,I),G=g.mul(b,L);let C=g.mul(G,P);b=g.pow(C,U);let T=g.eql(b,g.ONE);P=g.mul(G,W),b=g.mul(C,x),G=g.cmov(P,G,T),C=g.cmov(b,C,T);for(let N=w;N>l;N--){let _=N-u;_=u<<_-l;let A=g.pow(C,_);const O=g.eql(A,g.ONE);P=g.mul(G,x),x=g.mul(x,x),A=g.mul(C,x),G=g.cmov(P,G,O),C=g.cmov(A,C,O)}return{isValid:T,value:G}};if(g.ORDER%d===f){const L=(g.ORDER-f)/d,I=g.sqrt(g.neg(y));V=(x,P)=>{let G=g.sqr(P);const b=g.mul(x,P);G=g.mul(G,b);let C=g.pow(G,L);C=g.mul(C,b);const T=g.mul(C,I),N=g.mul(g.sqr(C),P),_=g.eql(N,x);return{isValid:_,value:g.cmov(T,C,_)}}}return V}})(Jg),Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.getHash=k2,Pf.createCurve=function(t,e){const n=r=>(0,ok.weierstrass)({...t,...k2(r)});return Object.freeze({...n(e),create:n})};const ik=Qg,N2=So,ok=Jg;function k2(t){return{hash:t,hmac:(e,...n)=>(0,ik.hmac)(t,e,(0,N2.concatBytes)(...n)),randomBytes:N2.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=ho,n=So,r=Pf,i=qo,o=dt,s=je,a=Jg,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),f=BigInt(2),d=(b,C)=>(b+C/f)/C;function h(b){const C=c,T=BigInt(3),N=BigInt(6),_=BigInt(11),A=BigInt(22),O=BigInt(23),M=BigInt(44),H=BigInt(88),k=b*b*b%C,j=k*k*b%C,X=(0,o.pow2)(j,T,C)*j%C,ee=(0,o.pow2)(X,T,C)*j%C,ae=(0,o.pow2)(ee,f,C)*k%C,D=(0,o.pow2)(ae,_,C)*ae%C,K=(0,o.pow2)(D,A,C)*D%C,Z=(0,o.pow2)(K,M,C)*K%C,re=(0,o.pow2)(Z,H,C)*Z%C,Q=(0,o.pow2)(re,M,C)*K%C,Y=(0,o.pow2)(Q,T,C)*j%C,te=(0,o.pow2)(Y,O,C)*D%C,ie=(0,o.pow2)(te,N,C)*k%C,oe=(0,o.pow2)(ie,f,C);if(!p.eql(p.sqr(oe),b))throw new Error("Cannot find square root");return oe}const p=(0,o.Field)(c,void 0,void 0,{sqrt:h});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:b=>{const C=l,T=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),N=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),_=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),A=T,O=BigInt("0x100000000000000000000000000000000"),M=d(A*b,C),H=d(-N*b,C);let k=(0,o.mod)(b-M*T-H*_,C),j=(0,o.mod)(-M*N-H*A,C);const X=k>O,ee=j>O;if(X&&(k=C-k),ee&&(j=C-j),k>O||j>O)throw new Error("splitScalar: Endomorphism failed, k="+b);return{k1neg:X,k1:k,k2neg:ee,k2:j}}}},e.sha256);const g=BigInt(0),y={};function v(b,...C){let T=y[b];if(T===void 0){const N=(0,e.sha256)(Uint8Array.from(b,(_=>_.charCodeAt(0))));T=(0,s.concatBytes)(N,N),y[b]=T}return(0,e.sha256)((0,s.concatBytes)(T,...C))}const m=b=>b.toRawBytes(!0).slice(1),w=b=>(0,s.numberToBytesBE)(b,32),E=b=>(0,o.mod)(b,c),S=b=>(0,o.mod)(b,l),R=t.secp256k1.ProjectivePoint,F=(b,C,T)=>R.BASE.multiplyAndAddUnsafe(b,C,T);function $(b){let C=t.secp256k1.utils.normPrivateKeyToScalar(b),T=R.fromPrivateKey(C);return{scalar:T.hasEvenY()?C:S(-C),bytes:m(T)}}function U(b){(0,s.aInRange)("x",b,u,c);const C=E(b*b);let T=h(E(C*b+BigInt(7)));T%f!==g&&(T=E(-T));const N=new R(b,T,u);return N.assertValidity(),N}const B=s.bytesToNumberBE;function W(...b){return S(B(v("BIP0340/challenge",...b)))}function V(b){return $(b).bytes}function L(b,C,T=(0,n.randomBytes)(32)){const N=(0,s.ensureBytes)("message",b),{bytes:_,scalar:A}=$(C),O=(0,s.ensureBytes)("auxRand",T,32),M=w(A^B(v("BIP0340/aux",O))),H=v("BIP0340/nonce",M,_,N),k=S(B(H));if(k===g)throw new Error("sign failed: k is zero");const{bytes:j,scalar:X}=$(k),ee=W(j,_,N),ae=new Uint8Array(64);if(ae.set(j,0),ae.set(w(S(X+ee*A)),32),!I(ae,N,_))throw new Error("sign: Invalid signature produced");return ae}function I(b,C,T){const N=(0,s.ensureBytes)("signature",b,64),_=(0,s.ensureBytes)("message",C),A=(0,s.ensureBytes)("publicKey",T,32);try{const O=U(B(A)),M=B(N.subarray(0,32));if(!(0,s.inRange)(M,u,c))return!1;const H=B(N.subarray(32,64));if(!(0,s.inRange)(H,u,l))return!1;const k=W(w(M),m(O),_),j=F(O,H,S(-k));return!(!j||!j.hasEvenY()||j.toAffine().x!==M)}catch{return!1}}t.schnorr={getPublicKey:V,sign:L,verify:I,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:U,pointToBytes:m,numberToBytesBE:s.numberToBytesBE,bytesToNumberBE:s.bytesToNumberBE,taggedHash:v,mod:o.mod}};const x=(0,i.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((b=>b.map((C=>BigInt(C)))))),P=(0,a.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),G=(0,i.createHasher)(t.secp256k1.ProjectivePoint,(b=>{const{x:C,y:T}=P(p.create(b[0]));return x(C,T)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=G.hashToCurve,t.encodeToCurve=G.encodeToCurve})(E3);var p1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=kr;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(p1),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=qg,n=V_,r=E3,i=Kl,o=dn,s=p1;t.getValidSecret=function(){var u;do u=(0,e.randomBytes)(o.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(u));return u},t.isValidPrivateKey=function(u){return a((0,i.ellipticCurve)(),(function(f){return f.utils.isValidPrivateKey(u)}),(function(){return!0}),(function(){return!0}))},t.getPublicKey=function(u){return a((0,i.ellipticCurve)(),(function(f){return f.getPublicKey(u)}),(function(f){return f.getPublicKey(u)}),(function(f){return f.getPublicKey(u)}))},t.getSharedPoint=function(u,f,d){return a((0,i.ellipticCurve)(),(function(h){return h.getSharedSecret(u,f,d)}),(function(h){return h.getSharedSecret(u,f)}),(function(h){return l(h,u,f)}))},t.convertPublicKeyFormat=function(u,f){return a((0,i.ellipticCurve)(),(function(d){return d.getSharedSecret(BigInt(1),u,f)}),(function(){return u}),(function(){return u}))};function a(u,f,d,h){if(u==="secp256k1")return f(r.secp256k1);if(u==="x25519")return d(n.x25519);if(u==="ed25519")return h(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(u){var f=(0,s.decodeHex)(u);return a((0,i.ellipticCurve)(),(function(){return c(f)}),(function(){return f}),(function(){return f}))};var c=function(u){if(u.length===o.ETH_PUBLIC_KEY_SIZE){var f=new Uint8Array(1+u.length);return f.set([4]),f.set(u,1),f}return u},l=function(u,f,d){var h=u.utils.getExtendedPublicKey(f).scalar;return u.ExtendedPoint.fromHex(d).multiply(h).toRawBytes()}})($_);var x3={},Ba={};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.hkdf=void 0,Ba.extract=_3,Ba.expand=C3;const g1=Ir,M2=So,A3=Qg;function _3(t,e,n){return(0,g1.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,A3.hmac)(t,(0,M2.toBytes)(n),(0,M2.toBytes)(e))}const L0=new Uint8Array([0]),D2=new Uint8Array;function C3(t,e,n,r=32){if((0,g1.hash)(t),(0,g1.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=D2);const o=new Uint8Array(i*t.outputLen),s=A3.hmac.create(t,e),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let l=0;l<i;l++)L0[0]=l+1,a.update(l===0?D2:c).update(n).update(L0).digestInto(c),o.set(c,t.outputLen*l),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),L0.fill(0),o.slice(0,r)}Ba.hkdf=(t,e,n,r,i)=>C3(t,_3(t,e,n),r,i),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=kr,n=Ba,r=ho;t.deriveKey=function(i,o,s){return(0,n.hkdf)(r.sha256,i,o,s,32)},t.getSharedKey=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return(0,t.deriveKey)(e.concatBytes.apply(void 0,i))}})(x3);var B2={},rc={},Ht={},js={};Object.defineProperty(js,"__esModule",{value:!0}),js.polyval=js.ghash=void 0,js._toGHASHKey=S3;const Gs=Bn,Zn=kr,to=16,ev=new Uint8Array(16),Ri=(0,Zn.u32)(ev),Vr=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function S3(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const i=t[r];t[r]=i>>>1|n,n=(1&i)<<7}return t[0]^=225&-e,t}class I3{constructor(e,n){this.blockLen=to,this.outputLen=to,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,Zn.toBytes)(e),(0,Gs.bytes)(e,16);const r=(0,Zn.createView)(e);let i=r.getUint32(0,!1),o=r.getUint32(4,!1),s=r.getUint32(8,!1),a=r.getUint32(12,!1);const c=[];for(let v=0;v<128;v++)c.push({s0:Vr(i),s1:Vr(o),s2:Vr(s),s3:Vr(a)}),{s0:i,s1:o,s2:s,s3:a}={s3:(f=s)<<31|(d=a)>>>1,s2:(u=o)<<31|f>>>1,s1:(l=i)<<31|u>>>1,s0:l>>>1^225<<24&-(1&d)};var l,u,f,d;const h=(v=>v>65536?8:v>1024?4:2)(n||1024);if(![1,2,4,8].includes(h))throw new Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;const p=128/h,g=this.windowSize=2**h,y=[];for(let v=0;v<p;v++)for(let m=0;m<g;m++){let w=0,E=0,S=0,R=0;for(let F=0;F<h;F++){if(!(m>>>h-F-1&1))continue;const{s0:$,s1:U,s2:B,s3:W}=c[h*v+F];w^=$,E^=U,S^=B,R^=W}y.push({s0:w,s1:E,s2:S,s3:R})}this.t=y}_updateBlock(e,n,r,i){e^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:o,t:s,windowSize:a}=this;let c=0,l=0,u=0,f=0;const d=(1<<o)-1;let h=0;for(const p of[e,n,r,i])for(let g=0;g<4;g++){const y=p>>>8*g&255;for(let v=8/o-1;v>=0;v--){const m=y>>>o*v&d,{s0:w,s1:E,s2:S,s3:R}=s[h*a+m];c^=w,l^=E,u^=S,f^=R,h+=1}}this.s0=c,this.s1=l,this.s2=u,this.s3=f}update(e){e=(0,Zn.toBytes)(e),(0,Gs.exists)(this);const n=(0,Zn.u32)(e),r=Math.floor(e.length/to),i=e.length%to;for(let o=0;o<r;o++)this._updateBlock(n[4*o+0],n[4*o+1],n[4*o+2],n[4*o+3]);return i&&(ev.set(e.subarray(r*to)),this._updateBlock(Ri[0],Ri[1],Ri[2],Ri[3]),(0,Zn.clean)(Ri)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,Gs.exists)(this),(0,Gs.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:o}=this,s=(0,Zn.u32)(e);return s[0]=n,s[1]=r,s[2]=i,s[3]=o,e}digest(){const e=new Uint8Array(to);return this.digestInto(e),this.destroy(),e}}class sk extends I3{constructor(e,n){e=(0,Zn.toBytes)(e);const r=S3((0,Zn.copyBytes)(e));super(r,n),(0,Zn.clean)(r)}update(e){e=(0,Zn.toBytes)(e),(0,Gs.exists)(this);const n=(0,Zn.u32)(e),r=e.length%to,i=Math.floor(e.length/to);for(let o=0;o<i;o++)this._updateBlock(Vr(n[4*o+3]),Vr(n[4*o+2]),Vr(n[4*o+1]),Vr(n[4*o+0]));return r&&(ev.set(e.subarray(i*to)),this._updateBlock(Vr(Ri[3]),Vr(Ri[2]),Vr(Ri[1]),Vr(Ri[0])),(0,Zn.clean)(Ri)),this}digestInto(e){(0,Gs.exists)(this),(0,Gs.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:o}=this,s=(0,Zn.u32)(e);return s[0]=n,s[1]=r,s[2]=i,s[3]=o,e.reverse()}}function L2(t){const e=(r,i)=>t(i,r.length).update((0,Zn.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,i)=>t(r,i),e}js.ghash=L2(((t,e)=>new I3(t,e))),js.polyval=L2(((t,e)=>new sk(t,e))),Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.unsafe=Ht.aeskwp=Ht.aeskw=Ht.siv=Ht.gcm=Ht.cfb=Ht.cbc=Ht.ecb=Ht.ctr=void 0,Ht.expandKeyLE=li,Ht.expandKeyDecLE=Gl;const Je=Bn,v1=js,be=kr,vr=16,Qu=new Uint8Array(vr),ak=283;function tv(t){return t<<1^ak&-(t>>7)}function La(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=tv(t);return n}const y1=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=tv(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,be.clean)(t),e})(),ck=y1.map(((t,e)=>y1.indexOf(e))),lk=t=>t<<24|t>>>8,F0=t=>t<<8|t>>>24,Ad=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function T3(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((l,u)=>e(t[u]))),r=n.map(F0),i=r.map(F0),o=i.map(F0),s=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let l=0;l<256;l++)for(let u=0;u<256;u++){const f=256*l+u;s[f]=n[l]^r[u],a[f]=i[l]^o[u],c[f]=t[l]<<8|t[u]}return{sbox:t,sbox2:c,T0:n,T1:r,T2:i,T3:o,T01:s,T23:a}}const nv=T3(y1,(t=>La(t,3)<<24|t<<16|t<<8|La(t,2))),O3=T3(ck,(t=>La(t,11)<<24|La(t,13)<<16|La(t,9)<<8|La(t,14))),uk=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=tv(n))t[e]=n;return t})();function li(t){(0,Je.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=nv,r=[];(0,be.isAligned32)(t)||r.push(t=(0,be.copyBytes)(t));const i=(0,be.u32)(t),o=i.length,s=c=>Ni(n,c,c,c,c),a=new Uint32Array(e+28);a.set(i);for(let c=o;c<a.length;c++){let l=a[c-1];c%o==0?l=s(lk(l))^uk[c/o-1]:o>6&&c%o==4&&(l=s(l)),a[c]=a[c-o]^l}return(0,be.clean)(...r),a}function Gl(t){const e=li(t),n=e.slice(),r=e.length,{sbox2:i}=nv,{T0:o,T1:s,T2:a,T3:c}=O3;for(let l=0;l<r;l+=4)for(let u=0;u<4;u++)n[l+u]=e[r-l-4+u];(0,be.clean)(e);for(let l=4;l<r-4;l++){const u=n[l],f=Ni(i,u,u,u,u);n[l]=o[255&f]^s[f>>>8&255]^a[f>>>16&255]^c[f>>>24]}return n}function is(t,e,n,r,i,o){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|o>>>24&255]}function Ni(t,e,n,r,i){return t[255&e|65280&n]|t[r>>>16&255|i>>>16&65280]<<16}function Jn(t,e,n,r,i){const{sbox2:o,T01:s,T23:a}=nv;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const f=t[c++]^is(s,a,e,n,r,i),d=t[c++]^is(s,a,n,r,i,e),h=t[c++]^is(s,a,r,i,e,n),p=t[c++]^is(s,a,i,e,n,r);e=f,n=d,r=h,i=p}return{s0:t[c++]^Ni(o,e,n,r,i),s1:t[c++]^Ni(o,n,r,i,e),s2:t[c++]^Ni(o,r,i,e,n),s3:t[c++]^Ni(o,i,e,n,r)}}function zl(t,e,n,r,i){const{sbox2:o,T01:s,T23:a}=O3;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const f=t[c++]^is(s,a,e,i,r,n),d=t[c++]^is(s,a,n,e,i,r),h=t[c++]^is(s,a,r,n,e,i),p=t[c++]^is(s,a,i,r,n,e);e=f,n=d,r=h,i=p}return{s0:t[c++]^Ni(o,e,i,r,n),s1:t[c++]^Ni(o,n,e,i,r),s2:t[c++]^Ni(o,r,n,e,i),s3:t[c++]^Ni(o,i,r,n,e)}}function ic(t,e){if(e===void 0)return new Uint8Array(t);if((0,Je.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,be.isAligned32)(e))throw new Error("unaligned dst");return e}function R3(t,e,n,r){(0,Je.bytes)(e,vr),(0,Je.bytes)(n);const i=n.length;r=ic(i,r);const o=e,s=(0,be.u32)(o);let{s0:a,s1:c,s2:l,s3:u}=Jn(t,s[0],s[1],s[2],s[3]);const f=(0,be.u32)(n),d=(0,be.u32)(r);for(let p=0;p+4<=f.length;p+=4){d[p+0]=f[p+0]^a,d[p+1]=f[p+1]^c,d[p+2]=f[p+2]^l,d[p+3]=f[p+3]^u;let g=1;for(let y=o.length-1;y>=0;y--)g=g+(255&o[y])|0,o[y]=255&g,g>>>=8;({s0:a,s1:c,s2:l,s3:u}=Jn(t,s[0],s[1],s[2],s[3]))}const h=vr*Math.floor(f.length/4);if(h<i){const p=new Uint32Array([a,c,l,u]),g=(0,be.u8)(p);for(let y=h,v=0;y<i;y++,v++)r[y]=n[y]^g[v];(0,be.clean)(p)}return r}function Fa(t,e,n,r,i){(0,Je.bytes)(n,vr),(0,Je.bytes)(r),i=ic(r.length,i);const o=n,s=(0,be.u32)(o),a=(0,be.createView)(o),c=(0,be.u32)(r),l=(0,be.u32)(i),u=e?0:12,f=r.length;let d=a.getUint32(u,e),{s0:h,s1:p,s2:g,s3:y}=Jn(t,s[0],s[1],s[2],s[3]);for(let m=0;m+4<=c.length;m+=4)l[m+0]=c[m+0]^h,l[m+1]=c[m+1]^p,l[m+2]=c[m+2]^g,l[m+3]=c[m+3]^y,d=d+1>>>0,a.setUint32(u,d,e),{s0:h,s1:p,s2:g,s3:y}=Jn(t,s[0],s[1],s[2],s[3]);const v=vr*Math.floor(c.length/4);if(v<f){const m=new Uint32Array([h,p,g,y]),w=(0,be.u8)(m);for(let E=v,S=0;E<f;E++,S++)i[E]=r[E]^w[S];(0,be.clean)(m)}return i}function F2(t){if((0,Je.bytes)(t),t.length%vr!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function U2(t,e,n){(0,Je.bytes)(t);let r=t.length;const i=r%vr;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,be.isAligned32)(t)||(t=(0,be.copyBytes)(t));const o=(0,be.u32)(t);if(e){let a=vr-i;a||(a=vr),r+=a}const s=ic(r,n);return{b:o,o:(0,be.u32)(s),out:s}}function H2(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const i=t.subarray(0,-r);for(let o=0;o<r;o++)if(t[n-o-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function $2(t){const e=new Uint8Array(16),n=(0,be.u32)(e);e.set(t);const r=vr-t.length;for(let i=vr-r;i<vr;i++)e[i]=r;return n}function P3(t,e,n,r,i){const o=i==null?0:i.length,s=t.create(n,r.length+o);i&&s.update(i),s.update(r);const a=new Uint8Array(16),c=(0,be.createView)(a);i&&(0,be.setBigUint64)(c,0,BigInt(8*o),e),(0,be.setBigUint64)(c,8,BigInt(8*r.length),e),s.update(a);const l=s.digest();return(0,be.clean)(a),l}Ht.ctr=(0,be.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e){function n(r,i){if((0,Je.bytes)(r),i!==void 0&&((0,Je.bytes)(i),!(0,be.isAligned32)(i)))throw new Error("unaligned destination");const o=li(t),s=(0,be.copyBytes)(e),a=[o,s];(0,be.isAligned32)(r)||a.push(r=(0,be.copyBytes)(r));const c=R3(o,s,r,i);return(0,be.clean)(...a),c}return(0,Je.bytes)(t),(0,Je.bytes)(e,vr),{encrypt:(r,i)=>n(r,i),decrypt:(r,i)=>n(r,i)}})),Ht.ecb=(0,be.wrapCipher)({blockSize:16},(function(t,e={}){(0,Je.bytes)(t);const n=!e.disablePadding;return{encrypt(r,i){const{b:o,o:s,out:a}=U2(r,n,i),c=li(t);let l=0;for(;l+4<=o.length;){const{s0:u,s1:f,s2:d,s3:h}=Jn(c,o[l+0],o[l+1],o[l+2],o[l+3]);s[l++]=u,s[l++]=f,s[l++]=d,s[l++]=h}if(n){const u=$2(r.subarray(4*l)),{s0:f,s1:d,s2:h,s3:p}=Jn(c,u[0],u[1],u[2],u[3]);s[l++]=f,s[l++]=d,s[l++]=h,s[l++]=p}return(0,be.clean)(c),a},decrypt(r,i){F2(r);const o=Gl(t),s=ic(r.length,i),a=[o];(0,be.isAligned32)(r)||a.push(r=(0,be.copyBytes)(r));const c=(0,be.u32)(r),l=(0,be.u32)(s);for(let u=0;u+4<=c.length;){const{s0:f,s1:d,s2:h,s3:p}=zl(o,c[u+0],c[u+1],c[u+2],c[u+3]);l[u++]=f,l[u++]=d,l[u++]=h,l[u++]=p}return(0,be.clean)(...a),H2(s,n)}}})),Ht.cbc=(0,be.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e,n={}){(0,Je.bytes)(t),(0,Je.bytes)(e,16);const r=!n.disablePadding;return{encrypt(i,o){const s=li(t),{b:a,o:c,out:l}=U2(i,r,o);let u=e;const f=[s];(0,be.isAligned32)(u)||f.push(u=(0,be.copyBytes)(u));const d=(0,be.u32)(u);let h=d[0],p=d[1],g=d[2],y=d[3],v=0;for(;v+4<=a.length;)h^=a[v+0],p^=a[v+1],g^=a[v+2],y^=a[v+3],{s0:h,s1:p,s2:g,s3:y}=Jn(s,h,p,g,y),c[v++]=h,c[v++]=p,c[v++]=g,c[v++]=y;if(r){const m=$2(i.subarray(4*v));h^=m[0],p^=m[1],g^=m[2],y^=m[3],{s0:h,s1:p,s2:g,s3:y}=Jn(s,h,p,g,y),c[v++]=h,c[v++]=p,c[v++]=g,c[v++]=y}return(0,be.clean)(...f),l},decrypt(i,o){F2(i);const s=Gl(t);let a=e;const c=[s];(0,be.isAligned32)(a)||c.push(a=(0,be.copyBytes)(a));const l=(0,be.u32)(a),u=ic(i.length,o);(0,be.isAligned32)(i)||c.push(i=(0,be.copyBytes)(i));const f=(0,be.u32)(i),d=(0,be.u32)(u);let h=l[0],p=l[1],g=l[2],y=l[3];for(let v=0;v+4<=f.length;){const m=h,w=p,E=g,S=y;h=f[v+0],p=f[v+1],g=f[v+2],y=f[v+3];const{s0:R,s1:F,s2:$,s3:U}=zl(s,h,p,g,y);d[v++]=R^m,d[v++]=F^w,d[v++]=$^E,d[v++]=U^S}return(0,be.clean)(...c),H2(u,r)}}})),Ht.cfb=(0,be.wrapCipher)({blockSize:16,nonceLength:16},(function(t,e){function n(r,i,o){(0,Je.bytes)(r);const s=r.length;o=ic(s,o);const a=li(t);let c=e;const l=[a];(0,be.isAligned32)(c)||l.push(c=(0,be.copyBytes)(c)),(0,be.isAligned32)(r)||l.push(r=(0,be.copyBytes)(r));const u=(0,be.u32)(r),f=(0,be.u32)(o),d=i?f:u,h=(0,be.u32)(c);let p=h[0],g=h[1],y=h[2],v=h[3];for(let w=0;w+4<=u.length;){const{s0:E,s1:S,s2:R,s3:F}=Jn(a,p,g,y,v);f[w+0]=u[w+0]^E,f[w+1]=u[w+1]^S,f[w+2]=u[w+2]^R,f[w+3]=u[w+3]^F,p=d[w++],g=d[w++],y=d[w++],v=d[w++]}const m=vr*Math.floor(u.length/4);if(m<s){({s0:p,s1:g,s2:y,s3:v}=Jn(a,p,g,y,v));const w=(0,be.u8)(new Uint32Array([p,g,y,v]));for(let E=m,S=0;E<s;E++,S++)o[E]=r[E]^w[S];(0,be.clean)(w)}return(0,be.clean)(...l),o}return(0,Je.bytes)(t),(0,Je.bytes)(e,16),{encrypt:(r,i)=>n(r,!0,i),decrypt:(r,i)=>n(r,!1,i)}})),Ht.gcm=(0,be.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(t,e,n){if((0,Je.bytes)(t),(0,Je.bytes)(e),n!==void 0&&(0,Je.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function i(s,a,c){const l=P3(v1.ghash,!1,s,c,n);for(let u=0;u<a.length;u++)l[u]^=a[u];return l}function o(){const s=li(t),a=Qu.slice(),c=Qu.slice();if(Fa(s,!1,c,c,a),e.length===12)c.set(e);else{const l=Qu.slice(),u=(0,be.createView)(l);(0,be.setBigUint64)(u,8,BigInt(8*e.length),!1);const f=v1.ghash.create(a).update(e).update(l);f.digestInto(c),f.destroy()}return{xk:s,authKey:a,counter:c,tagMask:Fa(s,!1,c,Qu)}}return{encrypt(s){(0,Je.bytes)(s);const{xk:a,authKey:c,counter:l,tagMask:u}=o(),f=new Uint8Array(s.length+r),d=[a,c,l,u];(0,be.isAligned32)(s)||d.push(s=(0,be.copyBytes)(s)),Fa(a,!1,l,s,f);const h=i(c,u,f.subarray(0,f.length-r));return d.push(h),f.set(h,s.length),(0,be.clean)(...d),f},decrypt(s){if((0,Je.bytes)(s),s.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:a,authKey:c,counter:l,tagMask:u}=o(),f=[a,c,u,l];(0,be.isAligned32)(s)||f.push(s=(0,be.copyBytes)(s));const d=s.subarray(0,-16),h=s.subarray(-16),p=i(c,u,d);if(f.push(p),!(0,be.equalBytes)(p,h))throw new Error("aes/gcm: invalid ghash tag");const g=Fa(a,!1,l,d);return(0,be.clean)(...f),g}}}));const Ju=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function N3(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function k3(t,e){if((0,Je.bytes)(e,16),!N3(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,be.u32)(e);let{s0:r,s1:i,s2:o,s3:s}=Jn(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=o,n[3]=s,e}function M3(t,e){if((0,Je.bytes)(e,16),!N3(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,be.u32)(e);let{s0:r,s1:i,s2:o,s3:s}=zl(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=o,n[3]=s,e}Ht.siv=(0,be.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(t,e,n){const r=Ju("AAD",0,68719476736),i=Ju("plaintext",0,2**36),o=Ju("nonce",12,12),s=Ju("ciphertext",16,2**36+16);function a(){const u=li(t),f=new Uint8Array(t.length),d=new Uint8Array(16),h=[u,f];let p=e;(0,be.isAligned32)(p)||h.push(p=(0,be.copyBytes)(p));const g=(0,be.u32)(p);let y=0,v=g[0],m=g[1],w=g[2],E=0;for(const R of[d,f].map(be.u32)){const F=(0,be.u32)(R);for(let $=0;$<F.length;$+=2){const{s0:U,s1:B}=Jn(u,y,v,m,w);F[$+0]=U,F[$+1]=B,y=++E}}const S={authKey:d,encKey:li(f)};return(0,be.clean)(...h),S}function c(u,f,d){const h=P3(v1.polyval,!0,f,d,n);for(let w=0;w<12;w++)h[w]^=e[w];h[15]&=127;const p=(0,be.u32)(h);let g=p[0],y=p[1],v=p[2],m=p[3];return{s0:g,s1:y,s2:v,s3:m}=Jn(u,g,y,v,m),p[0]=g,p[1]=y,p[2]=v,p[3]=m,h}function l(u,f,d){let h=(0,be.copyBytes)(f);h[15]|=128;const p=Fa(u,!0,h,d);return(0,be.clean)(h),p}return(0,Je.bytes)(t,16,24,32),(0,Je.bytes)(e),o(e.length),n!==void 0&&((0,Je.bytes)(n),r(n.length)),{encrypt(u){(0,Je.bytes)(u),i(u.length);const{encKey:f,authKey:d}=a(),h=c(f,d,u),p=[f,d,h];(0,be.isAligned32)(u)||p.push(u=(0,be.copyBytes)(u));const g=new Uint8Array(u.length+16);return g.set(h,u.length),g.set(l(f,h,u)),(0,be.clean)(...p),g},decrypt(u){(0,Je.bytes)(u),s(u.length);const f=u.subarray(-16),{encKey:d,authKey:h}=a(),p=[d,h];(0,be.isAligned32)(u)||p.push(u=(0,be.copyBytes)(u));const g=l(d,f,u.subarray(0,-16)),y=c(d,h,g);if(p.push(y),!(0,be.equalBytes)(f,y))throw(0,be.clean)(...p),new Error("invalid polyval tag");return(0,be.clean)(...p),g}}}));const _d={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=li(t);if(e.length===16)k3(n,e);else{const r=(0,be.u32)(e);let i=r[0],o=r[1];for(let s=0,a=1;s<6;s++)for(let c=2;c<r.length;c+=2,a++){const{s0:l,s1:u,s2:f,s3:d}=Jn(n,i,o,r[c],r[c+1]);i=l,o=u^Ad(a),r[c]=f,r[c+1]=d}r[0]=i,r[1]=o}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=Gl(t),r=e.length/8-1;if(r===1)M3(n,e);else{const i=(0,be.u32)(e);let o=i[0],s=i[1];for(let a=0,c=6*r;a<6;a++)for(let l=2*r;l>=1;l-=2,c--){s^=Ad(c);const{s0:u,s1:f,s2:d,s3:h}=zl(n,o,s,i[l],i[l+1]);o=u,s=f,i[l]=d,i[l+1]=h}i[0]=o,i[1]=s}n.fill(0)}},V2=new Uint8Array(8).fill(166);Ht.aeskw=(0,be.wrapCipher)({blockSize:8},(t=>({encrypt(e){if((0,Je.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,be.concatBytes)(V2,e);return _d.encrypt(t,n),n},decrypt(e){if((0,Je.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,be.copyBytes)(e);if(_d.decrypt(t,n),!(0,be.equalBytes)(n.subarray(0,8),V2))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}})));const K2=2790873510;Ht.aeskwp=(0,be.wrapCipher)({blockSize:8},(t=>({encrypt(e){if((0,Je.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const i=(0,be.u32)(r);return i[0]=K2,i[1]=Ad(e.length),_d.encrypt(t,r),r},decrypt(e){if((0,Je.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,be.copyBytes)(e),r=(0,be.u32)(n);_d.decrypt(t,n);const i=Ad(r[1])>>>0,o=8*Math.ceil(i/8);if(r[0]!==K2||n.length-8!==o)throw new Error("integrity check failed");for(let s=i;s<o;s++)if(n[8+s]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}}))),Ht.unsafe={expandKeyLE:li,expandKeyDecLE:Gl,encrypt:Jn,decrypt:zl,encryptBlock:k3,decryptBlock:M3,ctrCounter:R3,ctr32:Fa},Object.defineProperty(rc,"__esModule",{value:!0}),rc.aes256cbc=rc.aes256gcm=void 0;var D3=Ht;rc.aes256gcm=function(t,e,n){return(0,D3.gcm)(t,e,n)};rc.aes256cbc=function(t,e,n){return(0,D3.cbc)(t,e)};var Cd={},B3={},Ua={};Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.sigma=void 0,Ua.rotl=function(t,e){return t<<e|t>>>32-e},Ua.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=(0,Fr.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,Yi.number)(i),(0,Yi.number)(s),(0,Yi.bool)(o),(0,Yi.bool)(n),(a,c,l,u,f=0)=>{(0,Yi.bytes)(a),(0,Yi.bytes)(c),(0,Yi.bytes)(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),(0,Yi.bytes)(u),(0,Yi.number)(f),f<0||f>=j2)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const h=[];let p,g,y=a.length;if(y===32)h.push(p=(0,Fr.copyBytes)(a)),g=F3;else{if(y!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${y}`);p=new Uint8Array(32),p.set(a),p.set(a,16),g=hk,h.push(p)}U0(c)||h.push(c=(0,Fr.copyBytes)(c));const v=(0,Fr.u32)(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,v,(0,Fr.u32)(c.subarray(0,16)),v),c=c.subarray(16)}const m=16-i;if(m!==c.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const E=new Uint8Array(12);E.set(c,o?0:12-c.length),c=E,h.push(c)}const w=(0,Fr.u32)(c);return(function(E,S,R,F,$,U,B,W){const V=$.length,L=new Uint8Array(ef),I=(0,Fr.u32)(L),x=U0($)&&U0(U),P=x?(0,Fr.u32)($):G2,G=x?(0,Fr.u32)(U):G2;for(let b=0;b<V;B++){if(E(S,R,F,I,B,W),B>=j2)throw new Error("arx: counter overflow");const C=Math.min(ef,V-b);if(x&&C===ef){const T=b/4;if(b%4!=0)throw new Error("arx: invalid block position");for(let N,_=0;_<pk;_++)N=T+_,G[N]=P[N]^I[_];b+=ef}else{for(let T,N=0;N<C;N++)T=b+N,U[T]=$[T]^L[N];b+=C}}})(t,g,v,w,l,u,f,s),(0,Fr.clean)(...h),u}};const Yi=Bn,Fr=kr,L3=t=>Uint8Array.from(t.split("").map((e=>e.charCodeAt(0)))),fk=L3("expand 16-byte k"),dk=L3("expand 32-byte k"),hk=(0,Fr.u32)(fk),F3=(0,Fr.u32)(dk);function U0(t){return t.byteOffset%4==0}Ua.sigma=F3.slice();const ef=64,pk=16,j2=2**32-1,G2=new Uint32Array;var wl={};Object.defineProperty(wl,"__esModule",{value:!0}),wl.poly1305=void 0,wl.wrapConstructorWithKey=U3;const tf=Bn,tl=kr,En=(t,e)=>255&t[e++]|(255&t[e++])<<8;class gk{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,tl.toBytes)(e),(0,tf.bytes)(e,32);const n=En(e,0),r=En(e,2),i=En(e,4),o=En(e,6),s=En(e,8),a=En(e,10),c=En(e,12),l=En(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|o<<9),this.r[4]=255&(o>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=En(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:o,r:s}=this,a=s[0],c=s[1],l=s[2],u=s[3],f=s[4],d=s[5],h=s[6],p=s[7],g=s[8],y=s[9],v=En(e,n+0),m=En(e,n+2),w=En(e,n+4),E=En(e,n+6),S=En(e,n+8),R=En(e,n+10),F=En(e,n+12),$=En(e,n+14);let U=o[0]+(8191&v),B=o[1]+(8191&(v>>>13|m<<3)),W=o[2]+(8191&(m>>>10|w<<6)),V=o[3]+(8191&(w>>>7|E<<9)),L=o[4]+(8191&(E>>>4|S<<12)),I=o[5]+(S>>>1&8191),x=o[6]+(8191&(S>>>14|R<<2)),P=o[7]+(8191&(R>>>11|F<<5)),G=o[8]+(8191&(F>>>8|$<<8)),b=o[9]+($>>>5|i),C=0,T=C+U*a+B*(5*y)+W*(5*g)+V*(5*p)+L*(5*h);C=T>>>13,T&=8191,T+=I*(5*d)+x*(5*f)+P*(5*u)+G*(5*l)+b*(5*c),C+=T>>>13,T&=8191;let N=C+U*c+B*a+W*(5*y)+V*(5*g)+L*(5*p);C=N>>>13,N&=8191,N+=I*(5*h)+x*(5*d)+P*(5*f)+G*(5*u)+b*(5*l),C+=N>>>13,N&=8191;let _=C+U*l+B*c+W*a+V*(5*y)+L*(5*g);C=_>>>13,_&=8191,_+=I*(5*p)+x*(5*h)+P*(5*d)+G*(5*f)+b*(5*u),C+=_>>>13,_&=8191;let A=C+U*u+B*l+W*c+V*a+L*(5*y);C=A>>>13,A&=8191,A+=I*(5*g)+x*(5*p)+P*(5*h)+G*(5*d)+b*(5*f),C+=A>>>13,A&=8191;let O=C+U*f+B*u+W*l+V*c+L*a;C=O>>>13,O&=8191,O+=I*(5*y)+x*(5*g)+P*(5*p)+G*(5*h)+b*(5*d),C+=O>>>13,O&=8191;let M=C+U*d+B*f+W*u+V*l+L*c;C=M>>>13,M&=8191,M+=I*a+x*(5*y)+P*(5*g)+G*(5*p)+b*(5*h),C+=M>>>13,M&=8191;let H=C+U*h+B*d+W*f+V*u+L*l;C=H>>>13,H&=8191,H+=I*c+x*a+P*(5*y)+G*(5*g)+b*(5*p),C+=H>>>13,H&=8191;let k=C+U*p+B*h+W*d+V*f+L*u;C=k>>>13,k&=8191,k+=I*l+x*c+P*a+G*(5*y)+b*(5*g),C+=k>>>13,k&=8191;let j=C+U*g+B*p+W*h+V*d+L*f;C=j>>>13,j&=8191,j+=I*u+x*l+P*c+G*a+b*(5*y),C+=j>>>13,j&=8191;let X=C+U*y+B*g+W*p+V*h+L*d;C=X>>>13,X&=8191,X+=I*f+x*u+P*l+G*c+b*a,C+=X>>>13,X&=8191,C=(C<<2)+C|0,C=C+T|0,T=8191&C,C>>>=13,N+=C,o[0]=T,o[1]=N,o[2]=_,o[3]=A,o[4]=O,o[5]=M,o[6]=H,o[7]=k,o[8]=j,o[9]=X}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let o=(1^i)-1;for(let a=0;a<10;a++)r[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+n[0];e[0]=65535&s;for(let a=1;a<8;a++)s=(e[a]+n[a]|0)+(s>>>16)|0,e[a]=65535&s;(0,tl.clean)(r)}update(e){(0,tf.exists)(this);const{buffer:n,blockLen:r}=this,i=(e=(0,tl.toBytes)(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=i-o;o+=r)this.process(e,o)}return this}destroy(){(0,tl.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,tf.exists)(this),(0,tf.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=r[s]>>>0,e[o++]=r[s]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function U3(t){const e=(r,i)=>t(i).update((0,tl.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}wl.poly1305=U3((t=>new gk(t))),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=s;const e=Ua,n=Bn,r=wl,i=kr;function o(f,d,h,p,g,y=20){let v=f[0],m=f[1],w=f[2],E=f[3],S=d[0],R=d[1],F=d[2],$=d[3],U=d[4],B=d[5],W=d[6],V=d[7],L=g,I=h[0],x=h[1],P=h[2],G=v,b=m,C=w,T=E,N=S,_=R,A=F,O=$,M=U,H=B,k=W,j=V,X=L,ee=I,ae=x,D=P;for(let Z=0;Z<y;Z+=2)G=G+N|0,X=(0,e.rotl)(X^G,16),M=M+X|0,N=(0,e.rotl)(N^M,12),G=G+N|0,X=(0,e.rotl)(X^G,8),M=M+X|0,N=(0,e.rotl)(N^M,7),b=b+_|0,ee=(0,e.rotl)(ee^b,16),H=H+ee|0,_=(0,e.rotl)(_^H,12),b=b+_|0,ee=(0,e.rotl)(ee^b,8),H=H+ee|0,_=(0,e.rotl)(_^H,7),C=C+A|0,ae=(0,e.rotl)(ae^C,16),k=k+ae|0,A=(0,e.rotl)(A^k,12),C=C+A|0,ae=(0,e.rotl)(ae^C,8),k=k+ae|0,A=(0,e.rotl)(A^k,7),T=T+O|0,D=(0,e.rotl)(D^T,16),j=j+D|0,O=(0,e.rotl)(O^j,12),T=T+O|0,D=(0,e.rotl)(D^T,8),j=j+D|0,O=(0,e.rotl)(O^j,7),G=G+_|0,D=(0,e.rotl)(D^G,16),k=k+D|0,_=(0,e.rotl)(_^k,12),G=G+_|0,D=(0,e.rotl)(D^G,8),k=k+D|0,_=(0,e.rotl)(_^k,7),b=b+A|0,X=(0,e.rotl)(X^b,16),j=j+X|0,A=(0,e.rotl)(A^j,12),b=b+A|0,X=(0,e.rotl)(X^b,8),j=j+X|0,A=(0,e.rotl)(A^j,7),C=C+O|0,ee=(0,e.rotl)(ee^C,16),M=M+ee|0,O=(0,e.rotl)(O^M,12),C=C+O|0,ee=(0,e.rotl)(ee^C,8),M=M+ee|0,O=(0,e.rotl)(O^M,7),T=T+N|0,ae=(0,e.rotl)(ae^T,16),H=H+ae|0,N=(0,e.rotl)(N^H,12),T=T+N|0,ae=(0,e.rotl)(ae^T,8),H=H+ae|0,N=(0,e.rotl)(N^H,7);let K=0;p[K++]=v+G|0,p[K++]=m+b|0,p[K++]=w+C|0,p[K++]=E+T|0,p[K++]=S+N|0,p[K++]=R+_|0,p[K++]=F+A|0,p[K++]=$+O|0,p[K++]=U+M|0,p[K++]=B+H|0,p[K++]=W+k|0,p[K++]=V+j|0,p[K++]=L+X|0,p[K++]=I+ee|0,p[K++]=x+ae|0,p[K++]=P+D|0}function s(f,d,h,p){let g=f[0],y=f[1],v=f[2],m=f[3],w=d[0],E=d[1],S=d[2],R=d[3],F=d[4],$=d[5],U=d[6],B=d[7],W=h[0],V=h[1],L=h[2],I=h[3];for(let P=0;P<20;P+=2)g=g+w|0,W=(0,e.rotl)(W^g,16),F=F+W|0,w=(0,e.rotl)(w^F,12),g=g+w|0,W=(0,e.rotl)(W^g,8),F=F+W|0,w=(0,e.rotl)(w^F,7),y=y+E|0,V=(0,e.rotl)(V^y,16),$=$+V|0,E=(0,e.rotl)(E^$,12),y=y+E|0,V=(0,e.rotl)(V^y,8),$=$+V|0,E=(0,e.rotl)(E^$,7),v=v+S|0,L=(0,e.rotl)(L^v,16),U=U+L|0,S=(0,e.rotl)(S^U,12),v=v+S|0,L=(0,e.rotl)(L^v,8),U=U+L|0,S=(0,e.rotl)(S^U,7),m=m+R|0,I=(0,e.rotl)(I^m,16),B=B+I|0,R=(0,e.rotl)(R^B,12),m=m+R|0,I=(0,e.rotl)(I^m,8),B=B+I|0,R=(0,e.rotl)(R^B,7),g=g+E|0,I=(0,e.rotl)(I^g,16),U=U+I|0,E=(0,e.rotl)(E^U,12),g=g+E|0,I=(0,e.rotl)(I^g,8),U=U+I|0,E=(0,e.rotl)(E^U,7),y=y+S|0,W=(0,e.rotl)(W^y,16),B=B+W|0,S=(0,e.rotl)(S^B,12),y=y+S|0,W=(0,e.rotl)(W^y,8),B=B+W|0,S=(0,e.rotl)(S^B,7),v=v+R|0,V=(0,e.rotl)(V^v,16),F=F+V|0,R=(0,e.rotl)(R^F,12),v=v+R|0,V=(0,e.rotl)(V^v,8),F=F+V|0,R=(0,e.rotl)(R^F,7),m=m+w|0,L=(0,e.rotl)(L^m,16),$=$+L|0,w=(0,e.rotl)(w^$,12),m=m+w|0,L=(0,e.rotl)(L^m,8),$=$+L|0,w=(0,e.rotl)(w^$,7);let x=0;p[x++]=g,p[x++]=y,p[x++]=v,p[x++]=m,p[x++]=W,p[x++]=V,p[x++]=L,p[x++]=I}t.chacha20orig=(0,e.createCipher)(o,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(o,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(o,{counterRight:!1,counterLength:8,extendNonceFn:s,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(o,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(o,{counterRight:!1,counterLength:4,rounds:12});const a=new Uint8Array(16),c=(f,d)=>{f.update(d);const h=d.length%16;h&&f.update(a.subarray(h))},l=new Uint8Array(32);function u(f,d,h,p,g){const y=f(d,h,l),v=r.poly1305.create(y);g&&c(v,g),c(v,p);const m=new Uint8Array(16),w=(0,i.createView)(m);(0,i.setBigUint64)(w,0,BigInt(g?g.length:0),!0),(0,i.setBigUint64)(w,8,BigInt(p.length),!0),v.update(m);const E=v.digest();return(0,i.clean)(y,m),E}t._poly1305_aead=f=>(d,h,p)=>((0,n.bytes)(d,32),(0,n.bytes)(h),{encrypt(y,v){const m=y.length,w=m+16;v?(0,n.bytes)(v,w):v=new Uint8Array(w),f(d,h,y,v,1);const E=u(f,d,h,v.subarray(0,-16),p);return v.set(E,m),(0,i.clean)(E),v},decrypt(y,v){const m=y.length,w=m-16;if(m<16)throw new Error("encrypted data must be at least 16 bytes");v?(0,n.bytes)(v,w):v=new Uint8Array(w);const E=y.subarray(0,-16),S=y.subarray(-16),R=u(f,d,h,E,p);if(!(0,i.equalBytes)(S,R))throw new Error("invalid tag");return f(d,h,E,v,1),(0,i.clean)(R),v}}),t.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))})(B3),Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.xchacha20=void 0;var xa,z2,Vc,vk=B3;Cd.xchacha20=function(t,e,n){return(0,vk.xchacha20poly1305)(t,e,n)},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=kr,n=qg,r=rc,i=Cd,o=Kl,s=dn;t.symEncrypt=function(u,f,d){return a(c,u,f,d)};function a(u,f,d,h){var p=(0,o.symmetricAlgorithm)();if(p==="aes-256-gcm")return u(r.aes256gcm,f,d,(0,o.symmetricNonceLength)(),s.AEAD_TAG_LENGTH,h);if(p==="xchacha20")return u(i.xchacha20,f,d,s.XCHACHA20_NONCE_LENGTH,s.AEAD_TAG_LENGTH,h);if(p==="aes-256-cbc")return u(r.aes256cbc,f,d,16,0);throw new Error("Not implemented")}function c(u,f,d,h,p,g){var y=(0,n.randomBytes)(h),v=u(f,y,g).encrypt(d);if(p===0)return(0,e.concatBytes)(y,v);var m=v.length-p,w=v.subarray(0,m),E=v.subarray(m);return(0,e.concatBytes)(y,E,w)}function l(u,f,d,h,p,g){var y=d.subarray(0,h),v=u(f,Uint8Array.from(y),g),m=d.subarray(h);if(p===0)return v.decrypt(m);var w=m.subarray(0,p),E=m.subarray(p);return v.decrypt((0,e.concatBytes)(E,w))}t.symDecrypt=function(u,f,d){return a(l,u,f,d)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt})(B2),xa=Th,z2=zr&&zr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Vc=zr&&zr.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||z2(e,t,n)},Object.defineProperty(xa,"__esModule",{value:!0}),Vc($_,xa),Vc(x3,xa),Vc(p1,xa),Vc(B2,xa);var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.PublicKey=void 0;var W2=kr,nf=Th,yk=(function(){function t(e){this.data=(0,nf.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,nf.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return ye.from((0,nf.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return ye.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,W2.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,i=e.multiply(this,n);return(0,nf.getSharedKey)(r,i)},t.prototype.equals=function(e){return(0,W2.equalBytes)(this.data,e.data)},t})();Wl.PublicKey=yk,Object.defineProperty(wd,"__esModule",{value:!0}),wd.PrivateKey=void 0;var q2=kr,Aa=Th,mk=Wl,wk=(function(){function t(e){if(e===void 0)this.data=(0,Aa.getValidSecret)();else{if(!(0,Aa.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new mk.PublicKey((0,Aa.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,Aa.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return ye.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,q2.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,n);return(0,Aa.getSharedKey)(r,i)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,Aa.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,q2.equalBytes)(this.data,e.data)},t})();wd.PrivateKey=wk,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=wd;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=Wl;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})})(_0),(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(a,c){var l=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),f=l.encapsulate(u,(0,n.isHkdfKeyCompressed)()),d=(0,n.isEphemeralKeyCompressed)()?l.publicKey.compressed:l.publicKey.uncompressed,h=(0,i.symEncrypt)(f,c);return ye.from((0,e.concatBytes)(d,h))},t.decrypt=function(a,c){var l=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),f=new r.PublicKey(c.subarray(0,u)),d=c.subarray(u),h=f.decapsulate(l,(0,n.isHkdfKeyCompressed)());return ye.from((0,i.symDecrypt)(h,d))};var e=kr,n=Kl,r=_0,i=Th,o=Kl;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return o.ECIES_CONFIG}});var s=_0;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return s.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}}),t.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}})(Oa);const H3=ir("KeyExchange:Layer"),$3=ir("SocketService:Layer"),V3=ir("Ecies:Layer"),K3=ir("RemoteCommunication:Layer");H3.color="##95c44e",$3.color="#f638d7",V3.color="#465b9c",K3.color="#47a2be";const ue={KeyExchange:H3,SocketService:$3,Ecies:V3,RemoteCommunication:K3};let Kc,rf=[],H0=[];const Ao=(t,e)=>ge(void 0,void 0,void 0,(function*(){Kc=e,H0.push(t),(function(n){return ge(this,void 0,void 0,(function*(){if(!Kc||!n)return;(function(){const s=H0;H0=rf,rf=s})();const r=Kc.endsWith("/")?`${Kc}evt`:`${Kc}/evt`,i=Object.assign({},n);if(delete i.params,n.params)for(const[s,a]of Object.entries(n.params))i[s]=a;const o=JSON.stringify(i);ue.RemoteCommunication(`[sendBufferedEvents] Sending ${rf.length} analytics events to ${r}`);try{const s=yield u_(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:o}),a=yield s.text();ue.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),rf.length=0}catch{}}))})(t).catch((()=>{}))}));class $0{constructor(e){this.enabled=!0,e?.debug&&ir.enable("Ecies:Layer"),this.ecies=e?.privateKey?Oa.PrivateKey.fromHex(e.privateKey):new Oa.PrivateKey,ue.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),ue.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),ue.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new Oa.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{ue.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=ye.from(e),o=Oa.encrypt(n,i);r=ye.from(o).toString("base64")}catch(i){throw ue.Ecies("[ECIES: encrypt()] error encrypt:",i),ue.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),ue.Ecies("[ECIES: encrypt()] data: ",e),ue.Ecies("[ECIES: encrypt()] otherkey: ",n),i}return r}decrypt(e){let n=e;if(this.enabled)try{ue.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=ye.from(e.toString(),"base64");n=Oa.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw ue.Ecies("[ECIES: decrypt()] error decrypt",r),ue.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),ue.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){ue.Ecies("[ECIES: toString()]",this.getKeyInfo())}}var ms={version:"0.33.1"};const Ec="https://metamask-sdk.api.cx.metamask.io/",bk=["websocket"],xc=6048e5,Ek=3e3,kn={METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_WATCHASSET:"wallet_watchAsset",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},xk=[kn.METAMASK_CONNECTSIGN,kn.METAMASK_CONNECTWITH,kn.METAMASK_OPEN,kn.METAMASK_BATCH,kn.PERSONAL_SIGN,kn.WALLET_REQUESTPERMISSIONS,kn.WALLET_REVOKEPERMISSIONS,kn.WALLET_WATCHASSET,kn.ETH_SENDTRANSACTION,kn.ETH_SIGNTYPEDDATA,kn.ETH_SIGNTYPEDDATA_V3,kn.ETH_SIGNTYPEDDATA_V4,kn.ETH_SIGNTRANSACTION,kn.ETH_SIGN,kn.PERSONAL_EC_RECOVER];function wu(t){return xk.includes(t)}function j3(t){const{context:e}=t;ue.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var On,xe,Sd,ft,Ft,Xt,_a;(_a=On||(On={})).DISCONNECTED="disconnected",_a.WAITING="waiting",_a.TIMEOUT="timeout",_a.LINKED="linked",_a.PAUSED="paused",_a.TERMINATED="terminated",(function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"})(xe||(xe={})),(Sd||(Sd={})).KEY_EXCHANGE="key_exchange",(function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"})(ft||(ft={}));class Ak extends Ah.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:i,logging:o}){super(),this.keysExchanged=!1,this.step=ft.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,i?.privateKey&&n&&(ue.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new $0(Object.assign(Object.assign({},i),{debug:o?.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=o?.keyExchangeLayer===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(Sd.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(ue.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void ue.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&ue.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(xe.KEY_INFO,r.type),r.type===ft.KEY_HANDSHAKE_SYN?(this.checkStep([ft.KEY_HANDSHAKE_NONE,ft.KEY_HANDSHAKE_ACK]),ue.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:ft.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch((i=>{ue.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",i)})),this.setStep(ft.KEY_HANDSHAKE_ACK)):r.type===ft.KEY_HANDSHAKE_SYNACK?(this.checkStep([ft.KEY_HANDSHAKE_SYNACK,ft.KEY_HANDSHAKE_ACK,ft.KEY_HANDSHAKE_NONE]),ue.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:ft.KEY_HANDSHAKE_ACK}).catch((i=>{ue.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",i)})),this.keysExchanged=!0,this.setStep(ft.KEY_HANDSHAKE_ACK),this.emit(xe.KEYS_EXCHANGED)):r.type===ft.KEY_HANDSHAKE_ACK&&(ue.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([ft.KEY_HANDSHAKE_ACK,ft.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(ft.KEY_HANDSHAKE_ACK),this.emit(xe.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new $0(e)}clean(){ue.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(ft.KEY_HANDSHAKE_NONE),this.emit(xe.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state,o=i>=2;r?ue.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(ue.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==ft.KEY_HANDSHAKE_NONE&&this.step!==ft.KEY_HANDSHAKE_SYNACK)||n?(ue.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(ft.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:ft.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch((s=>{ue.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",s)}))):ue.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?ue.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):o?this.communicationLayer.sendMessage({type:ft.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch((s=>{ue.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",s)})):(this.communicationLayer.sendMessage({type:ft.KEY_HANDSHAKE_START}).catch((s=>{ue.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",s)})),this.clean()))}setStep(e){this.step=e,this.emit(xe.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new $0({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){ue.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}}(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(Ft||(Ft={})),(function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"})(Xt||(Xt={}));const Nf=(t,e,n)=>ge(void 0,void 0,void 0,(function*(){var r,i,o,s,a,c;const{remote:l,state:u}=t,{channelId:f,isOriginator:d}=u;if(e==="error_terminated")return ue.SocketService(`handleJoinChannelResults: Channel ${f} terminated`),void t.emit(xe.TERMINATE);if(!n)return void ue.SocketService(`handleJoinChannelResults: No result for channel ${f}`);const{persistence:h,walletKey:p,rejected:g}=n;if(ue.SocketService(`handleJoinChannelResults: Channel ${f} persistence=${h} walletKey=${p} rejected=${g}`),g)return ue.SocketService(`handleJoinChannelResults: Channel ${f} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(xe.REJECTED,{channelId:f}),void t.remote.emitServiceStatusEvent();if(p&&!(!((r=l.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(p),(i=t.state.keyExchange)===null||i===void 0||i.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(xe.AUTHORIZED);const{communicationLayer:y,storageManager:v}=l.state,m=Object.assign(Object.assign({},l.state.channelConfig),{channelId:(o=l.state.channelId)!==null&&o!==void 0?o:"",validUntil:Date.now()+xc,localKey:y?.getKeyInfo().ecies.private,otherKey:p});t.sendMessage({type:ft.KEY_HANDSHAKE_ACK}).catch((w=>{})),(s=t.state.socket)===null||s===void 0||s.emit(Ft.PING,{id:f,clientType:d?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield v?.persistChannelConfig(m),l.emitServiceStatusEvent(),l.setConnectionStatus(On.LINKED)}h&&(t.emit(xe.CHANNEL_PERSISTENCE),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(xe.AUTHORIZED),Ao(Object.assign(Object.assign({id:f??"",event:d?Xt.CONNECTED:Xt.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:ms.version,walletVersion:(c=t.remote.state.walletInfo)===null||c===void 0?void 0:c.version}),u.communicationServerUrl).catch((y=>{})))})),oc=t=>new Promise((e=>{setTimeout(e,t)})),Y2=(t,e,...n)=>ge(void 0,[t,e,...n],void 0,(function*(r,i,o=200){let s;const a=Date.now();let c=!1;for(;!c;){if(c=Date.now()-a>3e5,s=i[r],s.elapsedTime!==void 0)return s;yield oc(o)}throw new Error(`RPC ${r} timed out`)})),m1=t=>ge(void 0,void 0,void 0,(function*(){const{state:e}=t,{socket:n,channelId:r,context:i,isOriginator:o,isReconnecting:s}=e;if(s)return ue.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return ue.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:a}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,ue.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(ue.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield oc(200),n.connected)return ue.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(Ft.PING,{id:r,clientType:o?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(xe.SOCKET_RECONNECT);try{if(yield new Promise(((c,l)=>{n.emit(xe.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:o?"dapp":"wallet"},((u,f)=>ge(void 0,void 0,void 0,(function*(){try{yield Nf(t,u,f),c()}catch(d){l(d)}}))))})),yield oc(100),n.connected)return ue.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(c){ue.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,c)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield oc(200))}return ue.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}}));function G3(t,e){return ge(this,void 0,void 0,(function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),i={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return ue.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,i),e.type===Ft.TERMINATE&&(t.state.manualDisconnect=!0),new Promise(((o,s)=>{var a;(a=t.state.socket)===null||a===void 0||a.emit(xe.MESSAGE,i,((c,l)=>{var u;c&&(ue.SocketService(`[SocketService: encryptAndSendMessage()] error=${c}`),s(c)),ue.SocketService("[encryptAndSendMessage] response",l),o((u=l?.success)!==null&&u!==void 0&&u)}))}))}))}var Ha;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(Ha||(Ha={}));const z3=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map((t=>t.toLowerCase())),_k=[{event:xe.CLIENTS_CONNECTED,handler:function(t,e){return n=>ge(this,void 0,void 0,(function*(){var r,i,o,s,a,c,l,u,f,d,h;const p=(i=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&i!==void 0&&i;if(ue.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${p} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(xe.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(ue.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(c=t.state.keyExchange)===null||c===void 0||c.start({isOriginator:(l=t.state.isOriginator)!==null&&l!==void 0&&l})),t.state.resumed=!1;else if(t.state.clientsPaused)ue.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const g=!p;ue.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${g} -- backward compatibility`),ue.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(f=t.state.keyExchange)===null||f===void 0?void 0:f.areKeysExchanged()} -- force=${g} -- backward compatibility`),(d=t.state.keyExchange)===null||d===void 0||d.start({isOriginator:(h=t.state.isOriginator)!==null&&h!==void 0&&h,force:g})}t.state.clientsConnected=!0,t.state.clientsPaused=!1}))}},{event:xe.CHANNEL_CREATED,handler:function(t,e){return n=>{ue.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(xe.CHANNEL_CREATED,n)}}},{event:xe.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,ue.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?ue.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(xe.CLIENTS_DISCONNECTED,e))}}},{event:xe.CONFIG,handler:function(t,e){return n=>ge(this,void 0,void 0,(function*(){var r,i,o;ue.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:s,walletKey:a}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(ue.SocketService(`Setting wallet key ${a}`),t.remote.state.channelConfig.otherKey=a,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:ft.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:Ft.PING}),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig)),s!==!0||t.remote.state.channelConfig.relayPersistence||(ue.SocketService(`Setting relay persistence ${s}`),t.remote.state.channelConfig.relayPersistence=s,t.remote.state.relayPersistence=!0,t.remote.emit(xe.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(xe.AUTHORIZED),yield(o=t.remote.state.storageManager)===null||o===void 0?void 0:o.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(xe.CHANNEL_PERSISTENCE))}))}},{event:xe.MESSAGE,handler:function(t,e){return n=>{var r,i,o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E;const{ackId:S,message:R,error:F}=n,$=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(ue.SocketService(`[SocketService handleMessage()]  relayPersistence=${$}  context=${t.state.context} on 'message' ${e} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,n),F)throw ue.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${F}`),new Error(F);const U=typeof R=="string";if(!U&&R?.type===ft.KEY_HANDSHAKE_START)return $?void 0:(ue.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,R),void((o=t.state.keyExchange)===null||o===void 0||o.start({isOriginator:(s=t.state.isOriginator)!==null&&s!==void 0&&s,force:!0})));if(!U&&(!((a=R?.type)===null||a===void 0)&&a.startsWith("key_handshake")))return $?void 0:(ue.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,R),void t.emit(Sd.KEY_EXCHANGE,{message:R,context:t.state.context}));if(U&&!(!((c=t.state.keyExchange)===null||c===void 0)&&c.areKeysExchanged())){let V=!1;try{ue.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(l=t.state.keyExchange)===null||l===void 0||l.decryptMessage(R),V=!0}catch(L){ue.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,L)}if(!V)return t.state.isOriginator?(f=t.state.keyExchange)===null||f===void 0||f.start({isOriginator:(d=t.state.isOriginator)!==null&&d!==void 0&&d}):t.sendMessage({type:ft.KEY_HANDSHAKE_START}).catch((L=>{})),void ue.SocketService(`Message ignored because invalid key exchange status. step=${(h=t.state.keyExchange)===null||h===void 0?void 0:h.getKeyInfo().step}`,(p=t.state.keyExchange)===null||p===void 0?void 0:p.getKeyInfo(),R);ue.SocketService("Invalid key exchange status detected --- updating it."),(u=t.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!U&&R?.type)return void t.emit(xe.MESSAGE,R);if(!U)return void t.emit(xe.MESSAGE,R);const B=(g=t.state.keyExchange)===null||g===void 0?void 0:g.decryptMessage(R),W=JSON.parse(B??"{}");if(S&&S?.length>0&&(ue.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${S} channelId=${e}`),(y=t.state.socket)===null||y===void 0||y.emit(xe.MESSAGE_ACK,{ackId:S,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=W?.type===Ft.PAUSE,t.state.isOriginator&&W.data){const V=W.data,L=t.state.rpcMethodTracker[V.id];if(L){const I=Date.now()-L.timestamp;ue.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${V.id} method=${L.method} responseTime=${I}`,W),t.remote.state.analytics&&z3.includes(L.method.toLowerCase())&&Ao(Object.assign(Object.assign({id:(v=t.remote.state.channelId)!==null&&v!==void 0?v:"",event:Xt.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:ms.version},t.remote.state.originatorInfo),{walletVersion:(m=t.remote.state.walletInfo)===null||m===void 0?void 0:m.version,params:{method:L.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch((P=>{})),wu(L.method)&&qt.analytics.track(V.error?V.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:L.method});const x=Object.assign(Object.assign({},L),{result:V.result,error:V.error?{code:(w=V.error)===null||w===void 0?void 0:w.code,message:(E=V.error)===null||E===void 0?void 0:E.message}:void 0,elapsedTime:I});t.state.rpcMethodTracker[V.id]=x,t.emit(xe.RPC_UPDATE,x)}}t.emit(xe.MESSAGE,{message:W})}}},{event:xe.REJECTED,handler:function(t,e){return n=>ge(this,void 0,void 0,(function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(ue.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),Ao(Object.assign(Object.assign({id:e,event:Xt.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:ms.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch((i=>{})),qt.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(xe.REJECTED,{channelId:e}),t.remote.setConnectionStatus(On.DISCONNECTED)):ue.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)}))}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{ue.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(xe.CLIENTS_WAITING,n)}}}],Ck=[{event:xe.KEY_INFO,handler:function(t){return e=>{ue.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(xe.KEY_INFO,e)}}},{event:xe.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;ue.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:i}=t.remote.state;if(i){const s=t.getKeyExchange().getKeyInfo().ecies;i.localKey=s.private,i.otherKey=s.otherPubKey,t.remote.state.channelConfig=i,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(i).catch((a=>{}))}t.emit(xe.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const o={keyInfo:t.getKeyInfo()};t.emit(xe.SERVICE_STATUS,o)}}}];function X2(t,e){ue.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n?.io.on("error",(i=>{ue.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,i)})),n?.io.on("reconnect",(i=>{ue.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,i),m1(t).catch((o=>{}))})),n?.io.on("reconnect_error",(i=>{ue.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,i)})),n?.io.on("reconnect_failed",(()=>{ue.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)}))),n?.on("disconnect",(i=>(ue.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${i}' begin recovery...`),(function(o){return s=>{ue.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${o.state.manualDisconnect}`,s),o.state.manualDisconnect||(o.emit(xe.SOCKET_DISCONNECTED),m1(o).catch((a=>{})))}})(t)(i))))),_k.forEach((({event:i,handler:o})=>{n?.on(`${i}-${e}`,o(t,e))})),Ck.forEach((({event:i,handler:o})=>{r?.on(i,o(t))})),t.state.setupChannelListeners=!0}class Sk extends Ah.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:i,context:o,remote:s,logging:a}=e;this.state.resumed=n,this.state.context=o,this.state.isOriginator=s.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=a?.serviceLayer===!0,this.remote=s,a?.serviceLayer===!0&&ir.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==Ec&&a?.plaintext===!0,ue.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:i}=this.options,o={autoConnect:!1,transports:bk,withCredentials:!0},s=this.state.communicationServerUrl;ue.SocketService(`[SocketService: initSocket()] Socket IO url: ${s}`),this.state.socket=Tf(s,o),(function(c){if(typeof window<"u"&&typeof document<"u"&&(ue.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,c),!c.state.focusListenerAdded)){const l=()=>{ue.SocketService("Document has focus --- reconnecting socket"),m1(c).catch((u=>{}))};window.addEventListener("focus",l),c.state.focusListenerAdded=!0,c.state.removeFocusListener=()=>{window.removeEventListener("focus",l),c.state.focusListenerAdded=!1}}})(this);const a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:i};this.state.keyExchange=new Ak(a)}resetKeys(){return ue.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return ge(this,void 0,void 0,(function*(){return(function(e){return ge(this,void 0,void 0,(function*(){var n,r,i;if(ue.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const o=ts();e.state.channelId=o,X2(e,o),yield new Promise(((a,c)=>{var l;(l=e.state.socket)===null||l===void 0||l.emit(xe.JOIN_CHANNEL,{channelId:o,context:`${e.state.context}createChannel`,clientType:"dapp"},((u,f)=>ge(this,void 0,void 0,(function*(){try{yield Nf(e,u,f),a()}catch(d){c(d)}}))))}));const s=(i=e.state.keyExchange)===null||i===void 0?void 0:i.getKeyInfo();return{channelId:o,pubKey:s?.ecies.public||"",privKey:s?.ecies.private||""}}))})(this)}))}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return(function(i){return ge(this,arguments,void 0,(function*({options:o,instance:s}){const{channelId:a,authorized:c,withKeyExchange:l}=o,{state:u,remote:f}=s,{isOriginator:d=!1,socket:h,keyExchange:p}=u,{channelConfig:g}=f.state;if(h?.connected)throw new Error("socket already connected");if(d&&g?.relayPersistence){const{localKey:y,otherKey:v}=g;y&&v&&p?.setRelayPersistence({localKey:y,otherKey:v})}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:l,isOriginator:d,channelId:a}),h?.connect(),X2(s,a),!d&&c&&(p?.setKeysExchanged(!0),Object.assign(f.state,{ready:!0,authorized:!0})),new Promise((y=>{var v;const m=(v=p?.getKeyInfo())===null||v===void 0?void 0:v.ecies.public;h?.emit(xe.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:d?"dapp":"wallet",publicKey:c&&!d?m:void 0},((w,E)=>ge(this,void 0,void 0,(function*(){yield Nf(s,w,E),y()}))))}))}))})({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(xe.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:ft.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return ge(this,void 0,void 0,(function*(){return(function(n,r){return ge(this,void 0,void 0,(function*(){var i,o,s;if(!n.state.channelId)throw ue.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(ue.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(i=n.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,r),(o=r?.type)===null||o===void 0?void 0:o.startsWith("key_handshake"))return(function(c,l){var u;ue.SocketService(`[SocketService: handleKeyHandshake()] context=${c.state.context}`,l),(u=c.state.socket)===null||u===void 0||u.emit(xe.MESSAGE,{id:c.state.channelId,context:c.state.context,clientType:c.state.isOriginator?"dapp":"wallet",message:l})})(n,r),!0;(function(c,l){var u;if(!(!((u=c.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!c.remote.state.relayPersistence)throw ue.SocketService(`[SocketService: validateKeyExchange()] context=${c.state.context} ERROR keys not exchanged`,l),new Error("Keys not exchanged BBB")})(n,r),(function(c,l){var u;const f=(u=l?.method)!==null&&u!==void 0?u:"",d=l?.id;c.state.isOriginator&&d&&(c.state.rpcMethodTracker[d]={id:d,timestamp:Date.now(),method:f},c.emit(xe.RPC_UPDATE,c.state.rpcMethodTracker[d]))})(n,r);const a=yield G3(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&z3.includes(r.method.toLowerCase())&&Ao({id:(s=n.remote.state.channelId)!==null&&s!==void 0?s:"",event:Xt.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch((c=>{})),n.remote.state.isOriginator&&r.method&&wu(r.method)&&qt.analytics.track("sdk_action_requested",{action:r.method}),(function(c,l){return ge(this,void 0,void 0,(function*(){var u;const f=l?.id,d=(u=l?.method)!==null&&u!==void 0?u:"";if(c.state.isOriginator&&f)try{const h=Y2(f,c.state.rpcMethodTracker,200).then((y=>({type:Ha.RPC_CHECK,result:y}))),p=ge(this,void 0,void 0,(function*(){const y=yield(m=>ge(void 0,[m],void 0,(function*({rpcId:w,instance:E}){for(;E.state.lastRpcId===w||E.state.lastRpcId===void 0;)yield oc(200);return E.state.lastRpcId})))({instance:c,rpcId:f}),v=yield Y2(y,c.state.rpcMethodTracker,200);return{type:Ha.SKIPPED_RPC,result:v}})),g=yield Promise.race([h,p]);if(g.type===Ha.RPC_CHECK){const y=g.result;ue.SocketService(`[SocketService:handleRpcReplies()] id=${l.id} ${d} ( ${y.elapsedTime} ms)`,y.result)}else{if(g.type!==Ha.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${f}`);{const y=Object.assign(Object.assign({},c.state.rpcMethodTracker[f]),{error:new Error("SDK_CONNECTION_ISSUE")});c.emit(xe.RPC_UPDATE,y);const v={data:Object.assign(Object.assign({},y),{jsonrpc:"2.0"}),name:"metamask-provider"};c.emit(xe.MESSAGE,{message:v})}}}catch(h){throw h}}))})(n,r).catch((c=>{})),a}))})(this,e)}))}ping(){return(function(e){return ge(this,void 0,void 0,(function*(){var n,r;ue.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(Ft.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})}))})(this)}pause(){return(function(e){return ge(this,void 0,void 0,(function*(){var n,r;ue.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:Ft.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()}))})(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return(function(e){return ge(this,void 0,void 0,(function*(){const{state:n,remote:r}=e,{socket:i,channelId:o,context:s,keyExchange:a,isOriginator:c}=n,{isOriginator:l}=r.state;if(ue.SocketService(`[SocketService: resume()] channelId=${o} context=${s} connected=${i?.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a?.areKeysExchanged()}`),!o)throw ue.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");i?.connected?(ue.SocketService("[SocketService: resume()] already connected."),i.emit(Ft.PING,{id:o,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a?.areKeysExchanged()||(c?yield e.sendMessage({type:Ft.READY}):a?.start({isOriginator:!1}))):(i?.connect(),ue.SocketService(`[SocketService: resume()] after connecting socket --> connected=${i?.connected}`),i?.emit(xe.JOIN_CHANNEL,{channelId:o,context:`${s}_resume`,clientType:l?"dapp":"wallet"},((u,f)=>ge(this,void 0,void 0,(function*(){try{yield Nf(e,u,f)}catch{}}))))),n.manualDisconnect=!1,n.resumed=!0}))})(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return(function(n,r){var i,o,s,a,c;ue.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r?.terminate&&((o=(i=n.state).removeFocusListener)===null||o===void 0||o.call(i),n.state.channelId=r.channelId,(s=n.state.socket)===null||s===void 0||s.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(c=n.state.socket)===null||c===void 0||c.disconnect()})(this,e)}}var oa,Fn,Z2;function Ik(t){return()=>ge(this,void 0,void 0,(function*(){var e,n,r;const{state:i}=t;if(i.authorized)return;yield ge(this,void 0,void 0,(function*(){for(;!i.walletInfo;)yield oc(500)}));const o="7.3".localeCompare(((e=i.walletInfo)===null||e===void 0?void 0:e.version)||"");if(ue.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=i.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${o}`),o!==1)return;const s=i.platformType===Fn.MobileWeb||i.platformType===Fn.ReactNative||i.platformType===Fn.MetaMaskMobileWebview;ue.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${s} channel=${i.channelId} walletVersion=${(r=i.walletInfo)===null||r===void 0?void 0:r.version}`),s&&(i.authorized=!0,t.emit(xe.AUTHORIZED))}))}function Tk(t){return e=>{const{state:n}=t;ue.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(xe.CHANNEL_CREATED,e)}}function Ok(t,e){return()=>{var n,r,i,o;const{state:s}=t;ue.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${s.channelId} keysExchanged=${(r=(n=s.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),s.analytics&&Ao(Object.assign(Object.assign({id:(i=s.channelId)!==null&&i!==void 0?i:"",event:s.reconnection?Xt.RECONNECT:s.isOriginator?Xt.REQUEST:Xt.REQUEST_MOBILE},s.originatorInfo),{commLayer:e,sdkVersion:s.sdkVersion,walletVersion:(o=s.walletInfo)===null||o===void 0?void 0:o.version,commLayerVersion:ms.version}),s.communicationServerUrl).catch((a=>{})),s.isOriginator&&!s.reconnection&&qt.analytics.track("sdk_connection_established",{transport_type:"websocket"}),s.clientsConnected=!0,s.originatorInfoSent=!1,t.emit(xe.CLIENTS_CONNECTED)}}function Rk(t){return e=>{const{state:n}=t;ue.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(xe.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(On.DISCONNECTED)}}function Pk(t){return e=>{var n;const{state:r}=t;if(ue.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(On.WAITING),t.emit(xe.CLIENTS_WAITING,e),r.originatorConnectStarted){ue.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const i=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,o=setTimeout((()=>{ue.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(On.TIMEOUT),clearTimeout(o)}),i)}}}function Nk(t,e){return n=>{var r,i,o,s,a,c,l,u;const{state:f}=t;if(ue.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${f.context} on commLayer.'keys_exchanged' channel=${f.channelId}`,n),(i=(r=f.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||i===void 0?void 0:i.keysExchanged){const d=Object.assign(Object.assign({},f.channelConfig),{channelId:(o=f.channelId)!==null&&o!==void 0?o:"",validUntil:((s=f.channelConfig)===null||s===void 0?void 0:s.validUntil)||xc,localKey:f.communicationLayer.getKeyInfo().ecies.private,otherKey:f.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=f.storageManager)===null||a===void 0||a.persistChannelConfig(d).catch((h=>{})),t.setConnectionStatus(On.LINKED)}(function(d,h){var p,g,y,v,m,w,E,S;const{state:R}=d;ue.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${R.channelId}`,h);const F=Object.assign(Object.assign({},R.channelConfig),{channelId:(p=R.channelId)!==null&&p!==void 0?p:"",validUntil:(y=(g=R.channelConfig)===null||g===void 0?void 0:g.validUntil)!==null&&y!==void 0?y:0,relayPersistence:R.relayPersistence,localKey:(m=(v=R.communicationLayer)===null||v===void 0?void 0:v.state.keyExchange)===null||m===void 0?void 0:m.getKeyInfo().ecies.private,otherKey:(E=(w=R.communicationLayer)===null||w===void 0?void 0:w.state.keyExchange)===null||E===void 0?void 0:E.getKeyInfo().ecies.otherPubKey,lastActive:h.getTime()});(S=R.storageManager)===null||S===void 0||S.persistChannelConfig(F)})(t,new Date),f.analytics&&f.channelId&&Ao(Object.assign(Object.assign({id:f.channelId,event:n.isOriginator?Xt.CONNECTED:Xt.CONNECTED_MOBILE},f.originatorInfo),{sdkVersion:f.sdkVersion,commLayer:e,commLayerVersion:ms.version,walletVersion:(c=f.walletInfo)===null||c===void 0?void 0:c.version}),f.communicationServerUrl).catch((d=>{})),f.isOriginator=n.isOriginator,n.isOriginator||((l=f.communicationLayer)===null||l===void 0||l.sendMessage({type:Ft.READY}),f.ready=!0,f.paused=!1),n.isOriginator&&!f.originatorInfoSent&&((u=f.communicationLayer)===null||u===void 0||u.sendMessage({type:Ft.ORIGINATOR_INFO,originatorInfo:f.originatorInfo,originator:f.originatorInfo}),f.originatorInfoSent=!0)}}function kk(t){return e=>{let n=e;e.message&&(n=n.message),(function(r,i){const{state:o}=i;if(ue.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${o.context} on 'message' typeof=${typeof r}`,r),i.state.ready=!0,o.isOriginator||r.type!==Ft.ORIGINATOR_INFO)if(o.isOriginator&&r.type===Ft.WALLET_INFO)(function(s,a){const{state:c}=s;c.walletInfo=a.walletInfo,c.paused=!1})(i,r);else{if(o.isOriginator&&r.type===Ft.WALLET_INIT)(function(s,a){return ge(this,void 0,void 0,(function*(){var c,l,u;const{state:f}=s;if(f.isOriginator){const d=a.data||{};if(typeof d=="object"&&"accounts"in d&&"chainId"in d&&"walletKey"in d)try{const{channelConfig:h}=s.state;if(ue.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(h,null,2)),h){const p=d.accounts,g=d.chainId,y=d.walletKey;let v,m=!1;"deeplinkProtocol"in d&&(m=!!d.deeplinkProtocol,s.state.deeplinkProtocolAvailable=m),"walletVersion"in d&&(v=d.walletVersion),yield(c=s.state.storageManager)===null||c===void 0?void 0:c.persistChannelConfig(Object.assign(Object.assign({},h),{otherKey:y,walletVersion:v,deeplinkProtocolAvailable:m,relayPersistence:!0})),yield(l=s.state.storageManager)===null||l===void 0?void 0:l.persistAccounts(p),yield(u=s.state.storageManager)===null||u===void 0?void 0:u.persistChainId(g)}s.emit(xe.WALLET_INIT,{accounts:d.accounts,chainId:d.chainId})}catch{}}}))})(i,r).catch((s=>{ue.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${s}`)}));else if(r.type===Ft.TERMINATE)(function(s){return ge(this,void 0,void 0,(function*(){const{state:a}=s;a.isOriginator&&(yield W3({options:{terminate:!0,sendMessage:!1},instance:s}),s.emit(xe.TERMINATE))}))})(i).catch((s=>{ue.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${s}`)}));else if(r.type===Ft.PAUSE)(function(s){const{state:a}=s;a.paused=!0,s.setConnectionStatus(On.PAUSED)})(i);else if(r.type===Ft.READY&&o.isOriginator)(function(s){const{state:a}=s;s.setConnectionStatus(On.LINKED);const c=a.paused;a.paused=!1,s.emit(xe.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),c&&(a.authorized=!0,s.emit(xe.AUTHORIZED))})(i);else{if(r.type===Ft.OTP&&o.isOriginator)return void(function(s,a){var c;const{state:l}=s;s.emit(xe.OTP,a.otpAnswer),"6.6".localeCompare(((c=l.walletInfo)===null||c===void 0?void 0:c.version)||"")===1&&s.emit(xe.SDK_RPC_CALL,{method:kn.ETH_REQUESTACCOUNTS,params:[]})})(i,r);r.type===Ft.AUTHORIZED&&o.isOriginator&&(function(s){const{state:a}=s;a.authorized=!0,s.emit(xe.AUTHORIZED)})(i)}i.emit(xe.MESSAGE,r)}else(function(s,a){var c;const{state:l}=s;(c=l.communicationLayer)===null||c===void 0||c.sendMessage({type:Ft.WALLET_INFO,walletInfo:l.walletInfo}),l.originatorInfo=a.originatorInfo||a.originator,s.emit(xe.CLIENTS_READY,{isOriginator:l.isOriginator,originatorInfo:l.originatorInfo}),l.paused=!1})(i,r)})(n,t)}}function Mk(t){return()=>{const{state:e}=t;ue.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,j3(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function Dk(t){return()=>{const{state:e}=t;ue.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function Bk(t){return()=>ge(this,void 0,void 0,(function*(){var e,n,r,i,o,s,a;const{state:c}=t;ue.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${c.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(xe.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(xe.AUTHORIZED),t.emit(xe.CLIENTS_READY),t.emit(xe.CHANNEL_PERSISTENCE);try{c.channelConfig=Object.assign(Object.assign({},c.channelConfig),{localKey:(n=c.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=c.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(i=c.channelId)!==null&&i!==void 0?i:"",validUntil:(s=(o=c.channelConfig)===null||o===void 0?void 0:o.validUntil)!==null&&s!==void 0?s:xc,relayPersistence:!0}),yield(a=c.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(c.channelConfig)}catch{}}))}function Q2({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:i=Ec,instance:o}){var s,a,c,l,u,f,d,h,p,g,y;const{state:v}=o;if(ue.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(v,null,2)),t!==oa.SOCKET)throw new Error("Invalid communication protocol");v.communicationLayer=new Sk({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:v.transports,communicationServerUrl:i,context:v.context,ecies:r,logging:v.logging,remote:o});let m=typeof document<"u"&&document.URL||"",w=typeof document<"u"&&document.title||"";!((s=v.dappMetadata)===null||s===void 0)&&s.url&&(m=v.dappMetadata.url),!((a=v.dappMetadata)===null||a===void 0)&&a.name&&(w=v.dappMetadata.name);const E=(f=(l=(c=v.dappMetadata)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:(u=v.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&f!==void 0?f:"N/A",S=typeof window<"u"&&window.location!==void 0&&(d=window.location.hostname)!==null&&d!==void 0?d:E,R={url:m,title:w,source:(h=v.dappMetadata)===null||h===void 0?void 0:h.source,dappId:S,anonId:v.anonId,icon:((p=v.dappMetadata)===null||p===void 0?void 0:p.iconUrl)||((g=v.dappMetadata)===null||g===void 0?void 0:g.base64Icon),platform:v.platformType,apiVersion:ms.version,connector:(y=v.dappMetadata)===null||y===void 0?void 0:y.connector};v.originatorInfo=R;const F={[xe.AUTHORIZED]:Ik(o),[xe.MESSAGE]:kk(o),[xe.CHANNEL_PERSISTENCE]:Bk(o),[xe.CLIENTS_CONNECTED]:Ok(o,t),[xe.KEYS_EXCHANGED]:Nk(o,t),[xe.SOCKET_DISCONNECTED]:Dk(o),[xe.SOCKET_RECONNECT]:Mk(o),[xe.CLIENTS_DISCONNECTED]:Rk(o),[xe.KEY_INFO]:()=>{},[xe.CHANNEL_CREATED]:Tk(o),[xe.CLIENTS_WAITING]:Pk(o),[xe.RPC_UPDATE]:$=>{o.emit(xe.RPC_UPDATE,$)}};for(const[$,U]of Object.entries(F))try{v.communicationLayer.on($,U)}catch{}}function W3(t){return ge(this,arguments,void 0,(function*({options:e,instance:n}){const{state:r}=n;return ue.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise(((i,o)=>{var s,a,c,l,u,f;e?.terminate?(n.state.ready&&Ao({id:(s=n.state.channelId)!==null&&s!==void 0?s:"",event:Xt.TERMINATED},n.state.communicationServerUrl).catch((d=>{})),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((c=r.channelId)!==null&&c!==void 0?c:""),n.state.terminated=!0,e.sendMessage?!((l=r.communicationLayer)===null||l===void 0)&&l.getKeyInfo().keysExchanged&&n.state.communicationLayer&&G3(n.state.communicationLayer,{type:Ft.TERMINATE}).then((()=>{i(!0)})).catch((d=>{o(d)})):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=ts(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(On.TERMINATED)):((f=r.communicationLayer)===null||f===void 0||f.disconnect(e),n.setConnectionStatus(On.DISCONNECTED),i(!0))}))}))}(oa||(oa={})).SOCKET="socket",(function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"})(Fn||(Fn={}));class Lk extends Ah.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:Ec,context:"",persist:!1,clientsConnected:!1,sessionDuration:xc,originatorConnectStarted:!1,debug:!1,_connectionStatus:On.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:i,otherPublicKey:o,reconnect:s,walletInfo:a,dappMetadata:c,protocolVersion:l,transports:u,context:f,relayPersistence:d,ecies:h,analytics:p=!1,storage:g,sdkVersion:y,communicationServerUrl:v=Ec,logging:m,autoConnect:w={timeout:Ek}}=e;this.state.anonId=n,this.state.otherPublicKey=o,this.state.dappMetadata=c,this.state.walletInfo=a,this.state.transports=u,this.state.platformType=r,this.state.analytics=p,this.state.protocolVersion=l??1,this.state.isOriginator=!o,this.state.relayPersistence=d,this.state.communicationServerUrl=v,this.state.context=f,this.state.terminated=!1,this.state.sdkVersion=y,this.setMaxListeners(50),this.setConnectionStatus(On.DISCONNECTED),g?.duration&&(this.state.sessionDuration=xc),this.state.storageOptions=g,this.state.autoConnectOptions=w,this.state.debug=m?.remoteLayer===!0,m?.remoteLayer===!0&&ir.enable("RemoteCommunication:Layer"),m?.serviceLayer===!0&&ir.enable("SocketService:Layer"),m?.eciesLayer===!0&&ir.enable("ECIES:Layer"),m?.keyExchangeLayer===!0&&ir.enable("KeyExchange:Layer"),this.state.logging=m,g?.storageManager&&(this.state.storageManager=g.storageManager),ue.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${l} relayPersistence=${d} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${o} reconnect=${s}`),this.state.isOriginator||Q2({communicationLayerPreference:i,otherPublicKey:o,reconnect:s,ecies:h,communicationServerUrl:v,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return ge(this,void 0,void 0,(function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(On.LINKED),yield this.connectToChannel({channelId:n.channelId})))}Q2({communicationLayerPreference:oa.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})}))}originatorSessionConnect(){return ge(this,void 0,void 0,(function*(){return yield(function(e){return ge(this,void 0,void 0,(function*(){var n;const{state:r}=e;if(!r.storageManager)return void ue.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const i=yield r.storageManager.getPersistedChannelConfig({});if(ue.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return ue.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=i?.channelId,r.reconnection=!0,i;ue.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1}))})(this)}))}generateChannelIdConnect(){return ge(this,void 0,void 0,(function*(){return(function(e){return ge(this,void 0,void 0,(function*(){var n,r,i,o,s,a;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(o=(i=e.communicationLayer)===null||i===void 0?void 0:i.getKeyInfo())===null||o===void 0?void 0:o.ecies.private,pubKey:(a=(s=e.communicationLayer)===null||s===void 0?void 0:s.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};ue.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const c=yield e.communicationLayer.createChannel();ue.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c);const l=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=c.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}}))})(this.state)}))}clean(){return j3(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return(function(i){return ge(this,arguments,void 0,(function*({channelId:o,withKeyExchange:s,authorized:a,state:c}){var l,u,f;if(!e1(o))throw ue.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} invalid channel channelId=${o}`),new Error(`Invalid channel ${o}`);if(ue.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} channelId=${o} withKeyExchange=${s}`),(l=c.communicationLayer)===null||l===void 0?void 0:l.isConnected())return void ue.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} already connected - interrupt connection.`);c.channelId=o,yield(u=c.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:o,authorized:a,withKeyExchange:s});const d=Object.assign(Object.assign({},c.channelConfig),{channelId:o,validUntil:Date.now()+c.sessionDuration});c.channelConfig=d,(f=c.storageManager)===null||f===void 0||f.persistChannelConfig(d)}))})({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return ge(this,void 0,void 0,(function*(){const n=this.state.isOriginator&&e.method&&wu(e.method);n&&qt.analytics.track("sdk_action_requested",{action:e.method});try{return yield(function(r,i){return ge(this,void 0,void 0,(function*(){var o,s;const{state:a}=r;ue.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context} paused=${a.paused} ready=${a.ready} relayPersistence=${a.relayPersistence} authorized=${a.authorized} socket=${(o=a.communicationLayer)===null||o===void 0?void 0:o.isConnected()} clientsConnected=${a.clientsConnected} status=${a._connectionStatus}`,i),a.relayPersistence||a.ready&&(!((s=a.communicationLayer)===null||s===void 0)&&s.isConnected())&&a.clientsConnected||(ue.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise((c=>{r.once(xe.CLIENTS_READY,c)})),ue.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  AFTER SKIP / READY -- sending pending message`));try{return yield(function(l,u){return ge(this,void 0,void 0,(function*(){return new Promise((f=>{var d;const{state:h}=l;ue.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context} ready=${h.ready} authorized=${h.authorized} method=${u.method}`),!h.isOriginator||h.authorized||h.relayPersistence?(d=h.communicationLayer)===null||d===void 0||d.sendMessage(u).then((p=>{f(p)})).catch((p=>{f(!1)})):l.once(xe.AUTHORIZED,(()=>{var p;ue.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${h.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(p=h.communicationLayer)===null||p===void 0||p.sendMessage(u).then((g=>{f(g)})).catch((g=>{f(!1)}))}))}))}))})(r,i)}catch(c){throw c}}))})(this,e)}catch(r){throw n&&qt.analytics.track("sdk_action_failed",{action:e.method}),r}}))}testStorage(){return ge(this,void 0,void 0,(function*(){return(function(e){return ge(this,void 0,void 0,(function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();ue.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)}))})(this.state)}))}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return ge(this,void 0,void 0,(function*(){var e;ue.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()}))}testLogger(){ue.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),ue.SocketService(`testLogger() channel=${this.state.channelId}`),ue.Ecies(`testLogger() channel=${this.state.channelId}`),ue.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;ue.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(xe.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(xe.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return ge(this,void 0,void 0,(function*(){var e;ue.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(On.PAUSED)}))}getVersion(){return ms.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return ge(this,void 0,void 0,(function*(){return(function(e){return ge(this,void 0,void 0,(function*(){var n;const{state:r}=e;ue.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(On.LINKED)}))})(this)}))}encrypt(e){var n,r,i;const o=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),s=o?.getOtherPublicKey();if(!s)throw new Error("KeyExchange not completed");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.encrypt(e,s)}decrypt(e){var n,r,i;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return(function(n){return ge(this,arguments,void 0,(function*({channelId:r,state:i}){var o,s,a;if(!e1(r))throw ue.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(i.isOriginator)return void ue.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} isOriginator=${i.isOriginator} channelId=${r}`);const{socket:c}=(s=(o=i.communicationLayer)===null||o===void 0?void 0:o.state)!==null&&s!==void 0?s:{};c?.connected||(ue.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket already connected`),c?.connect()),Ao(Object.assign(Object.assign({id:r,event:Xt.REJECTED},i.originatorInfo),{sdkVersion:i.sdkVersion,commLayerVersion:ms.version,walletVersion:(a=i.walletInfo)===null||a===void 0?void 0:a.version}),i.communicationServerUrl).catch((l=>{})),yield new Promise(((l,u)=>{c?.emit(xe.REJECTED,{channelId:r},((f,d)=>{ue.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket=${c?.id}`,{error:f,response:d}),f?u(f):l(d)}))}))}))})({channelId:e,state:this.state})}disconnect(e){return ge(this,void 0,void 0,(function*(){return W3({options:e,instance:this})}))}}(function(t){t.RENEW="renew",t.LINK="link"})(Z2||(Z2={}));var Fk="ERC721",Uk="ERC1155",Kt={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function Hk(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[Fk,Uk].includes(n.params?.type||"")&&(t.warn(Kt.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(Kt.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(Kt.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),i()}}var q3=4294967295,J2=Math.floor(Math.random()*q3);function $k(){return(t,e,n,r)=>{const i=t.id,o=J2=(J2+1)%q3;t.id=o,e.id=o,n((s=>{t.id=i,e.id=i,s()}))}}var rv=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},rs=(t,e,n)=>(rv(t,e,"read from private field"),n?n.call(t):e.get(t)),si=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},of=(t,e,n,r)=>(rv(t,e,"write to private field"),e.set(t,n),n),Yn=(t,e,n)=>(rv(t,e,"access private method"),n),Xo={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},ew={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function tw(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var Id=(t,e)=>Object.hasOwnProperty.call(t,e);class Vk extends TypeError{constructor(e,n){let r;const{message:i,explanation:o,...s}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(o??c),o!=null&&(this.cause=c),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function mo(t){return typeof t=="object"&&t!=null}function ji(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Kk(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:o}=e,{type:s}=n,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${ji(r)}\``}=t;return{value:r,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...t,message:c}}function*nw(t,e,n,r){(function(i){return mo(i)&&typeof i[Symbol.iterator]=="function"})(t)||(t=[t]);for(const i of t){const o=Kk(i,e,n,r);o&&(yield o)}}function*iv(t,e,n={}){const{path:r=[],branch:i=[t],coerce:o=!1,mask:s=!1}=n,a={path:r,branch:i};if(o&&(t=e.coercer(t,a),s&&e.type!=="type"&&mo(e.schema)&&mo(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,f]of e.entries(t,a)){const d=iv(u,f,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:o,mask:s,message:n.message});for(const h of d)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):o&&(u=h[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):mo(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}class yi{constructor(e){const{type:n,schema:r,validator:i,refiner:o,coercer:s=(c=>c),entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=s,this.validator=i?(c,l)=>nw(i(c,l),l,this,c):()=>[],this.refiner=o?(c,l)=>nw(o(c,l),l,this,c):()=>[]}assert(e,n){return Y3(e,this,n)}create(e,n){return X3(e,this,n)}is(e){return Rc(e,this)}mask(e,n){return(function(r,i,o){const s=ql(r,i,{coerce:!0,mask:!0,message:o});if(s[0])throw s[0];return s[1]})(e,this,n)}validate(e,n={}){return ql(e,this,n)}}function Y3(t,e,n){const r=ql(t,e,{message:n});if(r[0])throw r[0]}function X3(t,e,n){const r=ql(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Rc(t,e){return!ql(t,e)[0]}function ql(t,e,n={}){const r=iv(t,e,n),i=(function(o){const{done:s,value:a}=o.next();return s?void 0:a})(r);return i[0]?[new Vk(i[0],(function*(){for(const s of r)s[0]&&(yield s[0])})),void 0]:[void 0,i[1]]}function ws(t,e){return new yi({type:t,schema:null,validator:e})}function rw(t){let e;return new yi({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function Z3(t){return new yi({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${ji(e)}`})}function Q3(t){const e=ji(t),n=typeof t;return new yi({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${ji(r)}`})}function J3(){return ws("number",(t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${ji(t)}`))}function eC(t){const e=t?Object.keys(t):[],n=ws("never",(()=>!1));return new yi({type:"object",schema:t||null,*entries(r){if(t&&mo(r)){const i=new Set(Object.keys(r));for(const o of e)i.delete(o),yield[o,r[o],t[o]];for(const o of i)yield[o,r[o],n]}},validator:r=>mo(r)||`Expected an object, but received: ${ji(r)}`,coercer:r=>mo(r)?{...r}:r})}function iw(t){return new yi({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function tC(t,e){return new yi({type:"record",schema:null,*entries(n){if(mo(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:n=>mo(n)||`Expected an object, but received: ${ji(n)}`})}function bs(){return ws("string",(t=>typeof t=="string"||`Expected a string, but received: ${ji(t)}`))}function Oh(t){const e=t.map((n=>n.type)).join(" | ");return new yi({type:"union",schema:null,coercer(n){for(const r of t){const[i,o]=r.validate(n,{coerce:!0});if(!i)return o}return n},validator(n,r){const i=[];for(const o of t){const[...s]=iv(n,o,r),[a]=s;if(!a[0])return[];for(const[c]of s)c&&i.push(c)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ji(n)}`,...i]}})}function jk(t){return(function(e){return(function(n){return typeof n=="object"&&n!==null&&"message"in n})(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)})(t).replace(/\.$/u,"")}function Gk(t,e){return n=t,typeof n?.prototype?.constructor?.name=="string"?new t({message:e}):t({message:e});var n}var zk=class extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}};function nC(){throw new Error("setTimeout has not been defined")}function rC(){throw new Error("clearTimeout has not been defined")}var Ho=nC,$o=rC;function iC(t){if(Ho===setTimeout)return setTimeout(t,0);if((Ho===nC||!Ho)&&setTimeout)return Ho=setTimeout,setTimeout(t,0);try{return Ho(t,0)}catch{try{return Ho.call(null,t,0)}catch{return Ho.call(this,t,0)}}}typeof or.setTimeout=="function"&&(Ho=setTimeout),typeof or.clearTimeout=="function"&&($o=clearTimeout);var zs,po=[],sc=!1,kf=-1;function Wk(){sc&&zs&&(sc=!1,zs.length?po=zs.concat(po):kf=-1,po.length&&oC())}function oC(){if(!sc){var t=iC(Wk);sc=!0;for(var e=po.length;e;){for(zs=po,po=[];++kf<e;)zs&&zs[kf].run();kf=-1,e=po.length}zs=null,sc=!1,(function(n){if($o===clearTimeout)return clearTimeout(n);if(($o===rC||!$o)&&clearTimeout)return $o=clearTimeout,clearTimeout(n);try{return $o(n)}catch{try{return $o.call(null,n)}catch{return $o.call(this,n)}}})(t)}}function sC(t,e){this.fun=t,this.array=e}sC.prototype.run=function(){this.fun.apply(null,this.array)};function fa(){}var qk=fa,Yk=fa,Xk=fa,Zk=fa,Qk=fa,Jk=fa,eM=fa,Ra=or.performance||{},tM=Ra.now||Ra.mozNow||Ra.msNow||Ra.oNow||Ra.webkitNow||function(){return new Date().getTime()},nM=new Date,rt={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];po.push(new sC(t,e)),po.length!==1||sc||iC(oC)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:qk,addListener:Yk,once:Xk,off:Zk,removeListener:Qk,removeAllListeners:Jk,emit:eM,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*tM.call(Ra),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-nM)/1e3}},Yl=t=>eC(t);function ow({path:t,branch:e}){const n=t[t.length-1];return Id(e[e.length-2],n)}function Td(t){return new yi({...t,type:`optional ${t.type}`,validator:(e,n)=>!ow(n)||t.validator(e,n),refiner:(e,n)=>!ow(n)||t.refiner(e,n)})}var sf,sw,aw,Od=Oh([Q3(null),ws("boolean",(t=>typeof t=="boolean")),ws("finite number",(t=>Rc(t,J3())&&Number.isFinite(t))),bs(),Z3(rw((()=>Od))),tC(bs(),rw((()=>Od)))]),Xl=(sf=Od,sw=ws("any",(()=>!0)),aw=t=>((function(e,n,r="Assertion failed",i=zk){try{Y3(e,n)}catch(o){throw Gk(i,`${r}: ${jk(o)}.`)}})(t,Od),JSON.parse(JSON.stringify(t,((e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n})))),new yi({...sf,coercer:(t,e)=>Rc(t,sw)?sf.coercer(aw(t,e),e):sf.coercer(t,e)}));function w1(t){try{return(function(e){X3(e,Xl)})(t),!0}catch{return!1}}var bl=Q3("2.0"),Mf=(function(t){return new yi({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})})(Oh([J3(),bs()])),b1=Yl({code:ws("integer",(t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${ji(t)}`)),message:bs(),data:Td(Xl),stack:Td(bs())}),aC=Oh([tC(bs(),Xl),Z3(Xl)]),rM=Yl({id:Mf,jsonrpc:bl,method:bs(),params:Td(aC)}),iM=Yl({jsonrpc:bl,method:bs(),params:Td(aC)});function cw(t){return Rc(t,rM)}function lw(t){return Rc(t,b1)}eC({id:Mf,jsonrpc:bl,result:iw(ws("unknown",(()=>!0))),error:iw(b1)}),Oh([Yl({id:Mf,jsonrpc:bl,result:Xl}),Yl({id:Mf,jsonrpc:bl,error:b1})]);var uw=Xo.internal,oM="Unspecified error message. This is a bug, please report it.",sM={code:uw,message:cC(uw)},aM="Unspecified server error.";function cC(t,e=oM){if((function(n){return Number.isInteger(n)})(t)){const n=t.toString();if(Id(ew,n))return ew[n].message;if((function(r){return r>=-32099&&r<=-32e3})(t))return aM}return e}function fw(t,{fallbackError:e=sM,shouldIncludeStack:n=!0}={}){if(!lw(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=(function(i,o){if(i&&typeof i=="object"&&"serialize"in i&&typeof i.serialize=="function")return i.serialize();if(lw(i))return i;const s=lC(i);return{...o,data:{cause:s}}})(t,e);return n||delete r.stack,r}function lC(t){return Array.isArray(t)?t.map((e=>w1(e)?e:tw(e)?dw(e):null)):tw(t)?dw(t):w1(t)?t:null}function dw(t){return Object.getOwnPropertyNames(t).reduce(((e,n)=>{const r=t[n];return w1(r)&&(e[n]=r),e}),{})}var uC=nl;nl.default=nl,nl.stable=hw,nl.stableStringify=hw;var Rd="[...]",fC="[Circular]",sa=[],Ws=[];function dC(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function nl(t,e,n,r){var i;r===void 0&&(r=dC()),E1(t,"",0,[],void 0,0,r);try{i=Ws.length===0?JSON.stringify(t,e,n):JSON.stringify(t,hC(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sa.length!==0;){var o=sa.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function ac(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),sa.push([r,n,e,i])):Ws.push([e,n,t]):(r[n]=t,sa.push([r,n,e]))}function E1(t,e,n,r,i,o,s){var a;if(o+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void ac(fC,t,e,i);if(s.depthLimit!==void 0&&o>s.depthLimit||s.edgesLimit!==void 0&&n+1>s.edgesLimit)return void ac(Rd,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)E1(t[a],a,a,r,t,o,s);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var l=c[a];E1(t[l],l,a,r,t,o,s)}}r.pop()}}function cM(t,e){return t<e?-1:t>e?1:0}function hw(t,e,n,r){r===void 0&&(r=dC());var i,o=x1(t,"",0,[],void 0,0,r)||t;try{i=Ws.length===0?JSON.stringify(o,e,n):JSON.stringify(o,hC(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sa.length!==0;){var s=sa.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function x1(t,e,n,r,i,o,s){var a;if(o+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void ac(fC,t,e,i);try{if(typeof t.toJSON=="function")return}catch{return}if(s.depthLimit!==void 0&&o>s.depthLimit||s.edgesLimit!==void 0&&n+1>s.edgesLimit)return void ac(Rd,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)x1(t[a],a,a,r,t,o,s);else{var c={},l=Object.keys(t).sort(cM);for(a=0;a<l.length;a++){var u=l[a];x1(t[u],u,a,r,t,o,s),c[u]=t[u]}if(i===void 0)return c;sa.push([i,e,t]),i[e]=c}r.pop()}}function hC(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(Ws.length>0)for(var r=0;r<Ws.length;r++){var i=Ws[r];if(i[1]===e&&i[0]===n){n=i[2],Ws.splice(r,1);break}}return t.call(this,e,n)}}var lM=Ih(uC),no=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,(function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}})(this.data)&&(t.data.cause=lC(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return lM(this.serialize(),uM,2)}};function uM(t,e){if(e!=="[Circular]")return e}var El=t=>fM(Xo.invalidRequest,t);function fM(t,e){const[n,r]=(function(i){if(i){if(typeof i=="string")return[i];if(typeof i=="object"&&!Array.isArray(i)){const{message:o,data:s}=i;if(o&&typeof o!="string")throw new Error("Must specify string message.");return[o??void 0,s]}}return[]})(e);return new no(t,n??cC(t),r)}var pC={};function Vo(){}function ut(){ut.init.call(this)}function gC(t){return t._maxListeners===void 0?ut.defaultMaxListeners:t._maxListeners}function pw(t,e,n,r){var i,o,s;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=new Vo,t._eventsCount=0),s){if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=gC(t))&&i>0&&s.length>i){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,(function(c){typeof console.warn=="function"?console.warn(c):console.log(c)})(a)}}else s=o[e]=n,++t._eventsCount;return t}function gw(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function vw(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function jc(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Vo.prototype=Object.create(null),ut.EventEmitter=ut,ut.usingDomains=!1,ut.prototype.domain=void 0,ut.prototype._events=void 0,ut.prototype._maxListeners=void 0,ut.defaultMaxListeners=10,ut.init=function(){this.domain=null,ut.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Vo,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ut.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},ut.prototype.getMaxListeners=function(){return gC(this)},ut.prototype.emit=function(t){var e,n,r,i,o,s,a,c=t==="error";if(s=this._events)c=c&&s.error==null;else if(!c)return!1;if(a=this.domain,c){if(e=arguments[1],!a){if(e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=s[t]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(f,d,h){if(d)f.call(h);else for(var p=f.length,g=jc(f,p),y=0;y<p;++y)g[y].call(h)})(n,u,this);break;case 2:(function(f,d,h,p){if(d)f.call(h,p);else for(var g=f.length,y=jc(f,g),v=0;v<g;++v)y[v].call(h,p)})(n,u,this,arguments[1]);break;case 3:(function(f,d,h,p,g){if(d)f.call(h,p,g);else for(var y=f.length,v=jc(f,y),m=0;m<y;++m)v[m].call(h,p,g)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(f,d,h,p,g,y){if(d)f.call(h,p,g,y);else for(var v=f.length,m=jc(f,v),w=0;w<v;++w)m[w].call(h,p,g,y)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];(function(f,d,h,p){if(d)f.apply(h,p);else for(var g=f.length,y=jc(f,g),v=0;v<g;++v)y[v].apply(h,p)})(n,u,this,i)}return!0},ut.prototype.addListener=function(t,e){return pw(this,t,e,!1)},ut.prototype.on=ut.prototype.addListener,ut.prototype.prependListener=function(t,e){return pw(this,t,e,!0)},ut.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,gw(this,t,e)),this},ut.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,gw(this,t,e)),this},ut.prototype.removeListener=function(t,e){var n,r,i,o,s;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new Vo:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new Vo,this;delete r[t]}else(function(a,c){for(var l=c,u=l+1,f=a.length;u<f;l+=1,u+=1)a[l]=a[u];a.pop()})(n,i);r.removeListener&&this.emit("removeListener",t,s||e)}return this},ut.prototype.off=function(t,e){return this.removeListener(t,e)},ut.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new Vo,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new Vo:delete n[t]),this;if(arguments.length===0){for(var r,i=Object.keys(n),o=0;o<i.length;++o)(r=i[o])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Vo,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},ut.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:(function(i){for(var o=new Array(i.length),s=0;s<o.length;++s)o[s]=i[s].listener||i[s];return o})(e):[],n},ut.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):vw.call(t,e)},ut.prototype.listenerCount=vw,ut.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var ov=yu(Object.freeze({__proto__:null,EventEmitter:ut,default:ut}));Object.defineProperty(pC,"__esModule",{value:!0});const dM=ov;function yw(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout((()=>{throw r}))}}let hM=class extends dM.EventEmitter{emit(t,...e){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;if(n){let o;if(e.length>0&&([o]=e),o instanceof Error)throw o;const s=new Error("Unhandled error."+(o?` (${o.message})`:""));throw s.context=o,s}const i=r[t];if(i===void 0)return!1;if(typeof i=="function")yw(i,this,e);else{const o=i.length,s=(function(a){const c=a.length,l=new Array(c);for(let u=0;u<c;u+=1)l[u]=a[u];return l})(i);for(let a=0;a<o;a+=1)yw(s[a],this,e)}return!0}};var Pd,Zo,$a,rl,Df,Bf,A1,Lf,_1,V0,mw,Ff,C1,K0,ww,xl,Nd,j0,bw,vC=pC.default=hM,ei=class Uf extends vC{constructor({notificationHandler:e}={}){super(),si(this,rl),si(this,Bf),si(this,Lf),si(this,Pd,!1),si(this,Zo,void 0),si(this,$a,void 0),of(this,Zo,[]),of(this,$a,e)}destroy(){rs(this,Zo).forEach((e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()})),of(this,Zo,[]),of(this,Pd,!0)}push(e){Yn(this,rl,Df).call(this),rs(this,Zo).push(e)}handle(e,n){if(Yn(this,rl,Df).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?Yn(this,Bf,A1).call(this,e,n):Yn(this,Bf,A1).call(this,e):n?Yn(this,Lf,_1).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return Yn(this,rl,Df).call(this),async(e,n,r,i)=>{var o,s;try{const[a,c,l]=await Yn(o=Uf,Ff,C1).call(o,e,n,rs(this,Zo));return c?(await Yn(s=Uf,xl,Nd).call(s,l),i(a)):r((async u=>{var f;try{await Yn(f=Uf,xl,Nd).call(f,l)}catch(d){return u(d)}return u()}))}catch(a){return i(a)}}}async _promiseHandle(e){return new Promise(((n,r)=>{Yn(this,Lf,_1).call(this,e,((i,o)=>{i&&o===void 0?r(i):n(o)})).catch(r)}))}};Pd=new WeakMap,Zo=new WeakMap,$a=new WeakMap,rl=new WeakSet,Df=function(){if(rs(this,Pd))throw new Error("This engine is destroyed and can no longer be used.")},Bf=new WeakSet,A1=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new no(Xo.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter((r=>r!==void 0));return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},Lf=new WeakSet,_1=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const s=new no(Xo.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(s,{id:null,jsonrpc:"2.0",error:s})}if(typeof t.method!="string"){const s=new no(Xo.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return rs(this,$a)&&!cw(t)?e(null):e(s,{id:t.id??null,jsonrpc:"2.0",error:s})}if(rs(this,$a)&&Rc(t,iM)&&!cw(t)){try{await rs(this,$a).call(this,t)}catch(s){return e(s)}return e(null)}let r=null;const i={...t},o={id:i.id,jsonrpc:i.jsonrpc};try{await Yn(n=ei,V0,mw).call(n,i,o,rs(this,Zo))}catch(s){r=s}return r&&(delete o.result,o.error||(o.error=fw(r))),e(r,o)},V0=new WeakSet,mw=async function(t,e,n){var r,i,o;const[s,a,c]=await Yn(r=ei,Ff,C1).call(r,t,e,n);if(Yn(i=ei,j0,bw).call(i,t,e,a),await Yn(o=ei,xl,Nd).call(o,c),s)throw s},Ff=new WeakSet,C1=async function(t,e,n){var r;const i=[];let o=null,s=!1;for(const a of n)if([o,s]=await Yn(r=ei,K0,ww).call(r,t,e,a,i),s)break;return[o,s,i.reverse()]},K0=new WeakSet,ww=async function(t,e,n,r){return new Promise((i=>{const o=a=>{const c=a||e.error;c&&(e.error=fw(c)),i([c,!0])},s=a=>{e.error?o(e.error):(a&&(typeof a!="function"&&o(new no(Xo.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${G0(t)}`,{request:t})),r.push(a)),i([null,!1]))};try{n(t,e,s,o)}catch(a){o(a)}}))},xl=new WeakSet,Nd=async function(t){for(const e of t)await new Promise(((n,r)=>{e((i=>i?r(i):n()))}))},j0=new WeakSet,bw=function(t,e,n){if(!Id(e,"result")&&!Id(e,"error"))throw new no(Xo.internal,`JsonRpcEngine: Response has no error or result for request:
${G0(t)}`,{request:t});if(!n)throw new no(Xo.internal,`JsonRpcEngine: Nothing ended request:
${G0(t)}`,{request:t})},si(ei,V0),si(ei,Ff),si(ei,K0),si(ei,xl),si(ei,j0);var pM=ei;function G0(t){return JSON.stringify(t,null,2)}var yC=Object.freeze(["eth_subscription"]),gM=(t=console)=>[$k(),vM(t),Hk(t)];function vM(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=El({message:"The request 'method' must be a non-empty string.",data:e})),r((i=>{const{error:o}=n;return o&&t.error(`MetaMask - RPC Error: ${o.message}`,o),i()}))}}var Hf=(t,e,n=!0)=>(r,i)=>{r||i.error?e(r||i.error):!n||Array.isArray(i)?t(i):t(i.result)},mC=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),wC=()=>{};async function Ew(t,e){try{const n=await(async function(){return{name:yM(window),icon:await mM(window)}})();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},wC)}catch(n){e.error({message:Kt.errors.sendSiteMetadata(),originalError:n})}}function yM(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function mM(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await wM(r.href))return r.href;return null}async function wM(t){return new Promise(((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}}))}var bC=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Pi=(t,e,n)=>(bC(t,e,"read from private field"),n?n.call(t):e.get(t)),S1=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ro=(t,e,n,r)=>(bC(t,e,"write to private field"),e.set(t,n),n);function xw(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout((()=>{throw r}))}}class bM extends ut{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let s;if(n.length>0&&([s]=n),s instanceof Error)throw s;const a=new Error("Unhandled error."+(s?` (${s.message})`:""));throw a.context=s,a}const o=i[e];if(o===void 0)return!1;if(typeof o=="function")xw(o,this,n);else{const s=o.length,a=(function(c){const l=c.length,u=new Array(l);for(let f=0;f<l;f+=1)u[f]=c[f];return u})(o);for(let c=0;c<s;c+=1)xw(a[c],this,n)}return!0}}var Ko,Ms,EM=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;i--!=0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!=0;){var s=o[i];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n},xM=Ih(EM),EC=class xC extends bM{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),S1(this,Ko,void 0),S1(this,Ms,void 0),this._log=e,this.setMaxListeners(n),this._state={...xC._defaultState},ro(this,Ms,null),ro(this,Ko,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new pM;r.forEach((o=>i.push(o))),this._rpcEngine=i}get chainId(){return Pi(this,Ko)}get selectedAddress(){return Pi(this,Ms)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw El({message:Kt.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw El({message:Kt.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw El({message:Kt.errors.invalidRequestParams(),data:e});const i=r==null?{method:n}:{method:n,params:r};return new Promise(((o,s)=>{this._rpcRequest(i,Hf(o,s))}))}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:i,networkVersion:o}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:o}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(i,o)=>{this._handleAccountsChanged(o.result??[],e.method==="eth_accounts"),n(i,o)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(Kt.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new no(1013,n??Kt.errors.disconnected()),this._log.debug(r)):(r=new no(1011,n??Kt.errors.permanentlyDisconnected()),this._log.error(r),ro(this,Ko,null),this._state.accounts=null,ro(this,Ms,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){mC(e)?(this._handleConnect(e),e!==Pi(this,Ko)&&(ro(this,Ko,e),this._state.initialized&&this.emit("chainChanged",Pi(this,Ko)))):this._log.error(Kt.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const i of e)if(typeof i!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!xM(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,Pi(this,Ms)!==r[0]&&ro(this,Ms,r[0]||null),this._state.initialized)){const i=[...r];this.emit("accountsChanged",i)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};Ko=new WeakMap,Ms=new WeakMap,EC._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var sv,AM=EC,I1={exports:{}},AC=ov.EventEmitter,av=yu(FN);sv=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var _C=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},_M=/%[sdj%]/g;function Rh(t){if(!Zl(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Fi(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(t).replace(_M,(function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}})),s=r[n];n<i;s=r[++n])bu(s)||!da(s)?o+=" "+s:o+=" "+Fi(s);return o}function cv(t,e){if(ki(or.process))return function(){return cv(t,e).apply(this,arguments)};if(rt.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(rt.throwDeprecation)throw new Error(e);rt.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var z0,af={};function CC(t){return ki(z0)&&(z0=rt.env.NODE_DEBUG||""),t=t.toUpperCase(),!af[t]&&(new RegExp("\\b"+t+"\\b","i").test(z0)?af[t]=function(){var e=Rh.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:af[t]=function(){}),af[t]}function Fi(t,e){var n={seen:[],stylize:SM};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Ph(e)?n.showHidden=e:e&&dv(n,e),ki(n.showHidden)&&(n.showHidden=!1),ki(n.depth)&&(n.depth=2),ki(n.colors)&&(n.colors=!1),ki(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=CM),kd(n,t,n.depth)}function CM(t,e){var n=Fi.styles[e];return n?"\x1B["+Fi.colors[n][0]+"m"+t+"\x1B["+Fi.colors[n][1]+"m":t}function SM(t,e){return t}function kd(t,e,n){if(t.customInspect&&e&&Cl(e.inspect)&&e.inspect!==Fi&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return Zl(r)||(r=kd(t,r,n)),r}var i=(function(d,h){if(ki(h))return d.stylize("undefined","undefined");if(Zl(h)){var p="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return d.stylize(p,"string")}if(uv(h))return d.stylize(""+h,"number");if(Ph(h))return d.stylize(""+h,"boolean");if(bu(h))return d.stylize("null","null")})(t,e);if(i)return i;var o=Object.keys(e),s=(function(d){var h={};return d.forEach((function(p,g){h[p]=!0})),h})(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),_l(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return W0(e);if(o.length===0){if(Cl(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(Al(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Md(e))return t.stylize(Date.prototype.toString.call(e),"date");if(_l(e))return W0(e)}var c,l="",u=!1,f=["{","}"];return lv(e)&&(u=!0,f=["[","]"]),Cl(e)&&(l=" [Function"+(e.name?": "+e.name:"")+"]"),Al(e)&&(l=" "+RegExp.prototype.toString.call(e)),Md(e)&&(l=" "+Date.prototype.toUTCString.call(e)),_l(e)&&(l=" "+W0(e)),o.length!==0||u&&e.length!=0?n<0?Al(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=u?(function(d,h,p,g,y){for(var v=[],m=0,w=h.length;m<w;++m)PC(h,String(m))?v.push(q0(d,h,p,g,String(m),!0)):v.push("");return y.forEach((function(E){E.match(/^\d+$/)||v.push(q0(d,h,p,g,E,!0))})),v})(t,e,n,s,o):o.map((function(d){return q0(t,e,n,s,d,u)})),t.seen.pop(),(function(d,h,p){var g=d.reduce((function(y,v){return v.indexOf(`
`),y+v.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return g>60?p[0]+(h===""?"":h+`
 `)+" "+d.join(`,
  `)+" "+p[1]:p[0]+h+" "+d.join(", ")+" "+p[1]})(c,l,f)):f[0]+l+f[1]}function W0(t){return"["+Error.prototype.toString.call(t)+"]"}function q0(t,e,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),PC(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=bu(n)?kd(t,c.value,null):kd(t,c.value,n-1)).indexOf(`
`)>-1&&(a=o?a.split(`
`).map((function(l){return"  "+l})).join(`
`).substr(2):`
`+a.split(`
`).map((function(l){return"   "+l})).join(`
`)):a=t.stylize("[Circular]","special")),ki(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function lv(t){return Array.isArray(t)}function Ph(t){return typeof t=="boolean"}function bu(t){return t===null}function SC(t){return t==null}function uv(t){return typeof t=="number"}function Zl(t){return typeof t=="string"}function IC(t){return typeof t=="symbol"}function ki(t){return t===void 0}function Al(t){return da(t)&&fv(t)==="[object RegExp]"}function da(t){return typeof t=="object"&&t!==null}function Md(t){return da(t)&&fv(t)==="[object Date]"}function _l(t){return da(t)&&(fv(t)==="[object Error]"||t instanceof Error)}function Cl(t){return typeof t=="function"}function TC(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function OC(t){return ye.isBuffer(t)}function fv(t){return Object.prototype.toString.call(t)}function Y0(t){return t<10?"0"+t.toString(10):t.toString(10)}Fi.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Fi.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var IM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function RC(){var t,e;console.log("%s - %s",(t=new Date,e=[Y0(t.getHours()),Y0(t.getMinutes()),Y0(t.getSeconds())].join(":"),[t.getDate(),IM[t.getMonth()],e].join(" ")),Rh.apply(null,arguments))}function dv(t,e){if(!e||!da(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function PC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Ds=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function hv(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(Ds&&t[Ds]){var e;if(typeof(e=t[Ds])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,Ds,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,i=new Promise((function(a,c){n=a,r=c})),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push((function(a,c){a?r(a):n(c)}));try{t.apply(this,o)}catch(a){r(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Ds&&Object.defineProperty(e,Ds,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,_C(t))}function TM(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function NC(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(a){rt.nextTick(s.bind(null,null,a))}),(function(a){rt.nextTick(TM.bind(null,a,s))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,_C(t)),e}hv.custom=Ds;var X0,Aw,OM={inherits:sv,_extend:dv,log:RC,isBuffer:OC,isPrimitive:TC,isFunction:Cl,isError:_l,isDate:Md,isObject:da,isRegExp:Al,isUndefined:ki,isSymbol:IC,isString:Zl,isNumber:uv,isNullOrUndefined:SC,isNull:bu,isBoolean:Ph,isArray:lv,inspect:Fi,deprecate:cv,format:Rh,debuglog:CC,promisify:hv,callbackify:NC},kC=yu(Object.freeze({__proto__:null,_extend:dv,callbackify:NC,debuglog:CC,default:OM,deprecate:cv,format:Rh,inherits:sv,inspect:Fi,isArray:lv,isBoolean:Ph,isBuffer:OC,isDate:Md,isError:_l,isFunction:Cl,isNull:bu,isNullOrUndefined:SC,isNumber:uv,isObject:da,isPrimitive:TC,isRegExp:Al,isString:Zl,isSymbol:IC,isUndefined:ki,log:RC,promisify:hv}));function RM(){if(Aw)return X0;function t(c,l){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);l&&(f=f.filter((function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable}))),u.push.apply(u,f)}return u}function e(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?t(Object(u),!0).forEach((function(f){n(c,f,u[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach((function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(u,f))}))}return c}function n(c,l,u){return(l=i(l))in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u,c}function r(c,l,u){return l&&(function(f,d){for(var h=0;h<d.length;h++){var p=d[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,i(p.key),p)}})(c.prototype,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function i(c){var l=(function(u,f){if(typeof u!="object"||u===null)return u;var d=u[Symbol.toPrimitive];if(d!==void 0){var h=d.call(u,f);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)})(c,"string");return typeof l=="symbol"?l:String(l)}Aw=1;var o=av.Buffer,s=kC.inspect,a=s&&s.custom||"inspect";return X0=(function(){function c(){(function(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return r(c,[{key:"push",value:function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var u=this.head,f=""+u.data;u=u.next;)f+=l+u.data;return f}},{key:"concat",value:function(l){if(this.length===0)return o.alloc(0);for(var u,f,d,h=o.allocUnsafe(l>>>0),p=this.head,g=0;p;)u=p.data,f=h,d=g,o.prototype.copy.call(u,f,d),g+=p.data.length,p=p.next;return h}},{key:"consume",value:function(l,u){var f;return l<this.head.data.length?(f=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):f=l===this.head.data.length?this.shift():u?this._getString(l):this._getBuffer(l),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var u=this.head,f=1,d=u.data;for(l-=d.length;u=u.next;){var h=u.data,p=l>h.length?h.length:l;if(p===h.length?d+=h:d+=h.slice(0,l),(l-=p)===0){p===h.length?(++f,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=h.slice(p));break}++f}return this.length-=f,d}},{key:"_getBuffer",value:function(l){var u=o.allocUnsafe(l),f=this.head,d=1;for(f.data.copy(u),l-=f.data.length;f=f.next;){var h=f.data,p=l>h.length?h.length:l;if(h.copy(u,u.length-l,0,p),(l-=p)===0){p===h.length?(++d,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=h.slice(p));break}++d}return this.length-=d,u}},{key:a,value:function(l,u){return s(this,e(e({},u),{},{depth:0,customInspect:!1}))}}]),c})(),X0}function _w(t,e){T1(t,e),$f(t)}function $f(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function T1(t,e){t.emit("error",e)}var MC={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,rt.nextTick(T1,this,t)):rt.nextTick(T1,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(o){!e&&o?n._writableState?n._writableState.errorEmitted?rt.nextTick($f,n):(n._writableState.errorEmitted=!0,rt.nextTick(_w,n,o)):rt.nextTick(_w,n,o):e?(rt.nextTick($f,n),e(o)):rt.nextTick($f,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}},ha={},DC={};function Dr(t,e,n){n||(n=Error);var r=(function(i){var o,s;function a(c,l,u){return i.call(this,(function(f,d,h){return typeof e=="string"?e:e(f,d,h)})(c,l,u))||this}return s=i,(o=a).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,a})(n);r.prototype.name=n.name,r.prototype.code=t,DC[t]=r}function Cw(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(r){return String(r)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}Dr("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),Dr("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,i,o;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",(function(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c})(t," argument"))o="The ".concat(t," ").concat(r," ").concat(Cw(e,"type"));else{var s=(function(a,c,l){return typeof l!="number"&&(l=0),!(l+c.length>a.length)&&a.indexOf(c,l)!==-1})(t,".")?"property":"argument";o='The "'.concat(t,'" ').concat(s," ").concat(r," ").concat(Cw(e,"type"))}return o+=". Received type ".concat(typeof n)}),TypeError),Dr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Dr("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),Dr("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Dr("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),Dr("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Dr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Dr("ERR_STREAM_WRITE_AFTER_END","write after end"),Dr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Dr("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),Dr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ha.codes=DC;var PM=ha.codes.ERR_INVALID_OPT_VALUE,Z0,Sw,Q0,Iw,BC={getHighWaterMark:function(t,e,n,r){var i=(function(o,s,a){return o.highWaterMark!=null?o.highWaterMark:s?o[a]:null})(e,r,n);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new PM(r?n:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}},NM=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Eu=yu(Object.freeze({__proto__:null,default:NM})),kM=function(t,e){if(J0("noDeprecation"))return t;var n=!1;return function(){if(!n){if(J0("throwDeprecation"))throw new Error(e);J0("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}};function J0(t){try{if(!zr.localStorage)return!1}catch{return!1}var e=zr.localStorage[t];return e!=null&&String(e).toLowerCase()==="true"}function LC(){if(Sw)return Z0;function t(V){var L=this;this.next=null,this.entry=null,this.finish=function(){(function(I,x,P){var G=I.entry;for(I.entry=null;G;){var b=G.callback;x.pendingcb--,b(P),G=G.next}x.corkedRequestsFree.next=I})(L,V)}}var e;Sw=1,Z0=S,S.WritableState=E;var n={deprecate:kM},r=AC,i=av.Buffer,o=(zr!==void 0?zr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,a=MC,c=BC.getHighWaterMark,l=ha.codes,u=l.ERR_INVALID_ARG_TYPE,f=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,h=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,g=l.ERR_STREAM_NULL_VALUES,y=l.ERR_STREAM_WRITE_AFTER_END,v=l.ERR_UNKNOWN_ENCODING,m=a.errorOrDestroy;function w(){}function E(V,L,I){e=e||Ac(),V=V||{},typeof I!="boolean"&&(I=L instanceof e),this.objectMode=!!V.objectMode,I&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=c(this,V,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var x=V.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(P){(function(G,b){var C=G._writableState,T=C.sync,N=C.writecb;if(typeof N!="function")throw new d;if((function(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0})(C),b)(function(A,O,M,H,k){--O.pendingcb,M?(rt.nextTick(k,H),rt.nextTick(W,A,O),A._writableState.errorEmitted=!0,m(A,H)):(k(H),A._writableState.errorEmitted=!0,m(A,H),W(A,O))})(G,C,T,b,N);else{var _=U(C)||G.destroyed;_||C.corked||C.bufferProcessing||!C.bufferedRequest||$(G,C),T?rt.nextTick(F,G,C,_,N):F(G,C,_,N)}})(L,P)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function S(V){var L=this instanceof(e=e||Ac());if(!L&&!s.call(S,this))return new S(V);this._writableState=new E(V,this,L),this.writable=!0,V&&(typeof V.write=="function"&&(this._write=V.write),typeof V.writev=="function"&&(this._writev=V.writev),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.final=="function"&&(this._final=V.final)),r.call(this)}function R(V,L,I,x,P,G,b){L.writelen=x,L.writecb=b,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new p("write")):I?V._writev(P,L.onwrite):V._write(P,G,L.onwrite),L.sync=!1}function F(V,L,I,x){I||(function(P,G){G.length===0&&G.needDrain&&(G.needDrain=!1,P.emit("drain"))})(V,L),L.pendingcb--,x(),W(V,L)}function $(V,L){L.bufferProcessing=!0;var I=L.bufferedRequest;if(V._writev&&I&&I.next){var x=L.bufferedRequestCount,P=new Array(x),G=L.corkedRequestsFree;G.entry=I;for(var b=0,C=!0;I;)P[b]=I,I.isBuf||(C=!1),I=I.next,b+=1;P.allBuffers=C,R(V,L,!0,L.length,P,"",G.finish),L.pendingcb++,L.lastBufferedRequest=null,G.next?(L.corkedRequestsFree=G.next,G.next=null):L.corkedRequestsFree=new t(L),L.bufferedRequestCount=0}else{for(;I;){var T=I.chunk,N=I.encoding,_=I.callback;if(R(V,L,!1,L.objectMode?1:T.length,T,N,_),I=I.next,L.bufferedRequestCount--,L.writing)break}I===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=I,L.bufferProcessing=!1}function U(V){return V.ending&&V.length===0&&V.bufferedRequest===null&&!V.finished&&!V.writing}function B(V,L){V._final((function(I){L.pendingcb--,I&&m(V,I),L.prefinished=!0,V.emit("prefinish"),W(V,L)}))}function W(V,L){var I=U(L);if(I&&((function(P,G){G.prefinished||G.finalCalled||(typeof P._final!="function"||G.destroyed?(G.prefinished=!0,P.emit("prefinish")):(G.pendingcb++,G.finalCalled=!0,rt.nextTick(B,P,G)))})(V,L),L.pendingcb===0&&(L.finished=!0,V.emit("finish"),L.autoDestroy))){var x=V._readableState;(!x||x.autoDestroy&&x.endEmitted)&&V.destroy()}return I}return Eu(S,r),E.prototype.getBuffer=function(){for(var V=this.bufferedRequest,L=[];V;)L.push(V),V=V.next;return L},(function(){try{Object.defineProperty(E.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(V){return!!s.call(this,V)||this===S&&V&&V._writableState instanceof E}})):s=function(V){return V instanceof this},S.prototype.pipe=function(){m(this,new h)},S.prototype.write=function(V,L,I){var x,P=this._writableState,G=!1,b=!P.objectMode&&(x=V,i.isBuffer(x)||x instanceof o);return b&&!i.isBuffer(V)&&(V=(function(C){return i.from(C)})(V)),typeof L=="function"&&(I=L,L=null),b?L="buffer":L||(L=P.defaultEncoding),typeof I!="function"&&(I=w),P.ending?(function(C,T){var N=new y;m(C,N),rt.nextTick(T,N)})(this,I):(b||(function(C,T,N,_){var A;return N===null?A=new g:typeof N=="string"||T.objectMode||(A=new u("chunk",["string","Buffer"],N)),!A||(m(C,A),rt.nextTick(_,A),!1)})(this,P,V,I))&&(P.pendingcb++,G=(function(C,T,N,_,A,O){if(!N){var M=(function(X,ee,ae){return X.objectMode||X.decodeStrings===!1||typeof ee!="string"||(ee=i.from(ee,ae)),ee})(T,_,A);_!==M&&(N=!0,A="buffer",_=M)}var H=T.objectMode?1:_.length;T.length+=H;var k=T.length<T.highWaterMark;if(k||(T.needDrain=!0),T.writing||T.corked){var j=T.lastBufferedRequest;T.lastBufferedRequest={chunk:_,encoding:A,isBuf:N,callback:O,next:null},j?j.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else R(C,T,!1,H,_,A,O);return k})(this,P,b,V,L,I)),G},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,V.writing||V.corked||V.bufferProcessing||!V.bufferedRequest||$(this,V))},S.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=V.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((V+"").toLowerCase())>-1))throw new v(V);return this._writableState.defaultEncoding=V,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(V,L,I){I(new f("_write()"))},S.prototype._writev=null,S.prototype.end=function(V,L,I){var x=this._writableState;return typeof V=="function"?(I=V,V=null,L=null):typeof L=="function"&&(I=L,L=null),V!=null&&this.write(V,L),x.corked&&(x.corked=1,this.uncork()),x.ending||(function(P,G,b){G.ending=!0,W(P,G),b&&(G.finished?rt.nextTick(b):P.once("finish",b)),G.ended=!0,P.writable=!1})(this,x,I),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(V){this._writableState&&(this._writableState.destroyed=V)}}),S.prototype.destroy=a.destroy,S.prototype._undestroy=a.undestroy,S.prototype._destroy=function(V,L){L(V)},Z0}function Ac(){if(Iw)return Q0;Iw=1;var t=Object.keys||function(l){var u=[];for(var f in l)u.push(f);return u};Q0=s;var e=FC(),n=LC();Eu(s,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var o=r[i];s.prototype[o]||(s.prototype[o]=n.prototype[o])}function s(l){if(!(this instanceof s))return new s(l);e.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||rt.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),Q0}var MM=ye.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Vf(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),(function(e){if(e&&!MM(e))throw new Error("Unknown encoding: "+e)})(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=BM;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=LM;break;default:return void(this.write=DM)}this.charBuffer=new ye(6),this.charReceived=0,this.charLength=0}function DM(t){return t.toString(this.encoding)}function BM(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function LM(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}Vf.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(i=e.charCodeAt(r))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},Vf.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},Vf.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var Tw=yu(Object.freeze({__proto__:null,StringDecoder:Vf})),Ow=ha.codes.ERR_STREAM_PREMATURE_CLOSE;function FM(){}var ep,Rw,Pw,Nw,tp,kw,pv=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=(function(p){var g=!1;return function(){if(!g){g=!0;for(var y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];p.apply(this,v)}}})(r||FM);var i=n.readable||n.readable!==!1&&e.readable,o=n.writable||n.writable!==!1&&e.writable,s=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){o=!1,a=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,o||r.call(e)},f=function(p){r.call(e,p)},d=function(){var p;return i&&!l?(e._readableState&&e._readableState.ended||(p=new Ow),r.call(e,p)):o&&!a?(e._writableState&&e._writableState.ended||(p=new Ow),r.call(e,p)):void 0},h=function(){e.req.on("finish",c)};return(function(p){return p.setHeader&&typeof p.abort=="function"})(e)?(e.on("complete",c),e.on("abort",d),e.req?h():e.on("request",h)):o&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",u),e.on("finish",c),n.error!==!1&&e.on("error",f),e.on("close",d),function(){e.removeListener("complete",c),e.removeListener("abort",d),e.removeListener("request",h),e.req&&e.req.removeListener("finish",c),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",c),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",d)}};function UM(){if(Rw)return ep;var t;function e(g,y,v){return(y=(function(m){var w=(function(E,S){if(typeof E!="object"||E===null)return E;var R=E[Symbol.toPrimitive];if(R!==void 0){var F=R.call(E,S);if(typeof F!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(E)})(m,"string");return typeof w=="symbol"?w:String(w)})(y))in g?Object.defineProperty(g,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[y]=v,g}Rw=1;var n=pv,r=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),s=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function u(g,y){return{value:g,done:y}}function f(g){var y=g[r];if(y!==null){var v=g[l].read();v!==null&&(g[a]=null,g[r]=null,g[i]=null,y(u(v,!1)))}}function d(g){rt.nextTick(f,g)}var h=Object.getPrototypeOf((function(){})),p=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var g=this,y=this[o];if(y!==null)return Promise.reject(y);if(this[s])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise((function(E,S){rt.nextTick((function(){g[o]?S(g[o]):E(u(void 0,!0))}))}));var v,m=this[a];if(m)v=new Promise((function(E,S){return function(R,F){E.then((function(){S[s]?R(u(void 0,!0)):S[c](R,F)}),F)}})(m,this));else{var w=this[l].read();if(w!==null)return Promise.resolve(u(w,!1));v=new Promise(this[c])}return this[a]=v,v}},Symbol.asyncIterator,(function(){return this})),e(t,"return",(function(){var g=this;return new Promise((function(y,v){g[l].destroy(null,(function(m){m?v(m):y(u(void 0,!0))}))}))})),t),h);return ep=function(g){var y,v=Object.create(p,(e(y={},l,{value:g,writable:!0}),e(y,r,{value:null,writable:!0}),e(y,i,{value:null,writable:!0}),e(y,o,{value:null,writable:!0}),e(y,s,{value:g._readableState.endEmitted,writable:!0}),e(y,c,{value:function(m,w){var E=v[l].read();E?(v[a]=null,v[r]=null,v[i]=null,m(u(E,!1))):(v[r]=m,v[i]=w)},writable:!0}),y));return v[a]=null,n(g,(function(m){if(m&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=v[i];return w!==null&&(v[a]=null,v[r]=null,v[i]=null,w(m)),void(v[o]=m)}var E=v[r];E!==null&&(v[a]=null,v[r]=null,v[i]=null,E(u(void 0,!0))),v[s]=!0})),g.on("readable",d.bind(null,v)),v},ep}function FC(){if(kw)return tp;var t;kw=1,tp=S,S.ReadableState=E,ov.EventEmitter;var e=function(_,A){return _.listeners(A).length},n=AC,r=av.Buffer,i=(zr!==void 0?zr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,s=kC;o=s&&s.debuglog?s.debuglog("stream"):function(){};var a,c,l,u=RM(),f=MC,d=BC.getHighWaterMark,h=ha.codes,p=h.ERR_INVALID_ARG_TYPE,g=h.ERR_STREAM_PUSH_AFTER_EOF,y=h.ERR_METHOD_NOT_IMPLEMENTED,v=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Eu(S,n);var m=f.errorOrDestroy,w=["error","close","destroy","pause","resume"];function E(_,A,O){t=t||Ac(),_=_||{},typeof O!="boolean"&&(O=A instanceof t),this.objectMode=!!_.objectMode,O&&(this.objectMode=this.objectMode||!!_.readableObjectMode),this.highWaterMark=d(this,_,"readableHighWaterMark",O),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=_.emitClose!==!1,this.autoDestroy=!!_.autoDestroy,this.destroyed=!1,this.defaultEncoding=_.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,_.encoding&&(a||(a=Tw.StringDecoder),this.decoder=new a(_.encoding),this.encoding=_.encoding)}function S(_){if(t=t||Ac(),!(this instanceof S))return new S(_);var A=this instanceof t;this._readableState=new E(_,this,A),this.readable=!0,_&&(typeof _.read=="function"&&(this._read=_.read),typeof _.destroy=="function"&&(this._destroy=_.destroy)),n.call(this)}function R(_,A,O,M,H){o("readableAddChunk",A);var k,j=_._readableState;if(A===null)j.reading=!1,(function(X,ee){if(o("onEofChunk"),!ee.ended){if(ee.decoder){var ae=ee.decoder.end();ae&&ae.length&&(ee.buffer.push(ae),ee.length+=ee.objectMode?1:ae.length)}ee.ended=!0,ee.sync?B(X):(ee.needReadable=!1,ee.emittedReadable||(ee.emittedReadable=!0,W(X)))}})(_,j);else if(H||(k=(function(X,ee){var ae;D=ee,r.isBuffer(D)||D instanceof i||typeof ee=="string"||ee===void 0||X.objectMode||(ae=new p("chunk",["string","Buffer","Uint8Array"],ee));var D;return ae})(j,A)),k)m(_,k);else if(j.objectMode||A&&A.length>0)if(typeof A=="string"||j.objectMode||Object.getPrototypeOf(A)===r.prototype||(A=(function(X){return r.from(X)})(A)),M)j.endEmitted?m(_,new v):F(_,j,A,!0);else if(j.ended)m(_,new g);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!O?(A=j.decoder.write(A),j.objectMode||A.length!==0?F(_,j,A,!1):V(_,j)):F(_,j,A,!1)}else M||(j.reading=!1,V(_,j));return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function F(_,A,O,M){A.flowing&&A.length===0&&!A.sync?(A.awaitDrain=0,_.emit("data",O)):(A.length+=A.objectMode?1:O.length,M?A.buffer.unshift(O):A.buffer.push(O),A.needReadable&&B(_)),V(_,A)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(_){this._readableState&&(this._readableState.destroyed=_)}}),S.prototype.destroy=f.destroy,S.prototype._undestroy=f.undestroy,S.prototype._destroy=function(_,A){A(_)},S.prototype.push=function(_,A){var O,M=this._readableState;return M.objectMode?O=!0:typeof _=="string"&&((A=A||M.defaultEncoding)!==M.encoding&&(_=r.from(_,A),A=""),O=!0),R(this,_,A,!1,O)},S.prototype.unshift=function(_){return R(this,_,null,!0,!1)},S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(_){a||(a=Tw.StringDecoder);var A=new a(_);this._readableState.decoder=A,this._readableState.encoding=this._readableState.decoder.encoding;for(var O=this._readableState.buffer.head,M="";O!==null;)M+=A.write(O.data),O=O.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var $=1073741824;function U(_,A){return _<=0||A.length===0&&A.ended?0:A.objectMode?1:_!=_?A.flowing&&A.length?A.buffer.head.data.length:A.length:(_>A.highWaterMark&&(A.highWaterMark=(function(O){return O>=$?O=$:(O--,O|=O>>>1,O|=O>>>2,O|=O>>>4,O|=O>>>8,O|=O>>>16,O++),O})(_)),_<=A.length?_:A.ended?A.length:(A.needReadable=!0,0))}function B(_){var A=_._readableState;o("emitReadable",A.needReadable,A.emittedReadable),A.needReadable=!1,A.emittedReadable||(o("emitReadable",A.flowing),A.emittedReadable=!0,rt.nextTick(W,_))}function W(_){var A=_._readableState;o("emitReadable_",A.destroyed,A.length,A.ended),A.destroyed||!A.length&&!A.ended||(_.emit("readable"),A.emittedReadable=!1),A.needReadable=!A.flowing&&!A.ended&&A.length<=A.highWaterMark,G(_)}function V(_,A){A.readingMore||(A.readingMore=!0,rt.nextTick(L,_,A))}function L(_,A){for(;!A.reading&&!A.ended&&(A.length<A.highWaterMark||A.flowing&&A.length===0);){var O=A.length;if(o("maybeReadMore read 0"),_.read(0),O===A.length)break}A.readingMore=!1}function I(_){var A=_._readableState;A.readableListening=_.listenerCount("readable")>0,A.resumeScheduled&&!A.paused?A.flowing=!0:_.listenerCount("data")>0&&_.resume()}function x(_){o("readable nexttick read 0"),_.read(0)}function P(_,A){o("resume",A.reading),A.reading||_.read(0),A.resumeScheduled=!1,_.emit("resume"),G(_),A.flowing&&!A.reading&&_.read(0)}function G(_){var A=_._readableState;for(o("flow",A.flowing);A.flowing&&_.read()!==null;);}function b(_,A){return A.length===0?null:(A.objectMode?O=A.buffer.shift():!_||_>=A.length?(O=A.decoder?A.buffer.join(""):A.buffer.length===1?A.buffer.first():A.buffer.concat(A.length),A.buffer.clear()):O=A.buffer.consume(_,A.decoder),O);var O}function C(_){var A=_._readableState;o("endReadable",A.endEmitted),A.endEmitted||(A.ended=!0,rt.nextTick(T,A,_))}function T(_,A){if(o("endReadableNT",_.endEmitted,_.length),!_.endEmitted&&_.length===0&&(_.endEmitted=!0,A.readable=!1,A.emit("end"),_.autoDestroy)){var O=A._writableState;(!O||O.autoDestroy&&O.finished)&&A.destroy()}}function N(_,A){for(var O=0,M=_.length;O<M;O++)if(_[O]===A)return O;return-1}return S.prototype.read=function(_){o("read",_),_=parseInt(_,10);var A=this._readableState,O=_;if(_!==0&&(A.emittedReadable=!1),_===0&&A.needReadable&&((A.highWaterMark!==0?A.length>=A.highWaterMark:A.length>0)||A.ended))return o("read: emitReadable",A.length,A.ended),A.length===0&&A.ended?C(this):B(this),null;if((_=U(_,A))===0&&A.ended)return A.length===0&&C(this),null;var M,H=A.needReadable;return o("need readable",H),(A.length===0||A.length-_<A.highWaterMark)&&o("length less than watermark",H=!0),A.ended||A.reading?o("reading or ended",H=!1):H&&(o("do read"),A.reading=!0,A.sync=!0,A.length===0&&(A.needReadable=!0),this._read(A.highWaterMark),A.sync=!1,A.reading||(_=U(O,A))),(M=_>0?b(_,A):null)===null?(A.needReadable=A.length<=A.highWaterMark,_=0):(A.length-=_,A.awaitDrain=0),A.length===0&&(A.ended||(A.needReadable=!0),O!==_&&A.ended&&C(this)),M!==null&&this.emit("data",M),M},S.prototype._read=function(_){m(this,new y("_read()"))},S.prototype.pipe=function(_,A){var O=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=_;break;case 1:M.pipes=[M.pipes,_];break;default:M.pipes.push(_)}M.pipesCount+=1,o("pipe count=%d opts=%j",M.pipesCount,A);var H=(!A||A.end!==!1)&&_!==rt.stdout&&_!==rt.stderr?j:re;function k(Q,Y){o("onunpipe"),Q===O&&Y&&Y.hasUnpiped===!1&&(Y.hasUnpiped=!0,o("cleanup"),_.removeListener("close",K),_.removeListener("finish",Z),_.removeListener("drain",X),_.removeListener("error",D),_.removeListener("unpipe",k),O.removeListener("end",j),O.removeListener("end",re),O.removeListener("data",ae),ee=!0,!M.awaitDrain||_._writableState&&!_._writableState.needDrain||X())}function j(){o("onend"),_.end()}M.endEmitted?rt.nextTick(H):O.once("end",H),_.on("unpipe",k);var X=(function(Q){return function(){var Y=Q._readableState;o("pipeOnDrain",Y.awaitDrain),Y.awaitDrain&&Y.awaitDrain--,Y.awaitDrain===0&&e(Q,"data")&&(Y.flowing=!0,G(Q))}})(O);_.on("drain",X);var ee=!1;function ae(Q){o("ondata");var Y=_.write(Q);o("dest.write",Y),Y===!1&&((M.pipesCount===1&&M.pipes===_||M.pipesCount>1&&N(M.pipes,_)!==-1)&&!ee&&(o("false write response, pause",M.awaitDrain),M.awaitDrain++),O.pause())}function D(Q){o("onerror",Q),re(),_.removeListener("error",D),e(_,"error")===0&&m(_,Q)}function K(){_.removeListener("finish",Z),re()}function Z(){o("onfinish"),_.removeListener("close",K),re()}function re(){o("unpipe"),O.unpipe(_)}return O.on("data",ae),(function(Q,Y,te){if(typeof Q.prependListener=="function")return Q.prependListener(Y,te);Q._events&&Q._events[Y]?Array.isArray(Q._events[Y])?Q._events[Y].unshift(te):Q._events[Y]=[te,Q._events[Y]]:Q.on(Y,te)})(_,"error",D),_.once("close",K),_.once("finish",Z),_.emit("pipe",O),M.flowing||(o("pipe resume"),O.resume()),_},S.prototype.unpipe=function(_){var A=this._readableState,O={hasUnpiped:!1};if(A.pipesCount===0)return this;if(A.pipesCount===1)return _&&_!==A.pipes||(_||(_=A.pipes),A.pipes=null,A.pipesCount=0,A.flowing=!1,_&&_.emit("unpipe",this,O)),this;if(!_){var M=A.pipes,H=A.pipesCount;A.pipes=null,A.pipesCount=0,A.flowing=!1;for(var k=0;k<H;k++)M[k].emit("unpipe",this,{hasUnpiped:!1});return this}var j=N(A.pipes,_);return j===-1||(A.pipes.splice(j,1),A.pipesCount-=1,A.pipesCount===1&&(A.pipes=A.pipes[0]),_.emit("unpipe",this,O)),this},S.prototype.on=function(_,A){var O=n.prototype.on.call(this,_,A),M=this._readableState;return _==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):_==="readable"&&(M.endEmitted||M.readableListening||(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,o("on readable",M.length,M.reading),M.length?B(this):M.reading||rt.nextTick(x,this))),O},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(_,A){var O=n.prototype.removeListener.call(this,_,A);return _==="readable"&&rt.nextTick(I,this),O},S.prototype.removeAllListeners=function(_){var A=n.prototype.removeAllListeners.apply(this,arguments);return _!=="readable"&&_!==void 0||rt.nextTick(I,this),A},S.prototype.resume=function(){var _=this._readableState;return _.flowing||(o("resume"),_.flowing=!_.readableListening,(function(A,O){O.resumeScheduled||(O.resumeScheduled=!0,rt.nextTick(P,A,O))})(this,_)),_.paused=!1,this},S.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(_){var A=this,O=this._readableState,M=!1;for(var H in _.on("end",(function(){if(o("wrapped end"),O.decoder&&!O.ended){var j=O.decoder.end();j&&j.length&&A.push(j)}A.push(null)})),_.on("data",(function(j){o("wrapped data"),O.decoder&&(j=O.decoder.write(j)),O.objectMode&&j==null||(O.objectMode||j&&j.length)&&(A.push(j)||(M=!0,_.pause()))})),_)this[H]===void 0&&typeof _[H]=="function"&&(this[H]=(function(j){return function(){return _[j].apply(_,arguments)}})(H));for(var k=0;k<w.length;k++)_.on(w[k],this.emit.bind(this,w[k]));return this._read=function(j){o("wrapped _read",j),M&&(M=!1,_.resume())},this},typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=UM()),c(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(_){this._readableState&&(this._readableState.flowing=_)}}),S._fromList=b,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(S.from=function(_,A){return l===void 0&&(l=Nw?Pw:(Nw=1,Pw=function(){throw new Error("Readable.from is not available in the browser")})),l(S,_,A)}),tp}var UC=io,Nh=ha.codes,HM=Nh.ERR_METHOD_NOT_IMPLEMENTED,$M=Nh.ERR_MULTIPLE_CALLBACK,VM=Nh.ERR_TRANSFORM_ALREADY_TRANSFORMING,KM=Nh.ERR_TRANSFORM_WITH_LENGTH_0,Kf=Ac();function jM(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new $M);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function io(t){if(!(this instanceof io))return new io(t);Kf.call(this,t),this._transformState={afterTransform:jM.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",GM)}function GM(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?Mw(this,null,null):this._flush((function(e,n){Mw(t,e,n)}))}function Mw(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new KM;if(t._transformState.transforming)throw new VM;return t.push(null)}Eu(io,Kf),io.prototype.push=function(t,e){return this._transformState.needTransform=!1,Kf.prototype.push.call(this,t,e)},io.prototype._transform=function(t,e,n){n(new HM("_transform()"))},io.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},io.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},io.prototype._destroy=function(t,e){Kf.prototype._destroy.call(this,t,(function(n){e(n)}))};var np,zM=Ql,HC=UC;function Ql(t){if(!(this instanceof Ql))return new Ql(t);HC.call(this,t)}Eu(Ql,HC),Ql.prototype._transform=function(t,e,n){n(null,t)};var $C=ha.codes,WM=$C.ERR_MISSING_ARGS,qM=$C.ERR_STREAM_DESTROYED;function Dw(t){if(t)throw t}function Bw(t){t()}function YM(t,e){return t.pipe(e)}var XM=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=(function(s){return s.length?typeof s[s.length-1]!="function"?Dw:s.pop():Dw})(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new WM("streams");var o=e.map((function(s,a){var c=a<e.length-1;return(function(l,u,f,d){d=(function(g){var y=!1;return function(){y||(y=!0,g.apply(void 0,arguments))}})(d);var h=!1;l.on("close",(function(){h=!0})),np===void 0&&(np=pv),np(l,{readable:u,writable:f},(function(g){if(g)return d(g);h=!0,d()}));var p=!1;return function(g){if(!h&&!p)return p=!0,(function(y){return y.setHeader&&typeof y.abort=="function"})(l)?l.abort():typeof l.destroy=="function"?l.destroy():void d(g||new qM("pipe"))}})(s,c,a>0,(function(l){r||(r=l),l&&o.forEach(Bw),c||(o.forEach(Bw),i(r))}))}));return e.reduce(YM)};(function(t,e){(e=I1.exports=FC()).Stream=e,e.Readable=e,e.Writable=LC(),e.Duplex=Ac(),e.Transform=UC,e.PassThrough=zM,e.finished=pv,e.pipeline=XM})(0,I1.exports);var _c=I1.exports;function ZM(t={}){const e={},n=new _c.Duplex({objectMode:!0,read:()=>{},write:function(o,s,a){let c=null;try{o.id?(function(l){const{id:u}=l;if(u===null)return;const f=e[u];if(!f)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete e[u],Object.assign(f.res,l),setTimeout(f.end)})(o):(function(l){t?.retryOnMessage&&l.method===t.retryOnMessage&&Object.values(e).forEach((({req:u,retryCount:f=0})=>{if(!u.id)return;if(f>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);const d=e[u.id];d&&(d.retryCount=f+1),i(u)})),r.emit("notification",l)})(o)}catch(l){c=l}a(c)}}),r=new vC;return{events:r,middleware:(o,s,a,c)=>{e[o.id]={req:o,res:s,next:a,end:c},i(o)},stream:n};function i(o){n.push(o)}}var Dd={},O1={exports:{}},QM=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(i){r[i]=e[i]})),r;function r(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var s=e.apply(this,i),a=i[i.length-1];return typeof s=="function"&&s!==a&&Object.keys(a).forEach((function(c){s[c]=a[c]})),s}},Lw=QM;function cf(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Fw(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}O1.exports=Lw(cf),O1.exports.strict=Lw(Fw),cf.proto=cf((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return cf(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Fw(this)},configurable:!0})}));var JM=O1.exports,Bd={};Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.Substream=void 0;const e9=_c;class t9 extends e9.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}Bd.Substream=t9;var n9=zr&&zr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.ObjectMultiplex=void 0;const rp=_c,r9=n9(JM),i9=Bd,Uw=Symbol("IGNORE_SUBSTREAM");let o9=class extends rp.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new i9.Substream({parent:this,name:t});return this._substreams[t]=e,(function(n,r){const i=(0,r9.default)(r);(0,rp.finished)(n,{readable:!1},i),(0,rp.finished)(n,{writable:!1},i)})(this,(n=>e.destroy(n||void 0))),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=Uw}_read(){}_write(t,e,n){const{name:r,data:i}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const o=this._substreams[r];return o?(o!==Uw&&o.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};Dd.ObjectMultiplex=o9;var s9=Ih(Dd.ObjectMultiplex);const xi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";xi.writable=t=>xi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",xi.readable=t=>xi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",xi.duplex=t=>xi.writable(t)&&xi.readable(t),xi.transform=t=>xi.duplex(t)&&typeof t._transform=="function";var Ai,a9=xi,c9=class extends AM{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!a9.duplex(t))throw new Error(Kt.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const o=new s9;_c.pipeline(t,o,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=ZM({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),_c.pipeline(this._jsonRpcConnection.stream,o.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",(s=>{const{method:a,params:c}=s;a==="metamask_accountsChanged"?this._handleAccountsChanged(c):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(c):a==="metamask_chainChanged"?this._handleChainChanged(c):yC.includes(a)?this.emit("message",{type:a,data:c}):a==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(Kt.errors.permanentlyDisconnected()))}))}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e?.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){mC(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(Kt.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},l9=class extends c9{constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:gM(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},S1(this,Ai,void 0),this._initializeStateAsync(),ro(this,Ai,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",(o=>{const{method:s}=o;yC.includes(s)&&(this.emit("data",o),this.emit("notification",o.params.result))})),i)if(document.readyState==="complete")Ew(this._rpcEngine,this._log);else{const o=()=>{Ew(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",o)};window.addEventListener("DOMContentLoaded",o)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(Kt.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(Kt.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Pi(this,Ai)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(Kt.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),Pi(this,Ai)&&!t&&ro(this,Ai,null)}_warnOfDeprecation(t){this._sentWarnings?.events[t]===!1&&(this._log.warn(Kt.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(Kt.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise(((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},Hf(t,e))}catch(n){e(n)}}))}send(t,e){return this._sentWarnings.send||(this._log.warn(Kt.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise(((n,r)=>{try{this._rpcRequest({method:t,params:e},Hf(n,r,!1))}catch(i){r(i)}}))}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,wC),e=!0;break;case"net_version":e=Pi(this,Ai)??null;break;default:throw new Error(Kt.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise((t=>{this.on("_initialized",(()=>t()))})),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw El({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise(((e,n)=>{this._rpcRequest(t,Hf(e,n))}))}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(Kt.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==Pi(this,Ai)&&(ro(this,Ai,e),this._state.initialized&&this.emit("networkChanged",Pi(this,Ai)))}};Ai=new WeakMap;const fe=ir("MM_SDK");let Hw;fe.color="#FFAC1C";var VC={},us={};Object.defineProperty(us,"__esModule",{value:!0}),us.EthereumProviderError=us.EthereumRpcError=void 0;const u9=uC;class KC extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return u9.default(this.serialize(),f9,2)}}us.EthereumRpcError=KC;function f9(t,e){if(e!=="[Circular]")return e}us.EthereumProviderError=class extends KC{constructor(t,e,n){if(!(function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999})(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var gv={},Qo={};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.errorValues=Qo.errorCodes=void 0,Qo.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Qo.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Qo,n=us,r=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:r,message:s(r)};function s(f,d=i){if(Number.isInteger(f)){const h=f.toString();if(u(e.errorValues,h))return e.errorValues[h].message;if(c(f))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return d}function a(f){if(!Number.isInteger(f))return!1;const d=f.toString();return!!e.errorValues[d]||!!c(f)}function c(f){return f>=-32099&&f<=-32e3}function l(f){return f&&typeof f=="object"&&!Array.isArray(f)?Object.assign({},f):f}function u(f,d){return Object.prototype.hasOwnProperty.call(f,d)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=s,t.isValidCode=a,t.serializeError=function(f,{fallbackError:d=o,shouldIncludeStack:h=!1}={}){var p,g;if(!d||!Number.isInteger(d.code)||typeof d.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(f instanceof n.EthereumRpcError)return f.serialize();const y={};if(f&&typeof f=="object"&&!Array.isArray(f)&&u(f,"code")&&a(f.code)){const m=f;y.code=m.code,m.message&&typeof m.message=="string"?(y.message=m.message,u(m,"data")&&(y.data=m.data)):(y.message=s(y.code),y.data={originalError:l(f)})}else{y.code=d.code;const m=(p=f)===null||p===void 0?void 0:p.message;y.message=m&&typeof m=="string"?m:d.message,y.data={originalError:l(f)}}const v=(g=f)===null||g===void 0?void 0:g.stack;return h&&f&&v&&typeof v=="string"&&(y.stack=v),y}})(gv);var Ld={};Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.ethErrors=void 0;const vv=us,jC=gv,Pn=Qo;function Br(t,e){const[n,r]=GC(e);return new vv.EthereumRpcError(t,n||jC.getMessageFromCode(t),r)}function Gc(t,e){const[n,r]=GC(e);return new vv.EthereumProviderError(t,n||jC.getMessageFromCode(t),r)}function GC(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}Ld.ethErrors={rpc:{parse:t=>Br(Pn.errorCodes.rpc.parse,t),invalidRequest:t=>Br(Pn.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Br(Pn.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Br(Pn.errorCodes.rpc.methodNotFound,t),internal:t=>Br(Pn.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Br(e,t)},invalidInput:t=>Br(Pn.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Br(Pn.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Br(Pn.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Br(Pn.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Br(Pn.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Br(Pn.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Gc(Pn.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Gc(Pn.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Gc(Pn.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Gc(Pn.errorCodes.provider.disconnected,t),chainDisconnected:t=>Gc(Pn.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new vv.EthereumProviderError(e,n,r)}}},(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=us;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=gv;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=Ld;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Qo;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(VC);var zC={exports:{}};zC.exports=(function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(r,i,o){n.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:o})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,i){if(1&i&&(r=n(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var s in r)n.d(o,s,(function(a){return r[a]}).bind(null,s));return o},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=90)})({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),i=(function(){function o(){}return o.getFirstMatch=function(s,a){var c=a.match(s);return c&&c.length>0&&c[1]||""},o.getSecondMatch=function(s,a){var c=a.match(s);return c&&c.length>1&&c[2]||""},o.matchAndReturnConst=function(s,a,c){if(s.test(a))return c},o.getWindowsVersionName=function(s){switch(s){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},o.getMacOSVersionName=function(s){var a=s.split(".").splice(0,2).map((function(c){return parseInt(c,10)||0}));if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},o.getAndroidVersionName=function(s){var a=s.split(".").splice(0,2).map((function(c){return parseInt(c,10)||0}));if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},o.getVersionPrecision=function(s){return s.split(".").length},o.compareVersions=function(s,a,c){c===void 0&&(c=!1);var l=o.getVersionPrecision(s),u=o.getVersionPrecision(a),f=Math.max(l,u),d=0,h=o.map([s,a],(function(p){var g=f-o.getVersionPrecision(p),y=p+new Array(g+1).join(".0");return o.map(y.split("."),(function(v){return new Array(20-v.length).join("0")+v})).reverse()}));for(c&&(d=f-Math.min(l,u)),f-=1;f>=d;){if(h[0][f]>h[1][f])return 1;if(h[0][f]===h[1][f]){if(f===d)return 0;f-=1}else if(h[0][f]<h[1][f])return-1}},o.map=function(s,a){var c,l=[];if(Array.prototype.map)return Array.prototype.map.call(s,a);for(c=0;c<s.length;c+=1)l.push(a(s[c]));return l},o.find=function(s,a){var c,l;if(Array.prototype.find)return Array.prototype.find.call(s,a);for(c=0,l=s.length;c<l;c+=1){var u=s[c];if(a(u,c))return u}},o.assign=function(s){for(var a,c,l=s,u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];if(Object.assign)return Object.assign.apply(Object,[s].concat(f));var h=function(){var p=f[a];typeof p=="object"&&p!==null&&Object.keys(p).forEach((function(g){l[g]=p[g]}))};for(a=0,c=f.length;a<c;a+=1)h();return s},o.getBrowserAlias=function(s){return r.BROWSER_ALIASES_MAP[s]},o.getBrowserTypeByAlias=function(s){return r.BROWSER_MAP[s]||""},o})();e.default=i,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function s(c,l){for(var u=0;u<l.length;u++){var f=l[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}var a=(function(){function c(){}var l,u,f;return c.getParser=function(d,h){if(h===void 0&&(h=!1),typeof d!="string")throw new Error("UserAgent should be a string");return new i.default(d,h)},c.parse=function(d){return new i.default(d).getResult()},l=c,f=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(u=null)&&s(l.prototype,u),f&&s(l,f),c})();e.default=a,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),s=c(n(95)),a=c(n(17));function c(u){return u&&u.__esModule?u:{default:u}}var l=(function(){function u(d,h){if(h===void 0&&(h=!1),d==null||d==="")throw new Error("UserAgent parameter can't be empty");this._ua=d,this.parsedResult={},h!==!0&&this.parse()}var f=u.prototype;return f.getUA=function(){return this._ua},f.test=function(d){return d.test(this._ua)},f.parseBrowser=function(){var d=this;this.parsedResult.browser={};var h=a.default.find(r.default,(function(p){if(typeof p.test=="function")return p.test(d);if(p.test instanceof Array)return p.test.some((function(g){return d.test(g)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},f.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},f.getBrowserName=function(d){return d?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},f.getBrowserVersion=function(){return this.getBrowser().version},f.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},f.parseOS=function(){var d=this;this.parsedResult.os={};var h=a.default.find(i.default,(function(p){if(typeof p.test=="function")return p.test(d);if(p.test instanceof Array)return p.test.some((function(g){return d.test(g)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},f.getOSName=function(d){var h=this.getOS().name;return d?String(h).toLowerCase()||"":h||""},f.getOSVersion=function(){return this.getOS().version},f.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},f.getPlatformType=function(d){d===void 0&&(d=!1);var h=this.getPlatform().type;return d?String(h).toLowerCase()||"":h||""},f.parsePlatform=function(){var d=this;this.parsedResult.platform={};var h=a.default.find(o.default,(function(p){if(typeof p.test=="function")return p.test(d);if(p.test instanceof Array)return p.test.some((function(g){return d.test(g)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},f.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},f.getEngineName=function(d){return d?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},f.parseEngine=function(){var d=this;this.parsedResult.engine={};var h=a.default.find(s.default,(function(p){if(typeof p.test=="function")return p.test(d);if(p.test instanceof Array)return p.test.some((function(g){return d.test(g)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},f.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},f.getResult=function(){return a.default.assign({},this.parsedResult)},f.satisfies=function(d){var h=this,p={},g=0,y={},v=0;if(Object.keys(d).forEach((function(U){var B=d[U];typeof B=="string"?(y[U]=B,v+=1):typeof B=="object"&&(p[U]=B,g+=1)})),g>0){var m=Object.keys(p),w=a.default.find(m,(function(U){return h.isOS(U)}));if(w){var E=this.satisfies(p[w]);if(E!==void 0)return E}var S=a.default.find(m,(function(U){return h.isPlatform(U)}));if(S){var R=this.satisfies(p[S]);if(R!==void 0)return R}}if(v>0){var F=Object.keys(y),$=a.default.find(F,(function(U){return h.isBrowser(U,!0)}));if($!==void 0)return this.compareVersion(y[$])}},f.isBrowser=function(d,h){h===void 0&&(h=!1);var p=this.getBrowserName().toLowerCase(),g=d.toLowerCase(),y=a.default.getBrowserTypeByAlias(g);return h&&y&&(g=y.toLowerCase()),g===p},f.compareVersion=function(d){var h=[0],p=d,g=!1,y=this.getBrowserVersion();if(typeof y=="string")return d[0]===">"||d[0]==="<"?(p=d.substr(1),d[1]==="="?(g=!0,p=d.substr(2)):h=[],d[0]===">"?h.push(1):h.push(-1)):d[0]==="="?p=d.substr(1):d[0]==="~"&&(g=!0,p=d.substr(1)),h.indexOf(a.default.compareVersions(y,p,g))>-1},f.isOS=function(d){return this.getOSName(!0)===String(d).toLowerCase()},f.isPlatform=function(d){return this.getPlatformType(!0)===String(d).toLowerCase()},f.isEngine=function(d){return this.getEngineName(!0)===String(d).toLowerCase()},f.is=function(d,h){return h===void 0&&(h=!1),this.isBrowser(d,h)||this.isOS(d)||this.isPlatform(d)},f.some=function(d){var h=this;return d===void 0&&(d=[]),d.some((function(p){return h.is(p)}))},u})();e.default=l,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(a){var c={name:"Googlebot"},l=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/opera/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opr\/|opios/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/SamsungBrowser/i],describe:function(a){var c={name:"Samsung Internet for Android"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Whale/i],describe:function(a){var c={name:"NAVER Whale Browser"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MZBrowser/i],describe:function(a){var c={name:"MZ Browser"},l=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/focus/i],describe:function(a){var c={name:"Focus"},l=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/swing/i],describe:function(a){var c={name:"Swing"},l=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/coast/i],describe:function(a){var c={name:"Opera Coast"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var c={name:"Opera Touch"},l=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/yabrowser/i],describe:function(a){var c={name:"Yandex Browser"},l=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/ucbrowser/i],describe:function(a){var c={name:"UC Browser"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Maxthon|mxios/i],describe:function(a){var c={name:"Maxthon"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/epiphany/i],describe:function(a){var c={name:"Epiphany"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/puffin/i],describe:function(a){var c={name:"Puffin"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sleipnir/i],describe:function(a){var c={name:"Sleipnir"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/k-meleon/i],describe:function(a){var c={name:"K-Meleon"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/micromessenger/i],describe:function(a){var c={name:"WeChat"},l=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/qqbrowser/i],describe:function(a){var c={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},l=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/msie|trident/i],describe:function(a){var c={name:"Internet Explorer"},l=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/\sedg\//i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/edg([ea]|ios)/i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/vivaldi/i],describe:function(a){var c={name:"Vivaldi"},l=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/seamonkey/i],describe:function(a){var c={name:"SeaMonkey"},l=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sailfish/i],describe:function(a){var c={name:"Sailfish"},l=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return l&&(c.version=l),c}},{test:[/silk/i],describe:function(a){var c={name:"Amazon Silk"},l=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/phantom/i],describe:function(a){var c={name:"PhantomJS"},l=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/slimerjs/i],describe:function(a){var c={name:"SlimerJS"},l=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c={name:"BlackBerry"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c={name:"WebOS Browser"},l=i.default.getFirstMatch(o,a)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/bada/i],describe:function(a){var c={name:"Bada"},l=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/tizen/i],describe:function(a){var c={name:"Tizen"},l=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/qupzilla/i],describe:function(a){var c={name:"QupZilla"},l=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var c={name:"Firefox"},l=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/electron/i],describe:function(a){var c={name:"Electron"},l=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MiuiBrowser/i],describe:function(a){var c={name:"Miui"},l=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/chromium/i],describe:function(a){var c={name:"Chromium"},l=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/chrome|crios|crmo/i],describe:function(a){var c={name:"Chrome"},l=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/GSA/i],describe:function(a){var c={name:"Google Search"},l=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c={name:"Android Browser"},l=i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/playstation 4/i],describe:function(a){var c={name:"PlayStation 4"},l=i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/safari|applewebkit/i],describe:function(a){var c={name:"Safari"},l=i.default.getFirstMatch(o,a);return l&&(c.version=l),c}},{test:[/.*/i],describe:function(a){var c=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(c,a),version:i.default.getSecondMatch(c,a)}}}];e.default=s,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/Roku\/DVP/],describe:function(a){var c=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:o.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(a){var c=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:o.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(a){var c=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),l=i.default.getWindowsVersionName(c);return{name:o.OS_MAP.Windows,version:c,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var c={name:o.OS_MAP.iOS},l=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return l&&(c.version=l),c}},{test:[/macintosh/i],describe:function(a){var c=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),l=i.default.getMacOSVersionName(c),u={name:o.OS_MAP.MacOS,version:c};return l&&(u.versionName=l),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var c=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:c}}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),l=i.default.getAndroidVersionName(c),u={name:o.OS_MAP.Android,version:c};return l&&(u.versionName=l),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),l={name:o.OS_MAP.WebOS};return c&&c.length&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||i.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:o.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(a){var c=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:o.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(a){var c=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:o.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var c=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:o.OS_MAP.PlayStation4,version:c}}}];e.default=s,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var c=i.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",l={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(l.model=c),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(a){var c=a.test(/ipod|iphone/i),l=a.test(/like (ipod|iphone)/i);return c&&!l},describe:function(a){var c=i.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var c=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];e.default=s,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),s=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:o.ENGINE_MAP.Blink};var c=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:o.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(a){var c={name:o.ENGINE_MAP.Trident},l=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){return a.test(/presto/i)},describe:function(a){var c={name:o.ENGINE_MAP.Presto},l=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=a.test(/gecko/i),l=a.test(/like gecko/i);return c&&!l},describe:function(a){var c={name:o.ENGINE_MAP.Gecko},l=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var c={name:o.ENGINE_MAP.WebKit},l=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}}];e.default=s,t.exports=e.default}});var WC=Ih(zC.exports);const gr={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class pi{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:o}){const s=new d9({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),a=new Proxy(s,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=o,e&&typeof window<"u")try{c=s,window.ethereum=c,window.dispatchEvent(new Event("ethereum#initialized"))}catch(l){fe("[Ethereum] Unable to set global provider - window.ethereum may be read-only",l)}var c;if(i&&typeof window<"u")try{(function(l,u=console){let f=!1,d=!1;if(!window.web3){const h="__isMetaMaskShim__";let p={currentProvider:l};Object.defineProperty(p,h,{value:!0,enumerable:!0,configurable:!1,writable:!1}),p=new Proxy(p,{get:(g,y,...v)=>(y!=="currentProvider"||f?y==="currentProvider"||y===h||d||(d=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),l.request({method:"metamask_logWeb3ShimUsage"}).catch((m=>{u.debug("MetaMask: Failed to log web3 shim usage.",m)}))):(f=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(g,y,...v)),set:(...g)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...g))}),Object.defineProperty(window,"web3",{value:p,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(l){fe("[Ethereum] Unable to shim web3 - window.web3 may be read-only",l)}this.provider.on("display_uri",(l=>{this.sdkInstance.emit(gr.DisplayURI,l)})),this.provider.on("_initialized",(()=>{const l={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(gr.Initialized,l),fe("[Ethereum: constructor()] provider initialized",l)}))}static init(e){var n;return fe("[Ethereum: init()] Initializing Ethereum service"),this.instance=new pi(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class Jl{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return(function(i,o,s,a){const{state:c}=i;fe(`[PlatfformManager: openDeeplink()] universalLink --> ${o}`),fe(`[PlatfformManager: openDeeplink()] deepLink --> ${s}`);try{if(c.preferredOpenLink)return void c.preferredOpenLink(c.useDeeplink?s:o,a);if(fe(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${c.useDeeplink} link=${c.useDeeplink?s:o}`),c.useDeeplink)typeof window<"u"&&(window.location.href=s);else if(typeof document<"u"){const l=document.createElement("a");l.href=o,l.target="_self",l.rel="noreferrer noopener",l.click()}}catch(l){console.log("[PlatfformManager: openDeeplink()] can't open link",l)}})(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&window?.navigator&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return(function(){const e=pi.getProvider()||window?.ethereum;return fe(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e?.isMetaMask} isConnected=${e?.isConnected()}`),e?.isMetaMask&&e?.isConnected()})()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=WC.parse(window.navigator.userAgent);return((e=r?.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r?.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===Fn.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!window?.navigator||or!==void 0&&((e=or?.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||navigator?.product==="ReactNative"}isNotBrowser(){return Jl.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return Jl.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return(function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?Fn.ReactNative:e.isNotBrowser()?Fn.NonBrowser:e.isMetaMaskMobileWebView()?Fn.MetaMaskMobileWebview:e.isMobile()?Fn.MobileWeb:Fn.DesktopWeb})(this)}}const qC=t=>ge(void 0,void 0,void 0,(function*(){if(Jl.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then((function(){return $9}));return new n(t)}const e={persistChannelConfig:()=>ge(void 0,void 0,void 0,(function*(){})),getPersistedChannelConfig:()=>ge(void 0,void 0,void 0,(function*(){})),persistAccounts:()=>ge(void 0,void 0,void 0,(function*(){})),getCachedAccounts:()=>ge(void 0,void 0,void 0,(function*(){return[]})),persistChainId:()=>ge(void 0,void 0,void 0,(function*(){})),getCachedChainId:()=>ge(void 0,void 0,void 0,(function*(){})),terminate:()=>ge(void 0,void 0,void 0,(function*(){}))};return Promise.resolve(e)}));class d9 extends l9{constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},fe(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return ge(this,void 0,void 0,(function*(){return fe(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()}))}_setConnected(){fe("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(fe("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:i}=r;fe(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",VC.ethErrors.provider.disconnected()),i.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return ge(this,void 0,void 0,(function*(){return(function(e){var n,r;return ge(this,void 0,void 0,(function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:i}=e;let o;if(i.providerStateRequested)fe("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let s;i.providerStateRequested=!0;let a=null,c=!1,l=!1;const u=yield qC({enabled:!0});if(u){const f=yield u.getPersistedChannelConfig({});c=(n=f?.relayPersistence)!==null&&n!==void 0&&n,s=yield u.getCachedChainId();const d=yield u.getCachedAccounts();d.length>0&&(a=d[0])}if(fe(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:s,cachedSelectedAddress:a}),c)if(s&&a)o={accounts:[a],chainId:s,isUnlocked:!1},l=!0;else try{o=yield e.request({method:"metamask_getProviderState"})}catch(f){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",f),void(i.providerStateRequested=!1)}if(((r=o?.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())o.accounts=[e.getSelectedAddress()];else{fe("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const f=yield e.request({method:"eth_requestAccounts",params:[]});o.accounts=f}e._initializeState(o),i.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:o?.chainId}))}}))})(this)}))}_initializeState(e){return fe("[SDKProvider: _initializeState()]",e),(function(n,r,i){return fe("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(i)})(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,(function({instance:r,chainId:i,networkVersion:o,superHandleChainChanged:s}){fe(`[SDKProvider: handleChainChanged()] chainId=${i} networkVersion=${o}`);let a=o;o||(fe("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),i!==Hw&&(qt.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(i??"0x1",16)}`}),Hw=i),r._state.isConnected=!0,r.emit("connect",{chainId:i}),s({chainId:i,networkVersion:a})})({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var eu,pa={name:"@metamask/sdk",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})(eu||(eu={}));const $w="direct",tu="https://metamask.app.link/connect",nu="metamask://connect",Vw={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},h9=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,ke={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},ru={[ke.ETH_REQUESTACCOUNTS]:!0,[ke.ETH_SENDTRANSACTION]:!0,[ke.ETH_SIGNTRANSACTION]:!0,[ke.ETH_SIGN]:!0,[ke.PERSONAL_SIGN]:!0,[ke.ETH_ACCOUNTS]:!1,[ke.ETH_CHAINID]:!1,[ke.PERSONAL_SIGN]:!0,[ke.ETH_SIGNTYPEDDATA]:!0,[ke.ETH_SIGNTYPEDDATA_V3]:!0,[ke.ETH_SIGNTYPEDDATA_V4]:!0,[ke.WALLET_REQUESTPERMISSIONS]:!0,[ke.WALLET_GETPERMISSIONS]:!0,[ke.WALLET_WATCHASSET]:!0,[ke.WALLET_ADDETHEREUMCHAIN]:!0,[ke.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[ke.METAMASK_CONNECTSIGN]:!0,[ke.METAMASK_CONNECTWITH]:!0,[ke.PERSONAL_EC_RECOVER]:!0,[ke.METAMASK_BATCH]:!0,[ke.METAMASK_OPEN]:!0},p9=Object.keys(ru).filter((t=>ru[t]===!0)).map((t=>t.toLowerCase())),YC=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map((t=>t.toLowerCase())),ip=".sdk-comm",Fd="providerType",R1=".MMSDK_cached_address",P1=".MMSDK_cached_chainId",Ei={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},g9=1e6;var Ui;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})(Ui||(Ui={}));const v9=typeof window<"u"&&window.localStorage;function y9({instance:t,msg:e}){return ge(this,void 0,void 0,(function*(){if(t._initialized||(fe("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),fe(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:(function(r){let i;if(ye!==void 0)i=ye.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const o=new TextEncoder().encode(r);i=Array.from(o).map((s=>s.toString(16).padStart(2,"0"))).join("")}else{if(typeof or!="object"||!("Buffer"in or))throw new Error("Unable to convert string to hex: No available method.");i=or.Buffer.from(r,"utf8").toString("hex")}return`0x${i}`})(e);return t.activeProvider.request({method:ke.METAMASK_CONNECTWITH,params:[{method:ke.PERSONAL_SIGN,params:[n]}]})}))}function Kw(t){var e,n;return ge(this,void 0,void 0,(function*(){fe("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});fe(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(Fd,"extension"),t.extensionActive=!0,t.emit(gr.ProviderUpdate,Ui.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:Xt.SDK_USE_EXTENSION}))}))}function Ud(t){let e;if(ye!==void 0)e=ye.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,((n,r)=>String.fromCharCode(parseInt(r,16)))));else{if(typeof or!="object"||!("Buffer"in or))throw new Error("Unable to base64 encode: No available method.");e=or.Buffer.from(t,"utf8").toString("base64")}return e}function m9(t,e,n,r){var i,o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E,S,R,F;return ge(this,void 0,void 0,(function*(){const $=(i=t.state.remote)===null||i===void 0?void 0:i.isReady(),U=(o=t.state.remote)===null||o===void 0?void 0:o.isConnected(),B=(s=t.state.remote)===null||s===void 0?void 0:s.isPaused(),W=pi.getProvider(),V=(a=t.state.remote)===null||a===void 0?void 0:a.getChannelId(),L=(c=t.state.remote)===null||c===void 0?void 0:c.isAuthorized(),{deeplinkProtocol:I}=t.state,{method:x,data:P,triggeredInstaller:G}=(N=>{var _,A,O,M;let H;ye.isBuffer(N)?(H=N.toJSON(),H._isBuffer=!0):H=N;const k=(_=H?.data)===null||_===void 0?void 0:_.method;let j=!1;return typeof((A=H?.data)===null||A===void 0?void 0:A.params)=="object"&&((M=(O=H?.data)===null||O===void 0?void 0:O.params)===null||M===void 0?void 0:M.__triggeredInstaller)===!0&&(j=!0,H.data.params=H.data.params.wrappedParams),{method:k,data:H,triggeredInstaller:j}})(e);if(fe(`[RCPMS: write()] method='${x}' isRemoteReady=${$} channelId=${V} isSocketConnected=${U} isRemotePaused=${B} providerConnected=${W.isConnected()}`,e),!V)return x!==ke.METAMASK_GETPROVIDERSTATE&&fe(`[RCPMS: write()] ${x} --> channelId is undefined`),r(new Error("disconnected"));fe(`[RCPMS: write()] remote.isPaused()=${(l=t.state.remote)===null||l===void 0?void 0:l.isPaused()} authorized=${L} ready=${$} socketConnected=${U}`,e);const b=(u=t.state.platformManager)===null||u===void 0?void 0:u.isSecure(),C=(d=(f=t.state.platformManager)===null||f===void 0?void 0:f.isMobileWeb())!==null&&d!==void 0&&d,T=(p=(h=t.state.remote)===null||h===void 0?void 0:h.hasDeeplinkProtocol())!==null&&p!==void 0&&p&&C&&L;try{if(!G){const A=JSON.stringify(P?.data);if(A.length>g9)return r(new Error(`Message size ${A.length} exceeds maximum allowed size of 1000000 bytes`));(g=t.state.remote)===null||g===void 0||g.sendMessage(P?.data).then((()=>{fe(`[RCPMS: _write()] ${x} sent successfully`)})).catch((O=>{fe("[RCPMS: _write()] error sending message",O)}))}if(!b)return fe(`[RCPMS: _write()] unsecure platform for method ${x} -- return callback`),r();if(G)return fe("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const N=(m=(v=(y=t.state.remote)===null||y===void 0?void 0:y.getKeyInfo())===null||v===void 0?void 0:v.ecies.public)!==null&&m!==void 0?m:"";let _=encodeURI(`channelId=${V}&pubkey=${N}&comm=socket&t=d&v=2`);if(T){const A=JSON.stringify(P?.data),O=(w=t.state.remote)===null||w===void 0?void 0:w.encrypt(A);if(!O)return fe("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));_+=`&scheme=${I}&rpc=${Ud(O)}`}if(!(!((E=t.state.platformManager)===null||E===void 0)&&E.isMetaMaskInstalled()))return fe("[RCPMS: _write()] prevent deeplink until installation is completed."),r();ru[x]?(fe(`[RCPMS: _write()] redirect link for '${x}' socketConnected=${U} connect?${_}`),(S=t.state.platformManager)===null||S===void 0||S.openDeeplink(`${tu}?${_}`,`${nu}?${_}`,"_self")):!((R=t.state.remote)===null||R===void 0)&&R.isPaused()?(fe(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${x}`),(F=t.state.platformManager)===null||F===void 0||F.openDeeplink(`${tu}?redirect=true&${_}`,`${nu}?redirect=true&${_}`,"_self")):fe(`[RCPMS: _write()] method ${x} doesn't need redirect.`)}catch(N){return fe("[RCPMS: _write()] error sending message",N),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()}))}class w9 extends _c.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(xe.MESSAGE,this._onMessage)}_write(e,n,r){return ge(this,void 0,void 0,(function*(){return m9(this,e,0,r)}))}_read(){}_onMessage(e){return(function(n,r){try{if(fe("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof r?.data!="object")return;if(!r?.name)return void fe("[RCPMS: onMessage()] ignore message without name",r);if(r?.name!==eu.PROVIDER)return void fe(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(ye.isBuffer(r)){const i=ye.from(r);n.push(i)}else n.push(r)}catch(i){fe(`[RCPMS: onMessage()] ignore message error err=${i}`)}})(this,e)}start(){}}let jw=1;const XC=t=>new Promise((e=>{setTimeout((()=>{e(!0)}),t)})),b9=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:o,sdk:s,remoteConnection:a,debug:c})=>ge(void 0,void 0,void 0,(function*(){var l,u;const f=(({name:B,remoteConnection:W})=>{if(!W||!W?.getConnector())throw new Error("Missing remote connection parameter");return new w9({name:B,remote:W?.getConnector(),deeplinkProtocol:W?.state.deeplinkProtocol,platformManager:W?.getPlatformManager()})})({name:eu.INPAGE,target:eu.CONTENT_SCRIPT,remoteConnection:a}),d=i.getPlatformType(),h=s.options.dappMetadata,p=`Sdk/Javascript SdkVersion/${pa.version} Platform/${d} dApp/${(l=h.url)!==null&&l!==void 0?l:h.name} dAppTitle/${h.name}`;let g=null,y=null;const v=(u=s.options.storage)===null||u===void 0?void 0:u.storageManager;if(v){try{const B=yield v.getCachedAccounts();B.length>0&&(g=B[0])}catch(B){console.error(`[initializeMobileProvider] failed to get cached addresses: ${B}`)}try{const B=yield v.getCachedChainId();B&&(y=B)}catch(B){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${B}`)}}fe(`[initializeMobileProvider] cachedAccountAddress: ${g}, cachedChainId: ${y}`);const m=!(!n||d===Fn.NonBrowser||d===Fn.ReactNative),w=pi.init({shouldSetOnWindow:m,connectionStream:f,shouldShimWeb3:r,sdkInstance:s});let E=!1;const S=B=>{E=B},R=()=>E,F=(B,W,V,L)=>ge(void 0,void 0,void 0,(function*(){var I,x,P,G,b,C,T,N,_;const A=pi.getProvider();if(E){A.emit("display_uri",a?.state.qrcodeLink||""),a?.showActiveModal();let D=R();for(;D;){const K=R(),Z=a?.isAuthorized();D=K&&!Z,fe(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${K} authorized: ${Z}`),yield XC(1e3)}return fe("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),V(...W)}const O=i.isMetaMaskInstalled(),M=a?.isConnected();let H=null,k=null,j=null;if(H=(I=A.getSelectedAddress())!==null&&I!==void 0?I:g,j=A.getChainId()||y,H&&v&&H!==g&&v.persistAccounts([H]).catch((D=>{console.error(`[initializeMobileProvider] failed to persist account: ${D}`)})),j&&(y=j,v&&v.persistChainId(j).catch((D=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${D}`)}))),fe("[initializeMobileProvider: sendRequest()]",{selectedAddress:H,chainId:j}),L&&fe(`[initializeMobileProvider: sendRequest()] method=${B} ongoing=${E} selectedAddress=${H} isInstalled=${O} checkInstallationOnAllCalls=${t} socketConnected=${M}`),H&&B.toLowerCase()===ke.ETH_ACCOUNTS.toLowerCase())return[H];if(j&&B.toLowerCase()===ke.ETH_CHAINID.toLowerCase())return j;const X=[ke.ETH_REQUESTACCOUNTS,ke.WALLET_REQUESTPERMISSIONS,ke.METAMASK_CONNECTSIGN,ke.METAMASK_CONNECTWITH],ee=!ru[B],ae=(x=s.options.readonlyRPCMap)===null||x===void 0?void 0:x[j];if(ae&&ee)try{const D=(P=W?.[0])===null||P===void 0?void 0:P.params,K=yield(({rpcEndpoint:Z,method:re,sdkInfo:Q,params:Y})=>ge(void 0,void 0,void 0,(function*(){const te=JSON.stringify({jsonrpc:"2.0",method:re,params:Y,id:(jw+=1,jw)}),ie={Accept:"application/json","Content-Type":"application/json"};let oe;Z.includes("infura")&&(ie["Metamask-Sdk-Info"]=Q);try{oe=yield u_(Z,{method:"POST",headers:ie,body:te})}catch(le){throw le instanceof Error?new Error(`Failed to fetch from RPC: ${le.message}`):new Error(`Failed to fetch from RPC: ${le}`)}if(!oe.ok)throw new Error(`Server responded with a status of ${oe.status}`);return(yield oe.json()).result})))({rpcEndpoint:ae,sdkInfo:p,method:B,params:D||[]});return L&&fe(`initializeProvider::ReadOnlyRPCResponse ${K}`),K}catch(D){console.warn(`[initializeMobileProvider: sendRequest()] method=${B} readOnlyRPCRequest failed:`,D)}if((!O||O&&!M)&&B!==ke.METAMASK_GETPROVIDERSTATE){const D=((G=W?.[0])===null||G===void 0?void 0:G.params)||[];if(X.indexOf(B)!==-1||t){S(!0);const K=B===ke.METAMASK_CONNECTWITH,Z=`${Date.now()}`;try{yield o.start({wait:!1,connectWith:K?{method:B,id:Z,params:D}:void 0}),yield new Promise(((re,Q)=>{a?.isAuthorized()&&(fe("[initializeMobileProvider: sendRequest()] already authorized"),re(!0)),a?.getConnector().once(xe.AUTHORIZED,(()=>{re(!0)})),s.once(xe.PROVIDER_UPDATE,(Y=>{fe(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${Y}`),Y===Ui.EXTENSION?Q(xe.PROVIDER_UPDATE):Q(new Error("Connection Terminated"))}))}))}catch(re){if(Ui.EXTENSION===re){if(fe(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${B} on the active provider`),B.toLowerCase()===ke.METAMASK_CONNECTSIGN.toLowerCase()){const Q=yield(b=s.getProvider())===null||b===void 0?void 0:b.request({method:ke.ETH_REQUESTACCOUNTS,params:[]});if(!Q.length)throw new Error("SDK state invalid -- undefined accounts");const Y=yield(C=s.getProvider())===null||C===void 0?void 0:C.request({method:ke.PERSONAL_SIGN,params:[D[0],Q[0]]});return s.emit(gr.ConnectWithResponse,Y),Y}if(B.toLowerCase()===ke.METAMASK_CONNECTWITH.toLowerCase()){const[Q]=D,Y=yield(({method:te,sdk:ie,params:oe})=>ge(void 0,void 0,void 0,(function*(){var le,ve,de,me;if(!ie.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");fe("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",te,oe);const se=yield(le=ie.getProvider())===null||le===void 0?void 0:le.request({method:ke.ETH_REQUESTACCOUNTS,params:[]});if(!se.length)throw new Error("SDK state invalid -- undefined accounts");if(te?.toLowerCase()===ke.PERSONAL_SIGN.toLowerCase()){const J={method:te,params:[oe[0],se[0]]};return yield(ve=ie.getProvider())===null||ve===void 0?void 0:ve.request(J)}if(te?.toLowerCase()===ke.ETH_SENDTRANSACTION.toLowerCase()){const J={method:te,params:[Object.assign(Object.assign({},oe[0]),{from:se[0]})]};return yield(de=ie.getProvider())===null||de===void 0?void 0:de.request(J)}return YC.includes(te.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${te} -- not handled by the extension -- call separately`),se):yield(me=ie.getProvider())===null||me===void 0?void 0:me.request({method:te,params:oe})})))({method:Q.method,sdk:s,params:Q.params});return s.emit(gr.ConnectWithResponse,Y),Y}return fe(`[initializeMobileProvider: sendRequest()] sending '${B}' on active provider`,D),yield(T=s.getProvider())===null||T===void 0?void 0:T.request({method:B,params:D})}throw re===xe.REJECTED?(a?.closeModal(),(N=s.getProvider())===null||N===void 0||N.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(fe(`[initializeMobileProvider: sendRequest()] failed to start installer: ${re}`),re)}finally{S(!1)}if(B===ke.ETH_REQUESTACCOUNTS)return k=yield new Promise((re=>{const Q=setInterval((()=>{const{accounts:Y}=A.getState();Y&&(clearInterval(Q),re(Y))}),100)})),fe(`[initializeMobileProvider: sendRequest()] selectedAddress: ${H} --- SKIP rpc call`),k;if(B===ke.METAMASK_CONNECTWITH)try{let re=0;const Q=5,Y=({resolve:le,reject:ve})=>{re+=1;const de=a?.getConnector().getRPCMethodTracker(),me=de?.[Z];return fe(`TRACKER: update method ${Z}`,me),me?.result?(fe("[initializeMobileProvider: sendRequest()] found result",me.result),s.emit(gr.ConnectWithResponse,me.result),void le(me.result)):me?.error?(fe("[initializeMobileProvider: sendRequest()] found error",me.error),void ve(me.error)):re>=Q?(fe("[initializeMobileProvider: sendRequest()] max message count reached without result"),void ve(new Error("Max message count reached without result"))):void fe("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let te,ie;const oe=yield new Promise(((le,ve)=>{const de=a?.getConnector().getRPCMethodTracker();fe(`TRACKER: method ${Z}`,de),de?.[Z].result?(fe("[initializeMobileProvider: sendRequest()] found result",de?.[Z].result),le(de?.[Z].result)):de?.[Z].error&&(fe("[initializeMobileProvider: sendRequest()] found error",de?.[Z].error),ve(de?.[Z].error)),ie=()=>Y({resolve:le,reject:ve}),te=a?.getConnector().on(xe.RPC_UPDATE,ie)}));return ie&&te?.off(xe.RPC_UPDATE,ie),fe("TRACKER: result",oe),oe}catch(re){throw fe("[initializeMobileProvider: sendRequest()] error:",re),re}return W[0]&&typeof W[0]=="object"&&(W[0].params={__triggeredInstaller:!0,wrappedParams:W[0].params}),V(...W)}if(i.isSecure()&&ru[B])return V(...W);if(s.isExtensionActive())return fe(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${B}' to it`,W,D),yield(_=s.getProvider())===null||_===void 0?void 0:_.request({method:B,params:D});throw fe(`[initializeMobileProvider: sendRequest()] method=${B} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const D=yield V(...W);if(fe(`[initializeMobileProvider: sendRequest()] method=${B} rpcResponse`,D),B===ke.WALLET_REQUESTPERMISSIONS){const K=D.reduce(((Z,re)=>{var Q;if(re.parentCapability==="eth_accounts"){const Y=(Q=re.caveats.find((te=>te.type==="restrictReturnedAccounts")))===null||Q===void 0?void 0:Q.value;Y&&Z.push(...Y)}return Z}),[]);fe("[initializeMobileProvider: sendRequest()] accountsToPersist:",K),K.length>0&&(A.handleAccountsChanged(K,!1),v?.persistAccounts(K))}return D}catch(D){throw console.error("[initializeMobileProvider: sendRequest()] error:",D),D}})),{request:$}=w;w.request=(...B)=>ge(void 0,void 0,void 0,(function*(){return F(B?.[0].method,B,$,c)}));const{send:U}=w;return w.send=(...B)=>ge(void 0,void 0,void 0,(function*(){return F(B?.[0],B,U,c)})),fe("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),f.start(),w}));function E9(t){var e,n,r,i;return ge(this,void 0,void 0,(function*(){const{options:o}=t,s={communicationLayerPreference:(e=o.communicationLayerPreference)!==null&&e!==void 0?e:oa.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:o.checkInstallationOnAllCalls,injectProvider:(n=o.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=o.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(i=o.extensionOnly)===null||i===void 0||i,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},a=yield b9(s);t.activeProvider=a,(function(c){var l,u,f,d;(u=(l=c.remoteConnection)===null||l===void 0?void 0:l.getConnector())===null||u===void 0||u.on(gr.ConnectionStatus,(h=>{c.emit(gr.ConnectionStatus,h)})),(d=(f=c.remoteConnection)===null||f===void 0?void 0:f.getConnector())===null||d===void 0||d.on(gr.ServiceStatus,(h=>{c.emit(gr.ServiceStatus,h)}))})(t)}))}const x9="sdk";class A9{constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=Ec,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:x9,event:e,sdkVersion:pa.version},this.originatorInfo),{params:n});fe(`[Analytics: send()] event: ${e}`,r),Ao(r,this.serverURL).catch((i=>{fe(`[Analytics: send()] error: ${i}`)}))}}const _9=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},C9=163400;function Gw(t){var e,n,r;const{dappMetadata:i}=t,o=(function({url:u,name:f}){var d;const h=u+f,p=Ud(h);if(!localStorage)return"";let g=(d=localStorage.getItem(p))!==null&&d!==void 0?d:"";if(!g){g=ts();try{localStorage.setItem(p,g)}catch{return""}}return g})({url:(e=i?.url)!==null&&e!==void 0?e:"no_url",name:(n=i?.name)!==null&&n!==void 0?n:"no_name"}),s=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=s===Fn.DesktopWeb,c=s===Fn.MetaMaskMobileWebview;let l="N/A";return a?l="extension":c&&(l="mobile"),{id:o,from:l}}const lf=(t,e,n)=>{if(wu(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||e?.error;r&&r.code===4001?qt.analytics.track("sdk_action_rejected",{action:t}):qt.analytics.track("sdk_action_failed",{action:t})}else qt.analytics.track("sdk_action_succeeded",{action:t})},ZC=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(i){var o,s;return ge(this,void 0,void 0,(function*(){fe("[wrapExtensionProvider()] Overwriting request method",i);const{method:a,params:c}=i,l=p9.includes(a.toLowerCase()),{id:u,from:f}=Gw(e);if(l&&((o=e.analytics)===null||o===void 0||o.send({event:Xt.SDK_RPC_REQUEST,params:{method:a,from:f,id:u}})),wu(a)&&qt.analytics.track("sdk_action_requested",{action:a}),a===ke.METAMASK_BATCH&&Array.isArray(c))return(({target:p,args:g,trackEvent:y,sdkInstance:v})=>ge(void 0,void 0,void 0,(function*(){var m,w;if(g.method!=="metamask_batch")throw new Error("Invalid usage");const E=[],S=(m=g?.params)!==null&&m!==void 0?m:[];for(const $ of S){const U=yield p?.request({method:$.method,params:$.params});E.push(U)}const{id:R,from:F}=Gw(v);y&&((w=v.analytics)===null||w===void 0||w.send({event:Xt.SDK_RPC_REQUEST_DONE,params:{method:g.method,from:F,id:R}}));for(const $ of E)lf(g.method,$,null);return E})))({target:n,args:i,trackEvent:l,sdkInstance:e});if(a.toLowerCase()===ke.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(c))return(({target:p,params:g})=>ge(void 0,void 0,void 0,(function*(){let y,v=null;try{const m=yield p.request({method:ke.ETH_REQUESTACCOUNTS,params:[]});if(!m.length)throw new Error("SDK state invalid -- undefined accounts");return y=yield p.request({method:ke.PERSONAL_SIGN,params:[g[0],m[0]]}),y}catch(m){throw v=m,m}finally{lf(ke.PERSONAL_SIGN,y,v)}})))({target:n,params:c});if(a.toLowerCase()===ke.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(c))return(({target:p,params:g})=>ge(void 0,void 0,void 0,(function*(){const[y]=g,v=y.method,m=y.params;let w,E=null;try{const S=yield p.request({method:ke.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(S)||!S.length)throw new Error("SDK state invalid -- undefined accounts");return v?.toLowerCase()===ke.PERSONAL_SIGN.toLowerCase()?(w=yield p.request({method:v,params:[m[0],S[0]]}),w):v?.toLowerCase()===ke.ETH_SENDTRANSACTION.toLowerCase()?(w=yield p.request({method:v,params:[Object.assign(Object.assign({},m[0]),{from:S[0]})]}),w):YC.includes(v.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${v} -- not handled by the extension -- call separately`),w=S,w):(w=yield p.request({method:v,params:m}),w)}catch(S){throw E=S,S}finally{lf(v,w,E)}})))({target:n,params:c});let d,h=null;try{return d=yield n.request(i),d}catch(p){throw h=p,p}finally{l&&((s=e.analytics)===null||s===void 0||s.send({event:Xt.SDK_RPC_REQUEST_DONE,params:{method:a,from:f,id:u}})),lf(a,d,h)}}))}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var Hd;function S9({mustBeMetaMask:t,sdkInstance:e}){return ge(this,void 0,void 0,(function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise(((r,i)=>{const o=setTimeout((()=>{i(new Error("eip6963RequestProvider timed out"))}),500);window.addEventListener(Hd.Announce,(s=>{const a=s,{detail:{info:c,provider:l}={}}=a,{name:u,rdns:f,uuid:d}=c??{};h9.test(d)&&u.startsWith(Vw.NAME)&&Vw.RDNS.includes(f)&&(clearTimeout(o),r(l))})),window.dispatchEvent(new Event(Hd.Request))}));return ZC({provider:n,sdkInstance:e})}catch{throw new Error("Provider not found")}}))}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(Hd||(Hd={}));const I9=t=>ge(void 0,void 0,void 0,(function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r})),T9=t=>ge(void 0,void 0,void 0,(function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{fe("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}}));function O9(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(l){try{c(r.next(l))}catch(u){o(u)}}function a(l){try{c(r.throw(l))}catch(u){o(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n((function(f){f(u)}))).then(s,a)}c((r=r.apply(t,[])).next())}))}function R9(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return(function(u){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){s=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){s.label=u[1];break}if(u[0]===6&&s.label<i[1]){s.label=i[1],i=u;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(u);break}i[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(f){u=[6,f],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([c,l])}}}var zw="INSTALLED",Ww="NOT_INSTALLED",qw="REGISTERED",Yw="REGISTERING",Xw="RELOADING",Zw={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},uf="REGISTRATION_IN_PROGRESS",Qw="FORWARDER_ID",P9=(function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,i=r===void 0?"https://fwd.metamask.io":r,o=n.forwarderMode,s=o===void 0?t.FORWARDER_MODE.INJECT:o;this.forwarderOrigin=i,this.forwarderMode=s,this.state=t.isMetaMaskInstalled()?zw:Ww;var a=t._detectBrowser();this.downloadUrl=a?Zw[a]:Zw.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),s===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(uf)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return O9(this,0,void 0,(function(){return R9(this,(function(n){switch(n.label){case 0:switch(this.state){case Xw:return[3,1];case Ww:return[3,2];case zw:return[3,3];case Yw:return[3,5];case qw:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=Xw,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=Yw,[4,t._register()];case 4:return n.sent(),this.state=qw,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}}))}))},t.prototype.startOnboarding=function(){sessionStorage.setItem(uf,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(uf)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(uf,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",Qw),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(Qw))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=WC.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t})();function N9(t,{wait:e=!1}){return ge(this,void 0,void 0,(function*(){return fe(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield XC(1e3)),yield t.checkInstallation()}))}class k9{constructor({remote:e,preferDesktop:n,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return(function(){return ge(this,void 0,void 0,(function*(){fe("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new P9().startOnboarding()}))})()}redirectToProperInstall(){return ge(this,void 0,void 0,(function*(){return(function(e){var n,r;return ge(this,void 0,void 0,(function*(){const{state:i}=e,o=(n=i.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(fe(`[MetamaskInstaller: redirectToProperInstall()] platform=${o}`),o===Fn.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield(r=i.remote)===null||r===void 0?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(s){throw i.isInstalling=!1,s}return!0}))})(this)}))}checkInstallation(){return ge(this,void 0,void 0,(function*(){return(function(e){var n;return ge(this,void 0,void 0,(function*(){const{state:r}=e,i=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return fe(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())}))})(this)}))}start({wait:e=!1,connectWith:n}){return ge(this,void 0,void 0,(function*(){this.state.connectWith=n,fe(`[MetaMaskInstaller: start()] wait=${e}`,n),yield N9(this,{wait:e})}))}}class QC{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return ge(this,void 0,void 0,(function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then((function(){return h7}));console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}}))}renderInstallModal(e){var n;return ge(this,void 0,void 0,(function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",(({detail:{shouldTerminate:i}})=>e.onClose(i))),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",(i=>{var o;return(o=e.onAnalyticsEvent)===null||o===void 0?void 0:o.call(e,i.detail)})),e.parentElement.appendChild(r)}))}renderSelectModal(e){var n;return ge(this,void 0,void 0,(function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",(({detail:{shouldTerminate:i}})=>e.onClose(i))),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout((()=>this.updateQRCode(e.link)),100)}))}renderPendingModal(e){var n;return ge(this,void 0,void 0,(function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",(({detail:{otpValue:i}})=>e.updateOTPValue(i))),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)}))}updateOTPValue(e){const n=()=>{var r;const i=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!i&&(i.otpCode=e,!0)};setTimeout((()=>{n()}),800)}updateQRCode(e){var n,r;const i=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(i)i.link=e;else{const o=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");o&&(o.link=e)}}unmount(){Object.entries(this.containers).forEach((([e,n])=>{var r;(r=n?.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0}))}}const M9=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:i,preferDesktop:o,onAnalyticsEvent:s})=>{let a=null,c=null;fe("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),fe(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),fe(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),fe(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),fe(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const l=u=>{var f;fe("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,c),c?.parentNode&&((f=c.parentNode)===null||f===void 0||f.removeChild(c)),c=null,a=null,u===!0&&r?.()};return{mount:u=>{if(fe("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",c),c)return c.style.display="block",void(a==null||a.updateQRCode(u));a=new QC({debug:e,sdkVersion:pa.version}),c=document.createElement("div"),document.body.appendChild(c),window.extension?a.renderSelectModal({parentElement:c,connectWithExtension:()=>{l(),i?.()},onClose:l,link:t,preferDesktop:o!=null&&o}).catch((f=>{console.error(f)})):a.renderInstallModal({parentElement:c,preferDesktop:o!=null&&o,link:t,metaMaskInstaller:n,onClose:l,onAnalyticsEvent:s}).catch((f=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",f)}))},unmount:l}},D9=({onDisconnect:t,debug:e})=>{let n=null,r=null;const i=()=>{fe("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n?.parentNode&&n.parentNode.removeChild(n),n=null,r=null},o=a=>{fe("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},s=({displayOTP:a}={displayOTP:!0})=>{fe("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new QC({debug:e,sdkVersion:pa.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:t,updateOTPValue:o,displayOTP:a}).catch((c=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",c)})))};return s(),{mount:s,unmount:i,updateOTPValue:o}};function JC(t,e){var n,r,i,o;t.connector||(fe("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new Lk({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:pa.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(fe("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(o=(i=e.timer)===null||i===void 0?void 0:i.runBackgroundTimer)===null||o===void 0||o.call(i,(()=>!1),1e4)))}function N1(t){t.listeners.forEach((({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)})),t.listeners=[]}function B9(t,e,n){return ge(this,void 0,void 0,(function*(){const r=setTimeout((()=>{qt.analytics.track("sdk_connection_failed",{transport_type:"websocket"})}),6e4);return new Promise(((i,o)=>{if(!t.connector)return void o(new Error("No connector available"));fe("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const s=`${t.useDeeplink?nu:tu}?${n}`;(function(a,c,l){var u,f,d,h;a.installModal=(f=(u=c.modals).install)===null||f===void 0?void 0:f.call(u,{link:l,preferDesktop:a.preferDesktop,installer:c.getMetaMaskInstaller(),terminate:()=>{fe("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),c.sdk.terminate().catch((p=>{console.warn("[MMSDK] failed to terminate connection",p)}))},debug:a.developerMode,connectWithExtension:()=>{var p;return(p=c.connectWithExtensionProvider)===null||p===void 0||p.call(c),!1},onAnalyticsEvent:({event:p,params:g})=>{var y,v,m;const w=Object.assign(Object.assign({},g),{sdkVersion:c.sdk.getVersion(),dappId:(y=c.dappMetadata)===null||y===void 0?void 0:y.name,source:c._source,url:(v=c.dappMetadata)===null||v===void 0?void 0:v.url});(m=a.analytics)===null||m===void 0||m.send({event:p,params:w})}}),(h=(d=a.installModal)===null||d===void 0?void 0:d.mount)===null||h===void 0||h.call(d,l)})(t,e,s),e.sdk.once(xe.PROVIDER_UPDATE,(a=>ge(this,void 0,void 0,(function*(){if(fe("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),a===Ui.TERMINATE){const c={code:4001,message:"User rejected the request."};return clearTimeout(r),void o(c)}o(a)})))),t.connector.once(xe.AUTHORIZED,(()=>{clearTimeout(r),i()})),t.connector.once(xe.REJECTED,(()=>{clearTimeout(r),o(xe.REJECTED)})),t.connector.once(xe.CLIENTS_READY,(()=>ge(this,void 0,void 0,(function*(){fe("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))))}))}))}function eS(t,e){function n(r,i){var o;(o=t.connector)===null||o===void 0||o.on(r,i),t.listeners.push({event:r,handler:i})}t.connector&&(N1(t),n(xe.WALLET_INIT,(({accounts:r,chainId:i})=>ge(this,void 0,void 0,(function*(){fe(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${i}`);const o=pi.getProvider();o._setConnected();const s={accounts:r,chainId:i,isUnlocked:!1};o._initializeState(s),o.emit("chainChanged",i),o.emit("accountsChanged",r)})))),n(xe.AUTHORIZED,(()=>ge(this,void 0,void 0,(function*(){var r,i,o,s;try{fe("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const a=pi.getProvider();a._setConnected(),(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(s=(o=t.installModal)===null||o===void 0?void 0:o.unmount)===null||s===void 0||s.call(o,!1),t.otpAnswer=void 0,t.authorized=!0,fe("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})))),n(xe.TERMINATE,(()=>{var r,i,o,s,a;(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(s=(o=t.installModal)===null||o===void 0?void 0:o.unmount)===null||s===void 0||s.call(o,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(a=t.connector)===null||a===void 0||a.disconnect({terminate:!0}),t.authorized=!1,pi.getProvider().handleDisconnect({terminate:!0}),N1(t),fe("[RemoteConnection: setupListeners()] All listeners cleaned up")})))}function L9(t,e,{initialCheck:n,connectWith:r}={}){var i,o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E,S,R;return ge(this,void 0,void 0,(function*(){try{if(JC(t,e),!t.connector)throw new Error("no connector defined");eS(t);const F=pi.getProvider();t.authorized=!1,F.emit("connecting");const $=yield(i=t.connector)===null||i===void 0?void 0:i.originatorSessionConnect();fe(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,$);let U=(o=$?.channelId)!==null&&o!==void 0?o:"",B=(a=(s=t.connector.getKeyInfo())===null||s===void 0?void 0:s.ecies.public)!==null&&a!==void 0?a:"",W=(l=(c=t.connector.getKeyInfo())===null||c===void 0?void 0:c.ecies.private)!==null&&l!==void 0?l:"";if(n&&!$)return Promise.resolve();if(!$&&!n){const M=yield t.connector.generateChannelIdConnect();U=(u=M.channelId)!==null&&u!==void 0?u:"",B=(f=M.pubKey)!==null&&f!==void 0?f:"",W=(d=M.privKey)!==null&&d!==void 0?d:"";const H=Date.now();(h=t.connector.state.storageManager)===null||h===void 0||h.persistChannelConfig({channelId:U,localKey:W,lastActive:H,validUntil:H+xc})}if(n&&$?.channelId)return!((p=t.connector)===null||p===void 0)&&p.isConnected()||(fe(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,$),yield(g=t.connector)===null||g===void 0?void 0:g.connectToChannel({channelId:U})),Promise.resolve();$&&!(!((y=t.connector)===null||y===void 0)&&y.isConnected())&&(fe("[RemoteConnection: startConnection()] reconnecting to channel",$),yield(v=t.connector)===null||v===void 0?void 0:v.connectToChannel({channelId:U}));const V=!((m=t.platformManager)===null||m===void 0)&&m.isSecure()?"":"&t=q",L=pa.version,{iconUrl:I,name:x,url:P,scheme:G}=e.dappMetadata||{},b=(w=t.platformManager)===null||w===void 0?void 0:w.getPlatformType();let C="N/A";typeof window<"u"&&window.location&&window.location.hostname?C=window.location.hostname:x!==void 0?C=x:P!==void 0&&(C=P);const T={url:P??"",title:x??"",icon:I,scheme:G??"",apiVersion:L,dappId:C||P||"N/A",anonId:e.anonId,platform:b??"",source:(E=e._source)!==null&&E!==void 0?E:""},N=Ud(JSON.stringify(T));let _=`channelId=${U}&v=2&comm=${(S=t.communicationLayerPreference)!==null&&S!==void 0?S:""}&pubkey=${B}${V}&originatorInfo=${N}`;if(r){_+=`&rpc=${Ud(JSON.stringify(r))}`;const M=t.connector.getRPCMethodTracker();M&&(M[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const A=encodeURI(_),O=`${t.useDeeplink?nu:tu}?${_}`;if(t.qrcodeLink=O,t.developerMode&&fe(`[RemoteConnection: startConnection()] qrcodeLink=${A}`),F.emit("display_uri",O),qt.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(R=t.platformManager)===null||R===void 0?void 0:R.isSecure()){const M=setTimeout((()=>{qt.analytics.track("sdk_connection_failed",{transport_type:"websocket"})}),6e4);return yield(function(H,k){var j,X;return ge(this,void 0,void 0,(function*(){const ee=`${tu}?${k}`,ae=`${nu}?${k}`;(X=(j=H.platformManager)===null||j===void 0?void 0:j.openDeeplink)===null||X===void 0||X.call(j,ee,ae,"_self")}))})(t,A),new Promise(((H,k)=>{var j,X,ee;if(!((j=t.connector)===null||j===void 0)&&j.isAuthorized())return clearTimeout(M),void H();(X=t.connector)===null||X===void 0||X.once(xe.AUTHORIZED,(()=>{clearTimeout(M),H()})),(ee=t.connector)===null||ee===void 0||ee.once(xe.REJECTED,(()=>{clearTimeout(M),k(xe.REJECTED)}))}))}return B9(t,e,A)}catch(F){throw console.error("[startConnection] error",F),F}}))}class F9{constructor(e){var n,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const o=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=o,this.state.analytics=e.analytics,this.state.preferDesktop=(i=e.preferDesktop)!==null&&i!==void 0&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=M9),e.modals.otp||(e.modals.otp=D9)}startConnection(e){return ge(this,void 0,void 0,(function*(){return L9(this.state,this.options,e)}))}initRemoteCommunication({sdkInstance:e}){var n,r,i;return ge(this,void 0,void 0,(function*(){const o=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const s={privateKey:o?.localKey};this.options.ecies=s}JC(this.state,this.options),yield(i=this.getConnector())===null||i===void 0?void 0:i.initFromDappStorage(),eS(this.state,this.options)}))}showActiveModal(){return(function(e){var n,r,i,o;e.authorized?fe("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((o=(i=e.installModal).mount)===null||o===void 0||o.call(i,e.qrcodeLink||""))})(this.state)}closeModal(){var e,n,r,i;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(i=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,i;fe("[RemoteConnection: disconnect()]",e),e?.terminate&&(pi.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(i=this.state.connector)===null||i===void 0||i.disconnect(e),(function(o){fe("[RemoteConnection: cleanupConnector()] cleaning up connector"),o.connector&&(N1(o),o.connector.disconnect({terminate:!0}).catch((s=>{fe("[RemoteConnection: cleanupConnector()] error disconnecting connector",s)})))})(this.state)}}function U9(t){var e,n,r,i,o,s,a,c,l,u,f;return ge(this,void 0,void 0,(function*(){const{options:d}=t;if(d.logging=(e=d.logging)!==null&&e!==void 0?e:{},d.communicationLayerPreference=(n=d.communicationLayerPreference)!==null&&n!==void 0?n:oa.SOCKET,d.enableDebug!==void 0&&(ir.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),d.enableAnalytics=(r=d.enableAnalytics)===null||r===void 0||r,d.injectProvider=(i=d.injectProvider)===null||i===void 0||i,d.shouldShimWeb3=(o=d.shouldShimWeb3)===null||o===void 0||o,d.extensionOnly=(s=d.extensionOnly)===null||s===void 0||s,d.useDeeplink=(a=d.useDeeplink)===null||a===void 0||a,d.storage=(c=d.storage)!==null&&c!==void 0?c:{enabled:!0},d.headless){ir("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const m=()=>{},w={install:()=>({mount:m,unmount:m})},E={installer:m};d.modals=w,d.ui=E}const h=((l=d.logging)===null||l===void 0?void 0:l.developerMode)===!0;t.debug=((u=d.logging)===null||u===void 0?void 0:u.sdk)||h,fe("[MetaMaskSDK: performSDKInitialization()] options",t.options);const p=Object.assign({},d.logging);h&&(p.sdk=!0,p.eciesLayer=!0,p.keyExchangeLayer=!0,p.remoteLayer=!0,p.serviceLayer=!0,p.plaintext=!0),yield(function(m){var w;return ge(this,void 0,void 0,(function*(){const{options:E}=m;m.platformManager=new Jl({useDeepLink:(w=E.useDeeplink)!==null&&w!==void 0&&w,preferredOpenLink:E.openDeeplink,debug:m.debug})}))})(t),yield(function(m){var w,E,S,R,F;return ge(this,void 0,void 0,(function*(){const{options:$}=m,U=(w=m.platformManager)===null||w===void 0?void 0:w.getPlatformType();m.analytics=new A9({serverUrl:(E=$.communicationServerUrl)!==null&&E!==void 0?E:Ec,enabled:$.enableAnalytics,originatorInfo:{url:(S=$.dappMetadata.url)!==null&&S!==void 0?S:"",title:(R=$.dappMetadata.name)!==null&&R!==void 0?R:"",dappId:m.getDappId(),platform:U??"",source:(F=$._source)!==null&&F!==void 0?F:"",anonId:""}})}))})(t),yield(function(m){var w,E,S;return ge(this,void 0,void 0,(function*(){if(!m.options.enableAnalytics||!(!((w=m.platformManager)===null||w===void 0)&&w.isBrowser())&&!(!((E=m.platformManager)===null||E===void 0)&&E.isReactNative()))return;const R=m.getVersion(),F=m.getDappId(),$=yield m.getAnonId(),U=(S=m.platformManager)===null||S===void 0?void 0:S.getPlatformType(),B=m.options._source;qt.analytics.setGlobalProperty("sdk_version",R),qt.analytics.setGlobalProperty("dapp_id",F),qt.analytics.setGlobalProperty("anon_id",$),qt.analytics.setGlobalProperty("platform",U),qt.analytics.setGlobalProperty("integration_type",B),qt.analytics.enable(),qt.analytics.track("sdk_initialized",{})}))})(t),yield(function(m){var w;return ge(this,void 0,void 0,(function*(){const{options:E}=m;((w=E.storage)===null||w===void 0?void 0:w.enabled)!==!0||E.storage.storageManager||(E.storage.storageManager=yield qC(E.storage))}))})(t),yield(function(m){return ge(this,void 0,void 0,(function*(){const{options:w}=m,E=/^(http|https):\/\/[^\s]*$/;if(w.dappMetadata){w.dappMetadata.iconUrl&&!E.test(w.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),w.dappMetadata.iconUrl=void 0),w.dappMetadata.base64Icon&&w.dappMetadata.base64Icon.length>C9&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),w.dappMetadata.base64Icon=void 0),w.dappMetadata.url&&!E.test(w.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const S=_9();if(S&&!w.dappMetadata.iconUrl&&!w.dappMetadata.base64Icon){const R=`${window.location.protocol}//${window.location.host}${S}`;w.dappMetadata.iconUrl=R}}m.dappMetadata=w.dappMetadata}))})(t),yield I9(t),yield T9(t);const{metamaskBrowserExtension:g,preferExtension:y,shouldReturn:v}=yield(function(m){var w,E,S,R;return ge(this,void 0,void 0,(function*(){const{options:F}=m;let $,U=!1,B=!1;if(typeof window<"u"&&window.ethereum&&!(!((w=m.platformManager)===null||w===void 0)&&w.isMetaMaskMobileWebView())){U=localStorage.getItem(Fd)==="extension";try{$=yield S9({mustBeMetaMask:!0,sdkInstance:m}),window.extension=$,$.on(Ei.CHAIN_CHANGED,(W=>{fe(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${W}`),m.sdkProvider&&m.getMobileProvider().emit(Ei.CHAIN_CHANGED,W)})),$.on(Ei.ACCOUNTS_CHANGED,(W=>ge(this,void 0,void 0,(function*(){var V;fe(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${W}`);const L=!!m.sdkProvider,I=!!m.extensionActive;if(L&&m.getMobileProvider().emit(Ei.ACCOUNTS_CHANGED,W),I&&W?.length===0&&(yield(V=m.getProvider())===null||V===void 0?void 0:V.request({method:ke.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield m.terminate()}catch(x){fe("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",x)}})))),$.on(Ei.DISCONNECT,(W=>{fe(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${W}`),m.sdkProvider&&m.getMobileProvider().emit(Ei.DISCONNECT,W)})),$.on(Ei.CONNECT,(W=>{fe(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${W}`),m.sdkProvider&&m.getMobileProvider().emit(Ei.CONNECT,W)})),$.on(Ei.CONNECTED,(W=>{fe("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",W),m.sdkProvider&&m.getMobileProvider().emit(Ei.CONNECTED,W)}))}catch{window.extension=void 0}}else!((E=m.platformManager)===null||E===void 0)&&E.isMetaMaskMobileWebView()&&((S=m.analytics)===null||S===void 0||S.send({event:Xt.SDK_USE_INAPP_BROWSER}),m.activeProvider=ZC({provider:window.ethereum,sdkInstance:m}),m._initialized=!0,B=!0);return $&&F.extensionOnly&&(fe("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(R=m.analytics)===null||R===void 0||R.send({event:Xt.SDK_USE_EXTENSION}),m.activeProvider=$,m.extensionActive=!0,m.extension=$,m._initialized=!0,B=!0),{preferExtension:U,shouldReturn:B,metamaskBrowserExtension:$}}))})(t);if(v)fe("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield(function(m,w){var E,S,R,F,$;return ge(this,void 0,void 0,(function*(){const{options:U}=m,B=Object.assign({},U.logging);m.remoteConnection=new F9({anonId:yield m.getAnonId(),preferDesktop:(E=U.preferDesktop)!==null&&E!==void 0&&E,communicationLayerPreference:(S=U.communicationLayerPreference)!==null&&S!==void 0?S:oa.SOCKET,analytics:m.analytics,dappMetadata:U.dappMetadata,_source:U._source,enableAnalytics:(R=U.enableAnalytics)===null||R===void 0||R,timer:U.timer,sdk:m,platformManager:m.platformManager,transports:U.transports,communicationServerUrl:U.communicationServerUrl,storage:(F=U.storage)!==null&&F!==void 0?F:{enabled:!0},getMetaMaskInstaller:()=>{if(!m.installer)throw new Error("Invalid SDK status -- installer not initialized");return m.installer},logging:B,connectWithExtensionProvider:w===void 0?void 0:()=>Kw(m),modals:Object.assign(Object.assign({},U.modals),{onPendingModalDisconnect:m.terminate.bind(m)})}),yield m.remoteConnection.initRemoteCommunication({sdkInstance:m}),m.installer=new k9({remote:m.remoteConnection,preferDesktop:($=U.preferDesktop)!==null&&$!==void 0&&$,platformManager:m.platformManager,debug:m.debug})}))})(t,g),yield E9(t),yield(function(m,w){var E,S;return ge(this,void 0,void 0,(function*(){const{options:R}=m;w?(fe("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(E=m.analytics)===null||E===void 0||E.send({event:Xt.SDK_EXTENSION_UTILIZED}),Kw(m).catch((F=>{console.warn("Can't connect with MetaMask extension...",F),localStorage.removeItem(Fd)}))):R.checkInstallationImmediately&&(!((S=m.platformManager)===null||S===void 0)&&S.isDesktopWeb()?(fe("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),m.connect().catch((F=>{fe(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${F}`)}))):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),m._initialized=!0}))})(t,y);try{yield(f=t.remoteConnection)===null||f===void 0?void 0:f.startConnection({initialCheck:!0})}catch(m){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",m)}t.emit(gr.ProviderUpdate,Ui.INITIALIZED)}}))}class H9 extends xP{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:$w,i18nOptions:{enabled:!1}}){var n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",ir.disable();const o=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||o)&&ir.enable("MM_SDK"),fe("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((i=e.dappMetadata)===null||i===void 0)&&i.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=$w),this.init().then((()=>{fe("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)})).catch((s=>{console.error("[MetaMaskSDK: constructor()] error during initialization",s)}))}init(){return ge(this,void 0,void 0,(function*(){return(function(e){var n;return ge(this,void 0,void 0,(function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return fe("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return fe("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return fe("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=U9(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise}))})(this)}))}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return ge(this,void 0,void 0,(function*(){return(function(e){return ge(this,void 0,void 0,(function*(){if(e._initialized||(fe("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),fe(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:ke.ETH_REQUESTACCOUNTS,params:[]})}))})(this)}))}connectAndSign({msg:e}){return ge(this,void 0,void 0,(function*(){return y9({instance:this,msg:e})}))}connectWith(e){return ge(this,void 0,void 0,(function*(){return(function({instance:n,rpc:r}){return ge(this,void 0,void 0,(function*(){if(n._initialized||(fe("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),fe(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:ke.METAMASK_CONNECTWITH,params:[r]})}))})({instance:this,rpc:e})}))}resume(){return(function(e){var n,r,i;return ge(this,void 0,void 0,(function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return fe("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((i=e.remoteConnection)===null||i===void 0||i.startConnection());fe("[MetaMaskSDK: resume()] channel is ready")}))})(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return(function(e){var n,r,i;return ge(this,void 0,void 0,(function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(v9&&(window.localStorage.removeItem(Fd),window.localStorage.removeItem(P1),window.localStorage.removeItem(R1)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:ke.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(o){fe("[MetaMaskSDK: terminate()] error revoking permissions",o)}return e.options.extensionOnly?(e.emit(gr.ProviderUpdate,Ui.TERMINATE),void fe("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(gr.ProviderUpdate,Ui.TERMINATE))}e.emit(gr.ProviderUpdate,Ui.TERMINATE),fe(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(i=e.remoteConnection)===null||i===void 0||i.disconnect({terminate:!0,sendMessage:!0})}}))})(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return pa.version}getDappId(){var e,n,r,i;return typeof window>"u"||window.location===void 0?(i=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&i!==void 0?i:"N/A":window.location.hostname}getAnonId(){var e,n;return ge(this,void 0,void 0,(function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():ts(),this._anonId=r,r}))}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=ts();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),ts()}}getReactNativeAnonId(){return ge(this,void 0,void 0,(function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const i=ts();return yield n.setItem(e,i),i}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),ts()}}))}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var $9=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return ge(this,void 0,void 0,(function*(){const e=JSON.stringify(t);fe(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(ip,e)}))}getPersistedChannelConfig(){return ge(this,void 0,void 0,(function*(){let t;try{if(fe(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(ip),fe("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return fe("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}}))}persistAccounts(t){return ge(this,void 0,void 0,(function*(){fe(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(R1,e)}))}getCachedAccounts(){return ge(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(R1);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}}))}persistChainId(t){return ge(this,void 0,void 0,(function*(){fe(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(P1,t)}))}getCachedChainId(){return ge(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(P1);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}}))}terminate(){return ge(this,void 0,void 0,(function*(){fe(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(ip)}))}}});const V9="hydrated",K9=!1,j9=!0;var G9=Object.defineProperty,yv=new WeakMap,os=t=>yv.get(t),mv=(t,e)=>yv.set(e.$lazyInstance$=t,e),Jw=(t,e)=>e in t,Qs=(t,e)=>(0,console.error)(t,e),op=new Map,jf=new Map,tS="slot-fb{display:contents}slot-fb[hidden]{display:none}",kh=typeof window<"u"?window:{},Mi=kh.document||{head:{}},Cn={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},nS=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),k1=!1,eb=[],rS=[],z9=(t,e)=>n=>{t.push(n),k1||(k1=!0,4&Cn.$flags$?wv(M1):Cn.raf(M1))},tb=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Qs(n)}t.length=0},M1=()=>{tb(eb),tb(rS),(k1=eb.length>0)&&Cn.raf(M1)},wv=t=>(e=>Promise.resolve(e))().then(t),W9=z9(rS),nb={},bv=t=>(t=typeof t)=="object"||t==="function";function iS(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)G9(t,n,{get:e[n],enumerable:!0})})({},{err:()=>oS,map:()=>q9,ok:()=>D1,unwrap:()=>Y9,unwrapErr:()=>X9});var D1=t=>({isOk:!0,isErr:!1,value:t}),oS=t=>({isOk:!1,isErr:!0,value:t});function q9(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then((r=>D1(r))):D1(n)}if(t.isErr){const n=t.value;return oS(n)}throw"should never get here"}var Ev,Y9=t=>{if(t.isOk)return t.value;throw t.value},X9=t=>{if(t.isErr)return t.value;throw t.value},he=(t,e,...n)=>{let r=null,i=!1,o=!1;const s=[],a=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!bv(r))&&(r=String(r)),i&&o?s[s.length-1].$text$+=r:s.push(i?$d(null,r):r),o=i)};if(a(n),e){const l=e.className||e.class;l&&(e.class=typeof l!="object"?l:Object.keys(l).filter((u=>l[u])).join(" "))}if(typeof t=="function")return t(e===null?{}:e,s,Q9);const c=$d(t,null);return c.$attrs$=e,s.length>0&&(c.$children$=s),c},$d=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),Z9={},Q9={forEach:(t,e)=>t.map(rb).forEach(e),map:(t,e)=>t.map(rb).map(e).map(J9)},rb=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),J9=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),he(t.vtag,n,...t.vchildren||[])}const e=$d(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Mh=t=>os(t).$hostElement$,fs=(t,e,n)=>{const r=Mh(t);return{emit:i=>sS(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:i})}},sS=(t,e,n)=>{const r=Cn.ce(e,n);return t.dispatchEvent(r),r},ib=new WeakMap,e7=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const i=((o,s,a)=>{var c;const l=aS(s),u=jf.get(l);if(o=o.nodeType===11?o:Mi,u)if(typeof u=="string"){o=o.head||o;let f,d=ib.get(o);if(d||ib.set(o,d=new Set),!d.has(l)){{f=Mi.createElement("style"),f.innerHTML=u;const h=(c=Cn.$nonce$)!=null?c:iS(Mi);if(h!=null&&f.setAttribute("nonce",h),!(1&s.$flags$))if(o.nodeName==="HEAD"){const p=o.querySelectorAll("link[rel=preconnect]"),g=p.length>0?p[p.length-1].nextSibling:o.querySelector("style");o.insertBefore(f,g)}else if("host"in o)if(nS){const p=new CSSStyleSheet;p.replaceSync(u),o.adoptedStyleSheets=[p,...o.adoptedStyleSheets]}else{const p=o.querySelector("style");p?p.innerHTML=u+p.innerHTML:o.prepend(f)}else o.append(f);1&s.$flags$&&o.nodeName!=="HEAD"&&o.insertBefore(f,null)}4&s.$flags$&&(f.innerHTML+=tS),d&&d.add(l)}}else o.adoptedStyleSheets.includes(u)||(o.adoptedStyleSheets=[...o.adoptedStyleSheets,u]);return l})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h"))},aS=(t,e)=>"sc-"+t.$tagName$,ob=(t,e,n,r,i,o)=>{if(n!==r){let s=Jw(t,e),a=e.toLowerCase();if(e==="class"){const c=t.classList,l=sb(n),u=sb(r);c.remove(...l.filter((f=>f&&!u.includes(f)))),c.add(...u.filter((f=>f&&!l.includes(f))))}else if(e==="style"){for(const c in n)r&&r[c]!=null||(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)n&&r[c]===n[c]||(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(s||e[0]!=="o"||e[1]!=="n"){const c=bv(r);if((s||c&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const l=r??"";e==="list"?s=!1:n!=null&&t[e]==l||(typeof t.__lookupSetter__(e)=="function"?t[e]=l:t.setAttribute(e,l))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!s||4&o||i)&&!c&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):Jw(kh,a)?a.slice(2):a[2]+e.slice(3),n||r){const c=e.endsWith(cS);e=e.replace(n7,""),n&&Cn.rel(t,e,n,c),r&&Cn.ael(t,e,r,c)}}},t7=/\s/,sb=t=>t?t.split(t7):[],cS="Capture",n7=new RegExp(cS+"$"),lS=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||nb,o=e.$attrs$||nb;for(const s of ab(Object.keys(i)))s in o||ob(r,s,i[s],void 0,n,e.$flags$);for(const s of ab(Object.keys(o)))ob(r,s,i[s],o[s],n,e.$flags$)};function ab(t){return t.includes("ref")?[...t.filter((e=>e!=="ref")),"ref"]:t}var Kr=!1,xv=(t,e,n,r)=>{const i=e.$children$[n];let o,s,a=0;if(i.$text$!==null)o=i.$elm$=Mi.createTextNode(i.$text$);else{if(Kr||(Kr=i.$tag$==="svg"),o=i.$elm$=Mi.createElementNS(Kr?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.$tag$),Kr&&i.$tag$==="foreignObject"&&(Kr=!1),lS(null,i,Kr),o.getRootNode().querySelector("body"),i.$children$)for(a=0;a<i.$children$.length;++a)s=xv(t,i,a),s&&o.appendChild(s);i.$tag$==="svg"?Kr=!1:o.tagName==="foreignObject"&&(Kr=!0)}return o["s-hn"]=Ev,o},cb=(t,e,n,r,i,o)=>{let s,a=t;for(a.shadowRoot&&a.tagName===Ev&&(a=a.shadowRoot);i<=o;++i)r[i]&&(s=xv(null,n,i),s&&(r[i].$elm$=s,Gf(a,s,e)))},lb=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const o=i.$elm$;o&&o.remove()}}},ff=(t,e,n=!1)=>t.$tag$===e.$tag$,il=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,o=e.$children$,s=e.$tag$,a=e.$text$;a===null?(lS(t,e,Kr=s==="svg"||s!=="foreignObject"&&Kr),i!==null&&o!==null?((c,l,u,f,d=!1)=>{let h,p=0,g=0,y=l.length-1,v=l[0],m=l[y],w=f.length-1,E=f[0],S=f[w];for(;p<=y&&g<=w;)v==null?v=l[++p]:m==null?m=l[--y]:E==null?E=f[++g]:S==null?S=f[--w]:ff(v,E,d)?(il(v,E,d),v=l[++p],E=f[++g]):ff(m,S,d)?(il(m,S,d),m=l[--y],S=f[--w]):ff(v,S,d)?(il(v,S,d),Gf(c,v.$elm$,m.$elm$.nextSibling),v=l[++p],S=f[--w]):ff(m,E,d)?(il(m,E,d),Gf(c,m.$elm$,v.$elm$),m=l[--y],E=f[++g]):(h=xv(l&&l[g],u,g),E=f[++g],h&&Gf(v.$elm$.parentNode,h,v.$elm$));p>y?cb(c,f[w+1]==null?null:f[w+1].$elm$,u,f,g,w):g>w&&lb(l,p,y)})(r,i,e,o,n):o!==null?(t.$text$!==null&&(r.textContent=""),cb(r,null,e,o,0,o.length-1)):!n&&j9&&i!==null&&lb(i,0,i.length-1),Kr&&s==="svg"&&(Kr=!1)):t.$text$!==a&&(r.data=a)},Gf=(t,e,n)=>t?.insertBefore(e,n),r7=(t,e,n=!1)=>{const r=t.$hostElement$,i=t.$cmpMeta$,o=t.$vnode$||$d(null,null),s=(a=e)&&a.$tag$===Z9?e:he(null,null,e);var a;if(Ev=r.tagName,n&&s.$attrs$)for(const c of Object.keys(s.$attrs$))r.hasAttribute(c)&&!["key","ref","style","class"].includes(c)&&(s.$attrs$[c]=r[c]);s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=o.$elm$=r.shadowRoot||r,r["s-sc"],1&i.$flags$,il(o,s,n)},uS=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((n=>t.$onRenderResolve$=n)))},Av=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(uS(t,t.$ancestorComponent$),W9((()=>i7(t,e))))),i7=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return o7(void 0,(()=>a7(t,r,e)))},o7=(t,e)=>s7(t)?t.then(e).catch((n=>{console.error(n),e()})):e(),s7=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",a7=async(t,e,n)=>{var r;const i=t.$hostElement$;t.$cmpMeta$.$tagName$;const o=i["s-rc"];n&&e7(t),t.$cmpMeta$.$tagName$,c7(t,e,i,n),o&&(o.map((s=>s())),i["s-rc"]=void 0);{const s=(r=i["s-p"])!=null?r:[],a=()=>l7(t);s.length===0?a():(Promise.all(s).then(a),t.$flags$|=4,s.length=0)}},c7=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,r7(t,e,r)}catch(i){Qs(i,t.$hostElement$)}return null},l7=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,dS(e),_v(r,"componentDidLoad"),t.$onReadyResolve$(e),i||fS()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&wv((()=>Av(t,!1))),t.$flags$&=-517},fS=t=>{dS(Mi.documentElement),wv((()=>sS(kh,"appload",{detail:{namespace:"sdk-install-modal-web"}})))},_v=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){Qs(r)}},dS=t=>{var e;return t.classList.add((e=V9)!=null?e:"hydrated")},u7=(t,e,n,r)=>{const i=os(t);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const o=i.$hostElement$,s=i.$instanceValues$.get(e),a=i.$flags$,c=i.$lazyInstance$;var l,u;l=n,u=r.$members$[e][0],n=l==null||bv(l)?l:4&u?l!=="false"&&(l===""||!!l):1&u?String(l):l;const f=Number.isNaN(s)&&Number.isNaN(n);if((!(8&a)||s===void 0)&&n!==s&&!f&&(i.$instanceValues$.set(e,n),c)){if(r.$watchers$&&128&a){const d=r.$watchers$[e];d&&d.map((h=>{try{c[h](n,s,e)}catch(p){Qs(p,o)}}))}(18&a)==2&&Av(i,!1)}},hS=(t,e,n)=>{var r,i;const o=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const s=Object.entries((r=e.$members$)!=null?r:{});if(s.map((([a,[c]])=>{(31&c||2&n&&32&c)&&Object.defineProperty(o,a,{get(){return l=a,os(this).$instanceValues$.get(l);var l},set(l){u7(this,a,l,e)},configurable:!0,enumerable:!0})})),1&n){const a=new Map;o.attributeChangedCallback=function(c,l,u){Cn.jmp((()=>{var f;const d=a.get(c);if(this.hasOwnProperty(d))u=this[d],delete this[d];else{if(o.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==u)return;if(d==null){const h=os(this),p=h?.$flags$;if(p&&!(8&p)&&128&p&&u!==l){const g=h.$lazyInstance$,y=(f=e.$watchers$)==null?void 0:f[c];y?.forEach((v=>{g[v]!=null&&g[v].call(g,u,l,c)}))}return}}this[d]=(u!==null||typeof this[d]!="boolean")&&u}))},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...s.filter((([c,l])=>15&l[0])).map((([c,l])=>{const u=l[1]||c;return a.set(u,c),u}))]))}}return t},f7=async(t,e,n,r)=>{let i;if((32&e.$flags$)==0){if(e.$flags$|=32,n.$lazyBundleId$){const a=((c,l,u)=>{const f=c.$tagName$.replace(/-/g,"_"),d=c.$lazyBundleId$;if(!d)return;const h=op.get(d);if(h)return h[f];{const p=g=>(op.set(d,g),g[f]);if(d==="mm-install-modal_3")return Promise.resolve().then((function(){return S7})).then(p,Qs)}return Ns(()=>import(`./${d}.entry.js`),[]).then((p=>(op.set(d,p),p[f])),Qs)})(n);if(a&&"then"in a?i=await a:i=a,!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,hS(i,n,2),i.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new i(e)}catch(c){Qs(c)}e.$flags$&=-9,e.$flags$|=128,B1(e.$lazyInstance$)}else{i=t.constructor;const a=t.localName;customElements.whenDefined(a).then((()=>e.$flags$|=128))}if(i&&i.style){let a;typeof i.style=="string"&&(a=i.style);const c=aS(n);jf.has(c)||(n.$tagName$,((l,u,f)=>{let d=jf.get(l);nS&&f?(d=d||new CSSStyleSheet,typeof d=="string"?d=u:d.replaceSync(u)):d=u,jf.set(l,d)})(c,a,!!(1&n.$flags$)))}}const o=e.$ancestorComponent$,s=()=>Av(e,!0);o&&o["s-rc"]?o["s-rc"].push(s):s()},B1=t=>{_v(t,"connectedCallback")},ub=t=>{_v(t,"disconnectedCallback")},d7=(t,e={})=>{var n;const r=[],i=e.exclude||[],o=kh.customElements,s=Mi.head,a=s.querySelector("meta[charset]"),c=Mi.createElement("style"),l=[];let u,f=!0;Object.assign(Cn,e),Cn.$resourcesUrl$=new URL(e.resourcesUrl||"./",Mi.baseURI).href;let d=!1;if(t.map((h=>{h[1].map((p=>{var g;const y={$flags$:p[0],$tagName$:p[1],$members$:p[2],$listeners$:p[3]};4&y.$flags$&&(d=!0),y.$members$=p[2],y.$watchers$=(g=p[4])!=null?g:{};const v=y.$tagName$,m=class extends HTMLElement{constructor(w){if(super(w),this.hasRegisteredEventListeners=!1,((E,S)=>{const R={$flags$:0,$hostElement$:E,$cmpMeta$:S,$instanceValues$:new Map};R.$onReadyPromise$=new Promise((F=>R.$onReadyResolve$=F)),E["s-p"]=[],E["s-rc"]=[],yv.set(E,R)})(w=this,y),1&y.$flags$)if(w.shadowRoot){if(w.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${y.$tagName$}! Mode is set to ${w.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else w.attachShadow({mode:"open"})}connectedCallback(){os(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),f?l.push(this):Cn.jmp((()=>(w=>{if((1&Cn.$flags$)==0){const E=os(w),S=E.$cmpMeta$;if(S.$tagName$,1&E.$flags$)E?.$lazyInstance$?B1(E.$lazyInstance$):E?.$onReadyPromise$&&E.$onReadyPromise$.then((()=>B1(E.$lazyInstance$)));else{E.$flags$|=1;{let R=w;for(;R=R.parentNode||R.host;)if(R["s-p"]){uS(E,E.$ancestorComponent$=R);break}}S.$members$&&Object.entries(S.$members$).map((([R,[F]])=>{if(31&F&&w.hasOwnProperty(R)){const $=w[R];delete w[R],w[R]=$}})),f7(w,E,S)}}})(this)))}disconnectedCallback(){Cn.jmp((()=>(async w=>{if((1&Cn.$flags$)==0){const E=os(w);E?.$lazyInstance$?ub(E.$lazyInstance$):E?.$onReadyPromise$&&E.$onReadyPromise$.then((()=>ub(E.$lazyInstance$)))}})(this)))}componentOnReady(){return os(this).$onReadyPromise$}};y.$lazyBundleId$=h[0],i.includes(v)||o.get(v)||(r.push(v),o.define(v,hS(m,y,1)))}))})),r.length>0&&(d&&(c.textContent+=tS),c.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",c.innerHTML.length)){c.setAttribute("data-styles","");const h=(n=Cn.$nonce$)!=null?n:iS(Mi);h!=null&&c.setAttribute("nonce",h),s.insertBefore(c,a?a.nextSibling:s.firstChild)}f=!1,l.length?l.map((h=>h.connectedCallback())):Cn.jmp((()=>u=setTimeout(fS,30)))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var h7=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,d7([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>Cn.$nonce$=t});const p7={fontFamily:"Roboto, sans-serif"},Cv=({className:t},e)=>he("div",{style:p7,class:t},e),sp=({Icon:t,text:e})=>he("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},he("div",{class:"flexItem1"},he(t,null)),he("div",{class:"flexItem11"},he("span",{style:{lineHeight:"2",color:"black"}},e))),g7=()=>he("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),he("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),v7=()=>he("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),y7=()=>he("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),m7=()=>he("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),he("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),he("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function Sv({version:t}){return he("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const Iv=()=>he("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he("rect",{width:"16",height:"16",fill:"white"}),he("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),Tv=()=>he("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},he("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function Is(t,e){return t.toString(2).padStart(e,"0")}function fb(t,e){const n=t%e;return n>=0?n:e+n}function Tr(t,e){return new Array(t).fill(e)}function db(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function hb(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function pb(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map((n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r}))},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map((n=>{if((function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)})(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]}))}}}class Sr{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,i=new Array(r);let o;for(const s of n){const a=s.split("").map((c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)}));if(o&&a.length!==o)throw new Error(`Bitmap.fromString different row sizes: width=${o} cur=${a.length}`);o=a.length,i.push(a)}return o||(o=0),new Sr({height:r,width:o},i)}constructor(e,n){const{height:r,width:i}=Sr.size(e);this.data=n||Array.from({length:r},(()=>Tr(i,void 0))),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=fb(e.x,this.width),e.y=fb(e.y,this.height),e}rect(e,n,r){const{x:i,y:o}=this.xy(e),{height:s,width:a}=Sr.size(n,this.size({x:i,y:o}));for(let c=0;c<s;c++)for(let l=0;l<a;l++)this.data[o+c][i+l]=typeof r=="function"?r({x:l,y:c},this.data[o+c][i+l]):r;return this}rectRead(e,n,r){return this.rect(e,n,((i,o)=>(r(i,o),o)))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,o=Tr(e,n),s=Array.from({length:e},(()=>Tr(i,n)));return new Sr({height:r,width:i},[...s,...this.data.map((a=>[...o,...a,...o])),...s])}embed(e,n){return this.rect(e,n.size(),(({x:r,y:i})=>n.data[i][r]))}rectSlice(e,n=this.size()){const r=new Sr(Sr.size(n,this.size(this.xy(e))));return this.rect(e,n,(({x:i,y:o},s)=>r.data[o][i]=s)),r}inverse(){const{height:e,width:n}=this;return new Sr({height:n,width:e}).rect({x:0,y:0},1/0,(({x:r,y:i})=>this.data[r][i]))}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new Sr({height:e*n,width:e*r}).rect({x:0,y:0},1/0,(({x:i,y:o})=>this.data[Math.floor(o/e)][Math.floor(i/e)]))}clone(){return new Sr(this.size()).rect({x:0,y:0},this.size(),(({x:e,y:n})=>this.data[n][e]))}assertDrawn(){this.rectRead(0,1/0,((e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)}))}toString(){return this.data.map((e=>e.map((n=>n===void 0?"?":n?"X":" ")).join(""))).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let o=0;o<e;o+=2){for(let s=0;s<n;s++){const a=r[o][s],c=o+1>=e||r[o+1][s];a||c?!a&&c?i+="":a&&!c?i+="":a&&c&&(i+=" "):i+=""}i+=`
`}return i}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map((i=>i.map((o=>o?r:n)).join(""))).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,(({x:n,y:r},i)=>{i&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)})),e+="</svg>",e}toGIF(){const e=a=>[255&a,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,((a,c)=>r.push(+(c===!0))));const i=126,o=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...Tr(381,0),44,0,0,0,0,...n,0,7],s=Math.floor(r.length/i);for(let a=0;a<s;a++)o.push(127,128,...r.slice(i*a,i*(a+1)).map((c=>+c)));return o.push(r.length%i+1,128,...r.slice(s*i).map((a=>+a))),o.push(1,129,0,59),new Uint8Array(o)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let o=0;for(let s=0;s<n;s++)for(let a=0;a<r;a++){const c=this.data[s][a]?0:255;i[o++]=c,i[o++]=c,i[o++]=c,e||(i[o++]=255)}return{height:n,width:r,data:i}}}const gb=["low","medium","quartile","high"],vb=["numeric","alphanumeric","byte","kanji","eci"],w7=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],b7={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},E7={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},Hn={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=Hn.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);const o=[6];for(let s=1;s<r;s++)o.push(e-(r-s)*i);return o.push(e),o},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=Hn.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^Hn.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:pb("0123456789"),alphanumerc:pb("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][Hn.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=w7[t-1],r=b7[e][t-1],i=E7[e][t-1],o=Math.floor(n/i)-r,s=i-n%i;return{words:r,numBlocks:i,shortBlocks:s,blockLen:o,capacity:8*(n-r*i),total:(r+o)*i+i-s}}},L1=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],Ie={tables:(t=>{const e=Tr(256,0),n=Tr(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,256&i&&(i^=285);return{exp:e,log:n}})(),exp:t=>Ie.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return Ie.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:Ie.tables.exp[(Ie.tables.log[t]+Ie.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>Ie.tables.exp[Ie.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return Ie.tables.exp[255-Ie.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=Tr(t+1,0);return n[0]=e,Ie.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[Ie.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=Tr(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=Ie.add(n[r+i],Ie.mul(t[r],e[i]));return Ie.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=Tr(t.length,0);for(let r=0;r<t.length;r++)n[r]=Ie.mul(t[r],e);return Ie.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=Tr(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=Ie.mul(t[i],n);return Ie.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=Tr(r.length,0),o=r.length-n.length,s=r.slice(0,o);for(let a=0;a<s.length;a++)i[a]=s[a];for(let a=o;a<r.length;a++)i[a]=Ie.add(n[a-o],r[a]);return Ie.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let o=1;o<e.length;o++)e[o]!==0&&(n[r+o]=Ie.add(n[r+o],Ie.mul(e[o],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=Ie.mulPoly(e,[1,Ie.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return Ie.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=Ie.add(Ie.mul(e,n),t[r]);return n},euclidian(t,e,n){Ie.degree(t)<Ie.degree(e)&&([t,e]=[e,t]);let r=t,i=e,o=[0],s=[1];for(;2*Ie.degree(i)>=n;){let l=r,u=o;if(r=i,o=s,r[0]===0)throw new Error("rLast[0] === 0");i=l;let f=[0];const d=Ie.inv(r[0]);for(;Ie.degree(i)>=Ie.degree(r)&&i[0]!==0;){const h=Ie.degree(i)-Ie.degree(r),p=Ie.mul(i[0],d);f=Ie.addPoly(f,Ie.monomial(h,p)),i=Ie.addPoly(i,Ie.mulPolyMonomial(r,h,p))}if(f=Ie.mulPoly(f,o),s=Ie.addPoly(f,u),Ie.degree(i)>=Ie.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=Ie.coefficient(s,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=Ie.inv(a);return[Ie.mulPolyScalar(s,c),Ie.mulPolyScalar(i,c)]}};function x7(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:o,total:s}=Hn.capacity(t,e),a=(c=n,{encode(l){const u=Ie.divisorPoly(c),f=Array.from(l);return f.push(...u.slice(0,-1).fill(0)),Uint8Array.from(Ie.remainderPoly(f,u))},decode(l){const u=l.slice(),f=Ie.polynomial(Array.from(l));let d=Tr(c,0),h=!1;for(let w=0;w<c;w++){const E=Ie.evalPoly(f,Ie.exp(w));d[d.length-1-w]=E,E!==0&&(h=!0)}if(!h)return u;d=Ie.polynomial(d);const p=Ie.monomial(c,1),[g,y]=Ie.euclidian(p,d,c),v=Tr(Ie.degree(g),0);let m=0;for(let w=1;w<256&&m<v.length;w++)Ie.evalPoly(g,w)===0&&(v[m++]=Ie.inv(w));if(m!==v.length)throw new Error("RS.decode: wrong errors number");for(let w=0;w<v.length;w++){const E=u.length-1-Ie.log(v[w]);if(E<0)throw new Error("RS.decode: wrong error location");const S=Ie.inv(v[w]);let R=1;for(let F=0;F<v.length;F++)w!==F&&(R=Ie.mul(R,Ie.add(1,Ie.mul(v[F],S))));u[E]=Ie.add(u[E],Ie.mul(Ie.evalPoly(y,S),Ie.inv(R)))}return u}});var c;return{encode(l){const u=[],f=[];for(let g=0;g<i;g++){const y=o+(g<r?0:1);u.push(l.subarray(0,y)),f.push(a.encode(l.subarray(0,y))),l=l.subarray(y)}const d=db(...u),h=db(...f),p=new Uint8Array(d.length+h.length);return p.set(d),p.set(h,d.length),p},decode(l){if(l.length!==s)throw new Error(`interleave.decode: len(data)=${l.length}, total=${s}`);const u=[];for(let h=0;h<i;h++){const p=h<r;u.push(new Uint8Array(n+o+(p?0:1)))}let f=0;for(let h=0;h<o;h++)for(let p=0;p<i;p++)u[p][h]=l[f++];for(let h=r;h<i;h++)u[h][o]=l[f++];for(let h=o;h<o+n;h++)for(let p=0;p<i;p++){const g=p<r;u[p][h+(g?0:1)]=l[f++]}const d=[];for(const h of u)d.push(...Array.from(a.decode(h)).slice(0,-n));return Uint8Array.from(d)}}}function yb(t,e,n,r){let i="",o=n.length;if(r==="numeric"){const f=Hn.alphabet.numeric.decode(n.split("")),d=f.length;for(let h=0;h<d-2;h+=3)i+=Is(100*f[h]+10*f[h+1]+f[h+2],10);d%3==1?i+=Is(f[d-1],4):d%3==2&&(i+=Is(10*f[d-2]+f[d-1],7))}else if(r==="alphanumeric"){const f=Hn.alphabet.alphanumerc.decode(n.split("")),d=f.length;for(let h=0;h<d-1;h+=2)i+=Is(45*f[h]+f[h+1],11);d%2==1&&(i+=Is(f[d-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const f=(function(d){if(typeof d!="string")throw new Error("utf8ToBytes expected string, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))})(n);o=f.length,i=Array.from(f).map((d=>Is(d,8))).join("")}}const{capacity:s}=Hn.capacity(t,e),a=Is(o,Hn.lengthBits(t,r));let c=Hn.modeBits[r]+a+i;if(c.length>s)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,s-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let f=0;c.length!==s;f++)c+=l[f%16];const u=Uint8Array.from(c.match(/(.{8})/g).map((f=>+`0b${f}`)));return x7(t,e).encode(u)}function mb(t,e,n,r,i=!1){const o=(function(c,l,u,f=!1){const d=Hn.size.encode(c);let h=new Sr(d+2);const p=new Sr(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);h=h.embed(0,p).embed({x:-p.width,y:0},p).embed({x:0,y:-p.height},p),h=h.rectSlice(1,d);const g=new Sr(1).rect(0,1,!0).border(1,!1).border(1,!0),y=Hn.alignmentPatterns(c);for(const v of y)for(const m of y)h.data[v][m]===void 0&&h.embed({x:m-2,y:v-2},g);h=h.hLine({x:0,y:6},1/0,(({x:v},m)=>m===void 0?v%2==0:m)).vLine({x:6,y:0},1/0,(({y:v},m)=>m===void 0?v%2==0:m));{const v=Hn.formatBits(l,u),m=w=>!f&&(v>>w&1)==1;for(let w=0;w<6;w++)h.data[w][8]=m(w);for(let w=6;w<8;w++)h.data[w+1][8]=m(w);for(let w=8;w<15;w++)h.data[d-15+w][8]=m(w);for(let w=0;w<8;w++)h.data[8][d-w-1]=m(w);for(let w=8;w<9;w++)h.data[8][15-w-1+1]=m(w);for(let w=9;w<15;w++)h.data[8][15-w-1]=m(w);h.data[d-8][8]=!f}if(c>=7){const v=Hn.versionBits(c);for(let m=0;m<18;m+=1){const w=!f&&(v>>m&1)==1,E=Math.floor(m/3),S=m%3+d-8-3;h.data[E][S]=w,h.data[S][E]=w}}return h})(t,e,r,i);let s=0;const a=8*n.length;if((function(c,l,u){const f=c.height,d=L1[l];let h=-1,p=f-1;for(let g=f-1;g>0;g-=2){for(g==6&&(g=5);;p+=h){for(let y=0;y<2;y+=1){const v=g-y;c.data[p][v]===void 0&&u(v,p,d(v,p))}if(p+h<0||p+h>=f)break}h=-h}})(o,r,((c,l,u)=>{let f=!1;s<a&&(f=(n[s>>>3]>>(7-s&7)&1)!=0,s++),o.data[l][c]=f!==u})),s!==a)throw new Error("QR: bytes left after draw");return o}function A7(t){const e=t.inverse(),n=h=>{let p=0;for(let g,y=0,v=1;y<h.length;y++)g===h[y]&&(v++,y!==h.length-1)||(v>=5&&(p+=v-5+3),g=h[y],v=1);return p};let r=0;t.data.forEach((h=>r+=n(h))),e.data.forEach((h=>r+=n(h)));let i=0,o=t.data;const s=t.width-1,a=t.height-1;for(let h=0;h<s;h++)for(let p=0;p<a;p++){const g=h+1,y=p+1;o[h][p]===o[g][p]&&o[g][p]===o[h][y]&&o[g][p]===o[g][y]&&(i+=3)}const c=h=>{const p=[!0,!1,!0,!0,!0,!1,!0],g=[!1,!1,!1,!1],y=[...p,...g],v=[...g,...p];let m=0;for(let w=0;w<h.length;w++)hb(h,y,w)&&(m+=40),hb(h,v,w)&&(m+=40);return m};let l=0;for(const h of t.data)l+=c(h);for(const h of e.data)l+=c(h);let u=0;t.rectRead(0,1/0,((h,p)=>u+=p?1:0));const f=u/(t.height*t.width)*100,d=10*Math.floor(Math.abs(f-50)/5);return r+i+l+d}function pS(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!gb.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${gb}`)})(r);const i=n.encoding!==void 0?n.encoding:(function(u){let f="numeric";for(let d of u)if(!Hn.alphabet.numeric.has(d)&&(f="alphanumeric",!Hn.alphabet.alphanumerc.has(d)))return"byte";return f})(t);(function(u){if(!vb.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${vb}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(i),n.mask!==void 0&&(function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!L1[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)})(n.mask);let o,s=n.version,a=new Error("Unknown error");if(s!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(s),o=yb(s,r,t,i);else for(let u=1;u<=40;u++)try{o=yb(u,r,t,i),s=u;break}catch(f){a=f}if(!s||!o)throw a;let c=(function(u,f,d,h){if(h===void 0){const p=(function(){let g,y=1/0;return{add(v,m){v>=y||(g=m,y=v)},get:()=>g,score:()=>y}})();for(let g=0;g<L1.length;g++)p.add(A7(mb(u,f,d,g,!0)),g);h=p.get()}if(h===void 0)throw new Error("Cannot find mask");return mb(u,f,d,h)})(s,r,o,n.mask);c.assertDrawn();const l=n.border===void 0?2:n.border;if(!Number.isSafeInteger(l))throw new Error("Wrong border type="+typeof l);if(c=c.border(l,!1),n.scale!==void 0&&(c=c.scale(n.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG();if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}const ap={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class Ov{constructor(e){var n;this.translations=ap,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e?.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some((n=>n.toLowerCase().startsWith("en"))))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);this.translations=await i.json()}catch(r){console.warn(` Failed to load ${n} translations, falling back to English:`,r),this.translations=ap}else this.translations=ap}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let i=n;for(const o of r){if(typeof i!="object")return"";i=i[o]}return typeof i=="string"?i:""}}var Sl;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(Sl||(Sl={}));const gS=class{constructor(t){mv(this,t),this.close=fs(this,"close"),this.startDesktopOnboarding=fs(this,"startDesktopOnboarding"),this.trackAnalytics=fs(this,"trackAnalytics"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new Ov}componentDidLoad(){this.trackAnalytics.emit({event:Sl.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:Sl.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:Sl.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=pS(this.link,"svg",{ecc:"medium",scale:2});return he(Cv,{className:"install-model"},he("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),he("div",{class:"modal"},he("div",{class:"closeButtonContainer"},he("div",{class:"right"},he("span",{class:"closeButton",onClick:()=>this.onClose(!0)},he(Iv,null)))),he("div",{class:"logoContainer"},he(Tv,null)),he("div",null,he("div",{class:"tabcontainer"},he("div",{class:"flexContainer"},he("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),he("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),he("div",{style:{display:e===1?"none":"block"}},he("div",{class:"flexContainer"},he("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&he("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),he("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",he("br",null),he("span",{class:"blue"},he("b",null,t("META_MASK_MOBILE_APP"))))))),he("div",{style:{display:e===2?"none":"block"}},he("div",{class:"item"},he(sp,{Icon:v7,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),he("div",{class:"item"},he(sp,{Icon:g7,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),he("div",{class:"item"},he(sp,{Icon:y7,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),he("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},he(m7,null),he("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),he(Sv,{version:this.sdkVersion})))}get el(){return Mh(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};gS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const vS=class{constructor(t){mv(this,t),this.close=fs(this,"close"),this.disconnect=fs(this,"disconnect"),this.updateOTPValue=fs(this,"updateOTPValue"),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new Ov}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=i=>this.i18nInstance.t(i);return he(Cv,{className:"pending-modal"},he("div",{class:"backdrop",onClick:()=>this.onClose()}),he("div",{class:"modal"},he("div",{class:"closeButtonContainer"},he("div",{class:"right"},he("span",{class:"closeButton",onClick:()=>this.onClose()},he(Iv,null)))),he("div",{class:"logoContainer"},he(Tv,null)),he("div",null,he("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},he("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),he("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&he("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),he("div",{style:{marginTop:"20px"}},he("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),he(Sv,{version:n})))}get el(){return Mh(this)}};vS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const _7=()=>he("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),C7=()=>he("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he("rect",{width:"400",height:"300",fill:"white"}),he("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),he("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),he("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),he("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),he("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),he("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),he("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),he("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),he("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),he("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),he("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),he("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),he("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),he("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),he("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),he("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),he("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),he("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),he("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),he("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),he("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),he("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),yS=class{constructor(t){mv(this,t),this.close=fs(this,"close"),this.connectWithExtension=fs(this,"connectWithExtension"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new Ov,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=i=>this.i18nInstance.t(i),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=pS(this.link,"svg",{ecc:"medium",scale:2});return he(Cv,{className:"select-modal"},he("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),he("div",{class:"modal"},he("div",{class:"closeButtonContainer"},he("div",{class:"right"},he("span",{class:"closeButton",onClick:()=>this.onClose(!0)},he(Iv,null)))),he("div",{class:"logoContainer"},he(Tv,null)),he("div",null,he("div",{class:"tabcontainer"},he("div",{class:"flexContainer"},he("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),he("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),he("div",{style:{display:n===1?"none":"block"}},he("div",{class:"flexContainer"},he("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},he("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),he("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),he("br",null),he("span",{class:"blue"},he("b",null,t("META_MASK_MOBILE_APP"))))))),he("div",{style:{display:n===2?"none":"block"}},he("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},he(C7,null)),he("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),he("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},he(_7,null),he("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),he(Sv,{version:e})))}get el(){return Mh(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};yS.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var S7=Object.freeze({__proto__:null,mm_install_modal:gS,mm_pending_modal:vS,mm_select_modal:yS});const Vd=Re(null),mS=Re(null);let cp=null,zc=null;function I7(){if(typeof window>"u")return null;const t=window.ethereum;return t?Array.isArray(t.providers)?t.providers.find(e=>e?.isMetaMask)||null:t.isMetaMask?t:null:null}function wS(){if(zc=I7(),zc||(zc=new H9({dappMetadata:{name:"NFT Ticketing",url:window.location.origin},checkInstallationImmediately:!1}).getProvider()),!zc)throw new Error("MetaMask tidak terdeteksi.");return zc}async function bS(){const t=wS(),e=await t.request({method:"eth_requestAccounts"});cp=new Or(t);const n=await cp.getNetwork();return Vd.value=e?.[0]||null,mS.value=Number(n.chainId),t.on?.("accountsChanged",r=>{Vd.value=r?.[0]||null}),t.on?.("chainChanged",()=>window.location.reload()),{provider:cp}}async function iu(t="amoy"){const e=wS(),r=String(t||"polygon").toLowerCase()==="amoy"?{chainId:"0x13882",add:{chainId:"0x13882",chainName:"Polygon Amoy",rpcUrls:["https://rpc-amoy.polygon.technology"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://amoy.polygonscan.com"]}}:{chainId:"0x89",add:{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-bor-rpc.publicnode.com"],nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorerUrls:["https://polygonscan.com"]}};if((await e.request({method:"eth_chainId"}))?.toLowerCase()===r.chainId.toLowerCase())return!0;try{return await e.request({method:"wallet_switchEthereumChain",params:[{chainId:r.chainId}]}),!0}catch(o){if(o?.code===4902)return await e.request({method:"wallet_addEthereumChain",params:[r.add]}),!0;throw o}}async function T7(){return iu("polygon")}async function O7(){return iu("amoy")}function ES(){return{connect:bS,ensureChain:iu,switchToPolygonMainnet:T7,switchToPolygonAmoy:O7,account:Vd,chainId:mS}}const Pa=["function owner() view returns (address)","function feeRecipient() view returns (address)","function events(uint256 id) view returns (address promoter,uint256 tokenId,uint256 priceWei,uint256 maxSupply,uint256 sold,bool active,uint64 eventTime,string metadataURI)","function isPromoter(address account) view returns (bool)","function nextEventId() view returns (uint256)","function promoterBalances(uint256 eventId) view returns (uint256)","function feeBalances(uint256 eventId) view returns (uint256)","function createEvent(uint256 priceWei,uint256 maxSupply,uint64 eventTime,string metadataURI) external returns (uint256)","function updateEvent(uint256 eventId,uint256 newPriceWei,uint256 additionalSupply,bool active,uint64 newEventTime,string newMetadataURI) external","function buyTicket(uint256 eventId,uint256 quantity) external payable","function setPromoter(address account,bool active) external","function withdrawPromoter(uint256 eventId) external","function withdrawFees(uint256 eventId) external","event EventCreated(uint256 indexed eventId,address indexed promoter,uint256 tokenId,uint256 priceWei,uint256 maxSupply,uint64 eventTime,string metadataURI)","event TicketPurchased(uint256 indexed eventId,address indexed buyer,uint256 quantity,uint256 totalPaidWei,uint256 feeWei,uint256 promoterShareWei)","event PromoterWithdraw(uint256 indexed eventId,address indexed promoter,uint256 amount)","event FeeWithdraw(uint256 indexed eventId,address indexed admin,uint256 amount)"],R7={class:"topbar"},P7={class:"container"},N7={class:"hero"},k7={class:"hero-title"},M7={key:0,class:"alert error"},D7={class:"cards"},B7={class:"img-wrap"},L7={class:"title"},F7={key:0,class:"adm-tools"},U7=["onClick"],H7=["onClick","title"],$7=["onClick"],V7={class:"meta"},K7={class:"v"},j7={class:"v"},G7={class:"desc"},z7=["onClick"],W7={class:"modal-card"},q7={class:"scroll"},Y7={class:"file"},X7={key:1,class:"mt-2"},Z7=["src"],Q7={class:"mb-4"},J7={class:"relative"},eD=["value"],tD={class:"mt-1 text-xs text-gray-300 flex items-center gap-2"},nD={key:0},rD={key:1},iD={key:2},oD={class:"opacity-70 ml-1"},sD={class:"chk"},aD={class:"actions-bar"},cD=["disabled"],lD={class:"modal-card"},uD={class:"scroll"},fD={class:"chk"},dD={class:"actions-bar"},hD={__name:"HomeView",setup(t){const e=ah(),n=yg(),r=Re(!1),i=()=>r.value=!r.value;Gr(()=>e.fullPath,()=>r.value=!1);const{account:o,ensureChain:s}=ES(),a="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15",c=Ge(()=>({"--hero-img":"url(/Background.png)"})),u="http://localhost:3001".replace(/\/+$/,"").replace(/\/api$/i,""),f=()=>(o.value||localStorage.getItem("walletAddress")||"").toString();function d(se){const J=f();return J?se+(se.includes("?")?"&":"?")+"wallet="+encodeURIComponent(J):se}async function h(se){const J=await p("/api/price/idr-to-wei",{method:"POST",body:JSON.stringify({amount_idr:se})});if(!J||!J.price_wei)throw new Error("Gagal konversi");return J.idr_per_pol&&(H.value=Number(J.idr_per_pol)),BigInt(J.price_wei)}async function p(se,J={}){const Ee=se.startsWith("/api")?se:`/api${se.startsWith("/")?se:`/${se}`}`,Fe=String(J?.method||"GET").toUpperCase();let Tt=`${u}${Ee}`;Fe==="GET"&&(Tt=d(Tt));const Mt=await fetch(Tt,{...J,headers:{"content-type":"application/json",...J.headers||{},"x-wallet-address":f()}}),Pt=await Mt.json().catch(()=>({}));if(!Mt.ok)throw new Error(Pt?.error||Pt?.message||`HTTP ${Mt.status}`);return Pt}async function g(se){const J=new FormData;J.append("file",se);const Ee=await fetch(`${u}/api/upload`,{method:"POST",headers:{"x-wallet-address":f()},body:J}),Fe=await Ee.json().catch(()=>({}));if(!Ee.ok)throw new Error(Fe?.error||Fe?.message||`HTTP ${Ee.status}`);if(!Fe?.url||!/^https?:\/\//i.test(Fe.url))throw new Error("Upload gagal: URL tidak valid");return Fe.url}const y=Re("customer"),v=Ge(()=>y.value==="admin"),m=Ge(()=>y.value==="promoter"),w=Ge(()=>v.value||m.value?"CREATE A NEW EVENT":"UPCOMING CONCERT"),E=Ge(()=>(f()||"").toLowerCase());function S(se){return v.value?!0:m.value?(se.promoter_wallet||"").toLowerCase()===E.value:!1}async function R(){if(!o.value&&window?.ethereum)try{const se=await window.ethereum.request({method:"eth_accounts"});se?.[0]&&(o.value=se[0])}catch{}}async function F(){if(!f()){y.value="customer";return}try{const J=await p("/api/me");y.value=J?.role||"customer"}catch{y.value="customer"}}const $=Re(!1),U=Re(""),B=Re([]);async function W(){$.value=!0,U.value="";try{const se=v.value?"?all=1":"",J=await p(`/api/events${se}`);B.value=Array.isArray(J?.items)?J.items:[]}catch(se){U.value=String(se.message||se)}finally{$.value=!1}}function V(se){o.value=se?.[0]||"",F(),W()}cu(async()=>{await R(),window?.ethereum?.on&&window.ethereum.on("accountsChanged",V),await F(),await W()}),lg(()=>{window?.ethereum?.removeListener&&window.ethereum.removeListener("accountsChanged",V)}),Gr(o,async()=>{await F(),await W()});const L=Re(""),I=Ge(()=>{const se=L.value.trim().toLowerCase();return se?B.value.filter(J=>[J.title,J.venue,J.description].some(Ee=>String(Ee||"").toLowerCase().includes(se))):B.value});function x(se){n.push({name:"event",params:{id:se.id}})}const P=Re(!1),G=Re(!1),b=cc({title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),C=Re(null),T=Re(""),N=Re(!1),_=Re(null),A=Re(""),O=Re(""),M=Re(""),H=Re(null),k=Re(!1),j=Re("");function X(se){return se?String(se).replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}function ee(se){let J=se.target.value||"";if(J=J.replace(/[^\d]/g,""),!J){b.price_idr=0,M.value="";return}const Ee=Number(J);b.price_idr=Ee,M.value=X(Ee)}Gr(()=>b.price_idr,se=>{M.value=se?X(se):""});function ae(se){const J=se?.target?.files?.[0];C.value=J||null,T.value&&URL.revokeObjectURL(T.value),T.value=J?URL.createObjectURL(J):""}function D(se){const J=se.target.files?.[0];if(!J){_.value=null,A.value&&URL.revokeObjectURL(A.value),A.value="",O.value="";return}_.value=J,A.value&&URL.revokeObjectURL(A.value),A.value=URL.createObjectURL(J)}async function K(){try{k.value=!0,j.value="";const se=await p("/api/price/pol"),J=Number(se?.price_idr||0);if(!J)throw new Error("Harga tidak valid");H.value=J}catch(se){console.error(se),j.value="Gagal mengambil harga POL/IDR"}finally{k.value=!1}}Gr(P,se=>{se&&K()});const Z=Ge(()=>{if(!H.value)return null;const se=Number(b.price_idr||0);if(!se)return null;const J=se/H.value;return isFinite(J)?J:null});function re(se){if(!se)return"";const J=new Date(se);if(Number.isNaN(J.getTime()))throw new Error("Tanggal tidak valid");return J.toISOString()}async function Q(){try{if(!b.title||!b.date_iso||!b.venue)throw new Error("Title/Date/Venue wajib diisi");const se=Number(b.price_idr);if(!se||se<=0)throw new Error("Harga tiket (IDR) wajib > 0");if(C.value&&!b.image_url){N.value=!0;const Dt=await g(C.value);b.image_url=Dt}if(_.value&&!O.value){N.value=!0;const Dt=await g(_.value);O.value=Dt}const J=O.value||b.image_url||"";await s("amoy");const Fe=await new Or(window.ethereum).getSigner(),Tt=new ci(a,Pa,Fe),Mt=await h(se),Pt=BigInt(Math.floor(Number(b.total_tickets)||0));if(Pt<=0n)throw new Error("Total tiket harus > 0");const jn=new Date(b.date_iso);if(Number.isNaN(jn.getTime()))throw new Error("Tanggal event tidak valid");const mi=BigInt(Math.floor(jn.getTime()/1e3));try{await Tt.createEvent.staticCall(Mt,Pt,mi,J)}catch(Dt){console.error("callStatic createEvent REVERT:",Dt),console.error("reason:",Dt.reason),console.error("raw error:",Dt.error??Dt.data??Dt.info),alert(Dt?.reason||Dt?.error?.message||Dt?.message||"Create event gagal (revert dari smart contract)");return}const un=await(await Tt.createEvent(Mt,Pt,mi,J)).wait();if(!un.status)throw new Error("Transaksi createEvent gagal di blockchain");let tn=null;for(const Dt of un.logs)try{const _u=Tt.interface.parseLog(Dt);if(_u?.name==="EventCreated"){tn=Number(_u.args.eventId.toString());break}}catch{}if(tn==null)throw new Error("Tidak bisa menemukan eventId dari log EventCreated");const ga={title:b.title,date_iso:re(b.date_iso),venue:b.venue,description:b.description||"",image_url:b.image_url||null,price_idr:se,total_tickets:Number(b.total_tickets)||0,listed:!!b.listed,chain_event_id:tn};await p("/api/events",{method:"POST",body:JSON.stringify(ga)}),Object.assign(b,{title:"",date_iso:"",venue:"",description:"",image_url:"",price_idr:0,total_tickets:0,listed:!0}),M.value="",C.value=null,T.value&&(URL.revokeObjectURL(T.value),T.value=""),_.value=null,A.value&&URL.revokeObjectURL(A.value),A.value="",O.value="",P.value=!1,await W(),alert(`Event berhasil dibuat. ID on-chain: ${tn}`)}catch(se){console.error(se),alert(`Create event gagal: ${se?.message||se}`)}finally{N.value=!1}}const Y=Re(null),te=cc({title:"",date_iso:"",venue:"",description:"",image_url:"",price_pol:0,total_tickets:0,listed:!0});function ie(se){Y.value=se.id,te.title=se.title||"";try{const J=new Date(se.date_iso),Ee=Fe=>String(Fe).padStart(2,"0");te.date_iso=`${J.getFullYear()}-${Ee(J.getMonth()+1)}-${Ee(J.getDate())}T${Ee(J.getHours())}:${Ee(J.getMinutes())}`}catch{te.date_iso=""}te.venue=se.venue||"",te.description=se.description||"",te.image_url=se.image_url||"",te.price_idr=Number(se.price_idr||0),te.total_tickets=Number(se.total_tickets||0),te.listed=!!se.listed,G.value=!0}function oe(){G.value=!1,Y.value=null}async function le(){try{const se={title:te.title,date_iso:re(te.date_iso),venue:te.venue,description:te.description,image_url:te.image_url||null,price_idr:Number(te.price_idr)||0,total_tickets:Number(te.total_tickets)||0,listed:!!te.listed};await p(`/api/events/${Y.value}`,{method:"PUT",body:JSON.stringify(se)}),G.value=!1,Y.value=null,await W(),alert("Event updated.")}catch(se){alert(`Update failed: ${se.message}`)}}async function ve(se){if(confirm("Delete this event?"))try{await p(`/api/events/${se}`,{method:"DELETE"}),await W(),alert("Deleted.")}catch(J){alert(`Delete failed: ${J.message}`)}}async function de(se){try{await p(`/api/events/${se.id}/list`,{method:"PATCH",body:JSON.stringify({listed:!se.listed})}),await W()}catch(J){alert(`List/Delist failed: ${J.message}`)}}function me(se){if(se.image_url&&se.image_url.length>0)return se.image_url}return(se,J)=>(_e(),Se("div",{class:"home-page",style:as(c.value)},[q("header",R7,[J[26]||(J[26]=q("div",{class:"brand"},[q("img",{src:mg,alt:"Tickety"})],-1)),q("form",{class:"search search--top",onSubmit:J[1]||(J[1]=Ps(()=>{},["prevent"]))},[Nn(q("input",{class:"search-input","onUpdate:modelValue":J[0]||(J[0]=Ee=>L.value=Ee),type:"search",placeholder:"Search concerts, venues"},null,512),[[wr,L.value]]),J[24]||(J[24]=q("button",{class:"search-btn",type:"submit"},"",-1))],32),q("button",{class:"hamburger",onClick:Ps(i,["stop"]),"aria-label":"Toggle Sidebar"},[...J[25]||(J[25]=[q("span",null,null,-1),q("span",null,null,-1),q("span",null,null,-1)])])]),kt(wg,{modelValue:r.value,"onUpdate:modelValue":J[2]||(J[2]=Ee=>r.value=Ee)},null,8,["modelValue"]),q("main",P7,[q("section",N7,[J[27]||(J[27]=q("div",{class:"hero-bg","aria-hidden":"true"},null,-1)),q("h2",k7,Ne(w.value),1)]),U.value?(_e(),Se("div",M7,Ne(U.value),1)):Ye("",!0),q("section",D7,[(_e(!0),Se(dr,null,fg(I.value,Ee=>(_e(),Se("article",{key:Ee.id,class:"card"},[q("div",B7,[q("div",{class:"img",style:as({backgroundImage:`url(${me(Ee)})`})},null,4),J[28]||(J[28]=q("div",{class:"img-overlay"},null,-1)),q("div",L7,Ne(Ee.title),1),S(Ee)?(_e(),Se("div",F7,[q("button",{class:"adm-btn",onClick:Fe=>ie(Ee),title:"Edit"},"",8,U7),q("button",{class:"adm-btn",onClick:Fe=>de(Ee),title:Ee.listed?"Delist":"List"},Ne(Ee.listed?"":""),9,H7),q("button",{class:"adm-btn danger",onClick:Fe=>ve(Ee.id),title:"Delete"},"",8,$7)])):Ye("",!0)]),q("div",V7,[q("div",null,[J[29]||(J[29]=q("span",{class:"k"},"Location:",-1)),J[30]||(J[30]=tt()),q("span",K7,Ne(Ee.venue),1)]),q("div",null,[J[31]||(J[31]=q("span",{class:"k"},"Date:",-1)),J[32]||(J[32]=tt()),q("span",j7,Ne(new Date(Ee.date_iso).toLocaleString("id-ID")),1)])]),q("p",G7,Ne(Ee.description||"(Blank Text)"),1),q("button",{class:"buy",onClick:Fe=>x(Ee)},"BUY TICKET",8,z7)]))),128))])]),v.value||m.value?(_e(),Se("button",{key:0,class:"fab",title:"Add event","aria-label":"Create new event",onClick:J[3]||(J[3]=Ee=>P.value=!0)},[...J[33]||(J[33]=[tt("",-1),q("span",{class:"sr-only"},"Create new event",-1)])])):Ye("",!0),P.value?(_e(),Se("div",{key:1,class:"modal",onClick:J[12]||(J[12]=Ps(Ee=>P.value=!1,["self"]))},[q("div",W7,[q("button",{class:"modal-x","aria-label":"Close",onClick:J[4]||(J[4]=Ee=>P.value=!1)},""),J[46]||(J[46]=q("h3",null,"Create Event",-1)),q("form",{class:"form",onSubmit:Ps(Q,["prevent"])},[q("div",q7,[q("label",null,[J[34]||(J[34]=tt("Title ",-1)),Nn(q("input",{"onUpdate:modelValue":J[5]||(J[5]=Ee=>b.title=Ee)},null,512),[[wr,b.title]])]),q("label",null,[J[35]||(J[35]=tt("Date (UTC) ",-1)),Nn(q("input",{type:"datetime-local",step:"60","onUpdate:modelValue":J[6]||(J[6]=Ee=>b.date_iso=Ee)},null,512),[[wr,b.date_iso]])]),q("label",null,[J[36]||(J[36]=tt("Venue ",-1)),Nn(q("input",{"onUpdate:modelValue":J[7]||(J[7]=Ee=>b.venue=Ee)},null,512),[[wr,b.venue]])]),q("label",Y7,[J[37]||(J[37]=q("span",null,"Image",-1)),q("input",{type:"file",accept:"image/*",onChange:ae},null,32)]),T.value||b.image_url?(_e(),Se("div",{key:0,class:"img-preview",style:as({backgroundImage:`url(${T.value||b.image_url})`})},null,4)):Ye("",!0),J[44]||(J[44]=q("label",{class:"block text-sm font-medium mb-1"},"NFT Image (optional)",-1)),q("input",{type:"file",accept:"image/*",onChange:D},null,32),J[45]||(J[45]=q("p",{class:"mt-1 text-xs text-gray-400"},"Jika tidak diisi, NFT akan memakai gambar banner event.",-1)),A.value?(_e(),Se("div",X7,[J[38]||(J[38]=q("span",{class:"text-xs text-gray-300"},"Preview NFT:",-1)),q("img",{src:A.value,alt:"NFT preview",class:"mt-1 h-24 rounded object-cover"},null,8,Z7)])):Ye("",!0),q("div",Q7,[J[40]||(J[40]=q("label",{class:"block text-sm font-medium mb-1"},"Price (IDR)",-1)),q("div",J7,[J[39]||(J[39]=q("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-sm text-gray-400"}," Rp ",-1)),q("input",{type:"text",value:M.value,onInput:ee,inputmode:"numeric",class:"w-full rounded border px-3 py-2 pl-10",placeholder:"contoh: 150.000"},null,40,eD)]),q("div",tD,[k.value?(_e(),Se("span",nD,"Mengambil harga POL/IDR...")):j.value?(_e(),Se("span",rD,[tt(Ne(j.value)+" ",1),q("button",{type:"button",class:"underline ml-1",onClick:K}," coba lagi ")])):Z.value!==null?(_e(),Se("span",iD,[tt("  "+Ne(Z.value.toFixed(4))+" POL ",1),q("span",oD," (1 POL  "+Ne(H.value?.toLocaleString("id-ID"))+" IDR) ",1),q("button",{type:"button",class:"text-[10px] px-2 py-1 border rounded ml-2 opacity-70 hover:opacity-100",onClick:K}," Refresh ")])):Ye("",!0)])]),q("label",null,[J[41]||(J[41]=tt("Total Tickets ",-1)),Nn(q("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":J[8]||(J[8]=Ee=>b.total_tickets=Ee)},null,512),[[wr,b.total_tickets,void 0,{number:!0}]])]),q("label",sD,[Nn(q("input",{type:"checkbox","onUpdate:modelValue":J[9]||(J[9]=Ee=>b.listed=Ee)},null,512),[[hy,b.listed]]),J[42]||(J[42]=tt(" Listed",-1))]),q("label",null,[J[43]||(J[43]=tt("Description ",-1)),Nn(q("textarea",{rows:"3","onUpdate:modelValue":J[10]||(J[10]=Ee=>b.description=Ee)},null,512),[[wr,b.description]])])]),q("div",aD,[q("button",{type:"button",class:"btn ghost",onClick:J[11]||(J[11]=Ee=>P.value=!1)},"Cancel"),q("button",{type:"submit",class:"btn primary",disabled:N.value},Ne(N.value?"Uploading":"Create"),9,cD)])],32)])])):Ye("",!0),G.value?(_e(),Se("div",{key:2,class:"modal",onClick:J[23]||(J[23]=Ps(Ee=>oe(),["self"]))},[q("div",lD,[q("button",{class:"modal-x","aria-label":"Close",onClick:J[13]||(J[13]=Ee=>oe())},""),J[56]||(J[56]=q("h3",null,"Edit Event",-1)),q("form",{class:"form",onSubmit:Ps(le,["prevent"])},[q("div",uD,[q("label",null,[J[47]||(J[47]=tt("Title ",-1)),Nn(q("input",{"onUpdate:modelValue":J[14]||(J[14]=Ee=>te.title=Ee)},null,512),[[wr,te.title]])]),q("label",null,[J[48]||(J[48]=tt("Date (UTC) ",-1)),Nn(q("input",{type:"datetime-local",step:"60","onUpdate:modelValue":J[15]||(J[15]=Ee=>te.date_iso=Ee)},null,512),[[wr,te.date_iso]])]),q("label",null,[J[49]||(J[49]=tt("Venue ",-1)),Nn(q("input",{"onUpdate:modelValue":J[16]||(J[16]=Ee=>te.venue=Ee)},null,512),[[wr,te.venue]])]),q("label",null,[J[50]||(J[50]=tt("Image URL ",-1)),Nn(q("input",{"onUpdate:modelValue":J[17]||(J[17]=Ee=>te.image_url=Ee),placeholder:"https://..."},null,512),[[wr,te.image_url]])]),q("label",null,[J[51]||(J[51]=tt("Price (IDR) ",-1)),Nn(q("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":J[18]||(J[18]=Ee=>te.price_idr=Ee)},null,512),[[wr,te.price_idr,void 0,{number:!0}]])]),q("label",null,[J[52]||(J[52]=tt("Total Tickets ",-1)),Nn(q("input",{type:"number",min:"0",step:"1","onUpdate:modelValue":J[19]||(J[19]=Ee=>te.total_tickets=Ee)},null,512),[[wr,te.total_tickets,void 0,{number:!0}]])]),q("label",fD,[Nn(q("input",{type:"checkbox","onUpdate:modelValue":J[20]||(J[20]=Ee=>te.listed=Ee)},null,512),[[hy,te.listed]]),J[53]||(J[53]=tt(" Listed",-1))]),q("label",null,[J[54]||(J[54]=tt("Description ",-1)),Nn(q("textarea",{rows:"3","onUpdate:modelValue":J[21]||(J[21]=Ee=>te.description=Ee)},null,512),[[wr,te.description]])])]),q("div",dD,[q("button",{type:"button",class:"btn ghost",onClick:J[22]||(J[22]=Ee=>oe())},"Cancel"),J[55]||(J[55]=q("button",{type:"submit",class:"btn primary"},"Save",-1))])],32)])])):Ye("",!0)],4))}},pD=ca(hD,[["__scopeId","data-v-cb60878b"]]),wb="/assets/MetaMask-eUUnB-vT.png",gD={class:"login-page"},vD={class:"login-container"},yD={key:0,class:"hint"},mD={key:2,class:"wallet-info"},wD={class:"wallet-label"},bD=["src"],ED={class:"wallet-address"},xD=["disabled"],AD=["src"],_D=["disabled"],CD={key:0},SD={key:1},ID={key:5,class:"metamask-warning"},TD={__name:"Login",setup(t){const e=yg(),n=Re(!1),r=Re(!1),i=Re(""),o=Re(""),s=Re(!0),a=Re("");Gr(Vd,p=>{a.value=p||""});function c(p,g){i.value=p,o.value=g,setTimeout(()=>{i.value="",o.value=""},5e3)}function l(p){return p?`${p.slice(0,6)}...${p.slice(-4)}`:""}const u="http://localhost:3001".replace(/\/+$/,"");async function f(p,g){if(typeof p!="string")throw new Error("Path harus string");const y=[];p.startsWith("/api")&&u&&y.push(`${u}${p}`),y.push(p);const v={method:g?.method||"GET",headers:g?.headers||{},body:g?.body,credentials:g?.credentials||"omit"},m=12e3;let w;for(const E of y){const S=new AbortController,R=setTimeout(()=>S.abort(),m);try{const F=await fetch(E,{...v,signal:S.signal});clearTimeout(R);const $=await F.text().catch(()=>"");let U={};if($&&$.trim())try{U=JSON.parse($)}catch{U={message:$}}if(!F.ok){const B=(U?.message||`${F.status} ${F.statusText||""}`).trim();throw new Error(`Request gagal (${B}) ke ${E}`)}return U}catch(F){if(clearTimeout(R),w=F,!(F?.name==="AbortError"||F instanceof TypeError))break}}throw new Error(String(w?.message||w||"Failed to fetch"))}async function d(){n.value=!0;try{await bS(),await iu("amoy"),c("Wallet berhasil terhubung!","success")}catch(p){const g=String(p?.message||p);g.toLowerCase().includes("tidak terdeteksi")&&(s.value=!1),console.error(p),c(g,"error")}finally{n.value=!1}}async function h(){if(!a.value){c("Silakan hubungkan wallet terlebih dahulu!","error");return}let p;try{p=ct(a.value)}catch{c("Alamat wallet tidak valid.","error");return}r.value=!0;try{await iu("amoy");const g=p.toLowerCase(),{nonce:y}=await f(`/api/nonce?address=${encodeURIComponent(g)}`),v=await window.ethereum.request({method:"eth_chainId"}),m=parseInt(v,16),w=window.location.host,E=window.location.origin,S=new Date().toISOString(),F=`${w} wants you to sign in with your Ethereum account:
${p}

Sign in to AsiqTIX

URI: ${E}
Version: 1
Chain ID: ${m}
Nonce: ${y}
Issued At: ${S}`,$=await window.ethereum.request({method:"personal_sign",params:[F,p]}),U=await f("/api/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:F,signature:$})});localStorage.setItem("walletAddress",p),U?.token&&localStorage.setItem("auth_token",U.token),c(" Autentikasi berhasil!","success"),e.push({name:"home"})}catch(g){console.error(g),c(String(g?.message||g),"error")}finally{r.value=!1}}return(p,g)=>(_e(),Se("div",gD,[q("div",vD,[g[3]||(g[3]=q("img",{src:mg,alt:"Logo",class:"logo"},null,-1)),g[4]||(g[4]=q("h1",null,"Selamat Datang!",-1)),s.value?Ye("",!0):(_e(),Se("p",yD," Pastikan Anda telah memasang ekstensi MetaMask pada browser Anda atau aplikasi MetaMask pada perangkat seluler Anda. ")),g[5]||(g[5]=q("p",{class:"subtitle"},"Hubungkan wallet MetaMask untuk mendaftar",-1)),i.value?(_e(),Se("div",{key:1,class:ea(["status-message",o.value])},Ne(i.value),3)):Ye("",!0),a.value?(_e(),Se("div",mD,[q("div",wD,[q("img",{src:vn(wb),class:"mm-ico",alt:"MetaMask"},null,8,bD),g[0]||(g[0]=q("span",null,"Wallet Terhubung",-1))]),q("div",ED,Ne(l(a.value)),1)])):Ye("",!0),a.value?(_e(),Se("button",{key:4,onClick:h,disabled:r.value,class:"btn-login"},[r.value?(_e(),Se("span",CD," Mendaftarkan...")):(_e(),Se("span",SD,"Masuk"))],8,_D)):(_e(),Se("button",{key:3,onClick:d,disabled:n.value,class:"btn-metamask"},[n.value?(_e(),Se(dr,{key:0},[tt("  Menghubungkan... ")],64)):(_e(),Se(dr,{key:1},[q("img",{src:vn(wb),class:"mm-ico mm-ico--btn",alt:"MetaMask"},null,8,AD),g[1]||(g[1]=q("span",{class:"btn-label"},"Hubungkan MetaMask",-1))],64))],8,xD)),s.value?Ye("",!0):(_e(),Se("div",ID,[...g[2]||(g[2]=[q("p",null," MetaMask tidak terdeteksi!",-1),q("a",{href:"https://metamask.io/download/",target:"_blank",class:"install-link"}," Install MetaMask ",-1)])]))])]))}},OD=ca(TD,[["__scopeId","data-v-cbb3456e"]]),RD={key:0,class:"modal-backdrop"},PD={class:"modal"},ND={class:"receipt"},kD={class:"receipt-body"},MD={class:"row"},DD={class:"value"},BD={class:"row"},LD={class:"value"},FD={class:"row"},UD={class:"value"},HD={class:"row"},$D={class:"value"},VD={class:"row"},KD={class:"value"},jD={class:"row total"},GD={class:"value"},zD={key:0,class:"row hash"},WD={class:"value mono"},qD={class:"receipt-footer"},YD={__name:"Purchase_Success_Dialog",props:{open:{type:Boolean,default:!1},eventTitle:{type:String,default:""},venue:{type:String,default:""},dateText:{type:String,default:""},quantity:{type:Number,default:1},pricePerTicketPol:{type:Number,default:0},totalPol:{type:Number,default:0},txHash:{type:String,default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=e;function i(){r("close")}function o(){if(!n.txHash)return;const s=`https://amoy.polygonscan.com/tx/${n.txHash}`;window.open(s,"_blank","noopener")}return(s,a)=>t.open?(_e(),Se("div",RD,[q("div",PD,[q("div",ND,[a[9]||(a[9]=q("header",{class:"receipt-header"},[q("h2",null,"Tiket Berhasil Dibeli"),q("p",null,"Terima kasih! Berikut struk pembelian Anda.")],-1)),q("div",kD,[q("div",MD,[a[0]||(a[0]=q("span",{class:"label"},"Event",-1)),q("span",DD,Ne(t.eventTitle||"-"),1)]),q("div",BD,[a[1]||(a[1]=q("span",{class:"label"},"Lokasi",-1)),q("span",LD,Ne(t.venue||"-"),1)]),q("div",FD,[a[2]||(a[2]=q("span",{class:"label"},"Tanggal",-1)),q("span",UD,Ne(t.dateText||"-"),1)]),a[7]||(a[7]=q("hr",{class:"divider"},null,-1)),q("div",HD,[a[3]||(a[3]=q("span",{class:"label"},"Qty",-1)),q("span",$D,Ne(t.quantity),1)]),q("div",VD,[a[4]||(a[4]=q("span",{class:"label"},"Harga / Tiket",-1)),q("span",KD,Ne(t.pricePerTicketPol.toFixed(4))+" POL",1)]),q("div",jD,[a[5]||(a[5]=q("span",{class:"label"},"Total",-1)),q("span",GD,Ne(t.totalPol.toFixed(4))+" POL",1)]),a[8]||(a[8]=q("hr",{class:"divider"},null,-1)),t.txHash?(_e(),Se("div",zD,[a[6]||(a[6]=q("span",{class:"label"},"Tx Hash",-1)),q("span",WD,Ne(t.txHash.slice(0,10))+""+Ne(t.txHash.slice(-8)),1)])):Ye("",!0)]),q("footer",qD,[q("button",{class:"btn ghost",type:"button",onClick:i}," Tutup "),t.txHash?(_e(),Se("button",{key:0,class:"btn primary",type:"button",onClick:o}," Lihat di Polygonscan ")):Ye("",!0)])])])])):Ye("",!0)}},XD=ca(YD,[["__scopeId","data-v-a7e5c061"]]),ZD={key:0,class:"modal-backdrop"},QD={class:"modal"},JD={class:"card"},eB={class:"msg"},tB={__name:"Purchase_Error_Dialog",props:{open:{type:Boolean,default:!1},message:{type:String,default:""}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,i=()=>r("close");return(o,s)=>n.open?(_e(),Se("div",ZD,[q("div",QD,[q("div",JD,[s[0]||(s[0]=q("h2",null,"Pembelian Gagal",-1)),q("p",eB,Ne(t.message||"Terjadi kesalahan saat memproses transaksi."),1),q("div",{class:"actions"},[q("button",{class:"btn",type:"button",onClick:i},"Tutup")])])])])):Ye("",!0)}},nB=ca(tB,[["__scopeId","data-v-ce2e238f"]]),rB={class:"event-page"},iB={key:0,class:"alert error"},oB={key:1,class:"loading"},sB={class:"hero-inner"},aB={class:"poster"},cB={class:"info"},lB={class:"event-title"},uB={class:"meta"},fB={class:"row"},dB={class:"v"},hB={class:"row"},pB={class:"v"},gB={class:"desc"},vB={class:"pricebox"},yB={class:"price"},mB={key:0,class:"stock"},wB={key:0},bB={key:1,class:"sold-out"},EB=["disabled"],xB={key:0},AB={key:1},_B={key:2},CB={key:1,class:"buy-msg"},SB={key:2,class:"promoter-tools"},IB={class:"promoter-balance"},TB={key:0,class:"hint"},OB={key:1,class:"buy-msg"},RB={key:2,class:"buy-msg"},PB=["href"],NB=["disabled"],kB={key:0},MB={key:1},DB={key:2},BB={key:3},LB={key:3,class:"promoter-tools",style:{"margin-top":"1.5rem"}},FB={class:"promoter-balance"},UB={key:0,class:"buy-msg"},HB=["disabled"],$B={key:0},VB={key:1},KB={key:2},jB={__name:"EventDetailView",setup(t){const e=ah(),n=yg(),{ensureChain:r}=ES(),i="0xd0c718240519a2a843F2c9d2A8321ADD9caa1F15",o=Re(!1),s=()=>o.value=!o.value;Gr(()=>e.fullPath,()=>o.value=!1);const c="http://localhost:3001".replace(/\/+$/,"").replace(/\/api$/i,""),l=()=>(localStorage.getItem("walletAddress")||"").toString();async function u(Q,Y={}){const te=Q.startsWith("/api")?Q:`/api${Q.startsWith("/")?Q:`/${Q}`}`,ie=await fetch(`${c}${te}`,{...Y,headers:{"content-type":"application/json",...Y.headers||{},"x-wallet-address":l()}}),oe=await ie.json().catch(()=>({}));if(!ie.ok)throw new Error(oe?.error||oe?.message||`HTTP ${ie.status}`);return oe}const f=Re(null),d=Re(!0),h=Re(""),p=Re(!1),g=Re(""),y=Re(!1),v=Re(!1),m=Re(null),w=Re(""),E=Re("customer"),S=Ge(()=>E.value==="admin"),R=Ge(()=>(l()||"").toLowerCase()),F=Ge(()=>{if(!f.value)return!1;const Q=(f.value.promoter_wallet||"").toLowerCase();return Q&&R.value&&Q===R.value}),$=Re(0n),U=Ge(()=>{try{return ma($.value||0n)}catch{return"0.0"}}),B=Ge(()=>$.value>0n),W=Re(!1),V=Re(""),L=Re(""),I=Ge(()=>{if(!f.value?.date_iso)return!1;const Q=new Date(f.value.date_iso);return Number.isNaN(Q.getTime())?!1:Q.getTime()<=Date.now()}),x=Ge(()=>S.value||F.value),P=Ge(()=>x.value&&I.value&&B.value);async function G(){if(!f.value)return;if(!l()){g.value="Wallet belum terhubung.";return}const Q=Number(f.value.chain_event_id||0);if(!Q){g.value="Event ini belum di-link ke kontrak (chain_event_id kosong).";return}try{p.value=!0,g.value="",await r("amoy");const te=await new Or(window.ethereum).getSigner(),ie=new ci(i,Pa,te),oe=1n,le=await ie.events(Q),ve=le.priceWei;if(ve<=0n)throw new Error("Harga tiket on-chain tidak valid");if(!le.active)throw new Error("Event ini tidak aktif lagi");const de=ve*oe;console.log("[DEBUG BUY] chainEventId",Q),console.log("[DEBUG BUY] on-chain event:",{promoter:le.promoter,priceWei:le.priceWei.toString(),maxSupply:le.maxSupply.toString(),sold:le.sold.toString(),active:le.active}),console.log("[DEBUG BUY] quantity",oe.toString()),console.log("[DEBUG BUY] totalPriceWei (value yg dikirim)",de.toString());const me=await ie.buyTicket(Q,oe,{value:de});if(!(await me.wait()).status)throw new Error("Transaksi di blockchain gagal");await u("/purchase",{method:"POST",body:JSON.stringify({amount:Number(f.value.price_idr||0)||0,ref_id:f.value.id,description:"On-chain purchase",tx_hash:me.hash})}),f.value.sold_tickets=Number(f.value.sold_tickets??0)+Number(oe);const J=Number(ma(ve)),Ee=Number(ma(de));m.value={eventTitle:f.value.title,venue:f.value.venue,dateText:X.value,quantity:Number(oe),pricePerTicketPol:J,totalPol:Ee,txHash:me.hash},g.value="Tiket berhasil dibeli! NFT tiket tersimpan di wallet kamu.",y.value=!0}catch(Y){console.error("[BUY ERROR RAW]",Y);const te=Y?.info?.error||Y?.error||Y,ie=Y?.reason||Y?.shortMessage||te?.data?.message||te?.message||Y?.message||"Unknown error";g.value=`Gagal membeli tiket: ${ie}`,w.value=g.value,v.value=!0}finally{p.value=!1}}async function b(){if(!l()){E.value="customer";return}try{const Q=await u("/api/me");E.value=Q?.role||"customer"}catch{E.value="customer"}}async function C(){if($.value=0n,V.value="",!!l()&&f.value?.chain_event_id)try{await r("amoy");const Y=await new Or(window.ethereum).getSigner(),te=new ci(i,Pa,Y),ie=Number(f.value.chain_event_id||0);if(!ie)return;const oe=await te.promoterBalances(ie),le=typeof oe=="bigint"?oe:BigInt(oe.toString());$.value=le}catch(Q){console.error("[promoterBalance] gagal load",Q),V.value="Gagal memuat saldo promotor."}}async function T(){if(V.value="",!x.value){V.value="Anda tidak berhak menarik dana event ini.";return}if(!f.value?.chain_event_id){V.value="Event ini belum di-link ke kontrak.";return}try{W.value=!0,await r("amoy");const Y=await new Or(window.ethereum).getSigner(),te=new ci(i,Pa,Y),ie=Number(f.value.chain_event_id||0);if(!ie){V.value="Event belum punya ID on-chain.";return}const oe=$.value||0n,le=Number(ma(oe));try{await te.withdrawPromoter.staticCall(ie)}catch(me){console.error("[withdrawPromoter staticCall]",me);const se=me?.info?.error||me?.error||me;let J=me?.reason||me?.shortMessage||se?.data?.message||se?.message||me?.message||"Unknown error";J.includes("EVENT_NOT_FINISHED")?V.value="Event belum selesai di blockchain. Dana baru bisa ditarik setelah waktu event terlewati.":J.includes("NO_BALANCE")?V.value="Tidak ada saldo yang bisa ditarik untuk event ini.":J.includes("NOT_EVENT_PROMOTER")?V.value="Wallet ini bukan promotor event ini (atau Anda bukan owner kontrak).":J.includes("EVENT_NOT_FOUND")?V.value="Event dengan ID tersebut tidak ditemukan di kontrak.":V.value=`Gagal menarik dana: ${J}`;return}const ve=await te.withdrawPromoter(ie);if(!(await ve.wait()).status)throw new Error("Transaksi withdraw gagal di blockchain");L.value=ve.hash;try{await u("/withdraw-log",{method:"POST",body:JSON.stringify({amount:le,ref_id:f.value.id,description:`Withdraw hasil penjualan event ${f.value.title||f.value.id}`,tx_hash:ve.hash})})}catch(me){console.error("[withdraw-log] gagal simpan ke backend",me)}V.value="Penarikan dana berhasil dikirim ke wallet.",await C()}catch(Q){console.error("[withdrawPromoter]",Q);const Y=Q?.info?.error||Q?.error||Q;let te=Q?.reason||Q?.shortMessage||Y?.data?.message||Y?.message||Q?.message||"Unknown error";V.value=`Gagal menarik dana: ${te}`}finally{W.value=!1}}const N=Re(0n),_=Ge(()=>{try{return ma(N.value||0n)}catch{return"0.0"}}),A=Re(!1),O=Re(""),M=Ge(()=>N.value>0n),H=Ge(()=>S.value&&M.value);async function k(){if(N.value=0n,O.value="",!!l()&&f.value?.chain_event_id)try{await r("amoy");const Y=await new Or(window.ethereum).getSigner(),te=new ci(i,Pa,Y),ie=Number(f.value.chain_event_id||0);if(!ie)return;const oe=await te.feeBalances(ie),le=typeof oe=="bigint"?oe:BigInt(oe.toString());N.value=le}catch(Q){console.error("[adminFeeBalance] gagal load",Q),O.value="Gagal memuat saldo admin."}}async function j(){if(O.value="",!!H.value)try{A.value=!0,await r("amoy");const Y=await new Or(window.ethereum).getSigner(),te=new ci(i,Pa,Y),ie=Number(f.value.chain_event_id||0),oe=await te.feeBalances(ie),le=typeof oe=="bigint"?oe:BigInt(oe.toString()),ve=Number(ma(le||0n)),de=await te.withdrawFees(ie);if(!(await de.wait()).status)throw new Error("Transaksi gagal di blockchain");try{await u("/withdraw-log",{method:"POST",body:JSON.stringify({amount:ve,ref_id:f.value.id,description:`Withdraw fee admin event ${f.value.title||f.value.id}`,tx_hash:de.hash})})}catch(se){console.error("[withdraw-log admin] gagal simpan ke backend",se)}O.value="Fee admin berhasil ditarik ke wallet.",await k()}catch(Q){console.error("[withdrawAdminFee] error",Q);let Y=String(Q?.reason||Q?.message||Q||"");Y.includes("NO_FEE")&&(Y="Tidak ada fee yang bisa ditarik."),Y.includes("NOT_ADMIN")&&(Y="Wallet ini bukan admin/feeRecipient di kontrak."),O.value=Y}finally{A.value=!1}}const X=Ge(()=>{const Q=f.value?.date_iso?new Date(f.value.date_iso):null;if(!Q)return"-";const Y=Q.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit"}),te=Q.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${Y}, ${te.replaceAll(".",":")}`.replace(/:/g,".")}),ee=Ge(()=>{const Q=Number(f.value?.price_idr||0);return Q?`Rp ${Q.toLocaleString("id-ID")}`:"-"}),ae=Ge(()=>{if(!f.value)return null;const Q=Number(f.value.total_tickets??0),Y=Number(f.value.sold_tickets??0),te=Q-Y;return!Number.isFinite(te)||te<0?0:te}),D=Ge(()=>Number(f.value?.total_tickets??0)>0&&ae.value===0),K=Ge(()=>"url(/Background.png)"),Z=Ge(()=>`url(${f.value?.image_url||"/poster_fallback.jpg"})`);function re(){n.push({name:"home"})}return cu(async()=>{try{d.value=!0;const Q=String(e.params.id||"");f.value=await u(`/api/events/${Q}`),await Promise.all([b(),C(),k()])}catch(Q){h.value=String(Q.message||Q)}finally{d.value=!1}}),(Q,Y)=>(_e(),Se("div",rB,[q("header",{class:"topbar"},[q("button",{class:"back",onClick:re}," Back"),Y[4]||(Y[4]=q("div",{class:"brand"},[q("img",{src:mg,alt:"Tickety"})],-1)),Y[5]||(Y[5]=q("h1",{class:"title"},"Event",-1)),q("button",{class:"hamburger","aria-label":"Toggle menu",onClick:s},[...Y[3]||(Y[3]=[q("span",null,null,-1),q("span",null,null,-1),q("span",null,null,-1)])])]),kt(wg,{modelValue:o.value,"onUpdate:modelValue":Y[0]||(Y[0]=te=>o.value=te),extraClass:"sb-topright"},null,8,["modelValue"]),q("main",null,[h.value?(_e(),Se("div",iB,Ne(h.value),1)):d.value?(_e(),Se("div",oB,"Loading")):(_e(),Se("section",{key:2,class:"hero",style:as({"--hero":K.value})},[q("div",sB,[q("div",aB,[q("div",{class:"poster-img",style:as({backgroundImage:Z.value})},null,4),Y[6]||(Y[6]=q("div",{class:"poster-grad"},null,-1))]),q("div",cB,[q("h2",lB,Ne(f.value.title),1),q("div",uB,[q("div",fB,[Y[7]||(Y[7]=q("span",{class:"k"},"Location:",-1)),q("span",dB,Ne(f.value.venue),1)]),q("div",hB,[Y[8]||(Y[8]=q("span",{class:"k"},"Date:",-1)),q("span",pB,Ne(X.value),1)])]),q("p",gB,Ne(f.value.description||"No description."),1)]),q("aside",vB,[Y[13]||(Y[13]=q("div",{class:"label"},"Price",-1)),q("div",yB,Ne(ee.value),1),f.value.total_tickets>0?(_e(),Se("div",mB,[D.value?(_e(),Se("span",bB,"Sold out")):(_e(),Se("span",wB,"Tickets left: "+Ne(ae.value),1))])):Ye("",!0),q("button",{class:"cta",disabled:D.value||p.value,onClick:G},[D.value?(_e(),Se("span",xB,"SOLD OUT")):p.value?(_e(),Se("span",AB,"PROCESSING")):(_e(),Se("span",_B,"BUY TICKET"))],8,EB),g.value?(_e(),Se("p",CB,Ne(g.value),1)):Ye("",!0),x.value?(_e(),Se("div",SB,[Y[9]||(Y[9]=q("h3",null,"Promoter Tools",-1)),Y[10]||(Y[10]=q("p",null,"Saldo dapat ditarik:",-1)),q("p",IB,[q("strong",null,Ne(U.value)+" POL",1)]),I.value?Ye("",!0):(_e(),Se("p",TB," Dana baru bisa ditarik setelah waktu event terlewati. ")),V.value?(_e(),Se("p",OB,Ne(V.value),1)):Ye("",!0),L.value?(_e(),Se("p",RB,[q("a",{href:`https://amoy.polygonscan.com/tx/${L.value}`,target:"_blank",rel:"noopener noreferrer"}," Lihat transaksi di PolygonScan Amoy ",8,PB)])):Ye("",!0),q("button",{class:"cta secondary",disabled:W.value||!P.value,onClick:T},[W.value?(_e(),Se("span",kB,"WITHDRAWING")):B.value?I.value?(_e(),Se("span",BB,"WITHDRAW TO WALLET")):(_e(),Se("span",DB,"WAIT EVENT FINISH")):(_e(),Se("span",MB,"NO FUNDS"))],8,NB)])):Ye("",!0),S.value?(_e(),Se("div",LB,[Y[11]||(Y[11]=q("h3",null,"Admin Fee",-1)),Y[12]||(Y[12]=q("p",null,"Saldo fee admin yang bisa ditarik:",-1)),q("p",FB,[q("strong",null,Ne(_.value)+" POL",1)]),O.value?(_e(),Se("p",UB,Ne(O.value),1)):Ye("",!0),q("button",{class:"cta secondary",disabled:A.value||!H.value,onClick:j},[A.value?(_e(),Se("span",$B,"WITHDRAWING")):M.value?(_e(),Se("span",KB,"WITHDRAW ADMIN FEE")):(_e(),Se("span",VB,"NO FEE"))],8,HB)])):Ye("",!0)])])],4))]),y.value&&m.value?(_e(),Za(XD,{key:0,open:y.value,"event-title":m.value.eventTitle,venue:m.value.venue,"date-text":m.value.dateText,quantity:m.value.quantity,"price-per-ticket-pol":m.value.pricePerTicketPol,"total-pol":m.value.totalPol,"tx-hash":m.value.txHash,onClose:Y[1]||(Y[1]=te=>y.value=!1)},null,8,["open","event-title","venue","date-text","quantity","price-per-ticket-pol","total-pol","tx-hash"])):Ye("",!0),v.value?(_e(),Za(nB,{key:1,open:v.value,message:w.value||g.value,onClose:Y[2]||(Y[2]=te=>v.value=!1)},null,8,["open","message"])):Ye("",!0)]))}},GB=ca(jB,[["__scopeId","data-v-3269935a"]]);function zB(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function WB(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var qB=(function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),YB=(function(t){qB(e,t);function e(n,r){var i=this.constructor,o=t.call(this,n,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),zB(o,i.prototype),WB(o),o}return e})(Error),XB=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),mr=(function(t){XB(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e})(YB),ZB=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),zt=(function(t){ZB(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(mr),QB=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),De=(function(t){QB(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(mr),xS=(function(){function t(e){if(this.binarizer=e,e===null)throw new De("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var o=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),JB=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Qt=(function(t){JB(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(mr),eL=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),St=(function(){function t(){}return t.arraycopy=function(e,n,r,i,o){for(;o--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t})(),tL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Rv=(function(t){tL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(mr),nL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),bb=(function(t){nL(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Rv),rL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},an=(function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var o=n;o<r;o++)e[o]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new De("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new bb(n);if(r>e)throw new bb(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var o=rL(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,o=new Int32Array(i);return St.arraycopy(e,n,o,0,i),o},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(n,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},t.numberComparator=function(e,n){return e-n},t})(),qe=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),bn=(function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);St.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=r[i]}var a=i*32+qe.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=~r[i]}var a=i*32+qe.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new De;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,c=s<i?31:n&31,l=(2<<c)-(1<<a);o[s]|=l}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new De;if(n===e)return!0;n--;for(var i=Math.floor(e/32),o=Math.floor(n/32),s=this.bits,a=i;a<=o;a++){var c=a>i?0:e&31,l=a<o?31:n&31,u=(2<<l)-(1<<c)&4294967295;if((s[a]&u)!==(r?u:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new De("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new De("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;n[r+o]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[n-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,c=e[0]>>>a,o=1;o<r;o++){var l=e[o];c|=l<<32-a,e[o-1]=c,c=l>>>a}e[r-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&an.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+an.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t})(),F1;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(F1||(F1={}));const It=F1;var iL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ae=(function(t){iL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(mr),oL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vt;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(vt||(vt={}));var sn=(function(){function t(e,n,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var c=this.values,l=0,u=c.length;l!==u;l++){var f=c[l];t.VALUES_TO_ECI.set(f,this)}try{for(var d=oL(s),h=d.next();!h.done;h=d.next()){var p=h.value;t.NAME_TO_ECI.set(p,this)}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Ae("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new Ae("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new Ae("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(vt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(vt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(vt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(vt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(vt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(vt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(vt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(vt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(vt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(vt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(vt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(vt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(vt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(vt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(vt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(vt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(vt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(vt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(vt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(vt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(vt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(vt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(vt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(vt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(vt.Big5,28,"Big5"),t.GB18030=new t(vt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(vt.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),sL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),zf=(function(t){sL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(mr),Yr=(function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof sn?e:sn.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(sn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new zf("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(sn.UTF8)||e.equals(sn.ISO8859_1)||e.equals(sn.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},t})(),et=(function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return Yr.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(It.CHARACTER_SET)!==void 0)return n.get(It.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,c=0,l=0,u=0,f=0,d=0,h=0,p=0,g=0,y=0,v=0,m=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,w=0;w<r&&(i||o||s);w++){var E=e[w]&255;s&&(a>0?(E&128)===0?s=!1:a--:(E&128)!==0&&((E&64)===0?s=!1:(a++,(E&32)===0?c++:(a++,(E&16)===0?l++:(a++,(E&8)===0?u++:s=!1))))),i&&(E>127&&E<160?i=!1:E>159&&(E<192||E===215||E===247)&&v++),o&&(f>0?E<64||E===127||E>252?o=!1:f--:E===128||E===160||E>239?o=!1:E>160&&E<224?(d++,p=0,h++,h>g&&(g=h)):E>127?(f++,h=0,p++,p>y&&(y=p)):(h=0,p=0))}return s&&a>0&&(s=!1),o&&f>0&&(o=!1),s&&(m||c+l+u>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||g>=3||y>=3)?t.SHIFT_JIS:i&&o?g===2&&d===2||v*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function o(a,c,l,u,f,d){if(a==="%%")return"%";if(n[++i]!==void 0){a=u?parseInt(u.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,p;switch(d){case"s":p=n[i];break;case"c":p=n[i][0];break;case"f":p=parseFloat(n[i]).toFixed(a);break;case"p":p=parseFloat(n[i]).toPrecision(a);break;case"e":p=parseFloat(n[i]).toExponential(a);break;case"x":p=parseInt(n[i]).toString(h||16);break;case"d":p=parseFloat(parseInt(n[i],h||10).toPrecision(a)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var g=parseInt(l),y=l&&l[0]+""=="0"?"0":" ";p.length<g;)p=c!==void 0?p+y:y+p;return p}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},t.getBytes=function(e,n){return Yr.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=sn.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=sn.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=sn.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),ze=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=et.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t})(),Gi=(function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new De("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),o=0;o<n;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},t.parseFromString=function(e,n,r){if(e===null)throw new De("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,c=0,l=0;l<e.length;)if(e.charAt(l)===`
`||e.charAt(l)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new De("row lengths do not match");s=o,c++}l++}else if(e.substring(l,l+n.length)===n)l+=n.length,i[o]=!0,o++;else if(e.substring(l,l+r.length)===r)l+=r.length,i[o]=!1,o++;else throw new De("illegal character encountered: "+e.substring(l));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new De("row lengths do not match");c++}for(var u=new t(a,c),f=0;f<o;f++)i[f]&&u.set(Math.floor(f%a),Math.floor(f/a));return u},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new De("input matrix dimensions do not match");for(var n=new bn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,c=e.getRow(o,n).getBitArray(),l=0;l<r;l++)i[a+l]^=c[l]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new De("Left and top must be nonnegative");if(i<1||r<1)throw new De("Height and width must be at least 1");var o=e+r,s=n+i;if(s>this.height||o>this.width)throw new De("The region must fit inside the matrix");for(var a=this.rowSize,c=this.bits,l=n;l<s;l++)for(var u=l*a,f=e;f<o;f++)c[u+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new bn(this.width):n.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)n.setBulk(s*32,i[o+s]);return n},t.prototype.setRow=function(e,n){St.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new bn(e),i=new bn(e),o=0,s=Math.floor((n+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(n-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(n-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,o=e,s=n,a=-1,c=-1,l=0;l<n;l++)for(var u=0;u<r;u++){var f=i[l*r+u];if(f!==0){if(l<s&&(s=l),l>c&&(c=l),u*32<o){for(var d=0;(f<<31-d&4294967295)===0;)d++;u*32+d<o&&(o=u*32+d)}if(u*32+31>a){for(var d=31;!(f>>>d);)d--;u*32+d>a&&(a=u*32+d)}}}return a<o||c<s?null:Int32Array.from([o,s,a-o+1,c-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,o=r%e*32,s=n[r],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=n[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&an.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+an.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new ze,o=0,s=this.height;o<s;o++){for(var a=0,c=this.width;a<c;a++)i.append(this.get(a,o)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),aL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),pe=(function(t){aL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(mr),cL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),lL=(function(t){cL(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new bn(o):r.clear(),this.initArrays(o);for(var s=i.getRow(n,this.luminances),a=this.buckets,c=0;c<o;c++)a[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var l=e.estimateBlackPoint(a);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<l&&r.set(c);else for(var u=s[0]&255,f=s[1]&255,c=1;c<o-1;c++){var d=s[c+1]&255;(f*4-u-d)/2<l&&r.set(c),u=f,f=d}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),o=new Gi(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var c=Math.floor(i*a/5),l=n.getRow(c,this.luminances),u=Math.floor(r*4/5),f=Math.floor(r/5);f<u;f++){var d=l[f]&255;s[d>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(s),p=n.getMatrix(),a=0;a<i;a++)for(var g=a*r,f=0;f<r;f++){var d=p[g+f]&255;d<h&&o.set(f,a)}return o},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,o=0,s=0,a=0;a<r;a++)n[a]>s&&(o=a,s=n[a]),n[a]>i&&(i=n[a]);for(var c=0,l=0,a=0;a<r;a++){var u=a-o,f=n[a]*u*u;f>l&&(c=a,l=f)}if(o>c){var d=o;o=c,c=d}if(c-o<=r/16)throw new pe;for(var h=c-1,p=-1,a=c-1;a>o;a--){var g=a-o,f=g*g*(c-a)*(i-n[a]);f>p&&(h=a,p=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(eL),uL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),AS=(function(t){uL(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=n.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var c=e.calculateBlackPoints(o,s,a,r,i),l=new Gi(r,i);e.calculateThresholdForBlock(o,s,a,r,i,c,l),this.matrix=l}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,o,s,a,c){for(var l=s-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,f=0;f<i;f++){var d=f<<e.BLOCK_SIZE_POWER;d>l&&(d=l);for(var h=e.cap(f,2,i-3),p=0;p<r;p++){var g=p<<e.BLOCK_SIZE_POWER;g>u&&(g=u);for(var y=e.cap(p,2,r-3),v=0,m=-2;m<=2;m++){var w=a[h+m];v+=w[y-2]+w[y-1]+w[y]+w[y+1]+w[y+2]}var E=v/25;e.thresholdBlock(n,g,d,E,o,c)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,o,s,a){for(var c=0,l=i*s+r;c<e.BLOCK_SIZE;c++,l+=s)for(var u=0;u<e.BLOCK_SIZE;u++)(n[l+u]&255)<=o&&a.set(r+u,i+c)},e.calculateBlackPoints=function(n,r,i,o,s){for(var a=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,l=new Array(i),u=0;u<i;u++){l[u]=new Int32Array(r);var f=u<<e.BLOCK_SIZE_POWER;f>a&&(f=a);for(var d=0;d<r;d++){var h=d<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var p=0,g=255,y=0,v=0,m=f*o+h;v<e.BLOCK_SIZE;v++,m+=o){for(var w=0;w<e.BLOCK_SIZE;w++){var E=n[m+w]&255;p+=E,E<g&&(g=E),E>y&&(y=E)}if(y-g>e.MIN_DYNAMIC_RANGE)for(v++,m+=o;v<e.BLOCK_SIZE;v++,m+=o)for(var w=0;w<e.BLOCK_SIZE;w++)p+=n[m+w]&255}var S=p>>e.BLOCK_SIZE_POWER*2;if(y-g<=e.MIN_DYNAMIC_RANGE&&(S=g/2,u>0&&d>0)){var R=(l[u-1][d]+2*l[u][d-1]+l[u-1][d-1])/4;g<R&&(S=R)}l[u][d]=S}}return l},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(lL),xu=(function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new zf("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new zf("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new zf("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new ze,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",n.append(a)}n.append(`
`)}return n.toString()},t})(),fL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Dh=(function(t){fL(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(n[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,o){return new e(this.delegate.crop(n,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(xu),dL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hL=(function(t){dL(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,c=0,l=n.length;a<l;a+=4,c++){var u=void 0,f=n[a+3];if(f===0)u=255;else{var d=n[a],h=n[a+1],p=n[a+2];u=306*d+601*h+117*p+512>>10}s[c]=u}else for(var a=0,c=0,g=n.length;a<g;a+=4,c++){var u=void 0,f=n[a+3];if(f===0)u=255;else{var d=n[a],h=n[a+1],p=n[a+2];u=306*d+601*h+117*p+512>>10}s[c]=255-u}return s},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new De("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=n*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),l=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=c,r.height=l,i.translate(c/2,l/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Dh(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(xu),pL=(function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),Gn=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},zn=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},gL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pc=(function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Gn(this,void 0,void 0,function(){var e,n,r,i,o,s,a,c,l,u,f,d;return zn(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),n=[];try{for(r=gL(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device "+(n.length+1),l=o.groupId,u={deviceId:a,label:c,kind:s,groupId:l},n.push(u))}catch(p){f={error:p}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(f)throw f.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return Gn(this,void 0,void 0,function(){var e;return zn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new pL(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return Gn(this,void 0,void 0,function(){var n;return zn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return Gn(this,void 0,void 0,function(){return zn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Gn(this,void 0,void 0,function(){var r,i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Gn(this,void 0,void 0,function(){var r;return zn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Gn(this,void 0,void 0,function(){var r,i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return Gn(this,void 0,void 0,function(){return zn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Gn(this,void 0,void 0,function(){var i,o;return zn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Gn(this,void 0,void 0,function(){var i;return zn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return Gn(this,void 0,void 0,function(){var i;return zn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return Gn(this,void 0,void 0,function(){var r;return zn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Gn(this,void 0,void 0,function(){return zn(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new zt("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new zt("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new zt("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new zt("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new zt("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new zt("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new zt("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new zt("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new zt("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new zt("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Gn(this,void 0,void 0,function(){return zn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return Gn(this,void 0,void 0,function(){return zn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new pe("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(d){var l=n&&d instanceof pe,u=d instanceof Qt||d instanceof Ae,f=u&&r;if(l||f)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(d)}};return new Promise(function(s,a){return o(s,a)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);n(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){n(null,c);var s=c instanceof Qt||c instanceof Ae,a=c instanceof pe;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new hL(r,n),o=new AS(i);return new xS(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),Kn=(function(){function t(e,n,r,i,o,s){r===void 0&&(r=n==null?0:8*n.length),s===void 0&&(s=St.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=St.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);St.arraycopy(n,0,r,0,n.length),St.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),U1;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(U1||(U1={}));const Me=U1;var H1;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(H1||(H1={}));const Rn=H1;var Bh=(function(){function t(e,n,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),ol=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new De;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t})(),ds=(function(){function t(e,n){if(n.length===0)throw new De;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),St.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,o=n.length;i!==o;i++){var s=n[i];r=ol.addOrSubtract(r,s)}return r}r=n[0];for(var a=n.length,c=this.field,i=1;i<a;i++)r=ol.addOrSubtract(c.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new De("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;St.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=ol.addOrSubtract(n[a-s],r[a]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new De("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,c=0;c<r;c++)for(var l=n[c],u=0;u<o;u++)s[c+u]=ol.addOrSubtract(s[c+u],a.multiply(l,i[u]));return new t(a,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),o=this.coefficients,s=0;s<n;s++)i[s]=r.multiply(o[s],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new De;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],n);return new t(s,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new De("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new De("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=n.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),c=n.multiply(i.getCoefficient(i.getDegree()),s),l=e.multiplyByMonomial(a,c),u=n.buildMonomial(a,c);r=r.addOrSubtract(u),i=i.addOrSubtract(l)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t})(),vL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),_S=(function(t){vL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(mr),yL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),pr=(function(t){yL(e,t);function e(n,r,i){var o=t.call(this)||this;o.primitive=n,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,c=0;c<r;c++)s[c]=a,a*=2,a>=r&&(a^=n,a&=r-1);o.expTable=s;for(var l=new Int32Array(r),c=0;c<r-1;c++)l[s[c]]=c;return o.logTable=l,o.zero=new ds(o,Int32Array.from([0])),o.one=new ds(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new De;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new ds(this,i)},e.prototype.inverse=function(n){if(n===0)throw new _S;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+qe.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(ol),mL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),df=(function(t){mL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(mr),wL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Au=(function(t){wL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(mr),Lh=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new ds(r,e),o=new Int32Array(n),s=!0,a=0;a<n;a++){var c=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=c,c!==0&&(s=!1)}if(!s)for(var l=new ds(r,o),u=this.runEuclideanAlgorithm(r.buildMonomial(n,1),l,n),f=u[0],d=u[1],h=this.findErrorLocations(f),p=this.findErrorMagnitudes(d,h),a=0;a<h.length;a++){var g=e.length-1-r.log(h[a]);if(g<0)throw new df("Bad error location");e[g]=pr.addOrSubtract(e[g],p[a])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=this.field,s=e,a=n,c=o.getZero(),l=o.getOne();a.getDegree()>=(r/2|0);){var u=s,f=c;if(s=a,c=l,s.isZero())throw new df("r_{i-1} was zero");a=u;for(var d=o.getZero(),h=s.getCoefficient(s.getDegree()),p=o.inverse(h);a.getDegree()>=s.getDegree()&&!a.isZero();){var g=a.getDegree()-s.getDegree(),y=o.multiply(a.getCoefficient(a.getDegree()),p);d=d.addOrSubtract(o.buildMonomial(g,y)),a=a.addOrSubtract(s.multiplyByMonomial(g,y))}if(l=d.multiply(c).addOrSubtract(f),a.getDegree()>=s.getDegree())throw new Au("Division algorithm failed to reduce polynomial?")}var v=l.getCoefficient(0);if(v===0)throw new df("sigmaTilde(0) was zero");var m=o.inverse(v),w=l.multiplyScalar(m),E=a.multiplyScalar(m);return[w,E]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,o=this.field,s=1;s<o.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==n)throw new df("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(n[s]),c=1,l=0;l<r;l++)if(s!==l){var u=o.multiply(n[l],a),f=(u&1)===0?u|1:u&-2;c=o.multiply(c,f)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},t})(),An;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(An||(An={}));var Eb=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),a=new Bh(o,s,null,null);return a.setNumBits(i.length),a},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=An.UPPER,i=An.UPPER,o="",s=0;s<n;)if(i===An.BINARY){if(n-s<5)break;var a=t.readCode(e,s,5);if(s+=5,a===0){if(n-s<11)break;a=t.readCode(e,s,11)+31,s+=11}for(var c=0;c<a;c++){if(n-s<8){s=n;break}var l=t.readCode(e,s,8);o+=et.castAsNonUtf8Char(l),s+=8}i=r}else{var u=i===An.DIGIT?4:5;if(n-s<u)break;var l=t.readCode(e,s,u);s+=u;var f=t.getCharacter(i,l);f.startsWith("CTRL_")?(r=i,i=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(o+=f,i=r)}return o},t.getTable=function(e){switch(e){case"L":return An.LOWER;case"P":return An.PUNCT;case"M":return An.MIXED;case"D":return An.DIGIT;case"B":return An.BINARY;case"U":default:return An.UPPER}},t.getCharacter=function(e,n){switch(e){case An.UPPER:return t.UPPER_TABLE[n];case An.LOWER:return t.LOWER_TABLE[n];case An.MIXED:return t.MIXED_TABLE[n];case An.PUNCT:return t.PUNCT_TABLE[n];case An.DIGIT:return t.DIGIT_TABLE[n];default:throw new Au("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=pr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=pr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=pr.AZTEC_DATA_10):(r=12,n=pr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new Ae;for(var s=e.length%r,a=new Int32Array(o),c=0;c<o;c++,s+=r)a[c]=t.readCode(e,s,r);try{var l=new Lh(n);l.decode(a,o-i)}catch(y){throw new Ae(y)}for(var u=(1<<r)-1,f=0,c=0;c<i;c++){var d=a[c];if(d===0||d===u)throw new Ae;(d===1||d===u-1)&&f++}for(var h=new Array(i*r-f),p=0,c=0;c<i;c++){var d=a[c];if(d===1||d===u-1)h.fill(d>1,p,p+r-1),p+=r-1;else for(var g=r-1;g>=0;--g)h[p++]=(d&1<<g)!==0}return h},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(var a=0;a<o.length;a++)o[a]=a;else for(var c=i+1+2*qe.truncDivision(qe.truncDivision(i,2)-1,15),l=i/2,u=qe.truncDivision(c,2),a=0;a<l;a++){var f=a+qe.truncDivision(a,15);o[l-a-1]=u-f-1,o[l+a]=u+f+1}for(var a=0,d=0;a<r;a++){for(var h=(r-a)*4+(n?9:12),p=a*2,g=i-1-p,y=0;y<h;y++)for(var v=y*2,m=0;m<2;m++)s[d+v+m]=e.get(o[p+m],o[p+y]),s[d+2*h+v+m]=e.get(o[p+y],o[g-m]),s[d+4*h+v+m]=e.get(o[g-m],o[g-y]),s[d+6*h+v+m]=e.get(o[g-y],o[p+m]);d+=h*8}return s},t.readCode=function(e,n,r){for(var i=0,o=n;o<n+r;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),ot=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var o=e-r,s=n-i;return Math.sqrt(o*o+s*s)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var o=e[r];n+=o}return n},t})(),$1=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),Pe=(function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*$1.floatToIntBits(this.x)+$1.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=n&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=n?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var c=o;o=a,a=c}e[0]=o,e[1]=s,e[2]=a},t.distance=function(e,n){return ot.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,o=n.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},t})(),Pv=(function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),bL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),EL=(function(t){bL(e,t);function e(n,r,i,o,s){var a=t.call(this,n,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Pv),V1=(function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new pe}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,l=!1,u=!1,f=!1,d=this.width,h=this.height;s;){s=!1;for(var p=!0;(p||!c)&&n<d;)p=this.containsBlackPoint(r,i,n,!1),p?(n++,s=!0,c=!0):c||n++;if(n>=d){o=!0;break}for(var g=!0;(g||!l)&&i<h;)g=this.containsBlackPoint(e,n,i,!0),g?(i++,s=!0,l=!0):l||i++;if(i>=h){o=!0;break}for(var y=!0;(y||!u)&&e>=0;)y=this.containsBlackPoint(r,i,e,!1),y?(e--,s=!0,u=!0):u||e--;if(e<0){o=!0;break}for(var v=!0;(v||!f)&&r>=0;)v=this.containsBlackPoint(e,n,r,!0),v?(r--,s=!0,f=!0):f||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var m=n-e,w=null,E=1;w===null&&E<m;E++)w=this.getBlackPointOnSegment(e,i-E,e+E,i);if(w==null)throw new pe;for(var S=null,E=1;S===null&&E<m;E++)S=this.getBlackPointOnSegment(e,r+E,e+E,r);if(S==null)throw new pe;for(var R=null,E=1;R===null&&E<m;E++)R=this.getBlackPointOnSegment(n,r+E,n-E,r);if(R==null)throw new pe;for(var F=null,E=1;F===null&&E<m;E++)F=this.getBlackPointOnSegment(n,i-E,n-E,i);if(F==null)throw new pe;return this.centerEdges(F,w,R,S)}else throw new pe},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var o=ot.round(ot.distance(e,n,r,i)),s=(r-e)/o,a=(i-n)/o,c=this.image,l=0;l<o;l++){var u=ot.round(e+l*s),f=ot.round(n+l*a);if(c.get(u,f))return new Pe(u,f)}return null},t.prototype.centerEdges=function(e,n,r,i){var o=e.getX(),s=e.getY(),a=n.getX(),c=n.getY(),l=r.getX(),u=r.getY(),f=i.getX(),d=i.getY(),h=t.CORR;return o<this.width/2?[new Pe(f-h,d+h),new Pe(a+h,c+h),new Pe(l-h,u-h),new Pe(o+h,s-h)]:[new Pe(f+h,d+h),new Pe(a+h,c-h),new Pe(l-h,u+h),new Pe(o-h,s-h)]},t.prototype.containsBlackPoint=function(e,n,r,i){var o=this.image;if(i){for(var s=e;s<=n;s++)if(o.get(s,r))return!0}else for(var a=e;a<=n;a++)if(o.get(r,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),xb=(function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<n.length&&o;s+=2){var a=Math.floor(n[s]),c=Math.floor(n[s+1]);if(a<-1||a>r||c<-1||c>i)throw new pe;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),c===-1?(n[s+1]=0,o=!0):c===i&&(n[s+1]=i-1,o=!0)}o=!0;for(var s=n.length-2;s>=0&&o;s-=2){var a=Math.floor(n[s]),c=Math.floor(n[s+1]);if(a<-1||a>r||c<-1||c>i)throw new pe;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),c===-1?(n[s+1]=0,o=!0):c===i&&(n[s+1]=i-1,o=!0)}},t})(),CS=(function(){function t(e,n,r,i,o,s,a,c,l){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=c,this.a33=l}return t.quadrilateralToQuadrilateral=function(e,n,r,i,o,s,a,c,l,u,f,d,h,p,g,y){var v=t.quadrilateralToSquare(e,n,r,i,o,s,a,c),m=t.squareToQuadrilateral(l,u,f,d,h,p,g,y);return m.times(v)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,l=this.a31,u=this.a32,f=this.a33,d=0;d<n;d+=2){var h=e[d],p=e[d+1],g=o*h+c*p+f;e[d]=(r*h+s*p+l)/g,e[d+1]=(i*h+a*p+u)/g}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,l=this.a31,u=this.a32,f=this.a33,d=e.length,h=0;h<d;h++){var p=e[h],g=n[h],y=o*p+c*g+f;e[h]=(r*p+s*g+l)/y,n[h]=(i*p+a*g+u)/y}},t.squareToQuadrilateral=function(e,n,r,i,o,s,a,c){var l=e-r+o-a,u=n-i+s-c;if(l===0&&u===0)return new t(r-e,o-r,e,i-n,s-i,n,0,0,1);var f=r-o,d=a-o,h=i-s,p=c-s,g=f*p-d*h,y=(l*p-d*u)/g,v=(f*u-l*h)/g;return new t(r-e+y*r,a-e+v*a,e,i-n+y*i,c-n+v*c,n,y,v,1)},t.quadrilateralToSquare=function(e,n,r,i,o,s,a,c){return t.squareToQuadrilateral(e,n,r,i,o,s,a,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),xL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),AL=(function(t){xL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E){var S=CS.quadrilateralToQuadrilateral(o,s,a,c,l,u,f,d,h,p,g,y,v,m,w,E);return this.sampleGridWithTransform(n,r,i,S)},e.prototype.sampleGridWithTransform=function(n,r,i,o){if(r<=0||i<=0)throw new pe;for(var s=new Gi(r,i),a=new Float32Array(2*r),c=0;c<i;c++){for(var l=a.length,u=c+.5,f=0;f<l;f+=2)a[f]=f/2+.5,a[f+1]=u;o.transformPoints(a),xb.checkAndNudgePoints(n,a);try{for(var f=0;f<l;f+=2)n.get(Math.floor(a[f]),Math.floor(a[f+1]))&&s.set(f/2,c)}catch{throw new pe}}return s},e})(xb),Nv=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new AL,t})(),lr=(function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new Pe(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),_L=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new EL(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new pe;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(o,s,a){var c=(o>>n-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(qe.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new pe},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var c=new Lh(pr.AZTEC_PARAM);c.decode(s,o)}catch{throw new pe}for(var l=0,a=0;a<i;a++)l=(l<<4)+s[a];return l},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(n,s,1,-1),c=this.getFirstDifferent(r,s,1,1),l=this.getFirstDifferent(i,s,-1,1),u=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(u,a)*this.nbCenterLayers/(this.distancePoint(o,n)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(a,c,l,u))break}n=a,r=c,i=l,o=u,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new pe;this.compact=this.nbCenterLayers===5;var d=new Pe(n.getX()+.5,n.getY()-.5),h=new Pe(r.getX()+.5,r.getY()+.5),p=new Pe(i.getX()-.5,i.getY()+.5),g=new Pe(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,h,p,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var o=new V1(this.image).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new lr(s+7,a-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new lr(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new lr(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new lr(s-7,a-7),!1,-1,-1).toResultPoint()}var c=ot.round((e.getX()+i.getX()+n.getX()+r.getX())/4),l=ot.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var o=new V1(this.image,15,c,l).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new lr(c+7,l-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new lr(c+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new lr(c-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new lr(c-7,l-7),!1,-1,-1).toResultPoint()}return c=ot.round((e.getX()+i.getX()+n.getX()+r.getX())/4),l=ot.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new lr(c,l)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,o){var s=Nv.getInstance(),a=this.getDimension(),c=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,c,c,l,c,l,l,c,l,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,o=this.distanceResultPoint(e,n),s=o/r,a=e.getX(),c=e.getY(),l=s*(n.getX()-e.getX())/o,u=s*(n.getY()-e.getY())/o,f=0;f<r;f++)this.image.get(ot.round(a+f*l),ot.round(c+f*u))&&(i|=1<<r-f-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var o=3;e=new lr(e.getX()-o,e.getY()+o),n=new lr(n.getX()-o,n.getY()-o),r=new lr(r.getX()+o,r.getY()-o),i=new lr(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,n);return a!==s||(a=this.getColor(n,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,o=(n.getY()-e.getY())/r,s=0,a=e.getX(),c=e.getY(),l=this.image.get(e.getX(),e.getY()),u=Math.ceil(r),f=0;f<u;f++)a+=i,c+=o,this.image.get(ot.round(a),ot.round(c))!==l&&s++;var d=s/r;return d>.1&&d<.9?0:d<=.1===l?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===n;)s+=i;return s-=i,new lr(o,s)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,l=new Pe(a+i*o,c+i*s),u=new Pe(a-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Pe(a+i*o,c+i*s),d=new Pe(a-i*o,c-i*s),h=[l,f,u,d];return h},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=ot.round(e.getX()),r=ot.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return ot.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return ot.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(qe.truncDivision(this.nbLayers-4,8)+1)+15},t})(),Kd=(function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new _L(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(n,o),s=new Eb().decode(a)}catch(f){r=f}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(n,o),s=new Eb().decode(a)}catch(f){throw r??f}var c=new Kn(s.getText(),s.getRawBytes(),s.getNumBits(),o,Me.AZTEC,St.currentTimeMillis()),l=s.getByteSegments();l!=null&&c.putMetadata(Rn.BYTE_SEGMENTS,l);var u=s.getECLevel();return u!=null&&c.putMetadata(Rn.ERROR_CORRECTION_LEVEL,u),c},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(It.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t})(),CL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){CL(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Kd,n)||this}return e})(Pc);var ln=(function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(It.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,n),s=o.getResultMetadata(),a=270;s!==null&&s.get(Rn.ORIENTATION)===!0&&(a=a+s.get(Rn.ORIENTATION)%360),o.putMetadata(Rn.ORIENTATION,a);var c=o.getResultPoints();if(c!==null)for(var l=i.getHeight(),u=0;u<c.length;u++)c[u]=new Pe(l-c[u].getY()-1,c[u].getX());return o}else throw new pe}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),o=new bn(r),s=n&&n.get(It.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var l=Math.trunc(i/2),u=0;u<c;u++){var f=Math.trunc((u+1)/2),d=(u&1)===0,h=l+a*(d?f:-f);if(h<0||h>=i)break;try{o=e.getBlackRow(h,o)}catch{continue}for(var p=function(m){if(m===1&&(o.reverse(),n&&n.get(It.NEED_RESULT_POINT_CALLBACK)===!0)){var w=new Map;n.forEach(function(R,F){return w.set(F,R)}),w.delete(It.NEED_RESULT_POINT_CALLBACK),n=w}try{var E=g.decodeRow(h,o,n);if(m===1){E.putMetadata(Rn.ORIENTATION,180);var S=E.getResultPoints();S!==null&&(S[0]=new Pe(r-S[0].getX()-1,S[0].getY()),S[1]=new Pe(r-S[1].getX()-1,S[1].getY()))}return{value:E}}catch{}},g=this,y=0;y<2;y++){var v=p(y);if(typeof v=="object")return v.value}}throw new pe},t.recordPattern=function(e,n,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(n>=s)throw new pe;for(var a=!e.get(n),c=0,l=n;l<s;){if(e.get(l)!==a)r[c]++;else{if(++c===i)break;r[c]=1,a=!a}l++}if(!(c===i||c===i-1&&l===s))throw new pe},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,o=e.get(n);n>0&&i>=0;)e.get(--n)!==o&&(i--,o=!o);if(i>=0)throw new pe;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var l=0,u=0;u<i;u++){var f=e[u],d=n[u]*c,h=f>d?f-d:d-f;if(h>r)return Number.POSITIVE_INFINITY;l+=h}return l/o},t})(),SL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ab=(function(t){SL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,c=!1,l=6,u=i;u<r;u++)if(n.get(u)!==c)s[o]++;else{if(o===l-1){for(var f=e.MAX_AVG_VARIANCE,d=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var p=ln.patternMatchVariance(s,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);p<f&&(f=p,d=h)}if(d>=0&&n.isRange(Math.max(0,a-(u-a)/2),a,!1))return Int32Array.from([a,u,d]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new pe},e.decodeCode=function(n,r,i){ln.recordPattern(n,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var c=e.CODE_PATTERNS[a],l=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,s=a)}if(s>=0)return s;throw new pe},e.prototype.decodeRow=function(n,r,i){var o=i&&i.get(It.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],c=0,l=new Uint8Array(20);l[c++]=a;var u;switch(a){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new Ae}for(var f=!1,d=!1,h="",p=s[0],g=s[1],y=Int32Array.from([0,0,0,0,0,0]),v=0,m=0,w=a,E=0,S=!0,R=!1,F=!1;!f;){var $=d;switch(d=!1,v=m,m=e.decodeCode(r,y,g),l[c++]=m,m!==e.CODE_STOP&&(S=!0),m!==e.CODE_STOP&&(E++,w+=E*m),p=g,g+=y.reduce(function(G,b){return G+b},0),m){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Ae}switch(u){case e.CODE_CODE_A:if(m<64)F===R?h+=String.fromCharCode(32+m):h+=String.fromCharCode(32+m+128),F=!1;else if(m<96)F===R?h+=String.fromCharCode(m-64):h+=String.fromCharCode(m+64),F=!1;else switch(m!==e.CODE_STOP&&(S=!1),m){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!R&&F?(R=!0,F=!1):R&&F?(R=!1,F=!1):F=!0;break;case e.CODE_SHIFT:d=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(m<96)F===R?h+=String.fromCharCode(32+m):h+=String.fromCharCode(32+m+128),F=!1;else switch(m!==e.CODE_STOP&&(S=!1),m){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!R&&F?(R=!0,F=!1):R&&F?(R=!1,F=!1):F=!0;break;case e.CODE_SHIFT:d=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(m<100)m<10&&(h+="0"),h+=m;else switch(m!==e.CODE_STOP&&(S=!1),m){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}$&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var U=g-p;if(g=r.getNextUnset(g),!r.isRange(g,Math.min(r.getSize(),g+(g-p)/2),!1))throw new pe;if(w-=E*v,w%103!==v)throw new Qt;var B=h.length;if(B===0)throw new pe;B>0&&S&&(u===e.CODE_CODE_C?h=h.substring(0,B-2):h=h.substring(0,B-1));for(var W=(s[1]+s[0])/2,V=p+U/2,L=l.length,I=new Uint8Array(L),x=0;x<L;x++)I[x]=l[x];var P=[new Pe(W,n),new Pe(V,n)];return new Kn(h,I,0,P,Me.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(ln),IL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),lp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_b=(function(t){IL(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var o,s,a,c,l=this.counters;l.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(r,l),f=r.getNextSet(u[1]),d=r.getSize(),h,p;do{e.recordPattern(r,f,l);var g=e.toNarrowWidePattern(l);if(g<0)throw new pe;h=e.patternToChar(g),this.decodeRowResult+=h,p=f;try{for(var y=(o=void 0,lp(l)),v=y.next();!v.done;v=y.next()){var m=v.value;f+=m}}catch(L){o={error:L}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var E=lp(l),S=E.next();!S.done;S=E.next()){var m=S.value;w+=m}}catch(L){a={error:L}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}var R=f-p-w;if(f!==d&&R*2<w)throw new pe;if(this.usingCheckDigit){for(var F=this.decodeRowResult.length-1,$=0,U=0;U<F;U++)$+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(U));if(this.decodeRowResult.charAt(F)!==e.ALPHABET_STRING.charAt($%43))throw new Qt;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new pe;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var W=(u[1]+u[0])/2,V=p+w/2;return new Kn(B,null,0,[new Pe(W,n),new Pe(V,n)],Me.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),o=n.getNextSet(0),s=0,a=o,c=!1,l=r.length,u=o;u<i;u++)if(n.get(u)!==c)r[s]++;else{if(s===l-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,a-Math.floor((u-a)/2)),a,!1))return[a,u];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new pe},e.toNarrowWidePattern=function(n){var r,i,o=n.length,s=0,a;do{var c=2147483647;try{for(var l=(r=void 0,lp(n)),u=l.next();!u.done;u=l.next()){var f=u.value;f<c&&f>s&&(c=f)}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}s=c,a=0;for(var d=0,h=0,p=0;p<o;p++){var f=n[p];f>s&&(h|=1<<o-1-p,a++,d+=f)}if(a===3){for(var p=0;p<o&&a>0;p++){var f=n[p];if(f>s&&(a--,f*2>=d))return-1}return h}}while(a>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new pe},e.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=n.charAt(o+1),c="\0";switch(s){case"+":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new Ae;break;case"$":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new Ae;break;case"%":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a==="X"||a==="Y"||a==="Z")c="";else throw new Ae;break;case"/":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new Ae;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(ln),TL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),up=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cb=(function(t){TL(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var o,s,a,c,l=this.findAsteriskPattern(r),u=r.getNextSet(l[1]),f=r.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var h,p;do{e.recordPattern(r,u,d);var g=this.toPattern(d);if(g<0)throw new pe;h=this.patternToChar(g),this.decodeRowResult+=h,p=u;try{for(var y=(o=void 0,up(d)),v=y.next();!v.done;v=y.next()){var m=v.value;u+=m}}catch(U){o={error:U}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}u=r.getNextSet(u)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var E=up(d),S=E.next();!S.done;S=E.next()){var m=S.value;w+=m}}catch(U){a={error:U}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(a)throw a.error}}if(u===f||!r.get(u))throw new pe;if(this.decodeRowResult.length<2)throw new pe;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var R=this.decodeExtended(this.decodeRowResult),F=(l[1]+l[0])/2,$=p+w/2;return new Kn(R,null,0,[new Pe(F,n),new Pe($,n)],Me.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,c=o.length,l=0,u=i;u<r;u++)if(n.get(u)!==a)o[l]++;else{if(l===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,u]);s+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,a=!a}throw new pe},e.prototype.toPattern=function(n){var r,i,o=0;try{for(var s=up(n),a=s.next();!a.done;a=s.next()){var c=a.value;o+=c}}catch(p){r={error:p}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var l=0,u=n.length,f=0;f<u;f++){var d=Math.round(n[f]*9/o);if(d<1||d>4)return-1;if((f&1)===0)for(var h=0;h<d;h++)l=l<<1|1;else l<<=d}return l},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new pe},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new Ae;var a=n.charAt(o+1),c="\0";switch(s){case"d":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new Ae;break;case"a":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new Ae;break;case"b":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a>="X"&&a<="Z")c="";else throw new Ae;break;case"c":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new Ae;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(n.charAt(a)),++o>i&&(o=1);if(n.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Qt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(ln),OL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),RL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sb=(function(t){OL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var o,s,a=this.decodeStart(r),c=this.decodeEnd(r),l=new ze;e.decodeMiddle(r,a[1],c[0],l);var u=l.toString(),f=null;i!=null&&(f=i.get(It.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var d=u.length,h=!1,p=0;try{for(var g=RL(f),y=g.next();!y.done;y=g.next()){var v=y.value;if(d===v){h=!0;break}v>p&&(p=v)}}catch(E){o={error:E}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}if(!h&&d>p&&(h=!0),!h)throw new Ae;var m=[new Pe(a[1],n),new Pe(c[0],n)],w=new Kn(u,null,0,m,Me.ITF,new Date().getTime());return w},e.decodeMiddle=function(n,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),a.fill(0),c.fill(0);r<i;){ln.recordPattern(n,r,s);for(var l=0;l<5;l++){var u=2*l;a[l]=s[u],c[l]=s[u+1]}var f=e.decodeDigit(a);o.append(f.toString()),f=this.decodeDigit(c),o.append(f.toString()),s.forEach(function(d){r+=d})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!n.get(o);o--)i--;if(i!==0)throw new pe},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new pe;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof pe&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var o=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-o,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var o=i.length,s=new Int32Array(o),a=n.getSize(),c=!1,l=0,u=r;s.fill(0);for(var f=r;f<a;f++)if(n.get(f)!==c)s[l]++;else{if(l===o-1){if(ln.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,f];u+=s[0]+s[1],St.arraycopy(s,2,s,0,l-1),s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,c=!c}throw new pe},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],c=ln.patternMatchVariance(n,a,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new pe},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(ln),PL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Cc=(function(t){PL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var c=a-(o-a);c>=0&&(r=n.isRange(c,a,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Ae;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Ae;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,o){return this.findGuardPattern(n,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(n,r,i,o,s){var a=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var c=0,l=r,u=o.length,f=i,d=r;d<a;d++)if(n.get(d)!==f)s[c]++;else{if(c===u-1){if(ln.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([l,d]);l+=s[0]+s[1];for(var h=s.slice(2,s.length),p=0;p<c-1;p++)s[p]=h[p];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,f=!f}throw new pe},e.decodeDigit=function(n,r,i,o){this.recordPattern(n,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,c=o.length,l=0;l<c;l++){var u=o[l],f=ln.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);f<s&&(s=f,a=l)}if(a>=0)return a;throw new pe},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(ln),NL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kL=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),c=[new Pe((r[0]+r[1])/2,e),new Pe(o,e)],l=new Kn(s,null,0,c,Me.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=n[1],l=0,u=0;u<5&&c<a;u++){var f=Cc.decodeDigit(e,s,c,Cc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,NL(s)),h=d.next();!h.done;h=d.next()){var p=h.value;c+=p}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}f>=10&&(l|=1<<4-u),u!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new pe;var g=this.determineCheckDigit(l);if(t.extensionChecksum(r.toString())!==g)throw new pe;return c},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new pe},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[Rn.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return n+i+"."+s},t})(),ML=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DL=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),c=[new Pe((r[0]+r[1])/2,e),new Pe(o,e)],l=new Kn(s,null,0,c,Me.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=n[1],l=0,u=0;u<2&&c<a;u++){var f=Cc.decodeDigit(e,s,c,Cc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,ML(s)),h=d.next();!h.done;h=d.next()){var p=h.value;c+=p}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}f>=10&&(l|=1<<1-u),u!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new pe;if(parseInt(r.toString())%4!==l)throw new pe;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Rn.ISSUE_NUMBER,parseInt(e)]])},t})(),BL=(function(){function t(){}return t.decodeRow=function(e,n,r){var i=Cc.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new kL;return o.decodeRow(e,n,i)}catch{var s=new DL;return s.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),LL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),on=(function(t){LL(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return n}return e.prototype.decodeRow=function(n,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(It.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new Pe((o[0]+o[1])/2,n);s.foundPossibleResultPoint(a)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),l=c.rowOffset,u=c.resultString;if(s!=null){var f=new Pe(l,n);s.foundPossibleResultPoint(f)}var d=e.decodeEnd(r,l);if(s!=null){var h=new Pe((d[0]+d[1])/2,n);s.foundPossibleResultPoint(h)}var p=d[1],g=p+(p-d[0]);if(g>=r.getSize()||!r.isRange(p,g,!1))throw new pe;var y=u.toString();if(y.length<8)throw new Ae;if(!e.checkChecksum(y))throw new Qt;var v=(o[1]+o[0])/2,m=(d[1]+d[0])/2,w=this.getBarcodeFormat(),E=[new Pe(v,n),new Pe(m,n)],S=new Kn(y,null,0,E,w,new Date().getTime()),R=0;try{var F=BL.decodeRow(n,r,d[1]);S.putMetadata(Rn.UPC_EAN_EXTENSION,F.getText()),S.putAllMetadata(F.getResultMetadata()),S.addResultPoints(F.getResultPoints()),R=F.getText().length}catch{}var $=i==null?null:i.get(It.ALLOWED_EAN_EXTENSIONS);if($!=null){var U=!1;for(var B in $)if(R.toString()===B){U=!0;break}if(!U)throw new pe}return w===Me.EAN_13||Me.UPC_A,S},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Ae;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Ae;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Cc),FL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ib=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K1=(function(t){FL(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a,c,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var u=n.getSize(),f=r[1],d=0,h=0;h<6&&f<u;h++){var p=on.decodeDigit(n,l,f,on.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var g=(o=void 0,Ib(l)),y=g.next();!y.done;y=g.next()){var v=y.value;f+=v}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}p>=10&&(d|=1<<5-h)}i=e.determineFirstDigit(i,d);var m=on.findGuardPattern(n,f,!0,on.MIDDLE_PATTERN,new Int32Array(on.MIDDLE_PATTERN.length).fill(0));f=m[1];for(var h=0;h<6&&f<u;h++){var p=on.decodeDigit(n,l,f,on.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var w=(a=void 0,Ib(l)),E=w.next();!E.done;E=w.next()){var v=E.value;f+=v}}catch(F){a={error:F}}finally{try{E&&!E.done&&(c=w.return)&&c.call(w)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return Me.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n,n;throw new pe},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(on),UL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Tb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ob=(function(t){UL(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a,c,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var u=n.getSize(),f=r[1],d=0;d<4&&f<u;d++){var h=on.decodeDigit(n,l,f,on.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var p=(o=void 0,Tb(l)),g=p.next();!g.done;g=p.next()){var y=g.value;f+=y}}catch(E){o={error:E}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}}var v=on.findGuardPattern(n,f,!0,on.MIDDLE_PATTERN,new Int32Array(on.MIDDLE_PATTERN.length).fill(0));f=v[1];for(var d=0;d<4&&f<u;d++){var h=on.decodeDigit(n,l,f,on.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var m=(a=void 0,Tb(l)),w=m.next();!w.done;w=m.next()){var y=w.value;f+=y}}catch(R){a={error:R}}finally{try{w&&!w.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return Me.EAN_8},e})(on),HL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Rb=(function(t){HL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new K1,n}return e.prototype.getBarcodeFormat=function(){return Me.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new Kn(r.substring(1),null,null,n.getResultPoints(),Me.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new pe},e.prototype.reset=function(){this.ean13Reader.reset()},e})(on),$L=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),VL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pb=(function(t){$L(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a=this.decodeMiddleCounters.map(function(y){return y});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=n.getSize(),l=r[1],u=0,f=0;f<6&&l<c;f++){var d=e.decodeDigit(n,a,l,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var h=(o=void 0,VL(a)),p=h.next();!p.done;p=h.next()){var g=p.value;l+=g}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}d>=10&&(u|=1<<5-f)}return e.determineNumSysAndCheckDigit(new ze(i),u),l},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return on.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){n.insert(0,"0"+i),n.append("0"+o);return}throw pe.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Me.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new ze;i.append(n.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(on),KL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Nb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fp=(function(t){KL(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(It.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Me.EAN_13)>-1&&o.push(new K1),i.indexOf(Me.UPC_A)>-1&&o.push(new Rb),i.indexOf(Me.EAN_8)>-1&&o.push(new Ob),i.indexOf(Me.UPC_E)>-1&&o.push(new Pb)),o.length===0&&(o.push(new K1),o.push(new Rb),o.push(new Ob),o.push(new Pb)),r.readers=o,r}return e.prototype.decodeRow=function(n,r,i){var o,s;try{for(var a=Nb(this.readers),c=a.next();!c.done;c=a.next()){var l=c.value;try{var u=l.decodeRow(n,r,i),f=u.getBarcodeFormat()===Me.EAN_13&&u.getText().charAt(0)==="0",d=i==null?null:i.get(It.POSSIBLE_FORMATS),h=d==null||d.includes(Me.UPC_A);if(f&&h){var p=u.getRawBytes(),g=new Kn(u.getText().substring(1),p,p?p.length:null,u.getResultPoints(),Me.UPC_A);return g.putAllMetadata(u.getResultMetadata()),g}return u}catch{}}}catch(y){o={error:y}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new pe},e.prototype.reset=function(){var n,r;try{for(var i=Nb(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e})(ln),jL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),GL=(function(t){jL(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var o=this.getValidRowData(r);if(!o)throw new pe;var s=this.codaBarDecodeRow(o.row);if(!s)throw new pe;return new Kn(s,null,0,[new Pe(o.left,n),new Pe(o.right,n)],Me.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],c=1,l=1;l<r.length;l++)r[l]===a?c++:(a=r[l],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(c,l){return(c+l)/2},0));n.length>0;){var o=n.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e})(ln),zL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),WL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bs=(function(t){zL(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(ln.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new pe},e.count=function(n){return ot.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]>o&&(o=r[s],i=s);n[i]++},e.decrement=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]<o&&(o=r[s],i=s);n[i]--},e.isFinderPattern=function(n){var r,i,o=n[0]+n[1],s=o+n[2]+n[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;try{for(var u=WL(n),f=u.next();!f.done;f=u.next()){var d=f.value;d>l&&(l=d),d<c&&(c=d)}}catch(h){r={error:h}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return l<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(ln),jd=(function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),SS=(function(){function t(e,n,r,i,o){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Pe(r,o)),this.resultPoints.push(new Pe(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t})(),qL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Va=(function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,o,s=0;try{for(var a=qL(e),c=a.next();!c.done;c=a.next()){var l=c.value;s+=l}}catch(m){i={error:m}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var u=0,f=0,d=e.length,h=0;h<d-1;h++){var p=void 0;for(p=1,f|=1<<h;p<e[h];p++,f&=~(1<<h)){var g=t.combins(s-p-1,d-h-2);if(r&&f===0&&s-p-(d-h-1)>=d-h-1&&(g-=t.combins(s-p-(d-h),d-h-2)),d-h-1>1){for(var y=0,v=s-p-(d-h-2);v>n;v--)y+=t.combins(s-p-v-1,d-h-3);g-=y*(d-1-h)}else s-p>n&&g--;u+=g}s-=p}return u},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},t})(),YL=(function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new bn(r),o=0,s=e[0],a=s.getRightChar().getValue(),c=11;c>=0;--c)(a&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var l=e[c],u=l.getLeftChar().getValue(),f=11;f>=0;--f)(u&1<<f)!==0&&i.set(o),o++;if(l.getRightChar()!==null)for(var d=l.getRightChar().getValue(),f=11;f>=0;--f)(d&1<<f)!==0&&i.set(o),o++}return i},t})(),Ts=(function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),kv=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),XL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Jr=(function(t){XL(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(kv),ZL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Os=(function(t){ZL(e,t);function e(n,r,i){var o=t.call(this,n)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(kv),QL=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ca=(function(t){QL(e,t);function e(n,r,i){var o=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new Ae;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(kv),hf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JL=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,o,s,a,c,l;if(!e)return null;if(e.length<2)throw new pe;var u=e.substring(0,2);try{for(var f=hf(t.TWO_DIGIT_DATA_LENGTH),d=f.next();!d.done;d=f.next()){var h=d.value;if(h[0]===u)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(R){n={error:R}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(e.length<3)throw new pe;var p=e.substring(0,3);try{for(var g=hf(t.THREE_DIGIT_DATA_LENGTH),y=g.next();!y.done;y=g.next()){var h=y.value;if(h[0]===p)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(R){i={error:R}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}try{for(var v=hf(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),m=v.next();!m.done;m=v.next()){var h=m.value;if(h[0]===p)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(R){s={error:R}}finally{try{m&&!m.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}if(e.length<4)throw new pe;var w=e.substring(0,4);try{for(var E=hf(t.FOUR_DIGIT_DATA_LENGTH),S=E.next();!S.done;S=E.next()){var h=S.value;if(h[0]===w)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(R){c={error:R}}finally{try{S&&!S.done&&(l=E.return)&&l.call(E)}finally{if(c)throw c.error}}throw new pe},t.processFixedAI=function(e,n,r){if(r.length<e)throw new pe;var i=r.substring(0,e);if(r.length<e+n)throw new pe;var o=r.substring(e,e+n),s=r.substring(e+n),a="("+i+")"+o,c=t.parseFieldsInGeneralPurpose(s);return c==null?a:a+c},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),o;r.length<e+n?o=r.length:o=e+n;var s=r.substring(e,o),a=r.substring(o),c="("+i+")"+s,l=t.parseFieldsInGeneralPurpose(a);return l==null?c:c+l},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),Wf=(function(){function t(e){this.buffer=new ze,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=JL.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new Ca(this.information.getSize(),Ca.FNC1,Ca.FNC1):new Ca(this.information.getSize(),n-1,Ca.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new Ca(e+7,i,o)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,o=0;o<r;++o)e.get(n+o)&&(i|=1<<r-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Os(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Os(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new Os(this.current.getPosition(),this.buffer.toString()):n=new Os(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ts(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new Os(this.current.getPosition(),this.buffer.toString());return new Ts(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ts(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Os(this.current.getPosition(),this.buffer.toString());return new Ts(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ts(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Os(this.current.getPosition(),this.buffer.toString());return new Ts(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ts(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new Jr(e+5,Jr.FNC1);if(n>=5&&n<15)return new Jr(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Jr(e+7,""+(r+1));if(r>=90&&r<116)return new Jr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new Ae}return new Jr(e+8,o)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new Jr(e+5,Jr.FNC1);if(n>=5&&n<15)return new Jr(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Jr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Au("Decoding invalid alphanumeric value: "+r)}return new Jr(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t})(),IS=(function(){function t(e){this.information=e,this.generalDecoder=new Wf(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),eF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),ui=(function(t){eF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&n.append("0"),s/10===0&&n.append("0"),n.append(s)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,o=0;o<13;o++){var s=n.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e})(IS),tF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),nF=(function(t){tF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new ze;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ui),rF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),iF=(function(t){rF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new ze;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(IS),oF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),qf=(function(t){oF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,o);for(var s=this.checkWeight(o),a=1e5,c=0;c<5;++c)s/a===0&&n.append("0"),a/=10;n.append(s)},e})(ui),sF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),TS=(function(t){sF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+qf.GTIN_SIZE+e.WEIGHT_SIZE)throw new pe;var n=new ze;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+qf.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(qf),aF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),cF=(function(t){aF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e})(TS),lF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),uF=(function(t){lF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e})(TS),fF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),dF=(function(t){fF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ui.GTIN_SIZE)throw new pe;var n=new ze;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ui.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ui.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ui),hF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),pF=(function(t){hF(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ui.GTIN_SIZE)throw new pe;var n=new ze;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ui.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ui.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ui.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(o.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ui),gF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Lo=(function(t){gF(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new pe;var n=new ze;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&n.append("0"),n.append(a),s/10===0&&n.append("0"),n.append(s),o/10===0&&n.append("0"),n.append(o)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(qf);function vF(t){try{if(t.get(1))return new nF(t);if(!t.get(2))return new iF(t);var e=Wf.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new cF(t);case 5:return new uF(t)}var n=Wf.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new dF(t);case 13:return new pF(t)}var r=Wf.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new Lo(t,"310","11");case 57:return new Lo(t,"320","11");case 58:return new Lo(t,"310","13");case 59:return new Lo(t,"320","13");case 60:return new Lo(t,"310","15");case 61:return new Lo(t,"320","15");case 62:return new Lo(t,"310","17");case 63:return new Lo(t,"320","17")}}catch(i){throw console.log(i),new Au("unknown decoder: "+t)}}var kb=(function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),yF=(function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,o){n.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},t})(),mF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Fo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wF=(function(t){mF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(a){if(a instanceof pe){if(!this.pairs.length)throw new pe;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(n,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new pe},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,Fo(n)),l=c.next();!l.done;l=c.next()){var u=l.value;this.pairs.push(u.getPairs())}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(n);f.push(a);try{return this.checkRows(f,s+1)}catch(d){console.log(d)}}}throw new pe},e.isValidSequence=function(n){var r,i;try{for(var o=Fo(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(n.length>a.length)){for(var c=!0,l=0;l<n.length;l++)if(n[l].getFinderPattern().getValue()!==a[l]){c=!1;break}if(c)return!0}}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>n){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new yF(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,o,s,a,c,l;try{for(var u=Fo(r),f=u.next();!f.done;f=u.next()){var d=f.value;if(d.getPairs().length!==n.length){var h=!0;try{for(var p=(s=void 0,Fo(d.getPairs())),g=p.next();!g.done;g=p.next()){var y=g.value,v=!1;try{for(var m=(c=void 0,Fo(n)),w=m.next();!w.done;w=m.next()){var E=w.value;if(kb.equals(y,E)){v=!0;break}}}catch(S){c={error:S}}finally{try{w&&!w.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}v||(h=!1)}}catch(S){s={error:S}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}}}}catch(S){i={error:S}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,o,s,a,c,l;try{for(var u=Fo(r),f=u.next();!f.done;f=u.next()){var d=f.value,h=!0;try{for(var p=(s=void 0,Fo(n)),g=p.next();!g.done;g=p.next()){var y=g.value,v=!1;try{for(var m=(c=void 0,Fo(d.getPairs())),w=m.next();!w.done;w=m.next()){var E=w.value;if(y.equals(E)){v=!0;break}}}catch(S){c={error:S}}finally{try{w&&!w.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}if(!v){h=!1;break}}}catch(S){s={error:S}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}if(h)return!0}}catch(S){i={error:S}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=YL.buildBitArray(n),i=vF(r),o=i.parseInformation(),s=n[0].getFinderPattern().getResultPoints(),a=n[n.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],a[0],a[1]];return new Kn(o,null,null,c,Me.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var c=this.pairs.get(a);o+=c.getLeftChar().getChecksumPortion(),s++;var l=c.getRightChar();l!=null&&(o+=l.getChecksumPortion(),s++)}o%=211;var u=211*(s-4)+o;return u===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,c=-1;do this.findNextPair(n,r,c),s=this.parseFoundFinderPattern(n,i,o),s===null?c=e.getNextSecondBar(n,this.startEnd[0]):a=!1;while(a);var l=this.decodeDataCharacter(n,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new pe;var u;try{u=this.decodeDataCharacter(n,s,o,!1)}catch(f){u=null,console.log(f)}return new kb(l,u,s,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=n.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var c=r[r.length-1];a=c.getFinderPattern().getStartEnd()[1]}var l=r.length%2!==0;this.startFromEven&&(l=!l);for(var u=!1;a<s&&(u=!n.get(a),!!u);)a++;for(var f=0,d=a,h=a;h<s;h++)if(n.get(h)!==u)o[f]++;else{if(f===3){if(l&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=d,this.startEnd[1]=h;return}l&&e.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,u=!u}throw new pe},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var o=n[i];n[i]=n[r-i-1],n[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(n,r,i){var o,s,a;if(i){for(var c=this.startEnd[0]-1;c>=0&&!n.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,a=this.startEnd[1]}else s=this.startEnd[0],a=n.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var l=this.getDecodeFinderCounters();St.arraycopy(l,0,l,1,l.length-1),l[0]=o;var u;try{u=this.parseFinderValue(l,e.FINDER_PATTERNS)}catch{return null}return new SS(u,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(n,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(n,r.getStartEnd()[0],s);else{e.recordPattern(n,r.getStartEnd()[1],s);for(var c=0,l=s.length-1;c<l;c++,l--){var u=s[c];s[c]=s[l],s[l]=u}}var f=17,d=ot.sum(new Int32Array(s))/f,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new pe;for(var p=this.getOddCounts(),g=this.getEvenCounts(),y=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var m=1*s[c]/d,w=m+.5;if(w<1){if(m<.3)throw new pe;w=1}else if(w>8){if(m>8.7)throw new pe;w=8}var E=c/2;(c&1)===0?(p[E]=w,y[E]=m-w):(g[E]=w,v[E]=m-w)}this.adjustOddEvenCounts(f);for(var S=4*r.getValue()+(i?0:2)+(o?0:1)-1,R=0,F=0,c=p.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var $=e.WEIGHTS[S][2*c];F+=p[c]*$}R+=p[c]}for(var U=0,c=g.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var $=e.WEIGHTS[S][2*c+1];U+=g[c]*$}var B=F+U;if((R&1)!==0||R>13||R<4)throw new pe;var W=(13-R)/2,V=e.SYMBOL_WIDEST[W],L=9-V,I=Va.getRSSvalue(p,V,!0),x=Va.getRSSvalue(g,L,!1),P=e.EVEN_TOTAL_SUBSET[W],G=e.GSUM[W],b=I*P+x+G;return new jd(b,B)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=ot.sum(new Int32Array(this.getOddCounts())),i=ot.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);var l=r+i-n,u=(r&1)===1,f=(i&1)===0;if(l===1)if(u){if(f)throw new pe;s=!0}else{if(!f)throw new pe;c=!0}else if(l===-1)if(u){if(f)throw new pe;o=!0}else{if(!f)throw new pe;a=!0}else if(l===0){if(u){if(!f)throw new pe;r<i?(o=!0,c=!0):(s=!0,a=!0)}else if(f)throw new pe}else throw new pe;if(o){if(s)throw new pe;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(c)throw new pe;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Bs),bF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),EF=(function(t){bF(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(jd),xF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),dp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mb=(function(t){xF(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var o,s,a,c,l=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,l),r.reverse();var u=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,u),r.reverse();try{for(var f=dp(this.possibleLeftPairs),d=f.next();!d.done;d=f.next()){var h=d.value;if(h.getCount()>1)try{for(var p=(a=void 0,dp(this.possibleRightPairs)),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1&&e.checkChecksum(h,y))return e.constructResult(h,y)}}catch(v){a={error:v}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(a)throw a.error}}}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}throw new pe},e.addOrTally=function(n,r){var i,o;if(r!=null){var s=!1;try{for(var a=dp(n),c=a.next();!c.done;c=a.next()){var l=c.value;if(l.getValue()===r.getValue()){l.incrementCount(),s=!0;break}}}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),o=new String(i).toString(),s=new ze,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var c=0,a=0;a<13;a++){var l=s.charAt(a).charCodeAt(0)-48;c+=(a&1)===0?3*l:l}c=10-c%10,c===10&&(c=0),s.append(c.toString());var u=n.getFinderPattern().getResultPoints(),f=r.getFinderPattern().getResultPoints();return new Kn(s.toString(),null,0,[u[0],u[1],f[0],f[1]],Me.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(n,r,i,o){try{var s=this.findFinderPattern(n,r),a=this.parseFoundFinderPattern(n,i,r,s),c=o==null?null:o.get(It.NEED_RESULT_POINT_CALLBACK);if(c!=null){var l=(s[0]+s[1])/2;r&&(l=n.getSize()-1-l),c.foundPossibleResultPoint(new Pe(l,i))}var u=this.decodeDataCharacter(n,a,!0),f=this.decodeDataCharacter(n,a,!1);return new EF(1597*u.getValue()+f.getValue(),u.getChecksumPortion()+4*f.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)ln.recordPatternInReverse(n,r.getStartEnd()[0],o);else{ln.recordPattern(n,r.getStartEnd()[1]+1,o);for(var a=0,c=o.length-1;a<c;a++,c--){var l=o[a];o[a]=o[c],o[c]=l}}for(var u=i?16:15,f=ot.sum(new Int32Array(o))/u,d=this.getOddCounts(),h=this.getEvenCounts(),p=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var y=o[a]/f,v=Math.floor(y+.5);v<1?v=1:v>8&&(v=8);var m=Math.floor(a/2);(a&1)===0?(d[m]=v,p[m]=y-v):(h[m]=v,g[m]=y-v)}this.adjustOddEvenCounts(i,u);for(var w=0,E=0,a=d.length-1;a>=0;a--)E*=9,E+=d[a],w+=d[a];for(var S=0,R=0,a=h.length-1;a>=0;a--)S*=9,S+=h[a],R+=h[a];var F=E+3*S;if(i){if((w&1)!==0||w>12||w<4)throw new pe;var $=(12-w)/2,U=e.OUTSIDE_ODD_WIDEST[$],B=9-U,W=Va.getRSSvalue(d,U,!1),V=Va.getRSSvalue(h,B,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[$],I=e.OUTSIDE_GSUM[$];return new jd(W*L+V+I,F)}else{if((R&1)!==0||R>10||R<4)throw new pe;var $=(10-R)/2,U=e.INSIDE_ODD_WIDEST[$],B=9-U,W=Va.getRSSvalue(d,U,!0),V=Va.getRSSvalue(h,B,!1),x=e.INSIDE_ODD_TOTAL_SUBSET[$],I=e.INSIDE_GSUM[$];return new jd(V*x+W+I,F)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=n.getSize(),s=!1,a=0;a<o&&(s=!n.get(a),r!==s);)a++;for(var c=0,l=a,u=a;u<o;u++)if(n.get(u)!==s)i[c]++;else{if(c===3){if(Bs.isFinderPattern(i))return[l,u];l+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new pe},e.prototype.parseFoundFinderPattern=function(n,r,i,o){for(var s=n.get(o[0]),a=o[0]-1;a>=0&&s!==n.get(a);)a--;a++;var c=o[0]-a,l=this.getDecodeFinderCounters(),u=new Int32Array(l.length);St.arraycopy(l,0,u,1,l.length-1),u[0]=c;var f=this.parseFinderValue(u,e.FINDER_PATTERNS),d=a,h=o[1];return i&&(d=n.getSize()-1-d,h=n.getSize()-1-h),new SS(f,[a,o[1]],d,h,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=ot.sum(new Int32Array(this.getOddCounts())),o=ot.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,c=!1,l=!1;n?(i>12?a=!0:i<4&&(s=!0),o>12?l=!0:o<4&&(c=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?l=!0:o<4&&(c=!0));var u=i+o-r,f=(i&1)===(n?1:0),d=(o&1)===1;if(u===1)if(f){if(d)throw new pe;a=!0}else{if(!d)throw new pe;l=!0}else if(u===-1)if(f){if(d)throw new pe;s=!0}else{if(!d)throw new pe;c=!0}else if(u===0){if(f){if(!d)throw new pe;i<o?(s=!0,l=!0):(a=!0,c=!0)}else if(d)throw new pe}else throw new pe;if(s){if(a)throw new pe;Bs.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Bs.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(l)throw new pe;Bs.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&Bs.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Bs),AF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ka=(function(t){AF(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(It.POSSIBLE_FORMATS):null,o=n&&n.get(It.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=n&&n.get(It.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Me.EAN_13)||i.includes(Me.UPC_A)||i.includes(Me.EAN_8)||i.includes(Me.UPC_E))&&r.readers.push(new fp(n)),i.includes(Me.CODE_39)&&r.readers.push(new _b(o,s)),i.includes(Me.CODE_93)&&r.readers.push(new Cb),i.includes(Me.CODE_128)&&r.readers.push(new Ab),i.includes(Me.ITF)&&r.readers.push(new Sb),i.includes(Me.CODABAR)&&r.readers.push(new GL),i.includes(Me.RSS_14)&&r.readers.push(new Mb),i.includes(Me.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new wF))),r.readers.length===0&&(r.readers.push(new fp(n)),r.readers.push(new _b),r.readers.push(new Cb),r.readers.push(new fp(n)),r.readers.push(new Ab),r.readers.push(new Sb),r.readers.push(new Mb)),r}return e.prototype.decodeRow=function(n,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(n,r,i)}catch{}throw new pe},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e})(ln),_F=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){_F(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new Ka(r),n,r)||this}return e})(Pc);var Db=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lt=(function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),st=(function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),CF=(function(){function t(e,n,r,i,o,s){var a,c;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var l=0,u=s.getECCodewords(),f=s.getECBlocks();try{for(var d=Db(f),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p.getCount()*(p.getDataCodewords()+u)}}catch(g){a={error:g}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if((e&1)!==0||(n&1)!==0)throw new Ae;try{for(var o=Db(t.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===n)return a}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new Ae},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new lt(5,new st(1,3))),new t(2,12,12,10,10,new lt(7,new st(1,5))),new t(3,14,14,12,12,new lt(10,new st(1,8))),new t(4,16,16,14,14,new lt(12,new st(1,12))),new t(5,18,18,16,16,new lt(14,new st(1,18))),new t(6,20,20,18,18,new lt(18,new st(1,22))),new t(7,22,22,20,20,new lt(20,new st(1,30))),new t(8,24,24,22,22,new lt(24,new st(1,36))),new t(9,26,26,24,24,new lt(28,new st(1,44))),new t(10,32,32,14,14,new lt(36,new st(1,62))),new t(11,36,36,16,16,new lt(42,new st(1,86))),new t(12,40,40,18,18,new lt(48,new st(1,114))),new t(13,44,44,20,20,new lt(56,new st(1,144))),new t(14,48,48,22,22,new lt(68,new st(1,174))),new t(15,52,52,24,24,new lt(42,new st(2,102))),new t(16,64,64,14,14,new lt(56,new st(2,140))),new t(17,72,72,16,16,new lt(36,new st(4,92))),new t(18,80,80,18,18,new lt(48,new st(4,114))),new t(19,88,88,20,20,new lt(56,new st(4,144))),new t(20,96,96,22,22,new lt(68,new st(4,174))),new t(21,104,104,24,24,new lt(56,new st(6,136))),new t(22,120,120,18,18,new lt(68,new st(6,175))),new t(23,132,132,20,20,new lt(62,new st(8,163))),new t(24,144,144,22,22,new lt(62,new st(8,156),new st(2,155))),new t(25,8,18,6,16,new lt(7,new st(1,5))),new t(26,8,32,6,14,new lt(11,new st(1,10))),new t(27,12,26,10,24,new lt(14,new st(1,16))),new t(28,12,36,10,16,new lt(18,new st(1,22))),new t(29,16,36,14,16,new lt(24,new st(1,32))),new t(30,16,48,14,22,new lt(28,new st(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),SF=(function(){function t(e){var n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new Ae;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Gi(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return CF.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,c=!1,l=!1,u=!1;do if(r===o&&i===0&&!a)e[n++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[n++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!l)e[n++]=this.readCorner3(o,s)&255,r-=2,i+=2,l=!0;else if(r===o-2&&i===0&&(s&7)===4&&!u)e[n++]=this.readCorner4(o,s)&255,r-=2,i+=2,u=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(n!==this.version.getTotalCodewords())throw new Ae;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var o=0;return this.readModule(e-2,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n,r,i)&&(o|=1),o<<=1,this.readModule(e,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e,n,r,i)&&(o|=1),o},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new De("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=n/i|0,a=r/o|0,c=s*i,l=a*o,u=new Gi(l,c),f=0;f<s;++f)for(var d=f*i,h=0;h<a;++h)for(var p=h*o,g=0;g<i;++g)for(var y=f*(i+2)+1+g,v=d+g,m=0;m<o;++m){var w=h*(o+2)+1+m;if(e.get(w,y)){var E=p+m;u.set(E,v)}}return u},t})(),Bb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IF=(function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,o,s,a=n.getECBlocks(),c=0,l=a.getECBlocks();try{for(var u=Bb(l),f=u.next();!f.done;f=u.next()){var d=f.value;c+=d.getCount()}}catch(I){r={error:I}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}var h=new Array(c),p=0;try{for(var g=Bb(l),y=g.next();!y.done;y=g.next())for(var d=y.value,v=0;v<d.getCount();v++){var m=d.getDataCodewords(),w=a.getECCodewords()+m;h[p++]=new t(m,new Uint8Array(w))}}catch(I){o={error:I}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}for(var E=h[0].codewords.length,S=E-a.getECCodewords(),R=S-1,F=0,v=0;v<R;v++)for(var $=0;$<p;$++)h[$].codewords[v]=e[F++];for(var U=n.getVersionNumber()===24,B=U?8:p,$=0;$<B;$++)h[$].codewords[S-1]=e[F++];for(var W=h[0].codewords.length,v=S;v<W;v++)for(var $=0;$<p;$++){var V=U?($+8)%p:$,L=U&&V>7?v-1:v;h[V].codewords[L]=e[F++]}if(F!==e.length)throw new De;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),OS=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new De(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,c=s-a,l=255>>8-a<<c;n=(o[i]&l)>>c,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,l=255>>c<<c;n=n<<e|(o[i]&l)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),nn;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(nn||(nn={}));var TF=(function(){function t(){}return t.decode=function(e){var n=new OS(e),r=new ze,i=new ze,o=new Array,s=nn.ASCII_ENCODE;do if(s===nn.ASCII_ENCODE)s=this.decodeAsciiSegment(n,r,i);else{switch(s){case nn.C40_ENCODE:this.decodeC40Segment(n,r);break;case nn.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case nn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case nn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case nn.BASE256_ENCODE:this.decodeBase256Segment(n,r,o);break;default:throw new Ae}s=nn.ASCII_ENCODE}while(s!==nn.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new Bh(e,r.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new Ae;if(o<=128)return i&&(o+=128),n.append(String.fromCharCode(o-1)),nn.ASCII_ENCODE;if(o===129)return nn.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&n.append("0"),n.append(""+s)}else switch(o){case 230:return nn.C40_ENCODE;case 231:return nn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return nn.ANSIX12_ENCODE;case 239:return nn.TEXT_ENCODE;case 240:return nn.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new Ae;break}}while(e.available()>0);return nn.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var l=this.C40_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}else throw new Ae;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var l=this.C40_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new Ae}o=0;break;case 3:r?(n.append(String.fromCharCode(c+224)),r=!1):n.append(String.fromCharCode(c+96)),o=0;break;default:throw new Ae}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var l=this.TEXT_BASIC_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}else throw new Ae;break;case 1:r?(n.append(String.fromCharCode(c+128)),r=!1):n.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var l=this.TEXT_SHIFT2_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l)}else switch(c){case 27:n.append("");break;case 30:r=!0;break;default:throw new Ae}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var l=this.TEXT_SHIFT3_SET_CHARS[c];r?(n.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):n.append(l),o=0}else throw new Ae;break;default:throw new Ae}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(s<14)n.append(String.fromCharCode(s+44));else if(s<40)n.append(String.fromCharCode(s+51));else throw new Ae;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new Ae;for(var a=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new Ae;a[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{n.append(Yr.decode(a,et.ISO88591))}catch(l){throw new Au("Platform does not support required encoding: "+l.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),OF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RF=(function(){function t(){this.rsDecoder=new Lh(pr.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new SF(e),o=i.getVersion(),s=i.readCodewords(),a=IF.getDataBlocks(s,o),c=0;try{for(var l=OF(a),u=l.next();!u.done;u=l.next()){var f=u.value;c+=f.getNumDataCodewords()}}catch(w){n={error:w}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}for(var d=new Uint8Array(c),h=a.length,p=0;p<h;p++){var g=a[p],y=g.getCodewords(),v=g.getNumDataCodewords();this.correctErrors(y,v);for(var m=0;m<v;m++)d[m*h+p]=y[m]}return TF.decode(d)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new Qt}for(var i=0;i<n;i++)e[i]=r[i]},t})(),PF=(function(){function t(e){this.image=e,this.rectangleDetector=new V1(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new pe;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],o=n[2],s=n[3],a=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(c&1)===1&&(c+=1),4*a<7*c&&4*c<7*a&&(a=c=Math.max(a,c));var l=t.sampleGrid(this.image,r,i,o,s,a,c);return new Pv(l,[r,i,o,s])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),o=(n.getY()-e.getY())/(r+1);return new Pe(e.getX()+i,e.getY()+o)},t.moveAway=function(e,n,r){var i=e.getX(),o=e.getY();return i<n?i-=1:i+=1,o<r?o-=1:o+=1,new Pe(i,o)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),l=this.transitionsBetween(o,n),u=s,f=[o,n,r,i];return u>a&&(u=a,f[0]=n,f[1]=r,f[2]=i,f[3]=o),u>c&&(u=c,f[0]=r,f[1]=i,f[2]=o,f[3]=n),u>l&&(f[0]=i,f[1]=o,f[2]=n,f[3]=r),f},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=t.shiftPoint(r,i,(s+1)*4),c=t.shiftPoint(i,r,(s+1)*4),l=this.transitionsBetween(a,n),u=this.transitionsBetween(c,o);return l<u?(e[0]=n,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=this.transitionsBetween(r,o),c=t.shiftPoint(n,r,(a+1)*4),l=t.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),a=this.transitionsBetween(l,o);var u=new Pe(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),f=new Pe(o.getX()+(n.getX()-r.getX())/(a+1),o.getY()+(n.getY()-r.getY())/(a+1));if(!this.isValid(u))return this.isValid(f)?f:null;if(!this.isValid(f))return u;var d=this.transitionsBetween(c,u)+this.transitionsBetween(l,u),h=this.transitionsBetween(c,f)+this.transitionsBetween(l,f);return d>h?u:f},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1,c=t.shiftPoint(n,r,a*4),l=t.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,a=this.transitionsBetween(l,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var u=(n.getX()+r.getX()+i.getX()+o.getX())/4,f=(n.getY()+r.getY()+i.getY()+o.getY())/4;n=t.moveAway(n,u,f),r=t.moveAway(r,u,f),i=t.moveAway(i,u,f),o=t.moveAway(o,u,f);var d,h;return c=t.shiftPoint(n,r,a*4),c=t.shiftPoint(c,o,s*4),d=t.shiftPoint(r,n,a*4),d=t.shiftPoint(d,i,s*4),l=t.shiftPoint(i,o,a*4),l=t.shiftPoint(l,r,s*4),h=t.shiftPoint(o,i,a*4),h=t.shiftPoint(h,n,s*4),[c,d,l,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,o,s,a){var c=Nv.getInstance();return c.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,n.getX(),n.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(n.getX()),s=Math.trunc(n.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var c=r;r=i,i=c,c=o,o=s,s=c}for(var l=Math.abs(o-r),u=Math.abs(s-i),f=-l/2,d=i<s?1:-1,h=r<o?1:-1,p=0,g=this.image.get(a?i:r,a?r:i),y=r,v=i;y!==o;y+=h){var m=this.image.get(a?v:y,a?y:v);if(m!==g&&(p++,g=m),f+=u,f>0){if(v===s)break;v+=d,f-=l}}return p},t})(),Gd=(function(){function t(){this.decoder=new RF}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(It.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=t.NO_POINTS}else{var s=new PF(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),c=new Kn(r.getText(),a,8*a.length,i,Me.DATA_MATRIX,St.currentTimeMillis()),l=r.getByteSegments();l!=null&&c.putMetadata(Rn.BYTE_SEGMENTS,l);var u=r.getECLevel();return u!=null&&c.putMetadata(Rn.ERROR_CORRECTION_LEVEL,u),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new pe;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],c=r[0],l=(c-a+1)/i,u=(s-o+1)/i;if(l<=0||u<=0)throw new pe;var f=i/2;o+=f,a+=f;for(var d=new Gi(l,u),h=0;h<u;h++)for(var p=o+h*i,g=0;g<l;g++)e.get(a+g*i,p)&&d.set(g,h);return d},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],o=e[1];i<r&&n.get(i,o);)i++;if(i===r)throw new pe;var s=i-e[0];if(s===0)throw new pe;return s},t.NO_POINTS=[],t})(),NF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){NF(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Gd,n)||this}return e})(Pc);var ja;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(ja||(ja={}));var kF=(function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new zt(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new De;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(ja.L,"L",1),t.M=new t(ja.M,"M",0),t.Q=new t(ja.Q,"Q",3),t.H=new t(ja.H,"H",2),t})(),MF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RS=(function(){function t(e){this.errorCorrectionLevel=kF.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return qe.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=MF(t.FORMAT_INFO_DECODE_LOOKUP),c=a.next();!c.done;c=a.next()){var l=c.value,u=l[0];if(u===e||u===n)return new t(l[1]);var f=t.numBitsDiffering(e,u);f<o&&(s=l[1],o=f),e!==n&&(f=t.numBitsDiffering(n,u),f<o&&(s=l[1],o=f))}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),DF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=(function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var o=DF(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),z=(function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),BF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Js=(function(){function t(e,n){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=o;var a=0,c=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var u=BF(l),f=u.next();!f.done;f=u.next()){var d=f.value;a+=d.getCount()*(d.getDataCodewords()+c)}}catch(h){r={error:h}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Ae;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Ae}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new De;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var s=RS.numBitsDiffering(e,o);s<n&&(r=i+7,n=s)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new Gi(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||n.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new ce(7,new z(1,19)),new ce(10,new z(1,16)),new ce(13,new z(1,13)),new ce(17,new z(1,9))),new t(2,Int32Array.from([6,18]),new ce(10,new z(1,34)),new ce(16,new z(1,28)),new ce(22,new z(1,22)),new ce(28,new z(1,16))),new t(3,Int32Array.from([6,22]),new ce(15,new z(1,55)),new ce(26,new z(1,44)),new ce(18,new z(2,17)),new ce(22,new z(2,13))),new t(4,Int32Array.from([6,26]),new ce(20,new z(1,80)),new ce(18,new z(2,32)),new ce(26,new z(2,24)),new ce(16,new z(4,9))),new t(5,Int32Array.from([6,30]),new ce(26,new z(1,108)),new ce(24,new z(2,43)),new ce(18,new z(2,15),new z(2,16)),new ce(22,new z(2,11),new z(2,12))),new t(6,Int32Array.from([6,34]),new ce(18,new z(2,68)),new ce(16,new z(4,27)),new ce(24,new z(4,19)),new ce(28,new z(4,15))),new t(7,Int32Array.from([6,22,38]),new ce(20,new z(2,78)),new ce(18,new z(4,31)),new ce(18,new z(2,14),new z(4,15)),new ce(26,new z(4,13),new z(1,14))),new t(8,Int32Array.from([6,24,42]),new ce(24,new z(2,97)),new ce(22,new z(2,38),new z(2,39)),new ce(22,new z(4,18),new z(2,19)),new ce(26,new z(4,14),new z(2,15))),new t(9,Int32Array.from([6,26,46]),new ce(30,new z(2,116)),new ce(22,new z(3,36),new z(2,37)),new ce(20,new z(4,16),new z(4,17)),new ce(24,new z(4,12),new z(4,13))),new t(10,Int32Array.from([6,28,50]),new ce(18,new z(2,68),new z(2,69)),new ce(26,new z(4,43),new z(1,44)),new ce(24,new z(6,19),new z(2,20)),new ce(28,new z(6,15),new z(2,16))),new t(11,Int32Array.from([6,30,54]),new ce(20,new z(4,81)),new ce(30,new z(1,50),new z(4,51)),new ce(28,new z(4,22),new z(4,23)),new ce(24,new z(3,12),new z(8,13))),new t(12,Int32Array.from([6,32,58]),new ce(24,new z(2,92),new z(2,93)),new ce(22,new z(6,36),new z(2,37)),new ce(26,new z(4,20),new z(6,21)),new ce(28,new z(7,14),new z(4,15))),new t(13,Int32Array.from([6,34,62]),new ce(26,new z(4,107)),new ce(22,new z(8,37),new z(1,38)),new ce(24,new z(8,20),new z(4,21)),new ce(22,new z(12,11),new z(4,12))),new t(14,Int32Array.from([6,26,46,66]),new ce(30,new z(3,115),new z(1,116)),new ce(24,new z(4,40),new z(5,41)),new ce(20,new z(11,16),new z(5,17)),new ce(24,new z(11,12),new z(5,13))),new t(15,Int32Array.from([6,26,48,70]),new ce(22,new z(5,87),new z(1,88)),new ce(24,new z(5,41),new z(5,42)),new ce(30,new z(5,24),new z(7,25)),new ce(24,new z(11,12),new z(7,13))),new t(16,Int32Array.from([6,26,50,74]),new ce(24,new z(5,98),new z(1,99)),new ce(28,new z(7,45),new z(3,46)),new ce(24,new z(15,19),new z(2,20)),new ce(30,new z(3,15),new z(13,16))),new t(17,Int32Array.from([6,30,54,78]),new ce(28,new z(1,107),new z(5,108)),new ce(28,new z(10,46),new z(1,47)),new ce(28,new z(1,22),new z(15,23)),new ce(28,new z(2,14),new z(17,15))),new t(18,Int32Array.from([6,30,56,82]),new ce(30,new z(5,120),new z(1,121)),new ce(26,new z(9,43),new z(4,44)),new ce(28,new z(17,22),new z(1,23)),new ce(28,new z(2,14),new z(19,15))),new t(19,Int32Array.from([6,30,58,86]),new ce(28,new z(3,113),new z(4,114)),new ce(26,new z(3,44),new z(11,45)),new ce(26,new z(17,21),new z(4,22)),new ce(26,new z(9,13),new z(16,14))),new t(20,Int32Array.from([6,34,62,90]),new ce(28,new z(3,107),new z(5,108)),new ce(26,new z(3,41),new z(13,42)),new ce(30,new z(15,24),new z(5,25)),new ce(28,new z(15,15),new z(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new ce(28,new z(4,116),new z(4,117)),new ce(26,new z(17,42)),new ce(28,new z(17,22),new z(6,23)),new ce(30,new z(19,16),new z(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new ce(28,new z(2,111),new z(7,112)),new ce(28,new z(17,46)),new ce(30,new z(7,24),new z(16,25)),new ce(24,new z(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new ce(30,new z(4,121),new z(5,122)),new ce(28,new z(4,47),new z(14,48)),new ce(30,new z(11,24),new z(14,25)),new ce(30,new z(16,15),new z(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new ce(30,new z(6,117),new z(4,118)),new ce(28,new z(6,45),new z(14,46)),new ce(30,new z(11,24),new z(16,25)),new ce(30,new z(30,16),new z(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new ce(26,new z(8,106),new z(4,107)),new ce(28,new z(8,47),new z(13,48)),new ce(30,new z(7,24),new z(22,25)),new ce(30,new z(22,15),new z(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new ce(28,new z(10,114),new z(2,115)),new ce(28,new z(19,46),new z(4,47)),new ce(28,new z(28,22),new z(6,23)),new ce(30,new z(33,16),new z(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new ce(30,new z(8,122),new z(4,123)),new ce(28,new z(22,45),new z(3,46)),new ce(30,new z(8,23),new z(26,24)),new ce(30,new z(12,15),new z(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new z(3,117),new z(10,118)),new ce(28,new z(3,45),new z(23,46)),new ce(30,new z(4,24),new z(31,25)),new ce(30,new z(11,15),new z(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new z(7,116),new z(7,117)),new ce(28,new z(21,45),new z(7,46)),new ce(30,new z(1,23),new z(37,24)),new ce(30,new z(19,15),new z(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new z(5,115),new z(10,116)),new ce(28,new z(19,47),new z(10,48)),new ce(30,new z(15,24),new z(25,25)),new ce(30,new z(23,15),new z(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new z(13,115),new z(3,116)),new ce(28,new z(2,46),new z(29,47)),new ce(30,new z(42,24),new z(1,25)),new ce(30,new z(23,15),new z(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new z(17,115)),new ce(28,new z(10,46),new z(23,47)),new ce(30,new z(10,24),new z(35,25)),new ce(30,new z(19,15),new z(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new z(17,115),new z(1,116)),new ce(28,new z(14,46),new z(21,47)),new ce(30,new z(29,24),new z(19,25)),new ce(30,new z(11,15),new z(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new z(13,115),new z(6,116)),new ce(28,new z(14,46),new z(23,47)),new ce(30,new z(44,24),new z(7,25)),new ce(30,new z(59,16),new z(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new z(12,121),new z(7,122)),new ce(28,new z(12,47),new z(26,48)),new ce(30,new z(39,24),new z(14,25)),new ce(30,new z(22,15),new z(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new z(6,121),new z(14,122)),new ce(28,new z(6,47),new z(34,48)),new ce(30,new z(46,24),new z(10,25)),new ce(30,new z(2,15),new z(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new z(17,122),new z(4,123)),new ce(28,new z(29,46),new z(14,47)),new ce(30,new z(49,24),new z(10,25)),new ce(30,new z(24,15),new z(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new z(4,122),new z(18,123)),new ce(28,new z(13,46),new z(32,47)),new ce(30,new z(48,24),new z(14,25)),new ce(30,new z(42,15),new z(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new z(20,117),new z(4,118)),new ce(28,new z(40,47),new z(7,48)),new ce(30,new z(43,24),new z(22,25)),new ce(30,new z(10,15),new z(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new z(19,118),new z(6,119)),new ce(28,new z(18,47),new z(31,48)),new ce(30,new z(34,24),new z(34,25)),new ce(30,new z(20,15),new z(61,16)))],t})(),hn;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(hn||(hn={}));var Lb=(function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[hn.DATA_MASK_000,new t(hn.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[hn.DATA_MASK_001,new t(hn.DATA_MASK_001,function(e,n){return(e&1)===0})],[hn.DATA_MASK_010,new t(hn.DATA_MASK_010,function(e,n){return n%3===0})],[hn.DATA_MASK_011,new t(hn.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[hn.DATA_MASK_100,new t(hn.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[hn.DATA_MASK_101,new t(hn.DATA_MASK_101,function(e,n){return e*n%6===0})],[hn.DATA_MASK_110,new t(hn.DATA_MASK_110,function(e,n){return e*n%6<3})],[hn.DATA_MASK_111,new t(hn.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t})(),LF=(function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new Ae;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var n=i-8;n<i;n++)o=this.copyBit(n,8,o);if(this.parsedFormatInfo=RS.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Ae},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Js.getVersionForNumber(n);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=Js.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=Js.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new Ae},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=Lb.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=n.buildFunctionPattern(),s=!0,a=new Uint8Array(n.getTotalCodewords()),c=0,l=0,u=0,f=i-1;f>0;f-=2){f===6&&f--;for(var d=0;d<i;d++)for(var h=s?i-1-d:d,p=0;p<2;p++)o.get(f-p,h)||(u++,l<<=1,this.bitMatrix.get(f-p,h)&&(l|=1),u===8&&(a[c++]=l,u=0,l=0));s=!s}if(c!==n.getTotalCodewords())throw new Ae;return a},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Lb.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,o=e.getHeight();i<o;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t})(),Fb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FF=(function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,o,s,a;if(e.length!==n.getTotalCodewords())throw new De;var c=n.getECBlocksForLevel(r),l=0,u=c.getECBlocks();try{for(var f=Fb(u),d=f.next();!d.done;d=f.next()){var h=d.value;l+=h.getCount()}}catch(L){i={error:L}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var p=new Array(l),g=0;try{for(var y=Fb(u),v=y.next();!v.done;v=y.next())for(var h=v.value,m=0;m<h.getCount();m++){var w=h.getDataCodewords(),E=c.getECCodewordsPerBlock()+w;p[g++]=new t(w,new Uint8Array(E))}}catch(L){s={error:L}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}for(var S=p[0].codewords.length,R=p.length-1;R>=0;){var F=p[R].codewords.length;if(F===S)break;R--}R++;for(var $=S-c.getECCodewordsPerBlock(),U=0,m=0;m<$;m++)for(var B=0;B<g;B++)p[B].codewords[m]=e[U++];for(var B=R;B<g;B++)p[B].codewords[$]=e[U++];for(var W=p[0].codewords.length,m=$;m<W;m++)for(var B=0;B<g;B++){var V=B<R?m:m+1;p[B].codewords[V]=e[U++]}return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),Ur;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Ur||(Ur={}));var Rt=(function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new De;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Ur.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Ur.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Ur.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Ur.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Ur.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Ur.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Ur.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Ur.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Ur.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Ur.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),UF=(function(){function t(){}return t.decode=function(e,n,r,i){var o=new OS(e),s=new ze,a=new Array,c=-1,l=-1;try{var u=null,f=!1,d=void 0;do{if(o.available()<4)d=Rt.TERMINATOR;else{var h=o.readBits(4);d=Rt.forBits(h)}switch(d){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:f=!0;break;case Rt.STRUCTURED_APPEND:if(o.available()<16)throw new Ae;c=o.readBits(8),l=o.readBits(8);break;case Rt.ECI:var p=t.parseECIValue(o);if(u=sn.getCharacterSetECIByValue(p),u===null)throw new Ae;break;case Rt.HANZI:var g=o.readBits(4),y=o.readBits(d.getCharacterCountBits(n));g===t.GB2312_SUBSET&&t.decodeHanziSegment(o,s,y);break;default:var v=o.readBits(d.getCharacterCountBits(n));switch(d){case Rt.NUMERIC:t.decodeNumericSegment(o,s,v);break;case Rt.ALPHANUMERIC:t.decodeAlphanumericSegment(o,s,v,f);break;case Rt.BYTE:t.decodeByteSegment(o,s,v,u,a,i);break;case Rt.KANJI:t.decodeKanjiSegment(o,s,v);break;default:throw new Ae}break}}while(d!==Rt.TERMINATOR)}catch{throw new Ae}return new Bh(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),c,l)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new Ae;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{n.append(Yr.decode(i,et.GB2312))}catch(c){throw new Ae(c)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new Ae;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{n.append(Yr.decode(i,et.SHIFT_JIS))}catch(c){throw new Ae(c)}},t.decodeByteSegment=function(e,n,r,i,o,s){if(8*r>e.available())throw new Ae;for(var a=new Uint8Array(r),c=0;c<r;c++)a[c]=e.readBits(8);var l;i===null?l=et.guessEncoding(a,s):l=i.getName();try{n.append(Yr.decode(a,l))}catch(u){throw new Ae(u)}o.push(a)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Ae;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var o=n.length();r>1;){if(e.available()<11)throw new Ae;var s=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(s/45))),n.append(t.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new Ae;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<n.length();a++)n.charAt(a)==="%"&&(a<n.length()-1&&n.charAt(a+1)==="%"?n.deleteCharAt(a+1):n.setCharAt(a,""))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new Ae;var i=e.readBits(10);if(i>=1e3)throw new Ae;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new Ae;var o=e.readBits(7);if(o>=100)throw new Ae;n.append(t.toAlphaNumericChar(Math.floor(o/10))),n.append(t.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new Ae;var s=e.readBits(4);if(s>=10)throw new Ae;n.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new Ae},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),PS=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t})(),Ub=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HF=(function(){function t(){this.rsDecoder=new Lh(pr.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(Gi.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new LF(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,n);return o.setOther(new PS(!0)),o}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,o,s,a=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),u=FF.getDataBlocks(l,a,c),f=0;try{for(var d=Ub(u),h=d.next();!h.done;h=d.next()){var p=h.value;f+=p.getNumDataCodewords()}}catch(R){r={error:R}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var g=new Uint8Array(f),y=0;try{for(var v=Ub(u),m=v.next();!m.done;m=v.next()){var p=m.value,w=p.getCodewords(),E=p.getNumDataCodewords();this.correctErrors(w,E);for(var S=0;S<E;S++)g[y++]=w[S]}}catch(R){o={error:R}}finally{try{m&&!m.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}return UF.decode(g,a,c,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new Qt}for(var i=0;i<n;i++)e[i]=r[i]},t})(),$F=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),VF=(function(t){$F(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=(this.getX()+r)/2,s=(this.getY()+n)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e})(Pe),KF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jF=(function(){function t(e,n,r,i,o,s,a){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,o=this.startY+n/2,s=new Int32Array(3),a=this.image,c=0;c<n;c++){var l=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var u=e;u<i&&!a.get(u,l);)u++;for(var f=0;u<i;){if(a.get(u,l))if(f===1)s[1]++;else if(f===2){if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,l,u);if(d!==null)return d}s[0]=s[2],s[1]=1,s[2]=0,f=1}else s[++f]++;else f===1&&f++,s[f]++;u++}if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,l,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new pe},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var c=e;c>=0&&o.get(n,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&!o.get(n,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(n,c)&&a[1]<=r;)a[1]++,c++;if(c===s||a[1]>r)return NaN;for(;c<s&&!o.get(n,c)&&a[2]<=r;)a[2]++,c++;if(a[2]>r)return NaN;var l=a[0]+a[1]+a[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,o,s=e[0]+e[1]+e[2],a=t.centerFromEnd(e,r),c=this.crossCheckVertical(n,a,2*e[1],s);if(!isNaN(c)){var l=(e[0]+e[1]+e[2])/3;try{for(var u=KF(this.possibleCenters),f=u.next();!f.done;f=u.next()){var d=f.value;if(d.aboutEquals(l,c,a))return d.combineEstimate(c,a,l)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}var h=new VF(a,c,l);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t})(),GF=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),zF=(function(t){GF(e,t);function e(n,r,i,o){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+n)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,c,o)},e})(Pe),WF=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),Wc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qF=(function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(It.TRY_HARDER)!==void 0,r=e!=null&&e.get(It.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*t.MAX_MODULES));(a<t.MIN_SKIP||n)&&(a=t.MIN_SKIP);for(var c=!1,l=new Int32Array(5),u=a-1;u<o&&!c;u+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var f=0,d=0;d<s;d++)if(i.get(d,u))(f&1)===1&&f++,l[f]++;else if((f&1)===0)if(f===4)if(t.foundPatternCross(l)){var h=this.handlePossibleCenter(l,u,d,r);if(h===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>l[2]&&(u+=p-l[2]-a,d=s-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,f=3;continue}f=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,f=3;else l[++f]++;else l[f]++;if(t.foundPatternCross(l)){var h=this.handlePossibleCenter(l,u,s,r);h===!0&&(a=l[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return Pe.orderBestPatterns(g),new WF(g)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var o=n/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&n>=s&&a.get(n-s,e-s);)o[2]++,s++;if(e<s||n<s)return!1;for(;e>=s&&n>=s&&!a.get(n-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||n<s||o[1]>r)return!1;for(;e>=s&&n>=s&&a.get(n-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=a.getHeight(),l=a.getWidth();for(s=1;e+s<c&&n+s<l&&a.get(n+s,e+s);)o[2]++,s++;if(e+s>=c||n+s>=l)return!1;for(;e+s<c&&n+s<l&&!a.get(n+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||n+s>=l||o[3]>=r)return!1;for(;e+s<c&&n+s<l&&a.get(n+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var u=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(u-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(n,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(n,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(n,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(n,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(n,c)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(n,c)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=2*i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,c):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,n);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,n)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(c,n)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,n);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,n)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(c,n)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,c):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,r),a=this.crossCheckVertical(n,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var c=o/7,l=!1,u=this.possibleCenters,f=0,d=u.length;f<d;f++){var h=u[f];if(h.aboutEquals(c,a,s)){u[f]=h.combineEstimate(a,s,c),l=!0;break}}if(!l){var p=new zF(s,a,c);u.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=Wc(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=t.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var c=Wc(this.possibleCenters),l=c.next();!l.done;l=c.next()){var u=l.value;u.getCount()>=t.CENTER_QUORUM&&(o++,s+=u.getEstimatedModuleSize())}}catch(g){e={error:g}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var f=s/a,d=0;try{for(var h=Wc(this.possibleCenters),p=h.next();!p.done;p=h.next()){var u=p.value;d+=Math.abs(u.getEstimatedModuleSize()-f)}}catch(g){r={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return d<=.05*s},t.prototype.selectBestPatterns=function(){var e,n,r,i,o=this.possibleCenters.length;if(o<3)throw new pe;var s=this.possibleCenters,a;if(o>3){var c=0,l=0;try{for(var u=Wc(this.possibleCenters),f=u.next();!f.done;f=u.next()){var d=f.value,h=d.getEstimatedModuleSize();c+=h,l+=h*h}}catch(S){e={error:S}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}a=c/o;var p=Math.sqrt(l/o-a*a);s.sort(function(S,R){var F=Math.abs(R.getEstimatedModuleSize()-a),$=Math.abs(S.getEstimatedModuleSize()-a);return F<$?-1:F>$?1:0});for(var g=Math.max(.2*a,p),y=0;y<s.length&&s.length>3;y++){var v=s[y];Math.abs(v.getEstimatedModuleSize()-a)>g&&(s.splice(y,1),y--)}}if(s.length>3){var c=0;try{for(var m=Wc(s),w=m.next();!w.done;w=m.next()){var E=w.value;c+=E.getEstimatedModuleSize()}}catch(R){r={error:R}}finally{try{w&&!w.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}a=c/s.length,s.sort(function(R,F){if(F.getCount()===R.getCount()){var $=Math.abs(F.getEstimatedModuleSize()-a),U=Math.abs(R.getEstimatedModuleSize()-a);return $<U?1:$>U?-1:0}else return F.getCount()-R.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),YF=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(It.NEED_RESULT_POINT_CALLBACK);var n=new qF(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(n,r,i);if(o<1)throw new pe("No pattern found in proccess finder.");var s=t.computeDimension(n,r,i,o),a=Js.getProvisionalVersionForDimension(s),c=a.getDimensionForVersion()-7,l=null;if(a.getAlignmentPatternCenters().length>0)for(var u=r.getX()-n.getX()+i.getX(),f=r.getY()-n.getY()+i.getY(),d=1-3/c,h=Math.floor(n.getX()+d*(u-n.getX())),p=Math.floor(n.getY()+d*(f-n.getY())),g=4;g<=16;g<<=1)try{l=this.findAlignmentInRegion(o,h,p,g);break}catch(w){if(!(w instanceof pe))throw w}var y=t.createTransform(n,r,i,l,s),v=t.sampleGrid(this.image,y,s),m;return l===null?m=[i,n,r]:m=[i,n,r,l],new Pv(v,m)},t.createTransform=function(e,n,r,i,o){var s=o-3.5,a,c,l,u;return i!==null?(a=i.getX(),c=i.getY(),l=s-3,u=l):(a=n.getX()-e.getX()+r.getX(),c=n.getY()-e.getY()+r.getY(),l=s,u=s),CS.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,u,3.5,s,e.getX(),e.getY(),n.getX(),n.getY(),a,c,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=Nv.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var o=ot.round(Pe.distance(e,n)/i),s=ot.round(Pe.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new pe("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,n,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var c=Math.floor(n-(i-n)*s);return s=1,c<0?(s=n/(n-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-n)/(c-n),c=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,n,a,c),o-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var o=Math.abs(i-n)>Math.abs(r-e);if(o){var s=e;e=n,n=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),c=Math.abs(i-n),l=-a/2,u=e<r?1:-1,f=n<i?1:-1,d=0,h=r+u,p=e,g=n;p!==h;p+=u){var y=o?g:p,v=o?p:g;if(d===1===this.image.get(y,v)){if(d===2)return ot.distance(p,g,e,n);d++}if(l+=c,l>0){if(g===i)break;g+=f,l-=a}}return d===2?ot.distance(r+u,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var o=Math.floor(i*e),s=Math.max(0,n-o),a=Math.min(this.image.getWidth()-1,n+o);if(a-s<e*3)throw new pe("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),l=Math.min(this.image.getHeight()-1,r+o);if(l-c<e*3)throw new pe("Alignment bottom exceeds estimated module size.");var u=new jF(this.image,s,c,a-s,l-c,e,this.resultPointCallback);return u.find()},t})(),zd=(function(){function t(){this.decoder=new HF}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(It.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,n),i=t.NO_POINTS}else{var s=new YF(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(s.getBits(),n),i=s.getPoints()}r.getOther()instanceof PS&&r.getOther().applyMirroredCorrection(i);var a=new Kn(r.getText(),r.getRawBytes(),void 0,i,Me.QR_CODE,void 0),c=r.getByteSegments();c!==null&&a.putMetadata(Rn.BYTE_SEGMENTS,c);var l=r.getECLevel();return l!==null&&a.putMetadata(Rn.ERROR_CORRECTION_LEVEL,l),r.hasStructuredAppend()&&(a.putMetadata(Rn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Rn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new pe;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],c=r[0];if(a>=c||o>=s)throw new pe;if(s-o!==c-a&&(c=a+(s-o),c>=e.getWidth()))throw new pe;var l=Math.round((c-a+1)/i),u=Math.round((s-o+1)/i);if(l<=0||u<=0)throw new pe;if(u!==l)throw new pe;var f=Math.floor(i/2);o+=f,a+=f;var d=a+Math.floor((l-1)*i)-c;if(d>0){if(d>f)throw new pe;a-=d}var h=o+Math.floor((u-1)*i)-s;if(h>0){if(h>f)throw new pe;o-=h}for(var p=new Gi(l,u),g=0;g<u;g++)for(var y=o+Math.floor(g*i),v=0;v<l;v++)e.get(a+Math.floor(v*i),y)&&p.set(v,g);return p},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),o=e[0],s=e[1],a=!0,c=0;o<i&&s<r;){if(a!==n.get(o,s)){if(++c===5)break;a=!a}o++,s++}if(o===i||s===r)throw new pe;return(o-e[0])/7},t.NO_POINTS=new Array,t})(),XF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nt=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ot.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=XF(e),a=s.next();!a.done;a=s.next()){var c=a.value;i[o++]=c}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=an.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),ZF=(function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),QF=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JF=(function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),o=t.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=t.detect(r,i)),new ZF(i,o)},t.detect=function(e,n){for(var r,i,o=new Array,s=0,a=0,c=!1;s<n.getHeight();){var l=t.findVertices(n,s,a);if(l[0]==null&&l[3]==null){if(!c)break;c=!1,a=0;try{for(var u=(r=void 0,QF(o)),f=u.next();!f.done;f=u.next()){var d=f.value;d[1]!=null&&(s=Math.trunc(Math.max(s,d[1].getY()))),d[3]!=null&&(s=Math.max(s,Math.trunc(d[3].getY())))}}catch(h){r={error:h}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s+=t.ROW_STEP;continue}if(c=!0,o.push(l),!e)break;l[2]!=null?(a=Math.trunc(l[2].getX()),s=Math.trunc(l[2].getY())):(a=Math.trunc(l[4].getX()),s=Math.trunc(l[4].getY()))}return o},t.findVertices=function(e,n,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,o,s){for(var a=new Array(4),c=!1,l=new Int32Array(s.length);i<n;i+=t.ROW_STEP){var u=t.findGuardPattern(e,o,i,r,!1,s,l);if(u!=null){for(;i>0;){var f=t.findGuardPattern(e,o,--i,r,!1,s,l);if(f!=null)u=f;else{i++;break}}a[0]=new Pe(u[0],i),a[1]=new Pe(u[1],i),c=!0;break}}var d=i+1;if(c){for(var h=0,f=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);d<n;d++){var u=t.findGuardPattern(e,f[0],d,r,!1,s,l);if(u!=null&&Math.abs(f[0]-u[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-u[1])<t.MAX_PATTERN_DRIFT)f=u,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}d-=h+1,a[2]=new Pe(f[0],d),a[3]=new Pe(f[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&an.fill(a,null),a},t.findGuardPattern=function(e,n,r,i,o,s,a){an.fillWithin(a,0,a.length,0);for(var c=n,l=0;e.get(c,r)&&c>0&&l++<t.MAX_PIXEL_DRIFT;)c--;for(var u=c,f=0,d=s.length,h=o;u<i;u++){var p=e.get(u,r);if(p!==h)a[f]++;else{if(f===d-1){if(t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,u]);c+=a[0]+a[1],St.arraycopy(a,2,a,0,f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,h=!h}}return f===d-1&&t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,u-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return 1/0;var c=o/s;r*=c;for(var l=0,u=0;u<i;u++){var f=e[u],d=n[u]*c,h=f>d?f-d:d-f;if(h>r)return 1/0;l+=h}return l/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),eU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qs=(function(){function t(e,n){if(n.length===0)throw new De;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),St.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=eU(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(f){n={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}for(var c=this.coefficients[0],l=this.coefficients.length,u=1;u<l;u++)c=this.field.add(this.field.multiply(e,c),this.coefficients[u]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new De("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;St.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(n[a-s],r[a]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new De("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new De("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var c=n[a],l=0;l<o;l++)s[a+l]=this.field.add(s[a+l],this.field.multiply(c,i[l]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new De;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new ze,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t})(),tU=(function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new De;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new _S;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),nU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),rU=(function(t){nU(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var o=1,s=0;s<n;s++)i.expTable[s]=o,o=o*r%n;for(var s=0;s<n-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new qs(i,new Int32Array([0])),i.one=new qs(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new De;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new qs(this,i)},e.PDF417_GF=new e(nt.NUMBER_OF_CODEWORDS,3),e})(tU),iU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oU=(function(){function t(){this.field=rU.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,o,s=new qs(this.field,e),a=new Int32Array(n),c=!1,l=n;l>0;l--){var u=s.evaluateAt(this.field.exp(l));a[n-l]=u,u!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(r!=null)try{for(var d=iU(r),h=d.next();!h.done;h=d.next()){var p=h.value,g=this.field.exp(e.length-1-p),y=new qs(this.field,new Int32Array([this.field.subtract(0,g),1]));f=f.multiply(y)}}catch($){i={error:$}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var v=new qs(this.field,a),m=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),v,n),w=m[0],E=m[1],S=this.findErrorLocations(w),R=this.findErrorMagnitudes(E,w,S),l=0;l<S.length;l++){var F=e.length-1-this.field.log(S[l]);if(F<0)throw Qt.getChecksumInstance();e[F]=this.field.subtract(e[F],R[l])}return S.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=e,s=n,a=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var l=o,u=a;if(o=s,a=c,o.isZero())throw Qt.getChecksumInstance();s=l;for(var f=this.field.getZero(),d=o.getCoefficient(o.getDegree()),h=this.field.inverse(d);s.getDegree()>=o.getDegree()&&!s.isZero();){var p=s.getDegree()-o.getDegree(),g=this.field.multiply(s.getCoefficient(s.getDegree()),h);f=f.add(this.field.buildMonomial(p,g)),s=s.subtract(o.multiplyByMonomial(p,g))}c=f.multiply(a).subtract(u).negative()}var y=c.getCoefficient(0);if(y===0)throw Qt.getChecksumInstance();var v=this.field.inverse(y),m=c.multiply(v),w=s.multiply(v);return[m,w]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,o=1;o<this.field.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==n)throw Qt.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,n.getCoefficient(s));for(var a=new qs(this.field,o),c=r.length,l=new Int32Array(c),s=0;s<c;s++){var u=this.field.inverse(r[s]),f=this.field.subtract(0,e.evaluateAt(u)),d=this.field.inverse(a.evaluateAt(u));l[s]=this.field.multiply(f,d)}return l},t})(),j1=(function(){function t(e,n,r,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,o)}return t.prototype.constructor_1=function(e,n,r,i,o){var s=n==null||r==null,a=i==null||o==null;if(s&&a)throw new pe;s?(n=new Pe(0,i.getY()),r=new Pe(0,o.getY())):a&&(i=new Pe(e.getWidth()-1,n.getY()),o=new Pe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,l=Math.trunc(c.getY()-e);l<0&&(l=0);var u=new Pe(c.getX(),l);r?i=u:s=u}if(n>0){var f=r?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+n);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var h=new Pe(f.getX(),d);r?o=h:a=h}return new t(this.image,i,o,s,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),sU=(function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),Mv=(function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(s,a,c,l,u,f){if(s==="%%")return"%";if(n[++r]!==void 0){s=l?parseInt(l.substr(1)):void 0;var d=u?parseInt(u.substr(1)):void 0,h;switch(f){case"s":h=n[r];break;case"c":h=n[r][0];break;case"f":h=parseFloat(n[r]).toFixed(s);break;case"p":h=parseFloat(n[r]).toPrecision(s);break;case"e":h=parseFloat(n[r]).toExponential(s);break;case"x":h=parseInt(n[r]).toString(d||16);break;case"d":h=parseFloat(parseInt(n[r],d||10).toPrecision(s)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(d);for(var p=parseInt(c),g=c&&c[0]+""=="0"?"0":" ";h.length<p;)h=a!==void 0?h+g:g+h;return h}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t})(),aU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NS=(function(){function t(e){this.boundingBox=new j1(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new Mv,i=0;try{for(var o=aU(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),cU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lU=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},sl=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,o=function(f,d){var h={getKey:function(){return f},getValue:function(){return d}};h.getValue()>r?(r=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===r&&i.push(h.getKey())};try{for(var s=cU(this.values.entries()),a=s.next();!a.done;a=s.next()){var c=lU(a.value,2),l=c[0],u=c[1];o(l,u)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return nt.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),uU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hb=(function(t){uU(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=hp(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=-1,u=1,f=0,d=a;d<c;d++)if(r[d]!=null){var h=r[d],p=h.getRowNumber()-l;if(p===0)f++;else if(p===1)u=Math.max(u,f),f=1,l=h.getRowNumber();else if(p<0||h.getRowNumber()>=n.getRowCount()||p>d)r[d]=null;else{var g=void 0;u>2?g=(u-2)*p:g=p;for(var y=g>=d,v=1;v<=g&&!y;v++)y=r[d-v]!=null;y?r[d]=null:(l=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=hp(this.getCodewords()),a=s.next();!a.done;a=s.next()){var c=a.value;if(c!=null){var l=c.getRowNumber();if(l>=o.length)continue;o[l]++}}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),l=-1,u=s;u<a;u++)if(c[u]!=null){var f=c[u];f.setRowNumberAsRowIndicatorColumn();var d=f.getRowNumber()-l;d===0||(d===1?l=f.getRowNumber():f.getRowNumber()>=n.getRowCount()?c[u]=null:l=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),o=new sl,s=new sl,a=new sl,c=new sl;try{for(var l=hp(i),u=l.next();!u.done;u=l.next()){var f=u.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var d=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:s.setValue(d*3+1);break;case 1:c.setValue(d/3),a.setValue(d%3);break;case 2:o.setValue(d+1);break}}}}catch(g){n={error:g}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<nt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>nt.MAX_ROWS_IN_BARCODE)return null;var p=new sU(o.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,p),p},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var o=n[i];if(n[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:s+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})(NS),fU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dU=(function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=nt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[n],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var l=new Array(14);l[2]=a[n],l[3]=c[n],n>0&&(l[0]=r[n-1],l[4]=a[n-1],l[5]=c[n-1]),n>1&&(l[8]=r[n-2],l[10]=a[n-2],l[11]=c[n-2]),n<r.length-1&&(l[1]=r[n+1],l[6]=a[n+1],l[7]=c[n+1]),n<r.length-2&&(l[9]=r[n+2],l[12]=a[n+2],l[13]=c[n+2]);try{for(var u=fU(l),f=u.next();!f.done;f=u.next()){var d=f.value;if(t.adjustRowNumber(s,d))return}}catch(h){i={error:h}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new Mv,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){n.format("    |   ");continue}n.format(" %3d|%3d",o.getRowNumber(),o.getValue())}n.format("%n")}return n.toString()},t})(),hU=(function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),pU=(function(){function t(){}return t.initialize=function(){for(var e=0;e<nt.SYMBOL_TABLE.length;e++)for(var n=nt.SYMBOL_TABLE[e],r=n&1,i=0;i<nt.BARS_IN_MODULE;i++){for(var o=0;(n&1)===r;)o+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(nt.BARS_IN_MODULE)),t.RATIOS_TABLE[e][nt.BARS_IN_MODULE-i-1]=Math.fround(o/nt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=ot.sum(e),r=new Int32Array(nt.BARS_IN_MODULE),i=0,o=0,s=0;s<nt.MODULES_IN_CODEWORD;s++){var a=n/(2*nt.MODULES_IN_CODEWORD)+s*n/nt.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return nt.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=ot.sum(e),r=new Array(nt.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var o=$1.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var c=0,l=t.RATIOS_TABLE[a],u=0;u<nt.BARS_IN_MODULE;u++){var f=Math.fround(l[u]-r[u]);if(c+=Math.fround(f*f),c>=o)break}c<o&&(o=c,s=nt.SYMBOL_TABLE[a])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(nt.SYMBOL_TABLE.length).map(function(e){return new Array(nt.BARS_IN_MODULE)}),t})(),gU=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),$b=(function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t})(),vU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),yU=(function(t){vU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(mr),mU=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new yU;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new Rv;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),wU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),bU=(function(t){wU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(mr),EU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),xU=(function(t){EU(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new De("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new bU;i=qe.MAX_VALUE}this.buf=an.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new Rv;this.ensureCapacity(this.count+i),St.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return an.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e})(mU),mt;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(mt||(mt={}));function kS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var pf;function Jo(t){if(typeof pf>"u"&&(pf=kS()),pf===null)throw new Error("BigInt is not supported!");return pf(t)}function AU(){var t=[];t[0]=Jo(1);var e=Jo(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var _U=(function(){function t(){}return t.decode=function(e,n){var r=new ze(""),i=sn.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new gU;o<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(s,e,i,o,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,r);break;case t.ECI_CHARSET:sn.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Ae;default:o--,o=t.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw Ae.getFormatInstance()}if(r.length()===0)throw Ae.getFormatInstance();var c=new Bh(null,r.toString(),null,n);return c.setOther(a),c},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Ae.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,n++)i[o]=e[n];r.setSegmentIndex(qe.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new ze;n=t.textCompaction(e,n,s),r.setFileId(s.toString());var a=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new ze;n=t.textCompaction(e,n+1,c),r.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new ze;n=t.textCompaction(e,n+1,l),r.setSender(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new ze;n=t.textCompaction(e,n+1,u),r.setAddressee(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new ze;n=t.numericCompaction(e,n+1,f),r.setSegmentCount(qe.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new ze;n=t.numericCompaction(e,n+1,d),r.setTimestamp($b.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new ze;n=t.numericCompaction(e,n+1,h),r.setChecksum(qe.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new ze;n=t.numericCompaction(e,n+1,p),r.setFileSize($b.parseLong(p.toString()));break;default:throw Ae.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw Ae.getFormatInstance()}if(a!==-1){var g=n-a;r.isLastSegment()&&g--,r.setOptionalData(an.copyOfRange(e,a,a+g))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),o=new Int32Array((e[0]-n)*2),s=0,a=!1;n<e[0]&&!a;){var c=e[n++];if(c<t.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[n++],o[s]=c,s++;break}}return t.decodeTextCompaction(i,o,s,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var o=mt.ALPHA,s=mt.ALPHA,a=0;a<r;){var c=e[a],l="";switch(o){case mt.ALPHA:if(c<26)l=String.fromCharCode(65+c);else switch(c){case 26:l=" ";break;case t.LL:o=mt.LOWER;break;case t.ML:o=mt.MIXED;break;case t.PS:s=o,o=mt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=mt.ALPHA;break}break;case mt.LOWER:if(c<26)l=String.fromCharCode(97+c);else switch(c){case 26:l=" ";break;case t.AS:s=o,o=mt.ALPHA_SHIFT;break;case t.ML:o=mt.MIXED;break;case t.PS:s=o,o=mt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=mt.ALPHA;break}break;case mt.MIXED:if(c<t.PL)l=t.MIXED_CHARS[c];else switch(c){case t.PL:o=mt.PUNCT;break;case 26:l=" ";break;case t.LL:o=mt.LOWER;break;case t.AL:o=mt.ALPHA;break;case t.PS:s=o,o=mt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=mt.ALPHA;break}break;case mt.PUNCT:if(c<t.PAL)l=t.PUNCT_CHARS[c];else switch(c){case t.PAL:o=mt.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=mt.ALPHA;break}break;case mt.ALPHA_SHIFT:if(o=s,c<26)l=String.fromCharCode(65+c);else switch(c){case 26:l=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=mt.ALPHA;break}break;case mt.PUNCT_SHIFT:if(o=s,c<t.PAL)l=t.PUNCT_CHARS[c];else switch(c){case t.PAL:o=mt.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=mt.ALPHA;break}break}l!==""&&i.append(l),a++}},t.byteCompaction=function(e,n,r,i,o){var s=new xU,a=0,c=0,l=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),f=n[i++];i<n[0]&&!l;)switch(u[a++]=f,c=900*c+f,f=n[i++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(Jo(c)>>Jo(8*(5-d))));c=0,a=0}break}i===n[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(u[a++]=f);for(var h=0;h<a;h++)s.write(u[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!l;){var p=n[i++];if(p<t.TEXT_COMPACTION_MODE_LATCH)a++,c=900*c+p;else switch(p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break}if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(Jo(c)>>Jo(8*(5-d))));c=0,a=0}}break}return o.append(Yr.decode(s.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,o=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!o;){var a=e[n++];if(n===e[0]&&(o=!0),a<t.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||a===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(t.decodeBase900toBase10(s,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=Jo(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*Jo(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new Ae;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=kS()?AU():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),qc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CU=(function(){function t(){}return t.decode=function(e,n,r,i,o,s,a){for(var c=new j1(e,n,r,i,o),l=null,u=null,f,d=!0;;d=!1){if(n!=null&&(l=t.getRowIndicatorColumn(e,c,n,!0,s,a)),i!=null&&(u=t.getRowIndicatorColumn(e,c,i,!1,s,a)),f=t.merge(l,u),f==null)throw pe.getNotFoundInstance();var h=f.getBoundingBox();if(d&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}f.setBoundingBox(c);var p=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,l),f.setDetectionResultColumn(p,u);for(var g=l!=null,y=1;y<=p;y++){var v=g?y:p-y;if(f.getDetectionResultColumn(v)===void 0){var m=void 0;v===0||v===p?m=new Hb(c,v===0):m=new NS(c),f.setDetectionResultColumn(v,m);for(var w=-1,E=w,S=c.getMinY();S<=c.getMaxY();S++){if(w=t.getStartColumn(f,v,S,g),w<0||w>c.getMaxX()){if(E===-1)continue;w=E}var R=t.detectCodeword(e,c.getMinX(),c.getMaxX(),g,w,S,s,a);R!=null&&(m.setCodeword(S,R),E=w,s=Math.min(s,R.getWidth()),a=Math.max(a,R.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=j1.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new dU(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),s=0;try{for(var a=qc(i),c=a.next();!c.done;c=a.next()){var l=c.value;if(s+=o-l,l>0)break}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var u=e.getCodewords(),f=0;s>0&&u[f]==null;f++)s--;for(var d=0,f=i.length-1;f>=0&&(d+=o-i[f],!(i[f]>0));f--);for(var f=u.length-1;d>0&&u[f]==null;f--)d--;return e.getBoundingBox().addMissingRows(s,d,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var o=qc(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,o,s){for(var a=new Hb(n,i),c=0;c<2;c++)for(var l=c===0?1:-1,u=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=n.getMaxY()&&f>=n.getMinY();f+=l){var d=t.detectCodeword(e,0,e.getWidth(),i,u,f,o,s);d!=null&&(a.setCodeword(f,d),i?u=d.getStartX():u=d.getEndX())}return a},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>nt.MAX_CODEWORDS_IN_BARCODE)throw pe.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var c=0;c<e.getBarcodeColumnCount();c++){var l=n[a][c+1].getValue(),u=a*e.getBarcodeColumnCount()+c;l.length===0?r.push(u):l.length===1?i[u]=l[0]:(s.push(u),o.push(l))}for(var f=new Array(o.length),d=0;d<f.length;d++)f[d]=o[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,nt.toIntArray(r),nt.toIntArray(s),f)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var c=0;c<s.length;c++)n[i[c]]=o[c][s[c]];try{return t.decodeCodewords(n,e,r)}catch(u){var l=u instanceof Qt;if(!l)throw u}if(s.length===0)throw Qt.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw Qt.getChecksumInstance()}throw Qt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var c=0;c<s[a].length;c++)s[a][c]=new sl;var l=0;try{for(var u=qc(e.getDetectionResultColumns()),f=u.next();!f.done;f=u.next()){var d=f.value;if(d!=null)try{for(var h=(i=void 0,qc(d.getCodewords())),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null){var y=g.getRowNumber();if(y>=0){if(y>=s.length)continue;s[y][l].setValue(g.getValue())}}}}catch(v){i={error:v}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}l++}}catch(v){n={error:v}}finally{try{f&&!f.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return s},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var o,s,a=i?1:-1,c=null;if(t.isValidBarcodeColumn(e,n-a)&&(c=e.getDetectionResultColumn(n-a).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,n-a)&&(c=e.getDetectionResultColumn(n-a).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var l=0;t.isValidBarcodeColumn(e,n-a);){n-=a;try{for(var u=(o=void 0,qc(e.getDetectionResultColumn(n).getCodewords())),f=u.next();!f.done;f=u.next()){var d=f.value;if(d!=null)return(i?d.getEndX():d.getStartX())+a*l*(d.getEndX()-d.getStartX())}}catch(h){o={error:h}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}l++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,o,s,a,c){o=t.adjustCodewordStartColumn(e,n,r,i,o,s);var l=t.getModuleBitCount(e,n,r,i,o,s);if(l==null)return null;var u,f=ot.sum(l);if(i)u=o+f;else{for(var d=0;d<l.length/2;d++){var h=l[d];l[d]=l[l.length-1-d],l[l.length-1-d]=h}u=o,o=u-f}if(!t.checkCodewordSkew(f,a,c))return null;var p=pU.getDecodedValue(l),g=nt.getCodeword(p);return g===-1?null:new hU(o,u,t.getCodewordBucketNumber(p),g)},t.getModuleBitCount=function(e,n,r,i,o,s){for(var a=o,c=new Int32Array(8),l=0,u=i?1:-1,f=i;(i?a<r:a>=n)&&l<c.length;)e.get(a,s)===f?(c[l]++,a+=u):(l++,f=!f);return l===c.length||a===(i?r:n)&&l===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,o,s){for(var a=o,c=i?-1:1,l=0;l<2;l++){for(;(i?a>=n:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>t.CODEWORD_SKEW_SIZE)return o;a+=c}c=-c,i=!i}return a},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw Ae.getFormatInstance();var i=1<<n+1,o=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var s=_U.decode(e,""+n);return s.setErrorsCorrected(o),s.setErasures(r.length),s},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw Qt.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw Ae.getFormatInstance();var r=e[0];if(r>e.length)throw Ae.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw Ae.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new Mv,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new oU,t})(),SU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wd=(function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw pe.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof Ae||r instanceof Qt?pe.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,o,s=new Array,a=JF.detectMultiple(e,n,r);try{for(var c=SU(a.getPoints()),l=c.next();!l.done;l=c.next()){var u=l.value,f=CU.decode(a.getBits(),u[4],u[5],u[6],u[7],t.getMinCodewordWidth(u),t.getMaxCodewordWidth(u)),d=new Kn(f.getText(),f.getRawBytes(),void 0,u,Me.PDF_417);d.putMetadata(Rn.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&d.putMetadata(Rn.PDF417_EXTRA_METADATA,h),s.push(d)}}catch(p){i={error:p}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(p){return p})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?qe.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),IU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Vb=(function(t){IU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(mr),Kb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MS=(function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(It.TRY_HARDER)!==void 0,r=e==null?null:e.get(It.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===Me.UPC_A||s===Me.UPC_E||s===Me.EAN_13||s===Me.EAN_8||s===Me.CODABAR||s===Me.CODE_39||s===Me.CODE_93||s===Me.CODE_128||s===Me.ITF||s===Me.RSS_14||s===Me.RSS_EXPANDED});o&&!n&&i.push(new Ka(e)),r.includes(Me.QR_CODE)&&i.push(new zd),r.includes(Me.DATA_MATRIX)&&i.push(new Gd),r.includes(Me.AZTEC)&&i.push(new Kd),r.includes(Me.PDF_417)&&i.push(new Wd),o&&n&&i.push(new Ka(e))}i.length===0&&(n||i.push(new Ka(e)),i.push(new zd),i.push(new Gd),i.push(new Kd),i.push(new Wd),n&&i.push(new Ka(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=Kb(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new Vb("No readers where selected, nothing can be read.");try{for(var i=Kb(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof Vb)continue}}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new pe("No MultiFormat Readers were able to detect the code.")},t})(),TU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){TU(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,o=new MS;return o.setHints(n),i=t.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e})(Pc);var OU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){OU(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Wd,n)||this}return e})(Pc);var RU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){RU(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new zd,n)||this}return e})(Pc);var G1;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(G1||(G1={}));const gf=G1;var DS=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ds(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,o=n.length;o<=e;o++){var s=r.multiply(new ds(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));n.push(s),r=s}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new De("No error correction bytes");var r=e.length-n;if(r<=0)throw new De("No data bytes provided");var i=this.buildGenerator(n),o=new Int32Array(r);St.arraycopy(e,0,o,0,r);var s=new ds(this.field,o);s=s.multiplyByMonomial(n,1);for(var a=s.divide(i)[1],c=a.getCoefficients(),l=n-c.length,u=0;u<l;u++)e[r+u]=0;St.arraycopy(c,0,e,r+l,c.length)},t})(),al=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],c=0;c<i-1;c++){var l=a[c];l===a[c+1]&&l===r[s+1][c]&&l===r[s+1][c+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var c=r[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(t.isWhiteHorizontal(c,a-4,a)||t.isWhiteHorizontal(c,a+7,a+11))&&n++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(t.isWhiteVertical(r,a,s-4,s)||t.isWhiteVertical(r,a,s+7,s+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],c=0;c<i;c++)a[c]===1&&n++;var l=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(n*2-l)*10/l);return u*t.N4},t.getDataMaskBit=function(e,n,r){var i,o;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:o=r*n,i=(o&1)+o%3;break;case 6:o=r*n,i=(o&1)+o%3&1;break;case 7:o=r*n,i=o%3+(r+n&1)&1;break;default:throw new De("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),o=n?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var c=0,l=-1,u=0;u<o;u++){var f=n?s[a][u]:s[u][a];f===l?c++:(c>=5&&(r+=t.N1+(c-5)),c=1,l=f)}c>=5&&(r+=t.N1+(c-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),PU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NU=(function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=PU(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;an.fill(s,e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=n.bytes[r],a=0,c=this.width;a<c;++a)if(o[a]!==s[a])return!1;return!0},t.prototype.toString=function(){for(var e=new ze,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),z1=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new ze;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),kU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ot=(function(t){kU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(mr),jb=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,o){t.clearMatrix(o),t.embedBasicPatterns(r,o),t.embedTypeInfo(n,i,o),t.maybeEmbedVersionInfo(r,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new bn;t.makeTypeInfoBits(e,n,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),c=t.TYPE_INFO_COORDINATES[o],l=c[0],u=c[1];if(r.setBoolean(l,u,a),o<8){var f=r.getWidth()-o-1,d=8;r.setBoolean(f,d,a)}else{var f=8,d=r.getHeight()-7+(o-8);r.setBoolean(f,d,a)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new bn;t.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,n.setBoolean(o,n.getHeight()-11+s,a),n.setBoolean(n.getHeight()-11+s,o,a)}}},t.embedDataBits=function(e,n,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var c=0;c<2;++c){var l=s-c;if(t.isEmpty(r.get(l,a))){var u=void 0;i<e.getSize()?(u=e.get(i),++i):u=!1,n!==255&&al.getDataMaskBit(n,l,a)&&(u=!u),r.setBoolean(l,a,u)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new Ot("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-qe.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new De("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!z1.isValidMaskPattern(n))throw new Ot("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(o,10);var s=new bn;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Ot("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Ot("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ot;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new Ot;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new Ot;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var c=0;c!==s;c++){var l=i[c];l>=0&&t.isEmpty(n.get(l,a))&&t.embedPositionAdjustmentPattern(l-2,a-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),MU=(function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),Gb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return al.applyMaskPenaltyRule1(e)+al.applyMaskPenaltyRule2(e)+al.applyMaskPenaltyRule3(e)+al.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(gf.CHARACTER_SET)!==void 0;o&&(i=r.get(gf.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new bn;if(s===Rt.BYTE&&(o||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=sn.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,a)}this.appendModeInfo(s,a);var l=new bn;this.appendBytes(e,s,l,i);var u;if(r!==null&&r.get(gf.QR_VERSION)!==void 0){var f=Number.parseInt(r.get(gf.QR_VERSION).toString(),10);u=Js.getVersionForNumber(f);var d=this.calculateBitsNeeded(s,a,l,u);if(!this.willFit(d,u,n))throw new Ot("Data too big for requested version")}else u=this.recommendVersion(n,s,a,l);var h=new bn;h.appendBitArray(a);var p=s===Rt.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(p,u,s,h),h.appendBitArray(l);var g=u.getECBlocksForLevel(n),y=u.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(y,h);var v=this.interleaveWithECBytes(h,u.getTotalCodewords(),y,g.getNumBlocks()),m=new z1;m.setECLevel(n),m.setMode(s),m.setVersion(u);var w=u.getDimensionForVersion(),E=new NU(w,w),S=this.chooseMaskPattern(v,n,u,E);return m.setMaskPattern(S),jb.buildMatrix(v,n,u,S,E),m.setMatrix(E),m},t.recommendVersion=function(e,n,r,i){var o=this.calculateBitsNeeded(n,r,i,Js.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(n,r,i,s);return this.chooseVersion(a,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),sn.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Rt.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(t.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return Rt.BYTE}return i?Rt.ALPHANUMERIC:r?Rt.NUMERIC:Rt.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=Yr.encode(e,sn.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=n[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<z1.NUM_MASK_PATTERNS;a++){jb.buildMatrix(e,n,r,a,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=a)}return s},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=Js.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new Ot("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),o=n.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,c=(e+7)/8;return a>=c},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new Ot("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var o=n.getSize()&7;if(o>0)for(var i=o;i<8;i++)n.appendBit(!1);for(var s=e-n.getSizeInBytes(),i=0;i<s;++i)n.appendBits((i&1)===0?236:17,8);if(n.getSize()!==r)throw new Ot("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,o,s){if(i>=r)throw new Ot("Block ID too large");var a=e%r,c=r-a,l=Math.floor(e/r),u=l+1,f=Math.floor(n/r),d=f+1,h=l-f,p=u-d;if(h!==p)throw new Ot("EC bytes mismatch");if(r!==c+a)throw new Ot("RS blocks mismatch");if(e!==(f+h)*c+(d+p)*a)throw new Ot("Total bytes mismatch");i<c?(o[0]=f,s[0]=h):(o[0]=d,s[0]=p)},t.interleaveWithECBytes=function(e,n,r,i){var o,s,a,c;if(e.getSizeInBytes()!==r)throw new Ot("Number of bits and data bytes does not match");for(var l=0,u=0,f=0,d=new Array,h=0;h<i;++h){var p=new Int32Array(1),g=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,h,p,g);var y=p[0],v=new Uint8Array(y);e.toBytes(8*l,v,0,y);var m=t.generateECBytes(v,g[0]);d.push(new MU(v,m)),u=Math.max(u,y),f=Math.max(f,m.length),l+=p[0]}if(r!==l)throw new Ot("Data bytes does not match offset");for(var w=new bn,h=0;h<u;++h)try{for(var E=(o=void 0,Gb(d)),S=E.next();!S.done;S=E.next()){var R=S.value,v=R.getDataBytes();h<v.length&&w.appendBits(v[h],8)}}catch(B){o={error:B}}finally{try{S&&!S.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}for(var h=0;h<f;++h)try{for(var F=(a=void 0,Gb(d)),$=F.next();!$.done;$=F.next()){var R=$.value,m=R.getErrorCorrectionBytes();h<m.length&&w.appendBits(m[h],8)}}catch(B){a={error:B}}finally{try{$&&!$.done&&(c=F.return)&&c.call(F)}finally{if(a)throw a.error}}if(n!==w.getSizeInBytes())throw new Ot("Interleaving error: "+n+" and "+w.getSizeInBytes()+" differ.");return w},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),o=0;o<r;o++)i[o]=e[o]&255;new DS(pr.QR_CODE_FIELD_256).encode(i,n);for(var s=new Uint8Array(n),o=0;o<n;o++)s[o]=i[r+o];return s},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var o=r.getCharacterCountBits(n);if(e>=1<<o)throw new Ot(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},t.appendBytes=function(e,n,r,i){switch(n){case Rt.NUMERIC:t.appendNumericBytes(e,r);break;case Rt.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case Rt.BYTE:t.append8BitBytes(e,r,i);break;case Rt.KANJI:t.appendKanjiBytes(e,r);break;default:throw new Ot("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getDigit(e.charAt(i));if(i+2<r){var s=t.getDigit(e.charAt(i+1)),a=t.getDigit(e.charAt(i+2));n.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=t.getDigit(e.charAt(i+1));n.appendBits(o*10+s,7),i+=2}else n.appendBits(o,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Ot;if(i+1<r){var s=t.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Ot;n.appendBits(o*45+s,11),i+=2}else n.appendBits(o,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=Yr.encode(e,r)}catch(c){throw new Ot(c)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];n.appendBits(a,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=Yr.encode(e,sn.SJIS)}catch(f){throw new Ot(f)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,c=s<<8&4294967295|a,l=-1;if(c>=33088&&c<=40956?l=c-33088:c>=57408&&c<=60351&&(l=c-49472),l===-1)throw new Ot("Invalid byte sequence");var u=(l>>8)*192+(l&255);n.appendBits(u,13)}},t.appendECI=function(e,n){n.appendBits(Rt.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=sn.UTF8.getName(),t})();var DU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){DU(e,t);function e(n,r,i,o,s,a,c,l){var u=t.call(this,a,c)||this;if(u.yuvData=n,u.dataWidth=r,u.dataHeight=i,u.left=o,u.top=s,o+a>r||s+c>i)throw new De("Crop rectangle does not fit within image data.");return l&&u.reverseHorizontal(a,c),u}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new De("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return St.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return St.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*n;St.arraycopy(this.yuvData,s,o,c,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var c=a*n,l=0;l<n;l++){var u=o[s+l*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+l]=4278190080|u*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+n/2,c=s,l=s+n-1;c<a;c++,l--){var u=i[c];i[c]=i[l],i[l]=u}},e.prototype.invert=function(){return new Dh(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(xu);var BU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){BU(e,t);function e(n,r,i,o,s,a,c){var l=t.call(this,r,i)||this;if(l.dataWidth=o,l.dataHeight=s,l.left=a,l.top=c,n.BYTES_PER_ELEMENT===4){for(var u=r*i,f=new Uint8ClampedArray(u),d=0;d<u;d++){var h=n[d],p=h>>16&255,g=h>>7&510,y=h&255;f[d]=(p+g+y)/4&255}l.luminances=f}else l.luminances=n;if(o===void 0&&(l.dataWidth=r),s===void 0&&(l.dataHeight=i),a===void 0&&(l.left=0),c===void 0&&(l.top=0),l.left+r>l.dataWidth||l.top+i>l.dataHeight)throw new De("Crop rectangle does not fit within image data.");return l}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new De("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return St.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return St.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*n;St.arraycopy(this.luminances,s,o,c,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new Dh(this)},e})(xu);var LU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),FU=(function(t){LU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e})(sn),UU=(function(){function t(){}return t.ISO_8859_1=sn.ISO8859_1,t})(),W1,HU=301,$U=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=HU);return{LOG:t,ALOG:e}};W1=$U([],[]),W1.LOG;W1.ALOG;var zb;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(zb||(zb={}));var Wb=129,BS=230,VU=231,KU=235,jU=236,GU=237,zU=238,WU=239,qU=240,pp=254,YU=254,qb="[)>05",Yb="[)>06",Xb="",yt=0,_n=1,qn=2,rn=3,pn=4,Mn=5,XU=(function(){function t(){}return t.prototype.getEncodingMode=function(){return yt},t.prototype.encode=function(e){var n=fi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=fi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Mn:e.writeCodeword(VU),e.signalEncoderChange(Mn);return;case _n:e.writeCodeword(BS),e.signalEncoderChange(_n);return;case rn:e.writeCodeword(zU),e.signalEncoderChange(rn);break;case qn:e.writeCodeword(WU),e.signalEncoderChange(qn);break;case pn:e.writeCodeword(qU),e.signalEncoderChange(pn);break;default:throw new Error("Illegal mode: "+i)}else fi.isExtendedASCII(r)?(e.writeCodeword(KU),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(fi.isDigit(e)&&fi.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t})(),ZU=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Mn},t.prototype.encode=function(e){var n=new ze;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=fi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(yt);break}}var o=n.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var c=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||c)if(o<=249)n.setCharAt(0,et.getCharAt(o));else if(o<=1555)n.setCharAt(0,et.getCharAt(Math.floor(o/250)+249)),n.insert(1,et.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var l=0,r=n.length();l<r;l++)e.writeCodeword(this.randomize255State(n.charAt(l).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t})(),Dv=(function(){function t(){}return t.prototype.getEncodingMode=function(){return _n},t.prototype.encodeMaximal=function(e){for(var n=new ze,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,n),n.length()%3===0&&(i=e.pos,o=n.length())}if(o!==n.length()){var a=Math.floor(n.length()/3*2),c=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(c);var l=e.getSymbolInfo().getDataCapacity()-c,u=Math.floor(n.length()%3);(u===2&&l!==2||u===1&&(r>3||l!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(BS),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new ze;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),o=Math.floor(n.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new ze;for(n.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,n,c,i));n.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,n,c,i);break}var l=n.length();if(l%3===0){var u=fi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(yt);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var o=n.length(),s=n.toString().substring(0,o-i);n.setLengthToZero(),n.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(pp)}else if(s===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(pp),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(s>0||e.hasMoreCharacters())&&e.writeCodeword(pp)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(yt)},t.prototype.encodeChar=function(e,n){if(e===32)return n.append(3),1;if(e>=48&&e<=57)return n.append(e-48+4),1;if(e>=65&&e<=90)return n.append(e-65+14),1;if(e<32)return n.append(0),n.append(e),2;if(e<=47)return n.append(1),n.append(e-33),2;if(e<=64)return n.append(1),n.append(e-58+15),2;if(e<=95)return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,o=new ze;return o.append(r),o.append(i),o.toString()},t})(),QU=(function(){function t(){}return t.prototype.getEncodingMode=function(){return pn},t.prototype.encode=function(e){for(var n=new ze;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var o=n.toString().substring(4);n.setLengthToZero(),n.append(o);var s=fi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(yt);break}}}n.append(et.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(n.toString()),c=!e.hasMoreCharacters(),l=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(l=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}l?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(yt)}},t.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(et.getCharAt(e-64)):fi.illegalCharacter(et.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,o=n>=3?e.charAt(2).charCodeAt(0):0,s=n>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,c=a>>16&255,l=a>>8&255,u=a&255,f=new ze;return f.append(c),n>=2&&f.append(l),n>=3&&f.append(u),f.toString()},t})(),JU=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),eH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},at=(function(){function t(e,n,r,i,o,s,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=c}return t.lookup=function(e,n,r,i,o){var s,a;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=eH(nH),l=c.next();!l.done;l=c.next()){var u=l.value;if(!(n===1&&u.rectangular)&&!(n===2&&!u.rectangular)&&!(r!=null&&(u.getSymbolWidth()<r.getWidth()||u.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(u.getSymbolWidth()>i.getWidth()||u.getSymbolHeight()>i.getHeight()))&&e<=u.dataCapacity)return u}}catch(f){s={error:f}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t})(),tH=(function(t){JU(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e})(at),nH=[new at(!1,3,5,8,8,1),new at(!1,5,7,10,10,1),new at(!0,5,7,16,6,1),new at(!1,8,10,12,12,1),new at(!0,10,11,14,6,2),new at(!1,12,12,14,14,1),new at(!0,16,14,24,10,1),new at(!1,18,14,16,16,1),new at(!1,22,18,18,18,1),new at(!0,22,18,16,10,2),new at(!1,30,20,20,20,1),new at(!0,32,24,16,14,2),new at(!1,36,24,22,22,1),new at(!1,44,28,24,24,1),new at(!0,49,28,22,14,2),new at(!1,62,36,14,14,4),new at(!1,86,42,16,16,4),new at(!1,114,48,18,18,4),new at(!1,144,56,20,20,4),new at(!1,174,68,22,22,4),new at(!1,204,84,24,24,4,102,42),new at(!1,280,112,14,14,16,140,56),new at(!1,368,144,16,16,16,92,36),new at(!1,456,192,18,18,16,114,48),new at(!1,576,224,20,20,16,144,56),new at(!1,696,272,22,22,16,174,68),new at(!1,816,336,24,24,16,136,56),new at(!1,1050,408,18,18,36,175,68),new at(!1,1304,496,20,20,36,163,62),new tH],rH=(function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(a){return a.charCodeAt(0)}),r=new ze,i=0,o=n.length;i<o;i++){var s=String.fromCharCode(n[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new ze,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=at.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t})(),iH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),oH=(function(t){iH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return rn},e.prototype.encode=function(n){for(var r=new ze;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(n,r);var s=fi.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){n.signalEncoderChange(yt);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:n>=48&&n<=57?r.append(n-48+4):n>=65&&n<=90?r.append(n-65+14):fi.illegalCharacter(et.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),o=r.length();n.pos-=o,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(YU),n.getNewEncoding()<0&&n.signalEncoderChange(yt)},e})(Dv),sH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),aH=(function(t){sH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return qn},e.prototype.encodeChar=function(n,r){if(n===32)return r.append(3),1;if(n>=48&&n<=57)return r.append(n-48+4),1;if(n>=97&&n<=122)return r.append(n-97+14),1;if(n<32)return r.append(0),r.append(n),2;if(n<=47)return r.append(1),r.append(n-33),2;if(n<=64)return r.append(1),r.append(n-58+15),2;if(n>=91&&n<=95)return r.append(1),r.append(n-91+22),2;if(n===96)return r.append(2),r.append(0),2;if(n<=90)return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e})(Dv),fi=(function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=Wb+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,o){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Dv,a=[new XU,s,new aH,new oH,new QU,new ZU],c=new rH(e);c.setSymbolShape(n),c.setSizeConstraints(r,i),e.startsWith(qb)&&e.endsWith(Xb)?(c.writeCodeword(jU),c.setSkipAtEnd(2),c.pos+=qb.length):e.startsWith(Yb)&&e.endsWith(Xb)&&(c.writeCodeword(GU),c.setSkipAtEnd(2),c.pos+=Yb.length);var l=yt;for(o&&(s.encodeMaximal(c),l=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)a[l].encode(c),c.getNewEncoding()>=0&&(l=c.getNewEncoding(),c.resetEncoderSignal());var u=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();u<f&&l!==yt&&l!==Mn&&l!==pn&&c.writeCodeword("");var d=c.getCodewords();for(d.length()<f&&d.append(Wb);d.length()<f;)d.append(this.randomize253State(d.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===rn&&i===rn){for(var o=Math.min(n+3,e.length),s=n;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return yt}else if(r===pn&&i===pn){for(var o=Math.min(n+4,e.length),s=n;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return yt}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===yt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(n+o===e.length){an.fill(s,0),an.fill(a,0);var c=this.findMinimums(i,a,qe.MAX_VALUE,s),l=this.getMinimumCount(s);if(a[yt]===c)return yt;if(l===1){if(s[Mn]>0)return Mn;if(s[pn]>0)return pn;if(s[qn]>0)return qn;if(s[rn]>0)return rn}return _n}var u=e.charCodeAt(n+o);if(o++,this.isDigit(u)?i[yt]+=.5:this.isExtendedASCII(u)?(i[yt]=Math.ceil(i[yt]),i[yt]+=2):(i[yt]=Math.ceil(i[yt]),i[yt]++),this.isNativeC40(u)?i[_n]+=2/3:this.isExtendedASCII(u)?i[_n]+=8/3:i[_n]+=4/3,this.isNativeText(u)?i[qn]+=2/3:this.isExtendedASCII(u)?i[qn]+=8/3:i[qn]+=4/3,this.isNativeX12(u)?i[rn]+=2/3:this.isExtendedASCII(u)?i[rn]+=13/3:i[rn]+=10/3,this.isNativeEDIFACT(u)?i[pn]+=3/4:this.isExtendedASCII(u)?i[pn]+=17/4:i[pn]+=13/4,this.isSpecialB256(u)?i[Mn]+=4:i[Mn]++,o>=4){if(an.fill(s,0),an.fill(a,0),this.findMinimums(i,a,qe.MAX_VALUE,s),a[yt]<this.min(a[Mn],a[_n],a[qn],a[rn],a[pn]))return yt;if(a[Mn]<a[yt]||a[Mn]+1<this.min(a[_n],a[qn],a[rn],a[pn]))return Mn;if(a[pn]+1<this.min(a[Mn],a[_n],a[qn],a[rn],a[yt]))return pn;if(a[qn]+1<this.min(a[Mn],a[_n],a[pn],a[rn],a[yt]))return qn;if(a[rn]+1<this.min(a[Mn],a[_n],a[pn],a[qn],a[yt]))return rn;if(a[_n]+1<this.min(a[yt],a[Mn],a[pn],a[qn])){if(a[_n]<a[rn])return _n;if(a[_n]===a[rn]){for(var f=n+o+1;f<e.length;){var d=e.charCodeAt(f);if(this.isX12TermSep(d))return rn;if(!this.isNativeX12(d))break;f++}return _n}}}}},t.min=function(e,n,r,i,o){var s=Math.min(e,Math.min(n,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},t.findMinimums=function(e,n,r,i){for(var o=0;o<6;o++){var s=n[o]=Math.ceil(e[o]);r>s&&(r=s,an.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=qe.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t})(),gp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zb=(function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Yr.encode(e,this.charset)!=null}catch{return!1}},t})(),cH=(function(){function t(e,n,r){var i,o,s,a,c,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(U){return new Zb(FU.forName(U))}),this.encoders=[];var u=[];u.push(new Zb(UU.ISO_8859_1));for(var f=n!=null&&n.name.startsWith("UTF"),d=0;d<e.length;d++){var h=!1;try{for(var p=(i=void 0,gp(u)),g=p.next();!g.done;g=p.next()){var y=g.value,v=e.charAt(d),m=v.charCodeAt(0);if(m===r||y.canEncode(v)){h=!0;break}}}catch(U){i={error:U}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}if(!h)try{for(var w=(s=void 0,gp(this.ENCODERS)),E=w.next();!E.done;E=w.next()){var y=E.value;if(y.canEncode(e.charAt(d))){u.push(y),h=!0;break}}}catch(U){s={error:U}}finally{try{E&&!E.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}h||(f=!0)}if(u.length===1&&!f)this.encoders=[u[0]];else{this.encoders=[];var S=0;try{for(var R=gp(u),F=R.next();!F.done;F=R.next()){var y=F.value;this.encoders[S++]=y}}catch(U){c={error:U}}finally{try{F&&!F.done&&(l=R.return)&&l.call(R)}finally{if(c)throw c.error}}}var $=-1;if(n!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&n.name===this.encoders[d].name){$=d;break}}this.priorityEncoderIndex=$}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Yr.encode(et.getCharAt(e),this.encoders[n].name)},t})(),lH=3,uH=(function(){function t(e,n,r){this.fnc1=r;var i=new cH(e,n,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new ze,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,o,s){var a=e.charAt(i).charCodeAt(0),c=0,l=n.length();n.getPriorityEncoderIndex()>=0&&(a===s||n.canEncode(a,n.getPriorityEncoderIndex()))&&(c=n.getPriorityEncoderIndex(),l=c+1);for(var u=c;u<l;u++)(a===s||n.canEncode(a,u))&&this.addEdge(r,i+1,new Qb(a,n,u,o,s))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,o=new Qb[i+1][n.length()];this.addEdges(e,n,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<n.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,n,o,s,o[s][a],r);for(var a=0;a<n.length();a++)o[s-1][a]=null}for(var c=-1,l=qe.MAX_VALUE,a=0;a<n.length();a++)if(o[i][a]!=null){var u=o[i][a];u.cachedTotalSize<l&&(l=u.cachedTotalSize,c=a)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],d=o[i][c];d!=null;){if(d.isFNC1())f.unshift(1e3);else for(var h=n.encode(d.c,d.encoderIndex),s=h.length-1;s>=0;s--)f.unshift(h[s]&255);var p=d.previous===null?0:d.previous.encoderIndex;p!==d.encoderIndex&&f.unshift(256+n.getECIValue(d.encoderIndex)),d=d.previous}for(var g=[],s=0;s<g.length;s++)g[s]=f[s];return g},t})(),Qb=(function(){function t(e,n,r,i,o){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:n.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=lH),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t})(),fH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();var Jb;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(Jb||(Jb={}));(function(t){fH(e,t);function e(n,r,i,o,s){var a=t.call(this,n,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(uH);var dH=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),eE=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t})(),hH=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),pH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Bv=(function(t){pH(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+qe.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e})(hH),gH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),vH=(function(t){gH(e,t);function e(n,r,i){var o=t.call(this,n,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Bv);function yH(t,e,n){return new vH(t,e,n)}function Yc(t,e,n){return new Bv(t,e,n)}var mH=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],hs=0,qd=1,Wr=2,LS=3,Di=4,wH=new Bv(null,0,0),vp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],bH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function EH(t){var e,n;try{for(var r=bH(t),i=r.next();!i.done;i=r.next()){var o=i.value;an.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[hs][Di]=0,t[qd][Di]=0,t[qd][hs]=28,t[LS][Di]=0,t[Wr][Di]=0,t[Wr][hs]=15,t}var FS=EH(an.createInt32Array(6,6)),xH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AH=(function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=vp[this.mode][e];i=Yc(i,o&65535,o>>16),r+=o>>16}var s=e===Wr?4:5;return i=Yc(i,n,s),new t(i,e,0,r+s)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===Wr?4:5;return r=Yc(r,FS[this.mode][e],i),r=Yc(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===Di||this.mode===Wr){var o=vp[r][hs];n=Yc(n,o&65535,o>>16),i+=o>>16,r=hs}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new t(n,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=yH(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(vp[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new bn;try{for(var a=xH(i),c=a.next();!c.done;c=a.next()){var l=c.value;l.appendTo(s,e)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s},t.prototype.toString=function(){return et.format("%s bits=%d bytes=%d",mH[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(wH,hs,0,0),t})();function _H(t){var e=et.getCharCode(" "),n=et.getCharCode("."),r=et.getCharCode(",");t[hs][e]=1;for(var i=et.getCharCode("Z"),o=et.getCharCode("A"),s=o;s<=i;s++)t[hs][s]=s-o+2;t[qd][e]=1;for(var a=et.getCharCode("z"),c=et.getCharCode("a"),s=c;s<=a;s++)t[qd][s]=s-c+2;t[Wr][e]=1;for(var l=et.getCharCode("9"),u=et.getCharCode("0"),s=u;s<=l;s++)t[Wr][s]=s-u+2;t[Wr][r]=12,t[Wr][n]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<f.length;d++)t[LS][et.getCharCode(f[d])]=d;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<h.length;d++)et.getCharCode(h[d])>0&&(t[Di][et.getCharCode(h[d])]=d);return t}var yp=_H(an.createInt32Array(5,256)),vf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CH=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=et.getCharCode(" "),n=et.getCharCode(`
`),r=eE.singletonList(AH.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case et.getCharCode("\r"):o=s===n?2:0;break;case et.getCharCode("."):o=s===e?3:0;break;case et.getCharCode(","):o=s===e?4:0;break;case et.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=t.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=eE.min(r,function(c,l){return c.getBitCount()-l.getBitCount()});return a.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,o=[];try{for(var s=vf(e),a=s.next();!a.done;a=s.next()){var c=a.value;this.updateStateForChar(c,n,o)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return t.simplifyStates(o)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,o=yp[e.getMode()][i]>0,s=null,a=0;a<=Di;a++){var c=yp[a][i];if(c>0){if(s==null&&(s=e.endBinaryShift(n)),!o||a===e.getMode()||a===Wr){var l=s.latchAndAppend(a,c);r.push(l)}if(!o&&FS[e.getMode()][a]>=0){var u=s.shiftAndAppend(a,c);r.push(u)}}}if(e.getBinaryShiftByteCount()>0||yp[e.getMode()][i]===0){var f=e.addBinaryShiftChar(n);r.push(f)}},t.updateStateListForPair=function(e,n,r){var i,o,s=[];try{for(var a=vf(e),c=a.next();!c.done;c=a.next()){var l=c.value;this.updateStateForPair(l,n,r,s)}}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,n,r,i){var o=e.endBinaryShift(n);if(i.push(o.latchAndAppend(Di,r)),e.getMode()!==Di&&i.push(o.shiftAndAppend(Di,r)),r===3||r===4){var s=o.latchAndAppend(Wr,16-r).latchAndAppend(Wr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(a)}},t.simplifyStates=function(e){var n,r,i,o,s=[];try{for(var a=vf(e),c=a.next();!c.done;c=a.next()){var l=c.value,u=!0,f=function(y){if(y.isBetterThanOrEqualTo(l))return u=!1,"break";l.isBetterThanOrEqualTo(y)&&(s=s.filter(function(v){return v!==y}))};try{for(var d=(i=void 0,vf(s)),h=d.next();!h.done;h=d.next()){var p=h.value,g=f(p);if(g==="break")break}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}u&&s.push(l)}}catch(y){n={error:y}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s},t})(),SH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new CH(e).encode(),o=qe.truncDivision(i.getSize()*n,100)+11,s=i.getSize()+o,a,c,l,u,f;if(r!==t.DEFAULT_AZTEC_LAYERS){if(a=r<0,c=Math.abs(r),c>(a?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new De(et.format("Illegal value %s for layers",r));l=t.totalBitsInLayer(c,a),u=t.WORD_SIZE[c];var d=l-l%u;if(f=t.stuffBits(i,u),f.getSize()+o>d)throw new De("Data to large for user specified layer");if(a&&f.getSize()>u*64)throw new De("Data to large for user specified layer")}else{u=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new De("Data too large for an Aztec code");if(a=h<=3,c=a?h+1:h,l=t.totalBitsInLayer(c,a),!(s>l)){(f==null||u!==t.WORD_SIZE[c])&&(u=t.WORD_SIZE[c],f=t.stuffBits(i,u));var d=l-l%u;if(!(a&&f.getSize()>u*64)&&f.getSize()+o<=d)break}}}var p=t.generateCheckWords(f,l,u),g=f.getSize()/u,y=t.generateModeMessage(a,c,g),v=(a?11:14)+c*4,m=new Int32Array(v),w;if(a){w=v;for(var h=0;h<m.length;h++)m[h]=h}else{w=v+1+2*qe.truncDivision(qe.truncDivision(v,2)-1,15);for(var E=qe.truncDivision(v,2),S=qe.truncDivision(w,2),h=0;h<E;h++){var R=h+qe.truncDivision(h,15);m[E-h-1]=S-R-1,m[E+h]=S+R+1}}for(var F=new Gi(w),h=0,$=0;h<c;h++){for(var U=(c-h)*4+(a?9:12),B=0;B<U;B++)for(var W=B*2,V=0;V<2;V++)p.get($+W+V)&&F.set(m[h*2+V],m[h*2+B]),p.get($+U*2+W+V)&&F.set(m[h*2+B],m[v-1-h*2-V]),p.get($+U*4+W+V)&&F.set(m[v-1-h*2-V],m[v-1-h*2-B]),p.get($+U*6+W+V)&&F.set(m[v-1-h*2-B],m[h*2+V]);$+=U*8}if(t.drawModeMessage(F,a,w,y),a)t.drawBullsEye(F,qe.truncDivision(w,2),5);else{t.drawBullsEye(F,qe.truncDivision(w,2),7);for(var h=0,B=0;h<qe.truncDivision(v,2)-1;h+=15,B+=16)for(var V=qe.truncDivision(w,2)&1;V<w;V+=2)F.set(qe.truncDivision(w,2)-B,V),F.set(qe.truncDivision(w,2)+B,V),F.set(V,qe.truncDivision(w,2)-B),F.set(V,qe.truncDivision(w,2)+B)}var L=new dH;return L.setCompact(a),L.setSize(w),L.setLayers(c),L.setCodeWords(g),L.setMatrix(F),L},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var o=n-i;o<=n+i;o++)e.set(o,n-i),e.set(o,n+i),e.set(n-i,o),e.set(n+i,o);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new bn;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var o=qe.truncDivision(r,2);if(n)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+qe.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},t.generateCheckWords=function(e,n,r){var i,o,s=e.getSize()/r,a=new DS(t.getGF(r)),c=qe.truncDivision(n,r),l=t.bitsToWords(e,r,c);a.encode(l,c-s);var u=n%r,f=new bn;f.appendBits(0,u);try{for(var d=SH(Array.from(l)),h=d.next();!h.done;h=d.next()){var p=h.value;f.appendBits(p,r)}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return f},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/n;o<s;o++){for(var a=0,c=0;c<n;c++)a|=e.get(o*n+c)?1<<n-c-1:0;i[o]=a}return i},t.getGF=function(e){switch(e){case 4:return pr.AZTEC_PARAM;case 6:return pr.AZTEC_DATA_6;case 8:return pr.AZTEC_DATA_8;case 10:return pr.AZTEC_DATA_10;case 12:return pr.AZTEC_DATA_12;default:throw new De("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new bn,i=e.getSize(),o=(1<<n)-2,s=0;s<i;s+=n){for(var a=0,c=0;c<n;c++)(s+c>=i||e.get(s+c))&&(a|=1<<n-1-c);(a&o)===o?(r.appendBits(a&o,n),s--):(a&o)===0?(r.appendBits(a|1,n),s--):r.appendBits(a,n)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var IH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),TH=(function(t){IH(e,t);function e(n){var r=t.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(n),r}return e.makeBufferFromCanvasImageData=function(n){var r;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,r,i){for(var o=new Uint8ClampedArray(r*i),s=0,a=0,c=n.length;s<c;s+=4,a++){var l=void 0,u=n[s+3];if(u===0)l=255;else{var f=n[s],d=n[s+1],h=n[s+2];l=306*f+601*d+117*h+512>>10}o[a]=l}return o},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new De("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Dh(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=n*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);r.width=a,r.height=c;var l=r.getContext("2d");if(!l)throw new Error("Could not create a Canvas Context element.");return l.translate(a/2,c/2),l.rotate(i),l.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(xu);function US(){return typeof navigator<"u"}function OH(){return US()&&!!navigator.mediaDevices}function RH(){return!!(OH()&&navigator.mediaDevices.enumerateDevices)}var Ga=function(){return Ga=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ga.apply(this,arguments)},Bt=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},Lt=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},mp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PH={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Nc=(function(){function t(e,n,r){n===void 0&&(n=new Map),r===void 0&&(r={}),this.reader=e,this.hints=n,this.options=Ga(Ga({},PH),r)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(It.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,n){try{e.srcObject=n}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,n){return Bt(this,void 0,void 0,function(){return Lt(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:n?"flash":"off",torch:!!n}]})];case 1:return r.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var n,r,i=e.getVideoTracks();try{for(var o=mp(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(t.mediaStreamIsTorchCompatibleTrack(a))return!0}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var n=e.getCapabilities();return"torch"in n}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new zt("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new zt("element with id '".concat(e,"' must be an ").concat(n," element"));return r},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var n=t.createVideoElement(e);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var n=new TH(e),r=new AS(n);return new xS(r)},t.drawImageOnCanvas=function(e,n){e.drawImage(n,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new zt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var n=document.createElement("canvas"),r=t.getMediaElementDimensions(e),i=r.width,o=r.height;return n.style.width=i+"px",n.style.height=o+"px",n.width=i,n.height=o,n},t.tryPlayVideo=function(e){return Bt(this,void 0,void 0,function(){var n;return Lt(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return n=r.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var n=t.createCaptureCanvas(e),r=n.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(r,e),n},t.createBinaryBitmapFromMediaElem=function(e){var n=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(n)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Bt(this,void 0,void 0,function(){var e,n,r,i,o,s,a,c,l,u,f,d;return Lt(this,function(h){switch(h.label){case 0:if(!US())throw new Error("Can't enumerate devices, navigator is not present.");if(!RH())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),n=[];try{for(r=mp(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device ".concat(n.length+1),l=o.groupId,u={deviceId:a,label:c,kind:s,groupId:l},n.push(u))}catch(p){f={error:p}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(f)throw f.error}}return[2,n]}})})},t.findDeviceById=function(e){return Bt(this,void 0,void 0,function(){var n;return Lt(this,function(r){switch(r.label){case 0:return[4,t.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(n){return n.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,n){return Bt(this,void 0,void 0,function(){var r;return Lt(this,function(i){switch(i.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(o,s){var a=setTimeout(function(){t.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",c))},n),c=function(){t.tryPlayVideo(e).then(function(l){clearTimeout(a),e.removeEventListener("canplay",c),o(l)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,n,r){return r===void 0&&(r=5e3),Bt(this,void 0,void 0,function(){var i;return Lt(this,function(o){switch(o.label){case 0:return i=t.prepareVideoElement(n),t.addVideoSource(i,e),[4,t.playVideoOnLoadAsync(i,r)];case 1:return o.sent(),[2,i]}})})},t._waitImageLoad=function(e){return new Promise(function(n,r){var i=1e4,o=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(o),e.removeEventListener("load",s),n()};e.addEventListener("load",s)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new zt("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(n){return n.stop()}),e=void 0},t.prototype.decode=function(e){var n=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(n)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var n=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(n)},t.prototype.decodeFromImageElement=function(e){return Bt(this,void 0,void 0,function(){var n;return Lt(this,function(r){switch(r.label){case 0:if(!e)throw new zt("An image element must be provided.");return n=t.prepareImageElement(e),[4,this._decodeOnLoadImage(n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Bt(this,void 0,void 0,function(){var n;return Lt(this,function(r){switch(r.label){case 0:if(!e)throw new zt("An URL must be provided.");n=t.prepareImageElement(),n.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,r.sent()];case 3:return t.destroyImageElement(n),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Bt(this,void 0,void 0,function(){var i,o;return Lt(this,function(s){switch(s.label){case 0:return t.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,n,r)];case 3:return[2,s.sent()];case 4:throw o=s.sent(),t.disposeMediaStream(i),o;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,n,r){return Bt(this,void 0,void 0,function(){var i,o,s,a,c,l,u,f,d,h=this;return Lt(this,function(p){switch(p.label){case 0:return t.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,n,i)];case 1:return o=p.sent(),s=function(){t.disposeMediaStream(e),t.cleanVideoSource(o)},a=this.scan(o,r,s),c=e.getVideoTracks(),l=Ga(Ga({},a),{stop:function(){a.stop()},streamVideoConstraintsApply:function(g,y){return Bt(this,void 0,void 0,function(){var v,m,w,E,S,R,F;return Lt(this,function($){switch($.label){case 0:v=y?c.filter(y):c,$.label=1;case 1:$.trys.push([1,6,7,8]),m=mp(v),w=m.next(),$.label=2;case 2:return w.done?[3,5]:(E=w.value,[4,E.applyConstraints(g)]);case 3:$.sent(),$.label=4;case 4:return w=m.next(),[3,2];case 5:return[3,8];case 6:return S=$.sent(),R={error:S},[3,8];case 7:try{w&&!w.done&&(F=m.return)&&F.call(m)}finally{if(R)throw R.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(g){return c.find(g).getConstraints()},streamVideoSettingsGet:function(g){return c.find(g).getSettings()},streamVideoCapabilitiesGet:function(g){return c.find(g).getCapabilities()}}),u=t.mediaStreamIsTorchCompatible(e),u&&(f=c?.find(function(g){return t.mediaStreamIsTorchCompatibleTrack(g)}),d=function(g){return Bt(h,void 0,void 0,function(){return Lt(this,function(y){switch(y.label){case 0:return[4,t.mediaStreamSetTorch(f,g)];case 1:return y.sent(),[2]}})})},l.switchTorch=d,l.stop=function(){return Bt(h,void 0,void 0,function(){return Lt(this,function(g){switch(g.label){case 0:return a.stop(),[4,d(!1)];case 1:return g.sent(),[2]}})})}),[2,l]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Bt(this,void 0,void 0,function(){var i,o;return Lt(this,function(s){switch(s.label){case 0:return t.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,n){return Bt(this,void 0,void 0,function(){var r,i;return Lt(this,function(o){switch(o.label){case 0:if(t.checkCallbackFnOrThrow(n),!e)throw new zt("A video element must be provided.");return r=t.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,i)];case 1:return o.sent(),[2,this.scan(r,n)]}})})},t.prototype.decodeFromVideoUrl=function(e,n){return Bt(this,void 0,void 0,function(){var r,i,o,s;return Lt(this,function(a){switch(a.label){case 0:if(t.checkCallbackFnOrThrow(n),!e)throw new zt("An URL must be provided.");return r=t.prepareVideoElement(),r.src=e,i=function(){t.cleanVideoSource(r)},o=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),s=this.scan(r,n,i),[2,s]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Bt(this,void 0,void 0,function(){var r;return Lt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Bt(this,void 0,void 0,function(){var r,i,o;return Lt(this,function(s){switch(s.label){case 0:return r=!!n,[4,t.attachStreamToVideo(e,n)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=s.sent(),[2,o];case 4:return r||t.cleanVideoSource(i),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Bt(this,void 0,void 0,function(){var r,i;return Lt(this,function(o){switch(o.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Bt(this,void 0,void 0,function(){var n,r;return Lt(this,function(i){switch(i.label){case 0:if(!e)throw new zt("A video element must be provided.");return n=t.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,r)];case 1:return i.sent(),[4,this.scanOneResult(n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Bt(this,void 0,void 0,function(){var n,r;return Lt(this,function(i){switch(i.label){case 0:if(!e)throw new zt("An URL must be provided.");n=t.prepareVideoElement(),n.src=e,r=this.decodeOnceFromVideoElement(n),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return t.cleanVideoSource(n),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,n,r,i){var o=this;return n===void 0&&(n=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,a){o.scan(e,function(c,l,u){if(c){s(c),u.stop();return}if(l){if(l instanceof pe&&n||l instanceof Qt&&r||l instanceof Ae&&i)return;u.stop(),a(l)}})})},t.prototype.scan=function(e,n,r){var i=this;t.checkCallbackFnOrThrow(n);var o=t.createCaptureCanvas(e),s;try{s=o.getContext("2d",{willReadFrequently:!0})}catch{s=o.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var a=function(){s=void 0,o=void 0},c=!1,l,u=function(){c=!0,clearTimeout(l),a(),r&&r()},f={stop:u},d=function(){if(!c)try{t.drawImageOnCanvas(s,e);var h=i.decodeFromCanvas(o);n(h,void 0,f),l=setTimeout(d,i.options.delayBetweenScanSuccess)}catch(v){n(void 0,v,f);var p=v instanceof Qt,g=v instanceof Ae,y=v instanceof pe;if(p||g||y){l=setTimeout(d,i.options.delayBetweenScanAttempts);return}a(),r&&r(v)}};return d(),f},t.prototype._decodeOnLoadImage=function(e){return Bt(this,void 0,void 0,function(){var n;return Lt(this,function(r){switch(r.label){case 0:return n=t.isImageLoaded(e),n?[3,2]:[4,t._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Bt(this,void 0,void 0,function(){var n;return Lt(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),t.streamTracker.push(n),[2,n]}})})},t.streamTracker=[],t})(),NH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){NH(e,t);function e(n,r){return t.call(this,new Kd,n,r)||this}return e})(Nc);var kH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){kH(e,t);function e(n,r){return t.call(this,new Ka(n),n,r)||this}return e})(Nc);var MH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){MH(e,t);function e(n,r){return t.call(this,new Gd,n,r)||this}return e})(Nc);var DH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){DH(e,t);function e(n,r){var i=this,o=new MS;return o.setHints(n),i=t.call(this,o,n,r)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(n){this.hints.set(It.POSSIBLE_FORMATS,n),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e.prototype.setHints=function(n){this.hints=n,this.reader.setHints(this.hints)},e})(Nc);var BH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();(function(t){BH(e,t);function e(n,r){return t.call(this,new Wd,n,r)||this}return e})(Nc);var LH=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),tE=(function(t){LH(e,t);function e(n,r){return t.call(this,new zd,n,r)||this}return e})(Nc);const FH={class:"layout"},UH={class:"page"},HH={class:"topbar"},$H={class:"actions"},VH=["disabled"],KH={class:"content"},jH={class:"panel"},GH={class:"panel-head"},zH={class:"inline"},WH=["disabled"],qH=["value"],YH={class:"video-wrap"},XH={key:0,class:"overlay"},ZH={class:"reticle","aria-hidden":"true"},QH={key:0,class:"scanline"},JH={key:0},e$={key:1},t$={key:2},n$={class:"video-controls"},r$=["disabled"],i$=["disabled"],o$={class:"panel"},s$={class:"panel-head"},a$={class:"right-actions"},c$=["disabled"],l$={key:0,class:"alert error"},u$={key:1,class:"alert info"},f$={class:"summary"},d$={class:"kv"},h$={class:"v"},p$={class:"kv"},g$={class:"v mono"},v$={class:"kv"},y$={class:"v mono"},m$={key:2,class:"card"},w$={class:"grid"},b$={class:"v2 mono"},E$={class:"v2"},x$={class:"v2"},A$={class:"v2 mono"},_$={class:"v2"},C$={class:"v2"},S$={class:"v2 mono"},I$={key:3,class:"card"},T$={class:"grid"},O$={class:"v2"},R$={class:"v2"},P$={class:"v2"},N$={class:"v2 mono"},k$={__name:"ScanQR",setup(t){const n=`${"http://localhost:3001".replace(/\/+$/,"")}/api`,r=Re(null),i=Re(!1),o=Re(!1),s=Re([]),a=Re(""),c=Re(""),l=Re(""),u=Re(""),f=Re(null),d=Re(null),h=Re(""),p=Re(""),g=Re(!1);function y(){g.value=!g.value}const v=Ge(()=>u.value==="valid"?"VALID":u.value==="used"?"SUDAH DIPAKAI":u.value==="invalid"?"INVALID":""),m=Ge(()=>u.value==="valid"?"ok":u.value==="used"?"warn":u.value==="invalid"?"bad":""),w=new tE;let E=null;function S(){return(localStorage.getItem("walletAddress")||"").toString().toLowerCase().trim()}function R(L){return!Array.isArray(L)||L.length===0?"":(L.find(x=>/back|rear|environment/i.test(x.label||""))||L[0]).deviceId}async function F(){h.value="",p.value="";try{const L=await tE.listVideoInputDevices();s.value=L||[],a.value&&s.value.some(x=>x.deviceId===a.value)||(a.value=R(s.value))}catch{h.value="Gagal membaca daftar kamera. Pastikan izin kamera diaktifkan."}}function $(L){const I=String(L||"").trim();if(!I)return"";try{if(/^https?:\/\//i.test(I)){const G=new URL(I).searchParams.get("tx");if(G)return G.trim()}}catch{}return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(I),I}async function U(L){f.value=null,d.value=null,u.value="",h.value="",p.value="Memproses scan tiket",o.value=!0;const I=S();if(!I){u.value="invalid",p.value="",h.value="Wallet tidak ditemukan. Login/koneksikan MetaMask dulu.",o.value=!1;return}try{const x=await fetch(`${n}/tickets/scan`,{method:"POST",headers:{"content-type":"application/json","x-wallet-address":I},body:JSON.stringify({tx_id:L})}),P=await x.json().catch(()=>null);if(x.status===409){u.value="used",p.value="",h.value=P?.message||"Tiket ini sudah di-scan dan tidak valid lagi.",f.value=P?.tx||null,d.value=P?.event||null;return}if(!x.ok){u.value="invalid",p.value="",h.value=P?.error||P?.message||"Scan gagal.";return}u.value="valid",p.value=P?.message||"Tiket valid. Scan berhasil.",f.value=P?.tx||null,d.value=P?.event||null}catch{u.value="invalid",p.value="",h.value="Gagal scan. Cek koneksi atau endpoint backend."}finally{o.value=!1}}async function B(){if(!(i.value||o.value)){if(h.value="",p.value="",c.value="",l.value="",u.value="",f.value=null,d.value=null,!r.value){h.value="Elemen video tidak tersedia.";return}a.value||await F(),i.value=!0,p.value="Arahkan kamera ke QR code";try{E=await w.decodeFromVideoDevice(a.value||void 0,r.value,async L=>{if(!L||!i.value)return;const I=L.getText();c.value=I;const x=$(I);l.value=x,W(),x?await U(x):(u.value="invalid",p.value="",h.value="QR terbaca, tapi tidak ada Transaction ID yang valid.")})}catch{i.value=!1,p.value="",h.value="Gagal memulai kamera. Pastikan izin kamera sudah diberikan."}}}function W(){if(E){try{E.stop()}catch{}E=null}i.value=!1}function V(){c.value="",l.value="",u.value="",f.value=null,d.value=null,h.value="",p.value=""}return cu(async()=>{await F()}),ug(()=>{W()}),(L,I)=>(_e(),Se("div",FH,[kt(wg,{modelValue:g.value,"onUpdate:modelValue":I[0]||(I[0]=x=>g.value=x)},null,8,["modelValue"]),q("div",UH,[q("header",HH,[q("div",{class:"left"},[q("button",{class:"hamburger",type:"button","aria-label":"Toggle menu",onClick:y},[...I[2]||(I[2]=[q("span",null,null,-1),q("span",null,null,-1),q("span",null,null,-1)])]),I[3]||(I[3]=q("div",{class:"titles"},[q("h1",{class:"title"},"Scan Ticket QR"),q("p",{class:"subtitle"},"Redeem tiket sekali pakai dari QR")],-1))]),q("div",$H,[q("button",{class:"btn primary",disabled:i.value||o.value,onClick:B},Ne(o.value?"Processing":i.value?"Scanning":"Start Scan"),9,VH)])]),q("main",KH,[q("section",jH,[q("div",GH,[I[4]||(I[4]=q("h2",null,"Camera",-1)),q("div",zH,[Nn(q("select",{class:"select","onUpdate:modelValue":I[1]||(I[1]=x=>a.value=x),disabled:i.value||s.value.length===0},[(_e(!0),Se(dr,null,fg(s.value,x=>(_e(),Se("option",{key:x.deviceId,value:x.deviceId},Ne(x.label||`Camera ${x.deviceId.slice(0,6)}`),9,qH))),128))],8,WH),[[tI,a.value]])])]),q("div",YH,[q("video",{ref_key:"videoEl",ref:r,class:"video",autoplay:"",playsinline:"",muted:""},null,512),!i.value&&!o.value?(_e(),Se("div",XH,[...I[5]||(I[5]=[tt(" Klik ",-1),q("strong",null,"Start Scan",-1),tt(" untuk mulai scan ",-1)])])):Ye("",!0),q("div",ZH,[I[6]||(I[6]=q("span",{class:"corner tl"},null,-1)),I[7]||(I[7]=q("span",{class:"corner tr"},null,-1)),I[8]||(I[8]=q("span",{class:"corner bl"},null,-1)),I[9]||(I[9]=q("span",{class:"corner br"},null,-1)),i.value?(_e(),Se("div",QH)):Ye("",!0)]),q("div",{class:ea(["badge",{on:i.value,busy:o.value}])},[o.value?(_e(),Se("span",JH,"processing")):i.value?(_e(),Se("span",e$,"scanning")):(_e(),Se("span",t$,"idle"))],2)]),q("div",n$,[q("button",{class:"btn-ctrl danger",disabled:!i.value,onClick:W},[...I[10]||(I[10]=[q("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[q("rect",{x:"3",y:"3",width:"10",height:"10",rx:"1"})],-1),tt(" Stop ",-1)])],8,r$),q("button",{class:"btn-ctrl secondary",disabled:i.value||o.value,onClick:F},[...I[11]||(I[11]=[q("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[q("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"})],-1),tt(" Refresh ",-1)])],8,i$)]),I[12]||(I[12]=q("p",{class:"hint"},"Catatan: akses kamera umumnya hanya berjalan di HTTPS atau localhost.",-1))]),q("section",o$,[q("div",s$,[I[13]||(I[13]=q("h2",null,"Hasil",-1)),q("div",a$,[q("button",{class:"btn secondary",disabled:i.value||o.value,onClick:V},"Reset",8,c$)])]),h.value?(_e(),Se("div",l$,Ne(h.value),1)):p.value?(_e(),Se("div",u$,Ne(p.value),1)):Ye("",!0),q("div",f$,[q("div",d$,[I[14]||(I[14]=q("div",{class:"k"},"Status",-1)),q("div",h$,[q("span",{class:ea(["pill",m.value])},Ne(v.value),3)])]),q("div",p$,[I[15]||(I[15]=q("div",{class:"k"},"Transaction ID",-1)),q("div",g$,Ne(l.value||""),1)]),q("div",v$,[I[16]||(I[16]=q("div",{class:"k"},"QR Text",-1)),q("div",y$,Ne(c.value||""),1)])]),f.value?(_e(),Se("div",m$,[I[24]||(I[24]=q("div",{class:"card-head"},[q("h3",null,"Detail Transaksi")],-1)),q("div",w$,[I[17]||(I[17]=q("div",{class:"k2"},"ID",-1)),q("div",b$,Ne(f.value.id),1),I[18]||(I[18]=q("div",{class:"k2"},"Kind",-1)),q("div",E$,Ne(f.value.kind),1),I[19]||(I[19]=q("div",{class:"k2"},"Status",-1)),q("div",x$,Ne(f.value.status),1),I[20]||(I[20]=q("div",{class:"k2"},"Wallet",-1)),q("div",A$,Ne(f.value.wallet),1),I[21]||(I[21]=q("div",{class:"k2"},"Amount",-1)),q("div",_$,Ne(f.value.amount),1),I[22]||(I[22]=q("div",{class:"k2"},"Created",-1)),q("div",C$,Ne(f.value.created_at),1),I[23]||(I[23]=q("div",{class:"k2"},"Event Ref",-1)),q("div",S$,Ne(f.value.ref_id||""),1)])])):Ye("",!0),d.value?(_e(),Se("div",I$,[I[29]||(I[29]=q("div",{class:"card-head"},[q("h3",null,"Detail Event")],-1)),q("div",T$,[I[25]||(I[25]=q("div",{class:"k2"},"Title",-1)),q("div",O$,Ne(d.value.title),1),I[26]||(I[26]=q("div",{class:"k2"},"Date",-1)),q("div",R$,Ne(d.value.date_iso),1),I[27]||(I[27]=q("div",{class:"k2"},"Venue",-1)),q("div",P$,Ne(d.value.venue),1),I[28]||(I[28]=q("div",{class:"k2"},"ID",-1)),q("div",N$,Ne(d.value.id),1)])])):Ye("",!0)])])])]))}},M$=ca(k$,[["__scopeId","data-v-a4956a6d"]]),HS=u6({history:$I("/"),routes:[{path:"/",name:"login",component:OD},{path:"/home",name:"home",component:pD,meta:{requiresWallet:!0}},{path:"/events/:id",name:"event",component:GB},{path:"/admin/dashboard",name:"admin-dashboard",component:()=>Ns(()=>import("./Admin_Dashboard-Cq8NvvFq.js"),__vite__mapDeps([0,1])),meta:{requiresWallet:!0}},{path:"/promoter/dashboard",name:"promoter-dashboard",component:()=>Ns(()=>import("./Promoter_Dashboard-Bsua2837.js"),__vite__mapDeps([2,3])),meta:{requiresWallet:!0}},{path:"/profile",name:"profile",component:()=>Ns(()=>import("./Profile-BtwTEVFM.js"),__vite__mapDeps([4,5])),meta:{requiresAuth:!0}},{path:"/logout",name:"logout",component:()=>Ns(()=>import("./LogoutConfirm-jkfJKRiv.js"),__vite__mapDeps([6,7]))},{path:"/wallet",name:"wallet",component:()=>Ns(()=>import("./Wallet-BXsn65NG.js"),__vite__mapDeps([8,9]))},{path:"/history",name:"history",component:()=>Ns(()=>import("./History-Bjj3c0XM.js"),__vite__mapDeps([10,11]))},{path:"/scan",name:"scan",component:M$,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",redirect:{name:"login"}}]});HS.beforeEach(t=>{if(!t.meta.requiresWallet)return!0;const e=!!localStorage.getItem("auth_token"),n=!!localStorage.getItem("walletAddress");return e||n?!0:{name:"login"}});const Lv=sI(C6);Lv.use(uI());Lv.use(HS);Lv.mount("#app");export{Pa as A,Or as B,ci as C,ug as D,Hg as E,dr as F,x4 as G,L$ as J,wg as S,ca as _,Se as a,q as b,Ge as c,kt as d,mg as e,Ps as f,Ye as g,fg as h,vn as i,tt as j,Nn as k,ct as l,ah as m,ea as n,cu as o,_e as p,lg as q,Re as r,Xi as s,Ne as t,ES as u,wr as v,Gr as w,D$ as x,Tf as y,yg as z};
